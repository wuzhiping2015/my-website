# SNAP项目架构图

## 1. 系统架构图

```
+-------------------------------------------+
|                                           |
|            Electron 应用容器               |
|                                           |
+----------------+--------------------------|
|                |                          |
| 主进程          |        渲染进程           |
| electron-main.js|       Vue 应用           |
|                |                          |
+-------+--------+--------+-----------------+
        |                 |
        |                 |
        v                 v
+---------------+  +----------------------+
|               |  |                      |
| 系统API调用     |  |     用户界面(UI)      |
| - 窗口管理      |  |   - Element Plus    |
| - 文件系统      |  |   - 自定义组件       |
| - 快捷键        |  |                      |
|               |  +----------+-----------+
+---------------+             |
                              |
                              v
                    +---------+----------+
                    |                    |
                    |   3D渲染引擎        |
                    |   (Three.js)      |
                    |                    |
                    +----+-----+--------+
                         |     |
                         |     |
                         v     v
              +----------+     +----------+
              |                           |
              | 模型加载器                  |
              | - GLTF/GLB Loader         |
              | - FBX Loader              |
              | - DRACOLoader             |
              |                           |
              +---------------------------+
                            |
                            |
                            v
             +-------------+----------------+
             |                              |
             |       外部数据源               |
             | - 服务器API (HTTP/Axios)      |
             | - MQTT数据流                  |
             | - 配置文件                    |
             |                              |
             +------------------------------+
```

## 2. 数据流图

```
 +------------------+      +------------------+      +------------------+
 |                  |      |                  |      |                  |
 |  用户界面(UI)      +----->+  组件控制器       +----->+  Three.js场景    |
 |                  |      |  (Controllers)   |      |                  |
 +--------+---------+      +--------+---------+      +-------+----------+
          ^                         ^                         |
          |                         |                         |
          |                         |                         v
 +--------+---------+      +--------+---------+      +----------------+
 |                  |      |                  |      |                |
 |   状态管理         |      |   数据服务         |      |   模型渲染器     |
 |   (Pinia)        |<-----+   (Services)     |<-----+                |
 |                  |      |                  |      |                |
 +------------------+      +--------+---------+      +----------------+
                                    |
                                    |
                          +---------v----------+
                          |                    |
                          |   后端API/MQTT      |
                          |                    |
                          +--------------------+
```

## 3. 组件结构图

```
+------------------------+
|                        |
|      App.vue           |
|                        |
+-----+------------+-----+
      |            |
      |            |
+-----v-----+ +----v-----+
|           | |          |
| 导航组件    | | 主视图    |
|           | |          |
+-----------+ +-----+----+
                    |
       +------------+------------+
       |            |            |
+------v------+ +---v--------+ +-v-----------+
|             | |            | |             |
| 3D模型查看器  | | 控制面板    | | 数据展示面板  |
|             | |            | |             |
+------+------+ +------------+ +------+------+
       |                              |
       |                              |
+------v------+               +-------v-----+
|             |               |             |
| 模型操作工具   |               | 图表组件     |
|             |               | (ECharts)   |
+-------------+               +-------------+
```

## 4. Electron进程通信图

```
+------------------------+        +-------------------------+
|                        |        |                         |
|  主进程                 |        |  渲染进程                |
|  (electron-main.js)    |        |  (Vue应用)              |
|                        |        |                         |
+------+-----------------+        +-----------------+-------+
       |                                            |
       |            IPC通信(ipcMain/ipcRenderer)    |
       +------------------+-------------------------+
                          |
                          |
             +------------v--------------+
             |                           |
             |  预加载脚本                 |
             |  (preload.js)             |
             |                           |
             +---------------------------+
```

## 5. 数据存储结构

```
+---------------------------+
|                           |
|       应用状态              |
|      (Pinia Store)        |
|                           |
+-----+---------------+-----+
      |               |
      |               |
+-----v-----+   +-----v-----+
|           |   |           |
| 模型状态    |   | 用户设置   |
|           |   |           |
+-----------+   +-----------+

+---------------------------+
|                           |
|       外部数据              |
|                           |
+-----------+---------------+
            |
            |
  +---------v----------+
  |                    |
  |   config.js        |
  |   - 服务器配置       |
  |   - 船型设置        |
  |   - 系统信息        |
  |                    |
  +--------------------+
```

## 6. 构建与部署流程

```
  +----------------+
  |                |
  |  源代码         |
  |  (src/)        |
  |                |
  +-------+--------+
          |
          | npm run build
          |
  +-------v--------+     +----------------+
  |                |     |                |
  |  Vue构建        |     |  静态资源       |
  |  (dist/)       |     |  (build/)     |
  |                |     |                |
  +-------+--------+     +--------+-------+
          |                       |
          +----------+------------+
                     |
                     | npm run electron:build
                     |
          +----------v-----------+
          |                      |
          |  Electron打包        |
          |  (ele-build/)       |
          |                      |
          +----------+-----------+
                     |
             +-------v--------+
             |                |
             |  安装包         |
             |  (.exe/.deb)   |
             |                |
             +----------------+
```

## 7. 网络通信图

```
+------------------------+         +-------------------------+
|                        |         |                         |
|  SNAP应用               |         |  后端服务器              |
|                        |         |                         |
+------+-----------------+         +-----------------+-------+
       |                                             |
       |         HTTP/HTTPS API请求 (Axios)          |
       +-------------------+-------------------------+
                           |
                           |
              +------------v--------------+
              |                           |
              |  API数据                   |
              |  - 模型数据                |
              |  - 系统信息                |
              |                           |
              +---------------------------+

+------------------------+         +-------------------------+
|                        |         |                         |
|  SNAP应用               |         |  MQTT服务器             |
|                        |         |                         |
+------+-----------------+         +-----------------+-------+
       |                                             |
       |         MQTT消息订阅与发布                    |
       +-------------------+-------------------------+
                           |
                           |
              +------------v--------------+
              |                           |
              |  实时数据流                 |
              |  - 传感器数据              |
              |  - 状态更新                |
              |  - 事件通知                |
              |                           |
              +---------------------------+
``` 