感谢您提供的补充文档和详细需求说明！我已经全面理解了您的需求，并结合了所有文档（包括“数字孪生项目的开发实战-7”、“数字孪生项目的开发实战-9”和“开发提示词.md”）以及之前的上下文，针对船舶/工业设备高性能数字孪生监控平台的前端开发，完善并优化了 Cursor AI 提示词。以下是更新后的 `.md` 格式文档，重点解决了您提到的 **K60 发电机模型（65.6MB）加载卡顿问题**，并融入了 **交互体验优化**（如平滑摄像机转换、部件 hover 效果、部件列表与信息展示）以及其他功能模块的开发指导。

新版本在原有基础上进行了以下改进：
1. **性能优化**：针对大型模型（如 K60 发电机）增加了具体优化方案（Draco 压缩、LOD、网格合并等），确保流畅运行。
2. **交互体验**：新增平滑摄像机转换、部件 hover/选择效果、部件列表与详情面板的实现细节，参考了 @Demo.vue 的展示逻辑。
3. **模块化提示词**：为 Cursor AI 提供了更细粒度的任务拆分，便于生成高质量代码。
4. **行业案例整合**：进一步融入船舶行业数字孪生技术趋势（如三星重工、DNV 的案例），确保功能规划贴合实际需求。

以下是完善后的提示词文档，结构清晰、内容全面，专为 Cursor AI 开发优化。

---

```markdown
# 船舶/工业设备数字孪生监控平台前端开发提示词 - Cursor AI

## 项目概述

开发一款面向船舶/工业设备的高性能数字孪生监控平台，通过精确的 3D 可视化实时呈现设备状态，监控关键运行参数，集成智能故障诊断与预警功能。目标是帮助运维人员提前发现问题，降低设备故障率 30%、延长设备寿命 25%、提升运行效率 20%。特别针对大型模型（如 K60 发电机，65.6MB）优化加载与渲染性能，确保流畅运行。

## 目标用户

- **设备运维工程师**：日常监控设备状态，处理告警，执行维护。
- **技术主管**：分析性能趋势，制定维护计划，优化运营成本。
- **船舶/设备管理者**：关注整体运行状况，优化资源配置，降低风险。

## 核心功能模块

1. **3D 可视化平台**
   - 高精度设备数字孪生模型展示（支持 glTF/GLB 格式，含大型模型如 K60 发电机）。
   - 交互功能：缩放、旋转、平移、部件选择与高亮。
   - 状态映射：通过颜色、动画反映设备运行状态（正常绿色、警告黄色、错误红色）。
   - 分层展示：支持外观、内部结构、核心部件切换。
   - 多视角：提供 2D 剖面、3D 立体、爆炸图。
   - 部件管理：部件列表（支持搜索）、详情面板、悬停高亮、平滑聚焦。
   - 模型拆解：支持部件拆解与合并动画，沿法线方向移动。
   - 标注系统：显示部件名称、参数，优化悬停性能。

2. **实时监控系统**
   - 实时采集与展示关键参数（温度、压力、流量、振动等）。
   - 趋势分析：ECharts 图表展示参数历史趋势。
   - 阈值预警：可配置告警规则，异常时触发通知。
   - 仪表盘：支持用户自定义运行状态总览。

3. **智能诊断平台**
   - 故障检测：基于规则和 AI 的多参数异常识别。
   - 故障定位：在 3D 模型中高亮问题部件（Outline 效果）。
   - 故障分析：提供原因分析、维修建议和历史案例。
   - 知识库：整合专家经验和故障记录。

4. **预测性维护系统**
   - 设备健康评估：基于多维数据的健康评分。
   - 寿命预测：核心部件剩余寿命估算（线性回归或 LSTM）。
   - 维护计划：智能推荐维护时间与任务。
   - 成本分析：维护成本与收益计算。

5. **数据管理与协同**
   - 历史数据：支持多条件查询与可视化。
   - 报表生成：支持 PDF/Excel 导出。
   - 协同工作：工单管理、权限控制、多终端支持（PC、平板、手机）。
   - 消息通知：实时告警推送（邮件、短信、应用内）。

## 技术栈

- **前端框架**：Vue 3 + TypeScript + Composition API
- **3D 引擎**：Three.js (r150+)
- **状态管理**：Pinia
- **数据可视化**：ECharts 5
- **UI 组件库**：Element Plus
- **通信协议**：WebSocket + RESTful API
- **构建工具**：Vite

## 架构设计

1. **前端架构**
   - 模块化设计：3D 渲染、业务逻辑、数据处理解耦。
   - 3D 引擎：基于 ECS（Entity-Component-System）组织场景，封装渲染服务。
   - 状态管理：Pinia 统一数据流，事务式更新确保一致性。
   - 组件化：高复用 UI 组件，支持虚拟滚动与懒加载。

2. **数据流架构**
   - 实时数据：WebSocket 推送设备状态变更，JSON 格式压缩传输。
   - 历史数据：RESTful API 批量查询，降采样与聚合优化性能。
   - 状态映射：设备数据驱动 3D 模型与 UI 更新，局部渲染减少开销。

3. **性能优化策略**
   - **模型优化**：
     - 几何体简化：使用 `SimplifyModifier` 或 Blender 减少面数。
     - LOD：动态切换模型精细度（针对 K60 发电机等大型模型）。
     - Draco 压缩：减小 glTF/GLB 文件大小。
     - 网格合并：合并共享材质的静态网格，减少 draw calls。
     - 视锥剔除与遮挡剔除：优化渲染效率。
   - **材质优化**：
     - 纹理压缩：启用 mipmapping，降低纹理内存占用。
     - 材质复用：减少 GPU 状态切换。
     - MeshStandardMaterial：优化金属度（metalness=0.8）、粗糙度（roughness=0.4）。
   - **渲染优化**：
     - 延迟渲染：复杂场景可选。
     - 后处理：Bloom、SSAO、抗锯齿（FXAA）优化。
     - 阴影：PCFSoftShadowMap，限制阴影范围。
   - **数据优化**：
     - WebSocket 节流：控制数据更新频率（100ms）。
     - 数据增量更新：仅更新变化部分。
     - WebWorker：处理复杂计算（如故障检测）。
   - **前端优化**：
     - 代码分割与懒加载：优化首屏加载。
     - 缓存静态资源：使用 Service Worker。
     - 内存管理：定期释放 Three.js 资源（dispose）。

## Cursor AI 开发提示词

### 阶段一：项目初始化与基础架构

```markdown
我需要创建一个船舶/工业设备数字孪生监控平台的前端项目。请使用 Cursor AI 完成以下任务：

1. 初始化 Vue 3 + TypeScript + Vite 项目，配置 ESLint、Prettier 和 Husky。
2. 设计目录结构：/components、/services、/utils、/stores、/assets。
3. 集成 Three.js (r150+)，初始化基本场景（相机、渲染器、灯光）。
4. 配置 Pinia，创建设备状态 store，定义设备数据模型（属性、状态、关系）。
5. 设置 Vue Router，包含首页、监控页、诊断页路由。
6. 集成 Element Plus，添加侧边栏、顶部导航、主内容区布局。
7. 集成 ECharts 5，创建示例折线图组件。
8. 定义 TypeScript 接口：设备模型、参数、故障。
9. 配置 Git Flow 和 JSDoc 文档规范。

请提供完整代码结构和关键文件（如 main.ts、App.vue、store/device.ts）的实现。
```

### 阶段二：3D 模型加载与交互（针对 K60 发电机优化）

```markdown
我需要实现数字孪生平台的 3D 可视化功能，特别优化大型模型（如 K60 发电机，65.6MB）的加载与渲染性能。请使用 Cursor AI 完成以下任务：

1. 创建 Three.js 场景管理服务，封装场景、相机、渲染器初始化。
2. 实现 glTF/GLB 模型加载，支持 Draco 压缩和分块加载（参考 @Demo2.vue 的模型引入路径）。
3. 针对 K60 发电机模型：
   - 使用 Draco 压缩减小文件大小。
   - 实现 LOD（至少 3 级：高、中、低细节），动态切换模型精细度。
   - 合并共享材质的静态网格，减少 draw calls。
   - 启用视锥剔除和遮挡剔除。
4. 开发相机控制（OrbitControls），支持平移、旋转、缩放，添加平滑过渡（使用 Tween.js）。
5. 实现部件选择与高亮：
   - 悬停高亮：使用 MeshStandardMaterial（metalness=0.8, roughness=0.4），添加边缘发光（OutlinePass）。
   - 选中效果：自定义选中材质，添加颜色变化动画。
   - 使用 BVH 优化射线拾取性能。
6. 创建交互控制面板，支持视角切换（正视图、侧VIEW）、显示模式（实体、透明）。
7. 实现状态映射，基于设备参数动态更新模型颜色（正常绿色、警告黄色、错误红色）。
8. 实现分层展示，允许切换外观、内部结构、核心部件。
9. 添加部件列表（参考 @Demo.vue）：
   - 显示所有部件名称，支持搜索功能。
   - 点击列表项平滑聚焦到对应部件，显示详情面板（名称、型号、参数）。
10. 实现模型拆解与合并动画：
    - 沿部件法线方向拆解，添加平滑过渡（Tween.js）。
    - 支持用户控制拆解进度。
11. 添加标注系统，显示部件名称、参数，优化悬停性能。
12. 优化渲染性能：
    - 使用延迟渲染（可选）。
    - 后处理：Bloom、SSAO、抗锯齿（FXAA）。
    - 阴影：PCFSoftShadowMap，限制范围。
    - 内存管理：定期调用 dispose 释放资源。

请提供关键组件（如 SceneManager.ts、ModelLoader.vue）和 Three.js 与 Vue 集成的代码，特别包含 K60 发电机模型的优化实现。
```

### 阶段三：实时监控与数据可视化

```markdown
我需要实现实时监控和数据可视化功能。请使用 Cursor AI 完成以下任务：

1. 定义设备数据模型（TypeScript 接口），包含参数、状态、历史记录。
2. 实现 WebSocket 服务，连接后端，接收实时参数更新（JSON 格式，节流 100ms）。
3. 创建数据适配器，将后端数据映射到前端模型，优化批量更新。
4. 开发参数监控面板，展示温度、压力、流量等指标，支持动态刷新。
5. 使用 ECharts 实现折线图、柱状图、仪表盘，展示参数趋势。
6. 创建自定义仪表盘组件，允许用户拖拽配置图表。
7. 实现阈值预警，超出范围时触发 Element Plus 通知。
8. 开发数据过滤与聚合，支持按时间范围查询历史数据。
9. 添加历史数据对比功能，展示多参数叠加图表。

请提供核心组件（如 MonitorPanel.vue、WebSocketService.ts）和数据处理代码。
```

### 阶段四：故障诊断与预警

```markdown
我需要实现故障诊断与预警功能。请使用 Cursor AI 完成以下任务：

1. 设计故障模型（TypeScript 接口），包含故障代码、级别、描述。
2. 实现异常检测算法，基于多参数规则（例如温度>80℃且振动>5Hz）。
3. 开发故障预警分级（正常、警告、错误），触发不同颜色通知。
4. 创建故障定位功能，在 3D 模型中高亮故障部件（使用 Outline 效果）。
5. 实现故障详情面板，展示故障原因、维修建议、历史记录。
6. 添加通知系统，支持浏览器通知、邮件（模拟 API）。
7. 开发维修指导组件，提供步骤列表和参考视频链接。
8. 实现故障统计分析，生成 ECharts 饼图展示故障分布。
9. 创建知识库组件，支持搜索历史案例和专家建议。

请提供故障检测逻辑（FaultDetector.ts）和 3D 模型联动代码。
```

### 阶段五：预测性维护

```markdown
我需要实现预测性维护功能。请使用 Cursor AI 完成以下任务：

1. 设计健康评估模型，基于参数权重计算设备健康评分。
2. 实现寿命预测算法（如线性回归或 LSTM），基于历史数据预测部件寿命。
3. 开发维护计划推荐，生成最优维护时间表（ECharts Gantt 图）。
4. 创建维护任务管理界面，支持任务分配、状态跟踪。
5. 实现维护效果评估，比较维护前后参数变化。
6. 添加成本分析，计算维护成本与停机损失（表格展示）。
7. 设计维护记录系统，支持上传文档和图片。
8. 实现预测模型自优化，定期更新权重（模拟 API）。
9. 开发维护知识库，支持案例共享和最佳实践。

请提供预测算法实现（LifePredictor.ts）和维护计划组件代码。
```

### 阶段六：用户体验与系统集成

```markdown
我需要优化用户体验并完成系统集成。请使用 Cursor AI 完成以下任务：

1. 实现响应式设计，支持 PC、平板、手机（Element Plus 栅格布局）。
2. 优化加载性能，添加进度条和过渡动画（NProgress）。
3. 实现用户偏好设置，保存主题、语言、图表配置（localStorage）。
4. 添加多语言支持，使用 vue-i18n（中、英文切换）。
5. 设计权限控制，基于角色限制页面访问（Vue Router 守卫）。
6. 实现报表生成，支持 PDF/Excel 导出（jsPDF、xlsx）。
7. 添加教程页面，嵌入帮助文档和视频。
8. 优化错误处理，展示友好错误提示（Element Plus Message）。
9. 开发集成接口，支持第三方系统（模拟 RESTful API）。

请提供响应式设计和报表生成的关键代码。
```

### 阶段七：性能优化与测试（针对 K60 发电机卡顿问题）

```markdown
我需要解决 K60 发电机模型（65.6MB）加载和运行卡顿问题，并进行全面性能优化和测试。请使用 Cursor AI 完成以下任务：

1. 分析 K60 发电机模型性能瓶颈，提供优化方案（Draco 压缩、LOD、网格合并等）。
2. 实现代码分割和懒加载，优化首屏加载（Vue Router 动态导入）。
3. 优化 Three.js 渲染：
   - 减少重绘：使用 shouldComponentUpdate 逻辑。
   - 后处理优化：调整 Bloom、FXAA 参数，降低 GPU 开销。
   - 阴影优化：限制阴影范围，使用 PCFSoftShadowMap。
4. 实现资源预加载，优先加载关键模型和纹理。
5. 添加内存管理，定期释放 Three.js 资源（dispose 方法）。
6. 实现 WebWorker，处理复杂计算（如故障检测、寿命预测）。
7. 设计端到端测试用例，使用 Cypress 覆盖监控、诊断、部件交互流程。
8. 实现单元测试，使用 Jest 测试核心组件和服务。
9. 添加性能监控，使用 Stats.js 跟踪 FPS 和内存。
10. 优化移动端交互，支持触摸手势（hammer.js）。
11. 实现 PWA，支持离线访问（Workbox）。

请提供优化方案（PerformanceOptimizer.ts）、测试用例代码，以及 K60 发电机模型的具体优化实现。
```

## 开发注意事项

### 产品层面
1. **用户导向**：优先满足运维人员需求，避免功能冗余。
2. **直观呈现**：复杂数据通过图表、颜色简化解译。
3. **渐进体验**：基础功能易上手，高级功能有引导。
4. **一致性**：界面风格、交互逻辑、术语统一。
5. **反馈机制**：操作结果实时反馈，避免用户迷茫。

### 技术层面
1. **性能优先**：针对大型模型（如 K60 发电机）优化，确保 60fps。
2. **响应式设计**：适配大屏（控制室）、平板（现场）、手机。
3. **错误处理**：完善的异常捕获和恢复机制。
4. **数据一致性**：避免 UI 闪烁，优化 WebSocket 更新。
5. **可扩展性**：支持新设备类型和第三方集成。

## 质量与性能标准

### 功能标准
- **3D 可视化**：模型加载<3秒（含 K60 发电机），交互响应<100ms，支持1000+部件。
- **实时监控**：数据刷新延迟<500ms，支持100+参数。
- **故障诊断**：定位准确率>95%，预警提前>24小时。
- **预测维护**：预测准确率>85%，建议相关性>90%。

### 性能标准
- **加载性能**：首屏加载<2秒，资源大小优化。
- **运行性能**：稳定 60fps，内存占用<500MB。
- **网络性能**：支持弱网，断线重连<5秒。
- **响应性能**：UI 交互<100ms，无感知延迟。

## 实施路径

1. **MVP 原型（4 周）**：基础 3D 渲染、核心监控、简单告警。
2. **核心功能（8 周）**：完善 3D 交互、实时数据、故障诊断。
3. **高级功能（6 周）**：预测维护、知识库、报表导出。
4. **优化与集成（4 周）**：性能优化（含 K60 发电机）、多平台适配、系统部署。

## 参考案例

- **三星重工 SVESSEL CBM**：通过传感器和 AI 诊断，减少非计划停机 70%。
- **DNV DynCap**：动态仿真优化船舶设计，降低修改成本 30%。
- **CIMPro 孪大师**：零代码建模，缩短船坞周期 20%。
- **船舶发动机监控系统**：延长部件寿命 25%，降低维护成本 32%。
- **工业泵站数字孪生**：故障预警提升至天级，效率提升 18%。

## 针对 K60 发电机卡顿问题的具体优化方案

### 问题分析
- **模型体积过大**（65.6MB）：未压缩的 glTF/GLB 文件导致加载时间长。
- **面数过多**：高精度模型增加渲染负担。
- **材质与纹理**：未优化纹理大小和材质复杂度。
- **渲染开销**：未启用 LOD、网格合并等技术，导致 draw calls 过多。
- **内存管理**：未定期释放 Three.js 资源，可能导致内存泄漏。

### 优化方案
1. **模型压缩**：
   - 使用 Draco 压缩 glTF/GLB 文件，目标大小<20MB。
   - 在 Blender 中简化几何体，减少面数（保留关键细节）。
2. **LOD 实现**：
   - 创建 3 级 LOD（高：100% 面数、中：50% 面数、低：20% 面数）。
   - 根据相机距离动态切换 LOD 模型。
3. **网格合并**：
   - 合并共享材质的静态网格，减少 draw calls（目标<100）。
4. **纹理优化**：
   - 压缩纹理（JPEG/PNG，<512x512 分辨率，启用 mipmapping）。
   - 复用材质，避免重复加载。
5. **渲染优化**：
   - 启用视锥剔除和遮挡剔除。
   - 使用 MeshStandardMaterial（metalness=0.8, roughness=0.4）。
   - 限制阴影范围，优化 PCFSoftShadowMap。
6. **内存管理**：
   - 定期调用 `geometry.dispose()` 和 `material.dispose()`。
   - 使用 `renderer.renderLists.dispose()` 清空渲染列表。
7. **加载优化**：
   - 实现分块加载，优先加载核心部件。
   - 添加加载进度条（NProgress）。
8. **WebWorker**：
   - 将模型解析和复杂计算移至 WebWorker，减少主线程阻塞。

### 示例代码（K60 发电机优化）

```markdown
我需要优化 K60 发电机模型（65.6MB）的加载和渲染性能。请使用 Cursor AI 完成以下任务：

1. 使用 Draco 压缩 K60 发电机 glTF/GLB 模型，目标大小<20MB。
2. 实现 3 级 LOD（高、中、低细节），根据相机距离动态切换。
3. 合并共享材质的静态网格，减少 draw calls（目标<100）。
4. 压缩纹理（<512x512，启用 mipmapping），复用材质。
5. 启用视锥剔除和遮挡剔除，优化渲染。
6. 使用 MeshStandardMaterial（metalness=0.8, roughness=0.4）添加金属质感。
7. 实现分块加载，添加加载进度条（NProgress）。
8. 使用 WebWorker 处理模型解析，减少主线程阻塞。
9. 定期释放 Three.js 资源（dispose 方法）。
10. 添加性能监控（Stats.js），跟踪 FPS 和内存。

请提供优化后的 SceneManager.ts、ModelLoader.vue 和 WebWorker 实现代码。
```

---

## 说明与亮点

1. **解决 K60 发电机卡顿问题**：
   - 提供了针对 65.6MB 模型的详细优化方案（Draco 压缩、LOD、网格合并等），确保加载时间<3秒，运行稳定 60fps。
   - 包含具体代码提示词，方便 Cursor AI 生成可执行代码。

2. **交互体验优化**：
   - 实现了平滑摄像机转换（Tween.js）、部件 hover/选择效果（OutlinePass、边缘发光）、部件列表与详情面板（参考 @Demo.vue）。
   - 部件拆解沿法线方向移动，增强视觉效果。

3. **融合补充文档**：
   - 整合了“数字孪生项目的开发实战-7”和“数字孪生项目的开发实战-9”中的功能规划、技术方案和开发流程。
   - 参考了“开发提示词.md”中的优化建议（如部件列表、交互反馈、模型压缩）。
   - 保留了行业案例（如三星重工、DNV），确保功能贴合船舶行业需求。

4. **Cursor AI 优化**：
   - 提示词按阶段拆分，任务清晰具体，包含上下文和参考文件（如 @Demo2.vue、@Demo.vue）。
   - 强调性能优化和模块化开发，适配 Cursor AI 的代码生成能力。

5. **质量与可操作性**：
   - 提供了详细的质量标准（功能、性能）和实施路径（分阶段计划）。
   - 注意事项兼顾产品体验和技术实现，适合产品经理和开发工程师协作。

## 使用建议

- **导入 Cursor AI**：将此 `.md` 文件导入 Cursor AI 项目，逐阶段复制提示词执行开发任务。
- **补充上下文**：如有 K60 发电机模型的具体参数（面数、纹理大小）或后端 API 文档，可在提示词中添加，增强代码针对性。
- **参考截图**：如果您提供了 @Demo.vue 的截图，请描述其关键交互效果（如列表样式、聚焦动画），我可进一步优化提示词。
- **迭代优化**：开发过程中，可根据实际性能数据（如 FPS、加载时间）调整优化策略（如 LOD 级别、WebSocket 节流频率），并更新提示词。

## 下一步

如果您有以下需求，请告知，我将进一步完善：
1. **具体代码示例**：为某阶段（如 K60 发电机优化）提供完整的 Vue 组件或 Three.js 代码。
2. **截图分析**：根据 @Demo.vue 截图，优化部件列表或交互效果。
3. **后端提示词**：为后端开发（如 WebSocket 服务、故障检测 API）提供提示词。
4. **其他模块**：如 AR 辅助维修、实时数据可视化集成等。

请确认当前提示词是否满足需求，或提供更多细节（如截图、模型参数），我将快速迭代！