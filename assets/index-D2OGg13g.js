import{e as lr,C as ra,L as I7,F as L7,G as ML,q as _f,ab as Rs,m as fC,l as KF,k as WS,ac as pC,u as qF,x as LA,t as Ru,ad as PM,ae as Cae,c as Tae,f as Mae,R as ZF,Z as YF,a2 as aT,af as kae,s as GS,ag as Eae,N as Ta,K as XF,p as oT,O as DA,A as D7,y as y0,P as JF,z as Oc,S as Aae,D as Uc,r as Pae,v as Iae,E as Lae,ah as _0,ai as Dae,aj as Rae,J as Oae,ak as of,a3 as zae,Q as sy,a4 as Bae,a5 as Fae,al as Nae,am as wg,an as xg,ao as QF,V as na,ap as Kw,aq as R7,ar as qw,as as UO,a9 as WO,at as GO,au as KO,av as O7,aw as qO,n as Dc,ax as $ae,ay as Vae,a6 as Fs,az as Hae,aA as jae,M as z7,o as sf,aB as ZO,j as Uae,i as B7,aC as Wae,aD as Gae,aE as Kae,aF as F7,aG as zc,aH as l1,aI as Lc,aJ as qae,aK as Zae,aL as eN,aM as Yae,U as tN}from"./three-core--iQZo0u8.js";import{G as Ny,D as sT,m as Xae}from"./three-examples-Dmr9jpbc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function YO(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Xi={},gy=[],ai=()=>{},Jae=()=>!1,IM=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),XO=e=>e.startsWith("onUpdate:"),Fa=Object.assign,JO=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Qae=Object.prototype.hasOwnProperty,Er=(e,t)=>Qae.call(e,t),sn=Array.isArray,yy=e=>Zw(e)==="[object Map]",LM=e=>Zw(e)==="[object Set]",Kv=e=>Zw(e)==="[object Date]",Dn=e=>typeof e=="function",Ln=e=>typeof e=="string",Ku=e=>typeof e=="symbol",nr=e=>e!==null&&typeof e=="object",G1=e=>(nr(e)||Dn(e))&&Dn(e.then)&&Dn(e.catch),N7=Object.prototype.toString,Zw=e=>N7.call(e),vC=e=>Zw(e).slice(8,-1),lT=e=>Zw(e)==="[object Object]",QO=e=>Ln(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,u1=YO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),DM=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},eoe=/-(\w)/g,Gs=DM(e=>e.replace(eoe,(t,n)=>n?n.toUpperCase():"")),toe=/\B([A-Z])/g,eh=DM(e=>e.replace(toe,"-$1").toLowerCase()),Yw=DM(e=>e.charAt(0).toUpperCase()+e.slice(1)),c1=DM(e=>e?`on${Yw(e)}`:""),bf=(e,t)=>!Object.is(e,t),mC=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},$7=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},kL=e=>{const t=parseFloat(e);return isNaN(t)?e:t},noe=e=>{const t=Ln(e)?Number(e):NaN;return isNaN(t)?e:t};let nN;const RM=()=>nN||(nN=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _n(e){if(sn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Ln(r)?ooe(r):_n(r);if(i)for(const a in i)t[a]=i[a]}return t}else if(Ln(e)||nr(e))return e}const roe=/;(?![^(]*\))/g,ioe=/:([^]+)/,aoe=/\/\*[^]*?\*\//g;function ooe(e){const t={};return e.replace(aoe,"").split(roe).forEach(n=>{if(n){const r=n.split(ioe);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function se(e){let t="";if(Ln(e))t=e;else if(sn(e))for(let n=0;n<e.length;n++){const r=se(e[n]);r&&(t+=r+" ")}else if(nr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Bu(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Ln(t)&&(e.class=se(t)),n&&(e.style=_n(n)),e}const soe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",loe=YO(soe);function V7(e){return!!e||e===""}function uoe(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=$y(e[r],t[r]);return n}function $y(e,t){if(e===t)return!0;let n=Kv(e),r=Kv(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ku(e),r=Ku(t),n||r)return e===t;if(n=sn(e),r=sn(t),n||r)return n&&r?uoe(e,t):!1;if(n=nr(e),r=nr(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,a=Object.keys(t).length;if(i!==a)return!1;for(const o in e){const s=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(s&&!l||!s&&l||!$y(e[o],t[o]))return!1}}return String(e)===String(t)}function H7(e,t){return e.findIndex(n=>$y(n,t))}const j7=e=>!!(e&&e.__v_isRef===!0),Xe=e=>Ln(e)?e:e==null?"":sn(e)||nr(e)&&(e.toString===N7||!Dn(e.toString))?j7(e)?Xe(e.value):JSON.stringify(e,U7,2):String(e),U7=(e,t)=>j7(t)?U7(e,t.value):yy(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],a)=>(n[RA(r,a)+" =>"]=i,n),{})}:LM(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>RA(n))}:Ku(t)?RA(t):nr(t)&&!sn(t)&&!lT(t)?String(t):t,RA=(e,t="")=>{var n;return Ku(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ds;class W7{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ds,!t&&ds&&(this.index=(ds.scopes||(ds.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ds;try{return ds=this,t()}finally{ds=n}}}on(){ds=this}off(){ds=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function e3(e){return new W7(e)}function t3(){return ds}function n3(e,t=!1){ds&&ds.cleanups.push(e)}let ta;const OA=new WeakSet;class G7{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ds&&ds.active&&ds.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,OA.has(this)&&(OA.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||q7(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rN(this),Z7(this);const t=ta,n=Hu;ta=this,Hu=!0;try{return this.fn()}finally{Y7(this),ta=t,Hu=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)a3(t);this.deps=this.depsTail=void 0,rN(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?OA.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){EL(this)&&this.run()}get dirty(){return EL(this)}}let K7=0,d1,h1;function q7(e,t=!1){if(e.flags|=8,t){e.next=h1,h1=e;return}e.next=d1,d1=e}function r3(){K7++}function i3(){if(--K7>0)return;if(h1){let t=h1;for(h1=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;d1;){let t=d1;for(d1=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Z7(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Y7(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),a3(r),coe(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function EL(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(X7(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function X7(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===K1))return;e.globalVersion=K1;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!EL(e)){e.flags&=-3;return}const n=ta,r=Hu;ta=e,Hu=!0;try{Z7(e);const i=e.fn(e._value);(t.version===0||bf(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ta=n,Hu=r,Y7(e),e.flags&=-3}}function a3(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)a3(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function coe(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Hu=!0;const J7=[];function jf(){J7.push(Hu),Hu=!1}function Uf(){const e=J7.pop();Hu=e===void 0?!0:e}function rN(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ta;ta=void 0;try{t()}finally{ta=n}}}let K1=0,doe=class{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class OM{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ta||!Hu||ta===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ta)n=this.activeLink=new doe(ta,this),ta.deps?(n.prevDep=ta.depsTail,ta.depsTail.nextDep=n,ta.depsTail=n):ta.deps=ta.depsTail=n,Q7(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ta.depsTail,n.nextDep=void 0,ta.depsTail.nextDep=n,ta.depsTail=n,ta.deps===n&&(ta.deps=r)}return n}trigger(t){this.version++,K1++,this.notify(t)}notify(t){r3();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{i3()}}}function Q7(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Q7(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const uT=new WeakMap,Pv=Symbol(""),AL=Symbol(""),q1=Symbol("");function jo(e,t,n){if(Hu&&ta){let r=uT.get(e);r||uT.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new OM),i.map=r,i.key=n),i.track()}}function Fd(e,t,n,r,i,a){const o=uT.get(e);if(!o){K1++;return}const s=l=>{l&&l.trigger()};if(r3(),t==="clear")o.forEach(s);else{const l=sn(e),c=l&&QO(n);if(l&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===q1||!Ku(p)&&p>=h)&&s(f)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),c&&s(o.get(q1)),t){case"add":l?c&&s(o.get("length")):(s(o.get(Pv)),yy(e)&&s(o.get(AL)));break;case"delete":l||(s(o.get(Pv)),yy(e)&&s(o.get(AL)));break;case"set":yy(e)&&s(o.get(Pv));break}}i3()}function hoe(e,t){const n=uT.get(e);return n&&n.get(t)}function Sg(e){const t=ei(e);return t===e?t:(jo(t,"iterate",q1),Xl(e)?t:t.map(Uo))}function zM(e){return jo(e=ei(e),"iterate",q1),e}const foe={__proto__:null,[Symbol.iterator](){return zA(this,Symbol.iterator,Uo)},concat(...e){return Sg(this).concat(...e.map(t=>sn(t)?Sg(t):t))},entries(){return zA(this,"entries",e=>(e[1]=Uo(e[1]),e))},every(e,t){return Ad(this,"every",e,t,void 0,arguments)},filter(e,t){return Ad(this,"filter",e,t,n=>n.map(Uo),arguments)},find(e,t){return Ad(this,"find",e,t,Uo,arguments)},findIndex(e,t){return Ad(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ad(this,"findLast",e,t,Uo,arguments)},findLastIndex(e,t){return Ad(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ad(this,"forEach",e,t,void 0,arguments)},includes(...e){return BA(this,"includes",e)},indexOf(...e){return BA(this,"indexOf",e)},join(e){return Sg(this).join(e)},lastIndexOf(...e){return BA(this,"lastIndexOf",e)},map(e,t){return Ad(this,"map",e,t,void 0,arguments)},pop(){return pb(this,"pop")},push(...e){return pb(this,"push",e)},reduce(e,...t){return iN(this,"reduce",e,t)},reduceRight(e,...t){return iN(this,"reduceRight",e,t)},shift(){return pb(this,"shift")},some(e,t){return Ad(this,"some",e,t,void 0,arguments)},splice(...e){return pb(this,"splice",e)},toReversed(){return Sg(this).toReversed()},toSorted(e){return Sg(this).toSorted(e)},toSpliced(...e){return Sg(this).toSpliced(...e)},unshift(...e){return pb(this,"unshift",e)},values(){return zA(this,"values",Uo)}};function zA(e,t,n){const r=zM(e),i=r[t]();return r!==e&&!Xl(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=n(a.value)),a}),i}const poe=Array.prototype;function Ad(e,t,n,r,i,a){const o=zM(e),s=o!==e&&!Xl(e),l=o[t];if(l!==poe[t]){const f=l.apply(e,a);return s?Uo(f):f}let c=n;o!==e&&(s?c=function(f,p){return n.call(this,Uo(f),p,e)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,e)}));const h=l.call(o,c,r);return s&&i?i(h):h}function iN(e,t,n,r){const i=zM(e);let a=n;return i!==e&&(Xl(e)?n.length>3&&(a=function(o,s,l){return n.call(this,o,s,l,e)}):a=function(o,s,l){return n.call(this,o,Uo(s),l,e)}),i[t](a,...r)}function BA(e,t,n){const r=ei(e);jo(r,"iterate",q1);const i=r[t](...n);return(i===-1||i===!1)&&u3(n[0])?(n[0]=ei(n[0]),r[t](...n)):i}function pb(e,t,n=[]){jf(),r3();const r=ei(e)[t].apply(e,n);return i3(),Uf(),r}const voe=YO("__proto__,__v_isRef,__isVue"),eW=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ku));function moe(e){Ku(e)||(e=String(e));const t=ei(this);return jo(t,"has",e),t.hasOwnProperty(e)}class tW{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(i?a?Moe:aW:a?iW:rW).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=sn(t);if(!i){let l;if(o&&(l=foe[n]))return l;if(n==="hasOwnProperty")return moe}const s=Reflect.get(t,n,li(t)?t:r);return(Ku(n)?eW.has(n):voe(n))||(i||jo(t,"get",n),a)?s:li(s)?o&&QO(n)?s:s.value:nr(s)?i?b0(s):Ar(s):s}}class nW extends tW{constructor(t=!1){super(!1,t)}set(t,n,r,i){let a=t[n];if(!this._isShallow){const l=qv(a);if(!Xl(r)&&!qv(r)&&(a=ei(a),r=ei(r)),!sn(t)&&li(a)&&!li(r))return l?!1:(a.value=r,!0)}const o=sn(t)&&QO(n)?Number(n)<t.length:Er(t,n),s=Reflect.set(t,n,r,li(t)?t:i);return t===ei(i)&&(o?bf(r,a)&&Fd(t,"set",n,r):Fd(t,"add",n,r)),s}deleteProperty(t,n){const r=Er(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Fd(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Ku(n)||!eW.has(n))&&jo(t,"has",n),r}ownKeys(t){return jo(t,"iterate",sn(t)?"length":Pv),Reflect.ownKeys(t)}}class goe extends tW{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const yoe=new nW,_oe=new goe,boe=new nW(!0);const PL=e=>e,KS=e=>Reflect.getPrototypeOf(e);function woe(e,t,n){return function(...r){const i=this.__v_raw,a=ei(i),o=yy(a),s=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...r),h=n?PL:t?IL:Uo;return!t&&jo(a,"iterate",l?AL:Pv),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:s?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function qS(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function xoe(e,t){const n={get(i){const a=this.__v_raw,o=ei(a),s=ei(i);e||(bf(i,s)&&jo(o,"get",i),jo(o,"get",s));const{has:l}=KS(o),c=t?PL:e?IL:Uo;if(l.call(o,i))return c(a.get(i));if(l.call(o,s))return c(a.get(s));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!e&&jo(ei(i),"iterate",Pv),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=ei(a),s=ei(i);return e||(bf(i,s)&&jo(o,"has",i),jo(o,"has",s)),i===s?a.has(i):a.has(i)||a.has(s)},forEach(i,a){const o=this,s=o.__v_raw,l=ei(s),c=t?PL:e?IL:Uo;return!e&&jo(l,"iterate",Pv),s.forEach((h,f)=>i.call(a,c(h),c(f),o))}};return Fa(n,e?{add:qS("add"),set:qS("set"),delete:qS("delete"),clear:qS("clear")}:{add(i){!t&&!Xl(i)&&!qv(i)&&(i=ei(i));const a=ei(this);return KS(a).has.call(a,i)||(a.add(i),Fd(a,"add",i,i)),this},set(i,a){!t&&!Xl(a)&&!qv(a)&&(a=ei(a));const o=ei(this),{has:s,get:l}=KS(o);let c=s.call(o,i);c||(i=ei(i),c=s.call(o,i));const h=l.call(o,i);return o.set(i,a),c?bf(a,h)&&Fd(o,"set",i,a):Fd(o,"add",i,a),this},delete(i){const a=ei(this),{has:o,get:s}=KS(a);let l=o.call(a,i);l||(i=ei(i),l=o.call(a,i)),s&&s.call(a,i);const c=a.delete(i);return l&&Fd(a,"delete",i,void 0),c},clear(){const i=ei(this),a=i.size!==0,o=i.clear();return a&&Fd(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=woe(i,e,t)}),n}function o3(e,t){const n=xoe(e,t);return(r,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Er(n,i)&&i in r?n:r,i,a)}const Soe={get:o3(!1,!1)},Coe={get:o3(!1,!0)},Toe={get:o3(!0,!1)};const rW=new WeakMap,iW=new WeakMap,aW=new WeakMap,Moe=new WeakMap;function koe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eoe(e){return e.__v_skip||!Object.isExtensible(e)?0:koe(vC(e))}function Ar(e){return qv(e)?e:l3(e,!1,yoe,Soe,rW)}function s3(e){return l3(e,!1,boe,Coe,iW)}function b0(e){return l3(e,!0,_oe,Toe,aW)}function l3(e,t,n,r,i){if(!nr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const o=Eoe(e);if(o===0)return e;const s=new Proxy(e,o===2?r:n);return i.set(e,s),s}function wf(e){return qv(e)?wf(e.__v_raw):!!(e&&e.__v_isReactive)}function qv(e){return!!(e&&e.__v_isReadonly)}function Xl(e){return!!(e&&e.__v_isShallow)}function u3(e){return e?!!e.__v_raw:!1}function ei(e){const t=e&&e.__v_raw;return t?ei(t):e}function _r(e){return!Er(e,"__v_skip")&&Object.isExtensible(e)&&$7(e,"__v_skip",!0),e}const Uo=e=>nr(e)?Ar(e):e,IL=e=>nr(e)?b0(e):e;function li(e){return e?e.__v_isRef===!0:!1}function le(e){return oW(e,!1)}function _i(e){return oW(e,!0)}function oW(e,t){return li(e)?e:new Aoe(e,t)}class Aoe{constructor(t,n){this.dep=new OM,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ei(t),this._value=n?t:Uo(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Xl(t)||qv(t);t=r?t:ei(t),bf(t,n)&&(this._rawValue=t,this._value=r?t:Uo(t),this.dep.trigger())}}function w(e){return li(e)?e.value:e}const Poe={get:(e,t,n)=>t==="__v_raw"?e:w(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return li(i)&&!li(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function sW(e){return wf(e)?e:new Proxy(e,Poe)}class Ioe{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new OM,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Loe(e){return new Ioe(e)}function ao(e){const t=sn(e)?new Array(e.length):{};for(const n in e)t[n]=lW(e,n);return t}class Doe{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return hoe(ei(this._object),this._key)}}class Roe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Gr(e,t,n){return li(e)?e:Dn(e)?new Roe(e):nr(e)&&arguments.length>1?lW(e,t,n):le(e)}function lW(e,t,n){const r=e[t];return li(r)?r:new Doe(e,t,n)}class Ooe{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new OM(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=K1-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ta!==this)return q7(this,!0),!0}get value(){const t=this.dep.track();return X7(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zoe(e,t,n=!1){let r,i;return Dn(e)?r=e:(r=e.get,i=e.set),new Ooe(r,i,n)}const ZS={},cT=new WeakMap;let uv;function Boe(e,t=!1,n=uv){if(n){let r=cT.get(n);r||cT.set(n,r=[]),r.push(e)}}function Foe(e,t,n=Xi){const{immediate:r,deep:i,once:a,scheduler:o,augmentJob:s,call:l}=n,c=I=>i?I:Xl(I)||i===!1||i===0?Nd(I,1):Nd(I);let h,f,p,v,_=!1,b=!1;if(li(e)?(f=()=>e.value,_=Xl(e)):wf(e)?(f=()=>c(e),_=!0):sn(e)?(b=!0,_=e.some(I=>wf(I)||Xl(I)),f=()=>e.map(I=>{if(li(I))return I.value;if(wf(I))return c(I);if(Dn(I))return l?l(I,2):I()})):Dn(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){jf();try{p()}finally{Uf()}}const I=uv;uv=h;try{return l?l(e,3,[v]):e(v)}finally{uv=I}}:f=ai,t&&i){const I=f,O=i===!0?1/0:i;f=()=>Nd(I(),O)}const C=t3(),T=()=>{h.stop(),C&&C.active&&JO(C.effects,h)};if(a&&t){const I=t;t=(...O)=>{I(...O),T()}}let E=b?new Array(e.length).fill(ZS):ZS;const A=I=>{if(!(!(h.flags&1)||!h.dirty&&!I))if(t){const O=h.run();if(i||_||(b?O.some((B,N)=>bf(B,E[N])):bf(O,E))){p&&p();const B=uv;uv=h;try{const N=[O,E===ZS?void 0:b&&E[0]===ZS?[]:E,v];l?l(t,3,N):t(...N),E=O}finally{uv=B}}}else h.run()};return s&&s(A),h=new G7(f),h.scheduler=o?()=>o(A,!1):A,v=I=>Boe(I,!1,h),p=h.onStop=()=>{const I=cT.get(h);if(I){if(l)l(I,4);else for(const O of I)O();cT.delete(h)}},t?r?A(!0):E=h.run():o?o(A.bind(null,!0),!0):h.run(),T.pause=h.pause.bind(h),T.resume=h.resume.bind(h),T.stop=T,T}function Nd(e,t=1/0,n){if(t<=0||!nr(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,li(e))Nd(e.value,t,n);else if(sn(e))for(let r=0;r<e.length;r++)Nd(e[r],t,n);else if(LM(e)||yy(e))e.forEach(r=>{Nd(r,t,n)});else if(lT(e)){for(const r in e)Nd(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Nd(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xw(e,t,n,r){try{return r?e(...r):e()}catch(i){BM(i,t,n)}}function qu(e,t,n,r){if(Dn(e)){const i=Xw(e,t,n,r);return i&&G1(i)&&i.catch(a=>{BM(a,t,n)}),i}if(sn(e)){const i=[];for(let a=0;a<e.length;a++)i.push(qu(e[a],t,n,r));return i}}function BM(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Xi;if(t){let s=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const h=s.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](e,l,c)===!1)return}s=s.parent}if(a){jf(),Xw(a,null,10,[e,l,c]),Uf();return}}Noe(e,n,i,r,o)}function Noe(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const vs=[];let Pc=-1;const _y=[];let Qh=null,Zg=0;const uW=Promise.resolve();let dT=null;function bn(e){const t=dT||uW;return e?t.then(this?e.bind(this):e):t}function $oe(e){let t=Pc+1,n=vs.length;for(;t<n;){const r=t+n>>>1,i=vs[r],a=Z1(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function c3(e){if(!(e.flags&1)){const t=Z1(e),n=vs[vs.length-1];!n||!(e.flags&2)&&t>=Z1(n)?vs.push(e):vs.splice($oe(t),0,e),e.flags|=1,cW()}}function cW(){dT||(dT=uW.then(hW))}function Voe(e){sn(e)?_y.push(...e):Qh&&e.id===-1?Qh.splice(Zg+1,0,e):e.flags&1||(_y.push(e),e.flags|=1),cW()}function aN(e,t,n=Pc+1){for(;n<vs.length;n++){const r=vs[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;vs.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function dW(e){if(_y.length){const t=[...new Set(_y)].sort((n,r)=>Z1(n)-Z1(r));if(_y.length=0,Qh){Qh.push(...t);return}for(Qh=t,Zg=0;Zg<Qh.length;Zg++){const n=Qh[Zg];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Qh=null,Zg=0}}const Z1=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hW(e){try{for(Pc=0;Pc<vs.length;Pc++){const t=vs[Pc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Xw(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pc<vs.length;Pc++){const t=vs[Pc];t&&(t.flags&=-2)}Pc=-1,vs.length=0,dW(),dT=null,(vs.length||_y.length)&&hW()}}let to=null,fW=null;function hT(e){const t=to;return to=e,fW=e&&e.type.__scopeId||null,t}function ge(e,t=to,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&yN(-1);const a=hT(t);let o;try{o=e(...i)}finally{hT(a),r._d&&yN(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function In(e,t){if(to===null)return e;const n=jM(to),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,s,l=Xi]=t[i];a&&(Dn(a)&&(a={mounted:a,updated:a}),a.deep&&Nd(o),r.push({dir:a,instance:n,value:o,oldValue:void 0,arg:s,modifiers:l}))}return e}function Rp(e,t,n,r){const i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[r];l&&(jf(),qu(l,n,8,[e.el,s,e,t]),Uf())}}const pW=Symbol("_vte"),vW=e=>e.__isTeleport,f1=e=>e&&(e.disabled||e.disabled===""),oN=e=>e&&(e.defer||e.defer===""),sN=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lN=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,LL=(e,t)=>{const n=e&&e.to;return Ln(n)?t?t(n):null:n},mW={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,a,o,s,l,c){const{mc:h,pc:f,pbc:p,o:{insert:v,querySelector:_,createText:b,createComment:C}}=c,T=f1(t.props);let{shapeFlag:E,children:A,dynamicChildren:I}=t;if(e==null){const O=t.el=b(""),B=t.anchor=b("");v(O,n,r),v(B,n,r);const N=(j,W)=>{E&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),h(A,j,W,i,a,o,s,l))},H=()=>{const j=t.target=LL(t.props,_),W=gW(j,t,b,v);j&&(o!=="svg"&&sN(j)?o="svg":o!=="mathml"&&lN(j)&&(o="mathml"),T||(N(j,W),gC(t,!1)))};T&&(N(n,B),gC(t,!0)),oN(t.props)?cs(()=>{H(),t.el.__isMounted=!0},a):H()}else{if(oN(t.props)&&!e.el.__isMounted){cs(()=>{mW.process(e,t,n,r,i,a,o,s,l,c),delete e.el.__isMounted},a);return}t.el=e.el,t.targetStart=e.targetStart;const O=t.anchor=e.anchor,B=t.target=e.target,N=t.targetAnchor=e.targetAnchor,H=f1(e.props),j=H?n:B,W=H?O:N;if(o==="svg"||sN(B)?o="svg":(o==="mathml"||lN(B))&&(o="mathml"),I?(p(e.dynamicChildren,I,j,i,a,o,s),g3(e,t,!0)):l||f(e,t,j,W,i,a,o,s,!1),T)H?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):YS(t,n,O,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const U=t.target=LL(t.props,_);U&&YS(t,U,null,c,0)}else H&&YS(t,B,N,c,1);gC(t,T)}},remove(e,t,n,{um:r,o:{remove:i}},a){const{shapeFlag:o,children:s,anchor:l,targetStart:c,targetAnchor:h,target:f,props:p}=e;if(f&&(i(c),i(h)),a&&i(l),o&16){const v=a||!f1(p);for(let _=0;_<s.length;_++){const b=s[_];r(b,t,n,v,!!b.dynamicChildren)}}},move:YS,hydrate:Hoe};function YS(e,t,n,{o:{insert:r},m:i},a=2){a===0&&r(e.targetAnchor,t,n);const{el:o,anchor:s,shapeFlag:l,children:c,props:h}=e,f=a===2;if(f&&r(o,t,n),(!f||f1(h))&&l&16)for(let p=0;p<c.length;p++)i(c[p],t,n,2);f&&r(s,t,n)}function Hoe(e,t,n,r,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l,insert:c,createText:h}},f){const p=t.target=LL(t.props,l);if(p){const v=f1(t.props),_=p._lpa||p.firstChild;if(t.shapeFlag&16)if(v)t.anchor=f(o(e),t,s(e),n,r,i,a),t.targetStart=_,t.targetAnchor=_&&o(_);else{t.anchor=o(e);let b=_;for(;b;){if(b&&b.nodeType===8){if(b.data==="teleport start anchor")t.targetStart=b;else if(b.data==="teleport anchor"){t.targetAnchor=b,p._lpa=t.targetAnchor&&o(t.targetAnchor);break}}b=o(b)}t.targetAnchor||gW(p,t,h,c),f(_&&o(_),t,p,n,r,i,a)}gC(t,v)}return t.anchor&&o(t.anchor)}const joe=mW;function gC(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function gW(e,t,n,r){const i=t.targetStart=n(""),a=t.targetAnchor=n("");return i[pW]=a,e&&(r(i,e),r(a,e)),a}const ef=Symbol("_leaveCb"),XS=Symbol("_enterCb");function yW(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Un(()=>{e.isMounted=!0}),ui(()=>{e.isUnmounting=!0}),e}const El=[Function,Array],_W={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:El,onEnter:El,onAfterEnter:El,onEnterCancelled:El,onBeforeLeave:El,onLeave:El,onAfterLeave:El,onLeaveCancelled:El,onBeforeAppear:El,onAppear:El,onAfterAppear:El,onAppearCancelled:El},bW=e=>{const t=e.subTree;return t.component?bW(t.component):t},Uoe={name:"BaseTransition",props:_W,setup(e,{slots:t}){const n=er(),r=yW();return()=>{const i=t.default&&d3(t.default(),!0);if(!i||!i.length)return;const a=wW(i),o=ei(e),{mode:s}=o;if(r.isLeaving)return FA(a);const l=uN(a);if(!l)return FA(a);let c=Y1(l,o,r,n,f=>c=f);l.type!==po&&Zv(l,c);let h=n.subTree&&uN(n.subTree);if(h&&h.type!==po&&!fv(l,h)&&bW(n).type!==po){let f=Y1(h,o,r,n);if(Zv(h,f),s==="out-in"&&l.type!==po)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},FA(a);s==="in-out"&&l.type!==po?f.delayLeave=(p,v,_)=>{const b=xW(r,h);b[String(h.key)]=h,p[ef]=()=>{v(),p[ef]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return a}}};function wW(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==po){t=n;break}}return t}const Woe=Uoe;function xW(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Y1(e,t,n,r,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:v,onAfterLeave:_,onLeaveCancelled:b,onBeforeAppear:C,onAppear:T,onAfterAppear:E,onAppearCancelled:A}=t,I=String(e.key),O=xW(n,e),B=(j,W)=>{j&&qu(j,r,9,W)},N=(j,W)=>{const U=W[1];B(j,W),sn(j)?j.every(Y=>Y.length<=1)&&U():j.length<=1&&U()},H={mode:o,persisted:s,beforeEnter(j){let W=l;if(!n.isMounted)if(a)W=C||l;else return;j[ef]&&j[ef](!0);const U=O[I];U&&fv(e,U)&&U.el[ef]&&U.el[ef](),B(W,[j])},enter(j){let W=c,U=h,Y=f;if(!n.isMounted)if(a)W=T||c,U=E||h,Y=A||f;else return;let ie=!1;const ue=j[XS]=J=>{ie||(ie=!0,J?B(Y,[j]):B(U,[j]),H.delayedLeave&&H.delayedLeave(),j[XS]=void 0)};W?N(W,[j,ue]):ue()},leave(j,W){const U=String(e.key);if(j[XS]&&j[XS](!0),n.isUnmounting)return W();B(p,[j]);let Y=!1;const ie=j[ef]=ue=>{Y||(Y=!0,W(),ue?B(b,[j]):B(_,[j]),j[ef]=void 0,O[U]===e&&delete O[U])};O[U]=e,v?N(v,[j,ie]):ie()},clone(j){const W=Y1(j,t,n,r,i);return i&&i(W),W}};return H}function FA(e){if(FM(e))return e=Zd(e),e.children=null,e}function uN(e){if(!FM(e))return vW(e.type)&&e.children?wW(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Dn(n.default))return n.default()}}function Zv(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Zv(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function d3(e,t=!1,n){let r=[],i=0;for(let a=0;a<e.length;a++){let o=e[a];const s=n==null?o.key:String(n)+String(o.key!=null?o.key:a);o.type===hn?(o.patchFlag&128&&i++,r=r.concat(d3(o.children,t,s))):(t||o.type!==po)&&r.push(s!=null?Zd(o,{key:s}):o)}if(i>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Be(e,t){return Dn(e)?Fa({name:e.name},t,{setup:e}):e}function SW(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function fT(e,t,n,r,i=!1){if(sn(e)){e.forEach((_,b)=>fT(_,t&&(sn(t)?t[b]:t),n,r,i));return}if(by(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&fT(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?jM(r.component):r.el,o=i?null:a,{i:s,r:l}=e,c=t&&t.r,h=s.refs===Xi?s.refs={}:s.refs,f=s.setupState,p=ei(f),v=f===Xi?()=>!1:_=>Er(p,_);if(c!=null&&c!==l&&(Ln(c)?(h[c]=null,v(c)&&(f[c]=null)):li(c)&&(c.value=null)),Dn(l))Xw(l,s,12,[o,h]);else{const _=Ln(l),b=li(l);if(_||b){const C=()=>{if(e.f){const T=_?v(l)?f[l]:h[l]:l.value;i?sn(T)&&JO(T,a):sn(T)?T.includes(a)||T.push(a):_?(h[l]=[a],v(l)&&(f[l]=h[l])):(l.value=[a],e.k&&(h[e.k]=l.value))}else _?(h[l]=o,v(l)&&(f[l]=o)):b&&(l.value=o,e.k&&(h[e.k]=o))};o?(C.id=-1,cs(C,n)):C()}}}RM().requestIdleCallback;RM().cancelIdleCallback;const by=e=>!!e.type.__asyncLoader,FM=e=>e.type.__isKeepAlive;function h3(e,t){TW(e,"a",t)}function CW(e,t){TW(e,"da",t)}function TW(e,t,n=vo){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(NM(t,r,n),n){let i=n.parent;for(;i&&i.parent;)FM(i.parent.vnode)&&Goe(r,t,n,i),i=i.parent}}function Goe(e,t,n,r){const i=NM(t,e,r,!0);Wf(()=>{JO(r[t],i)},n)}function NM(e,t,n=vo,r=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{jf();const s=Jw(n),l=qu(t,n,e,o);return s(),Uf(),l});return r?i.unshift(a):i.push(a),a}}const th=e=>(t,n=vo)=>{(!J1||e==="sp")&&NM(e,(...r)=>t(...r),n)},$M=th("bm"),Un=th("m"),MW=th("bu"),nh=th("u"),ui=th("bum"),Wf=th("um"),Koe=th("sp"),qoe=th("rtg"),Zoe=th("rtc");function Yoe(e,t=vo){NM("ec",e,t)}const f3="components",Xoe="directives";function Xt(e,t){return p3(f3,e,!0,t)||e}const kW=Symbol.for("v-ndc");function ir(e){return Ln(e)?p3(f3,e,!1)||e:e||kW}function VM(e){return p3(Xoe,e)}function p3(e,t,n=!0,r=!1){const i=to||vo;if(i){const a=i.type;if(e===f3){const s=Bse(a,!1);if(s&&(s===t||s===Gs(t)||s===Yw(Gs(t))))return a}const o=cN(i[e]||a[e],t)||cN(i.appContext[e],t);return!o&&r?a:o}}function cN(e,t){return e&&(e[t]||e[Gs(t)]||e[Yw(Gs(t))])}function Kn(e,t,n,r){let i;const a=n,o=sn(e);if(o||Ln(e)){const s=o&&wf(e);let l=!1;s&&(l=!Xl(e),e=zM(e)),i=new Array(e.length);for(let c=0,h=e.length;c<h;c++)i[c]=t(l?Uo(e[c]):e[c],c,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,a)}else if(nr(e))if(e[Symbol.iterator])i=Array.from(e,(s,l)=>t(s,l,void 0,a));else{const s=Object.keys(e);i=new Array(s.length);for(let l=0,c=s.length;l<c;l++){const h=s[l];i[l]=t(e[h],h,l,a)}}else i=[];return i}function Zu(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(sn(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const a=r.fn(...i);return a&&(a.key=r.key),a}:r.fn)}return e}function st(e,t,n={},r,i){if(to.ce||to.parent&&by(to.parent)&&to.parent.ce)return t!=="default"&&(n.name=t),te(),ft(hn,null,[de("slot",n,r&&r())],64);let a=e[t];a&&a._c&&(a._d=!1),te();const o=a&&EW(a(n)),s=n.key||o&&o.key,l=ft(hn,{key:(s&&!Ku(s)?s:`_${t}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function EW(e){return e.some(t=>Oi(t)?!(t.type===po||t.type===hn&&!EW(t.children)):!0)?e:null}function Joe(e,t){const n={};for(const r in e)n[c1(r)]=e[r];return n}const DL=e=>e?KW(e)?jM(e):DL(e.parent):null,p1=Fa(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>DL(e.parent),$root:e=>DL(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>v3(e),$forceUpdate:e=>e.f||(e.f=()=>{c3(e.update)}),$nextTick:e=>e.n||(e.n=bn.bind(e.proxy)),$watch:e=>bse.bind(e)}),NA=(e,t)=>e!==Xi&&!e.__isScriptSetup&&Er(e,t),Qoe={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:a,accessCache:o,type:s,appContext:l}=e;let c;if(t[0]!=="$"){const v=o[t];if(v!==void 0)switch(v){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(NA(r,t))return o[t]=1,r[t];if(i!==Xi&&Er(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Er(c,t))return o[t]=3,a[t];if(n!==Xi&&Er(n,t))return o[t]=4,n[t];RL&&(o[t]=0)}}const h=p1[t];let f,p;if(h)return t==="$attrs"&&jo(e.attrs,"get",""),h(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(n!==Xi&&Er(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,Er(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:a}=e;return NA(i,t)?(i[t]=n,!0):r!==Xi&&Er(r,t)?(r[t]=n,!0):Er(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:a}},o){let s;return!!n[o]||e!==Xi&&Er(e,o)||NA(t,o)||(s=a[0])&&Er(s,o)||Er(r,o)||Er(p1,o)||Er(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Er(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function qa(){return AW().slots}function gm(){return AW().attrs}function AW(){const e=er();return e.setupContext||(e.setupContext=ZW(e))}function dN(e){return sn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let RL=!0;function ese(e){const t=v3(e),n=e.proxy,r=e.ctx;RL=!1,t.beforeCreate&&hN(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:c,created:h,beforeMount:f,mounted:p,beforeUpdate:v,updated:_,activated:b,deactivated:C,beforeDestroy:T,beforeUnmount:E,destroyed:A,unmounted:I,render:O,renderTracked:B,renderTriggered:N,errorCaptured:H,serverPrefetch:j,expose:W,inheritAttrs:U,components:Y,directives:ie,filters:ue}=t;if(c&&tse(c,r,null),o)for(const ce in o){const re=o[ce];Dn(re)&&(r[ce]=re.bind(n))}if(i){const ce=i.call(n,n);nr(ce)&&(e.data=Ar(ce))}if(RL=!0,a)for(const ce in a){const re=a[ce],ee=Dn(re)?re.bind(n,n):Dn(re.get)?re.get.bind(n,n):ai,oe=!Dn(re)&&Dn(re.set)?re.set.bind(n):ai,be=X({get:ee,set:oe});Object.defineProperty(r,ce,{enumerable:!0,configurable:!0,get:()=>be.value,set:we=>be.value=we})}if(s)for(const ce in s)PW(s[ce],r,n,ce);if(l){const ce=Dn(l)?l.call(n):l;Reflect.ownKeys(ce).forEach(re=>{pr(re,ce[re])})}h&&hN(h,e,"c");function q(ce,re){sn(re)?re.forEach(ee=>ce(ee.bind(n))):re&&ce(re.bind(n))}if(q($M,f),q(Un,p),q(MW,v),q(nh,_),q(h3,b),q(CW,C),q(Yoe,H),q(Zoe,B),q(qoe,N),q(ui,E),q(Wf,I),q(Koe,j),sn(W))if(W.length){const ce=e.exposed||(e.exposed={});W.forEach(re=>{Object.defineProperty(ce,re,{get:()=>n[re],set:ee=>n[re]=ee})})}else e.exposed||(e.exposed={});O&&e.render===ai&&(e.render=O),U!=null&&(e.inheritAttrs=U),Y&&(e.components=Y),ie&&(e.directives=ie),j&&SW(e)}function tse(e,t,n=ai){sn(e)&&(e=OL(e));for(const r in e){const i=e[r];let a;nr(i)?"default"in i?a=un(i.from||r,i.default,!0):a=un(i.from||r):a=un(i),li(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function hN(e,t,n){qu(sn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function PW(e,t,n,r){let i=r.includes(".")?HW(n,r):()=>n[r];if(Ln(e)){const a=t[e];Dn(a)&&At(i,a)}else if(Dn(e))At(i,e.bind(n));else if(nr(e))if(sn(e))e.forEach(a=>PW(a,t,n,r));else{const a=Dn(e.handler)?e.handler.bind(n):t[e.handler];Dn(a)&&At(i,a,e)}}function v3(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(c=>pT(l,c,o,!0)),pT(l,t,o)),nr(t)&&a.set(t,l),l}function pT(e,t,n,r=!1){const{mixins:i,extends:a}=t;a&&pT(e,a,n,!0),i&&i.forEach(o=>pT(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const s=nse[o]||n&&n[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const nse={data:fN,props:pN,emits:pN,methods:Zb,computed:Zb,beforeCreate:ls,created:ls,beforeMount:ls,mounted:ls,beforeUpdate:ls,updated:ls,beforeDestroy:ls,beforeUnmount:ls,destroyed:ls,unmounted:ls,activated:ls,deactivated:ls,errorCaptured:ls,serverPrefetch:ls,components:Zb,directives:Zb,watch:ise,provide:fN,inject:rse};function fN(e,t){return t?e?function(){return Fa(Dn(e)?e.call(this,this):e,Dn(t)?t.call(this,this):t)}:t:e}function rse(e,t){return Zb(OL(e),OL(t))}function OL(e){if(sn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ls(e,t){return e?[...new Set([].concat(e,t))]:t}function Zb(e,t){return e?Fa(Object.create(null),e,t):t}function pN(e,t){return e?sn(e)&&sn(t)?[...new Set([...e,...t])]:Fa(Object.create(null),dN(e),dN(t??{})):t}function ise(e,t){if(!e)return t;if(!t)return e;const n=Fa(Object.create(null),e);for(const r in t)n[r]=ls(e[r],t[r]);return n}function IW(){return{app:null,config:{isNativeTag:Jae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ase=0;function ose(e,t){return function(r,i=null){Dn(r)||(r=Fa({},r)),i!=null&&!nr(i)&&(i=null);const a=IW(),o=new WeakSet,s=[];let l=!1;const c=a.app={_uid:ase++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:Nse,get config(){return a.config},set config(h){},use(h,...f){return o.has(h)||(h&&Dn(h.install)?(o.add(h),h.install(c,...f)):Dn(h)&&(o.add(h),h(c,...f))),c},mixin(h){return a.mixins.includes(h)||a.mixins.push(h),c},component(h,f){return f?(a.components[h]=f,c):a.components[h]},directive(h,f){return f?(a.directives[h]=f,c):a.directives[h]},mount(h,f,p){if(!l){const v=c._ceVNode||de(r,i);return v.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),f&&t?t(v,h):e(v,h,p),l=!0,c._container=h,h.__vue_app__=c,jM(v.component)}},onUnmount(h){s.push(h)},unmount(){l&&(qu(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,f){return a.provides[h]=f,c},runWithContext(h){const f=Iv;Iv=c;try{return h()}finally{Iv=f}}};return c}}let Iv=null;function pr(e,t){if(vo){let n=vo.provides;const r=vo.parent&&vo.parent.provides;r===n&&(n=vo.provides=Object.create(r)),n[e]=t}}function un(e,t,n=!1){const r=vo||to;if(r||Iv){const i=Iv?Iv._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Dn(t)?t.call(r&&r.proxy):t}}function sse(){return!!(vo||to||Iv)}const LW={},DW=()=>Object.create(LW),RW=e=>Object.getPrototypeOf(e)===LW;function lse(e,t,n,r=!1){const i={},a=DW();e.propsDefaults=Object.create(null),OW(e,t,i,a);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:s3(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function use(e,t,n,r){const{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=ei(i),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(HM(e.emitsOptions,p))continue;const v=t[p];if(l)if(Er(a,p))v!==a[p]&&(a[p]=v,c=!0);else{const _=Gs(p);i[_]=zL(l,s,_,v,e,!1)}else v!==a[p]&&(a[p]=v,c=!0)}}}else{OW(e,t,i,a)&&(c=!0);let h;for(const f in s)(!t||!Er(t,f)&&((h=eh(f))===f||!Er(t,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(i[f]=zL(l,s,f,void 0,e,!0)):delete i[f]);if(a!==s)for(const f in a)(!t||!Er(t,f))&&(delete a[f],c=!0)}c&&Fd(e.attrs,"set","")}function OW(e,t,n,r){const[i,a]=e.propsOptions;let o=!1,s;if(t)for(let l in t){if(u1(l))continue;const c=t[l];let h;i&&Er(i,h=Gs(l))?!a||!a.includes(h)?n[h]=c:(s||(s={}))[h]=c:HM(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(a){const l=ei(n),c=s||Xi;for(let h=0;h<a.length;h++){const f=a[h];n[f]=zL(i,l,f,c[f],e,!Er(c,f))}}return o}function zL(e,t,n,r,i,a){const o=e[n];if(o!=null){const s=Er(o,"default");if(s&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Dn(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const h=Jw(i);r=c[n]=l.call(null,t),h()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(a&&!s?r=!1:o[1]&&(r===""||r===eh(n))&&(r=!0))}return r}const cse=new WeakMap;function zW(e,t,n=!1){const r=n?cse:t.propsCache,i=r.get(e);if(i)return i;const a=e.props,o={},s=[];let l=!1;if(!Dn(e)){const h=f=>{l=!0;const[p,v]=zW(f,t,!0);Fa(o,p),v&&s.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!a&&!l)return nr(e)&&r.set(e,gy),gy;if(sn(a))for(let h=0;h<a.length;h++){const f=Gs(a[h]);vN(f)&&(o[f]=Xi)}else if(a)for(const h in a){const f=Gs(h);if(vN(f)){const p=a[h],v=o[f]=sn(p)||Dn(p)?{type:p}:Fa({},p),_=v.type;let b=!1,C=!0;if(sn(_))for(let T=0;T<_.length;++T){const E=_[T],A=Dn(E)&&E.name;if(A==="Boolean"){b=!0;break}else A==="String"&&(C=!1)}else b=Dn(_)&&_.name==="Boolean";v[0]=b,v[1]=C,(b||Er(v,"default"))&&s.push(f)}}const c=[o,s];return nr(e)&&r.set(e,c),c}function vN(e){return e[0]!=="$"&&!u1(e)}const BW=e=>e[0]==="_"||e==="$stable",m3=e=>sn(e)?e.map(Rc):[Rc(e)],dse=(e,t,n)=>{if(t._n)return t;const r=ge((...i)=>m3(t(...i)),n);return r._c=!1,r},FW=(e,t,n)=>{const r=e._ctx;for(const i in e){if(BW(i))continue;const a=e[i];if(Dn(a))t[i]=dse(i,a,r);else if(a!=null){const o=m3(a);t[i]=()=>o}}},NW=(e,t)=>{const n=m3(t);e.slots.default=()=>n},$W=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},hse=(e,t,n)=>{const r=e.slots=DW();if(e.vnode.shapeFlag&32){const i=t._;i?($W(r,t,n),n&&$7(r,"_",i,!0)):FW(t,r)}else t&&NW(e,t)},fse=(e,t,n)=>{const{vnode:r,slots:i}=e;let a=!0,o=Xi;if(r.shapeFlag&32){const s=t._;s?n&&s===1?a=!1:$W(i,t,n):(a=!t.$stable,FW(t,i)),o=t}else t&&(NW(e,t),o={default:1});if(a)for(const s in i)!BW(s)&&o[s]==null&&delete i[s]},cs=kse;function pse(e){return vse(e)}function vse(e,t){const n=RM();n.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:c,setElementText:h,parentNode:f,nextSibling:p,setScopeId:v=ai,insertStaticContent:_}=e,b=(Le,ze,ct,Lt=null,lt=null,Ct=null,_t=void 0,It=null,Bt=!!ze.dynamicChildren)=>{if(Le===ze)return;Le&&!fv(Le,ze)&&(Lt=Ee(Le),we(Le,lt,Ct,!0),Le=null),ze.patchFlag===-2&&(Bt=!1,ze.dynamicChildren=null);const{type:Ft,ref:cn,shapeFlag:Ot}=ze;switch(Ft){case w0:C(Le,ze,ct,Lt);break;case po:T(Le,ze,ct,Lt);break;case yC:Le==null&&E(ze,ct,Lt,_t);break;case hn:Y(Le,ze,ct,Lt,lt,Ct,_t,It,Bt);break;default:Ot&1?O(Le,ze,ct,Lt,lt,Ct,_t,It,Bt):Ot&6?ie(Le,ze,ct,Lt,lt,Ct,_t,It,Bt):(Ot&64||Ot&128)&&Ft.process(Le,ze,ct,Lt,lt,Ct,_t,It,Bt,yt)}cn!=null&&lt&&fT(cn,Le&&Le.ref,Ct,ze||Le,!ze)},C=(Le,ze,ct,Lt)=>{if(Le==null)r(ze.el=s(ze.children),ct,Lt);else{const lt=ze.el=Le.el;ze.children!==Le.children&&c(lt,ze.children)}},T=(Le,ze,ct,Lt)=>{Le==null?r(ze.el=l(ze.children||""),ct,Lt):ze.el=Le.el},E=(Le,ze,ct,Lt)=>{[Le.el,Le.anchor]=_(Le.children,ze,ct,Lt,Le.el,Le.anchor)},A=({el:Le,anchor:ze},ct,Lt)=>{let lt;for(;Le&&Le!==ze;)lt=p(Le),r(Le,ct,Lt),Le=lt;r(ze,ct,Lt)},I=({el:Le,anchor:ze})=>{let ct;for(;Le&&Le!==ze;)ct=p(Le),i(Le),Le=ct;i(ze)},O=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt)=>{ze.type==="svg"?_t="svg":ze.type==="math"&&(_t="mathml"),Le==null?B(ze,ct,Lt,lt,Ct,_t,It,Bt):j(Le,ze,lt,Ct,_t,It,Bt)},B=(Le,ze,ct,Lt,lt,Ct,_t,It)=>{let Bt,Ft;const{props:cn,shapeFlag:Ot,transition:kt,dirs:fn}=Le;if(Bt=Le.el=o(Le.type,Ct,cn&&cn.is,cn),Ot&8?h(Bt,Le.children):Ot&16&&H(Le.children,Bt,null,Lt,lt,$A(Le,Ct),_t,It),fn&&Rp(Le,null,Lt,"created"),N(Bt,Le,Le.scopeId,_t,Lt),cn){for(const On in cn)On!=="value"&&!u1(On)&&a(Bt,On,null,cn[On],Ct,Lt);"value"in cn&&a(Bt,"value",null,cn.value,Ct),(Ft=cn.onVnodeBeforeMount)&&xc(Ft,Lt,Le)}fn&&Rp(Le,null,Lt,"beforeMount");const Rn=mse(lt,kt);Rn&&kt.beforeEnter(Bt),r(Bt,ze,ct),((Ft=cn&&cn.onVnodeMounted)||Rn||fn)&&cs(()=>{Ft&&xc(Ft,Lt,Le),Rn&&kt.enter(Bt),fn&&Rp(Le,null,Lt,"mounted")},lt)},N=(Le,ze,ct,Lt,lt)=>{if(ct&&v(Le,ct),Lt)for(let Ct=0;Ct<Lt.length;Ct++)v(Le,Lt[Ct]);if(lt){let Ct=lt.subTree;if(ze===Ct||UW(Ct.type)&&(Ct.ssContent===ze||Ct.ssFallback===ze)){const _t=lt.vnode;N(Le,_t,_t.scopeId,_t.slotScopeIds,lt.parent)}}},H=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt=0)=>{for(let Ft=Bt;Ft<Le.length;Ft++){const cn=Le[Ft]=It?tf(Le[Ft]):Rc(Le[Ft]);b(null,cn,ze,ct,Lt,lt,Ct,_t,It)}},j=(Le,ze,ct,Lt,lt,Ct,_t)=>{const It=ze.el=Le.el;let{patchFlag:Bt,dynamicChildren:Ft,dirs:cn}=ze;Bt|=Le.patchFlag&16;const Ot=Le.props||Xi,kt=ze.props||Xi;let fn;if(ct&&Op(ct,!1),(fn=kt.onVnodeBeforeUpdate)&&xc(fn,ct,ze,Le),cn&&Rp(ze,Le,ct,"beforeUpdate"),ct&&Op(ct,!0),(Ot.innerHTML&&kt.innerHTML==null||Ot.textContent&&kt.textContent==null)&&h(It,""),Ft?W(Le.dynamicChildren,Ft,It,ct,Lt,$A(ze,lt),Ct):_t||re(Le,ze,It,null,ct,Lt,$A(ze,lt),Ct,!1),Bt>0){if(Bt&16)U(It,Ot,kt,ct,lt);else if(Bt&2&&Ot.class!==kt.class&&a(It,"class",null,kt.class,lt),Bt&4&&a(It,"style",Ot.style,kt.style,lt),Bt&8){const Rn=ze.dynamicProps;for(let On=0;On<Rn.length;On++){const mt=Rn[On],Gt=Ot[mt],gn=kt[mt];(gn!==Gt||mt==="value")&&a(It,mt,Gt,gn,lt,ct)}}Bt&1&&Le.children!==ze.children&&h(It,ze.children)}else!_t&&Ft==null&&U(It,Ot,kt,ct,lt);((fn=kt.onVnodeUpdated)||cn)&&cs(()=>{fn&&xc(fn,ct,ze,Le),cn&&Rp(ze,Le,ct,"updated")},Lt)},W=(Le,ze,ct,Lt,lt,Ct,_t)=>{for(let It=0;It<ze.length;It++){const Bt=Le[It],Ft=ze[It],cn=Bt.el&&(Bt.type===hn||!fv(Bt,Ft)||Bt.shapeFlag&70)?f(Bt.el):ct;b(Bt,Ft,cn,null,Lt,lt,Ct,_t,!0)}},U=(Le,ze,ct,Lt,lt)=>{if(ze!==ct){if(ze!==Xi)for(const Ct in ze)!u1(Ct)&&!(Ct in ct)&&a(Le,Ct,ze[Ct],null,lt,Lt);for(const Ct in ct){if(u1(Ct))continue;const _t=ct[Ct],It=ze[Ct];_t!==It&&Ct!=="value"&&a(Le,Ct,It,_t,lt,Lt)}"value"in ct&&a(Le,"value",ze.value,ct.value,lt)}},Y=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt)=>{const Ft=ze.el=Le?Le.el:s(""),cn=ze.anchor=Le?Le.anchor:s("");let{patchFlag:Ot,dynamicChildren:kt,slotScopeIds:fn}=ze;fn&&(It=It?It.concat(fn):fn),Le==null?(r(Ft,ct,Lt),r(cn,ct,Lt),H(ze.children||[],ct,cn,lt,Ct,_t,It,Bt)):Ot>0&&Ot&64&&kt&&Le.dynamicChildren?(W(Le.dynamicChildren,kt,ct,lt,Ct,_t,It),(ze.key!=null||lt&&ze===lt.subTree)&&g3(Le,ze,!0)):re(Le,ze,ct,cn,lt,Ct,_t,It,Bt)},ie=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt)=>{ze.slotScopeIds=It,Le==null?ze.shapeFlag&512?lt.ctx.activate(ze,ct,Lt,_t,Bt):ue(ze,ct,Lt,lt,Ct,_t,Bt):J(Le,ze,Bt)},ue=(Le,ze,ct,Lt,lt,Ct,_t)=>{const It=Le.component=Dse(Le,Lt,lt);if(FM(Le)&&(It.ctx.renderer=yt),Rse(It,!1,_t),It.asyncDep){if(lt&&lt.registerDep(It,q,_t),!Le.el){const Bt=It.subTree=de(po);T(null,Bt,ze,ct)}}else q(It,Le,ze,ct,lt,Ct,_t)},J=(Le,ze,ct)=>{const Lt=ze.component=Le.component;if(Tse(Le,ze,ct))if(Lt.asyncDep&&!Lt.asyncResolved){ce(Lt,ze,ct);return}else Lt.next=ze,Lt.update();else ze.el=Le.el,Lt.vnode=ze},q=(Le,ze,ct,Lt,lt,Ct,_t)=>{const It=()=>{if(Le.isMounted){let{next:Ot,bu:kt,u:fn,parent:Rn,vnode:On}=Le;{const Zt=VW(Le);if(Zt){Ot&&(Ot.el=On.el,ce(Le,Ot,_t)),Zt.asyncDep.then(()=>{Le.isUnmounted||It()});return}}let mt=Ot,Gt;Op(Le,!1),Ot?(Ot.el=On.el,ce(Le,Ot,_t)):Ot=On,kt&&mC(kt),(Gt=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&xc(Gt,Rn,Ot,On),Op(Le,!0);const gn=VA(Le),xt=Le.subTree;Le.subTree=gn,b(xt,gn,f(xt.el),Ee(xt),Le,lt,Ct),Ot.el=gn.el,mt===null&&Mse(Le,gn.el),fn&&cs(fn,lt),(Gt=Ot.props&&Ot.props.onVnodeUpdated)&&cs(()=>xc(Gt,Rn,Ot,On),lt)}else{let Ot;const{el:kt,props:fn}=ze,{bm:Rn,m:On,parent:mt,root:Gt,type:gn}=Le,xt=by(ze);if(Op(Le,!1),Rn&&mC(Rn),!xt&&(Ot=fn&&fn.onVnodeBeforeMount)&&xc(Ot,mt,ze),Op(Le,!0),kt&&dt){const Zt=()=>{Le.subTree=VA(Le),dt(kt,Le.subTree,Le,lt,null)};xt&&gn.__asyncHydrate?gn.__asyncHydrate(kt,Le,Zt):Zt()}else{Gt.ce&&Gt.ce._injectChildStyle(gn);const Zt=Le.subTree=VA(Le);b(null,Zt,ct,Lt,Le,lt,Ct),ze.el=Zt.el}if(On&&cs(On,lt),!xt&&(Ot=fn&&fn.onVnodeMounted)){const Zt=ze;cs(()=>xc(Ot,mt,Zt),lt)}(ze.shapeFlag&256||mt&&by(mt.vnode)&&mt.vnode.shapeFlag&256)&&Le.a&&cs(Le.a,lt),Le.isMounted=!0,ze=ct=Lt=null}};Le.scope.on();const Bt=Le.effect=new G7(It);Le.scope.off();const Ft=Le.update=Bt.run.bind(Bt),cn=Le.job=Bt.runIfDirty.bind(Bt);cn.i=Le,cn.id=Le.uid,Bt.scheduler=()=>c3(cn),Op(Le,!0),Ft()},ce=(Le,ze,ct)=>{ze.component=Le;const Lt=Le.vnode.props;Le.vnode=ze,Le.next=null,use(Le,ze.props,Lt,ct),fse(Le,ze.children,ct),jf(),aN(Le),Uf()},re=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt=!1)=>{const Ft=Le&&Le.children,cn=Le?Le.shapeFlag:0,Ot=ze.children,{patchFlag:kt,shapeFlag:fn}=ze;if(kt>0){if(kt&128){oe(Ft,Ot,ct,Lt,lt,Ct,_t,It,Bt);return}else if(kt&256){ee(Ft,Ot,ct,Lt,lt,Ct,_t,It,Bt);return}}fn&8?(cn&16&&et(Ft,lt,Ct),Ot!==Ft&&h(ct,Ot)):cn&16?fn&16?oe(Ft,Ot,ct,Lt,lt,Ct,_t,It,Bt):et(Ft,lt,Ct,!0):(cn&8&&h(ct,""),fn&16&&H(Ot,ct,Lt,lt,Ct,_t,It,Bt))},ee=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt)=>{Le=Le||gy,ze=ze||gy;const Ft=Le.length,cn=ze.length,Ot=Math.min(Ft,cn);let kt;for(kt=0;kt<Ot;kt++){const fn=ze[kt]=Bt?tf(ze[kt]):Rc(ze[kt]);b(Le[kt],fn,ct,null,lt,Ct,_t,It,Bt)}Ft>cn?et(Le,lt,Ct,!0,!1,Ot):H(ze,ct,Lt,lt,Ct,_t,It,Bt,Ot)},oe=(Le,ze,ct,Lt,lt,Ct,_t,It,Bt)=>{let Ft=0;const cn=ze.length;let Ot=Le.length-1,kt=cn-1;for(;Ft<=Ot&&Ft<=kt;){const fn=Le[Ft],Rn=ze[Ft]=Bt?tf(ze[Ft]):Rc(ze[Ft]);if(fv(fn,Rn))b(fn,Rn,ct,null,lt,Ct,_t,It,Bt);else break;Ft++}for(;Ft<=Ot&&Ft<=kt;){const fn=Le[Ot],Rn=ze[kt]=Bt?tf(ze[kt]):Rc(ze[kt]);if(fv(fn,Rn))b(fn,Rn,ct,null,lt,Ct,_t,It,Bt);else break;Ot--,kt--}if(Ft>Ot){if(Ft<=kt){const fn=kt+1,Rn=fn<cn?ze[fn].el:Lt;for(;Ft<=kt;)b(null,ze[Ft]=Bt?tf(ze[Ft]):Rc(ze[Ft]),ct,Rn,lt,Ct,_t,It,Bt),Ft++}}else if(Ft>kt)for(;Ft<=Ot;)we(Le[Ft],lt,Ct,!0),Ft++;else{const fn=Ft,Rn=Ft,On=new Map;for(Ft=Rn;Ft<=kt;Ft++){const ve=ze[Ft]=Bt?tf(ze[Ft]):Rc(ze[Ft]);ve.key!=null&&On.set(ve.key,Ft)}let mt,Gt=0;const gn=kt-Rn+1;let xt=!1,Zt=0;const Ze=new Array(gn);for(Ft=0;Ft<gn;Ft++)Ze[Ft]=0;for(Ft=fn;Ft<=Ot;Ft++){const ve=Le[Ft];if(Gt>=gn){we(ve,lt,Ct,!0);continue}let ke;if(ve.key!=null)ke=On.get(ve.key);else for(mt=Rn;mt<=kt;mt++)if(Ze[mt-Rn]===0&&fv(ve,ze[mt])){ke=mt;break}ke===void 0?we(ve,lt,Ct,!0):(Ze[ke-Rn]=Ft+1,ke>=Zt?Zt=ke:xt=!0,b(ve,ze[ke],ct,null,lt,Ct,_t,It,Bt),Gt++)}const Fe=xt?gse(Ze):gy;for(mt=Fe.length-1,Ft=gn-1;Ft>=0;Ft--){const ve=Rn+Ft,ke=ze[ve],Oe=ve+1<cn?ze[ve+1].el:Lt;Ze[Ft]===0?b(null,ke,ct,Oe,lt,Ct,_t,It,Bt):xt&&(mt<0||Ft!==Fe[mt]?be(ke,ct,Oe,2):mt--)}}},be=(Le,ze,ct,Lt,lt=null)=>{const{el:Ct,type:_t,transition:It,children:Bt,shapeFlag:Ft}=Le;if(Ft&6){be(Le.component.subTree,ze,ct,Lt);return}if(Ft&128){Le.suspense.move(ze,ct,Lt);return}if(Ft&64){_t.move(Le,ze,ct,yt);return}if(_t===hn){r(Ct,ze,ct);for(let Ot=0;Ot<Bt.length;Ot++)be(Bt[Ot],ze,ct,Lt);r(Le.anchor,ze,ct);return}if(_t===yC){A(Le,ze,ct);return}if(Lt!==2&&Ft&1&&It)if(Lt===0)It.beforeEnter(Ct),r(Ct,ze,ct),cs(()=>It.enter(Ct),lt);else{const{leave:Ot,delayLeave:kt,afterLeave:fn}=It,Rn=()=>r(Ct,ze,ct),On=()=>{Ot(Ct,()=>{Rn(),fn&&fn()})};kt?kt(Ct,Rn,On):On()}else r(Ct,ze,ct)},we=(Le,ze,ct,Lt=!1,lt=!1)=>{const{type:Ct,props:_t,ref:It,children:Bt,dynamicChildren:Ft,shapeFlag:cn,patchFlag:Ot,dirs:kt,cacheIndex:fn}=Le;if(Ot===-2&&(lt=!1),It!=null&&fT(It,null,ct,Le,!0),fn!=null&&(ze.renderCache[fn]=void 0),cn&256){ze.ctx.deactivate(Le);return}const Rn=cn&1&&kt,On=!by(Le);let mt;if(On&&(mt=_t&&_t.onVnodeBeforeUnmount)&&xc(mt,ze,Le),cn&6)Ve(Le.component,ct,Lt);else{if(cn&128){Le.suspense.unmount(ct,Lt);return}Rn&&Rp(Le,null,ze,"beforeUnmount"),cn&64?Le.type.remove(Le,ze,ct,yt,Lt):Ft&&!Ft.hasOnce&&(Ct!==hn||Ot>0&&Ot&64)?et(Ft,ze,ct,!1,!0):(Ct===hn&&Ot&384||!lt&&cn&16)&&et(Bt,ze,ct),Lt&&pe(Le)}(On&&(mt=_t&&_t.onVnodeUnmounted)||Rn)&&cs(()=>{mt&&xc(mt,ze,Le),Rn&&Rp(Le,null,ze,"unmounted")},ct)},pe=Le=>{const{type:ze,el:ct,anchor:Lt,transition:lt}=Le;if(ze===hn){Ce(ct,Lt);return}if(ze===yC){I(Le);return}const Ct=()=>{i(ct),lt&&!lt.persisted&&lt.afterLeave&&lt.afterLeave()};if(Le.shapeFlag&1&&lt&&!lt.persisted){const{leave:_t,delayLeave:It}=lt,Bt=()=>_t(ct,Ct);It?It(Le.el,Ct,Bt):Bt()}else Ct()},Ce=(Le,ze)=>{let ct;for(;Le!==ze;)ct=p(Le),i(Le),Le=ct;i(ze)},Ve=(Le,ze,ct)=>{const{bum:Lt,scope:lt,job:Ct,subTree:_t,um:It,m:Bt,a:Ft}=Le;mN(Bt),mN(Ft),Lt&&mC(Lt),lt.stop(),Ct&&(Ct.flags|=8,we(_t,Le,ze,ct)),It&&cs(It,ze),cs(()=>{Le.isUnmounted=!0},ze),ze&&ze.pendingBranch&&!ze.isUnmounted&&Le.asyncDep&&!Le.asyncResolved&&Le.suspenseId===ze.pendingId&&(ze.deps--,ze.deps===0&&ze.resolve())},et=(Le,ze,ct,Lt=!1,lt=!1,Ct=0)=>{for(let _t=Ct;_t<Le.length;_t++)we(Le[_t],ze,ct,Lt,lt)},Ee=Le=>{if(Le.shapeFlag&6)return Ee(Le.component.subTree);if(Le.shapeFlag&128)return Le.suspense.next();const ze=p(Le.anchor||Le.el),ct=ze&&ze[pW];return ct?p(ct):ze};let Je=!1;const Ue=(Le,ze,ct)=>{Le==null?ze._vnode&&we(ze._vnode,null,null,!0):b(ze._vnode||null,Le,ze,null,null,null,ct),ze._vnode=Le,Je||(Je=!0,aN(),dW(),Je=!1)},yt={p:b,um:we,m:be,r:pe,mt:ue,mc:H,pc:re,pbc:W,n:Ee,o:e};let Ne,dt;return{render:Ue,hydrate:Ne,createApp:ose(Ue,Ne)}}function $A({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Op({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mse(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function g3(e,t,n=!1){const r=e.children,i=t.children;if(sn(r)&&sn(i))for(let a=0;a<r.length;a++){const o=r[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=tf(i[a]),s.el=o.el),!n&&s.patchFlag!==-2&&g3(o,s)),s.type===w0&&(s.el=o.el)}}function gse(e){const t=e.slice(),n=[0];let r,i,a,o,s;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<c?a=s+1:o=s;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function VW(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:VW(t)}function mN(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const yse=Symbol.for("v-scx"),_se=()=>un(yse);function ko(e,t){return y3(e,null,t)}function At(e,t,n){return y3(e,t,n)}function y3(e,t,n=Xi){const{immediate:r,deep:i,flush:a,once:o}=n,s=Fa({},n),l=t&&r||!t&&a!=="post";let c;if(J1){if(a==="sync"){const v=_se();c=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=ai,v.resume=ai,v.pause=ai,v}}const h=vo;s.call=(v,_,b)=>qu(v,h,_,b);let f=!1;a==="post"?s.scheduler=v=>{cs(v,h&&h.suspense)}:a!=="sync"&&(f=!0,s.scheduler=(v,_)=>{_?v():c3(v)}),s.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,h&&(v.id=h.uid,v.i=h))};const p=Foe(e,t,s);return J1&&(c?c.push(p):l&&p()),p}function bse(e,t,n){const r=this.proxy,i=Ln(e)?e.includes(".")?HW(r,e):()=>r[e]:e.bind(r,r);let a;Dn(t)?a=t:(a=t.handler,n=t);const o=Jw(this),s=y3(i,a.bind(r),n);return o(),s}function HW(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const wse=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Gs(t)}Modifiers`]||e[`${eh(t)}Modifiers`];function xse(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xi;let i=n;const a=t.startsWith("update:"),o=a&&wse(r,t.slice(7));o&&(o.trim&&(i=n.map(h=>Ln(h)?h.trim():h)),o.number&&(i=n.map(kL)));let s,l=r[s=c1(t)]||r[s=c1(Gs(t))];!l&&a&&(l=r[s=c1(eh(t))]),l&&qu(l,e,6,i);const c=r[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,qu(c,e,6,i)}}function jW(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const a=e.emits;let o={},s=!1;if(!Dn(e)){const l=c=>{const h=jW(c,t,!0);h&&(s=!0,Fa(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!s?(nr(e)&&r.set(e,null),null):(sn(a)?a.forEach(l=>o[l]=null):Fa(o,a),nr(e)&&r.set(e,o),o)}function HM(e,t){return!e||!IM(t)?!1:(t=t.slice(2).replace(/Once$/,""),Er(e,t[0].toLowerCase()+t.slice(1))||Er(e,eh(t))||Er(e,t))}function VA(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:c,renderCache:h,props:f,data:p,setupState:v,ctx:_,inheritAttrs:b}=e,C=hT(e);let T,E;try{if(n.shapeFlag&4){const I=i||r,O=I;T=Rc(c.call(O,I,h,f,v,p,_)),E=s}else{const I=t;T=Rc(I.length>1?I(f,{attrs:s,slots:o,emit:l}):I(f,null)),E=t.props?s:Sse(s)}}catch(I){v1.length=0,BM(I,e,1),T=de(po)}let A=T;if(E&&b!==!1){const I=Object.keys(E),{shapeFlag:O}=A;I.length&&O&7&&(a&&I.some(XO)&&(E=Cse(E,a)),A=Zd(A,E,!1,!0))}return n.dirs&&(A=Zd(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Zv(A,n.transition),T=A,hT(C),T}const Sse=e=>{let t;for(const n in e)(n==="class"||n==="style"||IM(n))&&((t||(t={}))[n]=e[n]);return t},Cse=(e,t)=>{const n={};for(const r in e)(!XO(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Tse(e,t,n){const{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?gN(r,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!HM(c,p))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?gN(r,o,c):!0:!!o;return!1}function gN(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(t[a]!==e[a]&&!HM(n,a))return!0}return!1}function Mse({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const UW=e=>e.__isSuspense;function kse(e,t){t&&t.pendingBranch?sn(e)?t.effects.push(...e):t.effects.push(e):Voe(e)}const hn=Symbol.for("v-fgt"),w0=Symbol.for("v-txt"),po=Symbol.for("v-cmt"),yC=Symbol.for("v-stc"),v1=[];let fl=null;function te(e=!1){v1.push(fl=e?null:[])}function Ese(){v1.pop(),fl=v1[v1.length-1]||null}let X1=1;function yN(e,t=!1){X1+=e,e<0&&fl&&t&&(fl.hasOnce=!0)}function WW(e){return e.dynamicChildren=X1>0?fl||gy:null,Ese(),X1>0&&fl&&fl.push(e),e}function me(e,t,n,r,i,a){return WW(V(e,t,n,r,i,a,!0))}function ft(e,t,n,r,i){return WW(de(e,t,n,r,i,!0))}function Oi(e){return e?e.__v_isVNode===!0:!1}function fv(e,t){return e.type===t.type&&e.key===t.key}const GW=({key:e})=>e??null,_C=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ln(e)||li(e)||Dn(e)?{i:to,r:e,k:t,f:!!n}:e:null);function V(e,t=null,n=null,r=0,i=null,a=e===hn?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&GW(t),ref:t&&_C(t),scopeId:fW,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:to};return s?(_3(l,n),a&128&&e.normalize(l)):n&&(l.shapeFlag|=Ln(n)?8:16),X1>0&&!o&&fl&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&fl.push(l),l}const de=Ase;function Ase(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===kW)&&(e=po),Oi(e)){const s=Zd(e,t,!0);return n&&_3(s,n),X1>0&&!a&&fl&&(s.shapeFlag&6?fl[fl.indexOf(e)]=s:fl.push(s)),s.patchFlag=-2,s}if(Fse(e)&&(e=e.__vccOpts),t){t=Pf(t);let{class:s,style:l}=t;s&&!Ln(s)&&(t.class=se(s)),nr(l)&&(u3(l)&&!sn(l)&&(l=Fa({},l)),t.style=_n(l))}const o=Ln(e)?1:UW(e)?128:vW(e)?64:nr(e)?4:Dn(e)?2:0;return V(e,t,n,r,i,o,a,!0)}function Pf(e){return e?u3(e)||RW(e)?Fa({},e):e:null}function Zd(e,t,n=!1,r=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:l}=e,c=t?sr(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&GW(c),ref:t&&t.ref?n&&a?sn(a)?a.concat(_C(t)):[a,_C(t)]:_C(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==hn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zd(e.ssContent),ssFallback:e.ssFallback&&Zd(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Zv(h,l.clone(h)),h}function $t(e=" ",t=0){return de(w0,null,e,t)}function Pse(e,t){const n=de(yC,null,e);return n.staticCount=t,n}function Ge(e="",t=!1){return t?(te(),ft(po,null,e)):de(po,null,e)}function Rc(e){return e==null||typeof e=="boolean"?de(po):sn(e)?de(hn,null,e.slice()):Oi(e)?tf(e):de(w0,null,String(e))}function tf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zd(e)}function _3(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(sn(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),_3(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!RW(t)?t._ctx=to:i===3&&to&&(to.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Dn(t)?(t={default:t,_ctx:to},n=32):(t=String(t),r&64?(n=16,t=[$t(t)]):n=8);e.children=t,e.shapeFlag|=n}function sr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=se([t.class,r.class]));else if(i==="style")t.style=_n([t.style,r.style]);else if(IM(i)){const a=t[i],o=r[i];o&&a!==o&&!(sn(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=r[i])}return t}function xc(e,t,n,r=null){qu(e,t,7,[n,r])}const Ise=IW();let Lse=0;function Dse(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Ise,a={uid:Lse++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new W7(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zW(r,i),emitsOptions:jW(r,i),emit:null,emitted:null,propsDefaults:Xi,inheritAttrs:r.inheritAttrs,ctx:Xi,data:Xi,props:Xi,attrs:Xi,slots:Xi,refs:Xi,setupState:Xi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=xse.bind(null,a),e.ce&&e.ce(a),a}let vo=null;const er=()=>vo||to;let vT,BL;{const e=RM(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};vT=t("__VUE_INSTANCE_SETTERS__",n=>vo=n),BL=t("__VUE_SSR_SETTERS__",n=>J1=n)}const Jw=e=>{const t=vo;return vT(e),e.scope.on(),()=>{e.scope.off(),vT(t)}},_N=()=>{vo&&vo.scope.off(),vT(null)};function KW(e){return e.vnode.shapeFlag&4}let J1=!1;function Rse(e,t=!1,n=!1){t&&BL(t);const{props:r,children:i}=e.vnode,a=KW(e);lse(e,r,a,t),hse(e,i,n);const o=a?Ose(e,t):void 0;return t&&BL(!1),o}function Ose(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Qoe);const{setup:r}=n;if(r){jf();const i=e.setupContext=r.length>1?ZW(e):null,a=Jw(e),o=Xw(r,e,0,[e.props,i]),s=G1(o);if(Uf(),a(),(s||e.sp)&&!by(e)&&SW(e),s){if(o.then(_N,_N),t)return o.then(l=>{bN(e,l,t)}).catch(l=>{BM(l,e,0)});e.asyncDep=o}else bN(e,o,t)}else qW(e,t)}function bN(e,t,n){Dn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nr(t)&&(e.setupState=sW(t)),qW(e,n)}let wN;function qW(e,t,n){const r=e.type;if(!e.render){if(!t&&wN&&!r.render){const i=r.template||v3(e).template;if(i){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:s,compilerOptions:l}=r,c=Fa(Fa({isCustomElement:a,delimiters:s},o),l);r.render=wN(i,c)}}e.render=r.render||ai}{const i=Jw(e);jf();try{ese(e)}finally{Uf(),i()}}}const zse={get(e,t){return jo(e,"get",""),e[t]}};function ZW(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,zse),slots:e.slots,emit:e.emit,expose:t}}function jM(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(sW(_r(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in p1)return p1[n](e)},has(t,n){return n in t||n in p1}})):e.proxy}function Bse(e,t=!0){return Dn(e)?e.displayName||e.name:e.name||t&&e.__name}function Fse(e){return Dn(e)&&"__vccOpts"in e}const X=(e,t)=>zoe(e,t,J1);function Mn(e,t,n){const r=arguments.length;return r===2?nr(t)&&!sn(t)?Oi(t)?de(e,null,[t]):de(e,t):de(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oi(n)&&(n=[n]),de(e,t,n))}const Nse="3.5.13",$se=ai;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let FL;const xN=typeof window<"u"&&window.trustedTypes;if(xN)try{FL=xN.createPolicy("vue",{createHTML:e=>e})}catch{}const YW=FL?e=>FL.createHTML(e):e=>e,Vse="http://www.w3.org/2000/svg",Hse="http://www.w3.org/1998/Math/MathML",Od=typeof document<"u"?document:null,SN=Od&&Od.createElement("template"),jse={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Od.createElementNS(Vse,e):t==="mathml"?Od.createElementNS(Hse,e):n?Od.createElement(e,{is:n}):Od.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Od.createTextNode(e),createComment:e=>Od.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Od.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,a){const o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{SN.innerHTML=YW(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=SN.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Dh="transition",vb="animation",Vy=Symbol("_vtc"),XW={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},JW=Fa({},_W,XW),Use=e=>(e.displayName="Transition",e.props=JW,e),Ka=Use((e,{slots:t})=>Mn(Woe,QW(e),t)),zp=(e,t=[])=>{sn(e)?e.forEach(n=>n(...t)):e&&e(...t)},CN=e=>e?sn(e)?e.some(t=>t.length>1):e.length>1:!1;function QW(e){const t={};for(const Y in e)Y in XW||(t[Y]=e[Y]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:c=o,appearToClass:h=s,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=e,_=Wse(i),b=_&&_[0],C=_&&_[1],{onBeforeEnter:T,onEnter:E,onEnterCancelled:A,onLeave:I,onLeaveCancelled:O,onBeforeAppear:B=T,onAppear:N=E,onAppearCancelled:H=A}=t,j=(Y,ie,ue,J)=>{Y._enterCancelled=J,Gh(Y,ie?h:s),Gh(Y,ie?c:o),ue&&ue()},W=(Y,ie)=>{Y._isLeaving=!1,Gh(Y,f),Gh(Y,v),Gh(Y,p),ie&&ie()},U=Y=>(ie,ue)=>{const J=Y?N:E,q=()=>j(ie,Y,ue);zp(J,[ie,q]),TN(()=>{Gh(ie,Y?l:a),Ec(ie,Y?h:s),CN(J)||MN(ie,r,b,q)})};return Fa(t,{onBeforeEnter(Y){zp(T,[Y]),Ec(Y,a),Ec(Y,o)},onBeforeAppear(Y){zp(B,[Y]),Ec(Y,l),Ec(Y,c)},onEnter:U(!1),onAppear:U(!0),onLeave(Y,ie){Y._isLeaving=!0;const ue=()=>W(Y,ie);Ec(Y,f),Y._enterCancelled?(Ec(Y,p),NL()):(NL(),Ec(Y,p)),TN(()=>{Y._isLeaving&&(Gh(Y,f),Ec(Y,v),CN(I)||MN(Y,r,C,ue))}),zp(I,[Y,ue])},onEnterCancelled(Y){j(Y,!1,void 0,!0),zp(A,[Y])},onAppearCancelled(Y){j(Y,!0,void 0,!0),zp(H,[Y])},onLeaveCancelled(Y){W(Y),zp(O,[Y])}})}function Wse(e){if(e==null)return null;if(nr(e))return[HA(e.enter),HA(e.leave)];{const t=HA(e);return[t,t]}}function HA(e){return noe(e)}function Ec(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Vy]||(e[Vy]=new Set)).add(t)}function Gh(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Vy];n&&(n.delete(t),n.size||(e[Vy]=void 0))}function TN(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Gse=0;function MN(e,t,n,r){const i=e._endId=++Gse,a=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:o,timeout:s,propCount:l}=eG(e,t);if(!o)return r();const c=o+"end";let h=0;const f=()=>{e.removeEventListener(c,p),a()},p=v=>{v.target===e&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},s+1),e.addEventListener(c,p)}function eG(e,t){const n=window.getComputedStyle(e),r=_=>(n[_]||"").split(", "),i=r(`${Dh}Delay`),a=r(`${Dh}Duration`),o=kN(i,a),s=r(`${vb}Delay`),l=r(`${vb}Duration`),c=kN(s,l);let h=null,f=0,p=0;t===Dh?o>0&&(h=Dh,f=o,p=a.length):t===vb?c>0&&(h=vb,f=c,p=l.length):(f=Math.max(o,c),h=f>0?o>c?Dh:vb:null,p=h?h===Dh?a.length:l.length:0);const v=h===Dh&&/\b(transform|all)(,|$)/.test(r(`${Dh}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:v}}function kN(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>EN(n)+EN(e[r])))}function EN(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function NL(){return document.body.offsetHeight}function Kse(e,t,n){const r=e[Vy];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const mT=Symbol("_vod"),tG=Symbol("_vsh"),Lr={beforeMount(e,{value:t},{transition:n}){e[mT]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):mb(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),mb(e,!0),r.enter(e)):r.leave(e,()=>{mb(e,!1)}):mb(e,t))},beforeUnmount(e,{value:t}){mb(e,t)}};function mb(e,t){e.style.display=t?e[mT]:"none",e[tG]=!t}const qse=Symbol(""),Zse=/(^|;)\s*display\s*:/;function Yse(e,t,n){const r=e.style,i=Ln(n);let a=!1;if(n&&!i){if(t)if(Ln(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();n[s]==null&&bC(r,s,"")}else for(const o in t)n[o]==null&&bC(r,o,"");for(const o in n)o==="display"&&(a=!0),bC(r,o,n[o])}else if(i){if(t!==n){const o=r[qse];o&&(n+=";"+o),r.cssText=n,a=Zse.test(n)}}else t&&e.removeAttribute("style");mT in e&&(e[mT]=a?r.display:"",e[tG]&&(r.display="none"))}const AN=/\s*!important$/;function bC(e,t,n){if(sn(n))n.forEach(r=>bC(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Xse(e,t);AN.test(n)?e.setProperty(eh(r),n.replace(AN,""),"important"):e[r]=n}}const PN=["Webkit","Moz","ms"],jA={};function Xse(e,t){const n=jA[t];if(n)return n;let r=Gs(t);if(r!=="filter"&&r in e)return jA[t]=r;r=Yw(r);for(let i=0;i<PN.length;i++){const a=PN[i]+r;if(a in e)return jA[t]=a}return t}const IN="http://www.w3.org/1999/xlink";function LN(e,t,n,r,i,a=loe(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(IN,t.slice(6,t.length)):e.setAttributeNS(IN,t,n):n==null||a&&!V7(n)?e.removeAttribute(t):e.setAttribute(t,a?"":Ku(n)?String(n):n)}function DN(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?YW(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(s!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=V7(n):n==null&&s==="string"?(n="",o=!0):s==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function rf(e,t,n,r){e.addEventListener(t,n,r)}function Jse(e,t,n,r){e.removeEventListener(t,n,r)}const RN=Symbol("_vei");function Qse(e,t,n,r,i=null){const a=e[RN]||(e[RN]={}),o=a[t];if(r&&o)o.value=r;else{const[s,l]=ele(t);if(r){const c=a[t]=rle(r,i);rf(e,s,c,l)}else o&&(Jse(e,s,o,l),a[t]=void 0)}}const ON=/(?:Once|Passive|Capture)$/;function ele(e){let t;if(ON.test(e)){t={};let r;for(;r=e.match(ON);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):eh(e.slice(2)),t]}let UA=0;const tle=Promise.resolve(),nle=()=>UA||(tle.then(()=>UA=0),UA=Date.now());function rle(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;qu(ile(r,n.value),t,5,[r])};return n.value=e,n.attached=nle(),n}function ile(e,t){if(sn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const zN=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ale=(e,t,n,r,i,a)=>{const o=i==="svg";t==="class"?Kse(e,r,o):t==="style"?Yse(e,n,r):IM(t)?XO(t)||Qse(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ole(e,t,r,o))?(DN(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&LN(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ln(r))?DN(e,Gs(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),LN(e,t,r,o))};function ole(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&zN(t)&&Dn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return zN(t)&&Ln(n)?!1:t in e}const nG=new WeakMap,rG=new WeakMap,gT=Symbol("_moveCb"),BN=Symbol("_enterCb"),sle=e=>(delete e.props.mode,e),lle=sle({name:"TransitionGroup",props:Fa({},JW,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=er(),r=yW();let i,a;return nh(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!hle(i[0].el,n.vnode.el,o))return;i.forEach(ule),i.forEach(cle);const s=i.filter(dle);NL(),s.forEach(l=>{const c=l.el,h=c.style;Ec(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=c[gT]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",f),c[gT]=null,Gh(c,o))};c.addEventListener("transitionend",f)})}),()=>{const o=ei(e),s=QW(o);let l=o.tag||hn;if(i=[],a)for(let c=0;c<a.length;c++){const h=a[c];h.el&&h.el instanceof Element&&(i.push(h),Zv(h,Y1(h,s,r,n)),nG.set(h,h.el.getBoundingClientRect()))}a=t.default?d3(t.default()):[];for(let c=0;c<a.length;c++){const h=a[c];h.key!=null&&Zv(h,Y1(h,s,r,n))}return de(l,null,a)}}}),iG=lle;function ule(e){const t=e.el;t[gT]&&t[gT](),t[BN]&&t[BN]()}function cle(e){rG.set(e,e.el.getBoundingClientRect())}function dle(e){const t=nG.get(e),n=rG.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${i}px)`,a.transitionDuration="0s",e}}function hle(e,t,n){const r=e.cloneNode(),i=e[Vy];i&&i.forEach(s=>{s.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:o}=eG(r);return a.removeChild(r),o}const Hy=e=>{const t=e.props["onUpdate:modelValue"]||!1;return sn(t)?n=>mC(t,n):t};function fle(e){e.target.composing=!0}function FN(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ud=Symbol("_assign"),qo={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[Ud]=Hy(i);const a=r||i.props&&i.props.type==="number";rf(e,t?"change":"input",o=>{if(o.target.composing)return;let s=e.value;n&&(s=s.trim()),a&&(s=kL(s)),e[Ud](s)}),n&&rf(e,"change",()=>{e.value=e.value.trim()}),t||(rf(e,"compositionstart",fle),rf(e,"compositionend",FN),rf(e,"change",FN))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},o){if(e[Ud]=Hy(o),e.composing)return;const s=(a||e.type==="number")&&!/^0\d/.test(e.value)?kL(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Fu={deep:!0,created(e,t,n){e[Ud]=Hy(n),rf(e,"change",()=>{const r=e._modelValue,i=oG(e),a=e.checked,o=e[Ud];if(sn(r)){const s=H7(r,i),l=s!==-1;if(a&&!l)o(r.concat(i));else if(!a&&l){const c=[...r];c.splice(s,1),o(c)}}else if(LM(r)){const s=new Set(r);a?s.add(i):s.delete(i),o(s)}else o(sG(e,a))})},mounted:NN,beforeUpdate(e,t,n){e[Ud]=Hy(n),NN(e,t,n)}};function NN(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(sn(t))i=H7(t,r.props.value)>-1;else if(LM(t))i=t.has(r.props.value);else{if(t===n)return;i=$y(t,sG(e,!0))}e.checked!==i&&(e.checked=i)}const aG={created(e,{value:t},n){e.checked=$y(t,n.props.value),e[Ud]=Hy(n),rf(e,"change",()=>{e[Ud](oG(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Ud]=Hy(r),t!==n&&(e.checked=$y(t,r.props.value))}};function oG(e){return"_value"in e?e._value:e.value}function sG(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ple=["ctrl","shift","alt","meta"],vle={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ple.some(n=>e[`${n}Key`]&&!t.includes(n))},Fn=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...a)=>{for(let o=0;o<t.length;o++){const s=vle[t[o]];if(s&&s(i,t))return}return e(i,...a)})},mle={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},oi=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const a=eh(i.key);if(t.some(o=>o===a||mle[o]===a))return e(i)})},gle=Fa({patchProp:ale},jse);let $N;function lG(){return $N||($N=pse(gle))}const If=(...e)=>{lG().render(...e)},uG=(...e)=>{const t=lG().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=_le(r);if(!i)return;const a=t._component;!Dn(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,yle(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function yle(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function _le(e){return Ln(e)?document.querySelector(e):e}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let cG;const UM=e=>cG=e,dG=Symbol();function $L(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var m1;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(m1||(m1={}));function ble(){const e=e3(!0),t=e.run(()=>le({}));let n=[],r=[];const i=_r({install(a){UM(i),i._a=a,a.provide(dG,i),a.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const hG=()=>{};function VN(e,t,n,r=hG){e.push(t);const i=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&t3()&&n3(i),i}function Cg(e,...t){e.slice().forEach(n=>{n(...t)})}const wle=e=>e(),HN=Symbol(),WA=Symbol();function VL(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];$L(i)&&$L(r)&&e.hasOwnProperty(n)&&!li(r)&&!wf(r)?e[n]=VL(i,r):e[n]=r}return e}const xle=Symbol();function Sle(e){return!$L(e)||!Object.prototype.hasOwnProperty.call(e,xle)}const{assign:Kh}=Object;function Cle(e){return!!(li(e)&&e.effect)}function Tle(e,t,n,r){const{state:i,actions:a,getters:o}=t,s=n.state.value[e];let l;function c(){s||(n.state.value[e]=i?i():{});const h=ao(n.state.value[e]);return Kh(h,a,Object.keys(o||{}).reduce((f,p)=>(f[p]=_r(X(()=>{UM(n);const v=n._s.get(e);return o[p].call(v,v)})),f),{}))}return l=fG(e,c,t,n,r,!0),l}function fG(e,t,n={},r,i,a){let o;const s=Kh({actions:{}},n),l={deep:!0};let c,h,f=[],p=[],v;const _=r.state.value[e];!a&&!_&&(r.state.value[e]={}),le({});let b;function C(H){let j;c=h=!1,typeof H=="function"?(H(r.state.value[e]),j={type:m1.patchFunction,storeId:e,events:v}):(VL(r.state.value[e],H),j={type:m1.patchObject,payload:H,storeId:e,events:v});const W=b=Symbol();bn().then(()=>{b===W&&(c=!0)}),h=!0,Cg(f,j,r.state.value[e])}const T=a?function(){const{state:j}=n,W=j?j():{};this.$patch(U=>{Kh(U,W)})}:hG;function E(){o.stop(),f=[],p=[],r._s.delete(e)}const A=(H,j="")=>{if(HN in H)return H[WA]=j,H;const W=function(){UM(r);const U=Array.from(arguments),Y=[],ie=[];function ue(ce){Y.push(ce)}function J(ce){ie.push(ce)}Cg(p,{args:U,name:W[WA],store:O,after:ue,onError:J});let q;try{q=H.apply(this&&this.$id===e?this:O,U)}catch(ce){throw Cg(ie,ce),ce}return q instanceof Promise?q.then(ce=>(Cg(Y,ce),ce)).catch(ce=>(Cg(ie,ce),Promise.reject(ce))):(Cg(Y,q),q)};return W[HN]=!0,W[WA]=j,W},I={_p:r,$id:e,$onAction:VN.bind(null,p),$patch:C,$reset:T,$subscribe(H,j={}){const W=VN(f,H,j.detached,()=>U()),U=o.run(()=>At(()=>r.state.value[e],Y=>{(j.flush==="sync"?h:c)&&H({storeId:e,type:m1.direct,events:v},Y)},Kh({},l,j)));return W},$dispose:E},O=Ar(I);r._s.set(e,O);const N=(r._a&&r._a.runWithContext||wle)(()=>r._e.run(()=>(o=e3()).run(()=>t({action:A}))));for(const H in N){const j=N[H];if(li(j)&&!Cle(j)||wf(j))a||(_&&Sle(j)&&(li(j)?j.value=_[H]:VL(j,_[H])),r.state.value[e][H]=j);else if(typeof j=="function"){const W=A(j,H);N[H]=W,s.actions[H]=j}}return Kh(O,N),Kh(ei(O),N),Object.defineProperty(O,"$state",{get:()=>r.state.value[e],set:H=>{C(j=>{Kh(j,H)})}}),r._p.forEach(H=>{Kh(O,o.run(()=>H({store:O,app:r._a,pinia:r,options:s})))}),_&&a&&n.hydrate&&n.hydrate(O.$state,_),c=!0,h=!0,O}/*! #__NO_SIDE_EFFECTS__ */function x0(e,t,n){let r;const i=typeof t=="function";r=i?n:t;function a(o,s){const l=sse();return o=o||(l?un(dG,null):null),o&&UM(o),o=cG,o._s.has(e)||(i?fG(e,t,r,o):Tle(e,r,o)),o._s.get(e)}return a.$id=e,a}const Mle='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',kle=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,jN=e=>Array.from(e.querySelectorAll(Mle)).filter(t=>Ele(t)&&kle(t)),Ele=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},wC=function(e,t,...n){let r;t.includes("mouse")||t.includes("click")?r="MouseEvents":t.includes("key")?r="KeyboardEvent":r="HTMLEvents";const i=document.createEvent(r);return i.initEvent(t,...n),e.dispatchEvent(i),e},pG=e=>!e.getAttribute("aria-owns"),vG=(e,t,n)=>{const{parentNode:r}=e;if(!r)return null;const i=r.querySelectorAll(n),a=Array.prototype.indexOf.call(i,e);return i[a+t]||null},xC=e=>{e&&(e.focus(),!pG(e)&&e.click())},ia=(e,t,{checkForDefaultPrevented:n=!0}={})=>i=>{const a=e==null?void 0:e(i);if(n===!1||!a)return t==null?void 0:t(i)},UN=e=>t=>t.pointerType==="mouse"?e(t):void 0;var Ale=Object.defineProperty,Ple=Object.defineProperties,Ile=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,Lle=Object.prototype.hasOwnProperty,Dle=Object.prototype.propertyIsEnumerable,GN=(e,t,n)=>t in e?Ale(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rle=(e,t)=>{for(var n in t||(t={}))Lle.call(t,n)&&GN(e,n,t[n]);if(WN)for(var n of WN(t))Dle.call(t,n)&&GN(e,n,t[n]);return e},Ole=(e,t)=>Ple(e,Ile(t));function KN(e,t){var n;const r=_i();return ko(()=>{r.value=e()},Ole(Rle({},t),{flush:(n=void 0)!=null?n:"sync"})),b0(r)}var qN;const xr=typeof window<"u",zle=e=>typeof e<"u",HL=e=>typeof e=="function",Ble=e=>typeof e=="string",jy=()=>{},jL=xr&&((qN=window==null?void 0:window.navigator)==null?void 0:qN.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Lf(e){return typeof e=="function"?e():w(e)}function mG(e,t){function n(...r){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(i).catch(a)})}return n}function Fle(e,t={}){let n,r,i=jy;const a=s=>{clearTimeout(s),i(),i=jy};return s=>{const l=Lf(e),c=Lf(t.maxWait);return n&&a(n),l<=0||c!==void 0&&c<=0?(r&&(a(r),r=null),Promise.resolve(s())):new Promise((h,f)=>{i=t.rejectOnCancel?f:h,c&&!r&&(r=setTimeout(()=>{n&&a(n),r=null,h(s())},c)),n=setTimeout(()=>{r&&a(r),r=null,h(s())},l)})}}function Nle(e,t=!0,n=!0,r=!1){let i=0,a,o=!0,s=jy,l;const c=()=>{a&&(clearTimeout(a),a=void 0,s(),s=jy)};return f=>{const p=Lf(e),v=Date.now()-i,_=()=>l=f();return c(),p<=0?(i=Date.now(),_()):(v>p&&(n||!o)?(i=Date.now(),_()):t&&(l=new Promise((b,C)=>{s=r?C:b,a=setTimeout(()=>{i=Date.now(),o=!0,b(_()),c()},Math.max(0,p-v))})),!n&&!a&&(a=setTimeout(()=>o=!0,p)),o=!1,l)}}function $le(e){return e}function Vle(e,t){let n,r,i;const a=le(!0),o=()=>{a.value=!0,i()};At(e,o,{flush:"sync"});const s=HL(t)?t:t.get,l=HL(t)?void 0:t.set,c=Loe((h,f)=>(r=h,i=f,{get(){return a.value&&(n=s(),a.value=!1),r(),n},set(p){l==null||l(p)}}));return Object.isExtensible(c)&&(c.trigger=o),c}function Qw(e){return t3()?(n3(e),!0):!1}function Hle(e,t=200,n={}){return mG(Fle(t,n),e)}function jle(e,t=200,n={}){const r=le(e.value),i=Hle(()=>{r.value=e.value},t,n);return At(e,()=>i()),r}function gG(e,t=200,n=!1,r=!0,i=!1){return mG(Nle(t,n,r,i),e)}function b3(e,t=!0){er()?Un(e):t?e():bn(e)}function Yv(e,t,n={}){const{immediate:r=!0}=n,i=le(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function l(...c){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,e(...c)},Lf(t))}return r&&(i.value=!0,xr&&l()),Qw(s),{isPending:b0(i),start:l,stop:s}}function $s(e){var t;const n=Lf(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Gf=xr?window:void 0,Ule=xr?window.document:void 0;function ti(...e){let t,n,r,i;if(Ble(e[0])||Array.isArray(e[0])?([n,r,i]=e,t=Gf):[t,n,r,i]=e,!t)return jy;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const a=[],o=()=>{a.forEach(h=>h()),a.length=0},s=(h,f,p,v)=>(h.addEventListener(f,p,v),()=>h.removeEventListener(f,p,v)),l=At(()=>[$s(t),Lf(i)],([h,f])=>{o(),h&&a.push(...n.flatMap(p=>r.map(v=>s(h,p,v,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return Qw(c),c}let ZN=!1;function w3(e,t,n={}){const{window:r=Gf,ignore:i=[],capture:a=!0,detectIframe:o=!1}=n;if(!r)return;jL&&!ZN&&(ZN=!0,Array.from(r.document.body.children).forEach(p=>p.addEventListener("click",jy)));let s=!0;const l=p=>i.some(v=>{if(typeof v=="string")return Array.from(r.document.querySelectorAll(v)).some(_=>_===p.target||p.composedPath().includes(_));{const _=$s(v);return _&&(p.target===_||p.composedPath().includes(_))}}),h=[ti(r,"click",p=>{const v=$s(e);if(!(!v||v===p.target||p.composedPath().includes(v))){if(p.detail===0&&(s=!l(p)),!s){s=!0;return}t(p)}},{passive:!0,capture:a}),ti(r,"pointerdown",p=>{const v=$s(e);v&&(s=!p.composedPath().includes(v)&&!l(p))},{passive:!0}),o&&ti(r,"blur",p=>{var v;const _=$s(e);((v=r.document.activeElement)==null?void 0:v.tagName)==="IFRAME"&&!(_!=null&&_.contains(r.document.activeElement))&&t(p)})].filter(Boolean);return()=>h.forEach(p=>p())}function Wle(e={}){var t;const{window:n=Gf}=e,r=(t=e.document)!=null?t:n==null?void 0:n.document,i=Vle(()=>null,()=>r==null?void 0:r.activeElement);return n&&(ti(n,"blur",a=>{a.relatedTarget===null&&i.trigger()},!0),ti(n,"focus",i.trigger,!0)),i}function yG(e,t=!1){const n=le(),r=()=>n.value=!!e();return r(),b3(r,t),n}function Gle(e){return JSON.parse(JSON.stringify(e))}const YN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XN="__vueuse_ssr_handlers__";YN[XN]=YN[XN]||{};function Kle(e,t,{window:n=Gf,initialValue:r=""}={}){const i=le(r),a=X(()=>{var o;return $s(t)||((o=n==null?void 0:n.document)==null?void 0:o.documentElement)});return At([a,()=>Lf(e)],([o,s])=>{var l;if(o&&n){const c=(l=n.getComputedStyle(o).getPropertyValue(s))==null?void 0:l.trim();i.value=c||r}},{immediate:!0}),At(i,o=>{var s;(s=a.value)!=null&&s.style&&a.value.style.setProperty(Lf(e),o)}),i}function qle({document:e=Ule}={}){if(!e)return le("visible");const t=le(e.visibilityState);return ti(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var JN=Object.getOwnPropertySymbols,Zle=Object.prototype.hasOwnProperty,Yle=Object.prototype.propertyIsEnumerable,Xle=(e,t)=>{var n={};for(var r in e)Zle.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&Yle.call(e,r)&&(n[r]=e[r]);return n};function Hi(e,t,n={}){const r=n,{window:i=Gf}=r,a=Xle(r,["window"]);let o;const s=yG(()=>i&&"ResizeObserver"in i),l=()=>{o&&(o.disconnect(),o=void 0)},c=At(()=>$s(e),f=>{l(),s.value&&i&&f&&(o=new ResizeObserver(t),o.observe(f,a))},{immediate:!0,flush:"post"}),h=()=>{l(),c()};return Qw(h),{isSupported:s,stop:h}}function QN(e,t={}){const{reset:n=!0,windowResize:r=!0,windowScroll:i=!0,immediate:a=!0}=t,o=le(0),s=le(0),l=le(0),c=le(0),h=le(0),f=le(0),p=le(0),v=le(0);function _(){const b=$s(e);if(!b){n&&(o.value=0,s.value=0,l.value=0,c.value=0,h.value=0,f.value=0,p.value=0,v.value=0);return}const C=b.getBoundingClientRect();o.value=C.height,s.value=C.bottom,l.value=C.left,c.value=C.right,h.value=C.top,f.value=C.width,p.value=C.x,v.value=C.y}return Hi(e,_),At(()=>$s(e),b=>!b&&_()),i&&ti("scroll",_,{capture:!0,passive:!0}),r&&ti("resize",_,{passive:!0}),b3(()=>{a&&_()}),{height:o,bottom:s,left:l,right:c,top:h,width:f,x:p,y:v,update:_}}var e8=Object.getOwnPropertySymbols,Jle=Object.prototype.hasOwnProperty,Qle=Object.prototype.propertyIsEnumerable,eue=(e,t)=>{var n={};for(var r in e)Jle.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&e8)for(var r of e8(e))t.indexOf(r)<0&&Qle.call(e,r)&&(n[r]=e[r]);return n};function _G(e,t,n={}){const r=n,{window:i=Gf}=r,a=eue(r,["window"]);let o;const s=yG(()=>i&&"MutationObserver"in i),l=()=>{o&&(o.disconnect(),o=void 0)},c=At(()=>$s(e),f=>{l(),s.value&&i&&f&&(o=new MutationObserver(t),o.observe(f,a))},{immediate:!0}),h=()=>{l(),c()};return Qw(h),{isSupported:s,stop:h}}var t8;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(t8||(t8={}));var tue=Object.defineProperty,n8=Object.getOwnPropertySymbols,nue=Object.prototype.hasOwnProperty,rue=Object.prototype.propertyIsEnumerable,r8=(e,t,n)=>t in e?tue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iue=(e,t)=>{for(var n in t||(t={}))nue.call(t,n)&&r8(e,n,t[n]);if(n8)for(var n of n8(t))rue.call(t,n)&&r8(e,n,t[n]);return e};const aue={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};iue({linear:$le},aue);function bG(e,t,n,r={}){var i,a,o;const{clone:s=!1,passive:l=!1,eventName:c,deep:h=!1,defaultValue:f}=r,p=er(),v=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((o=(a=p==null?void 0:p.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(p==null?void 0:p.proxy));let _=c;t||(t="modelValue"),_=c||_||`update:${t.toString()}`;const b=T=>s?HL(s)?s(T):Gle(T):T,C=()=>zle(e[t])?b(e[t]):f;if(l){const T=C(),E=le(T);return At(()=>e[t],A=>E.value=b(A)),At(E,A=>{(A!==e[t]||h)&&v(_,A)},{deep:h}),E}else return X({get(){return C()},set(T){v(_,T)}})}function oue({window:e=Gf}={}){if(!e)return le(!1);const t=le(e.document.hasFocus());return ti(e,"blur",()=>{t.value=!1}),ti(e,"focus",()=>{t.value=!0}),t}function sue(e={}){const{window:t=Gf,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:i=!0,includeScrollbar:a=!0}=e,o=le(n),s=le(r),l=()=>{t&&(a?(o.value=t.innerWidth,s.value=t.innerHeight):(o.value=t.document.documentElement.clientWidth,s.value=t.document.documentElement.clientHeight))};return l(),b3(l),ti("resize",l,{passive:!0}),i&&ti("orientationchange",l,{passive:!0}),{width:o,height:s}}const x3=()=>xr&&/firefox/i.test(window.navigator.userAgent),lue=(e,t)=>{if(!xr||!e||!t)return!1;const n=e.getBoundingClientRect();let r;return t instanceof Element?r=t.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},i8=e=>{let t=0,n=e;for(;n;)t+=n.offsetTop,n=n.offsetParent;return t},UL=(e,t)=>Math.abs(i8(e)-i8(t)),S3=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}};function uue(e,t,n,r){const i=n-t;return e/=r/2,e<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}var wG=typeof global=="object"&&global&&global.Object===Object&&global,cue=typeof self=="object"&&self&&self.Object===Object&&self,nc=wG||cue||Function("return this")(),tu=nc.Symbol,xG=Object.prototype,due=xG.hasOwnProperty,hue=xG.toString,gb=tu?tu.toStringTag:void 0;function fue(e){var t=due.call(e,gb),n=e[gb];try{e[gb]=void 0;var r=!0}catch{}var i=hue.call(e);return r&&(t?e[gb]=n:delete e[gb]),i}var pue=Object.prototype,vue=pue.toString;function mue(e){return vue.call(e)}var gue="[object Null]",yue="[object Undefined]",a8=tu?tu.toStringTag:void 0;function ym(e){return e==null?e===void 0?yue:gue:a8&&a8 in Object(e)?fue(e):mue(e)}function Zc(e){return e!=null&&typeof e=="object"}var _ue="[object Symbol]";function WM(e){return typeof e=="symbol"||Zc(e)&&ym(e)==_ue}function C3(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var xs=Array.isArray,bue=1/0,o8=tu?tu.prototype:void 0,s8=o8?o8.toString:void 0;function SG(e){if(typeof e=="string")return e;if(xs(e))return C3(e,SG)+"";if(WM(e))return s8?s8.call(e):"";var t=e+"";return t=="0"&&1/e==-bue?"-0":t}var wue=/\s/;function xue(e){for(var t=e.length;t--&&wue.test(e.charAt(t)););return t}var Sue=/^\s+/;function Cue(e){return e&&e.slice(0,xue(e)+1).replace(Sue,"")}function Ss(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var l8=NaN,Tue=/^[-+]0x[0-9a-f]+$/i,Mue=/^0b[01]+$/i,kue=/^0o[0-7]+$/i,Eue=parseInt;function u8(e){if(typeof e=="number")return e;if(WM(e))return l8;if(Ss(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ss(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cue(e);var n=Mue.test(e);return n||kue.test(e)?Eue(e.slice(2),n?2:8):Tue.test(e)?l8:+e}function T3(e){return e}var Aue="[object AsyncFunction]",Pue="[object Function]",Iue="[object GeneratorFunction]",Lue="[object Proxy]";function M3(e){if(!Ss(e))return!1;var t=ym(e);return t==Pue||t==Iue||t==Aue||t==Lue}var GA=nc["__core-js_shared__"],c8=function(){var e=/[^.]+$/.exec(GA&&GA.keys&&GA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Due(e){return!!c8&&c8 in e}var Rue=Function.prototype,Oue=Rue.toString;function _m(e){if(e!=null){try{return Oue.call(e)}catch{}try{return e+""}catch{}}return""}var zue=/[\\^$.*+?()[\]{}|]/g,Bue=/^\[object .+?Constructor\]$/,Fue=Function.prototype,Nue=Object.prototype,$ue=Fue.toString,Vue=Nue.hasOwnProperty,Hue=RegExp("^"+$ue.call(Vue).replace(zue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jue(e){if(!Ss(e)||Due(e))return!1;var t=M3(e)?Hue:Bue;return t.test(_m(e))}function Uue(e,t){return e==null?void 0:e[t]}function bm(e,t){var n=Uue(e,t);return jue(n)?n:void 0}var WL=bm(nc,"WeakMap"),d8=Object.create,Wue=function(){function e(){}return function(t){if(!Ss(t))return{};if(d8)return d8(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Gue(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Kue(){}function CG(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var que=800,Zue=16,Yue=Date.now;function Xue(e){var t=0,n=0;return function(){var r=Yue(),i=Zue-(r-n);if(n=r,i>0){if(++t>=que)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Jue(e){return function(){return e}}var yT=function(){try{var e=bm(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Que=yT?function(e,t){return yT(e,"toString",{configurable:!0,enumerable:!1,value:Jue(t),writable:!0})}:T3,TG=Xue(Que);function ece(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function MG(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function tce(e){return e!==e}function nce(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function rce(e,t,n){return t===t?nce(e,t,n):MG(e,tce,n)}function ice(e,t){var n=e==null?0:e.length;return!!n&&rce(e,t,0)>-1}var ace=9007199254740991,oce=/^(?:0|[1-9]\d*)$/;function GM(e,t){var n=typeof e;return t=t??ace,!!t&&(n=="number"||n!="symbol"&&oce.test(e))&&e>-1&&e%1==0&&e<t}function k3(e,t,n){t=="__proto__"&&yT?yT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ex(e,t){return e===t||e!==e&&t!==t}var sce=Object.prototype,lce=sce.hasOwnProperty;function E3(e,t,n){var r=e[t];(!(lce.call(e,t)&&ex(r,n))||n===void 0&&!(t in e))&&k3(e,t,n)}function S0(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=void 0;l===void 0&&(l=e[s]),i?k3(n,s,l):E3(n,s,l)}return n}var h8=Math.max;function kG(e,t,n){return t=h8(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=h8(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Gue(e,this,s)}}function EG(e,t){return TG(kG(e,t,T3),e+"")}var uce=9007199254740991;function A3(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=uce}function C0(e){return e!=null&&A3(e.length)&&!M3(e)}function cce(e,t,n){if(!Ss(n))return!1;var r=typeof t;return(r=="number"?C0(n)&&GM(t,n.length):r=="string"&&t in n)?ex(n[t],e):!1}function dce(e){return EG(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,o&&cce(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var hce=Object.prototype;function P3(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||hce;return e===n}function fce(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var pce="[object Arguments]";function f8(e){return Zc(e)&&ym(e)==pce}var AG=Object.prototype,vce=AG.hasOwnProperty,mce=AG.propertyIsEnumerable,Q1=f8(function(){return arguments}())?f8:function(e){return Zc(e)&&vce.call(e,"callee")&&!mce.call(e,"callee")};function gce(){return!1}var PG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,p8=PG&&typeof module=="object"&&module&&!module.nodeType&&module,yce=p8&&p8.exports===PG,v8=yce?nc.Buffer:void 0,_ce=v8?v8.isBuffer:void 0,ew=_ce||gce,bce="[object Arguments]",wce="[object Array]",xce="[object Boolean]",Sce="[object Date]",Cce="[object Error]",Tce="[object Function]",Mce="[object Map]",kce="[object Number]",Ece="[object Object]",Ace="[object RegExp]",Pce="[object Set]",Ice="[object String]",Lce="[object WeakMap]",Dce="[object ArrayBuffer]",Rce="[object DataView]",Oce="[object Float32Array]",zce="[object Float64Array]",Bce="[object Int8Array]",Fce="[object Int16Array]",Nce="[object Int32Array]",$ce="[object Uint8Array]",Vce="[object Uint8ClampedArray]",Hce="[object Uint16Array]",jce="[object Uint32Array]",da={};da[Oce]=da[zce]=da[Bce]=da[Fce]=da[Nce]=da[$ce]=da[Vce]=da[Hce]=da[jce]=!0;da[bce]=da[wce]=da[Dce]=da[xce]=da[Rce]=da[Sce]=da[Cce]=da[Tce]=da[Mce]=da[kce]=da[Ece]=da[Ace]=da[Pce]=da[Ice]=da[Lce]=!1;function Uce(e){return Zc(e)&&A3(e.length)&&!!da[ym(e)]}function I3(e){return function(t){return e(t)}}var IG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,g1=IG&&typeof module=="object"&&module&&!module.nodeType&&module,Wce=g1&&g1.exports===IG,KA=Wce&&wG.process,Uy=function(){try{var e=g1&&g1.require&&g1.require("util").types;return e||KA&&KA.binding&&KA.binding("util")}catch{}}(),m8=Uy&&Uy.isTypedArray,L3=m8?I3(m8):Uce,Gce=Object.prototype,Kce=Gce.hasOwnProperty;function LG(e,t){var n=xs(e),r=!n&&Q1(e),i=!n&&!r&&ew(e),a=!n&&!r&&!i&&L3(e),o=n||r||i||a,s=o?fce(e.length,String):[],l=s.length;for(var c in e)(t||Kce.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||GM(c,l)))&&s.push(c);return s}function DG(e,t){return function(n){return e(t(n))}}var qce=DG(Object.keys,Object),Zce=Object.prototype,Yce=Zce.hasOwnProperty;function Xce(e){if(!P3(e))return qce(e);var t=[];for(var n in Object(e))Yce.call(e,n)&&n!="constructor"&&t.push(n);return t}function tx(e){return C0(e)?LG(e):Xce(e)}function Jce(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Qce=Object.prototype,ede=Qce.hasOwnProperty;function tde(e){if(!Ss(e))return Jce(e);var t=P3(e),n=[];for(var r in e)r=="constructor"&&(t||!ede.call(e,r))||n.push(r);return n}function nx(e){return C0(e)?LG(e,!0):tde(e)}var nde=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rde=/^\w*$/;function D3(e,t){if(xs(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||WM(e)?!0:rde.test(e)||!nde.test(e)||t!=null&&e in Object(t)}var tw=bm(Object,"create");function ide(){this.__data__=tw?tw(null):{},this.size=0}function ade(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ode="__lodash_hash_undefined__",sde=Object.prototype,lde=sde.hasOwnProperty;function ude(e){var t=this.__data__;if(tw){var n=t[e];return n===ode?void 0:n}return lde.call(t,e)?t[e]:void 0}var cde=Object.prototype,dde=cde.hasOwnProperty;function hde(e){var t=this.__data__;return tw?t[e]!==void 0:dde.call(t,e)}var fde="__lodash_hash_undefined__";function pde(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=tw&&t===void 0?fde:t,this}function Xv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xv.prototype.clear=ide;Xv.prototype.delete=ade;Xv.prototype.get=ude;Xv.prototype.has=hde;Xv.prototype.set=pde;function vde(){this.__data__=[],this.size=0}function KM(e,t){for(var n=e.length;n--;)if(ex(e[n][0],t))return n;return-1}var mde=Array.prototype,gde=mde.splice;function yde(e){var t=this.__data__,n=KM(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():gde.call(t,n,1),--this.size,!0}function _de(e){var t=this.__data__,n=KM(t,e);return n<0?void 0:t[n][1]}function bde(e){return KM(this.__data__,e)>-1}function wde(e,t){var n=this.__data__,r=KM(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function rh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rh.prototype.clear=vde;rh.prototype.delete=yde;rh.prototype.get=_de;rh.prototype.has=bde;rh.prototype.set=wde;var nw=bm(nc,"Map");function xde(){this.size=0,this.__data__={hash:new Xv,map:new(nw||rh),string:new Xv}}function Sde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function qM(e,t){var n=e.__data__;return Sde(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Cde(e){var t=qM(this,e).delete(e);return this.size-=t?1:0,t}function Tde(e){return qM(this,e).get(e)}function Mde(e){return qM(this,e).has(e)}function kde(e,t){var n=qM(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function ih(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ih.prototype.clear=xde;ih.prototype.delete=Cde;ih.prototype.get=Tde;ih.prototype.has=Mde;ih.prototype.set=kde;var Ede="Expected a function";function ZM(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ede);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(ZM.Cache||ih),n}ZM.Cache=ih;var Ade=500;function Pde(e){var t=ZM(e,function(r){return n.size===Ade&&n.clear(),r}),n=t.cache;return t}var Ide=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lde=/\\(\\)?/g,Dde=Pde(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ide,function(n,r,i,a){t.push(i?a.replace(Lde,"$1"):r||n)}),t});function Rde(e){return e==null?"":SG(e)}function T0(e,t){return xs(e)?e:D3(e,t)?[e]:Dde(Rde(e))}var Ode=1/0;function M0(e){if(typeof e=="string"||WM(e))return e;var t=e+"";return t=="0"&&1/e==-Ode?"-0":t}function YM(e,t){t=T0(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[M0(t[n++])];return n&&n==r?e:void 0}function ha(e,t,n){var r=e==null?void 0:YM(e,t);return r===void 0?n:r}function R3(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var g8=tu?tu.isConcatSpreadable:void 0;function zde(e){return xs(e)||Q1(e)||!!(g8&&e&&e[g8])}function rx(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=zde),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?rx(s,t-1,n,r,i):R3(i,s):r||(i[i.length]=s)}return i}function RG(e){var t=e==null?0:e.length;return t?rx(e,1):[]}function OG(e){return TG(kG(e,void 0,RG),e+"")}var O3=DG(Object.getPrototypeOf,Object),Bde="[object Object]",Fde=Function.prototype,Nde=Object.prototype,zG=Fde.toString,$de=Nde.hasOwnProperty,Vde=zG.call(Object);function BG(e){if(!Zc(e)||ym(e)!=Bde)return!1;var t=O3(e);if(t===null)return!0;var n=$de.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&zG.call(n)==Vde}function Hde(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}function Wo(){if(!arguments.length)return[];var e=arguments[0];return xs(e)?e:[e]}function jde(){this.__data__=new rh,this.size=0}function Ude(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Wde(e){return this.__data__.get(e)}function Gde(e){return this.__data__.has(e)}var Kde=200;function qde(e,t){var n=this.__data__;if(n instanceof rh){var r=n.__data__;if(!nw||r.length<Kde-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ih(r)}return n.set(e,t),this.size=n.size,this}function ju(e){var t=this.__data__=new rh(e);this.size=t.size}ju.prototype.clear=jde;ju.prototype.delete=Ude;ju.prototype.get=Wde;ju.prototype.has=Gde;ju.prototype.set=qde;function Zde(e,t){return e&&S0(t,tx(t),e)}function Yde(e,t){return e&&S0(t,nx(t),e)}var FG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,y8=FG&&typeof module=="object"&&module&&!module.nodeType&&module,Xde=y8&&y8.exports===FG,_8=Xde?nc.Buffer:void 0,b8=_8?_8.allocUnsafe:void 0;function NG(e,t){if(t)return e.slice();var n=e.length,r=b8?b8(n):new e.constructor(n);return e.copy(r),r}function Jde(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function $G(){return[]}var Qde=Object.prototype,ehe=Qde.propertyIsEnumerable,w8=Object.getOwnPropertySymbols,z3=w8?function(e){return e==null?[]:(e=Object(e),Jde(w8(e),function(t){return ehe.call(e,t)}))}:$G;function the(e,t){return S0(e,z3(e),t)}var nhe=Object.getOwnPropertySymbols,VG=nhe?function(e){for(var t=[];e;)R3(t,z3(e)),e=O3(e);return t}:$G;function rhe(e,t){return S0(e,VG(e),t)}function HG(e,t,n){var r=t(e);return xs(e)?r:R3(r,n(e))}function GL(e){return HG(e,tx,z3)}function jG(e){return HG(e,nx,VG)}var KL=bm(nc,"DataView"),qL=bm(nc,"Promise"),wy=bm(nc,"Set"),x8="[object Map]",ihe="[object Object]",S8="[object Promise]",C8="[object Set]",T8="[object WeakMap]",M8="[object DataView]",ahe=_m(KL),ohe=_m(nw),she=_m(qL),lhe=_m(wy),uhe=_m(WL),Lu=ym;(KL&&Lu(new KL(new ArrayBuffer(1)))!=M8||nw&&Lu(new nw)!=x8||qL&&Lu(qL.resolve())!=S8||wy&&Lu(new wy)!=C8||WL&&Lu(new WL)!=T8)&&(Lu=function(e){var t=ym(e),n=t==ihe?e.constructor:void 0,r=n?_m(n):"";if(r)switch(r){case ahe:return M8;case ohe:return x8;case she:return S8;case lhe:return C8;case uhe:return T8}return t});var che=Object.prototype,dhe=che.hasOwnProperty;function hhe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&dhe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var _T=nc.Uint8Array;function B3(e){var t=new e.constructor(e.byteLength);return new _T(t).set(new _T(e)),t}function fhe(e,t){var n=t?B3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var phe=/\w*$/;function vhe(e){var t=new e.constructor(e.source,phe.exec(e));return t.lastIndex=e.lastIndex,t}var k8=tu?tu.prototype:void 0,E8=k8?k8.valueOf:void 0;function mhe(e){return E8?Object(E8.call(e)):{}}function UG(e,t){var n=t?B3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var ghe="[object Boolean]",yhe="[object Date]",_he="[object Map]",bhe="[object Number]",whe="[object RegExp]",xhe="[object Set]",She="[object String]",Che="[object Symbol]",The="[object ArrayBuffer]",Mhe="[object DataView]",khe="[object Float32Array]",Ehe="[object Float64Array]",Ahe="[object Int8Array]",Phe="[object Int16Array]",Ihe="[object Int32Array]",Lhe="[object Uint8Array]",Dhe="[object Uint8ClampedArray]",Rhe="[object Uint16Array]",Ohe="[object Uint32Array]";function zhe(e,t,n){var r=e.constructor;switch(t){case The:return B3(e);case ghe:case yhe:return new r(+e);case Mhe:return fhe(e,n);case khe:case Ehe:case Ahe:case Phe:case Ihe:case Lhe:case Dhe:case Rhe:case Ohe:return UG(e,n);case _he:return new r;case bhe:case She:return new r(e);case whe:return vhe(e);case xhe:return new r;case Che:return mhe(e)}}function WG(e){return typeof e.constructor=="function"&&!P3(e)?Wue(O3(e)):{}}var Bhe="[object Map]";function Fhe(e){return Zc(e)&&Lu(e)==Bhe}var A8=Uy&&Uy.isMap,Nhe=A8?I3(A8):Fhe,$he="[object Set]";function Vhe(e){return Zc(e)&&Lu(e)==$he}var P8=Uy&&Uy.isSet,Hhe=P8?I3(P8):Vhe,jhe=1,Uhe=2,Whe=4,GG="[object Arguments]",Ghe="[object Array]",Khe="[object Boolean]",qhe="[object Date]",Zhe="[object Error]",KG="[object Function]",Yhe="[object GeneratorFunction]",Xhe="[object Map]",Jhe="[object Number]",qG="[object Object]",Qhe="[object RegExp]",efe="[object Set]",tfe="[object String]",nfe="[object Symbol]",rfe="[object WeakMap]",ife="[object ArrayBuffer]",afe="[object DataView]",ofe="[object Float32Array]",sfe="[object Float64Array]",lfe="[object Int8Array]",ufe="[object Int16Array]",cfe="[object Int32Array]",dfe="[object Uint8Array]",hfe="[object Uint8ClampedArray]",ffe="[object Uint16Array]",pfe="[object Uint32Array]",ea={};ea[GG]=ea[Ghe]=ea[ife]=ea[afe]=ea[Khe]=ea[qhe]=ea[ofe]=ea[sfe]=ea[lfe]=ea[ufe]=ea[cfe]=ea[Xhe]=ea[Jhe]=ea[qG]=ea[Qhe]=ea[efe]=ea[tfe]=ea[nfe]=ea[dfe]=ea[hfe]=ea[ffe]=ea[pfe]=!0;ea[Zhe]=ea[KG]=ea[rfe]=!1;function xy(e,t,n,r,i,a){var o,s=t&jhe,l=t&Uhe,c=t&Whe;if(n&&(o=i?n(e,r,i,a):n(e)),o!==void 0)return o;if(!Ss(e))return e;var h=xs(e);if(h){if(o=hhe(e),!s)return CG(e,o)}else{var f=Lu(e),p=f==KG||f==Yhe;if(ew(e))return NG(e,s);if(f==qG||f==GG||p&&!i){if(o=l||p?{}:WG(e),!s)return l?rhe(e,Yde(o,e)):the(e,Zde(o,e))}else{if(!ea[f])return i?e:{};o=zhe(e,f,s)}}a||(a=new ju);var v=a.get(e);if(v)return v;a.set(e,o),Hhe(e)?e.forEach(function(C){o.add(xy(C,t,n,C,e,a))}):Nhe(e)&&e.forEach(function(C,T){o.set(T,xy(C,t,n,T,e,a))});var _=c?l?jG:GL:l?nx:tx,b=h?void 0:_(e);return ece(b||e,function(C,T){b&&(T=C,C=e[T]),E3(o,T,xy(C,t,n,T,e,a))}),o}var vfe=4;function I8(e){return xy(e,vfe)}var mfe=1,gfe=4;function bT(e){return xy(e,mfe|gfe)}var yfe="__lodash_hash_undefined__";function _fe(e){return this.__data__.set(e,yfe),this}function bfe(e){return this.__data__.has(e)}function rw(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ih;++t<n;)this.add(e[t])}rw.prototype.add=rw.prototype.push=_fe;rw.prototype.has=bfe;function wfe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ZG(e,t){return e.has(t)}var xfe=1,Sfe=2;function YG(e,t,n,r,i,a){var o=n&xfe,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var f=-1,p=!0,v=n&Sfe?new rw:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var _=e[f],b=t[f];if(r)var C=o?r(b,_,f,t,e,a):r(_,b,f,e,t,a);if(C!==void 0){if(C)continue;p=!1;break}if(v){if(!wfe(t,function(T,E){if(!ZG(v,E)&&(_===T||i(_,T,n,r,a)))return v.push(E)})){p=!1;break}}else if(!(_===b||i(_,b,n,r,a))){p=!1;break}}return a.delete(e),a.delete(t),p}function Cfe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function F3(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Tfe=1,Mfe=2,kfe="[object Boolean]",Efe="[object Date]",Afe="[object Error]",Pfe="[object Map]",Ife="[object Number]",Lfe="[object RegExp]",Dfe="[object Set]",Rfe="[object String]",Ofe="[object Symbol]",zfe="[object ArrayBuffer]",Bfe="[object DataView]",L8=tu?tu.prototype:void 0,qA=L8?L8.valueOf:void 0;function Ffe(e,t,n,r,i,a,o){switch(n){case Bfe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zfe:return!(e.byteLength!=t.byteLength||!a(new _T(e),new _T(t)));case kfe:case Efe:case Ife:return ex(+e,+t);case Afe:return e.name==t.name&&e.message==t.message;case Lfe:case Rfe:return e==t+"";case Pfe:var s=Cfe;case Dfe:var l=r&Tfe;if(s||(s=F3),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=Mfe,o.set(e,t);var h=YG(s(e),s(t),r,i,a,o);return o.delete(e),h;case Ofe:if(qA)return qA.call(e)==qA.call(t)}return!1}var Nfe=1,$fe=Object.prototype,Vfe=$fe.hasOwnProperty;function Hfe(e,t,n,r,i,a){var o=n&Nfe,s=GL(e),l=s.length,c=GL(t),h=c.length;if(l!=h&&!o)return!1;for(var f=l;f--;){var p=s[f];if(!(o?p in t:Vfe.call(t,p)))return!1}var v=a.get(e),_=a.get(t);if(v&&_)return v==t&&_==e;var b=!0;a.set(e,t),a.set(t,e);for(var C=o;++f<l;){p=s[f];var T=e[p],E=t[p];if(r)var A=o?r(E,T,p,t,e,a):r(T,E,p,e,t,a);if(!(A===void 0?T===E||i(T,E,n,r,a):A)){b=!1;break}C||(C=p=="constructor")}if(b&&!C){var I=e.constructor,O=t.constructor;I!=O&&"constructor"in e&&"constructor"in t&&!(typeof I=="function"&&I instanceof I&&typeof O=="function"&&O instanceof O)&&(b=!1)}return a.delete(e),a.delete(t),b}var jfe=1,D8="[object Arguments]",R8="[object Array]",JS="[object Object]",Ufe=Object.prototype,O8=Ufe.hasOwnProperty;function Wfe(e,t,n,r,i,a){var o=xs(e),s=xs(t),l=o?R8:Lu(e),c=s?R8:Lu(t);l=l==D8?JS:l,c=c==D8?JS:c;var h=l==JS,f=c==JS,p=l==c;if(p&&ew(e)){if(!ew(t))return!1;o=!0,h=!1}if(p&&!h)return a||(a=new ju),o||L3(e)?YG(e,t,n,r,i,a):Ffe(e,t,l,n,r,i,a);if(!(n&jfe)){var v=h&&O8.call(e,"__wrapped__"),_=f&&O8.call(t,"__wrapped__");if(v||_){var b=v?e.value():e,C=_?t.value():t;return a||(a=new ju),i(b,C,n,r,a)}}return p?(a||(a=new ju),Hfe(e,t,n,r,i,a)):!1}function XM(e,t,n,r,i){return e===t?!0:e==null||t==null||!Zc(e)&&!Zc(t)?e!==e&&t!==t:Wfe(e,t,n,r,XM,i)}var Gfe=1,Kfe=2;function qfe(e,t,n,r){var i=n.length,a=i;if(e==null)return!a;for(e=Object(e);i--;){var o=n[i];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){o=n[i];var s=o[0],l=e[s],c=o[1];if(o[2]){if(l===void 0&&!(s in e))return!1}else{var h=new ju,f;if(!(f===void 0?XM(c,l,Gfe|Kfe,r,h):f))return!1}}return!0}function XG(e){return e===e&&!Ss(e)}function Zfe(e){for(var t=tx(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,XG(i)]}return t}function JG(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Yfe(e){var t=Zfe(e);return t.length==1&&t[0][2]?JG(t[0][0],t[0][1]):function(n){return n===e||qfe(n,e,t)}}function Xfe(e,t){return e!=null&&t in Object(e)}function Jfe(e,t,n){t=T0(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=M0(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&A3(i)&&GM(o,i)&&(xs(e)||Q1(e)))}function QG(e,t){return e!=null&&Jfe(e,t,Xfe)}var Qfe=1,epe=2;function tpe(e,t){return D3(e)&&XG(t)?JG(M0(e),t):function(n){var r=ha(n,e);return r===void 0&&r===t?QG(n,e):XM(t,r,Qfe|epe)}}function npe(e){return function(t){return t==null?void 0:t[e]}}function rpe(e){return function(t){return YM(t,e)}}function ipe(e){return D3(e)?npe(M0(e)):rpe(e)}function eK(e){return typeof e=="function"?e:e==null?T3:typeof e=="object"?xs(e)?tpe(e[0],e[1]):Yfe(e):ipe(e)}function ape(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[++i];if(n(a[l],l,a)===!1)break}return t}}var tK=ape();function ope(e,t){return e&&tK(e,t,tx)}function spe(e,t){return function(n,r){if(n==null)return n;if(!C0(n))return e(n,r);for(var i=n.length,a=-1,o=Object(n);++a<i&&r(o[a],a,o)!==!1;);return n}}var lpe=spe(ope),ZA=function(){return nc.Date.now()},upe="Expected a function",cpe=Math.max,dpe=Math.min;function Ks(e,t,n){var r,i,a,o,s,l,c=0,h=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(upe);t=u8(t)||0,Ss(n)&&(h=!!n.leading,f="maxWait"in n,a=f?cpe(u8(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p);function v(B){var N=r,H=i;return r=i=void 0,c=B,o=e.apply(H,N),o}function _(B){return c=B,s=setTimeout(T,t),h?v(B):o}function b(B){var N=B-l,H=B-c,j=t-N;return f?dpe(j,a-H):j}function C(B){var N=B-l,H=B-c;return l===void 0||N>=t||N<0||f&&H>=a}function T(){var B=ZA();if(C(B))return E(B);s=setTimeout(T,b(B))}function E(B){return s=void 0,p&&r?v(B):(r=i=void 0,o)}function A(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function I(){return s===void 0?o:E(ZA())}function O(){var B=ZA(),N=C(B);if(r=arguments,i=this,l=B,N){if(s===void 0)return _(l);if(f)return clearTimeout(s),s=setTimeout(T,t),v(l)}return s===void 0&&(s=setTimeout(T,t)),o}return O.cancel=A,O.flush=I,O}function ZL(e,t,n){(n!==void 0&&!ex(e[t],n)||n===void 0&&!(t in e))&&k3(e,t,n)}function nK(e){return Zc(e)&&C0(e)}function YL(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function hpe(e){return S0(e,nx(e))}function fpe(e,t,n,r,i,a,o){var s=YL(e,n),l=YL(t,n),c=o.get(l);if(c){ZL(e,n,c);return}var h=a?a(s,l,n+"",e,t,o):void 0,f=h===void 0;if(f){var p=xs(l),v=!p&&ew(l),_=!p&&!v&&L3(l);h=l,p||v||_?xs(s)?h=s:nK(s)?h=CG(s):v?(f=!1,h=NG(l,!0)):_?(f=!1,h=UG(l,!0)):h=[]:BG(l)||Q1(l)?(h=s,Q1(s)?h=hpe(s):(!Ss(s)||M3(s))&&(h=WG(l))):f=!1}f&&(o.set(l,h),i(h,l,r,a,o),o.delete(l)),ZL(e,n,h)}function rK(e,t,n,r,i){e!==t&&tK(t,function(a,o){if(i||(i=new ju),Ss(a))fpe(e,t,o,n,rK,r,i);else{var s=r?r(YL(e,o),a,o+"",e,t,i):void 0;s===void 0&&(s=a),ZL(e,o,s)}},nx)}function ppe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function iK(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return MG(e,eK(t),i,!0)}function vpe(e,t){var n=-1,r=C0(e)?Array(e.length):[];return lpe(e,function(i,a,o){r[++n]=t(i,a,o)}),r}function mpe(e,t){var n=xs(e)?C3:vpe;return n(e,eK(t))}function gpe(e,t){return rx(mpe(e,t),1)}var ype=1/0;function _pe(e){var t=e==null?0:e.length;return t?rx(e,ype):[]}function iw(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function bpe(e,t){return t.length<2?e:YM(e,Hde(t,0,-1))}function Yo(e,t){return XM(e,t)}function ro(e){return e==null}function aK(e){return e===void 0}var wpe=dce(function(e,t,n){rK(e,t,n)});function xpe(e,t){return t=T0(t,e),e=bpe(e,t),e==null||delete e[M0(ppe(t))]}function Spe(e){return BG(e)?void 0:e}var Cpe=1,Tpe=2,Mpe=4,kpe=OG(function(e,t){var n={};if(e==null)return n;var r=!1;t=C3(t,function(a){return a=T0(a,e),r||(r=a.length>1),a}),S0(e,jG(e),n),r&&(n=xy(n,Cpe|Tpe|Mpe,Spe));for(var i=t.length;i--;)xpe(n,t[i]);return n});function oK(e,t,n,r){if(!Ss(e))return e;t=T0(t,e);for(var i=-1,a=t.length,o=a-1,s=e;s!=null&&++i<a;){var l=M0(t[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=o){var h=s[l];c=void 0,c===void 0&&(c=Ss(h)?h:GM(t[i+1])?[]:{})}E3(s,l,c),s=s[l]}return e}function Epe(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=YM(e,o);n(s,o)&&oK(a,T0(o,e),s)}return a}function Ape(e,t){return Epe(e,t,function(n,r){return QG(e,r)})}var Nu=OG(function(e,t){return e==null?{}:Ape(e,t)});function Ppe(e,t,n){return e==null?e:oK(e,t,n)}var Ipe="Expected a function";function Lv(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Ipe);return Ss(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ks(e,t,{leading:r,maxWait:t,trailing:i})}var Lpe=1/0,Dpe=wy&&1/F3(new wy([,-0]))[1]==Lpe?function(e){return new wy(e)}:Kue,Rpe=200;function Ope(e,t,n){var r=-1,i=ice,a=e.length,o=!0,s=[],l=s;if(a>=Rpe){var c=Dpe(e);if(c)return F3(c);o=!1,i=ZG,l=new rw}else l=s;e:for(;++r<a;){var h=e[r],f=h;if(h=h!==0?h:0,o&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;s.push(h)}else i(l,f,n)||(l!==s&&l.push(f),s.push(h))}return s}var YA=EG(function(e){return Ope(rx(e,1,nK,!0))});const aa=e=>e===void 0,pa=e=>typeof e=="boolean",zn=e=>typeof e=="number",Ul=e=>!e&&e!==0||sn(e)&&e.length===0||nr(e)&&!Object.keys(e).length,vl=e=>typeof Element>"u"?!1:e instanceof Element,Jv=e=>ro(e),zpe=e=>Ln(e)?!Number.isNaN(Number(e)):!1,JM=e=>e===window,Df=e=>xr?window.requestAnimationFrame(e):setTimeout(e,16),Qv=e=>xr?window.cancelAnimationFrame(e):clearTimeout(e),N3=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Bc=e=>Yw(e),Wy=e=>Object.keys(e),Bpe=e=>Object.entries(e),SC=(e,t,n)=>({get value(){return ha(e,t,n)},set value(r){Ppe(e,t,r)}});class Fpe extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function Na(e,t){throw new Fpe(`[${e}] ${t}`)}const sK=(e="")=>e.split(" ").filter(t=>!!t.trim()),Vs=(e,t)=>{if(!e||!t)return!1;if(t.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(t)},Kl=(e,t)=>{!e||!t.trim()||e.classList.add(...sK(t))},Xo=(e,t)=>{!e||!t.trim()||e.classList.remove(...sK(t))},af=(e,t)=>{var n;if(!xr||!e||!t)return"";let r=Gs(t);r==="float"&&(r="cssFloat");try{const i=e.style[r];if(i)return i;const a=(n=document.defaultView)==null?void 0:n.getComputedStyle(e,"");return a?a[r]:""}catch{return e.style[r]}};function oa(e,t="px"){if(!e)return"";if(zn(e)||zpe(e))return`${e}${t}`;if(Ln(e))return e}const Npe=(e,t)=>{if(!xr)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],r=af(e,n);return["scroll","auto","overlay"].some(i=>r.includes(i))},$3=(e,t)=>{if(!xr)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Npe(n,t))return n;n=n.parentNode}return n};let QS;const lK=e=>{var t;if(!xr)return 0;if(QS!==void 0)return QS;const n=document.createElement("div");n.className=`${e}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",n.appendChild(i);const a=i.offsetWidth;return(t=n.parentNode)==null||t.removeChild(n),QS=r-a,QS};function V3(e,t){if(!xr)return;if(!t){e.scrollTop=0;return}const n=[];let r=t.offsetParent;for(;r!==null&&e!==r&&e.contains(r);)n.push(r),r=r.offsetParent;const i=t.offsetTop+n.reduce((l,c)=>l+c.offsetTop,0),a=i+t.offsetHeight,o=e.scrollTop,s=o+e.clientHeight;i<o?e.scrollTop=i:a>s&&(e.scrollTop=a-e.clientHeight)}function $pe(e,t,n,r,i){const a=Date.now();let o;const s=()=>{const c=Date.now()-a,h=uue(c>r?r:c,t,n,r);JM(e)?e.scrollTo(window.pageXOffset,h):e.scrollTop=h,c<r?o=Df(s):typeof i=="function"&&i()};return s(),()=>{o&&Qv(o)}}const z8=(e,t)=>JM(t)?e.ownerDocument.documentElement:t,B8=e=>JM(e)?window.scrollY:e.scrollTop,e2=e=>{if(!xr||e==="")return null;if(Ln(e))try{return document.querySelector(e)}catch{return null}return e};/*! Element Plus Icons Vue v2.3.1 */var Vpe=Be({name:"ArrowDown",__name:"arrow-down",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),ah=Vpe,Hpe=Be({name:"ArrowLeft",__name:"arrow-left",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),Rf=Hpe,jpe=Be({name:"ArrowRight",__name:"arrow-right",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),ys=jpe,Upe=Be({name:"ArrowUp",__name:"arrow-up",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),H3=Upe,Wpe=Be({name:"Back",__name:"back",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),V("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Gpe=Wpe,Kpe=Be({name:"Calendar",__name:"calendar",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),qpe=Kpe,Zpe=Be({name:"CaretRight",__name:"caret-right",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),uK=Zpe,Ype=Be({name:"CaretTop",__name:"caret-top",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),Xpe=Ype,Jpe=Be({name:"Check",__name:"check",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),ix=Jpe,Qpe=Be({name:"CircleCheckFilled",__name:"circle-check-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),eve=Qpe,tve=Be({name:"CircleCheck",__name:"circle-check",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),V("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),j3=tve,nve=Be({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),U3=nve,rve=Be({name:"CircleClose",__name:"circle-close",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),V("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Kf=rve,ive=Be({name:"Clock",__name:"clock",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),V("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),V("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),cK=ive,ave=Be({name:"Close",__name:"close",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Yu=ave,ove=Be({name:"DArrowLeft",__name:"d-arrow-left",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),Of=ove,sve=Be({name:"DArrowRight",__name:"d-arrow-right",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),zf=sve,lve=Be({name:"Delete",__name:"delete",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),uve=lve,cve=Be({name:"Document",__name:"document",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),dve=cve,hve=Be({name:"FullScreen",__name:"full-screen",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),fve=hve,pve=Be({name:"Hide",__name:"hide",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),V("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),vve=pve,mve=Be({name:"InfoFilled",__name:"info-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),W3=mve,gve=Be({name:"Loading",__name:"loading",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),Yc=gve,yve=Be({name:"Minus",__name:"minus",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),_ve=yve,bve=Be({name:"MoreFilled",__name:"more-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),F8=bve,wve=Be({name:"More",__name:"more",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),xve=wve,Sve=Be({name:"PictureFilled",__name:"picture-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),Cve=Sve,Tve=Be({name:"Plus",__name:"plus",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),dK=Tve,Mve=Be({name:"QuestionFilled",__name:"question-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),kve=Mve,Eve=Be({name:"RefreshLeft",__name:"refresh-left",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Ave=Eve,Pve=Be({name:"RefreshRight",__name:"refresh-right",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),Ive=Pve,Lve=Be({name:"ScaleToOriginal",__name:"scale-to-original",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),Dve=Lve,Rve=Be({name:"Search",__name:"search",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Ove=Rve,zve=Be({name:"SortDown",__name:"sort-down",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Bve=zve,Fve=Be({name:"SortUp",__name:"sort-up",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Nve=Fve,$ve=Be({name:"StarFilled",__name:"star-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),t2=$ve,Vve=Be({name:"Star",__name:"star",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),Hve=Vve,jve=Be({name:"SuccessFilled",__name:"success-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),hK=jve,Uve=Be({name:"View",__name:"view",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Wve=Uve,Gve=Be({name:"WarningFilled",__name:"warning-filled",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),QM=Gve,Kve=Be({name:"ZoomIn",__name:"zoom-in",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),fK=Kve,qve=Be({name:"ZoomOut",__name:"zoom-out",setup(e){return(t,n)=>(te(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[V("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),Zve=qve;const pK="__epPropKey",Qe=e=>e,Yve=e=>nr(e)&&!!e[pK],rc=(e,t)=>{if(!nr(e)||Yve(e))return e;const{values:n,required:r,default:i,type:a,validator:o}=e,l={type:a,required:!!r,validator:n||o?c=>{let h=!1,f=[];if(n&&(f=Array.from(n),Er(e,"default")&&f.push(i),h||(h=f.includes(c))),o&&(h||(h=o(c))),!h&&f.length>0){const p=[...new Set(f)].map(v=>JSON.stringify(v)).join(", ");$se(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${p}], got value ${JSON.stringify(c)}.`)}return h}:void 0,[pK]:!0};return Er(e,"default")&&(l.default=i),l},Wt=e=>iw(Object.entries(e).map(([t,n])=>[t,rc(n,t)])),si=Qe([String,Object,Function]),G3={Close:Yu},K3={Close:Yu,SuccessFilled:hK,InfoFilled:W3,WarningFilled:QM,CircleCloseFilled:U3},Bf={success:hK,warning:QM,error:U3,info:W3},q3={validating:Yc,success:j3,error:Kf},Wn=(e,t)=>{if(e.install=n=>{for(const r of[e,...Object.values(t??{})])n.component(r.name,r)},t)for(const[n,r]of Object.entries(t))e[n]=r;return e},vK=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),Xve=(e,t)=>(e.install=n=>{n.directive(t,e)},e),Ki=e=>(e.install=ai,e),ek=(...e)=>t=>{e.forEach(n=>{Dn(n)?n(t):n.value=t})},En={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Jve=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],XA=["sun","mon","tue","wed","thu","fri","sat"],tr="update:modelValue",ki="change",_s="input",N8=Symbol("INSTALLED_KEY"),id=["","default","small","large"],mK=e=>["",...id].includes(e);var Fl=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Fl||{});function XL(e){return Oi(e)&&e.type===hn}function Qve(e){return Oi(e)&&e.type===po}function eme(e){return Oi(e)&&!XL(e)&&!Qve(e)}const tme=e=>{if(!Oi(e))return{};const t=e.props||{},n=(Oi(e.type)?e.type.props:void 0)||{},r={};return Object.keys(n).forEach(i=>{Er(n[i],"default")&&(r[i]=n[i].default)}),Object.keys(t).forEach(i=>{r[Gs(i)]=t[i]}),r},nme=e=>{if(!sn(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},xf=e=>{const t=sn(e)?e:[e],n=[];return t.forEach(r=>{var i;sn(r)?n.push(...xf(r)):Oi(r)&&sn(r.children)?n.push(...xf(r.children)):(n.push(r),Oi(r)&&((i=r.component)!=null&&i.subTree)&&n.push(...xf(r.component.subTree)))}),n},$8=e=>[...new Set(e)],ms=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],rme=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),ji=e=>e;function ime(e){let t=0;const n=(...r)=>{t&&Qv(t),t=Df(()=>{e(...r),t=0})};return n.cancel=()=>{Qv(t),t=0},n}const ame=["class","style"],ome=/^on[A-Z]/,Z3=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n}=e,r=X(()=>((n==null?void 0:n.value)||[]).concat(ame)),i=er();return X(i?()=>{var a;return iw(Object.entries((a=i.proxy)==null?void 0:a.$attrs).filter(([o])=>!r.value.includes(o)&&!(t&&ome.test(o))))}:()=>({}))},Sf=({from:e,replacement:t,scope:n,version:r,ref:i,type:a="API"},o)=>{At(()=>w(o),s=>{},{immediate:!0})},gK=(e,t,n,r)=>{let i={offsetX:0,offsetY:0};const a=c=>{const h=c.clientX,f=c.clientY,{offsetX:p,offsetY:v}=i,_=e.value.getBoundingClientRect(),b=_.left,C=_.top,T=_.width,E=_.height,A=document.documentElement.clientWidth,I=document.documentElement.clientHeight,O=-b+p,B=-C+v,N=A-b-T+p,H=I-C-E+v,j=U=>{let Y=p+U.clientX-h,ie=v+U.clientY-f;r!=null&&r.value||(Y=Math.min(Math.max(Y,O),N),ie=Math.min(Math.max(ie,B),H)),i={offsetX:Y,offsetY:ie},e.value&&(e.value.style.transform=`translate(${oa(Y)}, ${oa(ie)})`)},W=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",W)},o=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",a)},s=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)},l=()=>{i={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Un(()=>{ko(()=>{n.value?o():s()})}),ui(()=>{s()}),{resetPosition:l}};var sme={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const lme=e=>(t,n)=>ume(t,n,w(e)),ume=(e,t,n)=>ha(n,e,e).replace(/\{(\w+)\}/g,(r,i)=>{var a;return`${(a=t==null?void 0:t[i])!=null?a:`{${i}}`}`}),cme=e=>{const t=X(()=>w(e).name),n=li(e)?e:le(e);return{lang:t,locale:n,t:lme(e)}},yK=Symbol("localeContextKey"),Sr=e=>{const t=e||un(yK,le());return cme(X(()=>t.value||sme))},y1="el",dme="is-",Bp=(e,t,n,r,i)=>{let a=`${e}-${t}`;return n&&(a+=`-${n}`),r&&(a+=`__${r}`),i&&(a+=`--${i}`),a},_K=Symbol("namespaceContextKey"),Y3=e=>{const t=e||(er()?un(_K,le(y1)):le(y1));return X(()=>w(t)||y1)},Rt=(e,t)=>{const n=Y3(t);return{namespace:n,b:(b="")=>Bp(n.value,e,b,"",""),e:b=>b?Bp(n.value,e,"",b,""):"",m:b=>b?Bp(n.value,e,"","",b):"",be:(b,C)=>b&&C?Bp(n.value,e,b,C,""):"",em:(b,C)=>b&&C?Bp(n.value,e,"",b,C):"",bm:(b,C)=>b&&C?Bp(n.value,e,b,"",C):"",bem:(b,C,T)=>b&&C&&T?Bp(n.value,e,b,C,T):"",is:(b,...C)=>{const T=C.length>=1?C[0]:!0;return b&&T?`${dme}${b}`:""},cssVar:b=>{const C={};for(const T in b)b[T]&&(C[`--${n.value}-${T}`]=b[T]);return C},cssVarName:b=>`--${n.value}-${b}`,cssVarBlock:b=>{const C={};for(const T in b)b[T]&&(C[`--${n.value}-${e}-${T}`]=b[T]);return C},cssVarBlockName:b=>`--${n.value}-${e}-${b}`}},X3=(e,t={})=>{li(e)||Na("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||Rt("popup"),r=X(()=>n.bm("parent","hidden"));if(!xr||Vs(document.body,r.value))return;let i=0,a=!1,o="0";const s=()=>{setTimeout(()=>{Xo(document==null?void 0:document.body,r.value),a&&document&&(document.body.style.width=o)},200)};At(e,l=>{if(!l){s();return}a=!Vs(document.body,r.value),a&&(o=document.body.style.width),i=lK(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,h=af(document.body,"overflowY");i>0&&(c||h==="scroll")&&a&&(document.body.style.width=`calc(100% - ${i}px)`),Kl(document.body,r.value)}),n3(()=>s())},hme=rc({type:Qe(Boolean),default:null}),fme=rc({type:Qe(Function)}),bK=e=>{const t=`update:${e}`,n=`onUpdate:${e}`,r=[t],i={[e]:hme,[n]:fme};return{useModelToggle:({indicator:o,toggleReason:s,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:h,onHide:f})=>{const p=er(),{emit:v}=p,_=p.props,b=X(()=>Dn(_[n])),C=X(()=>_[e]===null),T=N=>{o.value!==!0&&(o.value=!0,s&&(s.value=N),Dn(h)&&h(N))},E=N=>{o.value!==!1&&(o.value=!1,s&&(s.value=N),Dn(f)&&f(N))},A=N=>{if(_.disabled===!0||Dn(c)&&!c())return;const H=b.value&&xr;H&&v(t,!0),(C.value||!H)&&T(N)},I=N=>{if(_.disabled===!0||!xr)return;const H=b.value&&xr;H&&v(t,!1),(C.value||!H)&&E(N)},O=N=>{pa(N)&&(_.disabled&&N?b.value&&v(t,!1):o.value!==N&&(N?T():E()))},B=()=>{o.value?I():A()};return At(()=>_[e],O),l&&p.appContext.config.globalProperties.$route!==void 0&&At(()=>({...p.proxy.$route}),()=>{l.value&&o.value&&I()}),Un(()=>{O(_[e])}),{hide:I,show:A,toggle:B,hasUpdateHandler:b}},useModelToggleProps:i,useModelToggleEmits:r}};bK("modelValue");const wK=e=>{const t=er();return X(()=>{var n,r;return(r=(n=t==null?void 0:t.proxy)==null?void 0:n.$props)==null?void 0:r[e]})};var Hs="top",nu="bottom",ru="right",js="left",J3="auto",ax=[Hs,nu,ru,js],Gy="start",aw="end",pme="clippingParents",xK="viewport",yb="popper",vme="reference",V8=ax.reduce(function(e,t){return e.concat([t+"-"+Gy,t+"-"+aw])},[]),qf=[].concat(ax,[J3]).reduce(function(e,t){return e.concat([t,t+"-"+Gy,t+"-"+aw])},[]),mme="beforeRead",gme="read",yme="afterRead",_me="beforeMain",bme="main",wme="afterMain",xme="beforeWrite",Sme="write",Cme="afterWrite",Tme=[mme,gme,yme,_me,bme,wme,xme,Sme,Cme];function Xc(e){return e?(e.nodeName||"").toLowerCase():null}function ic(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ky(e){var t=ic(e).Element;return e instanceof t||e instanceof Element}function Jl(e){var t=ic(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Q3(e){if(typeof ShadowRoot>"u")return!1;var t=ic(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Mme(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},a=t.elements[n];!Jl(a)||!Xc(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function kme(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],a=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=o.reduce(function(l,c){return l[c]="",l},{});!Jl(i)||!Xc(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var SK={name:"applyStyles",enabled:!0,phase:"write",fn:Mme,effect:kme,requires:["computeStyles"]};function Wc(e){return e.split("-")[0]}var Dv=Math.max,wT=Math.min,qy=Math.round;function Zy(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(Jl(e)&&t){var a=e.offsetHeight,o=e.offsetWidth;o>0&&(r=qy(n.width)/o||1),a>0&&(i=qy(n.height)/a||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function e5(e){var t=Zy(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function CK(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Q3(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Yd(e){return ic(e).getComputedStyle(e)}function Eme(e){return["table","td","th"].indexOf(Xc(e))>=0}function Zf(e){return((Ky(e)?e.ownerDocument:e.document)||window.document).documentElement}function tk(e){return Xc(e)==="html"?e:e.assignedSlot||e.parentNode||(Q3(e)?e.host:null)||Zf(e)}function H8(e){return!Jl(e)||Yd(e).position==="fixed"?null:e.offsetParent}function Ame(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Jl(e)){var r=Yd(e);if(r.position==="fixed")return null}var i=tk(e);for(Q3(i)&&(i=i.host);Jl(i)&&["html","body"].indexOf(Xc(i))<0;){var a=Yd(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function ox(e){for(var t=ic(e),n=H8(e);n&&Eme(n)&&Yd(n).position==="static";)n=H8(n);return n&&(Xc(n)==="html"||Xc(n)==="body"&&Yd(n).position==="static")?t:n||Ame(e)||t}function t5(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _1(e,t,n){return Dv(e,wT(t,n))}function Pme(e,t,n){var r=_1(e,t,n);return r>n?n:r}function TK(){return{top:0,right:0,bottom:0,left:0}}function MK(e){return Object.assign({},TK(),e)}function kK(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Ime=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,MK(typeof e!="number"?e:kK(e,ax))};function Lme(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Wc(n.placement),l=t5(s),c=[js,ru].indexOf(s)>=0,h=c?"height":"width";if(!(!a||!o)){var f=Ime(i.padding,n),p=e5(a),v=l==="y"?Hs:js,_=l==="y"?nu:ru,b=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],C=o[l]-n.rects.reference[l],T=ox(a),E=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,A=b/2-C/2,I=f[v],O=E-p[h]-f[_],B=E/2-p[h]/2+A,N=_1(I,B,O),H=l;n.modifiersData[r]=(t={},t[H]=N,t.centerOffset=N-B,t)}}function Dme(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!CK(t.elements.popper,i)||(t.elements.arrow=i))}var Rme={name:"arrow",enabled:!0,phase:"main",fn:Lme,effect:Dme,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yy(e){return e.split("-")[1]}var Ome={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zme(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:qy(t*i)/i||0,y:qy(n*i)/i||0}}function j8(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,f=e.isFixed,p=o.x,v=p===void 0?0:p,_=o.y,b=_===void 0?0:_,C=typeof h=="function"?h({x:v,y:b}):{x:v,y:b};v=C.x,b=C.y;var T=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),A=js,I=Hs,O=window;if(c){var B=ox(n),N="clientHeight",H="clientWidth";if(B===ic(n)&&(B=Zf(n),Yd(B).position!=="static"&&s==="absolute"&&(N="scrollHeight",H="scrollWidth")),B=B,i===Hs||(i===js||i===ru)&&a===aw){I=nu;var j=f&&B===O&&O.visualViewport?O.visualViewport.height:B[N];b-=j-r.height,b*=l?1:-1}if(i===js||(i===Hs||i===nu)&&a===aw){A=ru;var W=f&&B===O&&O.visualViewport?O.visualViewport.width:B[H];v-=W-r.width,v*=l?1:-1}}var U=Object.assign({position:s},c&&Ome),Y=h===!0?zme({x:v,y:b}):{x:v,y:b};if(v=Y.x,b=Y.y,l){var ie;return Object.assign({},U,(ie={},ie[I]=E?"0":"",ie[A]=T?"0":"",ie.transform=(O.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",ie))}return Object.assign({},U,(t={},t[I]=E?b+"px":"",t[A]=T?v+"px":"",t.transform="",t))}function Bme(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,c={placement:Wc(t.placement),variation:Yy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,j8(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,j8(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var EK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Bme,data:{}},n2={passive:!0};function Fme(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,l=ic(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(h){h.addEventListener("scroll",n.update,n2)}),s&&l.addEventListener("resize",n.update,n2),function(){a&&c.forEach(function(h){h.removeEventListener("scroll",n.update,n2)}),s&&l.removeEventListener("resize",n.update,n2)}}var AK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Fme,data:{}},Nme={left:"right",right:"left",bottom:"top",top:"bottom"};function CC(e){return e.replace(/left|right|bottom|top/g,function(t){return Nme[t]})}var $me={start:"end",end:"start"};function U8(e){return e.replace(/start|end/g,function(t){return $me[t]})}function n5(e){var t=ic(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function r5(e){return Zy(Zf(e)).left+n5(e).scrollLeft}function Vme(e){var t=ic(e),n=Zf(e),r=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,s=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:i,height:a,x:o+r5(e),y:s}}function Hme(e){var t,n=Zf(e),r=n5(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Dv(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Dv(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+r5(e),l=-r.scrollTop;return Yd(i||n).direction==="rtl"&&(s+=Dv(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function i5(e){var t=Yd(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function PK(e){return["html","body","#document"].indexOf(Xc(e))>=0?e.ownerDocument.body:Jl(e)&&i5(e)?e:PK(tk(e))}function b1(e,t){var n;t===void 0&&(t=[]);var r=PK(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=ic(r),o=i?[a].concat(a.visualViewport||[],i5(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(b1(tk(o)))}function JL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function jme(e){var t=Zy(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function W8(e,t){return t===xK?JL(Vme(e)):Ky(t)?jme(t):JL(Hme(Zf(e)))}function Ume(e){var t=b1(tk(e)),n=["absolute","fixed"].indexOf(Yd(e).position)>=0,r=n&&Jl(e)?ox(e):e;return Ky(r)?t.filter(function(i){return Ky(i)&&CK(i,r)&&Xc(i)!=="body"}):[]}function Wme(e,t,n){var r=t==="clippingParents"?Ume(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce(function(s,l){var c=W8(e,l);return s.top=Dv(c.top,s.top),s.right=wT(c.right,s.right),s.bottom=wT(c.bottom,s.bottom),s.left=Dv(c.left,s.left),s},W8(e,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function IK(e){var t=e.reference,n=e.element,r=e.placement,i=r?Wc(r):null,a=r?Yy(r):null,o=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(i){case Hs:l={x:o,y:t.y-n.height};break;case nu:l={x:o,y:t.y+t.height};break;case ru:l={x:t.x+t.width,y:s};break;case js:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var c=i?t5(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(a){case Gy:l[c]=l[c]-(t[h]/2-n[h]/2);break;case aw:l[c]=l[c]+(t[h]/2-n[h]/2);break}}return l}function ow(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.boundary,o=a===void 0?pme:a,s=n.rootBoundary,l=s===void 0?xK:s,c=n.elementContext,h=c===void 0?yb:c,f=n.altBoundary,p=f===void 0?!1:f,v=n.padding,_=v===void 0?0:v,b=MK(typeof _!="number"?_:kK(_,ax)),C=h===yb?vme:yb,T=e.rects.popper,E=e.elements[p?C:h],A=Wme(Ky(E)?E:E.contextElement||Zf(e.elements.popper),o,l),I=Zy(e.elements.reference),O=IK({reference:I,element:T,strategy:"absolute",placement:i}),B=JL(Object.assign({},T,O)),N=h===yb?B:I,H={top:A.top-N.top+b.top,bottom:N.bottom-A.bottom+b.bottom,left:A.left-N.left+b.left,right:N.right-A.right+b.right},j=e.modifiersData.offset;if(h===yb&&j){var W=j[i];Object.keys(H).forEach(function(U){var Y=[ru,nu].indexOf(U)>=0?1:-1,ie=[Hs,nu].indexOf(U)>=0?"y":"x";H[U]+=W[ie]*Y})}return H}function Gme(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?qf:l,h=Yy(r),f=h?s?V8:V8.filter(function(_){return Yy(_)===h}):ax,p=f.filter(function(_){return c.indexOf(_)>=0});p.length===0&&(p=f);var v=p.reduce(function(_,b){return _[b]=ow(e,{placement:b,boundary:i,rootBoundary:a,padding:o})[Wc(b)],_},{});return Object.keys(v).sort(function(_,b){return v[_]-v[b]})}function Kme(e){if(Wc(e)===J3)return[];var t=CC(e);return[U8(e),t,U8(t)]}function qme(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,f=n.rootBoundary,p=n.altBoundary,v=n.flipVariations,_=v===void 0?!0:v,b=n.allowedAutoPlacements,C=t.options.placement,T=Wc(C),E=T===C,A=l||(E||!_?[CC(C)]:Kme(C)),I=[C].concat(A).reduce(function(Ce,Ve){return Ce.concat(Wc(Ve)===J3?Gme(t,{placement:Ve,boundary:h,rootBoundary:f,padding:c,flipVariations:_,allowedAutoPlacements:b}):Ve)},[]),O=t.rects.reference,B=t.rects.popper,N=new Map,H=!0,j=I[0],W=0;W<I.length;W++){var U=I[W],Y=Wc(U),ie=Yy(U)===Gy,ue=[Hs,nu].indexOf(Y)>=0,J=ue?"width":"height",q=ow(t,{placement:U,boundary:h,rootBoundary:f,altBoundary:p,padding:c}),ce=ue?ie?ru:js:ie?nu:Hs;O[J]>B[J]&&(ce=CC(ce));var re=CC(ce),ee=[];if(a&&ee.push(q[Y]<=0),s&&ee.push(q[ce]<=0,q[re]<=0),ee.every(function(Ce){return Ce})){j=U,H=!1;break}N.set(U,ee)}if(H)for(var oe=_?3:1,be=function(Ce){var Ve=I.find(function(et){var Ee=N.get(et);if(Ee)return Ee.slice(0,Ce).every(function(Je){return Je})});if(Ve)return j=Ve,"break"},we=oe;we>0;we--){var pe=be(we);if(pe==="break")break}t.placement!==j&&(t.modifiersData[r]._skip=!0,t.placement=j,t.reset=!0)}}var Zme={name:"flip",enabled:!0,phase:"main",fn:qme,requiresIfExists:["offset"],data:{_skip:!1}};function G8(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function K8(e){return[Hs,ru,nu,js].some(function(t){return e[t]>=0})}function Yme(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=ow(t,{elementContext:"reference"}),s=ow(t,{altBoundary:!0}),l=G8(o,r),c=G8(s,i,a),h=K8(l),f=K8(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}var Xme={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yme};function Jme(e,t,n){var r=Wc(e),i=[js,Hs].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[js,ru].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function Qme(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,o=qf.reduce(function(h,f){return h[f]=Jme(f,t.rects,a),h},{}),s=o[t.placement],l=s.x,c=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}var ege={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qme};function tge(e){var t=e.state,n=e.name;t.modifiersData[n]=IK({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var LK={name:"popperOffsets",enabled:!0,phase:"read",fn:tge,data:{}};function nge(e){return e==="x"?"y":"x"}function rge(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,f=n.padding,p=n.tether,v=p===void 0?!0:p,_=n.tetherOffset,b=_===void 0?0:_,C=ow(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:h}),T=Wc(t.placement),E=Yy(t.placement),A=!E,I=t5(T),O=nge(I),B=t.modifiersData.popperOffsets,N=t.rects.reference,H=t.rects.popper,j=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,W=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Y={x:0,y:0};if(B){if(a){var ie,ue=I==="y"?Hs:js,J=I==="y"?nu:ru,q=I==="y"?"height":"width",ce=B[I],re=ce+C[ue],ee=ce-C[J],oe=v?-H[q]/2:0,be=E===Gy?N[q]:H[q],we=E===Gy?-H[q]:-N[q],pe=t.elements.arrow,Ce=v&&pe?e5(pe):{width:0,height:0},Ve=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:TK(),et=Ve[ue],Ee=Ve[J],Je=_1(0,N[q],Ce[q]),Ue=A?N[q]/2-oe-Je-et-W.mainAxis:be-Je-et-W.mainAxis,yt=A?-N[q]/2+oe+Je+Ee+W.mainAxis:we+Je+Ee+W.mainAxis,Ne=t.elements.arrow&&ox(t.elements.arrow),dt=Ne?I==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,Le=(ie=U==null?void 0:U[I])!=null?ie:0,ze=ce+Ue-Le-dt,ct=ce+yt-Le,Lt=_1(v?wT(re,ze):re,ce,v?Dv(ee,ct):ee);B[I]=Lt,Y[I]=Lt-ce}if(s){var lt,Ct=I==="x"?Hs:js,_t=I==="x"?nu:ru,It=B[O],Bt=O==="y"?"height":"width",Ft=It+C[Ct],cn=It-C[_t],Ot=[Hs,js].indexOf(T)!==-1,kt=(lt=U==null?void 0:U[O])!=null?lt:0,fn=Ot?Ft:It-N[Bt]-H[Bt]-kt+W.altAxis,Rn=Ot?It+N[Bt]+H[Bt]-kt-W.altAxis:cn,On=v&&Ot?Pme(fn,It,Rn):_1(v?fn:Ft,It,v?Rn:cn);B[O]=On,Y[O]=On-It}t.modifiersData[r]=Y}}var ige={name:"preventOverflow",enabled:!0,phase:"main",fn:rge,requiresIfExists:["offset"]};function age(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function oge(e){return e===ic(e)||!Jl(e)?n5(e):age(e)}function sge(e){var t=e.getBoundingClientRect(),n=qy(t.width)/e.offsetWidth||1,r=qy(t.height)/e.offsetHeight||1;return n!==1||r!==1}function lge(e,t,n){n===void 0&&(n=!1);var r=Jl(t),i=Jl(t)&&sge(t),a=Zf(t),o=Zy(e,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Xc(t)!=="body"||i5(a))&&(s=oge(t)),Jl(t)?(l=Zy(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=r5(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function uge(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&i(l)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function cge(e){var t=uge(e);return Tme.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function dge(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function hge(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var q8={placement:"bottom",modifiers:[],strategy:"absolute"};function Z8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function a5(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?q8:i;return function(o,s,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},q8,a),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},h=[],f=!1,p={state:c,setOptions:function(b){var C=typeof b=="function"?b(c.options):b;_(),c.options=Object.assign({},a,c.options,C),c.scrollParents={reference:Ky(o)?b1(o):o.contextElement?b1(o.contextElement):[],popper:b1(s)};var T=cge(hge([].concat(r,c.options.modifiers)));return c.orderedModifiers=T.filter(function(E){return E.enabled}),v(),p.update()},forceUpdate:function(){if(!f){var b=c.elements,C=b.reference,T=b.popper;if(Z8(C,T)){c.rects={reference:lge(C,ox(T),c.options.strategy==="fixed"),popper:e5(T)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(H){return c.modifiersData[H.name]=Object.assign({},H.data)});for(var E=0;E<c.orderedModifiers.length;E++){if(c.reset===!0){c.reset=!1,E=-1;continue}var A=c.orderedModifiers[E],I=A.fn,O=A.options,B=O===void 0?{}:O,N=A.name;typeof I=="function"&&(c=I({state:c,options:B,name:N,instance:p})||c)}}}},update:dge(function(){return new Promise(function(b){p.forceUpdate(),b(c)})}),destroy:function(){_(),f=!0}};if(!Z8(o,s))return p;p.setOptions(l).then(function(b){!f&&l.onFirstUpdate&&l.onFirstUpdate(b)});function v(){c.orderedModifiers.forEach(function(b){var C=b.name,T=b.options,E=T===void 0?{}:T,A=b.effect;if(typeof A=="function"){var I=A({state:c,name:C,instance:p,options:E}),O=function(){};h.push(I||O)}})}function _(){h.forEach(function(b){return b()}),h=[]}return p}}a5();var fge=[AK,LK,EK,SK];a5({defaultModifiers:fge});var pge=[AK,LK,EK,SK,ege,Zme,ige,Rme,Xme],vge=a5({defaultModifiers:pge});const mge=(e,t,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=gge(l);Object.assign(o.value,c)},requires:["computeStyles"]},i=X(()=>{const{onFirstUpdate:l,placement:c,strategy:h,modifiers:f}=w(n);return{onFirstUpdate:l,placement:c||"bottom",strategy:h||"absolute",modifiers:[...f||[],r,{name:"applyStyles",enabled:!1}]}}),a=_i(),o=le({styles:{popper:{position:w(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return At(i,l=>{const c=w(a);c&&c.setOptions(l)},{deep:!0}),At([e,t],([l,c])=>{s(),!(!l||!c)&&(a.value=vge(l,c,w(i)))}),ui(()=>{s()}),{state:X(()=>{var l;return{...((l=w(a))==null?void 0:l.state)||{}}}),styles:X(()=>w(o).styles),attributes:X(()=>w(o).attributes),update:()=>{var l;return(l=w(a))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=w(a))==null?void 0:l.forceUpdate()},instanceRef:X(()=>w(a))}};function gge(e){const t=Object.keys(e.elements),n=iw(t.map(i=>[i,e.styles[i]||{}])),r=iw(t.map(i=>[i,e.attributes[i]]));return{styles:n,attributes:r}}const o5=e=>{if(!e)return{onClick:ai,onMousedown:ai,onMouseup:ai};let t=!1,n=!1;return{onClick:o=>{t&&n&&e(o),t=n=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},yge=(e,t=0)=>{if(t===0)return e;const n=le(!1);let r=null;const i=()=>{r&&clearTimeout(r),r=setTimeout(()=>{n.value=e.value},t)};return Un(i),At(()=>e.value,a=>{a?i():n.value=a}),n};function Y8(){let e;const t=(r,i)=>{n(),e=window.setTimeout(r,i)},n=()=>window.clearTimeout(e);return Qw(()=>n()),{registerTimeout:t,cancelTimeout:n}}const X8={prefix:Math.floor(Math.random()*1e4),current:0},_ge=Symbol("elIdInjection"),s5=()=>er()?un(_ge,X8):X8,mo=e=>{const t=s5(),n=Y3();return X(()=>w(e)||`${n.value}-id-${t.prefix}-${t.current++}`)};let Yg=[];const J8=e=>{const t=e;t.key===En.esc&&Yg.forEach(n=>n(t))},bge=e=>{Un(()=>{Yg.length===0&&document.addEventListener("keydown",J8),xr&&Yg.push(e)}),ui(()=>{Yg=Yg.filter(t=>t!==e),Yg.length===0&&xr&&document.removeEventListener("keydown",J8)})};let Q8;const DK=()=>{const e=Y3(),t=s5(),n=X(()=>`${e.value}-popper-container-${t.prefix}`),r=X(()=>`#${n.value}`);return{id:n,selector:r}},wge=e=>{const t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},xge=()=>{const{id:e,selector:t}=DK();return $M(()=>{xr&&!Q8&&!document.body.querySelector(t.value)&&(Q8=wge(e.value))}),{id:e,selector:t}},Sge=Wt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Cge=({showAfter:e,hideAfter:t,autoClose:n,open:r,close:i})=>{const{registerTimeout:a}=Y8(),{registerTimeout:o,cancelTimeout:s}=Y8();return{onOpen:h=>{a(()=>{r(h);const f=w(n);zn(f)&&f>0&&o(()=>{i(h)},f)},w(e))},onClose:h=>{s(),a(()=>{i(h)},w(t))}}},RK=Symbol("elForwardRef"),Tge=e=>{pr(RK,{setForwardRef:n=>{e.value=n}})},Mge=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),e6={current:0},t6=le(0),OK=2e3,n6=Symbol("elZIndexContextKey"),zK=Symbol("zIndexContextKey"),k0=e=>{const t=er()?un(n6,e6):e6,n=e||(er()?un(zK,void 0):void 0),r=X(()=>{const o=w(n);return zn(o)?o:OK}),i=X(()=>r.value+t6.value),a=()=>(t.current++,t6.value=t.current,i.value);return!xr&&un(n6),{initialZIndex:r,currentZIndex:i,nextZIndex:a}},Xy=Math.min,Rv=Math.max,xT=Math.round,r2=Math.floor,Ff=e=>({x:e,y:e}),kge={left:"right",right:"left",bottom:"top",top:"bottom"},Ege={start:"end",end:"start"};function QL(e,t,n){return Rv(e,Xy(t,n))}function sx(e,t){return typeof e=="function"?e(t):e}function em(e){return e.split("-")[0]}function lx(e){return e.split("-")[1]}function BK(e){return e==="x"?"y":"x"}function l5(e){return e==="y"?"height":"width"}function Jy(e){return["top","bottom"].includes(em(e))?"y":"x"}function u5(e){return BK(Jy(e))}function Age(e,t,n){n===void 0&&(n=!1);const r=lx(e),i=u5(e),a=l5(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=ST(o)),[o,ST(o)]}function Pge(e){const t=ST(e);return[eD(e),t,eD(t)]}function eD(e){return e.replace(/start|end/g,t=>Ege[t])}function Ige(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}function Lge(e,t,n,r){const i=lx(e);let a=Ige(em(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(eD)))),a}function ST(e){return e.replace(/left|right|bottom|top/g,t=>kge[t])}function Dge(e){return{top:0,right:0,bottom:0,left:0,...e}}function FK(e){return typeof e!="number"?Dge(e):{top:e,right:e,bottom:e,left:e}}function CT(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function r6(e,t,n){let{reference:r,floating:i}=e;const a=Jy(t),o=u5(t),s=l5(o),l=em(t),c=a==="y",h=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[s]/2-i[s]/2;let v;switch(l){case"top":v={x:h,y:r.y-i.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-i.width,y:f};break;default:v={x:r.x,y:r.y}}switch(lx(t)){case"start":v[o]-=p*(n&&c?-1:1);break;case"end":v[o]+=p*(n&&c?-1:1);break}return v}const Rge=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:f}=r6(c,r,l),p=r,v={},_=0;for(let b=0;b<s.length;b++){const{name:C,fn:T}=s[b],{x:E,y:A,data:I,reset:O}=await T({x:h,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:v,rects:c,platform:o,elements:{reference:e,floating:t}});h=E??h,f=A??f,v={...v,[C]:{...v[C],...I}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):O.rects),{x:h,y:f}=r6(c,p,l)),b=-1)}return{x:h,y:f,placement:p,strategy:i,middlewareData:v}};async function c5(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=sx(t,e),_=FK(v),C=s[p?f==="floating"?"reference":"floating":f],T=CT(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(C)))==null||n?C:C.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:h,strategy:l})),E=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),I=await(a.isElement==null?void 0:a.isElement(A))?await(a.getScale==null?void 0:a.getScale(A))||{x:1,y:1}:{x:1,y:1},O=CT(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:E,offsetParent:A,strategy:l}):E);return{top:(T.top-O.top+_.top)/I.y,bottom:(O.bottom-T.bottom+_.bottom)/I.y,left:(T.left-O.left+_.left)/I.x,right:(O.right-T.right+_.right)/I.x}}const Oge=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:h=0}=sx(e,t)||{};if(c==null)return{};const f=FK(h),p={x:n,y:r},v=u5(i),_=l5(v),b=await o.getDimensions(c),C=v==="y",T=C?"top":"left",E=C?"bottom":"right",A=C?"clientHeight":"clientWidth",I=a.reference[_]+a.reference[v]-p[v]-a.floating[_],O=p[v]-a.reference[v],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=B?B[A]:0;(!N||!await(o.isElement==null?void 0:o.isElement(B)))&&(N=s.floating[A]||a.floating[_]);const H=I/2-O/2,j=N/2-b[_]/2-1,W=Xy(f[T],j),U=Xy(f[E],j),Y=W,ie=N-b[_]-U,ue=N/2-b[_]/2+H,J=QL(Y,ue,ie),q=!l.arrow&&lx(i)!=null&&ue!==J&&a.reference[_]/2-(ue<Y?W:U)-b[_]/2<0,ce=q?ue<Y?ue-Y:ue-ie:0;return{[v]:p[v]+ce,data:{[v]:J,centerOffset:ue-J-ce,...q&&{alignmentOffset:ce}},reset:q}}}),zge=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:b=!0,...C}=sx(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const T=em(i),E=Jy(s),A=em(s)===s,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(A||!b?[ST(s)]:Pge(s)),B=_!=="none";!p&&B&&O.push(...Lge(s,b,_,I));const N=[s,...O],H=await c5(t,C),j=[];let W=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&j.push(H[T]),f){const ue=Age(i,o,I);j.push(H[ue[0]],H[ue[1]])}if(W=[...W,{placement:i,overflows:j}],!j.every(ue=>ue<=0)){var U,Y;const ue=(((U=a.flip)==null?void 0:U.index)||0)+1,J=N[ue];if(J)return{data:{index:ue,overflows:W},reset:{placement:J}};let q=(Y=W.filter(ce=>ce.overflows[0]<=0).sort((ce,re)=>ce.overflows[1]-re.overflows[1])[0])==null?void 0:Y.placement;if(!q)switch(v){case"bestFit":{var ie;const ce=(ie=W.filter(re=>{if(B){const ee=Jy(re.placement);return ee===E||ee==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(ee=>ee>0).reduce((ee,oe)=>ee+oe,0)]).sort((re,ee)=>re[1]-ee[1])[0])==null?void 0:ie[0];ce&&(q=ce);break}case"initialPlacement":q=s;break}if(i!==q)return{reset:{placement:q}}}return{}}}};async function Bge(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=em(n),s=lx(n),l=Jy(n)==="y",c=["left","top"].includes(o)?-1:1,h=a&&l?-1:1,f=sx(t,e);let{mainAxis:p,crossAxis:v,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return s&&typeof _=="number"&&(v=s==="end"?_*-1:_),l?{x:v*h,y:p*c}:{x:p*c,y:v*h}}const Fge=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await Bge(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},Nge=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:C=>{let{x:T,y:E}=C;return{x:T,y:E}}},...l}=sx(e,t),c={x:n,y:r},h=await c5(t,l),f=Jy(em(i)),p=BK(f);let v=c[p],_=c[f];if(a){const C=p==="y"?"top":"left",T=p==="y"?"bottom":"right",E=v+h[C],A=v-h[T];v=QL(E,v,A)}if(o){const C=f==="y"?"top":"left",T=f==="y"?"bottom":"right",E=_+h[C],A=_-h[T];_=QL(E,_,A)}const b=s.fn({...t,[p]:v,[f]:_});return{...b,data:{x:b.x-n,y:b.y-r}}}}};function E0(e){return NK(e)?(e.nodeName||"").toLowerCase():"#document"}function ml(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oh(e){var t;return(t=(NK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function NK(e){return e instanceof Node||e instanceof ml(e).Node}function Xu(e){return e instanceof Element||e instanceof ml(e).Element}function Jc(e){return e instanceof HTMLElement||e instanceof ml(e).HTMLElement}function i6(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ml(e).ShadowRoot}function ux(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ju(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $ge(e){return["table","td","th"].includes(E0(e))}function nk(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function d5(e){const t=h5(),n=Xu(e)?Ju(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Vge(e){let t=Nf(e);for(;Jc(t)&&!Qy(t);){if(d5(t))return t;if(nk(t))return null;t=Nf(t)}return null}function h5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qy(e){return["html","body","#document"].includes(E0(e))}function Ju(e){return ml(e).getComputedStyle(e)}function rk(e){return Xu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Nf(e){if(E0(e)==="html")return e;const t=e.assignedSlot||e.parentNode||i6(e)&&e.host||oh(e);return i6(t)?t.host:t}function $K(e){const t=Nf(e);return Qy(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jc(t)&&ux(t)?t:$K(t)}function sw(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=$K(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=ml(i);if(a){const s=tD(o);return t.concat(o,o.visualViewport||[],ux(i)?i:[],s&&n?sw(s):[])}return t.concat(i,sw(i,[],n))}function tD(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function VK(e){const t=Ju(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Jc(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=xT(n)!==a||xT(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function f5(e){return Xu(e)?e:e.contextElement}function Sy(e){const t=f5(e);if(!Jc(t))return Ff(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=VK(t);let o=(a?xT(n.width):n.width)/r,s=(a?xT(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const Hge=Ff(0);function HK(e){const t=ml(e);return!h5()||!t.visualViewport?Hge:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jge(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ml(e)?!1:t}function tm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=f5(e);let o=Ff(1);t&&(r?Xu(r)&&(o=Sy(r)):o=Sy(e));const s=jge(a,n,r)?HK(a):Ff(0);let l=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,h=i.width/o.x,f=i.height/o.y;if(a){const p=ml(a),v=r&&Xu(r)?ml(r):r;let _=p,b=tD(_);for(;b&&r&&v!==_;){const C=Sy(b),T=b.getBoundingClientRect(),E=Ju(b),A=T.left+(b.clientLeft+parseFloat(E.paddingLeft))*C.x,I=T.top+(b.clientTop+parseFloat(E.paddingTop))*C.y;l*=C.x,c*=C.y,h*=C.x,f*=C.y,l+=A,c+=I,_=ml(b),b=tD(_)}}return CT({width:h,height:f,x:l,y:c})}function Uge(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=oh(r),s=t?nk(t.floating):!1;if(r===o||s&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Ff(1);const h=Ff(0),f=Jc(r);if((f||!f&&!a)&&((E0(r)!=="body"||ux(o))&&(l=rk(r)),Jc(r))){const p=tm(r);c=Sy(r),h.x=p.x+r.clientLeft,h.y=p.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x,y:n.y*c.y-l.scrollTop*c.y+h.y}}function Wge(e){return Array.from(e.getClientRects())}function jK(e){return tm(oh(e)).left+rk(e).scrollLeft}function Gge(e){const t=oh(e),n=rk(e),r=e.ownerDocument.body,i=Rv(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Rv(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+jK(e);const s=-n.scrollTop;return Ju(r).direction==="rtl"&&(o+=Rv(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}function Kge(e,t){const n=ml(e),r=oh(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const c=h5();(!c||c&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function qge(e,t){const n=tm(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Jc(e)?Sy(e):Ff(1),o=e.clientWidth*a.x,s=e.clientHeight*a.y,l=i*a.x,c=r*a.y;return{width:o,height:s,x:l,y:c}}function a6(e,t,n){let r;if(t==="viewport")r=Kge(e,n);else if(t==="document")r=Gge(oh(e));else if(Xu(t))r=qge(t,n);else{const i=HK(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return CT(r)}function UK(e,t){const n=Nf(e);return n===t||!Xu(n)||Qy(n)?!1:Ju(n).position==="fixed"||UK(n,t)}function Zge(e,t){const n=t.get(e);if(n)return n;let r=sw(e,[],!1).filter(s=>Xu(s)&&E0(s)!=="body"),i=null;const a=Ju(e).position==="fixed";let o=a?Nf(e):e;for(;Xu(o)&&!Qy(o);){const s=Ju(o),l=d5(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ux(o)&&!l&&UK(e,o))?r=r.filter(h=>h!==o):i=s,o=Nf(o)}return t.set(e,r),r}function Yge(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?nk(t)?[]:Zge(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((c,h)=>{const f=a6(t,h,i);return c.top=Rv(f.top,c.top),c.right=Xy(f.right,c.right),c.bottom=Xy(f.bottom,c.bottom),c.left=Rv(f.left,c.left),c},a6(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xge(e){const{width:t,height:n}=VK(e);return{width:t,height:n}}function Jge(e,t,n){const r=Jc(t),i=oh(t),a=n==="fixed",o=tm(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=Ff(0);if(r||!r&&!a)if((E0(t)!=="body"||ux(i))&&(s=rk(t)),r){const f=tm(t,!0,a,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else i&&(l.x=jK(i));const c=o.left+s.scrollLeft-l.x,h=o.top+s.scrollTop-l.y;return{x:c,y:h,width:o.width,height:o.height}}function JA(e){return Ju(e).position==="static"}function o6(e,t){return!Jc(e)||Ju(e).position==="fixed"?null:t?t(e):e.offsetParent}function WK(e,t){const n=ml(e);if(nk(e))return n;if(!Jc(e)){let i=Nf(e);for(;i&&!Qy(i);){if(Xu(i)&&!JA(i))return i;i=Nf(i)}return n}let r=o6(e,t);for(;r&&$ge(r)&&JA(r);)r=o6(r,t);return r&&Qy(r)&&JA(r)&&!d5(r)?n:r||Vge(e)||n}const Qge=async function(e){const t=this.getOffsetParent||WK,n=this.getDimensions,r=await n(e.floating);return{reference:Jge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eye(e){return Ju(e).direction==="rtl"}const tye={convertOffsetParentRelativeRectToViewportRelativeRect:Uge,getDocumentElement:oh,getClippingRect:Yge,getOffsetParent:WK,getElementRects:Qge,getClientRects:Wge,getDimensions:Xge,getScale:Sy,isElement:Xu,isRTL:eye};function nye(e,t){let n=null,r;const i=oh(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:c,top:h,width:f,height:p}=e.getBoundingClientRect();if(s||t(),!f||!p)return;const v=r2(h),_=r2(i.clientWidth-(c+f)),b=r2(i.clientHeight-(h+p)),C=r2(c),E={rootMargin:-v+"px "+-_+"px "+-b+"px "+-C+"px",threshold:Rv(0,Xy(1,l))||1};let A=!0;function I(O){const B=O[0].intersectionRatio;if(B!==l){if(!A)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A=!1}try{n=new IntersectionObserver(I,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(I,E)}n.observe(e)}return o(!0),a}function rye(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=f5(e),h=i||a?[...c?sw(c):[],...sw(t)]:[];h.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),a&&T.addEventListener("resize",n)});const f=c&&s?nye(c,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(T=>{let[E]=T;E&&E.target===c&&v&&(v.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var A;(A=v)==null||A.observe(t)})),n()}),c&&!l&&v.observe(c),v.observe(t));let _,b=l?tm(e):null;l&&C();function C(){const T=tm(e);b&&(T.x!==b.x||T.y!==b.y||T.width!==b.width||T.height!==b.height)&&n(),b=T,_=requestAnimationFrame(C)}return n(),()=>{var T;h.forEach(E=>{i&&E.removeEventListener("scroll",n),a&&E.removeEventListener("resize",n)}),f==null||f(),(T=v)==null||T.disconnect(),v=null,l&&cancelAnimationFrame(_)}}const iye=c5,GK=Fge,aye=Nge,oye=zge,KK=Oge,qK=(e,t,n)=>{const r=new Map,i={platform:tye,...n},a={...i.platform,_c:r};return Rge(e,t,{...i,platform:a})};Wt({});const sye=e=>{if(!xr)return;if(!e)return e;const t=$s(e);return t||(li(e)?t:e)},lye=({middleware:e,placement:t,strategy:n})=>{const r=le(),i=le(),a=le(),o=le(),s=le({}),l={x:a,y:o,placement:t,strategy:n,middlewareData:s},c=async()=>{if(!xr)return;const h=sye(r),f=$s(i);if(!h||!f)return;const p=await qK(h,f,{placement:w(t),strategy:w(n),middleware:w(e)});Wy(l).forEach(v=>{l[v].value=p[v]})};return Un(()=>{ko(()=>{c()})}),{...l,update:c,referenceRef:r,contentRef:i}},uye=({arrowRef:e,padding:t})=>({name:"arrow",options:{element:e,padding:t},fn(n){const r=w(e);return r?KK({element:r,padding:t}).fn(n):{}}});function cye(e){let t;function n(){if(e.value==null)return;const{selectionStart:i,selectionEnd:a,value:o}=e.value;if(i==null||a==null)return;const s=o.slice(0,Math.max(0,i)),l=o.slice(Math.max(0,a));t={selectionStart:i,selectionEnd:a,value:o,beforeTxt:s,afterTxt:l}}function r(){if(e.value==null||t==null)return;const{value:i}=e.value,{beforeTxt:a,afterTxt:o,selectionStart:s}=t;if(a==null||o==null||s==null)return;let l=i.length;if(i.endsWith(o))l=i.length-o.length;else if(i.startsWith(a))l=a.length;else{const c=a[s-1],h=i.indexOf(c,s-1);h!==-1&&(l=h+1)}e.value.setSelectionRange(l,l)}return[n,r]}const dye=(e,t,n)=>xf(e.subTree).filter(a=>{var o;return Oi(a)&&((o=a.type)==null?void 0:o.name)===t&&!!a.component}).map(a=>a.component.uid).map(a=>n[a]).filter(a=>!!a),p5=(e,t)=>{const n={},r=_i([]);return{children:r,addChild:o=>{n[o.uid]=o,r.value=dye(e,t,n)},removeChild:o=>{delete n[o],r.value=r.value.filter(s=>s.uid!==o)}}},$a=rc({type:String,values:id,required:!1}),ZK=Symbol("size"),YK=()=>{const e=un(ZK,{});return X(()=>w(e.size)||"")};function cx(e,{beforeFocus:t,afterFocus:n,beforeBlur:r,afterBlur:i}={}){const a=er(),{emit:o}=a,s=_i(),l=le(!1),c=p=>{Dn(t)&&t(p)||l.value||(l.value=!0,o("focus",p),n==null||n())},h=p=>{var v;Dn(r)&&r(p)||p.relatedTarget&&((v=s.value)!=null&&v.contains(p.relatedTarget))||(l.value=!1,o("blur",p),i==null||i())},f=()=>{var p,v;(p=s.value)!=null&&p.contains(document.activeElement)&&s.value!==document.activeElement||(v=e.value)==null||v.focus()};return At(s,p=>{p&&p.setAttribute("tabindex","-1")}),ti(s,"focus",c,!0),ti(s,"blur",h,!0),ti(s,"click",f,!0),{isFocused:l,wrapperRef:s,handleFocus:c,handleBlur:h}}function ik({afterComposition:e,emit:t}){const n=le(!1),r=s=>{t==null||t("compositionstart",s),n.value=!0},i=s=>{var l;t==null||t("compositionupdate",s);const c=(l=s.target)==null?void 0:l.value,h=c[c.length-1]||"";n.value=!rme(h)},a=s=>{t==null||t("compositionend",s),n.value&&(n.value=!1,bn(()=>e(s)))};return{isComposing:n,handleComposition:s=>{s.type==="compositionend"?a(s):i(s)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}const XK=Symbol("emptyValuesContextKey"),hye=["",void 0,null],fye=void 0,A0=Wt({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>Dn(e)?!e():!e}}),ak=(e,t)=>{const n=er()?un(XK,le({})):le({}),r=X(()=>e.emptyValues||n.value.emptyValues||hye),i=X(()=>Dn(e.valueOnClear)?e.valueOnClear():e.valueOnClear!==void 0?e.valueOnClear:Dn(n.value.valueOnClear)?n.value.valueOnClear():n.value.valueOnClear!==void 0?n.value.valueOnClear:t!==void 0?t:fye),a=o=>r.value.includes(o);return r.value.includes(i.value),{emptyValues:r,valueOnClear:i,isEmptyValue:a}},pye=Wt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),yo=e=>Nu(pye,e),JK=Symbol(),TT=le();function ok(e,t=void 0){const n=er()?un(JK,TT):TT;return e?X(()=>{var r,i;return(i=(r=n.value)==null?void 0:r[e])!=null?i:t}):n}function sk(e,t){const n=ok(),r=Rt(e,X(()=>{var s;return((s=n.value)==null?void 0:s.namespace)||y1})),i=Sr(X(()=>{var s;return(s=n.value)==null?void 0:s.locale})),a=k0(X(()=>{var s;return((s=n.value)==null?void 0:s.zIndex)||OK})),o=X(()=>{var s;return w(t)||((s=n.value)==null?void 0:s.size)||""});return v5(X(()=>w(n)||{})),{ns:r,locale:i,zIndex:a,size:o}}const v5=(e,t,n=!1)=>{var r;const i=!!er(),a=i?ok():void 0,o=(r=t==null?void 0:t.provide)!=null?r:i?pr:void 0;if(!o)return;const s=X(()=>{const l=w(e);return a!=null&&a.value?vye(a.value,l):l});return o(JK,s),o(yK,X(()=>s.value.locale)),o(_K,X(()=>s.value.namespace)),o(zK,X(()=>s.value.zIndex)),o(ZK,{size:X(()=>s.value.size||"")}),o(XK,X(()=>({emptyValues:s.value.emptyValues,valueOnClear:s.value.valueOnClear}))),(n||!TT.value)&&(TT.value=s.value),s},vye=(e,t)=>{const n=[...new Set([...Wy(e),...Wy(t)])],r={};for(const i of n)r[i]=t[i]!==void 0?t[i]:e[i];return r},mye=Wt({a11y:{type:Boolean,default:!0},locale:{type:Qe(Object)},size:$a,button:{type:Qe(Object)},experimentalFeatures:{type:Qe(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Qe(Object)},zIndex:Number,namespace:{type:String,default:"el"},...A0}),nD={},gye=Be({name:"ElConfigProvider",props:mye,setup(e,{slots:t}){At(()=>e.message,r=>{Object.assign(nD,r??{})},{immediate:!0,deep:!0});const n=v5(e);return()=>st(t,"default",{config:n==null?void 0:n.value})}}),yye=Wn(gye),_ye="2.8.1",bye=(e=[])=>({version:_ye,install:(n,r)=>{n[N8]||(n[N8]=!0,e.forEach(i=>n.use(i)),r&&v5(r,n,!0))}}),wye=Wt({zIndex:{type:Qe([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),xye={scroll:({scrollTop:e,fixed:t})=>zn(e)&&pa(t),[ki]:e=>pa(e)};var Kt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const QK="ElAffix",Sye=Be({name:QK}),Cye=Be({...Sye,props:wye,emits:xye,setup(e,{expose:t,emit:n}){const r=e,i=Rt("affix"),a=_i(),o=_i(),s=_i(),{height:l}=sue(),{height:c,width:h,top:f,bottom:p,update:v}=QN(o,{windowScroll:!1}),_=QN(a),b=le(!1),C=le(0),T=le(0),E=X(()=>({height:b.value?`${c.value}px`:"",width:b.value?`${h.value}px`:""})),A=X(()=>{if(!b.value)return{};const B=r.offset?oa(r.offset):0;return{height:`${c.value}px`,width:`${h.value}px`,top:r.position==="top"?B:"",bottom:r.position==="bottom"?B:"",transform:T.value?`translateY(${T.value}px)`:"",zIndex:r.zIndex}}),I=()=>{if(!s.value)return;C.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0;const{position:B,target:N,offset:H}=r,j=H+c.value;if(B==="top")if(N){const W=_.bottom.value-j;b.value=H>f.value&&_.bottom.value>0,T.value=W<0?W:0}else b.value=H>f.value;else if(N){const W=l.value-_.top.value-j;b.value=l.value-H<p.value&&l.value>_.top.value,T.value=W<0?-W:0}else b.value=l.value-H<p.value},O=()=>{v(),n("scroll",{scrollTop:C.value,fixed:b.value})};return At(b,B=>n("change",B)),Un(()=>{var B;r.target?(a.value=(B=document.querySelector(r.target))!=null?B:void 0,a.value||Na(QK,`Target does not exist: ${r.target}`)):a.value=document.documentElement,s.value=$3(o.value,!0),v()}),ti(s,"scroll",O),ko(I),t({update:I,updateRoot:v}),(B,N)=>(te(),me("div",{ref_key:"root",ref:o,class:se(w(i).b()),style:_n(w(E))},[V("div",{class:se({[w(i).m("fixed")]:b.value}),style:_n(w(A))},[st(B.$slots,"default")],6)],6))}});var Tye=Kt(Cye,[["__file","affix.vue"]]);const Mye=Wn(Tye),kye=Wt({size:{type:Qe([Number,String])},color:{type:String}}),Eye=Be({name:"ElIcon",inheritAttrs:!1}),Aye=Be({...Eye,props:kye,setup(e){const t=e,n=Rt("icon"),r=X(()=>{const{size:i,color:a}=t;return!i&&!a?{}:{fontSize:aa(i)?void 0:oa(i),"--color":a}});return(i,a)=>(te(),me("i",sr({class:w(n).b(),style:w(r)},i.$attrs),[st(i.$slots,"default")],16))}});var Pye=Kt(Aye,[["__file","icon.vue"]]);const yn=Wn(Pye),Iye=["light","dark"],Lye=Wt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Wy(Bf),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Iye,default:"light"}}),Dye={close:e=>e instanceof MouseEvent},Rye=Be({name:"ElAlert"}),Oye=Be({...Rye,props:Lye,emits:Dye,setup(e,{emit:t}){const n=e,{Close:r}=K3,i=qa(),a=Rt("alert"),o=le(!0),s=X(()=>Bf[n.type]),l=X(()=>[a.e("icon"),{[a.is("big")]:!!n.description||!!i.default}]),c=X(()=>({"with-description":n.description||i.default})),h=f=>{o.value=!1,t("close",f)};return(f,p)=>(te(),ft(Ka,{name:w(a).b("fade"),persisted:""},{default:ge(()=>[In(V("div",{class:se([w(a).b(),w(a).m(f.type),w(a).is("center",f.center),w(a).is(f.effect)]),role:"alert"},[f.showIcon&&w(s)?(te(),ft(w(yn),{key:0,class:se(w(l))},{default:ge(()=>[(te(),ft(ir(w(s))))]),_:1},8,["class"])):Ge("v-if",!0),V("div",{class:se(w(a).e("content"))},[f.title||f.$slots.title?(te(),me("span",{key:0,class:se([w(a).e("title"),w(c)])},[st(f.$slots,"title",{},()=>[$t(Xe(f.title),1)])],2)):Ge("v-if",!0),f.$slots.default||f.description?(te(),me("p",{key:1,class:se(w(a).e("description"))},[st(f.$slots,"default",{},()=>[$t(Xe(f.description),1)])],2)):Ge("v-if",!0),f.closable?(te(),me(hn,{key:2},[f.closeText?(te(),me("div",{key:0,class:se([w(a).e("close-btn"),w(a).is("customed")]),onClick:h},Xe(f.closeText),3)):(te(),ft(w(yn),{key:1,class:se(w(a).e("close-btn")),onClick:h},{default:ge(()=>[de(w(r))]),_:1},8,["class"]))],64)):Ge("v-if",!0)],2)],2),[[Lr,o.value]])]),_:3},8,["name"]))}});var zye=Kt(Oye,[["__file","alert.vue"]]);const Bye=Wn(zye),wm=Symbol("formContextKey"),Qc=Symbol("formItemContextKey"),Ea=(e,t={})=>{const n=le(void 0),r=t.prop?n:wK("size"),i=t.global?n:YK(),a=t.form?{size:void 0}:un(wm,void 0),o=t.formItem?{size:void 0}:un(Qc,void 0);return X(()=>r.value||w(e)||(o==null?void 0:o.size)||(a==null?void 0:a.size)||i.value||"")},Ts=e=>{const t=wK("disabled"),n=un(wm,void 0);return X(()=>t.value||w(e)||(n==null?void 0:n.disabled)||!1)},es=()=>{const e=un(wm,void 0),t=un(Qc,void 0);return{form:e,formItem:t}},ac=(e,{formItemContext:t,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=le(!1)),r||(r=le(!1));const i=le();let a;const o=X(()=>{var s;return!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&((s=t.inputIds)==null?void 0:s.length)<=1)});return Un(()=>{a=At([Gr(e,"id"),n],([s,l])=>{const c=s??(l?void 0:mo().value);c!==i.value&&(t!=null&&t.removeInputId&&(i.value&&t.removeInputId(i.value),!(r!=null&&r.value)&&!l&&c&&t.addInputId(c)),i.value=c)},{immediate:!0})}),Wf(()=>{a&&a(),t!=null&&t.removeInputId&&i.value&&t.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}},Fye=Wt({size:{type:String,values:id},disabled:Boolean}),Nye=Wt({...Fye,model:Object,rules:{type:Qe(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),$ye={validate:(e,t,n)=>(sn(e)||Ln(e))&&pa(t)&&Ln(n)};function Vye(){const e=le([]),t=X(()=>{if(!e.value.length)return"0";const a=Math.max(...e.value);return a?`${a}px`:""});function n(a){const o=e.value.indexOf(a);return o===-1&&t.value,o}function r(a,o){if(a&&o){const s=n(o);e.value.splice(s,1,a)}else a&&e.value.push(a)}function i(a){const o=n(a);o>-1&&e.value.splice(o,1)}return{autoLabelWidth:t,registerLabelWidth:r,deregisterLabelWidth:i}}const i2=(e,t)=>{const n=Wo(t);return n.length>0?e.filter(r=>r.prop&&n.includes(r.prop)):e},Hye="ElForm",jye=Be({name:Hye}),Uye=Be({...jye,props:Nye,emits:$ye,setup(e,{expose:t,emit:n}){const r=e,i=[],a=Ea(),o=Rt("form"),s=X(()=>{const{labelPosition:A,inline:I}=r;return[o.b(),o.m(a.value||"default"),{[o.m(`label-${A}`)]:A,[o.m("inline")]:I}]}),l=A=>i.find(I=>I.prop===A),c=A=>{i.push(A)},h=A=>{A.prop&&i.splice(i.indexOf(A),1)},f=(A=[])=>{r.model&&i2(i,A).forEach(I=>I.resetField())},p=(A=[])=>{i2(i,A).forEach(I=>I.clearValidate())},v=X(()=>!!r.model),_=A=>{if(i.length===0)return[];const I=i2(i,A);return I.length?I:[]},b=async A=>T(void 0,A),C=async(A=[])=>{if(!v.value)return!1;const I=_(A);if(I.length===0)return!0;let O={};for(const B of I)try{await B.validate("")}catch(N){O={...O,...N}}return Object.keys(O).length===0?!0:Promise.reject(O)},T=async(A=[],I)=>{const O=!Dn(I);try{const B=await C(A);return B===!0&&await(I==null?void 0:I(B)),B}catch(B){if(B instanceof Error)throw B;const N=B;return r.scrollToError&&E(Object.keys(N)[0]),await(I==null?void 0:I(!1,N)),O&&Promise.reject(N)}},E=A=>{var I;const O=i2(i,A)[0];O&&((I=O.$el)==null||I.scrollIntoView(r.scrollIntoViewOptions))};return At(()=>r.rules,()=>{r.validateOnRuleChange&&b().catch(A=>void 0)},{deep:!0}),pr(wm,Ar({...ao(r),emit:n,resetFields:f,clearValidate:p,validateField:T,getField:l,addField:c,removeField:h,...Vye()})),t({validate:b,validateField:T,resetFields:f,clearValidate:p,scrollToField:E,fields:i}),(A,I)=>(te(),me("form",{class:se(w(s))},[st(A.$slots,"default")],2))}});var Wye=Kt(Uye,[["__file","form.vue"]]);function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(this,arguments)}function Gye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lw(e,t)}function rD(e){return rD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rD(e)}function lw(e,t){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lw(e,t)}function Kye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function TC(e,t,n){return Kye()?TC=Reflect.construct.bind():TC=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),c=new l;return o&&lw(c,o.prototype),c},TC.apply(null,arguments)}function qye(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function iD(e){var t=typeof Map=="function"?new Map:void 0;return iD=function(r){if(r===null||!qye(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return TC(r,arguments,rD(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),lw(i,r)},iD(e)}var Zye=/%[sdj%]/g,Yye=function(){};function aD(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function pl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,a=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var o=e.replace(Zye,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return s}});return o}return e}function Xye(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function oo(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Xye(t)&&typeof e=="string"&&!e)}function Jye(e,t,n){var r=[],i=0,a=e.length;function o(s){r.push.apply(r,s||[]),i++,i===a&&n(r)}e.forEach(function(s){t(s,o)})}function s6(e,t,n){var r=0,i=e.length;function a(o){if(o&&o.length){n(o);return}var s=r;r=r+1,s<i?t(e[s],a):n([])}a([])}function Qye(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var l6=function(e){Gye(t,e);function t(n,r){var i;return i=e.call(this,"Async Validation Error")||this,i.errors=n,i.fields=r,i}return t}(iD(Error));function e0e(e,t,n,r,i){if(t.first){var a=new Promise(function(p,v){var _=function(T){return r(T),T.length?v(new l6(T,aD(T))):p(i)},b=Qye(e);s6(b,n,_)});return a.catch(function(p){return p}),a}var o=t.firstFields===!0?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,c=0,h=[],f=new Promise(function(p,v){var _=function(C){if(h.push.apply(h,C),c++,c===l)return r(h),h.length?v(new l6(h,aD(h))):p(i)};s.length||(r(h),p(i)),s.forEach(function(b){var C=e[b];o.indexOf(b)!==-1?s6(C,n,_):Jye(C,n,_)})});return f.catch(function(p){return p}),f}function t0e(e){return!!(e&&e.message!==void 0)}function n0e(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function u6(e,t){return function(n){var r;return e.fullFields?r=n0e(t,e.fullFields):r=t[n.field||e.fullField],t0e(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function c6(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];typeof r=="object"&&typeof e[n]=="object"?e[n]=gv({},e[n],r):e[n]=r}}return e}var eq=function(t,n,r,i,a,o){t.required&&(!r.hasOwnProperty(t.field)||oo(n,o||t.type))&&i.push(pl(a.messages.required,t.fullField))},r0e=function(t,n,r,i,a){(/^\s+$/.test(n)||n==="")&&i.push(pl(a.messages.whitespace,t.fullField))},a2,i0e=function(){if(a2)return a2;var e="[a-fA-F\\d:]",t=function(I){return I&&I.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),o=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),l=function(I){return I&&I.exact?a:new RegExp("(?:"+t(I)+n+t(I)+")|(?:"+t(I)+i+t(I)+")","g")};l.v4=function(A){return A&&A.exact?o:new RegExp(""+t(A)+n+t(A),"g")},l.v6=function(A){return A&&A.exact?s:new RegExp(""+t(A)+i+t(A),"g")};var c="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,p=l.v6().source,v="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",_="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",b="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",C="(?::\\d{2,5})?",T='(?:[/?#][^\\s"]*)?',E="(?:"+c+"|www\\.)"+h+"(?:localhost|"+f+"|"+p+"|"+v+_+b+")"+C+T;return a2=new RegExp("(?:^"+E+"$)","i"),a2},d6={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Yb={integer:function(t){return Yb.number(t)&&parseInt(t,10)===t},float:function(t){return Yb.number(t)&&!Yb.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Yb.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(d6.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(i0e())},hex:function(t){return typeof t=="string"&&!!t.match(d6.hex)}},a0e=function(t,n,r,i,a){if(t.required&&n===void 0){eq(t,n,r,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?Yb[s](n)||i.push(pl(a.messages.types[s],t.fullField,t.type)):s&&typeof n!==t.type&&i.push(pl(a.messages.types[s],t.fullField,t.type))},o0e=function(t,n,r,i,a){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=n,f=null,p=typeof n=="number",v=typeof n=="string",_=Array.isArray(n);if(p?f="number":v?f="string":_&&(f="array"),!f)return!1;_&&(h=n.length),v&&(h=n.replace(c,"_").length),o?h!==t.len&&i.push(pl(a.messages[f].len,t.fullField,t.len)):s&&!l&&h<t.min?i.push(pl(a.messages[f].min,t.fullField,t.min)):l&&!s&&h>t.max?i.push(pl(a.messages[f].max,t.fullField,t.max)):s&&l&&(h<t.min||h>t.max)&&i.push(pl(a.messages[f].range,t.fullField,t.min,t.max))},Tg="enum",s0e=function(t,n,r,i,a){t[Tg]=Array.isArray(t[Tg])?t[Tg]:[],t[Tg].indexOf(n)===-1&&i.push(pl(a.messages[Tg],t.fullField,t[Tg].join(", ")))},l0e=function(t,n,r,i,a){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||i.push(pl(a.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(n)||i.push(pl(a.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},di={required:eq,whitespace:r0e,type:a0e,range:o0e,enum:s0e,pattern:l0e},u0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n,"string")&&!t.required)return r();di.required(t,n,i,o,a,"string"),oo(n,"string")||(di.type(t,n,i,o,a),di.range(t,n,i,o,a),di.pattern(t,n,i,o,a),t.whitespace===!0&&di.whitespace(t,n,i,o,a))}r(o)},c0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&di.type(t,n,i,o,a)}r(o)},d0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(n===""&&(n=void 0),oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&(di.type(t,n,i,o,a),di.range(t,n,i,o,a))}r(o)},h0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&di.type(t,n,i,o,a)}r(o)},f0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),oo(n)||di.type(t,n,i,o,a)}r(o)},p0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&(di.type(t,n,i,o,a),di.range(t,n,i,o,a))}r(o)},v0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&(di.type(t,n,i,o,a),di.range(t,n,i,o,a))}r(o)},m0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(n==null&&!t.required)return r();di.required(t,n,i,o,a,"array"),n!=null&&(di.type(t,n,i,o,a),di.range(t,n,i,o,a))}r(o)},g0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&di.type(t,n,i,o,a)}r(o)},y0e="enum",_0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a),n!==void 0&&di[y0e](t,n,i,o,a)}r(o)},b0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n,"string")&&!t.required)return r();di.required(t,n,i,o,a),oo(n,"string")||di.pattern(t,n,i,o,a)}r(o)},w0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n,"date")&&!t.required)return r();if(di.required(t,n,i,o,a),!oo(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),di.type(t,l,i,o,a),l&&di.range(t,l.getTime(),i,o,a)}}r(o)},x0e=function(t,n,r,i,a){var o=[],s=Array.isArray(n)?"array":typeof n;di.required(t,n,i,o,a,s),r(o)},QA=function(t,n,r,i,a){var o=t.type,s=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(oo(n,o)&&!t.required)return r();di.required(t,n,i,s,a,o),oo(n,o)||di.type(t,n,i,s,a)}r(s)},S0e=function(t,n,r,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(oo(n)&&!t.required)return r();di.required(t,n,i,o,a)}r(o)},w1={string:u0e,method:c0e,number:d0e,boolean:h0e,regexp:f0e,integer:p0e,float:v0e,array:m0e,object:g0e,enum:_0e,pattern:b0e,date:w0e,url:QA,hex:QA,email:QA,required:x0e,any:S0e};function oD(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var sD=oD(),dx=function(){function e(n){this.rules=null,this._messages=sD,this.define(n)}var t=e.prototype;return t.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var o=r[a];i.rules[a]=Array.isArray(o)?o:[o]})},t.messages=function(r){return r&&(this._messages=c6(oD(),r)),this._messages},t.validate=function(r,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=r,l=i,c=a;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,s),Promise.resolve(s);function h(b){var C=[],T={};function E(I){if(Array.isArray(I)){var O;C=(O=C).concat.apply(O,I)}else C.push(I)}for(var A=0;A<b.length;A++)E(b[A]);C.length?(T=aD(C),c(C,T)):c(null,s)}if(l.messages){var f=this.messages();f===sD&&(f=oD()),c6(f,l.messages),l.messages=f}else l.messages=this.messages();var p={},v=l.keys||Object.keys(this.rules);v.forEach(function(b){var C=o.rules[b],T=s[b];C.forEach(function(E){var A=E;typeof A.transform=="function"&&(s===r&&(s=gv({},s)),T=s[b]=A.transform(T)),typeof A=="function"?A={validator:A}:A=gv({},A),A.validator=o.getValidationMethod(A),A.validator&&(A.field=b,A.fullField=A.fullField||b,A.type=o.getType(A),p[b]=p[b]||[],p[b].push({rule:A,value:T,source:s,field:b}))})});var _={};return e0e(p,l,function(b,C){var T=b.rule,E=(T.type==="object"||T.type==="array")&&(typeof T.fields=="object"||typeof T.defaultField=="object");E=E&&(T.required||!T.required&&b.value),T.field=b.field;function A(B,N){return gv({},N,{fullField:T.fullField+"."+B,fullFields:T.fullFields?[].concat(T.fullFields,[B]):[B]})}function I(B){B===void 0&&(B=[]);var N=Array.isArray(B)?B:[B];!l.suppressWarning&&N.length&&e.warning("async-validator:",N),N.length&&T.message!==void 0&&(N=[].concat(T.message));var H=N.map(u6(T,s));if(l.first&&H.length)return _[T.field]=1,C(H);if(!E)C(H);else{if(T.required&&!b.value)return T.message!==void 0?H=[].concat(T.message).map(u6(T,s)):l.error&&(H=[l.error(T,pl(l.messages.required,T.field))]),C(H);var j={};T.defaultField&&Object.keys(b.value).map(function(Y){j[Y]=T.defaultField}),j=gv({},j,b.rule.fields);var W={};Object.keys(j).forEach(function(Y){var ie=j[Y],ue=Array.isArray(ie)?ie:[ie];W[Y]=ue.map(A.bind(null,Y))});var U=new e(W);U.messages(l.messages),b.rule.options&&(b.rule.options.messages=l.messages,b.rule.options.error=l.error),U.validate(b.value,b.rule.options||l,function(Y){var ie=[];H&&H.length&&ie.push.apply(ie,H),Y&&Y.length&&ie.push.apply(ie,Y),C(ie.length?ie:null)})}}var O;if(T.asyncValidator)O=T.asyncValidator(T,b.value,I,b.source,l);else if(T.validator){try{O=T.validator(T,b.value,I,b.source,l)}catch(B){console.error==null||console.error(B),l.suppressValidatorError||setTimeout(function(){throw B},0),I(B.message)}O===!0?I():O===!1?I(typeof T.message=="function"?T.message(T.fullField||T.field):T.message||(T.fullField||T.field)+" fails"):O instanceof Array?I(O):O instanceof Error&&I(O.message)}O&&O.then&&O.then(function(){return I()},function(B){return I(B)})},function(b){h(b)},s)},t.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!w1.hasOwnProperty(r.type))throw new Error(pl("Unknown rule type %s",r.type));return r.type||"string"},t.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?w1.required:w1[this.getType(r)]||void 0},e}();dx.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");w1[t]=n};dx.warning=Yye;dx.messages=sD;dx.validators=w1;const C0e=["","error","validating","success"],T0e=Wt({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Qe([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Qe([Object,Array])},error:String,validateStatus:{type:String,values:C0e},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:id}}),h6="ElLabelWrap";var M0e=Be({name:h6,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=un(wm,void 0),r=un(Qc);r||Na(h6,"usage: <el-form-item><label-wrap /></el-form-item>");const i=Rt("form"),a=le(),o=le(0),s=()=>{var h;if((h=a.value)!=null&&h.firstElementChild){const f=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},l=(h="update")=>{bn(()=>{t.default&&e.isAutoWidth&&(h==="update"?o.value=s():h==="remove"&&(n==null||n.deregisterLabelWidth(o.value)))})},c=()=>l("update");return Un(()=>{c()}),ui(()=>{l("remove")}),nh(()=>c()),At(o,(h,f)=>{e.updateAll&&(n==null||n.registerLabelWidth(h,f))}),Hi(X(()=>{var h,f;return(f=(h=a.value)==null?void 0:h.firstElementChild)!=null?f:null}),c),()=>{var h,f;if(!t)return null;const{isAutoWidth:p}=e;if(p){const v=n==null?void 0:n.autoLabelWidth,_=r==null?void 0:r.hasLabel,b={};if(_&&v&&v!=="auto"){const C=Math.max(0,Number.parseInt(v,10)-o.value),E=(r.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";C&&(b[E]=`${C}px`)}return de("div",{ref:a,class:[i.be("item","label-wrap")],style:b},[(h=t.default)==null?void 0:h.call(t)])}else return de(hn,{ref:a},[(f=t.default)==null?void 0:f.call(t)])}}});const k0e=Be({name:"ElFormItem"}),E0e=Be({...k0e,props:T0e,setup(e,{expose:t}){const n=e,r=qa(),i=un(wm,void 0),a=un(Qc,void 0),o=Ea(void 0,{formItem:!1}),s=Rt("form-item"),l=mo().value,c=le([]),h=le(""),f=jle(h,100),p=le(""),v=le();let _,b=!1;const C=X(()=>n.labelPosition||(i==null?void 0:i.labelPosition)),T=X(()=>{if(C.value==="top")return{};const Je=oa(n.labelWidth||(i==null?void 0:i.labelWidth)||"");return Je?{width:Je}:{}}),E=X(()=>{if(C.value==="top"||i!=null&&i.inline)return{};if(!n.label&&!n.labelWidth&&W)return{};const Je=oa(n.labelWidth||(i==null?void 0:i.labelWidth)||"");return!n.label&&!r.label?{marginLeft:Je}:{}}),A=X(()=>[s.b(),s.m(o.value),s.is("error",h.value==="error"),s.is("validating",h.value==="validating"),s.is("success",h.value==="success"),s.is("required",J.value||n.required),s.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:i==null?void 0:i.statusIcon,[s.m(`label-${C.value}`)]:C.value}]),I=X(()=>pa(n.inlineMessage)?n.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),O=X(()=>[s.e("error"),{[s.em("error","inline")]:I.value}]),B=X(()=>n.prop?Ln(n.prop)?n.prop:n.prop.join("."):""),N=X(()=>!!(n.label||r.label)),H=X(()=>n.for||(c.value.length===1?c.value[0]:void 0)),j=X(()=>!H.value&&N.value),W=!!a,U=X(()=>{const Je=i==null?void 0:i.model;if(!(!Je||!n.prop))return SC(Je,n.prop).value}),Y=X(()=>{const{required:Je}=n,Ue=[];n.rules&&Ue.push(...Wo(n.rules));const yt=i==null?void 0:i.rules;if(yt&&n.prop){const Ne=SC(yt,n.prop).value;Ne&&Ue.push(...Wo(Ne))}if(Je!==void 0){const Ne=Ue.map((dt,Le)=>[dt,Le]).filter(([dt])=>Object.keys(dt).includes("required"));if(Ne.length>0)for(const[dt,Le]of Ne)dt.required!==Je&&(Ue[Le]={...dt,required:Je});else Ue.push({required:Je})}return Ue}),ie=X(()=>Y.value.length>0),ue=Je=>Y.value.filter(yt=>!yt.trigger||!Je?!0:Array.isArray(yt.trigger)?yt.trigger.includes(Je):yt.trigger===Je).map(({trigger:yt,...Ne})=>Ne),J=X(()=>Y.value.some(Je=>Je.required)),q=X(()=>{var Je;return f.value==="error"&&n.showMessage&&((Je=i==null?void 0:i.showMessage)!=null?Je:!0)}),ce=X(()=>`${n.label||""}${(i==null?void 0:i.labelSuffix)||""}`),re=Je=>{h.value=Je},ee=Je=>{var Ue,yt;const{errors:Ne,fields:dt}=Je;(!Ne||!dt)&&console.error(Je),re("error"),p.value=Ne?(yt=(Ue=Ne==null?void 0:Ne[0])==null?void 0:Ue.message)!=null?yt:`${n.prop} is required`:"",i==null||i.emit("validate",n.prop,!1,p.value)},oe=()=>{re("success"),i==null||i.emit("validate",n.prop,!0,"")},be=async Je=>{const Ue=B.value;return new dx({[Ue]:Je}).validate({[Ue]:U.value},{firstFields:!0}).then(()=>(oe(),!0)).catch(Ne=>(ee(Ne),Promise.reject(Ne)))},we=async(Je,Ue)=>{if(b||!n.prop)return!1;const yt=Dn(Ue);if(!ie.value)return Ue==null||Ue(!1),!1;const Ne=ue(Je);return Ne.length===0?(Ue==null||Ue(!0),!0):(re("validating"),be(Ne).then(()=>(Ue==null||Ue(!0),!0)).catch(dt=>{const{fields:Le}=dt;return Ue==null||Ue(!1,Le),yt?!1:Promise.reject(Le)}))},pe=()=>{re(""),p.value="",b=!1},Ce=async()=>{const Je=i==null?void 0:i.model;if(!Je||!n.prop)return;const Ue=SC(Je,n.prop);b=!0,Ue.value=I8(_),await bn(),pe(),b=!1},Ve=Je=>{c.value.includes(Je)||c.value.push(Je)},et=Je=>{c.value=c.value.filter(Ue=>Ue!==Je)};At(()=>n.error,Je=>{p.value=Je||"",re(Je?"error":"")},{immediate:!0}),At(()=>n.validateStatus,Je=>re(Je||""));const Ee=Ar({...ao(n),$el:v,size:o,validateState:h,labelId:l,inputIds:c,isGroup:j,hasLabel:N,fieldValue:U,addInputId:Ve,removeInputId:et,resetField:Ce,clearValidate:pe,validate:we});return pr(Qc,Ee),Un(()=>{n.prop&&(i==null||i.addField(Ee),_=I8(U.value))}),ui(()=>{i==null||i.removeField(Ee)}),t({size:o,validateMessage:p,validateState:h,validate:we,clearValidate:pe,resetField:Ce}),(Je,Ue)=>{var yt;return te(),me("div",{ref_key:"formItemRef",ref:v,class:se(w(A)),role:w(j)?"group":void 0,"aria-labelledby":w(j)?w(l):void 0},[de(w(M0e),{"is-auto-width":w(T).width==="auto","update-all":((yt=w(i))==null?void 0:yt.labelWidth)==="auto"},{default:ge(()=>[w(N)?(te(),ft(ir(w(H)?"label":"div"),{key:0,id:w(l),for:w(H),class:se(w(s).e("label")),style:_n(w(T))},{default:ge(()=>[st(Je.$slots,"label",{label:w(ce)},()=>[$t(Xe(w(ce)),1)])]),_:3},8,["id","for","class","style"])):Ge("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),V("div",{class:se(w(s).e("content")),style:_n(w(E))},[st(Je.$slots,"default"),de(iG,{name:`${w(s).namespace.value}-zoom-in-top`},{default:ge(()=>[w(q)?st(Je.$slots,"error",{key:0,error:p.value},()=>[V("div",{class:se(w(O))},Xe(p.value),3)]):Ge("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var tq=Kt(E0e,[["__file","form-item.vue"]]);const A0e=Wn(Wye,{FormItem:tq}),P0e=Ki(tq);let Cu;const I0e=`
  height:0 !important;
  visibility:hidden !important;
  ${x3()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,L0e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function D0e(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),i=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:L0e.map(o=>`${o}:${t.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:n}}function f6(e,t=1,n){var r;Cu||(Cu=document.createElement("textarea"),document.body.appendChild(Cu));const{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=D0e(e);Cu.setAttribute("style",`${s};${I0e}`),Cu.value=e.value||e.placeholder||"";let l=Cu.scrollHeight;const c={};o==="border-box"?l=l+a:o==="content-box"&&(l=l-i),Cu.value="";const h=Cu.scrollHeight-i;if(zn(t)){let f=h*t;o==="border-box"&&(f=f+i+a),l=Math.max(f,l),c.minHeight=`${f}px`}if(zn(n)){let f=h*n;o==="border-box"&&(f=f+i+a),l=Math.min(f,l)}return c.height=`${l}px`,(r=Cu.parentNode)==null||r.removeChild(Cu),Cu=void 0,c}const m5=Wt({id:{type:String,default:void 0},size:$a,disabled:Boolean,modelValue:{type:Qe([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Qe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:si},prefixIcon:{type:si},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Qe([Object,Array,String]),default:()=>ji({})},autofocus:Boolean,rows:{type:Number,default:2},...yo(["ariaLabel"])}),R0e={[tr]:e=>Ln(e),input:e=>Ln(e),change:e=>Ln(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},O0e=Be({name:"ElInput",inheritAttrs:!1}),z0e=Be({...O0e,props:m5,emits:R0e,setup(e,{expose:t,emit:n}){const r=e,i=gm(),a=qa(),o=X(()=>{const kt={};return r.containerRole==="combobox"&&(kt["aria-haspopup"]=i["aria-haspopup"],kt["aria-owns"]=i["aria-owns"],kt["aria-expanded"]=i["aria-expanded"]),kt}),s=X(()=>[r.type==="textarea"?C.b():b.b(),b.m(v.value),b.is("disabled",_.value),b.is("exceed",pe.value),{[b.b("group")]:a.prepend||a.append,[b.m("prefix")]:a.prefix||r.prefixIcon,[b.m("suffix")]:a.suffix||r.suffixIcon||r.clearable||r.showPassword,[b.bm("suffix","password-clear")]:ee.value&&oe.value,[b.b("hidden")]:r.type==="hidden"},i.class]),l=X(()=>[b.e("wrapper"),b.is("focus",j.value)]),c=Z3({excludeKeys:X(()=>Object.keys(o.value))}),{form:h,formItem:f}=es(),{inputId:p}=ac(r,{formItemContext:f}),v=Ea(),_=Ts(),b=Rt("input"),C=Rt("textarea"),T=_i(),E=_i(),A=le(!1),I=le(!1),O=le(),B=_i(r.inputStyle),N=X(()=>T.value||E.value),{wrapperRef:H,isFocused:j,handleFocus:W,handleBlur:U}=cx(N,{afterBlur(){var kt;r.validateEvent&&((kt=f==null?void 0:f.validate)==null||kt.call(f,"blur").catch(fn=>void 0))}}),Y=X(()=>{var kt;return(kt=h==null?void 0:h.statusIcon)!=null?kt:!1}),ie=X(()=>(f==null?void 0:f.validateState)||""),ue=X(()=>ie.value&&q3[ie.value]),J=X(()=>I.value?Wve:vve),q=X(()=>[i.style]),ce=X(()=>[r.inputStyle,B.value,{resize:r.resize}]),re=X(()=>ro(r.modelValue)?"":String(r.modelValue)),ee=X(()=>r.clearable&&!_.value&&!r.readonly&&!!re.value&&(j.value||A.value)),oe=X(()=>r.showPassword&&!_.value&&!r.readonly&&!!re.value&&(!!re.value||j.value)),be=X(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!_.value&&!r.readonly&&!r.showPassword),we=X(()=>re.value.length),pe=X(()=>!!be.value&&we.value>Number(r.maxlength)),Ce=X(()=>!!a.suffix||!!r.suffixIcon||ee.value||r.showPassword||be.value||!!ie.value&&Y.value),[Ve,et]=cye(T);Hi(E,kt=>{if(Ue(),!be.value||r.resize!=="both")return;const fn=kt[0],{width:Rn}=fn.contentRect;O.value={right:`calc(100% - ${Rn+15+6}px)`}});const Ee=()=>{const{type:kt,autosize:fn}=r;if(!(!xr||kt!=="textarea"||!E.value))if(fn){const Rn=nr(fn)?fn.minRows:void 0,On=nr(fn)?fn.maxRows:void 0,mt=f6(E.value,Rn,On);B.value={overflowY:"hidden",...mt},bn(()=>{E.value.offsetHeight,B.value=mt})}else B.value={minHeight:f6(E.value).minHeight}},Ue=(kt=>{let fn=!1;return()=>{var Rn;if(fn||!r.autosize)return;((Rn=E.value)==null?void 0:Rn.offsetParent)===null||(kt(),fn=!0)}})(Ee),yt=()=>{const kt=N.value,fn=r.formatter?r.formatter(re.value):re.value;!kt||kt.value===fn||(kt.value=fn)},Ne=async kt=>{Ve();let{value:fn}=kt.target;if(r.formatter&&(fn=r.parser?r.parser(fn):fn),!Le.value){if(fn===re.value){yt();return}n(tr,fn),n("input",fn),await bn(),yt(),et()}},dt=kt=>{n("change",kt.target.value)},{isComposing:Le,handleCompositionStart:ze,handleCompositionUpdate:ct,handleCompositionEnd:Lt}=ik({emit:n,afterComposition:Ne}),lt=()=>{I.value=!I.value,Ct()},Ct=async()=>{var kt;await bn(),(kt=N.value)==null||kt.focus()},_t=()=>{var kt;return(kt=N.value)==null?void 0:kt.blur()},It=kt=>{A.value=!1,n("mouseleave",kt)},Bt=kt=>{A.value=!0,n("mouseenter",kt)},Ft=kt=>{n("keydown",kt)},cn=()=>{var kt;(kt=N.value)==null||kt.select()},Ot=()=>{n(tr,""),n("change",""),n("clear"),n("input","")};return At(()=>r.modelValue,()=>{var kt;bn(()=>Ee()),r.validateEvent&&((kt=f==null?void 0:f.validate)==null||kt.call(f,"change").catch(fn=>void 0))}),At(re,()=>yt()),At(()=>r.type,async()=>{await bn(),yt(),Ee()}),Un(()=>{!r.formatter&&r.parser,yt(),bn(Ee)}),t({input:T,textarea:E,ref:N,textareaStyle:ce,autosize:Gr(r,"autosize"),isComposing:Le,focus:Ct,blur:_t,select:cn,clear:Ot,resizeTextarea:Ee}),(kt,fn)=>(te(),me("div",sr(w(o),{class:[w(s),{[w(b).bm("group","append")]:kt.$slots.append,[w(b).bm("group","prepend")]:kt.$slots.prepend}],style:w(q),role:kt.containerRole,onMouseenter:Bt,onMouseleave:It}),[Ge(" input "),kt.type!=="textarea"?(te(),me(hn,{key:0},[Ge(" prepend slot "),kt.$slots.prepend?(te(),me("div",{key:0,class:se(w(b).be("group","prepend"))},[st(kt.$slots,"prepend")],2)):Ge("v-if",!0),V("div",{ref_key:"wrapperRef",ref:H,class:se(w(l))},[Ge(" prefix slot "),kt.$slots.prefix||kt.prefixIcon?(te(),me("span",{key:0,class:se(w(b).e("prefix"))},[V("span",{class:se(w(b).e("prefix-inner"))},[st(kt.$slots,"prefix"),kt.prefixIcon?(te(),ft(w(yn),{key:0,class:se(w(b).e("icon"))},{default:ge(()=>[(te(),ft(ir(kt.prefixIcon)))]),_:1},8,["class"])):Ge("v-if",!0)],2)],2)):Ge("v-if",!0),V("input",sr({id:w(p),ref_key:"input",ref:T,class:w(b).e("inner")},w(c),{minlength:kt.minlength,maxlength:kt.maxlength,type:kt.showPassword?I.value?"text":"password":kt.type,disabled:w(_),readonly:kt.readonly,autocomplete:kt.autocomplete,tabindex:kt.tabindex,"aria-label":kt.ariaLabel,placeholder:kt.placeholder,style:kt.inputStyle,form:kt.form,autofocus:kt.autofocus,onCompositionstart:w(ze),onCompositionupdate:w(ct),onCompositionend:w(Lt),onInput:Ne,onChange:dt,onKeydown:Ft}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),Ge(" suffix slot "),w(Ce)?(te(),me("span",{key:1,class:se(w(b).e("suffix"))},[V("span",{class:se(w(b).e("suffix-inner"))},[!w(ee)||!w(oe)||!w(be)?(te(),me(hn,{key:0},[st(kt.$slots,"suffix"),kt.suffixIcon?(te(),ft(w(yn),{key:0,class:se(w(b).e("icon"))},{default:ge(()=>[(te(),ft(ir(kt.suffixIcon)))]),_:1},8,["class"])):Ge("v-if",!0)],64)):Ge("v-if",!0),w(ee)?(te(),ft(w(yn),{key:1,class:se([w(b).e("icon"),w(b).e("clear")]),onMousedown:Fn(w(ai),["prevent"]),onClick:Ot},{default:ge(()=>[de(w(Kf))]),_:1},8,["class","onMousedown"])):Ge("v-if",!0),w(oe)?(te(),ft(w(yn),{key:2,class:se([w(b).e("icon"),w(b).e("password")]),onClick:lt},{default:ge(()=>[(te(),ft(ir(w(J))))]),_:1},8,["class"])):Ge("v-if",!0),w(be)?(te(),me("span",{key:3,class:se(w(b).e("count"))},[V("span",{class:se(w(b).e("count-inner"))},Xe(w(we))+" / "+Xe(kt.maxlength),3)],2)):Ge("v-if",!0),w(ie)&&w(ue)&&w(Y)?(te(),ft(w(yn),{key:4,class:se([w(b).e("icon"),w(b).e("validateIcon"),w(b).is("loading",w(ie)==="validating")])},{default:ge(()=>[(te(),ft(ir(w(ue))))]),_:1},8,["class"])):Ge("v-if",!0)],2)],2)):Ge("v-if",!0)],2),Ge(" append slot "),kt.$slots.append?(te(),me("div",{key:1,class:se(w(b).be("group","append"))},[st(kt.$slots,"append")],2)):Ge("v-if",!0)],64)):(te(),me(hn,{key:1},[Ge(" textarea "),V("textarea",sr({id:w(p),ref_key:"textarea",ref:E,class:[w(C).e("inner"),w(b).is("focus",w(j))]},w(c),{minlength:kt.minlength,maxlength:kt.maxlength,tabindex:kt.tabindex,disabled:w(_),readonly:kt.readonly,autocomplete:kt.autocomplete,style:w(ce),"aria-label":kt.ariaLabel,placeholder:kt.placeholder,form:kt.form,autofocus:kt.autofocus,rows:kt.rows,onCompositionstart:w(ze),onCompositionupdate:w(ct),onCompositionend:w(Lt),onInput:Ne,onFocus:w(W),onBlur:w(U),onChange:dt,onKeydown:Ft}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),w(be)?(te(),me("span",{key:0,style:_n(O.value),class:se(w(b).e("count"))},Xe(w(we))+" / "+Xe(kt.maxlength),7)):Ge("v-if",!0)],64))],16,["role"]))}});var B0e=Kt(z0e,[["__file","input.vue"]]);const Zo=Wn(B0e),Mg=4,nq={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},F0e=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),g5=Symbol("scrollbarContextKey"),N0e=Wt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),$0e="Thumb",V0e=Be({__name:"thumb",props:N0e,setup(e){const t=e,n=un(g5),r=Rt("scrollbar");n||Na($0e,"can not inject scrollbar context");const i=le(),a=le(),o=le({}),s=le(!1);let l=!1,c=!1,h=xr?document.onselectstart:null;const f=X(()=>nq[t.vertical?"vertical":"horizontal"]),p=X(()=>F0e({size:t.size,move:t.move,bar:f.value})),v=X(()=>i.value[f.value.offset]**2/n.wrapElement[f.value.scrollSize]/t.ratio/a.value[f.value.offset]),_=B=>{var N;if(B.stopPropagation(),B.ctrlKey||[1,2].includes(B.button))return;(N=window.getSelection())==null||N.removeAllRanges(),C(B);const H=B.currentTarget;H&&(o.value[f.value.axis]=H[f.value.offset]-(B[f.value.client]-H.getBoundingClientRect()[f.value.direction]))},b=B=>{if(!a.value||!i.value||!n.wrapElement)return;const N=Math.abs(B.target.getBoundingClientRect()[f.value.direction]-B[f.value.client]),H=a.value[f.value.offset]/2,j=(N-H)*100*v.value/i.value[f.value.offset];n.wrapElement[f.value.scroll]=j*n.wrapElement[f.value.scrollSize]/100},C=B=>{B.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",T),document.addEventListener("mouseup",E),h=document.onselectstart,document.onselectstart=()=>!1},T=B=>{if(!i.value||!a.value||l===!1)return;const N=o.value[f.value.axis];if(!N)return;const H=(i.value.getBoundingClientRect()[f.value.direction]-B[f.value.client])*-1,j=a.value[f.value.offset]-N,W=(H-j)*100*v.value/i.value[f.value.offset];n.wrapElement[f.value.scroll]=W*n.wrapElement[f.value.scrollSize]/100},E=()=>{l=!1,o.value[f.value.axis]=0,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",E),O(),c&&(s.value=!1)},A=()=>{c=!1,s.value=!!t.size},I=()=>{c=!0,s.value=l};ui(()=>{O(),document.removeEventListener("mouseup",E)});const O=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return ti(Gr(n,"scrollbarElement"),"mousemove",A),ti(Gr(n,"scrollbarElement"),"mouseleave",I),(B,N)=>(te(),ft(Ka,{name:w(r).b("fade"),persisted:""},{default:ge(()=>[In(V("div",{ref_key:"instance",ref:i,class:se([w(r).e("bar"),w(r).is(w(f).key)]),onMousedown:b},[V("div",{ref_key:"thumb",ref:a,class:se(w(r).e("thumb")),style:_n(w(p)),onMousedown:_},null,38)],34),[[Lr,B.always||s.value]])]),_:1},8,["name"]))}});var p6=Kt(V0e,[["__file","thumb.vue"]]);const H0e=Wt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),j0e=Be({__name:"bar",props:H0e,setup(e,{expose:t}){const n=e,r=un(g5),i=le(0),a=le(0),o=le(""),s=le(""),l=le(1),c=le(1);return t({handleScroll:p=>{if(p){const v=p.offsetHeight-Mg,_=p.offsetWidth-Mg;a.value=p.scrollTop*100/v*l.value,i.value=p.scrollLeft*100/_*c.value}},update:()=>{const p=r==null?void 0:r.wrapElement;if(!p)return;const v=p.offsetHeight-Mg,_=p.offsetWidth-Mg,b=v**2/p.scrollHeight,C=_**2/p.scrollWidth,T=Math.max(b,n.minSize),E=Math.max(C,n.minSize);l.value=b/(v-b)/(T/(v-T)),c.value=C/(_-C)/(E/(_-E)),s.value=T+Mg<v?`${T}px`:"",o.value=E+Mg<_?`${E}px`:""}}),(p,v)=>(te(),me(hn,null,[de(p6,{move:i.value,ratio:c.value,size:o.value,always:p.always},null,8,["move","ratio","size","always"]),de(p6,{move:a.value,ratio:l.value,size:s.value,vertical:"",always:p.always},null,8,["move","ratio","size","always"])],64))}});var U0e=Kt(j0e,[["__file","bar.vue"]]);const W0e=Wt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Qe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...yo(["ariaLabel","ariaOrientation"])}),G0e={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(zn)},K0e="ElScrollbar",q0e=Be({name:K0e}),Z0e=Be({...q0e,props:W0e,emits:G0e,setup(e,{expose:t,emit:n}){const r=e,i=Rt("scrollbar");let a,o,s=0,l=0;const c=le(),h=le(),f=le(),p=le(),v=X(()=>{const O={};return r.height&&(O.height=oa(r.height)),r.maxHeight&&(O.maxHeight=oa(r.maxHeight)),[r.wrapStyle,O]}),_=X(()=>[r.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!r.native}]),b=X(()=>[i.e("view"),r.viewClass]),C=()=>{var O;h.value&&((O=p.value)==null||O.handleScroll(h.value),s=h.value.scrollTop,l=h.value.scrollLeft,n("scroll",{scrollTop:h.value.scrollTop,scrollLeft:h.value.scrollLeft}))};function T(O,B){nr(O)?h.value.scrollTo(O):zn(O)&&zn(B)&&h.value.scrollTo(O,B)}const E=O=>{zn(O)&&(h.value.scrollTop=O)},A=O=>{zn(O)&&(h.value.scrollLeft=O)},I=()=>{var O;(O=p.value)==null||O.update()};return At(()=>r.noresize,O=>{O?(a==null||a(),o==null||o()):({stop:a}=Hi(f,I),o=ti("resize",I))},{immediate:!0}),At(()=>[r.maxHeight,r.height],()=>{r.native||bn(()=>{var O;I(),h.value&&((O=p.value)==null||O.handleScroll(h.value))})}),pr(g5,Ar({scrollbarElement:c,wrapElement:h})),h3(()=>{h.value.scrollTop=s,h.value.scrollLeft=l}),Un(()=>{r.native||bn(()=>{I()})}),nh(()=>I()),t({wrapRef:h,update:I,scrollTo:T,setScrollTop:E,setScrollLeft:A,handleScroll:C}),(O,B)=>(te(),me("div",{ref_key:"scrollbarRef",ref:c,class:se(w(i).b())},[V("div",{ref_key:"wrapRef",ref:h,class:se(w(_)),style:_n(w(v)),onScroll:C},[(te(),ft(ir(O.tag),{id:O.id,ref_key:"resizeRef",ref:f,class:se(w(b)),style:_n(O.viewStyle),role:O.role,"aria-label":O.ariaLabel,"aria-orientation":O.ariaOrientation},{default:ge(()=>[st(O.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),O.native?Ge("v-if",!0):(te(),ft(U0e,{key:0,ref_key:"barRef",ref:p,always:O.always,"min-size":O.minSize},null,8,["always","min-size"]))],2))}});var Y0e=Kt(Z0e,[["__file","scrollbar.vue"]]);const ad=Wn(Y0e),y5=Symbol("popper"),rq=Symbol("popperContent"),X0e=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],iq=Wt({role:{type:String,values:X0e,default:"tooltip"}}),J0e=Be({name:"ElPopper",inheritAttrs:!1}),Q0e=Be({...J0e,props:iq,setup(e,{expose:t}){const n=e,r=le(),i=le(),a=le(),o=le(),s=X(()=>n.role),l={triggerRef:r,popperInstanceRef:i,contentRef:a,referenceRef:o,role:s};return t(l),pr(y5,l),(c,h)=>st(c.$slots,"default")}});var e_e=Kt(Q0e,[["__file","popper.vue"]]);const aq=Wt({arrowOffset:{type:Number,default:5}}),t_e=Be({name:"ElPopperArrow",inheritAttrs:!1}),n_e=Be({...t_e,props:aq,setup(e,{expose:t}){const n=e,r=Rt("popper"),{arrowOffset:i,arrowRef:a,arrowStyle:o}=un(rq,void 0);return At(()=>n.arrowOffset,s=>{i.value=s}),ui(()=>{a.value=void 0}),t({arrowRef:a}),(s,l)=>(te(),me("span",{ref_key:"arrowRef",ref:a,class:se(w(r).e("arrow")),style:_n(w(o)),"data-popper-arrow":""},null,6))}});var r_e=Kt(n_e,[["__file","arrow.vue"]]);const i_e="ElOnlyChild",oq=Be({name:i_e,setup(e,{slots:t,attrs:n}){var r;const i=un(RK),a=Mge((r=i==null?void 0:i.setForwardRef)!=null?r:ai);return()=>{var o;const s=(o=t.default)==null?void 0:o.call(t,n);if(!s||s.length>1)return null;const l=sq(s);return l?In(Zd(l,n),[[a]]):null}}});function sq(e){if(!e)return null;const t=e;for(const n of t){if(nr(n))switch(n.type){case po:continue;case w0:case"svg":return v6(n);case hn:return sq(n.children);default:return n}return v6(n)}return null}function v6(e){const t=Rt("only-child");return de("span",{class:t.e("content")},[e])}const lq=Wt({virtualRef:{type:Qe(Object)},virtualTriggering:Boolean,onMouseenter:{type:Qe(Function)},onMouseleave:{type:Qe(Function)},onClick:{type:Qe(Function)},onKeydown:{type:Qe(Function)},onFocus:{type:Qe(Function)},onBlur:{type:Qe(Function)},onContextmenu:{type:Qe(Function)},id:String,open:Boolean}),a_e=Be({name:"ElPopperTrigger",inheritAttrs:!1}),o_e=Be({...a_e,props:lq,setup(e,{expose:t}){const n=e,{role:r,triggerRef:i}=un(y5,void 0);Tge(i);const a=X(()=>s.value?n.id:void 0),o=X(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),s=X(()=>{if(r&&r.value!=="tooltip")return r.value}),l=X(()=>s.value?`${n.open}`:void 0);let c;const h=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Un(()=>{At(()=>n.virtualRef,f=>{f&&(i.value=$s(f))},{immediate:!0}),At(i,(f,p)=>{c==null||c(),c=void 0,vl(f)&&(h.forEach(v=>{var _;const b=n[v];b&&(f.addEventListener(v.slice(2).toLowerCase(),b),(_=p==null?void 0:p.removeEventListener)==null||_.call(p,v.slice(2).toLowerCase(),b))}),c=At([a,o,s,l],v=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((_,b)=>{ro(v[b])?f.removeAttribute(_):f.setAttribute(_,v[b])})},{immediate:!0})),vl(p)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(v=>p.removeAttribute(v))},{immediate:!0})}),ui(()=>{if(c==null||c(),c=void 0,i.value&&vl(i.value)){const f=i.value;h.forEach(p=>{const v=n[p];v&&f.removeEventListener(p.slice(2).toLowerCase(),v)}),i.value=void 0}}),t({triggerRef:i}),(f,p)=>f.virtualTriggering?Ge("v-if",!0):(te(),ft(w(oq),sr({key:0},f.$attrs,{"aria-controls":w(a),"aria-describedby":w(o),"aria-expanded":w(l),"aria-haspopup":w(s)}),{default:ge(()=>[st(f.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var s_e=Kt(o_e,[["__file","trigger.vue"]]);const eP="focus-trap.focus-after-trapped",tP="focus-trap.focus-after-released",l_e="focus-trap.focusout-prevented",m6={cancelable:!0,bubbles:!1},u_e={cancelable:!0,bubbles:!1},g6="focusAfterTrapped",y6="focusAfterReleased",_5=Symbol("elFocusTrap"),b5=le(),lk=le(0),w5=le(0);let o2=0;const uq=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},_6=(e,t)=>{for(const n of e)if(!c_e(n,t))return n},c_e=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},d_e=e=>{const t=uq(e),n=_6(t,e),r=_6(t.reverse(),e);return[n,r]},h_e=e=>e instanceof HTMLInputElement&&"select"in e,qh=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),w5.value=window.performance.now(),e!==n&&h_e(e)&&t&&e.select()}};function b6(e,t){const n=[...e],r=e.indexOf(t);return r!==-1&&n.splice(r,1),n}const f_e=()=>{let e=[];return{push:r=>{const i=e[0];i&&r!==i&&i.pause(),e=b6(e,r),e.unshift(r)},remove:r=>{var i,a;e=b6(e,r),(a=(i=e[0])==null?void 0:i.resume)==null||a.call(i)}}},p_e=(e,t=!1)=>{const n=document.activeElement;for(const r of e)if(qh(r,t),document.activeElement!==n)return},w6=f_e(),v_e=()=>lk.value>w5.value,s2=()=>{b5.value="pointer",lk.value=window.performance.now()},x6=()=>{b5.value="keyboard",lk.value=window.performance.now()},m_e=()=>(Un(()=>{o2===0&&(document.addEventListener("mousedown",s2),document.addEventListener("touchstart",s2),document.addEventListener("keydown",x6)),o2++}),ui(()=>{o2--,o2<=0&&(document.removeEventListener("mousedown",s2),document.removeEventListener("touchstart",s2),document.removeEventListener("keydown",x6))}),{focusReason:b5,lastUserFocusTimestamp:lk,lastAutomatedFocusTimestamp:w5}),l2=e=>new CustomEvent(l_e,{...u_e,detail:e}),g_e=Be({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[g6,y6,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=le();let r,i;const{focusReason:a}=m_e();bge(_=>{e.trapped&&!o.paused&&t("release-requested",_)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=_=>{if(!e.loop&&!e.trapped||o.paused)return;const{key:b,altKey:C,ctrlKey:T,metaKey:E,currentTarget:A,shiftKey:I}=_,{loop:O}=e,B=b===En.tab&&!C&&!T&&!E,N=document.activeElement;if(B&&N){const H=A,[j,W]=d_e(H);if(j&&W){if(!I&&N===W){const Y=l2({focusReason:a.value});t("focusout-prevented",Y),Y.defaultPrevented||(_.preventDefault(),O&&qh(j,!0))}else if(I&&[j,H].includes(N)){const Y=l2({focusReason:a.value});t("focusout-prevented",Y),Y.defaultPrevented||(_.preventDefault(),O&&qh(W,!0))}}else if(N===H){const Y=l2({focusReason:a.value});t("focusout-prevented",Y),Y.defaultPrevented||_.preventDefault()}}};pr(_5,{focusTrapRef:n,onKeydown:s}),At(()=>e.focusTrapEl,_=>{_&&(n.value=_)},{immediate:!0}),At([n],([_],[b])=>{_&&(_.addEventListener("keydown",s),_.addEventListener("focusin",h),_.addEventListener("focusout",f)),b&&(b.removeEventListener("keydown",s),b.removeEventListener("focusin",h),b.removeEventListener("focusout",f))});const l=_=>{t(g6,_)},c=_=>t(y6,_),h=_=>{const b=w(n);if(!b)return;const C=_.target,T=_.relatedTarget,E=C&&b.contains(C);e.trapped||T&&b.contains(T)||(r=T),E&&t("focusin",_),!o.paused&&e.trapped&&(E?i=C:qh(i,!0))},f=_=>{const b=w(n);if(!(o.paused||!b))if(e.trapped){const C=_.relatedTarget;!ro(C)&&!b.contains(C)&&setTimeout(()=>{if(!o.paused&&e.trapped){const T=l2({focusReason:a.value});t("focusout-prevented",T),T.defaultPrevented||qh(i,!0)}},0)}else{const C=_.target;C&&b.contains(C)||t("focusout",_)}};async function p(){await bn();const _=w(n);if(_){w6.push(o);const b=_.contains(document.activeElement)?r:document.activeElement;if(r=b,!_.contains(b)){const T=new Event(eP,m6);_.addEventListener(eP,l),_.dispatchEvent(T),T.defaultPrevented||bn(()=>{let E=e.focusStartEl;Ln(E)||(qh(E),document.activeElement!==E&&(E="first")),E==="first"&&p_e(uq(_),!0),(document.activeElement===b||E==="container")&&qh(_)})}}}function v(){const _=w(n);if(_){_.removeEventListener(eP,l);const b=new CustomEvent(tP,{...m6,detail:{focusReason:a.value}});_.addEventListener(tP,c),_.dispatchEvent(b),!b.defaultPrevented&&(a.value=="keyboard"||!v_e()||_.contains(document.activeElement))&&qh(r??document.body),_.removeEventListener(tP,c),w6.remove(o)}}return Un(()=>{e.trapped&&p(),At(()=>e.trapped,_=>{_?p():v()})}),ui(()=>{e.trapped&&v(),n.value&&(n.value.removeEventListener("keydown",s),n.value.removeEventListener("focusin",h),n.value.removeEventListener("focusout",f),n.value=void 0)}),{onKeydown:s}}});function y_e(e,t,n,r,i,a){return st(e.$slots,"default",{handleKeydown:e.onKeydown})}var hx=Kt(g_e,[["render",y_e],["__file","focus-trap.vue"]]);const __e=["fixed","absolute"],b_e=Wt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Qe(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:qf,default:"bottom"},popperOptions:{type:Qe(Object),default:()=>({})},strategy:{type:String,values:__e,default:"absolute"}}),cq=Wt({...b_e,id:String,style:{type:Qe([String,Array,Object])},className:{type:Qe([String,Array,Object])},effect:{type:Qe(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Qe([String,Array,Object])},popperStyle:{type:Qe([String,Array,Object])},referenceEl:{type:Qe(Object)},triggerTargetEl:{type:Qe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...yo(["ariaLabel"])}),w_e={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},x_e=(e,t=[])=>{const{placement:n,strategy:r,popperOptions:i}=e,a={placement:n,strategy:r,...i,modifiers:[...C_e(e),...t]};return T_e(a,i==null?void 0:i.modifiers),a},S_e=e=>{if(xr)return $s(e)};function C_e(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:r}=e;return[{name:"offset",options:{offset:[0,t??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function T_e(e,t){t&&(e.modifiers=[...e.modifiers,...t??[]])}const M_e=0,k_e=e=>{const{popperInstanceRef:t,contentRef:n,triggerRef:r,role:i}=un(y5,void 0),a=le(),o=le(),s=X(()=>({name:"eventListeners",enabled:!!e.visible})),l=X(()=>{var T;const E=w(a),A=(T=w(o))!=null?T:M_e;return{name:"arrow",enabled:!aK(E),options:{element:E,padding:A}}}),c=X(()=>({onFirstUpdate:()=>{_()},...x_e(e,[w(l),w(s)])})),h=X(()=>S_e(e.referenceEl)||w(r)),{attributes:f,state:p,styles:v,update:_,forceUpdate:b,instanceRef:C}=mge(h,n,c);return At(C,T=>t.value=T),Un(()=>{At(()=>{var T;return(T=w(h))==null?void 0:T.getBoundingClientRect()},()=>{_()})}),{attributes:f,arrowRef:a,contentRef:n,instanceRef:C,state:p,styles:v,role:i,forceUpdate:b,update:_}},E_e=(e,{attributes:t,styles:n,role:r})=>{const{nextZIndex:i}=k0(),a=Rt("popper"),o=X(()=>w(t).popper),s=le(zn(e.zIndex)?e.zIndex:i()),l=X(()=>[a.b(),a.is("pure",e.pure),a.is(e.effect),e.popperClass]),c=X(()=>[{zIndex:w(s)},w(n).popper,e.popperStyle||{}]),h=X(()=>r.value==="dialog"?"false":void 0),f=X(()=>w(n).arrow||{});return{ariaModal:h,arrowStyle:f,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:s,updateZIndex:()=>{s.value=zn(e.zIndex)?e.zIndex:i()}}},A_e=(e,t)=>{const n=le(!1),r=le();return{focusStartRef:r,trapped:n,onFocusAfterReleased:c=>{var h;((h=c.detail)==null?void 0:h.focusReason)!=="pointer"&&(r.value="first",t("blur"))},onFocusAfterTrapped:()=>{t("focus")},onFocusInTrap:c=>{e.visible&&!n.value&&(c.target&&(r.value=c.target),n.value=!0)},onFocusoutPrevented:c=>{e.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,t("close")}}},P_e=Be({name:"ElPopperContent"}),I_e=Be({...P_e,props:cq,emits:w_e,setup(e,{expose:t,emit:n}){const r=e,{focusStartRef:i,trapped:a,onFocusAfterReleased:o,onFocusAfterTrapped:s,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:h}=A_e(r,n),{attributes:f,arrowRef:p,contentRef:v,styles:_,instanceRef:b,role:C,update:T}=k_e(r),{ariaModal:E,arrowStyle:A,contentAttrs:I,contentClass:O,contentStyle:B,updateZIndex:N}=E_e(r,{styles:_,attributes:f,role:C}),H=un(Qc,void 0),j=le();pr(rq,{arrowStyle:A,arrowRef:p,arrowOffset:j}),H&&pr(Qc,{...H,addInputId:ai,removeInputId:ai});let W;const U=(ie=!0)=>{T(),ie&&N()},Y=()=>{U(!1),r.visible&&r.focusOnShow?a.value=!0:r.visible===!1&&(a.value=!1)};return Un(()=>{At(()=>r.triggerTargetEl,(ie,ue)=>{W==null||W(),W=void 0;const J=w(ie||v.value),q=w(ue||v.value);vl(J)&&(W=At([C,()=>r.ariaLabel,E,()=>r.id],ce=>{["role","aria-label","aria-modal","id"].forEach((re,ee)=>{ro(ce[ee])?J.removeAttribute(re):J.setAttribute(re,ce[ee])})},{immediate:!0})),q!==J&&vl(q)&&["role","aria-label","aria-modal","id"].forEach(ce=>{q.removeAttribute(ce)})},{immediate:!0}),At(()=>r.visible,Y,{immediate:!0})}),ui(()=>{W==null||W(),W=void 0}),t({popperContentRef:v,popperInstanceRef:b,updatePopper:U,contentStyle:B}),(ie,ue)=>(te(),me("div",sr({ref_key:"contentRef",ref:v},w(I),{style:w(B),class:w(O),tabindex:"-1",onMouseenter:J=>ie.$emit("mouseenter",J),onMouseleave:J=>ie.$emit("mouseleave",J)}),[de(w(hx),{trapped:w(a),"trap-on-focus-in":!0,"focus-trap-el":w(v),"focus-start-el":w(i),onFocusAfterTrapped:w(s),onFocusAfterReleased:w(o),onFocusin:w(l),onFocusoutPrevented:w(c),onReleaseRequested:w(h)},{default:ge(()=>[st(ie.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var L_e=Kt(I_e,[["__file","content.vue"]]);const dq=Wn(e_e),uk=Symbol("elTooltip"),eo=Wt({...Sge,...cq,appendTo:{type:Qe([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Qe(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...yo(["ariaLabel"])}),uw=Wt({...lq,disabled:Boolean,trigger:{type:Qe([String,Array]),default:"hover"},triggerKeys:{type:Qe(Array),default:()=>[En.enter,En.space]}}),{useModelToggleProps:D_e,useModelToggleEmits:R_e,useModelToggle:O_e}=bK("visible"),z_e=Wt({...iq,...D_e,...eo,...uw,...aq,showArrow:{type:Boolean,default:!0}}),B_e=[...R_e,"before-show","before-hide","show","hide","open","close"],F_e=(e,t)=>sn(e)?e.includes(t):e===t,kg=(e,t,n)=>r=>{F_e(w(e),t)&&n(r)},N_e=Be({name:"ElTooltipTrigger"}),$_e=Be({...N_e,props:uw,setup(e,{expose:t}){const n=e,r=Rt("tooltip"),{controlled:i,id:a,open:o,onOpen:s,onClose:l,onToggle:c}=un(uk,void 0),h=le(null),f=()=>{if(w(i)||n.disabled)return!0},p=Gr(n,"trigger"),v=ia(f,kg(p,"hover",s)),_=ia(f,kg(p,"hover",l)),b=ia(f,kg(p,"click",I=>{I.button===0&&c(I)})),C=ia(f,kg(p,"focus",s)),T=ia(f,kg(p,"focus",l)),E=ia(f,kg(p,"contextmenu",I=>{I.preventDefault(),c(I)})),A=ia(f,I=>{const{code:O}=I;n.triggerKeys.includes(O)&&(I.preventDefault(),c(I))});return t({triggerRef:h}),(I,O)=>(te(),ft(w(s_e),{id:w(a),"virtual-ref":I.virtualRef,open:w(o),"virtual-triggering":I.virtualTriggering,class:se(w(r).e("trigger")),onBlur:w(T),onClick:w(b),onContextmenu:w(E),onFocus:w(C),onMouseenter:w(v),onMouseleave:w(_),onKeydown:w(A)},{default:ge(()=>[st(I.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var V_e=Kt($_e,[["__file","trigger.vue"]]);const H_e=Wt({to:{type:Qe([String,Object]),required:!0},disabled:Boolean}),j_e=Be({__name:"teleport",props:H_e,setup(e){return(t,n)=>t.disabled?st(t.$slots,"default",{key:0}):(te(),ft(joe,{key:1,to:t.to},[st(t.$slots,"default")],8,["to"]))}});var U_e=Kt(j_e,[["__file","teleport.vue"]]);const P0=Wn(U_e),W_e=Be({name:"ElTooltipContent",inheritAttrs:!1}),G_e=Be({...W_e,props:eo,setup(e,{expose:t}){const n=e,{selector:r}=DK(),i=Rt("tooltip"),a=le(null);let o;const{controlled:s,id:l,open:c,trigger:h,onClose:f,onOpen:p,onShow:v,onHide:_,onBeforeShow:b,onBeforeHide:C}=un(uk,void 0),T=X(()=>n.transition||`${i.namespace.value}-fade-in-linear`),E=X(()=>n.persistent);ui(()=>{o==null||o()});const A=X(()=>w(E)?!0:w(c)),I=X(()=>n.disabled?!1:w(c)),O=X(()=>n.appendTo||r.value),B=X(()=>{var q;return(q=n.style)!=null?q:{}}),N=X(()=>!w(c)),H=()=>{_()},j=()=>{if(w(s))return!0},W=ia(j,()=>{n.enterable&&w(h)==="hover"&&p()}),U=ia(j,()=>{w(h)==="hover"&&f()}),Y=()=>{var q,ce;(ce=(q=a.value)==null?void 0:q.updatePopper)==null||ce.call(q),b==null||b()},ie=()=>{C==null||C()},ue=()=>{v(),o=w3(X(()=>{var q;return(q=a.value)==null?void 0:q.popperContentRef}),()=>{if(w(s))return;w(h)!=="hover"&&f()})},J=()=>{n.virtualTriggering||f()};return At(()=>w(c),q=>{q||o==null||o()},{flush:"post"}),At(()=>n.content,()=>{var q,ce;(ce=(q=a.value)==null?void 0:q.updatePopper)==null||ce.call(q)}),t({contentRef:a}),(q,ce)=>(te(),ft(w(P0),{disabled:!q.teleported,to:w(O)},{default:ge(()=>[de(Ka,{name:w(T),onAfterLeave:H,onBeforeEnter:Y,onAfterEnter:ue,onBeforeLeave:ie},{default:ge(()=>[w(A)?In((te(),ft(w(L_e),sr({key:0,id:w(l),ref_key:"contentRef",ref:a},q.$attrs,{"aria-label":q.ariaLabel,"aria-hidden":w(N),"boundaries-padding":q.boundariesPadding,"fallback-placements":q.fallbackPlacements,"gpu-acceleration":q.gpuAcceleration,offset:q.offset,placement:q.placement,"popper-options":q.popperOptions,strategy:q.strategy,effect:q.effect,enterable:q.enterable,pure:q.pure,"popper-class":q.popperClass,"popper-style":[q.popperStyle,w(B)],"reference-el":q.referenceEl,"trigger-target-el":q.triggerTargetEl,visible:w(I),"z-index":q.zIndex,onMouseenter:w(W),onMouseleave:w(U),onBlur:J,onClose:w(f)}),{default:ge(()=>[st(q.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Lr,w(I)]]):Ge("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var K_e=Kt(G_e,[["__file","content.vue"]]);const q_e=Be({name:"ElTooltip"}),Z_e=Be({...q_e,props:z_e,emits:B_e,setup(e,{expose:t,emit:n}){const r=e;xge();const i=mo(),a=le(),o=le(),s=()=>{var T;const E=w(a);E&&((T=E.popperInstanceRef)==null||T.update())},l=le(!1),c=le(),{show:h,hide:f,hasUpdateHandler:p}=O_e({indicator:l,toggleReason:c}),{onOpen:v,onClose:_}=Cge({showAfter:Gr(r,"showAfter"),hideAfter:Gr(r,"hideAfter"),autoClose:Gr(r,"autoClose"),open:h,close:f}),b=X(()=>pa(r.visible)&&!p.value);pr(uk,{controlled:b,id:i,open:b0(l),trigger:Gr(r,"trigger"),onOpen:T=>{v(T)},onClose:T=>{_(T)},onToggle:T=>{w(l)?_(T):v(T)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:s}),At(()=>r.disabled,T=>{T&&l.value&&(l.value=!1)});const C=T=>{var E,A;const I=(A=(E=o.value)==null?void 0:E.contentRef)==null?void 0:A.popperContentRef,O=(T==null?void 0:T.relatedTarget)||document.activeElement;return I&&I.contains(O)};return CW(()=>l.value&&f()),t({popperRef:a,contentRef:o,isFocusInsideContent:C,updatePopper:s,onOpen:v,onClose:_,hide:f}),(T,E)=>(te(),ft(w(dq),{ref_key:"popperRef",ref:a,role:T.role},{default:ge(()=>[de(V_e,{disabled:T.disabled,trigger:T.trigger,"trigger-keys":T.triggerKeys,"virtual-ref":T.virtualRef,"virtual-triggering":T.virtualTriggering},{default:ge(()=>[T.$slots.default?st(T.$slots,"default",{key:0}):Ge("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),de(K_e,{ref_key:"contentRef",ref:o,"aria-label":T.ariaLabel,"boundaries-padding":T.boundariesPadding,content:T.content,disabled:T.disabled,effect:T.effect,enterable:T.enterable,"fallback-placements":T.fallbackPlacements,"hide-after":T.hideAfter,"gpu-acceleration":T.gpuAcceleration,offset:T.offset,persistent:T.persistent,"popper-class":T.popperClass,"popper-style":T.popperStyle,placement:T.placement,"popper-options":T.popperOptions,pure:T.pure,"raw-content":T.rawContent,"reference-el":T.referenceEl,"trigger-target-el":T.triggerTargetEl,"show-after":T.showAfter,strategy:T.strategy,teleported:T.teleported,transition:T.transition,"virtual-triggering":T.virtualTriggering,"z-index":T.zIndex,"append-to":T.appendTo},{default:ge(()=>[st(T.$slots,"content",{},()=>[T.rawContent?(te(),me("span",{key:0,innerHTML:T.content},null,8,["innerHTML"])):(te(),me("span",{key:1},Xe(T.content),1))]),T.showArrow?(te(),ft(w(r_e),{key:0,"arrow-offset":T.arrowOffset},null,8,["arrow-offset"])):Ge("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Y_e=Kt(Z_e,[["__file","tooltip.vue"]]);const Po=Wn(Y_e),X_e=Wt({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Qe(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Qe([Function,Array]),default:ai},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:eo.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...yo(["ariaLabel"])}),J_e={[tr]:e=>Ln(e),[_s]:e=>Ln(e),[ki]:e=>Ln(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>nr(e)},hq="ElAutocomplete",Q_e=Be({name:hq,inheritAttrs:!1}),ebe=Be({...Q_e,props:X_e,emits:J_e,setup(e,{expose:t,emit:n}){const r=e,i=Z3(),a=gm(),o=Ts(),s=Rt("autocomplete"),l=le(),c=le(),h=le(),f=le();let p=!1,v=!1;const _=le([]),b=le(-1),C=le(""),T=le(!1),E=le(!1),A=le(!1),I=mo(),O=X(()=>a.style),B=X(()=>(_.value.length>0||A.value)&&T.value),N=X(()=>!r.hideLoading&&A.value),H=X(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),j=()=>{B.value&&(C.value=`${l.value.$el.offsetWidth}px`)},W=()=>{b.value=-1},Y=Ks(async Ee=>{if(E.value)return;const Je=Ue=>{A.value=!1,!E.value&&(sn(Ue)?(_.value=Ue,b.value=r.highlightFirstItem?0:-1):Na(hq,"autocomplete suggestions must be an array"))};if(A.value=!0,sn(r.fetchSuggestions))Je(r.fetchSuggestions);else{const Ue=await r.fetchSuggestions(Ee,Je);sn(Ue)&&Je(Ue)}},r.debounce),ie=Ee=>{const Je=!!Ee;if(n(_s,Ee),n(tr,Ee),E.value=!1,T.value||(T.value=Je),!r.triggerOnFocus&&!Ee){E.value=!0,_.value=[];return}Y(Ee)},ue=Ee=>{var Je;o.value||(((Je=Ee.target)==null?void 0:Je.tagName)!=="INPUT"||H.value.includes(document.activeElement))&&(T.value=!0)},J=Ee=>{n(ki,Ee)},q=Ee=>{v?v=!1:(T.value=!0,n("focus",Ee),r.triggerOnFocus&&!p&&Y(String(r.modelValue)))},ce=Ee=>{setTimeout(()=>{var Je;if((Je=h.value)!=null&&Je.isFocusInsideContent()){v=!0;return}T.value&&be(),n("blur",Ee)})},re=()=>{T.value=!1,n(tr,""),n("clear")},ee=async()=>{B.value&&b.value>=0&&b.value<_.value.length?Ce(_.value[b.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),_.value=[],b.value=-1)},oe=Ee=>{B.value&&(Ee.preventDefault(),Ee.stopPropagation(),be())},be=()=>{T.value=!1},we=()=>{var Ee;(Ee=l.value)==null||Ee.focus()},pe=()=>{var Ee;(Ee=l.value)==null||Ee.blur()},Ce=async Ee=>{n(_s,Ee[r.valueKey]),n(tr,Ee[r.valueKey]),n("select",Ee),_.value=[],b.value=-1},Ve=Ee=>{if(!B.value||A.value)return;if(Ee<0){b.value=-1;return}Ee>=_.value.length&&(Ee=_.value.length-1);const Je=c.value.querySelector(`.${s.be("suggestion","wrap")}`),yt=Je.querySelectorAll(`.${s.be("suggestion","list")} li`)[Ee],Ne=Je.scrollTop,{offsetTop:dt,scrollHeight:Le}=yt;dt+Le>Ne+Je.clientHeight&&(Je.scrollTop+=Le),dt<Ne&&(Je.scrollTop-=Le),b.value=Ee,l.value.ref.setAttribute("aria-activedescendant",`${I.value}-item-${b.value}`)},et=w3(f,()=>{B.value&&be()});return ui(()=>{et==null||et()}),Un(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${I.value}-item-${b.value}`),p=l.value.ref.hasAttribute("readonly")}),t({highlightedIndex:b,activated:T,loading:A,inputRef:l,popperRef:h,suggestions:_,handleSelect:Ce,handleKeyEnter:ee,focus:we,blur:pe,close:be,highlight:Ve}),(Ee,Je)=>(te(),ft(w(Po),{ref_key:"popperRef",ref:h,visible:w(B),placement:Ee.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[w(s).e("popper"),Ee.popperClass],teleported:Ee.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${w(s).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:j,onHide:W},{content:ge(()=>[V("div",{ref_key:"regionRef",ref:c,class:se([w(s).b("suggestion"),w(s).is("loading",w(N))]),style:_n({[Ee.fitInputWidth?"width":"minWidth"]:C.value,outline:"none"}),role:"region"},[de(w(ad),{id:w(I),tag:"ul","wrap-class":w(s).be("suggestion","wrap"),"view-class":w(s).be("suggestion","list"),role:"listbox"},{default:ge(()=>[w(N)?(te(),me("li",{key:0},[st(Ee.$slots,"loading",{},()=>[de(w(yn),{class:se(w(s).is("loading"))},{default:ge(()=>[de(w(Yc))]),_:1},8,["class"])])])):(te(!0),me(hn,{key:1},Kn(_.value,(Ue,yt)=>(te(),me("li",{id:`${w(I)}-item-${yt}`,key:yt,class:se({highlighted:b.value===yt}),role:"option","aria-selected":b.value===yt,onClick:Ne=>Ce(Ue)},[st(Ee.$slots,"default",{item:Ue},()=>[$t(Xe(Ue[Ee.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ge(()=>[V("div",{ref_key:"listboxRef",ref:f,class:se([w(s).b(),Ee.$attrs.class]),style:_n(w(O)),role:"combobox","aria-haspopup":"listbox","aria-expanded":w(B),"aria-owns":w(I)},[de(w(Zo),sr({ref_key:"inputRef",ref:l},w(i),{clearable:Ee.clearable,disabled:w(o),name:Ee.name,"model-value":Ee.modelValue,"aria-label":Ee.ariaLabel,onInput:ie,onChange:J,onFocus:q,onBlur:ce,onClear:re,onKeydown:[oi(Fn(Ue=>Ve(b.value-1),["prevent"]),["up"]),oi(Fn(Ue=>Ve(b.value+1),["prevent"]),["down"]),oi(ee,["enter"]),oi(be,["tab"]),oi(oe,["esc"])],onMousedown:ue}),Zu({_:2},[Ee.$slots.prepend?{name:"prepend",fn:ge(()=>[st(Ee.$slots,"prepend")])}:void 0,Ee.$slots.append?{name:"append",fn:ge(()=>[st(Ee.$slots,"append")])}:void 0,Ee.$slots.prefix?{name:"prefix",fn:ge(()=>[st(Ee.$slots,"prefix")])}:void 0,Ee.$slots.suffix?{name:"suffix",fn:ge(()=>[st(Ee.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var tbe=Kt(ebe,[["__file","autocomplete.vue"]]);const nbe=Wn(tbe),rbe=Wt({size:{type:[Number,String],values:id,default:"",validator:e=>zn(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:si},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Qe(String),default:"cover"}}),ibe={error:e=>e instanceof Event},abe=Be({name:"ElAvatar"}),obe=Be({...abe,props:rbe,emits:ibe,setup(e,{emit:t}){const n=e,r=Rt("avatar"),i=le(!1),a=X(()=>{const{size:c,icon:h,shape:f}=n,p=[r.b()];return Ln(c)&&p.push(r.m(c)),h&&p.push(r.m("icon")),f&&p.push(r.m(f)),p}),o=X(()=>{const{size:c}=n;return zn(c)?r.cssVarBlock({size:oa(c)||""}):void 0}),s=X(()=>({objectFit:n.fit}));At(()=>n.src,()=>i.value=!1);function l(c){i.value=!0,t("error",c)}return(c,h)=>(te(),me("span",{class:se(w(a)),style:_n(w(o))},[(c.src||c.srcSet)&&!i.value?(te(),me("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:_n(w(s)),onError:l},null,44,["src","alt","srcset"])):c.icon?(te(),ft(w(yn),{key:1},{default:ge(()=>[(te(),ft(ir(c.icon)))]),_:1})):st(c.$slots,"default",{key:2})],6))}});var sbe=Kt(obe,[["__file","avatar.vue"]]);const lbe=Wn(sbe),ube={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},cbe={click:e=>e instanceof MouseEvent},dbe=(e,t,n)=>{const r=_i(),i=_i(),a=le(!1),o=()=>{r.value&&(a.value=r.value.scrollTop>=e.visibilityHeight)},s=c=>{var h;(h=r.value)==null||h.scrollTo({top:0,behavior:"smooth"}),t("click",c)},l=gG(o,300,!0);return ti(i,"scroll",l),Un(()=>{var c;i.value=document,r.value=document.documentElement,e.target&&(r.value=(c=document.querySelector(e.target))!=null?c:void 0,r.value||Na(n,`target does not exist: ${e.target}`),i.value=r.value),o()}),{visible:a,handleClick:s}},fq="ElBacktop",hbe=Be({name:fq}),fbe=Be({...hbe,props:ube,emits:cbe,setup(e,{emit:t}){const n=e,r=Rt("backtop"),{handleClick:i,visible:a}=dbe(n,t,fq),o=X(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(s,l)=>(te(),ft(Ka,{name:`${w(r).namespace.value}-fade-in`},{default:ge(()=>[w(a)?(te(),me("div",{key:0,style:_n(w(o)),class:se(w(r).b()),onClick:Fn(w(i),["stop"])},[st(s.$slots,"default",{},()=>[de(w(yn),{class:se(w(r).e("icon"))},{default:ge(()=>[de(w(Xpe))]),_:1},8,["class"])])],14,["onClick"])):Ge("v-if",!0)]),_:3},8,["name"]))}});var pbe=Kt(fbe,[["__file","backtop.vue"]]);const vbe=Wn(pbe),mbe=Wt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Qe([String,Object,Array])},offset:{type:Qe(Array),default:[0,0]},badgeClass:{type:String}}),gbe=Be({name:"ElBadge"}),ybe=Be({...gbe,props:mbe,setup(e,{expose:t}){const n=e,r=Rt("badge"),i=X(()=>n.isDot?"":zn(n.value)&&zn(n.max)?n.max<n.value?`${n.max}+`:n.value===0&&!n.showZero?"":`${n.value}`:`${n.value}`),a=X(()=>{var o,s,l,c,h;return[{backgroundColor:n.color,marginRight:oa(-((s=(o=n.offset)==null?void 0:o[0])!=null?s:0)),marginTop:oa((c=(l=n.offset)==null?void 0:l[1])!=null?c:0)},(h=n.badgeStyle)!=null?h:{}]});return t({content:i}),(o,s)=>(te(),me("div",{class:se(w(r).b())},[st(o.$slots,"default"),de(Ka,{name:`${w(r).namespace.value}-zoom-in-center`,persisted:""},{default:ge(()=>[In(V("sup",{class:se([w(r).e("content"),w(r).em("content",o.type),w(r).is("fixed",!!o.$slots.default),w(r).is("dot",o.isDot),o.badgeClass]),style:_n(w(a)),textContent:Xe(w(i))},null,14,["textContent"]),[[Lr,!o.hidden&&(w(i)||o.isDot)]])]),_:1},8,["name"])],2))}});var _be=Kt(ybe,[["__file","badge.vue"]]);const pq=Wn(_be),vq=Symbol("breadcrumbKey"),bbe=Wt({separator:{type:String,default:"/"},separatorIcon:{type:si}}),wbe=Be({name:"ElBreadcrumb"}),xbe=Be({...wbe,props:bbe,setup(e){const t=e,{t:n}=Sr(),r=Rt("breadcrumb"),i=le();return pr(vq,t),Un(()=>{const a=i.value.querySelectorAll(`.${r.e("item")}`);a.length&&a[a.length-1].setAttribute("aria-current","page")}),(a,o)=>(te(),me("div",{ref_key:"breadcrumb",ref:i,class:se(w(r).b()),"aria-label":w(n)("el.breadcrumb.label"),role:"navigation"},[st(a.$slots,"default")],10,["aria-label"]))}});var Sbe=Kt(xbe,[["__file","breadcrumb.vue"]]);const Cbe=Wt({to:{type:Qe([String,Object]),default:""},replace:Boolean}),Tbe=Be({name:"ElBreadcrumbItem"}),Mbe=Be({...Tbe,props:Cbe,setup(e){const t=e,n=er(),r=un(vq,void 0),i=Rt("breadcrumb"),a=n.appContext.config.globalProperties.$router,o=le(),s=()=>{!t.to||!a||(t.replace?a.replace(t.to):a.push(t.to))};return(l,c)=>{var h,f;return te(),me("span",{class:se(w(i).e("item"))},[V("span",{ref_key:"link",ref:o,class:se([w(i).e("inner"),w(i).is("link",!!l.to)]),role:"link",onClick:s},[st(l.$slots,"default")],2),(h=w(r))!=null&&h.separatorIcon?(te(),ft(w(yn),{key:0,class:se(w(i).e("separator"))},{default:ge(()=>[(te(),ft(ir(w(r).separatorIcon)))]),_:1},8,["class"])):(te(),me("span",{key:1,class:se(w(i).e("separator")),role:"presentation"},Xe((f=w(r))==null?void 0:f.separator),3))],2)}}});var mq=Kt(Mbe,[["__file","breadcrumb-item.vue"]]);const kbe=Wn(Sbe,{BreadcrumbItem:mq}),Ebe=Ki(mq),gq=Symbol("buttonGroupContextKey"),Abe=(e,t)=>{Sf({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},X(()=>e.type==="text"));const n=un(gq,void 0),r=ok("button"),{form:i}=es(),a=Ea(X(()=>n==null?void 0:n.size)),o=Ts(),s=le(),l=qa(),c=X(()=>e.type||(n==null?void 0:n.type)||""),h=X(()=>{var _,b,C;return(C=(b=e.autoInsertSpace)!=null?b:(_=r.value)==null?void 0:_.autoInsertSpace)!=null?C:!1}),f=X(()=>e.tag==="button"?{ariaDisabled:o.value||e.loading,disabled:o.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),p=X(()=>{var _;const b=(_=l.default)==null?void 0:_.call(l);if(h.value&&(b==null?void 0:b.length)===1){const C=b[0];if((C==null?void 0:C.type)===w0){const T=C.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(T.trim())}}return!1});return{_disabled:o,_size:a,_type:c,_ref:s,_props:f,shouldAddSpace:p,handleClick:_=>{if(o.value||e.loading){_.stopPropagation();return}e.nativeType==="reset"&&(i==null||i.resetFields()),t("click",_)}}},lD=["default","primary","success","warning","info","danger","text",""],Pbe=["button","submit","reset"],uD=Wt({size:$a,disabled:Boolean,type:{type:String,values:lD,default:""},icon:{type:si},nativeType:{type:String,values:Pbe,default:"button"},loading:Boolean,loadingIcon:{type:si,default:()=>Yc},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Qe([String,Object]),default:"button"}}),Ibe={click:e=>e instanceof MouseEvent};function Eo(e,t){Lbe(e)&&(e="100%");var n=Dbe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function u2(e){return Math.min(1,Math.max(0,e))}function Lbe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Dbe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function yq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function c2(e){return e<=1?"".concat(Number(e)*100,"%"):e}function yv(e){return e.length===1?"0"+e:String(e)}function Rbe(e,t,n){return{r:Eo(e,255)*255,g:Eo(t,255)*255,b:Eo(n,255)*255}}function S6(e,t,n){e=Eo(e,255),t=Eo(t,255),n=Eo(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=0,s=(r+i)/2;if(r===i)o=0,a=0;else{var l=r-i;switch(o=s>.5?l/(2-r-i):l/(r+i),r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4;break}a/=6}return{h:a,s:o,l:s}}function nP(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Obe(e,t,n){var r,i,a;if(e=Eo(e,360),t=Eo(t,100),n=Eo(n,100),t===0)i=n,a=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=nP(s,o,e+1/3),i=nP(s,o,e),a=nP(s,o,e-1/3)}return{r:r*255,g:i*255,b:a*255}}function C6(e,t,n){e=Eo(e,255),t=Eo(t,255),n=Eo(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=r,s=r-i,l=r===0?0:s/r;if(r===i)a=0;else{switch(r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4;break}a/=6}return{h:a,s:l,v:o}}function zbe(e,t,n){e=Eo(e,360)*6,t=Eo(t,100),n=Eo(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,c=[n,o,a,a,s,n][l],h=[s,n,n,o,a,a][l],f=[a,a,s,n,n,o][l];return{r:c*255,g:h*255,b:f*255}}function T6(e,t,n,r){var i=[yv(Math.round(e).toString(16)),yv(Math.round(t).toString(16)),yv(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Bbe(e,t,n,r,i){var a=[yv(Math.round(e).toString(16)),yv(Math.round(t).toString(16)),yv(Math.round(n).toString(16)),yv(Fbe(r))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Fbe(e){return Math.round(parseFloat(e)*255).toString(16)}function M6(e){return ll(e)/255}function ll(e){return parseInt(e,16)}function Nbe(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var cD={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function $be(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;return typeof e=="string"&&(e=jbe(e)),typeof e=="object"&&(Pd(e.r)&&Pd(e.g)&&Pd(e.b)?(t=Rbe(e.r,e.g,e.b),o=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Pd(e.h)&&Pd(e.s)&&Pd(e.v)?(r=c2(e.s),i=c2(e.v),t=zbe(e.h,r,i),o=!0,s="hsv"):Pd(e.h)&&Pd(e.s)&&Pd(e.l)&&(r=c2(e.s),a=c2(e.l),t=Obe(e.h,r,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=yq(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Vbe="[-\\+]?\\d+%?",Hbe="[-\\+]?\\d*\\.\\d+%?",lf="(?:".concat(Hbe,")|(?:").concat(Vbe,")"),rP="[\\s|\\(]+(".concat(lf,")[,|\\s]+(").concat(lf,")[,|\\s]+(").concat(lf,")\\s*\\)?"),iP="[\\s|\\(]+(".concat(lf,")[,|\\s]+(").concat(lf,")[,|\\s]+(").concat(lf,")[,|\\s]+(").concat(lf,")\\s*\\)?"),Eu={CSS_UNIT:new RegExp(lf),rgb:new RegExp("rgb"+rP),rgba:new RegExp("rgba"+iP),hsl:new RegExp("hsl"+rP),hsla:new RegExp("hsla"+iP),hsv:new RegExp("hsv"+rP),hsva:new RegExp("hsva"+iP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function jbe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(cD[e])e=cD[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Eu.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Eu.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Eu.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Eu.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Eu.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Eu.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Eu.hex8.exec(e),n?{r:ll(n[1]),g:ll(n[2]),b:ll(n[3]),a:M6(n[4]),format:t?"name":"hex8"}:(n=Eu.hex6.exec(e),n?{r:ll(n[1]),g:ll(n[2]),b:ll(n[3]),format:t?"name":"hex"}:(n=Eu.hex4.exec(e),n?{r:ll(n[1]+n[1]),g:ll(n[2]+n[2]),b:ll(n[3]+n[3]),a:M6(n[4]+n[4]),format:t?"name":"hex8"}:(n=Eu.hex3.exec(e),n?{r:ll(n[1]+n[1]),g:ll(n[2]+n[2]),b:ll(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Pd(e){return!!Eu.CSS_UNIT.exec(String(e))}var _q=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var r;if(t instanceof e)return t;typeof t=="number"&&(t=Nbe(t)),this.originalInput=t;var i=$be(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,r,i,a=t.r/255,o=t.g/255,s=t.b/255;return a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=yq(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=C6(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=C6(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=S6(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=S6(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),T6(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Bbe(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(n,", ").concat(r,")"):"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(n){return"".concat(Math.round(Eo(n,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Eo(n,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+T6(this.r,this.g,this.b,!1),n=0,r=Object.entries(cD);n<r.length;n++){var i=r[n],a=i[0],o=i[1];if(t===o)return a}return!1},e.prototype.toString=function(t){var n=!!t;t=t??this.format;var r=!1,i=this.a<1&&this.a>=0,a=!n&&i&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=u2(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=u2(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=u2(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=u2(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),a=n/100,o={r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a};return new e(o)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var r=this.toHsl(),i=360/n,a=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(new e({h:r,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(r+o*a)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function Rh(e,t=20){return e.mix("#141414",t).toString()}function Ube(e){const t=Ts(),n=Rt("button");return X(()=>{let r={},i=e.color;if(i){const a=i.match(/var\((.*?)\)/);a&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const o=new _q(i),s=e.dark?o.tint(20).toString():Rh(o,20);if(e.plain)r=n.cssVarBlock({"bg-color":e.dark?Rh(o,90):o.tint(90).toString(),"text-color":i,"border-color":e.dark?Rh(o,50):o.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":s,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":s}),t.value&&(r[n.cssVarBlockName("disabled-bg-color")]=e.dark?Rh(o,90):o.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=e.dark?Rh(o,50):o.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=e.dark?Rh(o,80):o.tint(80).toString());else{const l=e.dark?Rh(o,30):o.tint(30).toString(),c=o.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":i,"text-color":c,"border-color":i,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":s,"active-border-color":s}),t.value){const h=e.dark?Rh(o,50):o.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=h,r[n.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=h}}}return r})}const Wbe=Be({name:"ElButton"}),Gbe=Be({...Wbe,props:uD,emits:Ibe,setup(e,{expose:t,emit:n}){const r=e,i=Ube(r),a=Rt("button"),{_ref:o,_size:s,_type:l,_disabled:c,_props:h,shouldAddSpace:f,handleClick:p}=Abe(r,n),v=X(()=>[a.b(),a.m(l.value),a.m(s.value),a.is("disabled",c.value),a.is("loading",r.loading),a.is("plain",r.plain),a.is("round",r.round),a.is("circle",r.circle),a.is("text",r.text),a.is("link",r.link),a.is("has-bg",r.bg)]);return t({ref:o,size:s,type:l,disabled:c,shouldAddSpace:f}),(_,b)=>(te(),ft(ir(_.tag),sr({ref_key:"_ref",ref:o},w(h),{class:w(v),style:w(i),onClick:w(p)}),{default:ge(()=>[_.loading?(te(),me(hn,{key:0},[_.$slots.loading?st(_.$slots,"loading",{key:0}):(te(),ft(w(yn),{key:1,class:se(w(a).is("loading"))},{default:ge(()=>[(te(),ft(ir(_.loadingIcon)))]),_:1},8,["class"]))],64)):_.icon||_.$slots.icon?(te(),ft(w(yn),{key:1},{default:ge(()=>[_.icon?(te(),ft(ir(_.icon),{key:0})):st(_.$slots,"icon",{key:1})]),_:3})):Ge("v-if",!0),_.$slots.default?(te(),me("span",{key:2,class:se({[w(a).em("text","expand")]:w(f)})},[st(_.$slots,"default")],2)):Ge("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Kbe=Kt(Gbe,[["__file","button.vue"]]);const qbe={size:uD.size,type:uD.type},Zbe=Be({name:"ElButtonGroup"}),Ybe=Be({...Zbe,props:qbe,setup(e){const t=e;pr(gq,Ar({size:Gr(t,"size"),type:Gr(t,"type")}));const n=Rt("button");return(r,i)=>(te(),me("div",{class:se(w(n).b("group"))},[st(r.$slots,"default")],2))}});var bq=Kt(Ybe,[["__file","button-group.vue"]]);const io=Wn(Kbe,{ButtonGroup:bq}),wq=Ki(bq);var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xq={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){var n=1e3,r=6e4,i=36e5,a="millisecond",o="second",s="minute",l="hour",c="day",h="week",f="month",p="quarter",v="year",_="date",b="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ue){var J=["th","st","nd","rd"],q=ue%100;return"["+ue+(J[(q-20)%10]||J[q]||J[0])+"]"}},A=function(ue,J,q){var ce=String(ue);return!ce||ce.length>=J?ue:""+Array(J+1-ce.length).join(q)+ue},I={s:A,z:function(ue){var J=-ue.utcOffset(),q=Math.abs(J),ce=Math.floor(q/60),re=q%60;return(J<=0?"+":"-")+A(ce,2,"0")+":"+A(re,2,"0")},m:function ue(J,q){if(J.date()<q.date())return-ue(q,J);var ce=12*(q.year()-J.year())+(q.month()-J.month()),re=J.clone().add(ce,f),ee=q-re<0,oe=J.clone().add(ce+(ee?-1:1),f);return+(-(ce+(q-re)/(ee?re-oe:oe-re))||0)},a:function(ue){return ue<0?Math.ceil(ue)||0:Math.floor(ue)},p:function(ue){return{M:f,y:v,w:h,d:c,D:_,h:l,m:s,s:o,ms:a,Q:p}[ue]||String(ue||"").toLowerCase().replace(/s$/,"")},u:function(ue){return ue===void 0}},O="en",B={};B[O]=E;var N="$isDayjsObject",H=function(ue){return ue instanceof Y||!(!ue||!ue[N])},j=function ue(J,q,ce){var re;if(!J)return O;if(typeof J=="string"){var ee=J.toLowerCase();B[ee]&&(re=ee),q&&(B[ee]=q,re=ee);var oe=J.split("-");if(!re&&oe.length>1)return ue(oe[0])}else{var be=J.name;B[be]=J,re=be}return!ce&&re&&(O=re),re||!ce&&O},W=function(ue,J){if(H(ue))return ue.clone();var q=typeof J=="object"?J:{};return q.date=ue,q.args=arguments,new Y(q)},U=I;U.l=j,U.i=H,U.w=function(ue,J){return W(ue,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var Y=function(){function ue(q){this.$L=j(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[N]=!0}var J=ue.prototype;return J.parse=function(q){this.$d=function(ce){var re=ce.date,ee=ce.utc;if(re===null)return new Date(NaN);if(U.u(re))return new Date;if(re instanceof Date)return new Date(re);if(typeof re=="string"&&!/Z$/i.test(re)){var oe=re.match(C);if(oe){var be=oe[2]-1||0,we=(oe[7]||"0").substring(0,3);return ee?new Date(Date.UTC(oe[1],be,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,we)):new Date(oe[1],be,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,we)}}return new Date(re)}(q),this.init()},J.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},J.$utils=function(){return U},J.isValid=function(){return this.$d.toString()!==b},J.isSame=function(q,ce){var re=W(q);return this.startOf(ce)<=re&&re<=this.endOf(ce)},J.isAfter=function(q,ce){return W(q)<this.startOf(ce)},J.isBefore=function(q,ce){return this.endOf(ce)<W(q)},J.$g=function(q,ce,re){return U.u(q)?this[ce]:this.set(re,q)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(q,ce){var re=this,ee=!!U.u(ce)||ce,oe=U.p(q),be=function(Ue,yt){var Ne=U.w(re.$u?Date.UTC(re.$y,yt,Ue):new Date(re.$y,yt,Ue),re);return ee?Ne:Ne.endOf(c)},we=function(Ue,yt){return U.w(re.toDate()[Ue].apply(re.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(yt)),re)},pe=this.$W,Ce=this.$M,Ve=this.$D,et="set"+(this.$u?"UTC":"");switch(oe){case v:return ee?be(1,0):be(31,11);case f:return ee?be(1,Ce):be(0,Ce+1);case h:var Ee=this.$locale().weekStart||0,Je=(pe<Ee?pe+7:pe)-Ee;return be(ee?Ve-Je:Ve+(6-Je),Ce);case c:case _:return we(et+"Hours",0);case l:return we(et+"Minutes",1);case s:return we(et+"Seconds",2);case o:return we(et+"Milliseconds",3);default:return this.clone()}},J.endOf=function(q){return this.startOf(q,!1)},J.$set=function(q,ce){var re,ee=U.p(q),oe="set"+(this.$u?"UTC":""),be=(re={},re[c]=oe+"Date",re[_]=oe+"Date",re[f]=oe+"Month",re[v]=oe+"FullYear",re[l]=oe+"Hours",re[s]=oe+"Minutes",re[o]=oe+"Seconds",re[a]=oe+"Milliseconds",re)[ee],we=ee===c?this.$D+(ce-this.$W):ce;if(ee===f||ee===v){var pe=this.clone().set(_,1);pe.$d[be](we),pe.init(),this.$d=pe.set(_,Math.min(this.$D,pe.daysInMonth())).$d}else be&&this.$d[be](we);return this.init(),this},J.set=function(q,ce){return this.clone().$set(q,ce)},J.get=function(q){return this[U.p(q)]()},J.add=function(q,ce){var re,ee=this;q=Number(q);var oe=U.p(ce),be=function(Ce){var Ve=W(ee);return U.w(Ve.date(Ve.date()+Math.round(Ce*q)),ee)};if(oe===f)return this.set(f,this.$M+q);if(oe===v)return this.set(v,this.$y+q);if(oe===c)return be(1);if(oe===h)return be(7);var we=(re={},re[s]=r,re[l]=i,re[o]=n,re)[oe]||1,pe=this.$d.getTime()+q*we;return U.w(pe,this)},J.subtract=function(q,ce){return this.add(-1*q,ce)},J.format=function(q){var ce=this,re=this.$locale();if(!this.isValid())return re.invalidDate||b;var ee=q||"YYYY-MM-DDTHH:mm:ssZ",oe=U.z(this),be=this.$H,we=this.$m,pe=this.$M,Ce=re.weekdays,Ve=re.months,et=re.meridiem,Ee=function(yt,Ne,dt,Le){return yt&&(yt[Ne]||yt(ce,ee))||dt[Ne].slice(0,Le)},Je=function(yt){return U.s(be%12||12,yt,"0")},Ue=et||function(yt,Ne,dt){var Le=yt<12?"AM":"PM";return dt?Le.toLowerCase():Le};return ee.replace(T,function(yt,Ne){return Ne||function(dt){switch(dt){case"YY":return String(ce.$y).slice(-2);case"YYYY":return U.s(ce.$y,4,"0");case"M":return pe+1;case"MM":return U.s(pe+1,2,"0");case"MMM":return Ee(re.monthsShort,pe,Ve,3);case"MMMM":return Ee(Ve,pe);case"D":return ce.$D;case"DD":return U.s(ce.$D,2,"0");case"d":return String(ce.$W);case"dd":return Ee(re.weekdaysMin,ce.$W,Ce,2);case"ddd":return Ee(re.weekdaysShort,ce.$W,Ce,3);case"dddd":return Ce[ce.$W];case"H":return String(be);case"HH":return U.s(be,2,"0");case"h":return Je(1);case"hh":return Je(2);case"a":return Ue(be,we,!0);case"A":return Ue(be,we,!1);case"m":return String(we);case"mm":return U.s(we,2,"0");case"s":return String(ce.$s);case"ss":return U.s(ce.$s,2,"0");case"SSS":return U.s(ce.$ms,3,"0");case"Z":return oe}return null}(yt)||oe.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(q,ce,re){var ee,oe=this,be=U.p(ce),we=W(q),pe=(we.utcOffset()-this.utcOffset())*r,Ce=this-we,Ve=function(){return U.m(oe,we)};switch(be){case v:ee=Ve()/12;break;case f:ee=Ve();break;case p:ee=Ve()/3;break;case h:ee=(Ce-pe)/6048e5;break;case c:ee=(Ce-pe)/864e5;break;case l:ee=Ce/i;break;case s:ee=Ce/r;break;case o:ee=Ce/n;break;default:ee=Ce}return re?ee:U.a(ee)},J.daysInMonth=function(){return this.endOf(f).$D},J.$locale=function(){return B[this.$L]},J.locale=function(q,ce){if(!q)return this.$L;var re=this.clone(),ee=j(q,ce,!0);return ee&&(re.$L=ee),re},J.clone=function(){return U.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},ue}(),ie=Y.prototype;return W.prototype=ie,[["$ms",a],["$s",o],["$m",s],["$H",l],["$W",c],["$M",f],["$y",v],["$D",_]].forEach(function(ue){ie[ue[1]]=function(J){return this.$g(J,ue[0],ue[1])}}),W.extend=function(ue,J){return ue.$i||(ue(J,Y,W),ue.$i=!0),W},W.locale=j,W.isDayjs=H,W.unix=function(ue){return W(1e3*ue)},W.en=B[O],W.Ls=B,W.p={},W})})(xq);var Xbe=xq.exports;const jn=oc(Xbe);var Sq={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,a=/\d\d/,o=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(C){return(C=+C)+(C>68?1900:2e3)},h=function(C){return function(T){this[C]=+T}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(C){(this.zone||(this.zone={})).offset=function(T){if(!T||T==="Z")return 0;var E=T.match(/([+-]|\d\d)/g),A=60*E[1]+(+E[2]||0);return A===0?0:E[0]==="+"?-A:A}(C)}],p=function(C){var T=l[C];return T&&(T.indexOf?T:T.s.concat(T.f))},v=function(C,T){var E,A=l.meridiem;if(A){for(var I=1;I<=24;I+=1)if(C.indexOf(A(I,0,T))>-1){E=I>12;break}}else E=C===(T?"pm":"PM");return E},_={A:[s,function(C){this.afternoon=v(C,!1)}],a:[s,function(C){this.afternoon=v(C,!0)}],Q:[i,function(C){this.month=3*(C-1)+1}],S:[i,function(C){this.milliseconds=100*+C}],SS:[a,function(C){this.milliseconds=10*+C}],SSS:[/\d{3}/,function(C){this.milliseconds=+C}],s:[o,h("seconds")],ss:[o,h("seconds")],m:[o,h("minutes")],mm:[o,h("minutes")],H:[o,h("hours")],h:[o,h("hours")],HH:[o,h("hours")],hh:[o,h("hours")],D:[o,h("day")],DD:[a,h("day")],Do:[s,function(C){var T=l.ordinal,E=C.match(/\d+/);if(this.day=E[0],T)for(var A=1;A<=31;A+=1)T(A).replace(/\[|\]/g,"")===C&&(this.day=A)}],w:[o,h("week")],ww:[a,h("week")],M:[o,h("month")],MM:[a,h("month")],MMM:[s,function(C){var T=p("months"),E=(p("monthsShort")||T.map(function(A){return A.slice(0,3)})).indexOf(C)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[s,function(C){var T=p("months").indexOf(C)+1;if(T<1)throw new Error;this.month=T%12||T}],Y:[/[+-]?\d+/,h("year")],YY:[a,function(C){this.year=c(C)}],YYYY:[/\d{4}/,h("year")],Z:f,ZZ:f};function b(C){var T,E;T=C,E=l&&l.formats;for(var A=(C=T.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(W,U,Y){var ie=Y&&Y.toUpperCase();return U||E[Y]||n[Y]||E[ie].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ue,J,q){return J||q.slice(1)})})).match(r),I=A.length,O=0;O<I;O+=1){var B=A[O],N=_[B],H=N&&N[0],j=N&&N[1];A[O]=j?{regex:H,parser:j}:B.replace(/^\[|\]$/g,"")}return function(W){for(var U={},Y=0,ie=0;Y<I;Y+=1){var ue=A[Y];if(typeof ue=="string")ie+=ue.length;else{var J=ue.regex,q=ue.parser,ce=W.slice(ie),re=J.exec(ce)[0];q.call(U,re),W=W.replace(re,"")}}return function(ee){var oe=ee.afternoon;if(oe!==void 0){var be=ee.hours;oe?be<12&&(ee.hours+=12):be===12&&(ee.hours=0),delete ee.afternoon}}(U),U}}return function(C,T,E){E.p.customParseFormat=!0,C&&C.parseTwoDigitYear&&(c=C.parseTwoDigitYear);var A=T.prototype,I=A.parse;A.parse=function(O){var B=O.date,N=O.utc,H=O.args;this.$u=N;var j=H[1];if(typeof j=="string"){var W=H[2]===!0,U=H[3]===!0,Y=W||U,ie=H[2];U&&(ie=H[2]),l=this.$locale(),!W&&ie&&(l=E.Ls[ie]),this.$d=function(ce,re,ee,oe){try{if(["x","X"].indexOf(re)>-1)return new Date((re==="X"?1e3:1)*ce);var be=b(re)(ce),we=be.year,pe=be.month,Ce=be.day,Ve=be.hours,et=be.minutes,Ee=be.seconds,Je=be.milliseconds,Ue=be.zone,yt=be.week,Ne=new Date,dt=Ce||(we||pe?1:Ne.getDate()),Le=we||Ne.getFullYear(),ze=0;we&&!pe||(ze=pe>0?pe-1:Ne.getMonth());var ct,Lt=Ve||0,lt=et||0,Ct=Ee||0,_t=Je||0;return Ue?new Date(Date.UTC(Le,ze,dt,Lt,lt,Ct,_t+60*Ue.offset*1e3)):ee?new Date(Date.UTC(Le,ze,dt,Lt,lt,Ct,_t)):(ct=new Date(Le,ze,dt,Lt,lt,Ct,_t),yt&&(ct=oe(ct).week(yt).toDate()),ct)}catch{return new Date("")}}(B,j,N,E),this.init(),ie&&ie!==!0&&(this.$L=this.locale(ie).$L),Y&&B!=this.format(j)&&(this.$d=new Date("")),l={}}else if(j instanceof Array)for(var ue=j.length,J=1;J<=ue;J+=1){H[1]=j[J-1];var q=E.apply(this,H);if(q.isValid()){this.$d=q.$d,this.$L=q.$L,this.init();break}J===ue&&(this.$d=new Date(""))}else I.call(this,O)}}})})(Sq);var Jbe=Sq.exports;const x5=oc(Jbe),k6=["hours","minutes","seconds"],dD="HH:mm:ss",Xg="YYYY-MM-DD",Qbe={date:Xg,dates:Xg,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${Xg} ${dD}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:Xg,datetimerange:`${Xg} ${dD}`},aP=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],Cf=e=>Array.from(Array.from({length:e}).keys()),Cq=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),Tq=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),E6=function(e,t){const n=Kv(e),r=Kv(t);return n&&r?e.getTime()===t.getTime():!n&&!r?e===t:!1},A6=function(e,t){const n=sn(e),r=sn(t);return n&&r?e.length!==t.length?!1:e.every((i,a)=>E6(i,t[a])):!n&&!r?E6(e,t):!1},P6=function(e,t,n){const r=Ul(t)||t==="x"?jn(e).locale(n):jn(e,t).locale(n);return r.isValid()?r:void 0},I6=function(e,t,n){return Ul(t)?e:t==="x"?+e:jn(e).locale(n).format(t)},oP=(e,t)=>{var n;const r=[],i=t==null?void 0:t();for(let a=0;a<e;a++)r.push((n=i==null?void 0:i.includes(a))!=null?n:!1);return r},Mq=Wt({disabledHours:{type:Qe(Function)},disabledMinutes:{type:Qe(Function)},disabledSeconds:{type:Qe(Function)}}),kq=Wt({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),S5=Wt({id:{type:Qe([Array,String])},name:{type:Qe([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Qe([String,Object]),default:Kf},editable:{type:Boolean,default:!0},prefixIcon:{type:Qe([String,Object]),default:""},size:$a,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Qe(Object),default:()=>({})},modelValue:{type:Qe([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Qe([Date,Array])},defaultTime:{type:Qe([Date,Array])},isRange:Boolean,...Mq,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Qe([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,...A0,...yo(["ariaLabel"])}),e1e=Be({name:"Picker"}),t1e=Be({...e1e,props:S5,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:n}){const r=e,i=gm(),{lang:a}=Sr(),o=Rt("date"),s=Rt("input"),l=Rt("range"),{form:c,formItem:h}=es(),f=un("ElPopperOptions",{}),{valueOnClear:p}=ak(r,null),v=le(),_=le(),b=le(!1),C=le(!1),T=le(null);let E=!1,A=!1;const I=X(()=>[o.b("editor"),o.bm("editor",r.type),s.e("wrapper"),o.is("disabled",pe.value),o.is("active",b.value),l.b("editor"),It?l.bm("editor",It.value):"",i.class]),O=X(()=>[s.e("icon"),l.e("close-icon"),dt.value?"":l.e("close-icon--hidden")]);At(b,Me=>{Me?bn(()=>{Me&&(T.value=r.modelValue)}):(Ot.value=null,bn(()=>{B(r.modelValue)}))});const B=(Me,Ae)=>{(Ae||!A6(Me,T.value))&&(n("change",Me),r.validateEvent&&(h==null||h.validate("change").catch(pt=>void 0)))},N=Me=>{if(!A6(r.modelValue,Me)){let Ae;sn(Me)?Ae=Me.map(pt=>I6(pt,r.valueFormat,a.value)):Me&&(Ae=I6(Me,r.valueFormat,a.value)),n("update:modelValue",Me&&Ae,a.value)}},H=Me=>{n("keydown",Me)},j=X(()=>{if(_.value){const Me=_t.value?_.value:_.value.$el;return Array.from(Me.querySelectorAll("input"))}return[]}),W=(Me,Ae,pt)=>{const Mt=j.value;Mt.length&&(!pt||pt==="min"?(Mt[0].setSelectionRange(Me,Ae),Mt[0].focus()):pt==="max"&&(Mt[1].setSelectionRange(Me,Ae),Mt[1].focus()))},U=()=>{ee(!0,!0),bn(()=>{A=!1})},Y=(Me="",Ae=!1)=>{Ae||(A=!0),b.value=Ae;let pt;sn(Me)?pt=Me.map(Mt=>Mt.toDate()):pt=Me&&Me.toDate(),Ot.value=null,N(pt)},ie=()=>{C.value=!0},ue=()=>{n("visible-change",!0)},J=Me=>{(Me==null?void 0:Me.key)===En.esc&&ee(!0,!0)},q=()=>{C.value=!1,b.value=!1,A=!1,n("visible-change",!1)},ce=()=>{b.value=!0},re=()=>{b.value=!1},ee=(Me=!0,Ae=!1)=>{A=Ae;const[pt,Mt]=w(j);let it=pt;!Me&&_t.value&&(it=Mt),it&&it.focus()},oe=Me=>{r.readonly||pe.value||b.value||A||(b.value=!0,n("focus",Me))};let be;const we=Me=>{const Ae=async()=>{setTimeout(()=>{var pt;be===Ae&&(!((pt=v.value)!=null&&pt.isFocusInsideContent()&&!E)&&j.value.filter(Mt=>Mt.contains(document.activeElement)).length===0&&(kt(),b.value=!1,n("blur",Me),r.validateEvent&&(h==null||h.validate("blur").catch(Mt=>void 0))),E=!1)},0)};be=Ae,Ae()},pe=X(()=>r.disabled||(c==null?void 0:c.disabled)),Ce=X(()=>{let Me;if(ze.value?Fe.value.getDefaultValue&&(Me=Fe.value.getDefaultValue()):sn(r.modelValue)?Me=r.modelValue.map(Ae=>P6(Ae,r.valueFormat,a.value)):Me=P6(r.modelValue,r.valueFormat,a.value),Fe.value.getRangeAvailableTime){const Ae=Fe.value.getRangeAvailableTime(Me);Yo(Ae,Me)||(Me=Ae,ze.value||N(sn(Me)?Me.map(pt=>pt.toDate()):Me.toDate()))}return sn(Me)&&Me.some(Ae=>!Ae)&&(Me=[]),Me}),Ve=X(()=>{if(!Fe.value.panelReady)return"";const Me=Rn(Ce.value);return sn(Ot.value)?[Ot.value[0]||Me&&Me[0]||"",Ot.value[1]||Me&&Me[1]||""]:Ot.value!==null?Ot.value:!Ee.value&&ze.value||!b.value&&ze.value?"":Me?Je.value||Ue.value||yt.value?Me.join(", "):Me:""}),et=X(()=>r.type.includes("time")),Ee=X(()=>r.type.startsWith("time")),Je=X(()=>r.type==="dates"),Ue=X(()=>r.type==="months"),yt=X(()=>r.type==="years"),Ne=X(()=>r.prefixIcon||(et.value?cK:qpe)),dt=le(!1),Le=Me=>{r.readonly||pe.value||(dt.value&&(Me.stopPropagation(),U(),Fe.value.handleClear?Fe.value.handleClear():N(p.value),B(p.value,!0),dt.value=!1,b.value=!1),n("clear"))},ze=X(()=>{const{modelValue:Me}=r;return!Me||sn(Me)&&!Me.filter(Boolean).length}),ct=async Me=>{var Ae;r.readonly||pe.value||(((Ae=Me.target)==null?void 0:Ae.tagName)!=="INPUT"||j.value.includes(document.activeElement))&&(b.value=!0)},Lt=()=>{r.readonly||pe.value||!ze.value&&r.clearable&&(dt.value=!0)},lt=()=>{dt.value=!1},Ct=Me=>{var Ae;r.readonly||pe.value||(((Ae=Me.touches[0].target)==null?void 0:Ae.tagName)!=="INPUT"||j.value.includes(document.activeElement))&&(b.value=!0)},_t=X(()=>r.type.includes("range")),It=Ea(),Bt=X(()=>{var Me,Ae;return(Ae=(Me=w(v))==null?void 0:Me.popperRef)==null?void 0:Ae.contentRef}),Ft=X(()=>{var Me;return w(_t)?w(_):(Me=w(_))==null?void 0:Me.$el}),cn=w3(Ft,Me=>{const Ae=w(Bt),pt=w(Ft);Ae&&(Me.target===Ae||Me.composedPath().includes(Ae))||Me.target===pt||Me.composedPath().includes(pt)||(b.value=!1)});ui(()=>{cn==null||cn()});const Ot=le(null),kt=()=>{if(Ot.value){const Me=fn(Ve.value);Me&&On(Me)&&(N(sn(Me)?Me.map(Ae=>Ae.toDate()):Me.toDate()),Ot.value=null)}Ot.value===""&&(N(p.value),B(p.value),Ot.value=null)},fn=Me=>Me?Fe.value.parseUserInput(Me):null,Rn=Me=>Me?Fe.value.formatToString(Me):null,On=Me=>Fe.value.isValidValue(Me),mt=async Me=>{if(r.readonly||pe.value)return;const{code:Ae}=Me;if(H(Me),Ae===En.esc){b.value===!0&&(b.value=!1,Me.preventDefault(),Me.stopPropagation());return}if(Ae===En.down&&(Fe.value.handleFocusPicker&&(Me.preventDefault(),Me.stopPropagation()),b.value===!1&&(b.value=!0,await bn()),Fe.value.handleFocusPicker)){Fe.value.handleFocusPicker();return}if(Ae===En.tab){E=!0;return}if(Ae===En.enter||Ae===En.numpadEnter){(Ot.value===null||Ot.value===""||On(fn(Ve.value)))&&(kt(),b.value=!1),Me.stopPropagation();return}if(Ot.value){Me.stopPropagation();return}Fe.value.handleKeydownInput&&Fe.value.handleKeydownInput(Me)},Gt=Me=>{Ot.value=Me,b.value||(b.value=!0)},gn=Me=>{const Ae=Me.target;Ot.value?Ot.value=[Ae.value,Ot.value[1]]:Ot.value=[Ae.value,null]},xt=Me=>{const Ae=Me.target;Ot.value?Ot.value=[Ot.value[0],Ae.value]:Ot.value=[null,Ae.value]},Zt=()=>{var Me;const Ae=Ot.value,pt=fn(Ae&&Ae[0]),Mt=w(Ce);if(pt&&pt.isValid()){Ot.value=[Rn(pt),((Me=Ve.value)==null?void 0:Me[1])||null];const it=[pt,Mt&&(Mt[1]||null)];On(it)&&(N(it),Ot.value=null)}},Ze=()=>{var Me;const Ae=w(Ot),pt=fn(Ae&&Ae[1]),Mt=w(Ce);if(pt&&pt.isValid()){Ot.value=[((Me=w(Ve))==null?void 0:Me[0])||null,Rn(pt)];const it=[Mt&&Mt[0],pt];On(it)&&(N(it),Ot.value=null)}},Fe=le({}),ve=Me=>{Fe.value[Me[0]]=Me[1],Fe.value.panelReady=!0},ke=Me=>{n("calendar-change",Me)},Oe=(Me,Ae,pt)=>{n("panel-change",Me,Ae,pt)};return pr("EP_PICKER_BASE",{props:r}),t({focus:ee,handleFocusInput:oe,handleBlurInput:we,handleOpen:ce,handleClose:re,onPick:Y}),(Me,Ae)=>(te(),ft(w(Po),sr({ref_key:"refPopper",ref:v,visible:b.value,effect:"light",pure:"",trigger:"click"},Me.$attrs,{role:"dialog",teleported:"",transition:`${w(o).namespace.value}-zoom-in-top`,"popper-class":[`${w(o).namespace.value}-picker__popper`,Me.popperClass],"popper-options":w(f),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:ie,onShow:ue,onHide:q}),{default:ge(()=>[w(_t)?(te(),me("div",{key:1,ref_key:"inputRef",ref:_,class:se(w(I)),style:_n(Me.$attrs.style),onClick:oe,onMouseenter:Lt,onMouseleave:lt,onTouchstartPassive:Ct,onKeydown:mt},[w(Ne)?(te(),ft(w(yn),{key:0,class:se([w(s).e("icon"),w(l).e("icon")]),onMousedown:Fn(ct,["prevent"]),onTouchstartPassive:Ct},{default:ge(()=>[(te(),ft(ir(w(Ne))))]),_:1},8,["class","onMousedown"])):Ge("v-if",!0),V("input",{id:Me.id&&Me.id[0],autocomplete:"off",name:Me.name&&Me.name[0],placeholder:Me.startPlaceholder,value:w(Ve)&&w(Ve)[0],disabled:w(pe),readonly:!Me.editable||Me.readonly,class:se(w(l).b("input")),onMousedown:ct,onInput:gn,onChange:Zt,onFocus:oe,onBlur:we},null,42,["id","name","placeholder","value","disabled","readonly"]),st(Me.$slots,"range-separator",{},()=>[V("span",{class:se(w(l).b("separator"))},Xe(Me.rangeSeparator),3)]),V("input",{id:Me.id&&Me.id[1],autocomplete:"off",name:Me.name&&Me.name[1],placeholder:Me.endPlaceholder,value:w(Ve)&&w(Ve)[1],disabled:w(pe),readonly:!Me.editable||Me.readonly,class:se(w(l).b("input")),onMousedown:ct,onFocus:oe,onBlur:we,onInput:xt,onChange:Ze},null,42,["id","name","placeholder","value","disabled","readonly"]),Me.clearIcon?(te(),ft(w(yn),{key:1,class:se(w(O)),onClick:Le},{default:ge(()=>[(te(),ft(ir(Me.clearIcon)))]),_:1},8,["class"])):Ge("v-if",!0)],38)):(te(),ft(w(Zo),{key:0,id:Me.id,ref_key:"inputRef",ref:_,"container-role":"combobox","model-value":w(Ve),name:Me.name,size:w(It),disabled:w(pe),placeholder:Me.placeholder,class:se([w(o).b("editor"),w(o).bm("editor",Me.type),Me.$attrs.class]),style:_n(Me.$attrs.style),readonly:!Me.editable||Me.readonly||w(Je)||w(Ue)||w(yt)||Me.type==="week","aria-label":Me.ariaLabel,tabindex:Me.tabindex,"validate-event":!1,onInput:Gt,onFocus:oe,onBlur:we,onKeydown:mt,onChange:kt,onMousedown:ct,onMouseenter:Lt,onMouseleave:lt,onTouchstartPassive:Ct,onClick:Fn(()=>{},["stop"])},{prefix:ge(()=>[w(Ne)?(te(),ft(w(yn),{key:0,class:se(w(s).e("icon")),onMousedown:Fn(ct,["prevent"]),onTouchstartPassive:Ct},{default:ge(()=>[(te(),ft(ir(w(Ne))))]),_:1},8,["class","onMousedown"])):Ge("v-if",!0)]),suffix:ge(()=>[dt.value&&Me.clearIcon?(te(),ft(w(yn),{key:0,class:se(`${w(s).e("icon")} clear-icon`),onClick:Fn(Le,["stop"])},{default:ge(()=>[(te(),ft(ir(Me.clearIcon)))]),_:1},8,["class","onClick"])):Ge("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onKeydown","onClick"]))]),content:ge(()=>[st(Me.$slots,"default",{visible:b.value,actualVisible:C.value,parsedValue:w(Ce),format:Me.format,dateFormat:Me.dateFormat,timeFormat:Me.timeFormat,unlinkPanels:Me.unlinkPanels,type:Me.type,defaultValue:Me.defaultValue,onPick:Y,onSelectRange:W,onSetPickerOption:ve,onCalendarChange:ke,onPanelChange:Oe,onKeydown:J,onMousedown:Fn(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var Eq=Kt(t1e,[["__file","picker.vue"]]);const n1e=Wt({...kq,datetimeRole:String,parsedValue:{type:Qe(Object)}}),Aq=({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:n})=>{const r=(o,s,l,c)=>{const h={hour:e,minute:t,second:n};let f=o;return["hour","minute","second"].forEach(p=>{if(h[p]){let v;const _=h[p];switch(p){case"minute":{v=_(f.hour(),s,c);break}case"second":{v=_(f.hour(),f.minute(),s,c);break}default:{v=_(s,c);break}}if(v!=null&&v.length&&!v.includes(f[p]())){const b=l?0:v.length-1;f=f[p](v[b])}}}),f},i={};return{timePickerOptions:i,getAvailableTime:r,onSetOption:([o,s])=>{i[o]=s}}},sP=e=>{const t=(r,i)=>r||i,n=r=>r!==!0;return e.map(t).filter(n)},Pq=(e,t,n)=>({getHoursList:(o,s)=>oP(24,e&&(()=>e==null?void 0:e(o,s))),getMinutesList:(o,s,l)=>oP(60,t&&(()=>t==null?void 0:t(o,s,l))),getSecondsList:(o,s,l,c)=>oP(60,n&&(()=>n==null?void 0:n(o,s,l,c)))}),Iq=(e,t,n)=>{const{getHoursList:r,getMinutesList:i,getSecondsList:a}=Pq(e,t,n);return{getAvailableHours:(c,h)=>sP(r(c,h)),getAvailableMinutes:(c,h,f)=>sP(i(c,h,f)),getAvailableSeconds:(c,h,f,p)=>sP(a(c,h,f,p))}},Lq=e=>{const t=le(e.parsedValue);return At(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},Zh=new Map;if(xr){let e;document.addEventListener("mousedown",t=>e=t),document.addEventListener("mouseup",t=>{if(e){for(const n of Zh.values())for(const{documentHandler:r}of n)r(t,e);e=void 0}})}function L6(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:vl(t.arg)&&n.push(t.arg),function(r,i){const a=t.instance.popperRef,o=r.target,s=i==null?void 0:i.target,l=!t||!t.instance,c=!o||!s,h=e.contains(o)||e.contains(s),f=e===o,p=n.length&&n.some(_=>_==null?void 0:_.contains(o))||n.length&&n.includes(s),v=a&&(a.contains(o)||a.contains(s));l||c||h||f||p||v||t.value(r,i)}}const Xd={beforeMount(e,t){Zh.has(e)||Zh.set(e,[]),Zh.get(e).push({documentHandler:L6(e,t),bindingFn:t.value})},updated(e,t){Zh.has(e)||Zh.set(e,[]);const n=Zh.get(e),r=n.findIndex(a=>a.bindingFn===t.oldValue),i={documentHandler:L6(e,t),bindingFn:t.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(e){Zh.delete(e)}},r1e=100,i1e=600,MT={beforeMount(e,t){const n=t.value,{interval:r=r1e,delay:i=i1e}=Dn(n)?{}:n;let a,o;const s=()=>Dn(n)?n():n.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),a&&(clearInterval(a),a=void 0)};e.addEventListener("mousedown",c=>{c.button===0&&(l(),s(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{a=setInterval(()=>{s()},r)},i))})}},hD="_trap-focus-children",_v=[],D6=e=>{if(_v.length===0)return;const t=_v[_v.length-1][hD];if(t.length>0&&e.code===En.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,r=e.target===t[0],i=e.target===t[t.length-1];r&&n&&(e.preventDefault(),t[t.length-1].focus()),i&&!n&&(e.preventDefault(),t[0].focus())}},a1e={beforeMount(e){e[hD]=jN(e),_v.push(e),_v.length<=1&&document.addEventListener("keydown",D6)},updated(e){bn(()=>{e[hD]=jN(e)})},unmounted(){_v.shift(),_v.length===0&&document.removeEventListener("keydown",D6)}};var R6=!1,pv,fD,pD,MC,kC,Dq,EC,vD,mD,gD,Rq,yD,_D,Oq,zq;function Ps(){if(!R6){R6=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(yD=/\b(iPhone|iP[ao]d)/.exec(e),_D=/\b(iP[ao]d)/.exec(e),gD=/Android/i.exec(e),Oq=/FBAN\/\w+;/i.exec(e),zq=/Mobile/i.exec(e),Rq=!!/Win64/.exec(e),t){pv=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,pv&&document&&document.documentMode&&(pv=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);Dq=r?parseFloat(r[1])+4:pv,fD=t[2]?parseFloat(t[2]):NaN,pD=t[3]?parseFloat(t[3]):NaN,MC=t[4]?parseFloat(t[4]):NaN,MC?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),kC=t&&t[1]?parseFloat(t[1]):NaN):kC=NaN}else pv=fD=pD=kC=MC=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);EC=i?parseFloat(i[1].replace("_",".")):!0}else EC=!1;vD=!!n[2],mD=!!n[3]}else EC=vD=mD=!1}}var bD={ie:function(){return Ps()||pv},ieCompatibilityMode:function(){return Ps()||Dq>pv},ie64:function(){return bD.ie()&&Rq},firefox:function(){return Ps()||fD},opera:function(){return Ps()||pD},webkit:function(){return Ps()||MC},safari:function(){return bD.webkit()},chrome:function(){return Ps()||kC},windows:function(){return Ps()||vD},osx:function(){return Ps()||EC},linux:function(){return Ps()||mD},iphone:function(){return Ps()||yD},mobile:function(){return Ps()||yD||_D||gD||zq},nativeApp:function(){return Ps()||Oq},android:function(){return Ps()||gD},ipad:function(){return Ps()||_D}},o1e=bD,d2=!!(typeof window<"u"&&window.document&&window.document.createElement),s1e={canUseDOM:d2,canUseWorkers:typeof Worker<"u",canUseEventListeners:d2&&!!(window.addEventListener||window.attachEvent),canUseViewport:d2&&!!window.screen,isInWorker:!d2},Bq=s1e,Fq;Bq.canUseDOM&&(Fq=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function l1e(e,t){if(!Bq.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&Fq&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var u1e=l1e,O6=10,z6=40,B6=800;function Nq(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*O6,i=n*O6,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(e.deltaMode==1?(r*=z6,i*=z6):(r*=B6,i*=B6)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}Nq.getEventType=function(){return o1e.firefox()?"DOMMouseScroll":u1e("wheel")?"wheel":"mousewheel"};var c1e=Nq;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const d1e=function(e,t){if(e&&e.addEventListener){const n=function(r){const i=c1e(r);t&&Reflect.apply(t,this,[r,i])};e.addEventListener("wheel",n,{passive:!0})}},h1e={beforeMount(e,t){d1e(e,t.value)}},f1e=Wt({role:{type:String,required:!0},spinnerDate:{type:Qe(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Qe(String),default:""},...Mq}),p1e=Be({__name:"basic-time-spinner",props:f1e,emits:["change","select-range","set-option"],setup(e,{emit:t}){const n=e,r=Rt("time"),{getHoursList:i,getMinutesList:a,getSecondsList:o}=Pq(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let s=!1;const l=le(),c=le(),h=le(),f=le(),p={hours:c,minutes:h,seconds:f},v=X(()=>n.showSeconds?k6:k6.slice(0,2)),_=X(()=>{const{spinnerDate:ee}=n,oe=ee.hour(),be=ee.minute(),we=ee.second();return{hours:oe,minutes:be,seconds:we}}),b=X(()=>{const{hours:ee,minutes:oe}=w(_);return{hours:i(n.role),minutes:a(ee,n.role),seconds:o(ee,oe,n.role)}}),C=X(()=>{const{hours:ee,minutes:oe,seconds:be}=w(_);return{hours:aP(ee,23),minutes:aP(oe,59),seconds:aP(be,59)}}),T=Ks(ee=>{s=!1,I(ee)},200),E=ee=>{if(!!!n.amPmMode)return"";const be=n.amPmMode==="A";let we=ee<12?" am":" pm";return be&&(we=we.toUpperCase()),we},A=ee=>{let oe;switch(ee){case"hours":oe=[0,2];break;case"minutes":oe=[3,5];break;case"seconds":oe=[6,8];break}const[be,we]=oe;t("select-range",be,we),l.value=ee},I=ee=>{N(ee,w(_)[ee])},O=()=>{I("hours"),I("minutes"),I("seconds")},B=ee=>ee.querySelector(`.${r.namespace.value}-scrollbar__wrap`),N=(ee,oe)=>{if(n.arrowControl)return;const be=w(p[ee]);be&&be.$el&&(B(be.$el).scrollTop=Math.max(0,oe*H(ee)))},H=ee=>{const oe=w(p[ee]),be=oe==null?void 0:oe.$el.querySelector("li");return be&&Number.parseFloat(af(be,"height"))||0},j=()=>{U(1)},W=()=>{U(-1)},U=ee=>{l.value||A("hours");const oe=l.value,be=w(_)[oe],we=l.value==="hours"?24:60,pe=Y(oe,be,ee,we);ie(oe,pe),N(oe,pe),bn(()=>A(oe))},Y=(ee,oe,be,we)=>{let pe=(oe+be+we)%we;const Ce=w(b)[ee];for(;Ce[pe]&&pe!==oe;)pe=(pe+be+we)%we;return pe},ie=(ee,oe)=>{if(w(b)[ee][oe])return;const{hours:pe,minutes:Ce,seconds:Ve}=w(_);let et;switch(ee){case"hours":et=n.spinnerDate.hour(oe).minute(Ce).second(Ve);break;case"minutes":et=n.spinnerDate.hour(pe).minute(oe).second(Ve);break;case"seconds":et=n.spinnerDate.hour(pe).minute(Ce).second(oe);break}t("change",et)},ue=(ee,{value:oe,disabled:be})=>{be||(ie(ee,oe),A(ee),N(ee,oe))},J=ee=>{s=!0,T(ee);const oe=Math.min(Math.round((B(w(p[ee]).$el).scrollTop-(q(ee)*.5-10)/H(ee)+3)/H(ee)),ee==="hours"?23:59);ie(ee,oe)},q=ee=>w(p[ee]).$el.offsetHeight,ce=()=>{const ee=oe=>{const be=w(p[oe]);be&&be.$el&&(B(be.$el).onscroll=()=>{J(oe)})};ee("hours"),ee("minutes"),ee("seconds")};Un(()=>{bn(()=>{!n.arrowControl&&ce(),O(),n.role==="start"&&A("hours")})});const re=(ee,oe)=>{p[oe].value=ee};return t("set-option",[`${n.role}_scrollDown`,U]),t("set-option",[`${n.role}_emitSelectRange`,A]),At(()=>n.spinnerDate,()=>{s||O()}),(ee,oe)=>(te(),me("div",{class:se([w(r).b("spinner"),{"has-seconds":ee.showSeconds}])},[ee.arrowControl?Ge("v-if",!0):(te(!0),me(hn,{key:0},Kn(w(v),be=>(te(),ft(w(ad),{key:be,ref_for:!0,ref:we=>re(we,be),class:se(w(r).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":w(r).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:we=>A(be),onMousemove:we=>I(be)},{default:ge(()=>[(te(!0),me(hn,null,Kn(w(b)[be],(we,pe)=>(te(),me("li",{key:pe,class:se([w(r).be("spinner","item"),w(r).is("active",pe===w(_)[be]),w(r).is("disabled",we)]),onClick:Ce=>ue(be,{value:pe,disabled:we})},[be==="hours"?(te(),me(hn,{key:0},[$t(Xe(("0"+(ee.amPmMode?pe%12||12:pe)).slice(-2))+Xe(E(pe)),1)],64)):(te(),me(hn,{key:1},[$t(Xe(("0"+pe).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),ee.arrowControl?(te(!0),me(hn,{key:1},Kn(w(v),be=>(te(),me("div",{key:be,class:se([w(r).be("spinner","wrapper"),w(r).is("arrow")]),onMouseenter:we=>A(be)},[In((te(),ft(w(yn),{class:se(["arrow-up",w(r).be("spinner","arrow")])},{default:ge(()=>[de(w(H3))]),_:1},8,["class"])),[[w(MT),W]]),In((te(),ft(w(yn),{class:se(["arrow-down",w(r).be("spinner","arrow")])},{default:ge(()=>[de(w(ah))]),_:1},8,["class"])),[[w(MT),j]]),V("ul",{class:se(w(r).be("spinner","list"))},[(te(!0),me(hn,null,Kn(w(C)[be],(we,pe)=>(te(),me("li",{key:pe,class:se([w(r).be("spinner","item"),w(r).is("active",we===w(_)[be]),w(r).is("disabled",w(b)[be][we])])},[typeof we=="number"?(te(),me(hn,{key:0},[be==="hours"?(te(),me(hn,{key:0},[$t(Xe(("0"+(ee.amPmMode?we%12||12:we)).slice(-2))+Xe(E(we)),1)],64)):(te(),me(hn,{key:1},[$t(Xe(("0"+we).slice(-2)),1)],64))],64)):Ge("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Ge("v-if",!0)],2))}});var wD=Kt(p1e,[["__file","basic-time-spinner.vue"]]);const v1e=Be({__name:"panel-time-pick",props:n1e,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const n=e,r=un("EP_PICKER_BASE"),{arrowControl:i,disabledHours:a,disabledMinutes:o,disabledSeconds:s,defaultValue:l}=r.props,{getAvailableHours:c,getAvailableMinutes:h,getAvailableSeconds:f}=Iq(a,o,s),p=Rt("time"),{t:v,lang:_}=Sr(),b=le([0,2]),C=Lq(n),T=X(()=>aa(n.actualVisible)?`${p.namespace.value}-zoom-in-top`:""),E=X(()=>n.format.includes("ss")),A=X(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),I=re=>{const ee=jn(re).locale(_.value),oe=ue(ee);return ee.isSame(oe)},O=()=>{t("pick",C.value,!1)},B=(re=!1,ee=!1)=>{ee||t("pick",n.parsedValue,re)},N=re=>{if(!n.visible)return;const ee=ue(re).millisecond(0);t("pick",ee,!0)},H=(re,ee)=>{t("select-range",re,ee),b.value=[re,ee]},j=re=>{const ee=[0,3].concat(E.value?[6]:[]),oe=["hours","minutes"].concat(E.value?["seconds"]:[]),we=(ee.indexOf(b.value[0])+re+ee.length)%ee.length;U.start_emitSelectRange(oe[we])},W=re=>{const ee=re.code,{left:oe,right:be,up:we,down:pe}=En;if([oe,be].includes(ee)){j(ee===oe?-1:1),re.preventDefault();return}if([we,pe].includes(ee)){const Ce=ee===we?-1:1;U.start_scrollDown(Ce),re.preventDefault();return}},{timePickerOptions:U,onSetOption:Y,getAvailableTime:ie}=Aq({getAvailableHours:c,getAvailableMinutes:h,getAvailableSeconds:f}),ue=re=>ie(re,n.datetimeRole||"",!0),J=re=>re?jn(re,n.format).locale(_.value):null,q=re=>re?re.format(n.format):null,ce=()=>jn(l).locale(_.value);return t("set-picker-option",["isValidValue",I]),t("set-picker-option",["formatToString",q]),t("set-picker-option",["parseUserInput",J]),t("set-picker-option",["handleKeydownInput",W]),t("set-picker-option",["getRangeAvailableTime",ue]),t("set-picker-option",["getDefaultValue",ce]),(re,ee)=>(te(),ft(Ka,{name:w(T)},{default:ge(()=>[re.actualVisible||re.visible?(te(),me("div",{key:0,class:se(w(p).b("panel"))},[V("div",{class:se([w(p).be("panel","content"),{"has-seconds":w(E)}])},[de(wD,{ref:"spinner",role:re.datetimeRole||"start","arrow-control":w(i),"show-seconds":w(E),"am-pm-mode":w(A),"spinner-date":re.parsedValue,"disabled-hours":w(a),"disabled-minutes":w(o),"disabled-seconds":w(s),onChange:N,onSetOption:w(Y),onSelectRange:H},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),V("div",{class:se(w(p).be("panel","footer"))},[V("button",{type:"button",class:se([w(p).be("panel","btn"),"cancel"]),onClick:O},Xe(w(v)("el.datepicker.cancel")),3),V("button",{type:"button",class:se([w(p).be("panel","btn"),"confirm"]),onClick:oe=>B()},Xe(w(v)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Ge("v-if",!0)]),_:1},8,["name"]))}});var kT=Kt(v1e,[["__file","panel-time-pick.vue"]]);const m1e=Wt({...kq,parsedValue:{type:Qe(Array)}}),g1e=Be({__name:"panel-time-range",props:m1e,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const n=e,r=(Ne,dt)=>{const Le=[];for(let ze=Ne;ze<=dt;ze++)Le.push(ze);return Le},{t:i,lang:a}=Sr(),o=Rt("time"),s=Rt("picker"),l=un("EP_PICKER_BASE"),{arrowControl:c,disabledHours:h,disabledMinutes:f,disabledSeconds:p,defaultValue:v}=l.props,_=X(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),I.value?"has-seconds":""]),b=X(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),I.value?"has-seconds":""]),C=X(()=>n.parsedValue[0]),T=X(()=>n.parsedValue[1]),E=Lq(n),A=()=>{t("pick",E.value,!1)},I=X(()=>n.format.includes("ss")),O=X(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),B=(Ne=!1)=>{t("pick",[C.value,T.value],Ne)},N=Ne=>{W(Ne.millisecond(0),T.value)},H=Ne=>{W(C.value,Ne.millisecond(0))},j=Ne=>{const dt=Ne.map(ze=>jn(ze).locale(a.value)),Le=be(dt);return dt[0].isSame(Le[0])&&dt[1].isSame(Le[1])},W=(Ne,dt)=>{t("pick",[Ne,dt],!0)},U=X(()=>C.value>T.value),Y=le([0,2]),ie=(Ne,dt)=>{t("select-range",Ne,dt,"min"),Y.value=[Ne,dt]},ue=X(()=>I.value?11:8),J=(Ne,dt)=>{t("select-range",Ne,dt,"max");const Le=w(ue);Y.value=[Ne+Le,dt+Le]},q=Ne=>{const dt=I.value?[0,3,6,11,14,17]:[0,3,8,11],Le=["hours","minutes"].concat(I.value?["seconds"]:[]),ct=(dt.indexOf(Y.value[0])+Ne+dt.length)%dt.length,Lt=dt.length/2;ct<Lt?Ve.start_emitSelectRange(Le[ct]):Ve.end_emitSelectRange(Le[ct-Lt])},ce=Ne=>{const dt=Ne.code,{left:Le,right:ze,up:ct,down:Lt}=En;if([Le,ze].includes(dt)){q(dt===Le?-1:1),Ne.preventDefault();return}if([ct,Lt].includes(dt)){const lt=dt===ct?-1:1,Ct=Y.value[0]<ue.value?"start":"end";Ve[`${Ct}_scrollDown`](lt),Ne.preventDefault();return}},re=(Ne,dt)=>{const Le=h?h(Ne):[],ze=Ne==="start",Lt=(dt||(ze?T.value:C.value)).hour(),lt=ze?r(Lt+1,23):r(0,Lt-1);return YA(Le,lt)},ee=(Ne,dt,Le)=>{const ze=f?f(Ne,dt):[],ct=dt==="start",Lt=Le||(ct?T.value:C.value),lt=Lt.hour();if(Ne!==lt)return ze;const Ct=Lt.minute(),_t=ct?r(Ct+1,59):r(0,Ct-1);return YA(ze,_t)},oe=(Ne,dt,Le,ze)=>{const ct=p?p(Ne,dt,Le):[],Lt=Le==="start",lt=ze||(Lt?T.value:C.value),Ct=lt.hour(),_t=lt.minute();if(Ne!==Ct||dt!==_t)return ct;const It=lt.second(),Bt=Lt?r(It+1,59):r(0,It-1);return YA(ct,Bt)},be=([Ne,dt])=>[et(Ne,"start",!0,dt),et(dt,"end",!1,Ne)],{getAvailableHours:we,getAvailableMinutes:pe,getAvailableSeconds:Ce}=Iq(re,ee,oe),{timePickerOptions:Ve,getAvailableTime:et,onSetOption:Ee}=Aq({getAvailableHours:we,getAvailableMinutes:pe,getAvailableSeconds:Ce}),Je=Ne=>Ne?sn(Ne)?Ne.map(dt=>jn(dt,n.format).locale(a.value)):jn(Ne,n.format).locale(a.value):null,Ue=Ne=>Ne?sn(Ne)?Ne.map(dt=>dt.format(n.format)):Ne.format(n.format):null,yt=()=>{if(sn(v))return v.map(dt=>jn(dt).locale(a.value));const Ne=jn(v).locale(a.value);return[Ne,Ne.add(60,"m")]};return t("set-picker-option",["formatToString",Ue]),t("set-picker-option",["parseUserInput",Je]),t("set-picker-option",["isValidValue",j]),t("set-picker-option",["handleKeydownInput",ce]),t("set-picker-option",["getDefaultValue",yt]),t("set-picker-option",["getRangeAvailableTime",be]),(Ne,dt)=>Ne.actualVisible?(te(),me("div",{key:0,class:se([w(o).b("range-picker"),w(s).b("panel")])},[V("div",{class:se(w(o).be("range-picker","content"))},[V("div",{class:se(w(o).be("range-picker","cell"))},[V("div",{class:se(w(o).be("range-picker","header"))},Xe(w(i)("el.datepicker.startTime")),3),V("div",{class:se(w(_))},[de(wD,{ref:"minSpinner",role:"start","show-seconds":w(I),"am-pm-mode":w(O),"arrow-control":w(c),"spinner-date":w(C),"disabled-hours":re,"disabled-minutes":ee,"disabled-seconds":oe,onChange:N,onSetOption:w(Ee),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),V("div",{class:se(w(o).be("range-picker","cell"))},[V("div",{class:se(w(o).be("range-picker","header"))},Xe(w(i)("el.datepicker.endTime")),3),V("div",{class:se(w(b))},[de(wD,{ref:"maxSpinner",role:"end","show-seconds":w(I),"am-pm-mode":w(O),"arrow-control":w(c),"spinner-date":w(T),"disabled-hours":re,"disabled-minutes":ee,"disabled-seconds":oe,onChange:H,onSetOption:w(Ee),onSelectRange:J},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),V("div",{class:se(w(o).be("panel","footer"))},[V("button",{type:"button",class:se([w(o).be("panel","btn"),"cancel"]),onClick:Le=>A()},Xe(w(i)("el.datepicker.cancel")),11,["onClick"]),V("button",{type:"button",class:se([w(o).be("panel","btn"),"confirm"]),disabled:w(U),onClick:Le=>B()},Xe(w(i)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ge("v-if",!0)}});var y1e=Kt(g1e,[["__file","panel-time-range.vue"]]);jn.extend(x5);var _1e=Be({name:"ElTimePicker",install:null,props:{...S5,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,t){const n=le(),[r,i]=e.isRange?["timerange",y1e]:["time",kT],a=o=>t.emit("update:modelValue",o);return pr("ElPopperOptions",e.popperOptions),t.expose({focus:o=>{var s;(s=n.value)==null||s.handleFocusInput(o)},blur:o=>{var s;(s=n.value)==null||s.handleBlurInput(o)},handleOpen:()=>{var o;(o=n.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=n.value)==null||o.handleClose()}}),()=>{var o;const s=(o=e.format)!=null?o:dD;return de(Eq,sr(e,{ref:n,type:r,format:s,"onUpdate:modelValue":a}),{default:l=>de(i,l,null)})}}});const b1e=Wn(_1e),w1e=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return Cf(t).map((r,i)=>n-(t-i-1))},x1e=e=>{const t=e.daysInMonth();return Cf(t).map((n,r)=>r+1)},S1e=e=>Cf(e.length/7).map(t=>{const n=t*7;return e.slice(n,n+7)}),C1e=Wt({selectedDay:{type:Qe(Object)},range:{type:Qe(Array)},date:{type:Qe(Object),required:!0},hideHeader:{type:Boolean}}),T1e={pick:e=>nr(e)};var $q={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r,i){var a=r.prototype,o=function(f){return f&&(f.indexOf?f:f.s)},s=function(f,p,v,_,b){var C=f.name?f:f.$locale(),T=o(C[p]),E=o(C[v]),A=T||E.map(function(O){return O.slice(0,_)});if(!b)return A;var I=C.weekStart;return A.map(function(O,B){return A[(B+(I||0))%7]})},l=function(){return i.Ls[i.locale()]},c=function(f,p){return f.formats[p]||function(v){return v.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(_,b,C){return b||C.slice(1)})}(f.formats[p.toUpperCase()])},h=function(){var f=this;return{months:function(p){return p?p.format("MMMM"):s(f,"months")},monthsShort:function(p){return p?p.format("MMM"):s(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(p){return p?p.format("dddd"):s(f,"weekdays")},weekdaysMin:function(p){return p?p.format("dd"):s(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(p){return p?p.format("ddd"):s(f,"weekdaysShort","weekdays",3)},longDateFormat:function(p){return c(f.$locale(),p)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return h.bind(this)()},i.localeData=function(){var f=l();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(p){return c(f,p)},meridiem:f.meridiem,ordinal:f.ordinal}},i.months=function(){return s(l(),"months")},i.monthsShort=function(){return s(l(),"monthsShort","months",3)},i.weekdays=function(f){return s(l(),"weekdays",null,null,f)},i.weekdaysShort=function(f){return s(l(),"weekdaysShort","weekdays",3,f)},i.weekdaysMin=function(f){return s(l(),"weekdaysMin","weekdays",2,f)}}})})($q);var M1e=$q.exports;const Vq=oc(M1e),k1e=(e,t)=>{jn.extend(Vq);const n=jn.localeData().firstDayOfWeek(),{t:r,lang:i}=Sr(),a=jn().locale(i.value),o=X(()=>!!e.range&&!!e.range.length),s=X(()=>{let p=[];if(o.value){const[v,_]=e.range,b=Cf(_.date()-v.date()+1).map(E=>({text:v.date()+E,type:"current"}));let C=b.length%7;C=C===0?0:7-C;const T=Cf(C).map((E,A)=>({text:A+1,type:"next"}));p=b.concat(T)}else{const v=e.date.startOf("month").day(),_=w1e(e.date,(v-n+7)%7).map(E=>({text:E,type:"prev"})),b=x1e(e.date).map(E=>({text:E,type:"current"}));p=[..._,...b];const C=7-(p.length%7||7),T=Cf(C).map((E,A)=>({text:A+1,type:"next"}));p=p.concat(T)}return S1e(p)}),l=X(()=>{const p=n;return p===0?XA.map(v=>r(`el.datepicker.weeks.${v}`)):XA.slice(p).concat(XA.slice(0,p)).map(v=>r(`el.datepicker.weeks.${v}`))}),c=(p,v)=>{switch(v){case"prev":return e.date.startOf("month").subtract(1,"month").date(p);case"next":return e.date.startOf("month").add(1,"month").date(p);case"current":return e.date.date(p)}};return{now:a,isInRange:o,rows:s,weekDays:l,getFormattedDate:c,handlePickDay:({text:p,type:v})=>{const _=c(p,v);t("pick",_)},getSlotData:({text:p,type:v})=>{const _=c(p,v);return{isSelected:_.isSame(e.selectedDay),type:`${v}-month`,day:_.format("YYYY-MM-DD"),date:_.toDate()}}}},E1e=Be({name:"DateTable"}),A1e=Be({...E1e,props:C1e,emits:T1e,setup(e,{expose:t,emit:n}){const r=e,{isInRange:i,now:a,rows:o,weekDays:s,getFormattedDate:l,handlePickDay:c,getSlotData:h}=k1e(r,n),f=Rt("calendar-table"),p=Rt("calendar-day"),v=({text:_,type:b})=>{const C=[b];if(b==="current"){const T=l(_,b);T.isSame(r.selectedDay,"day")&&C.push(p.is("selected")),T.isSame(a,"day")&&C.push(p.is("today"))}return C};return t({getFormattedDate:l}),(_,b)=>(te(),me("table",{class:se([w(f).b(),w(f).is("range",w(i))]),cellspacing:"0",cellpadding:"0"},[_.hideHeader?Ge("v-if",!0):(te(),me("thead",{key:0},[(te(!0),me(hn,null,Kn(w(s),C=>(te(),me("th",{key:C},Xe(C),1))),128))])),V("tbody",null,[(te(!0),me(hn,null,Kn(w(o),(C,T)=>(te(),me("tr",{key:T,class:se({[w(f).e("row")]:!0,[w(f).em("row","hide-border")]:T===0&&_.hideHeader})},[(te(!0),me(hn,null,Kn(C,(E,A)=>(te(),me("td",{key:A,class:se(v(E)),onClick:I=>w(c)(E)},[V("div",{class:se(w(p).b())},[st(_.$slots,"date-cell",{data:w(h)(E)},()=>[V("span",null,Xe(E.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var F6=Kt(A1e,[["__file","date-table.vue"]]);const P1e=(e,t)=>{const n=e.endOf("month"),r=t.startOf("month"),a=n.isSame(r,"week")?r.add(1,"week"):r;return[[e,n],[a.startOf("week"),t]]},I1e=(e,t)=>{const n=e.endOf("month"),r=e.add(1,"month").startOf("month"),i=n.isSame(r,"week")?r.add(1,"week"):r,a=i.endOf("month"),o=t.startOf("month"),s=a.isSame(o,"week")?o.add(1,"week"):o;return[[e,n],[i.startOf("week"),a],[s.startOf("week"),t]]},L1e=(e,t,n)=>{const{lang:r}=Sr(),i=le(),a=jn().locale(r.value),o=X({get(){return e.modelValue?l.value:i.value},set(C){if(!C)return;i.value=C;const T=C.toDate();t(_s,T),t(tr,T)}}),s=X(()=>{if(!e.range)return[];const C=e.range.map(A=>jn(A).locale(r.value)),[T,E]=C;return T.isAfter(E)?[]:T.isSame(E,"month")?v(T,E):T.add(1,"month").month()!==E.month()?[]:v(T,E)}),l=X(()=>e.modelValue?jn(e.modelValue).locale(r.value):o.value||(s.value.length?s.value[0][0]:a)),c=X(()=>l.value.subtract(1,"month").date(1)),h=X(()=>l.value.add(1,"month").date(1)),f=X(()=>l.value.subtract(1,"year").date(1)),p=X(()=>l.value.add(1,"year").date(1)),v=(C,T)=>{const E=C.startOf("week"),A=T.endOf("week"),I=E.get("month"),O=A.get("month");return I===O?[[E,A]]:(I+1)%12===O?P1e(E,A):I+2===O||(I+1)%11===O?I1e(E,A):[]},_=C=>{o.value=C};return{calculateValidatedDateRange:v,date:l,realSelectedDay:o,pickDay:_,selectDate:C=>{const E={"prev-month":c.value,"next-month":h.value,"prev-year":f.value,"next-year":p.value,today:a}[C];E.isSame(l.value,"day")||_(E)},validatedRange:s}},D1e=e=>sn(e)&&e.length===2&&e.every(t=>Kv(t)),R1e=Wt({modelValue:{type:Date},range:{type:Qe(Array),validator:D1e}}),O1e={[tr]:e=>Kv(e),[_s]:e=>Kv(e)},z1e="ElCalendar",B1e=Be({name:z1e}),F1e=Be({...B1e,props:R1e,emits:O1e,setup(e,{expose:t,emit:n}){const r=e,i=Rt("calendar"),{calculateValidatedDateRange:a,date:o,pickDay:s,realSelectedDay:l,selectDate:c,validatedRange:h}=L1e(r,n),{t:f}=Sr(),p=X(()=>{const v=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${f("el.datepicker.year")} ${f(v)}`});return t({selectedDay:l,pickDay:s,selectDate:c,calculateValidatedDateRange:a}),(v,_)=>(te(),me("div",{class:se(w(i).b())},[V("div",{class:se(w(i).e("header"))},[st(v.$slots,"header",{date:w(p)},()=>[V("div",{class:se(w(i).e("title"))},Xe(w(p)),3),w(h).length===0?(te(),me("div",{key:0,class:se(w(i).e("button-group"))},[de(w(wq),null,{default:ge(()=>[de(w(io),{size:"small",onClick:b=>w(c)("prev-month")},{default:ge(()=>[$t(Xe(w(f)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),de(w(io),{size:"small",onClick:b=>w(c)("today")},{default:ge(()=>[$t(Xe(w(f)("el.datepicker.today")),1)]),_:1},8,["onClick"]),de(w(io),{size:"small",onClick:b=>w(c)("next-month")},{default:ge(()=>[$t(Xe(w(f)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):Ge("v-if",!0)])],2),w(h).length===0?(te(),me("div",{key:0,class:se(w(i).e("body"))},[de(F6,{date:w(o),"selected-day":w(l),onPick:w(s)},Zu({_:2},[v.$slots["date-cell"]?{name:"date-cell",fn:ge(b=>[st(v.$slots,"date-cell",Bu(Pf(b)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(te(),me("div",{key:1,class:se(w(i).e("body"))},[(te(!0),me(hn,null,Kn(w(h),(b,C)=>(te(),ft(F6,{key:C,date:b[0],"selected-day":w(l),range:b,"hide-header":C!==0,onPick:w(s)},Zu({_:2},[v.$slots["date-cell"]?{name:"date-cell",fn:ge(T=>[st(v.$slots,"date-cell",Bu(Pf(T)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var N1e=Kt(F1e,[["__file","calendar.vue"]]);const $1e=Wn(N1e),V1e=Wt({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Qe([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),H1e=Be({name:"ElCard"}),j1e=Be({...H1e,props:V1e,setup(e){const t=Rt("card");return(n,r)=>(te(),me("div",{class:se([w(t).b(),w(t).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(te(),me("div",{key:0,class:se(w(t).e("header"))},[st(n.$slots,"header",{},()=>[$t(Xe(n.header),1)])],2)):Ge("v-if",!0),V("div",{class:se([w(t).e("body"),n.bodyClass]),style:_n(n.bodyStyle)},[st(n.$slots,"default")],6),n.$slots.footer||n.footer?(te(),me("div",{key:1,class:se(w(t).e("footer"))},[st(n.$slots,"footer",{},()=>[$t(Xe(n.footer),1)])],2)):Ge("v-if",!0)],2))}});var U1e=Kt(j1e,[["__file","card.vue"]]);const W1e=Wn(U1e),G1e=Wt({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),K1e={change:(e,t)=>[e,t].every(zn)},Hq=Symbol("carouselContextKey"),xD="ElCarouselItem",N6=300,q1e=(e,t,n)=>{const{children:r,addChild:i,removeChild:a}=p5(er(),xD),o=qa(),s=le(-1),l=le(null),c=le(!1),h=le(),f=le(0),p=le(!0),v=le(!0),_=le(!1),b=X(()=>e.arrow!=="never"&&!w(E)),C=X(()=>r.value.some(et=>et.props.label.toString().length>0)),T=X(()=>e.type==="card"),E=X(()=>e.direction==="vertical"),A=X(()=>e.height!=="auto"?{height:e.height}:{height:`${f.value}px`,overflow:"hidden"}),I=Lv(et=>{W(et)},N6,{trailing:!0}),O=Lv(et=>{ee(et)},N6),B=et=>p.value?s.value<=1?et<=1:et>1:!0;function N(){l.value&&(clearInterval(l.value),l.value=null)}function H(){e.interval<=0||!e.autoplay||l.value||(l.value=setInterval(()=>j(),e.interval))}const j=()=>{v.value||(_.value=!0),v.value=!1,s.value<r.value.length-1?s.value=s.value+1:e.loop?s.value=0:_.value=!1};function W(et){if(v.value||(_.value=!0),v.value=!1,Ln(et)){const Ue=r.value.filter(yt=>yt.props.name===et);Ue.length>0&&(et=r.value.indexOf(Ue[0]))}if(et=Number(et),Number.isNaN(et)||et!==Math.floor(et))return;const Ee=r.value.length,Je=s.value;et<0?s.value=e.loop?Ee-1:0:et>=Ee?s.value=e.loop?0:Ee-1:s.value=et,Je===s.value&&U(Je),we()}function U(et){r.value.forEach((Ee,Je)=>{Ee.translateItem(Je,s.value,et)})}function Y(et,Ee){var Je,Ue,yt,Ne;const dt=w(r),Le=dt.length;if(Le===0||!et.states.inStage)return!1;const ze=Ee+1,ct=Ee-1,Lt=Le-1,lt=dt[Lt].states.active,Ct=dt[0].states.active,_t=(Ue=(Je=dt[ze])==null?void 0:Je.states)==null?void 0:Ue.active,It=(Ne=(yt=dt[ct])==null?void 0:yt.states)==null?void 0:Ne.active;return Ee===Lt&&Ct||_t?"left":Ee===0&&lt||It?"right":!1}function ie(){c.value=!0,e.pauseOnHover&&N()}function ue(){c.value=!1,H()}function J(){_.value=!1}function q(et){w(E)||r.value.forEach((Ee,Je)=>{et===Y(Ee,Je)&&(Ee.states.hover=!0)})}function ce(){w(E)||r.value.forEach(et=>{et.states.hover=!1})}function re(et){et!==s.value&&(v.value||(_.value=!0)),s.value=et}function ee(et){e.trigger==="hover"&&et!==s.value&&(s.value=et,v.value||(_.value=!0))}function oe(){W(s.value-1)}function be(){W(s.value+1)}function we(){N(),e.pauseOnHover||H()}function pe(et){e.height==="auto"&&(f.value=et)}function Ce(){var et;const Ee=(et=o.default)==null?void 0:et.call(o);if(!Ee)return null;const Ue=xf(Ee).filter(yt=>Oi(yt)&&yt.type.name===xD);return(Ue==null?void 0:Ue.length)===2&&e.loop&&!T.value?(p.value=!0,Ue):(p.value=!1,null)}At(()=>s.value,(et,Ee)=>{U(Ee),p.value&&(et=et%2,Ee=Ee%2),Ee>-1&&t("change",et,Ee)}),At(()=>e.autoplay,et=>{et?H():N()}),At(()=>e.loop,()=>{W(s.value)}),At(()=>e.interval,()=>{we()});const Ve=_i();return Un(()=>{At(()=>r.value,()=>{r.value.length>0&&W(e.initialIndex)},{immediate:!0}),Ve.value=Hi(h.value,()=>{U()}),H()}),ui(()=>{N(),h.value&&Ve.value&&Ve.value.stop()}),pr(Hq,{root:h,isCardType:T,isVertical:E,items:r,loop:e.loop,cardScale:e.cardScale,addItem:i,removeItem:a,setActiveItem:W,setContainerHeight:pe}),{root:h,activeIndex:s,arrowDisplay:b,hasLabel:C,hover:c,isCardType:T,isTransitioning:_,items:r,isVertical:E,containerStyle:A,isItemsTwoLength:p,handleButtonEnter:q,handleTransitionEnd:J,handleButtonLeave:ce,handleIndicatorClick:re,handleMouseEnter:ie,handleMouseLeave:ue,setActiveItem:W,prev:oe,next:be,PlaceholderItem:Ce,isTwoLengthShow:B,throttledArrowClick:I,throttledIndicatorHover:O}},Z1e="ElCarousel",Y1e=Be({name:Z1e}),X1e=Be({...Y1e,props:G1e,emits:K1e,setup(e,{expose:t,emit:n}){const r=e,{root:i,activeIndex:a,arrowDisplay:o,hasLabel:s,hover:l,isCardType:c,items:h,isVertical:f,containerStyle:p,handleButtonEnter:v,handleButtonLeave:_,isTransitioning:b,handleIndicatorClick:C,handleMouseEnter:T,handleMouseLeave:E,handleTransitionEnd:A,setActiveItem:I,prev:O,next:B,PlaceholderItem:N,isTwoLengthShow:H,throttledArrowClick:j,throttledIndicatorHover:W}=q1e(r,n),U=Rt("carousel"),{t:Y}=Sr(),ie=X(()=>{const q=[U.b(),U.m(r.direction)];return w(c)&&q.push(U.m("card")),q}),ue=X(()=>{const q=[U.e("container")];return r.motionBlur&&w(b)&&q.push(w(f)?`${U.namespace.value}-transitioning-vertical`:`${U.namespace.value}-transitioning`),q}),J=X(()=>{const q=[U.e("indicators"),U.em("indicators",r.direction)];return w(s)&&q.push(U.em("indicators","labels")),r.indicatorPosition==="outside"&&q.push(U.em("indicators","outside")),w(f)&&q.push(U.em("indicators","right")),q});return t({activeIndex:a,setActiveItem:I,prev:O,next:B}),(q,ce)=>(te(),me("div",{ref_key:"root",ref:i,class:se(w(ie)),onMouseenter:Fn(w(T),["stop"]),onMouseleave:Fn(w(E),["stop"])},[w(o)?(te(),ft(Ka,{key:0,name:"carousel-arrow-left",persisted:""},{default:ge(()=>[In(V("button",{type:"button",class:se([w(U).e("arrow"),w(U).em("arrow","left")]),"aria-label":w(Y)("el.carousel.leftArrow"),onMouseenter:re=>w(v)("left"),onMouseleave:w(_),onClick:Fn(re=>w(j)(w(a)-1),["stop"])},[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Lr,(q.arrow==="always"||w(l))&&(r.loop||w(a)>0)]])]),_:1})):Ge("v-if",!0),w(o)?(te(),ft(Ka,{key:1,name:"carousel-arrow-right",persisted:""},{default:ge(()=>[In(V("button",{type:"button",class:se([w(U).e("arrow"),w(U).em("arrow","right")]),"aria-label":w(Y)("el.carousel.rightArrow"),onMouseenter:re=>w(v)("right"),onMouseleave:w(_),onClick:Fn(re=>w(j)(w(a)+1),["stop"])},[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Lr,(q.arrow==="always"||w(l))&&(r.loop||w(a)<w(h).length-1)]])]),_:1})):Ge("v-if",!0),V("div",{class:se(w(ue)),style:_n(w(p)),onTransitionend:w(A)},[de(w(N)),st(q.$slots,"default")],46,["onTransitionend"]),q.indicatorPosition!=="none"?(te(),me("ul",{key:2,class:se(w(J))},[(te(!0),me(hn,null,Kn(w(h),(re,ee)=>In((te(),me("li",{key:ee,class:se([w(U).e("indicator"),w(U).em("indicator",q.direction),w(U).is("active",ee===w(a))]),onMouseenter:oe=>w(W)(ee),onClick:Fn(oe=>w(C)(ee),["stop"])},[V("button",{class:se(w(U).e("button")),"aria-label":w(Y)("el.carousel.indicator",{index:ee+1})},[w(s)?(te(),me("span",{key:0},Xe(re.props.label),1)):Ge("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Lr,w(H)(ee)]])),128))],2)):Ge("v-if",!0),r.motionBlur?(te(),me("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[V("defs",null,[V("filter",{id:"elCarouselHorizontal"},[V("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),V("filter",{id:"elCarouselVertical"},[V("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):Ge("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var J1e=Kt(X1e,[["__file","carousel.vue"]]);const Q1e=Wt({name:{type:String,default:""},label:{type:[String,Number],default:""}}),ewe=e=>{const t=un(Hq),n=er(),r=le(),i=le(!1),a=le(0),o=le(1),s=le(!1),l=le(!1),c=le(!1),h=le(!1),{isCardType:f,isVertical:p,cardScale:v}=t;function _(A,I,O){const B=O-1,N=I-1,H=I+1,j=O/2;return I===0&&A===B?-1:I===B&&A===0?O:A<N&&I-A>=j?O+1:A>H&&A-I>=j?-2:A}function b(A,I){var O,B;const N=w(p)?((O=t.root.value)==null?void 0:O.offsetHeight)||0:((B=t.root.value)==null?void 0:B.offsetWidth)||0;return c.value?N*((2-v)*(A-I)+1)/4:A<I?-(1+v)*N/4:(3+v)*N/4}function C(A,I,O){const B=t.root.value;return B?((O?B.offsetHeight:B.offsetWidth)||0)*(A-I):0}const T=(A,I,O)=>{var B;const N=w(f),H=(B=t.items.value.length)!=null?B:Number.NaN,j=A===I;!N&&!aa(O)&&(h.value=j||A===O),!j&&H>2&&t.loop&&(A=_(A,I,H));const W=w(p);s.value=j,N?(c.value=Math.round(Math.abs(A-I))<=1,a.value=b(A,I),o.value=w(s)?1:v):a.value=C(A,I,W),l.value=!0,j&&r.value&&t.setContainerHeight(r.value.offsetHeight)};function E(){if(t&&w(f)){const A=t.items.value.findIndex(({uid:I})=>I===n.uid);t.setActiveItem(A)}}return Un(()=>{t.addItem({props:e,states:Ar({hover:i,translate:a,scale:o,active:s,ready:l,inStage:c,animating:h}),uid:n.uid,translateItem:T})}),Wf(()=>{t.removeItem(n.uid)}),{carouselItemRef:r,active:s,animating:h,hover:i,inStage:c,isVertical:p,translate:a,isCardType:f,scale:o,ready:l,handleItemClick:E}},twe=Be({name:xD}),nwe=Be({...twe,props:Q1e,setup(e){const t=e,n=Rt("carousel"),{carouselItemRef:r,active:i,animating:a,hover:o,inStage:s,isVertical:l,translate:c,isCardType:h,scale:f,ready:p,handleItemClick:v}=ewe(t),_=X(()=>[n.e("item"),n.is("active",i.value),n.is("in-stage",s.value),n.is("hover",o.value),n.is("animating",a.value),{[n.em("item","card")]:h.value,[n.em("item","card-vertical")]:h.value&&l.value}]),b=X(()=>{const T=`${`translate${w(l)?"Y":"X"}`}(${w(c)}px)`,E=`scale(${w(f)})`;return{transform:[T,E].join(" ")}});return(C,T)=>In((te(),me("div",{ref_key:"carouselItemRef",ref:r,class:se(w(_)),style:_n(w(b)),onClick:w(v)},[w(h)?In((te(),me("div",{key:0,class:se(w(n).e("mask"))},null,2)),[[Lr,!w(i)]]):Ge("v-if",!0),st(C.$slots,"default")],14,["onClick"])),[[Lr,w(p)]])}});var jq=Kt(nwe,[["__file","carousel-item.vue"]]);const rwe=Wn(J1e,{CarouselItem:jq}),iwe=Ki(jq),Uq={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:$a,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...yo(["ariaControls"])},Wq={[tr]:e=>Ln(e)||zn(e)||pa(e),change:e=>Ln(e)||zn(e)||pa(e)},I0=Symbol("checkboxGroupContextKey"),awe=({model:e,isChecked:t})=>{const n=un(I0,void 0),r=X(()=>{var a,o;const s=(a=n==null?void 0:n.max)==null?void 0:a.value,l=(o=n==null?void 0:n.min)==null?void 0:o.value;return!aa(s)&&e.value.length>=s&&!t.value||!aa(l)&&e.value.length<=l&&t.value});return{isDisabled:Ts(X(()=>(n==null?void 0:n.disabled.value)||r.value)),isLimitDisabled:r}},owe=(e,{model:t,isLimitExceeded:n,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:a})=>{const o=un(I0,void 0),{formItem:s}=es(),{emit:l}=er();function c(_){var b,C,T,E;return[!0,e.trueValue,e.trueLabel].includes(_)?(C=(b=e.trueValue)!=null?b:e.trueLabel)!=null?C:!0:(E=(T=e.falseValue)!=null?T:e.falseLabel)!=null?E:!1}function h(_,b){l("change",c(_),b)}function f(_){if(n.value)return;const b=_.target;l("change",c(b.checked),_)}async function p(_){n.value||!r.value&&!i.value&&a.value&&(_.composedPath().some(T=>T.tagName==="LABEL")||(t.value=c([!1,e.falseValue,e.falseLabel].includes(t.value)),await bn(),h(t.value,_)))}const v=X(()=>(o==null?void 0:o.validateEvent)||e.validateEvent);return At(()=>e.modelValue,()=>{v.value&&(s==null||s.validate("change").catch(_=>void 0))}),{handleChange:f,onClickRoot:p}},swe=e=>{const t=le(!1),{emit:n}=er(),r=un(I0,void 0),i=X(()=>aa(r)===!1),a=le(!1),o=X({get(){var s,l;return i.value?(s=r==null?void 0:r.modelValue)==null?void 0:s.value:(l=e.modelValue)!=null?l:t.value},set(s){var l,c;i.value&&sn(s)?(a.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&s.length>(r==null?void 0:r.max.value)&&s.length>o.value.length,a.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,s))):(n(tr,s),t.value=s)}});return{model:o,isGroup:i,isLimitExceeded:a}},lwe=(e,t,{model:n})=>{const r=un(I0,void 0),i=le(!1),a=X(()=>Jv(e.value)?e.label:e.value),o=X(()=>{const h=n.value;return pa(h)?h:sn(h)?nr(a.value)?h.map(ei).some(f=>Yo(f,a.value)):h.map(ei).includes(a.value):h!=null?h===e.trueValue||h===e.trueLabel:!!h}),s=Ea(X(()=>{var h;return(h=r==null?void 0:r.size)==null?void 0:h.value}),{prop:!0}),l=Ea(X(()=>{var h;return(h=r==null?void 0:r.size)==null?void 0:h.value})),c=X(()=>!!t.default||!Jv(a.value));return{checkboxButtonSize:s,isChecked:o,isFocused:i,checkboxSize:l,hasOwnLabel:c,actualValue:a}},Gq=(e,t)=>{const{formItem:n}=es(),{model:r,isGroup:i,isLimitExceeded:a}=swe(e),{isFocused:o,isChecked:s,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:h,actualValue:f}=lwe(e,t,{model:r}),{isDisabled:p}=awe({model:r,isChecked:s}),{inputId:v,isLabeledByFormItem:_}=ac(e,{formItemContext:n,disableIdGeneration:h,disableIdManagement:i}),{handleChange:b,onClickRoot:C}=owe(e,{model:r,isLimitExceeded:a,hasOwnLabel:h,isDisabled:p,isLabeledByFormItem:_});return(()=>{function E(){var A,I;sn(r.value)&&!r.value.includes(f.value)?r.value.push(f.value):r.value=(I=(A=e.trueValue)!=null?A:e.trueLabel)!=null?I:!0}e.checked&&E()})(),Sf({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},X(()=>i.value&&Jv(e.value))),Sf({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},X(()=>!!e.trueLabel)),Sf({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},X(()=>!!e.falseLabel)),{inputId:v,isLabeledByFormItem:_,isChecked:s,isDisabled:p,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:h,model:r,actualValue:f,handleChange:b,onClickRoot:C}},uwe=Be({name:"ElCheckbox"}),cwe=Be({...uwe,props:Uq,emits:Wq,setup(e){const t=e,n=qa(),{inputId:r,isLabeledByFormItem:i,isChecked:a,isDisabled:o,isFocused:s,checkboxSize:l,hasOwnLabel:c,model:h,actualValue:f,handleChange:p,onClickRoot:v}=Gq(t,n),_=Rt("checkbox"),b=X(()=>[_.b(),_.m(l.value),_.is("disabled",o.value),_.is("bordered",t.border),_.is("checked",a.value)]),C=X(()=>[_.e("input"),_.is("disabled",o.value),_.is("checked",a.value),_.is("indeterminate",t.indeterminate),_.is("focus",s.value)]);return(T,E)=>(te(),ft(ir(!w(c)&&w(i)?"span":"label"),{class:se(w(b)),"aria-controls":T.indeterminate?T.ariaControls:null,onClick:w(v)},{default:ge(()=>{var A,I;return[V("span",{class:se(w(C))},[T.trueValue||T.falseValue||T.trueLabel||T.falseLabel?In((te(),me("input",{key:0,id:w(r),"onUpdate:modelValue":O=>li(h)?h.value=O:null,class:se(w(_).e("original")),type:"checkbox",indeterminate:T.indeterminate,name:T.name,tabindex:T.tabindex,disabled:w(o),"true-value":(A=T.trueValue)!=null?A:T.trueLabel,"false-value":(I=T.falseValue)!=null?I:T.falseLabel,onChange:w(p),onFocus:O=>s.value=!0,onBlur:O=>s.value=!1,onClick:Fn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[Fu,w(h)]]):In((te(),me("input",{key:1,id:w(r),"onUpdate:modelValue":O=>li(h)?h.value=O:null,class:se(w(_).e("original")),type:"checkbox",indeterminate:T.indeterminate,disabled:w(o),value:w(f),name:T.name,tabindex:T.tabindex,onChange:w(p),onFocus:O=>s.value=!0,onBlur:O=>s.value=!1,onClick:Fn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[Fu,w(h)]]),V("span",{class:se(w(_).e("inner"))},null,2)],2),w(c)?(te(),me("span",{key:0,class:se(w(_).e("label"))},[st(T.$slots,"default"),T.$slots.default?Ge("v-if",!0):(te(),me(hn,{key:0},[$t(Xe(T.label),1)],64))],2)):Ge("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var dwe=Kt(cwe,[["__file","checkbox.vue"]]);const hwe=Be({name:"ElCheckboxButton"}),fwe=Be({...hwe,props:Uq,emits:Wq,setup(e){const t=e,n=qa(),{isFocused:r,isChecked:i,isDisabled:a,checkboxButtonSize:o,model:s,actualValue:l,handleChange:c}=Gq(t,n),h=un(I0,void 0),f=Rt("checkbox"),p=X(()=>{var _,b,C,T;const E=(b=(_=h==null?void 0:h.fill)==null?void 0:_.value)!=null?b:"";return{backgroundColor:E,borderColor:E,color:(T=(C=h==null?void 0:h.textColor)==null?void 0:C.value)!=null?T:"",boxShadow:E?`-1px 0 0 0 ${E}`:void 0}}),v=X(()=>[f.b("button"),f.bm("button",o.value),f.is("disabled",a.value),f.is("checked",i.value),f.is("focus",r.value)]);return(_,b)=>{var C,T;return te(),me("label",{class:se(w(v))},[_.trueValue||_.falseValue||_.trueLabel||_.falseLabel?In((te(),me("input",{key:0,"onUpdate:modelValue":E=>li(s)?s.value=E:null,class:se(w(f).be("button","original")),type:"checkbox",name:_.name,tabindex:_.tabindex,disabled:w(a),"true-value":(C=_.trueValue)!=null?C:_.trueLabel,"false-value":(T=_.falseValue)!=null?T:_.falseLabel,onChange:w(c),onFocus:E=>r.value=!0,onBlur:E=>r.value=!1,onClick:Fn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[Fu,w(s)]]):In((te(),me("input",{key:1,"onUpdate:modelValue":E=>li(s)?s.value=E:null,class:se(w(f).be("button","original")),type:"checkbox",name:_.name,tabindex:_.tabindex,disabled:w(a),value:w(l),onChange:w(c),onFocus:E=>r.value=!0,onBlur:E=>r.value=!1,onClick:Fn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[Fu,w(s)]]),_.$slots.default||_.label?(te(),me("span",{key:2,class:se(w(f).be("button","inner")),style:_n(w(i)?w(p):void 0)},[st(_.$slots,"default",{},()=>[$t(Xe(_.label),1)])],6)):Ge("v-if",!0)],2)}}});var Kq=Kt(fwe,[["__file","checkbox-button.vue"]]);const pwe=Wt({modelValue:{type:Qe(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:$a,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...yo(["ariaLabel"])}),vwe={[tr]:e=>sn(e),change:e=>sn(e)},mwe=Be({name:"ElCheckboxGroup"}),gwe=Be({...mwe,props:pwe,emits:vwe,setup(e,{emit:t}){const n=e,r=Rt("checkbox"),{formItem:i}=es(),{inputId:a,isLabeledByFormItem:o}=ac(n,{formItemContext:i}),s=async c=>{t(tr,c),await bn(),t("change",c)},l=X({get(){return n.modelValue},set(c){s(c)}});return pr(I0,{...Nu(ao(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:s}),At(()=>n.modelValue,()=>{n.validateEvent&&(i==null||i.validate("change").catch(c=>void 0))}),(c,h)=>{var f;return te(),ft(ir(c.tag),{id:w(a),class:se(w(r).b("group")),role:"group","aria-label":w(o)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":w(o)?(f=w(i))==null?void 0:f.labelId:void 0},{default:ge(()=>[st(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var qq=Kt(gwe,[["__file","checkbox-group.vue"]]);const iu=Wn(dwe,{CheckboxButton:Kq,CheckboxGroup:qq}),ywe=Ki(Kq),Zq=Ki(qq),Yq=Wt({modelValue:{type:[String,Number,Boolean],default:void 0},size:$a,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),_we=Wt({...Yq,border:Boolean}),Xq={[tr]:e=>Ln(e)||zn(e)||pa(e),[ki]:e=>Ln(e)||zn(e)||pa(e)},Jq=Symbol("radioGroupKey"),Qq=(e,t)=>{const n=le(),r=un(Jq,void 0),i=X(()=>!!r),a=X(()=>Jv(e.value)?e.label:e.value),o=X({get(){return i.value?r.modelValue:e.modelValue},set(f){i.value?r.changeEvent(f):t&&t(tr,f),n.value.checked=e.modelValue===a.value}}),s=Ea(X(()=>r==null?void 0:r.size)),l=Ts(X(()=>r==null?void 0:r.disabled)),c=le(!1),h=X(()=>l.value||i.value&&o.value!==a.value?-1:0);return Sf({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},X(()=>i.value&&Jv(e.value))),{radioRef:n,isGroup:i,radioGroup:r,focus:c,size:s,disabled:l,tabIndex:h,modelValue:o,actualValue:a}},bwe=Be({name:"ElRadio"}),wwe=Be({...bwe,props:_we,emits:Xq,setup(e,{emit:t}){const n=e,r=Rt("radio"),{radioRef:i,radioGroup:a,focus:o,size:s,disabled:l,modelValue:c,actualValue:h}=Qq(n,t);function f(){bn(()=>t("change",c.value))}return(p,v)=>{var _;return te(),me("label",{class:se([w(r).b(),w(r).is("disabled",w(l)),w(r).is("focus",w(o)),w(r).is("bordered",p.border),w(r).is("checked",w(c)===w(h)),w(r).m(w(s))])},[V("span",{class:se([w(r).e("input"),w(r).is("disabled",w(l)),w(r).is("checked",w(c)===w(h))])},[In(V("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":b=>li(c)?c.value=b:null,class:se(w(r).e("original")),value:w(h),name:p.name||((_=w(a))==null?void 0:_.name),disabled:w(l),checked:w(c)===w(h),type:"radio",onFocus:b=>o.value=!0,onBlur:b=>o.value=!1,onChange:f,onClick:Fn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[aG,w(c)]]),V("span",{class:se(w(r).e("inner"))},null,2)],2),V("span",{class:se(w(r).e("label")),onKeydown:Fn(()=>{},["stop"])},[st(p.$slots,"default",{},()=>[$t(Xe(p.label),1)])],42,["onKeydown"])],2)}}});var xwe=Kt(wwe,[["__file","radio.vue"]]);const Swe=Wt({...Yq}),Cwe=Be({name:"ElRadioButton"}),Twe=Be({...Cwe,props:Swe,setup(e){const t=e,n=Rt("radio"),{radioRef:r,focus:i,size:a,disabled:o,modelValue:s,radioGroup:l,actualValue:c}=Qq(t),h=X(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(f,p)=>{var v;return te(),me("label",{class:se([w(n).b("button"),w(n).is("active",w(s)===w(c)),w(n).is("disabled",w(o)),w(n).is("focus",w(i)),w(n).bm("button",w(a))])},[In(V("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":_=>li(s)?s.value=_:null,class:se(w(n).be("button","original-radio")),value:w(c),type:"radio",name:f.name||((v=w(l))==null?void 0:v.name),disabled:w(o),onFocus:_=>i.value=!0,onBlur:_=>i.value=!1,onClick:Fn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[aG,w(s)]]),V("span",{class:se(w(n).be("button","inner")),style:_n(w(s)===w(c)?w(h):{}),onKeydown:Fn(()=>{},["stop"])},[st(f.$slots,"default",{},()=>[$t(Xe(f.label),1)])],46,["onKeydown"])],2)}}});var eZ=Kt(Twe,[["__file","radio-button.vue"]]);const Mwe=Wt({id:{type:String,default:void 0},size:$a,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...yo(["ariaLabel"])}),kwe=Xq,Ewe=Be({name:"ElRadioGroup"}),Awe=Be({...Ewe,props:Mwe,emits:kwe,setup(e,{emit:t}){const n=e,r=Rt("radio"),i=mo(),a=le(),{formItem:o}=es(),{inputId:s,isLabeledByFormItem:l}=ac(n,{formItemContext:o}),c=f=>{t(tr,f),bn(()=>t("change",f))};Un(()=>{const f=a.value.querySelectorAll("[type=radio]"),p=f[0];!Array.from(f).some(v=>v.checked)&&p&&(p.tabIndex=0)});const h=X(()=>n.name||i.value);return pr(Jq,Ar({...ao(n),changeEvent:c,name:h})),At(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(f=>void 0))}),(f,p)=>(te(),me("div",{id:w(s),ref_key:"radioGroupRef",ref:a,class:se(w(r).b("group")),role:"radiogroup","aria-label":w(l)?void 0:f.ariaLabel||"radio-group","aria-labelledby":w(l)?w(o).labelId:void 0},[st(f.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var tZ=Kt(Awe,[["__file","radio-group.vue"]]);const nZ=Wn(xwe,{RadioButton:eZ,RadioGroup:tZ}),Pwe=Ki(tZ),Iwe=Ki(eZ);var Lwe=Be({name:"NodeContent",setup(){return{ns:Rt("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:n}=this.$parent,{data:r,label:i}=t,{renderLabelFn:a}=n;return Mn("span",{class:e.e("label")},a?a({node:t,data:r}):i)}});const C5=Symbol(),Dwe=Be({name:"ElCascaderNode",components:{ElCheckbox:iu,ElRadio:nZ,NodeContent:Lwe,ElIcon:yn,Check:ix,Loading:Yc,ArrowRight:ys},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=un(C5),r=Rt("cascader-node"),i=X(()=>n.isHoverMenu),a=X(()=>n.config.multiple),o=X(()=>n.config.checkStrictly),s=X(()=>{var B;return(B=n.checkedNodes[0])==null?void 0:B.uid}),l=X(()=>e.node.isDisabled),c=X(()=>e.node.isLeaf),h=X(()=>o.value&&!c.value||!l.value),f=X(()=>v(n.expandingNode)),p=X(()=>o.value&&n.checkedNodes.some(v)),v=B=>{var N;const{level:H,uid:j}=e.node;return((N=B==null?void 0:B.pathNodes[H-1])==null?void 0:N.uid)===j},_=()=>{f.value||n.expandNode(e.node)},b=B=>{const{node:N}=e;B!==N.checked&&n.handleCheckChange(N,B)},C=()=>{n.lazyLoad(e.node,()=>{c.value||_()})},T=B=>{i.value&&(E(),!c.value&&t("expand",B))},E=()=>{const{node:B}=e;!h.value||B.loading||(B.loaded?_():C())},A=()=>{i.value&&!c.value||(c.value&&!l.value&&!o.value&&!a.value?O(!0):E())},I=B=>{o.value?(b(B),e.node.loaded&&_()):O(B)},O=B=>{e.node.loaded?(b(B),!o.value&&_()):C()};return{panel:n,isHoverMenu:i,multiple:a,checkStrictly:o,checkedNodeId:s,isDisabled:l,isLeaf:c,expandable:h,inExpandingPath:f,inCheckedPath:p,ns:r,handleHoverExpand:T,handleExpand:E,handleClick:A,handleCheck:O,handleSelectCheck:I}}});function Rwe(e,t,n,r,i,a){const o=Xt("el-checkbox"),s=Xt("el-radio"),l=Xt("check"),c=Xt("el-icon"),h=Xt("node-content"),f=Xt("loading"),p=Xt("arrow-right");return te(),me("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:se([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[Ge(" prefix "),e.multiple?(te(),ft(o,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:Fn(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(te(),ft(s,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:Fn(()=>{},["stop"])},{default:ge(()=>[Ge(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),V("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(te(),ft(c,{key:2,class:se(e.ns.e("prefix"))},{default:ge(()=>[de(l)]),_:1},8,["class"])):Ge("v-if",!0),Ge(" content "),de(h),Ge(" postfix "),e.isLeaf?Ge("v-if",!0):(te(),me(hn,{key:3},[e.node.loading?(te(),ft(c,{key:0,class:se([e.ns.is("loading"),e.ns.e("postfix")])},{default:ge(()=>[de(f)]),_:1},8,["class"])):(te(),ft(c,{key:1,class:se(["arrow-right",e.ns.e("postfix")])},{default:ge(()=>[de(p)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var Owe=Kt(Dwe,[["render",Rwe],["__file","node.vue"]]);const zwe=Be({name:"ElCascaderMenu",components:{Loading:Yc,ElIcon:yn,ElScrollbar:ad,ElCascaderNode:Owe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=er(),n=Rt("cascader-menu"),{t:r}=Sr(),i=mo();let a=null,o=null;const s=un(C5),l=le(null),c=X(()=>!e.nodes.length),h=X(()=>!s.initialLoaded),f=X(()=>`${i.value}-${e.index}`),p=C=>{a=C.target},v=C=>{if(!(!s.isHoverMenu||!a||!l.value))if(a.contains(C.target)){_();const T=t.vnode.el,{left:E}=T.getBoundingClientRect(),{offsetWidth:A,offsetHeight:I}=T,O=C.clientX-E,B=a.offsetTop,N=B+a.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${O} ${B} L${A} 0 V${B} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${O} ${N} L${A} ${I} V${N} Z" />
        `}else o||(o=window.setTimeout(b,s.config.hoverThreshold))},_=()=>{o&&(clearTimeout(o),o=null)},b=()=>{l.value&&(l.value.innerHTML="",_())};return{ns:n,panel:s,hoverZone:l,isEmpty:c,isLoading:h,menuId:f,t:r,handleExpand:p,handleMouseMove:v,clearHoverZone:b}}});function Bwe(e,t,n,r,i,a){const o=Xt("el-cascader-node"),s=Xt("loading"),l=Xt("el-icon"),c=Xt("el-scrollbar");return te(),ft(c,{key:e.menuId,tag:"ul",role:"menu",class:se(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:ge(()=>{var h;return[(te(!0),me(hn,null,Kn(e.nodes,f=>(te(),ft(o,{key:f.uid,node:f,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(te(),me("div",{key:0,class:se(e.ns.e("empty-text"))},[de(l,{size:"14",class:se(e.ns.is("loading"))},{default:ge(()=>[de(s)]),_:1},8,["class"]),$t(" "+Xe(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(te(),me("div",{key:1,class:se(e.ns.e("empty-text"))},Xe(e.t("el.cascader.noData")),3)):(h=e.panel)!=null&&h.isHoverMenu?(te(),me("svg",{key:2,ref:"hoverZone",class:se(e.ns.e("hover-zone"))},null,2)):Ge("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Fwe=Kt(zwe,[["render",Bwe],["__file","menu.vue"]]);let Nwe=0;const $we=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};let SD=class CD{constructor(t,n,r,i=!1){this.data=t,this.config=n,this.parent=r,this.root=i,this.uid=Nwe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:a,label:o,children:s}=n,l=t[s],c=$we(this);this.level=i?0:r?r.level+1:1,this.value=t[a],this.label=t[o],this.pathNodes=c,this.pathValues=c.map(h=>h.value),this.pathLabels=c.map(h=>h.label),this.childrenData=l,this.children=(l||[]).map(h=>new CD(h,n,this)),this.loaded=!n.lazy||this.isLeaf||!Ul(l)}get isDisabled(){const{data:t,parent:n,config:r}=this,{disabled:i,checkStrictly:a}=r;return(Dn(i)?i(t,this):!!t[i])||!a&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:r,loaded:i}=this,{lazy:a,leaf:o}=n,s=Dn(o)?o(t,this):t[o];return aa(s)?a&&!i?!1:!(Array.isArray(r)&&r.length):!!s}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:r}=this,i=new CD(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],r.push(i),i}calcText(t,n){const r=t?this.pathLabels.join(n):this.label;return this.text=r,r}broadcast(t,...n){const r=`onParent${Bc(t)}`;this.children.forEach(i=>{i&&(i.broadcast(t,...n),i[r]&&i[r](...n))})}emit(t,...n){const{parent:r}=this,i=`onChild${Bc(t)}`;r&&(r[i]&&r[i](...n),r.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(i=>!i.isDisabled),r=n.length?n.every(i=>i.checked):!1;this.setCheckState(r)}setCheckState(t){const n=this.children.length,r=this.children.reduce((i,a)=>{const o=a.checked?1:a.indeterminate?.5:0;return i+o},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&t,this.indeterminate=this.loaded&&r!==n&&r>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:r}=this.config;n||!r?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}};const TD=(e,t)=>e.reduce((n,r)=>(r.isLeaf?n.push(r):(!t&&n.push(r),n=n.concat(TD(r.children,t))),n),[]);class $6{constructor(t,n){this.config=n;const r=(t||[]).map(i=>new SD(i,this.config));this.nodes=r,this.allNodes=TD(r,!1),this.leafNodes=TD(r,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const r=n?n.appendChild(t):new SD(t,this.config);n||this.nodes.push(r),this.allNodes.push(r),r.isLeaf&&this.leafNodes.push(r)}appendNodes(t,n){t.forEach(r=>this.appendNode(r,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).find(i=>Yo(i.value,t)||Yo(i.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:r,level:i})=>Yo(t.value,r)&&t.level===i)||null}}const rZ=Wt({modelValue:{type:Qe([Number,String,Array])},options:{type:Qe(Array),default:()=>[]},props:{type:Qe(Object),default:()=>({})}}),Vwe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:ai,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Hwe=e=>X(()=>({...Vwe,...e.props})),V6=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},jwe=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():pG(e)&&e.click()},Uwe=(e,t)=>{const n=t.slice(0),r=n.map(a=>a.uid),i=e.reduce((a,o)=>{const s=r.indexOf(o.uid);return s>-1&&(a.push(o),n.splice(s,1),r.splice(s,1)),a},[]);return i.push(...n),i},Wwe=Be({name:"ElCascaderPanel",components:{ElCascaderMenu:Fwe},props:{...rZ,border:{type:Boolean,default:!0},renderLabel:Function},emits:[tr,ki,"close","expand-change"],setup(e,{emit:t,slots:n}){let r=!1;const i=Rt("cascader"),a=Hwe(e);let o=null;const s=le(!0),l=le([]),c=le(null),h=le([]),f=le(null),p=le([]),v=X(()=>a.value.expandTrigger==="hover"),_=X(()=>e.renderLabel||n.default),b=()=>{const{options:Y}=e,ie=a.value;r=!1,o=new $6(Y,ie),h.value=[o.getNodes()],ie.lazy&&Ul(e.options)?(s.value=!1,C(void 0,ue=>{ue&&(o=new $6(ue,ie),h.value=[o.getNodes()]),s.value=!0,H(!1,!0)})):H(!1,!0)},C=(Y,ie)=>{const ue=a.value;Y=Y||new SD({},ue,void 0,!0),Y.loading=!0;const J=q=>{const ce=Y,re=ce.root?null:ce;q&&(o==null||o.appendNodes(q,re)),ce.loading=!1,ce.loaded=!0,ce.childrenData=ce.childrenData||[],ie&&ie(q)};ue.lazyLoad(Y,J)},T=(Y,ie)=>{var ue;const{level:J}=Y,q=h.value.slice(0,J);let ce;Y.isLeaf?ce=Y.pathNodes[J-2]:(ce=Y,q.push(Y.children)),((ue=f.value)==null?void 0:ue.uid)!==(ce==null?void 0:ce.uid)&&(f.value=Y,h.value=q,!ie&&t("expand-change",(Y==null?void 0:Y.pathValues)||[]))},E=(Y,ie,ue=!0)=>{const{checkStrictly:J,multiple:q}=a.value,ce=p.value[0];r=!0,!q&&(ce==null||ce.doCheck(!1)),Y.doCheck(ie),N(),ue&&!q&&!J&&t("close"),!ue&&!q&&!J&&A(Y)},A=Y=>{Y&&(Y=Y.parent,A(Y),Y&&T(Y))},I=Y=>o==null?void 0:o.getFlattedNodes(Y),O=Y=>{var ie;return(ie=I(Y))==null?void 0:ie.filter(ue=>ue.checked!==!1)},B=()=>{p.value.forEach(Y=>Y.doCheck(!1)),N(),h.value=h.value.slice(0,1),f.value=null,t("expand-change",[])},N=()=>{var Y;const{checkStrictly:ie,multiple:ue}=a.value,J=p.value,q=O(!ie),ce=Uwe(J,q),re=ce.map(ee=>ee.valueByOption);p.value=ce,c.value=ue?re:(Y=re[0])!=null?Y:null},H=(Y=!1,ie=!1)=>{const{modelValue:ue}=e,{lazy:J,multiple:q,checkStrictly:ce}=a.value,re=!ce;if(!(!s.value||r||!ie&&Yo(ue,c.value)))if(J&&!Y){const oe=$8(_pe(ms(ue))).map(be=>o==null?void 0:o.getNodeByValue(be)).filter(be=>!!be&&!be.loaded&&!be.loading);oe.length?oe.forEach(be=>{C(be,()=>H(!1,ie))}):H(!0,ie)}else{const ee=q?ms(ue):[ue],oe=$8(ee.map(be=>o==null?void 0:o.getNodeByValue(be,re)));j(oe,ie),c.value=bT(ue)}},j=(Y,ie=!0)=>{const{checkStrictly:ue}=a.value,J=p.value,q=Y.filter(ee=>!!ee&&(ue||ee.isLeaf)),ce=o==null?void 0:o.getSameNode(f.value),re=ie&&ce||q[0];re?re.pathNodes.forEach(ee=>T(ee,!0)):f.value=null,J.forEach(ee=>ee.doCheck(!1)),Ar(q).forEach(ee=>ee.doCheck(!0)),p.value=q,bn(W)},W=()=>{xr&&l.value.forEach(Y=>{const ie=Y==null?void 0:Y.$el;if(ie){const ue=ie.querySelector(`.${i.namespace.value}-scrollbar__wrap`),J=ie.querySelector(`.${i.b("node")}.${i.is("active")}`)||ie.querySelector(`.${i.b("node")}.in-active-path`);V3(ue,J)}})},U=Y=>{const ie=Y.target,{code:ue}=Y;switch(ue){case En.up:case En.down:{Y.preventDefault();const J=ue===En.up?-1:1;xC(vG(ie,J,`.${i.b("node")}[tabindex="-1"]`));break}case En.left:{Y.preventDefault();const J=l.value[V6(ie)-1],q=J==null?void 0:J.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);xC(q);break}case En.right:{Y.preventDefault();const J=l.value[V6(ie)+1],q=J==null?void 0:J.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);xC(q);break}case En.enter:jwe(ie);break}};return pr(C5,Ar({config:a,expandingNode:f,checkedNodes:p,isHoverMenu:v,initialLoaded:s,renderLabelFn:_,lazyLoad:C,expandNode:T,handleCheckChange:E})),At([a,()=>e.options],b,{deep:!0,immediate:!0}),At(()=>e.modelValue,()=>{r=!1,H()},{deep:!0}),At(()=>c.value,Y=>{Yo(Y,e.modelValue)||(t(tr,Y),t(ki,Y))}),MW(()=>l.value=[]),Un(()=>!Ul(e.modelValue)&&H()),{ns:i,menuList:l,menus:h,checkedNodes:p,handleKeyDown:U,handleCheckChange:E,getFlattedNodes:I,getCheckedNodes:O,clearCheckedNodes:B,calculateCheckedValue:N,scrollToExpandingNode:W}}});function Gwe(e,t,n,r,i,a){const o=Xt("el-cascader-menu");return te(),me("div",{class:se([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(te(!0),me(hn,null,Kn(e.menus,(s,l)=>(te(),ft(o,{key:l,ref_for:!0,ref:c=>e.menuList[l]=c,index:l,nodes:[...s]},null,8,["index","nodes"]))),128))],42,["onKeydown"])}var Kwe=Kt(Wwe,[["render",Gwe],["__file","index.vue"]]);const iZ=Wn(Kwe),nm=Wt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:id},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),qwe={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},Zwe=Be({name:"ElTag"}),Ywe=Be({...Zwe,props:nm,emits:qwe,setup(e,{emit:t}){const n=e,r=Ea(),i=Rt("tag"),a=X(()=>{const{type:l,hit:c,effect:h,closable:f,round:p}=n;return[i.b(),i.is("closable",f),i.m(l||"primary"),i.m(r.value),i.m(h),i.is("hit",c),i.is("round",p)]}),o=l=>{t("close",l)},s=l=>{t("click",l)};return(l,c)=>l.disableTransitions?(te(),me("span",{key:0,class:se(w(a)),style:_n({backgroundColor:l.color}),onClick:s},[V("span",{class:se(w(i).e("content"))},[st(l.$slots,"default")],2),l.closable?(te(),ft(w(yn),{key:0,class:se(w(i).e("close")),onClick:Fn(o,["stop"])},{default:ge(()=>[de(w(Yu))]),_:1},8,["class","onClick"])):Ge("v-if",!0)],6)):(te(),ft(Ka,{key:1,name:`${w(i).namespace.value}-zoom-in-center`,appear:""},{default:ge(()=>[V("span",{class:se(w(a)),style:_n({backgroundColor:l.color}),onClick:s},[V("span",{class:se(w(i).e("content"))},[st(l.$slots,"default")],2),l.closable?(te(),ft(w(yn),{key:0,class:se(w(i).e("close")),onClick:Fn(o,["stop"])},{default:ge(()=>[de(w(Yu))]),_:1},8,["class","onClick"])):Ge("v-if",!0)],6)]),_:3},8,["name"]))}});var Xwe=Kt(Ywe,[["__file","tag.vue"]]);const cw=Wn(Xwe),Jwe=Wt({...rZ,size:$a,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Qe(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Qe(Function),default:()=>!0},placement:{type:Qe(String),values:qf,default:"bottom-start"},fallbackPlacements:{type:Qe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:eo.teleported,tagType:{...nm.type,default:"info"},tagEffect:{...nm.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...A0}),Qwe={[tr]:e=>!0,[ki]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>pa(e),expandChange:e=>!!e,removeTag:e=>!!e},exe="ElCascader",txe=Be({name:exe}),nxe=Be({...txe,props:Jwe,emits:Qwe,setup(e,{expose:t,emit:n}){const r=e,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Ze})=>{const{modifiersData:Fe,placement:ve}=Ze;["right","left","bottom","top"].includes(ve)||(Fe.arrow.x=35)},requires:["arrow"]}]},a=gm();let o=0,s=0;const l=Rt("cascader"),c=Rt("input"),{t:h}=Sr(),{form:f,formItem:p}=es(),{valueOnClear:v}=ak(r),{isComposing:_,handleComposition:b}=ik({afterComposition(Ze){var Fe;const ve=(Fe=Ze.target)==null?void 0:Fe.value;xt(ve)}}),C=le(null),T=le(null),E=le(null),A=le(null),I=le(null),O=le(!1),B=le(!1),N=le(!1),H=le(!1),j=le(""),W=le(""),U=le([]),Y=le([]),ie=le([]),ue=X(()=>a.style),J=X(()=>r.disabled||(f==null?void 0:f.disabled)),q=X(()=>r.placeholder||h("el.cascader.placeholder")),ce=X(()=>W.value||U.value.length>0||_.value?"":q.value),re=Ea(),ee=X(()=>["small"].includes(re.value)?"small":"default"),oe=X(()=>!!r.props.multiple),be=X(()=>!r.filterable||oe.value),we=X(()=>oe.value?W.value:j.value),pe=X(()=>{var Ze;return((Ze=A.value)==null?void 0:Ze.checkedNodes)||[]}),Ce=X(()=>!r.clearable||J.value||N.value||!B.value?!1:!!pe.value.length),Ve=X(()=>{const{showAllLevels:Ze,separator:Fe}=r,ve=pe.value;return ve.length?oe.value?"":ve[0].calcText(Ze,Fe):""}),et=X(()=>(p==null?void 0:p.validateState)||""),Ee=X({get(){return bT(r.modelValue)},set(Ze){const Fe=Ze??v.value;n(tr,Fe),n(ki,Fe),r.validateEvent&&(p==null||p.validate("change").catch(ve=>void 0))}}),Je=X(()=>[l.b(),l.m(re.value),l.is("disabled",J.value),a.class]),Ue=X(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",O.value)]),yt=X(()=>l.is("focus",O.value||H.value)),Ne=X(()=>{var Ze,Fe;return(Fe=(Ze=C.value)==null?void 0:Ze.popperRef)==null?void 0:Fe.contentRef}),dt=Ze=>{var Fe,ve,ke;J.value||(Ze=Ze??!O.value,Ze!==O.value&&(O.value=Ze,(ve=(Fe=T.value)==null?void 0:Fe.input)==null||ve.setAttribute("aria-expanded",`${Ze}`),Ze?(Le(),bn((ke=A.value)==null?void 0:ke.scrollToExpandingNode)):r.filterable&&kt(),n("visibleChange",Ze)))},Le=()=>{bn(()=>{var Ze;(Ze=C.value)==null||Ze.updatePopper()})},ze=()=>{N.value=!1},ct=Ze=>{const{showAllLevels:Fe,separator:ve}=r;return{node:Ze,key:Ze.uid,text:Ze.calcText(Fe,ve),hitState:!1,closable:!J.value&&!Ze.isDisabled,isCollapseTag:!1}},Lt=Ze=>{var Fe;const ve=Ze.node;ve.doCheck(!1),(Fe=A.value)==null||Fe.calculateCheckedValue(),n("removeTag",ve.valueByOption)},lt=()=>{if(!oe.value)return;const Ze=pe.value,Fe=[],ve=[];if(Ze.forEach(ke=>ve.push(ct(ke))),Y.value=ve,Ze.length){Ze.slice(0,r.maxCollapseTags).forEach(Me=>Fe.push(ct(Me)));const ke=Ze.slice(r.maxCollapseTags),Oe=ke.length;Oe&&(r.collapseTags?Fe.push({key:-1,text:`+ ${Oe}`,closable:!1,isCollapseTag:!0}):ke.forEach(Me=>Fe.push(ct(Me))))}U.value=Fe},Ct=()=>{var Ze,Fe;const{filterMethod:ve,showAllLevels:ke,separator:Oe}=r,Me=(Fe=(Ze=A.value)==null?void 0:Ze.getFlattedNodes(!r.props.checkStrictly))==null?void 0:Fe.filter(Ae=>Ae.isDisabled?!1:(Ae.calcText(ke,Oe),ve(Ae,we.value)));oe.value&&(U.value.forEach(Ae=>{Ae.hitState=!1}),Y.value.forEach(Ae=>{Ae.hitState=!1})),N.value=!0,ie.value=Me,Le()},_t=()=>{var Ze;let Fe;N.value&&I.value?Fe=I.value.$el.querySelector(`.${l.e("suggestion-item")}`):Fe=(Ze=A.value)==null?void 0:Ze.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),Fe&&(Fe.focus(),!N.value&&Fe.click())},It=()=>{var Ze,Fe;const ve=(Ze=T.value)==null?void 0:Ze.input,ke=E.value,Oe=(Fe=I.value)==null?void 0:Fe.$el;if(!(!xr||!ve)){if(Oe){const Me=Oe.querySelector(`.${l.e("suggestion-list")}`);Me.style.minWidth=`${ve.offsetWidth}px`}if(ke){const{offsetHeight:Me}=ke,Ae=U.value.length>0?`${Math.max(Me+6,o)}px`:`${o}px`;ve.style.height=Ae,Le()}}},Bt=Ze=>{var Fe;return(Fe=A.value)==null?void 0:Fe.getCheckedNodes(Ze)},Ft=Ze=>{Le(),n("expandChange",Ze)},cn=Ze=>{if(!_.value)switch(Ze.code){case En.enter:dt();break;case En.down:dt(!0),bn(_t),Ze.preventDefault();break;case En.esc:O.value===!0&&(Ze.preventDefault(),Ze.stopPropagation(),dt(!1));break;case En.tab:dt(!1);break}},Ot=()=>{var Ze;(Ze=A.value)==null||Ze.clearCheckedNodes(),!O.value&&r.filterable&&kt(),dt(!1),n("clear")},kt=()=>{const{value:Ze}=Ve;j.value=Ze,W.value=Ze},fn=Ze=>{var Fe,ve;const{checked:ke}=Ze;oe.value?(Fe=A.value)==null||Fe.handleCheckChange(Ze,!ke,!1):(!ke&&((ve=A.value)==null||ve.handleCheckChange(Ze,!0,!1)),dt(!1))},Rn=Ze=>{const Fe=Ze.target,{code:ve}=Ze;switch(ve){case En.up:case En.down:{const ke=ve===En.up?-1:1;xC(vG(Fe,ke,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case En.enter:Fe.click();break}},On=()=>{const Ze=U.value,Fe=Ze[Ze.length-1];s=W.value?0:s+1,!(!Fe||!s||r.collapseTags&&Ze.length>1)&&(Fe.hitState?Lt(Fe):Fe.hitState=!0)},mt=Ze=>{const Fe=Ze.target,ve=l.e("search-input");Fe.className===ve&&(H.value=!0),n("focus",Ze)},Gt=Ze=>{H.value=!1,n("blur",Ze)},gn=Ks(()=>{const{value:Ze}=we;if(!Ze)return;const Fe=r.beforeFilter(Ze);G1(Fe)?Fe.then(Ct).catch(()=>{}):Fe!==!1?Ct():ze()},r.debounce),xt=(Ze,Fe)=>{!O.value&&dt(!0),!(Fe!=null&&Fe.isComposing)&&(Ze?gn():ze())},Zt=Ze=>Number.parseFloat(Kle(c.cssVarName("input-height"),Ze).value)-2;return At(N,Le),At([pe,J,()=>r.collapseTags],lt),At(U,()=>{bn(()=>It())}),At(re,async()=>{await bn();const Ze=T.value.input;o=Zt(Ze)||o,It()}),At(Ve,kt,{immediate:!0}),Un(()=>{const Ze=T.value.input,Fe=Zt(Ze);o=Ze.offsetHeight||Fe,Hi(Ze,It)}),t({getCheckedNodes:Bt,cascaderPanelRef:A,togglePopperVisible:dt,contentRef:Ne}),(Ze,Fe)=>(te(),ft(w(Po),{ref_key:"tooltipRef",ref:C,visible:O.value,teleported:Ze.teleported,"popper-class":[w(l).e("dropdown"),Ze.popperClass],"popper-options":i,"fallback-placements":Ze.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:Ze.placement,transition:`${w(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:Ze.persistent,onHide:ze},{default:ge(()=>[In((te(),me("div",{class:se(w(Je)),style:_n(w(ue)),onClick:()=>dt(w(be)?void 0:!0),onKeydown:cn,onMouseenter:ve=>B.value=!0,onMouseleave:ve=>B.value=!1},[de(w(Zo),{ref_key:"input",ref:T,modelValue:j.value,"onUpdate:modelValue":ve=>j.value=ve,placeholder:w(ce),readonly:w(be),disabled:w(J),"validate-event":!1,size:w(re),class:se(w(yt)),tabindex:w(oe)&&Ze.filterable&&!w(J)?-1:void 0,onCompositionstart:w(b),onCompositionupdate:w(b),onCompositionend:w(b),onFocus:mt,onBlur:Gt,onInput:xt},{suffix:ge(()=>[w(Ce)?(te(),ft(w(yn),{key:"clear",class:se([w(c).e("icon"),"icon-circle-close"]),onClick:Fn(Ot,["stop"])},{default:ge(()=>[de(w(Kf))]),_:1},8,["class","onClick"])):(te(),ft(w(yn),{key:"arrow-down",class:se(w(Ue)),onClick:Fn(ve=>dt(),["stop"])},{default:ge(()=>[de(w(ah))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),w(oe)?(te(),me("div",{key:0,ref_key:"tagWrapper",ref:E,class:se([w(l).e("tags"),w(l).is("validate",!!w(et))])},[(te(!0),me(hn,null,Kn(U.value,ve=>(te(),ft(w(cw),{key:ve.key,type:Ze.tagType,size:w(ee),effect:Ze.tagEffect,hit:ve.hitState,closable:ve.closable,"disable-transitions":"",onClose:ke=>Lt(ve)},{default:ge(()=>[ve.isCollapseTag===!1?(te(),me("span",{key:0},Xe(ve.text),1)):(te(),ft(w(Po),{key:1,disabled:O.value||!Ze.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:ge(()=>[V("span",null,Xe(ve.text),1)]),content:ge(()=>[V("div",{class:se(w(l).e("collapse-tags"))},[(te(!0),me(hn,null,Kn(Y.value.slice(Ze.maxCollapseTags),(ke,Oe)=>(te(),me("div",{key:Oe,class:se(w(l).e("collapse-tag"))},[(te(),ft(w(cw),{key:ke.key,class:"in-tooltip",type:Ze.tagType,size:w(ee),effect:Ze.tagEffect,hit:ke.hitState,closable:ke.closable,"disable-transitions":"",onClose:Me=>Lt(ke)},{default:ge(()=>[V("span",null,Xe(ke.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),Ze.filterable&&!w(J)?In((te(),me("input",{key:0,"onUpdate:modelValue":ve=>W.value=ve,type:"text",class:se(w(l).e("search-input")),placeholder:w(Ve)?"":w(q),onInput:ve=>xt(W.value,ve),onClick:Fn(ve=>dt(!0),["stop"]),onKeydown:oi(On,["delete"]),onCompositionstart:w(b),onCompositionupdate:w(b),onCompositionend:w(b),onFocus:mt,onBlur:Gt},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[qo,W.value]]):Ge("v-if",!0)],2)):Ge("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[w(Xd),()=>dt(!1),w(Ne)]])]),content:ge(()=>[In(de(w(iZ),{ref_key:"cascaderPanelRef",ref:A,modelValue:w(Ee),"onUpdate:modelValue":ve=>li(Ee)?Ee.value=ve:null,options:Ze.options,props:r.props,border:!1,"render-label":Ze.$slots.default,onExpandChange:Ft,onClose:ve=>Ze.$nextTick(()=>dt(!1))},null,8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Lr,!N.value]]),Ze.filterable?In((te(),ft(w(ad),{key:0,ref_key:"suggestionPanel",ref:I,tag:"ul",class:se(w(l).e("suggestion-panel")),"view-class":w(l).e("suggestion-list"),onKeydown:Rn},{default:ge(()=>[ie.value.length?(te(!0),me(hn,{key:0},Kn(ie.value,ve=>(te(),me("li",{key:ve.uid,class:se([w(l).e("suggestion-item"),w(l).is("checked",ve.checked)]),tabindex:-1,onClick:ke=>fn(ve)},[V("span",null,Xe(ve.text),1),ve.checked?(te(),ft(w(yn),{key:0},{default:ge(()=>[de(w(ix))]),_:1})):Ge("v-if",!0)],10,["onClick"]))),128)):st(Ze.$slots,"empty",{key:1},()=>[V("li",{class:se(w(l).e("empty-text"))},Xe(w(h)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Lr,N.value]]):Ge("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var rxe=Kt(nxe,[["__file","cascader.vue"]]);const ixe=Wn(rxe),axe=Wt({checked:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),oxe={"update:checked":e=>pa(e),[ki]:e=>pa(e)},sxe=Be({name:"ElCheckTag"}),lxe=Be({...sxe,props:axe,emits:oxe,setup(e,{emit:t}){const n=e,r=Rt("check-tag"),i=X(()=>[r.b(),r.is("checked",n.checked),r.m(n.type||"primary")]),a=()=>{const o=!n.checked;t(ki,o),t("update:checked",o)};return(o,s)=>(te(),me("span",{class:se(w(i)),onClick:a},[st(o.$slots,"default")],2))}});var uxe=Kt(lxe,[["__file","check-tag.vue"]]);const cxe=Wn(uxe),aZ=Symbol("rowContextKey"),dxe=["start","center","end","space-around","space-between","space-evenly"],hxe=["top","middle","bottom"],fxe=Wt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:dxe,default:"start"},align:{type:String,values:hxe}}),pxe=Be({name:"ElRow"}),vxe=Be({...pxe,props:fxe,setup(e){const t=e,n=Rt("row"),r=X(()=>t.gutter);pr(aZ,{gutter:r});const i=X(()=>{const o={};return t.gutter&&(o.marginRight=o.marginLeft=`-${t.gutter/2}px`),o}),a=X(()=>[n.b(),n.is(`justify-${t.justify}`,t.justify!=="start"),n.is(`align-${t.align}`,!!t.align)]);return(o,s)=>(te(),ft(ir(o.tag),{class:se(w(a)),style:_n(w(i))},{default:ge(()=>[st(o.$slots,"default")]),_:3},8,["class","style"]))}});var mxe=Kt(vxe,[["__file","row.vue"]]);const gxe=Wn(mxe),yxe=Wt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Qe([Number,Object]),default:()=>ji({})},sm:{type:Qe([Number,Object]),default:()=>ji({})},md:{type:Qe([Number,Object]),default:()=>ji({})},lg:{type:Qe([Number,Object]),default:()=>ji({})},xl:{type:Qe([Number,Object]),default:()=>ji({})}}),_xe=Be({name:"ElCol"}),bxe=Be({..._xe,props:yxe,setup(e){const t=e,{gutter:n}=un(aZ,{gutter:X(()=>0)}),r=Rt("col"),i=X(()=>{const o={};return n.value&&(o.paddingLeft=o.paddingRight=`${n.value/2}px`),o}),a=X(()=>{const o=[];return["span","offset","pull","push"].forEach(c=>{const h=t[c];zn(h)&&(c==="span"?o.push(r.b(`${t[c]}`)):h>0&&o.push(r.b(`${c}-${t[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{zn(t[c])?o.push(r.b(`${c}-${t[c]}`)):nr(t[c])&&Object.entries(t[c]).forEach(([h,f])=>{o.push(h!=="span"?r.b(`${c}-${h}-${f}`):r.b(`${c}-${f}`))})}),n.value&&o.push(r.is("guttered")),[r.b(),o]});return(o,s)=>(te(),ft(ir(o.tag),{class:se(w(a)),style:_n(w(i))},{default:ge(()=>[st(o.$slots,"default")]),_:3},8,["class","style"]))}});var wxe=Kt(bxe,[["__file","col.vue"]]);const xxe=Wn(wxe),H6=e=>zn(e)||Ln(e)||sn(e),Sxe=Wt({accordion:Boolean,modelValue:{type:Qe([Array,String,Number]),default:()=>ji([])}}),Cxe={[tr]:H6,[ki]:H6},oZ=Symbol("collapseContextKey"),Txe=(e,t)=>{const n=le(Wo(e.modelValue)),r=a=>{n.value=a;const o=e.accordion?n.value[0]:n.value;t(tr,o),t(ki,o)},i=a=>{if(e.accordion)r([n.value[0]===a?"":a]);else{const o=[...n.value],s=o.indexOf(a);s>-1?o.splice(s,1):o.push(a),r(o)}};return At(()=>e.modelValue,()=>n.value=Wo(e.modelValue),{deep:!0}),pr(oZ,{activeNames:n,handleItemClick:i}),{activeNames:n,setActiveNames:r}},Mxe=()=>{const e=Rt("collapse");return{rootKls:X(()=>e.b())}},kxe=Be({name:"ElCollapse"}),Exe=Be({...kxe,props:Sxe,emits:Cxe,setup(e,{expose:t,emit:n}){const r=e,{activeNames:i,setActiveNames:a}=Txe(r,n),{rootKls:o}=Mxe();return t({activeNames:i,setActiveNames:a}),(s,l)=>(te(),me("div",{class:se(w(o))},[st(s.$slots,"default")],2))}});var Axe=Kt(Exe,[["__file","collapse.vue"]]);const Pxe=Be({name:"ElCollapseTransition"}),Ixe=Be({...Pxe,setup(e){const t=Rt("collapse-transition"),n=i=>{i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom},r={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.height&&(i.dataset.elExistsHeight=i.style.height),i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){requestAnimationFrame(()=>{i.dataset.oldOverflow=i.style.overflow,i.dataset.elExistsHeight?i.style.maxHeight=i.dataset.elExistsHeight:i.scrollHeight!==0?i.style.maxHeight=`${i.scrollHeight}px`:i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom,i.style.overflow="hidden"})},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},enterCancelled(i){n(i)},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){n(i)},leaveCancelled(i){n(i)}};return(i,a)=>(te(),ft(Ka,sr({name:w(t).b()},Joe(r)),{default:ge(()=>[st(i.$slots,"default")]),_:3},16,["name"]))}});var Lxe=Kt(Ixe,[["__file","collapse-transition.vue"]]);const ck=Wn(Lxe),Dxe=Wt({title:{type:String,default:""},name:{type:Qe([String,Number]),default:void 0},disabled:Boolean}),Rxe=e=>{const t=un(oZ),{namespace:n}=Rt("collapse"),r=le(!1),i=le(!1),a=s5(),o=X(()=>a.current++),s=X(()=>{var p;return(p=e.name)!=null?p:`${n.value}-id-${a.prefix}-${w(o)}`}),l=X(()=>t==null?void 0:t.activeNames.value.includes(w(s)));return{focusing:r,id:o,isActive:l,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},handleHeaderClick:()=>{e.disabled||(t==null||t.handleItemClick(w(s)),r.value=!1,i.value=!0)},handleEnterClick:()=>{t==null||t.handleItemClick(w(s))}}},Oxe=(e,{focusing:t,isActive:n,id:r})=>{const i=Rt("collapse"),a=X(()=>[i.b("item"),i.is("active",w(n)),i.is("disabled",e.disabled)]),o=X(()=>[i.be("item","header"),i.is("active",w(n)),{focusing:w(t)&&!e.disabled}]),s=X(()=>[i.be("item","arrow"),i.is("active",w(n))]),l=X(()=>i.be("item","wrap")),c=X(()=>i.be("item","content")),h=X(()=>i.b(`content-${w(r)}`)),f=X(()=>i.b(`head-${w(r)}`));return{arrowKls:s,headKls:o,rootKls:a,itemWrapperKls:l,itemContentKls:c,scopedContentId:h,scopedHeadId:f}},zxe=Be({name:"ElCollapseItem"}),Bxe=Be({...zxe,props:Dxe,setup(e,{expose:t}){const n=e,{focusing:r,id:i,isActive:a,handleFocus:o,handleHeaderClick:s,handleEnterClick:l}=Rxe(n),{arrowKls:c,headKls:h,rootKls:f,itemWrapperKls:p,itemContentKls:v,scopedContentId:_,scopedHeadId:b}=Oxe(n,{focusing:r,isActive:a,id:i});return t({isActive:a}),(C,T)=>(te(),me("div",{class:se(w(f))},[V("button",{id:w(b),class:se(w(h)),"aria-expanded":w(a),"aria-controls":w(_),"aria-describedby":w(_),tabindex:C.disabled?-1:0,type:"button",onClick:w(s),onKeydown:oi(Fn(w(l),["stop","prevent"]),["space","enter"]),onFocus:w(o),onBlur:E=>r.value=!1},[st(C.$slots,"title",{},()=>[$t(Xe(C.title),1)]),de(w(yn),{class:se(w(c))},{default:ge(()=>[de(w(ys))]),_:1},8,["class"])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),de(w(ck),null,{default:ge(()=>[In(V("div",{id:w(_),role:"region",class:se(w(p)),"aria-hidden":!w(a),"aria-labelledby":w(b)},[V("div",{class:se(w(v))},[st(C.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Lr,w(a)]])]),_:3})],2))}});var sZ=Kt(Bxe,[["__file","collapse-item.vue"]]);const Fxe=Wn(Axe,{CollapseItem:sZ}),Nxe=Ki(sZ),$xe=Wt({color:{type:Qe(Object),required:!0},vertical:{type:Boolean,default:!1}});let lP=!1;function dw(e,t){if(!xr)return;const n=function(a){var o;(o=t.drag)==null||o.call(t,a)},r=function(a){var o;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,lP=!1,(o=t.end)==null||o.call(t,a)},i=function(a){var o;lP||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),lP=!0,(o=t.start)==null||o.call(t,a))};e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!1})}const Vxe=e=>{const t=er(),{t:n}=Sr(),r=_i(),i=_i(),a=X(()=>e.color.get("alpha")),o=X(()=>n("el.colorpicker.alphaLabel"));function s(f){var p;f.target!==r.value&&l(f),(p=r.value)==null||p.focus()}function l(f){if(!i.value||!r.value)return;const v=t.vnode.el.getBoundingClientRect(),{clientX:_,clientY:b}=S3(f);if(e.vertical){let C=b-v.top;C=Math.max(r.value.offsetHeight/2,C),C=Math.min(C,v.height-r.value.offsetHeight/2),e.color.set("alpha",Math.round((C-r.value.offsetHeight/2)/(v.height-r.value.offsetHeight)*100))}else{let C=_-v.left;C=Math.max(r.value.offsetWidth/2,C),C=Math.min(C,v.width-r.value.offsetWidth/2),e.color.set("alpha",Math.round((C-r.value.offsetWidth/2)/(v.width-r.value.offsetWidth)*100))}}function c(f){const{code:p,shiftKey:v}=f,_=v?10:1;switch(p){case En.left:case En.down:f.preventDefault(),f.stopPropagation(),h(-_);break;case En.right:case En.up:f.preventDefault(),f.stopPropagation(),h(_);break}}function h(f){let p=a.value+f;p=p<0?0:p>100?100:p,e.color.set("alpha",p)}return{thumb:r,bar:i,alpha:a,alphaLabel:o,handleDrag:l,handleClick:s,handleKeydown:c}},Hxe=(e,{bar:t,thumb:n,handleDrag:r})=>{const i=er(),a=Rt("color-alpha-slider"),o=le(0),s=le(0),l=le();function c(){if(!n.value||e.vertical)return 0;const E=i.vnode.el,A=e.color.get("alpha");return E?Math.round(A*(E.offsetWidth-n.value.offsetWidth/2)/100):0}function h(){if(!n.value)return 0;const E=i.vnode.el;if(!e.vertical)return 0;const A=e.color.get("alpha");return E?Math.round(A*(E.offsetHeight-n.value.offsetHeight/2)/100):0}function f(){if(e.color&&e.color.value){const{r:E,g:A,b:I}=e.color.toRgb();return`linear-gradient(to right, rgba(${E}, ${A}, ${I}, 0) 0%, rgba(${E}, ${A}, ${I}, 1) 100%)`}return""}function p(){o.value=c(),s.value=h(),l.value=f()}Un(()=>{if(!t.value||!n.value)return;const E={drag:A=>{r(A)},end:A=>{r(A)}};dw(t.value,E),dw(n.value,E),p()}),At(()=>e.color.get("alpha"),()=>p()),At(()=>e.color.value,()=>p());const v=X(()=>[a.b(),a.is("vertical",e.vertical)]),_=X(()=>a.e("bar")),b=X(()=>a.e("thumb")),C=X(()=>({background:l.value})),T=X(()=>({left:oa(o.value),top:oa(s.value)}));return{rootKls:v,barKls:_,barStyle:C,thumbKls:b,thumbStyle:T,update:p}},jxe="ElColorAlphaSlider",Uxe=Be({name:jxe}),Wxe=Be({...Uxe,props:$xe,setup(e,{expose:t}){const n=e,{alpha:r,alphaLabel:i,bar:a,thumb:o,handleDrag:s,handleClick:l,handleKeydown:c}=Vxe(n),{rootKls:h,barKls:f,barStyle:p,thumbKls:v,thumbStyle:_,update:b}=Hxe(n,{bar:a,thumb:o,handleDrag:s});return t({update:b,bar:a,thumb:o}),(C,T)=>(te(),me("div",{class:se(w(h))},[V("div",{ref_key:"bar",ref:a,class:se(w(f)),style:_n(w(p)),onClick:w(l)},null,14,["onClick"]),V("div",{ref_key:"thumb",ref:o,class:se(w(v)),style:_n(w(_)),"aria-label":w(i),"aria-valuenow":w(r),"aria-orientation":C.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:w(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Gxe=Kt(Wxe,[["__file","alpha-slider.vue"]]);const Kxe=Be({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Rt("color-hue-slider"),n=er(),r=le(),i=le(),a=le(0),o=le(0),s=X(()=>e.color.get("hue"));At(()=>s.value,()=>{p()});function l(v){v.target!==r.value&&c(v)}function c(v){if(!i.value||!r.value)return;const b=n.vnode.el.getBoundingClientRect(),{clientX:C,clientY:T}=S3(v);let E;if(e.vertical){let A=T-b.top;A=Math.min(A,b.height-r.value.offsetHeight/2),A=Math.max(r.value.offsetHeight/2,A),E=Math.round((A-r.value.offsetHeight/2)/(b.height-r.value.offsetHeight)*360)}else{let A=C-b.left;A=Math.min(A,b.width-r.value.offsetWidth/2),A=Math.max(r.value.offsetWidth/2,A),E=Math.round((A-r.value.offsetWidth/2)/(b.width-r.value.offsetWidth)*360)}e.color.set("hue",E)}function h(){if(!r.value)return 0;const v=n.vnode.el;if(e.vertical)return 0;const _=e.color.get("hue");return v?Math.round(_*(v.offsetWidth-r.value.offsetWidth/2)/360):0}function f(){if(!r.value)return 0;const v=n.vnode.el;if(!e.vertical)return 0;const _=e.color.get("hue");return v?Math.round(_*(v.offsetHeight-r.value.offsetHeight/2)/360):0}function p(){a.value=h(),o.value=f()}return Un(()=>{if(!i.value||!r.value)return;const v={drag:_=>{c(_)},end:_=>{c(_)}};dw(i.value,v),dw(r.value,v),p()}),{bar:i,thumb:r,thumbLeft:a,thumbTop:o,hueValue:s,handleClick:l,update:p,ns:t}}});function qxe(e,t,n,r,i,a){return te(),me("div",{class:se([e.ns.b(),e.ns.is("vertical",e.vertical)])},[V("div",{ref:"bar",class:se(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),V("div",{ref:"thumb",class:se(e.ns.e("thumb")),style:_n({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Zxe=Kt(Kxe,[["render",qxe],["__file","hue-slider.vue"]]);const Yxe=Wt({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:$a,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:eo.teleported,predefine:{type:Qe(Array)},validateEvent:{type:Boolean,default:!0},...yo(["ariaLabel"])}),Xxe={[tr]:e=>Ln(e)||ro(e),[ki]:e=>Ln(e)||ro(e),activeChange:e=>Ln(e)||ro(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},lZ=Symbol("colorPickerContextKey"),j6=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Jxe=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Qxe=function(e){return typeof e=="string"&&e.includes("%")},Cy=function(e,t){Jxe(e)&&(e="100%");const n=Qxe(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},U6={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},AC=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${U6[t]||t}${U6[n]||n}`},W6=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${AC(e)}${AC(t)}${AC(n)}`},uP={A:10,B:11,C:12,D:13,E:14,F:15},Fp=function(e){return e.length===2?(uP[e[0].toUpperCase()]||+e[0])*16+(uP[e[1].toUpperCase()]||+e[1]):uP[e[1].toUpperCase()]||+e[1]},eSe=function(e,t,n){t=t/100,n=n/100;let r=t;const i=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,r*=i<=1?i:2-i;const a=(n+t)/2,o=n===0?2*r/(i+r):2*t/(n+t);return{h:e,s:o*100,v:a*100}},G6=(e,t,n)=>{e=Cy(e,255),t=Cy(t,255),n=Cy(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let a;const o=r,s=r-i,l=r===0?0:s/r;if(r===i)a=0;else{switch(r){case e:{a=(t-n)/s+(t<n?6:0);break}case t:{a=(n-e)/s+2;break}case n:{a=(e-t)/s+4;break}}a/=6}return{h:a*360,s:l*100,v:o*100}},_b=function(e,t,n){e=Cy(e,360)*6,t=Cy(t,100),n=Cy(n,100);const r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,c=[n,o,a,a,s,n][l],h=[s,n,n,o,a,a][l],f=[a,a,s,n,n,o][l];return{r:Math.round(c*255),g:Math.round(h*255),b:Math.round(f*255)}};class x1{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in t)Er(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const r in t)Er(t,r)&&this.set(r,t[r]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return _b(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(r,i,a)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(t.includes("hsl")){const r=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s:a,v:o}=eSe(r[0],r[1],r[2]);n(i,a,o)}}else if(t.includes("hsv")){const r=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&n(r[0],r[1],r[2])}else if(t.includes("rgb")){const r=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s:a,v:o}=G6(r[0],r[1],r[2]);n(i,a,o)}}else if(t.includes("#")){const r=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let i,a,o;r.length===3?(i=Fp(r[0]+r[0]),a=Fp(r[1]+r[1]),o=Fp(r[2]+r[2])):(r.length===6||r.length===8)&&(i=Fp(r.slice(0,2)),a=Fp(r.slice(2,4)),o=Fp(r.slice(4,6))),r.length===8?this._alpha=Fp(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:s,s:l,v:c}=G6(i,a,o);n(s,l,c)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:r,_alpha:i,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const o=j6(t,n/100,r/100);this.value=`hsla(${t}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${W6(_b(t,n,r))}${AC(i*255/100)}`;break}default:{const{r:o,g:s,b:l}=_b(t,n,r);this.value=`rgba(${o}, ${s}, ${l}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const o=j6(t,n/100,r/100);this.value=`hsl(${t}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:o,g:s,b:l}=_b(t,n,r);this.value=`rgb(${o}, ${s}, ${l})`;break}default:this.value=W6(_b(t,n,r))}}}const tSe=Be({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=Rt("color-predefine"),{currentColor:n}=un(lZ),r=le(a(e.colors,e.color));At(()=>n.value,o=>{const s=new x1;s.fromString(o),r.value.forEach(l=>{l.selected=s.compare(l)})}),ko(()=>{r.value=a(e.colors,e.color)});function i(o){e.color.fromString(e.colors[o])}function a(o,s){return o.map(l=>{const c=new x1;return c.enableAlpha=e.enableAlpha,c.format="rgba",c.fromString(l),c.selected=c.value===s.value,c})}return{rgbaColors:r,handleSelect:i,ns:t}}});function nSe(e,t,n,r,i,a){return te(),me("div",{class:se(e.ns.b())},[V("div",{class:se(e.ns.e("colors"))},[(te(!0),me(hn,null,Kn(e.rgbaColors,(o,s)=>(te(),me("div",{key:e.colors[s],class:se([e.ns.e("color-selector"),e.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>e.handleSelect(s)},[V("div",{style:_n({backgroundColor:o.value})},null,4)],10,["onClick"]))),128))],2)],2)}var rSe=Kt(tSe,[["render",nSe],["__file","predefine.vue"]]);const iSe=Be({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Rt("color-svpanel"),n=er(),r=le(0),i=le(0),a=le("hsl(0, 100%, 50%)"),o=X(()=>{const c=e.color.get("hue"),h=e.color.get("value");return{hue:c,value:h}});function s(){const c=e.color.get("saturation"),h=e.color.get("value"),f=n.vnode.el,{clientWidth:p,clientHeight:v}=f;i.value=c*p/100,r.value=(100-h)*v/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(c){const f=n.vnode.el.getBoundingClientRect(),{clientX:p,clientY:v}=S3(c);let _=p-f.left,b=v-f.top;_=Math.max(0,_),_=Math.min(_,f.width),b=Math.max(0,b),b=Math.min(b,f.height),i.value=_,r.value=b,e.color.set({saturation:_/f.width*100,value:100-b/f.height*100})}return At(()=>o.value,()=>{s()}),Un(()=>{dw(n.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),s()}),{cursorTop:r,cursorLeft:i,background:a,colorValue:o,handleDrag:l,update:s,ns:t}}});function aSe(e,t,n,r,i,a){return te(),me("div",{class:se(e.ns.b()),style:_n({backgroundColor:e.background})},[V("div",{class:se(e.ns.e("white"))},null,2),V("div",{class:se(e.ns.e("black"))},null,2),V("div",{class:se(e.ns.e("cursor")),style:_n({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[V("div")],6)],6)}var oSe=Kt(iSe,[["render",aSe],["__file","sv-panel.vue"]]);const sSe=Be({name:"ElColorPicker"}),lSe=Be({...sSe,props:Yxe,emits:Xxe,setup(e,{expose:t,emit:n}){const r=e,{t:i}=Sr(),a=Rt("color"),{formItem:o}=es(),s=Ea(),l=Ts(),{inputId:c,isLabeledByFormItem:h}=ac(r,{formItemContext:o}),f=le(),p=le(),v=le(),_=le(),b=le(),C=le(),{isFocused:T,handleFocus:E,handleBlur:A}=cx(b,{beforeFocus(){return l.value},beforeBlur(Ue){var yt;return(yt=_.value)==null?void 0:yt.isFocusInsideContent(Ue)},afterBlur(){J(!1),ee()}});let I=!0;const O=Ar(new x1({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),B=le(!1),N=le(!1),H=le(""),j=X(()=>!r.modelValue&&!N.value?"transparent":ue(O,r.showAlpha)),W=X(()=>!r.modelValue&&!N.value?"":O.value),U=X(()=>h.value?void 0:r.ariaLabel||i("el.colorpicker.defaultLabel")),Y=X(()=>h.value?o==null?void 0:o.labelId:void 0),ie=X(()=>[a.b("picker"),a.is("disabled",l.value),a.bm("picker",s.value),a.is("focused",T.value)]);function ue(Ue,yt){if(!(Ue instanceof x1))throw new TypeError("color should be instance of _color Class");const{r:Ne,g:dt,b:Le}=Ue.toRgb();return yt?`rgba(${Ne}, ${dt}, ${Le}, ${Ue.get("alpha")/100})`:`rgb(${Ne}, ${dt}, ${Le})`}function J(Ue){B.value=Ue}const q=Ks(J,100,{leading:!0});function ce(){l.value||J(!0)}function re(){q(!1),ee()}function ee(){bn(()=>{r.modelValue?O.fromString(r.modelValue):(O.value="",bn(()=>{N.value=!1}))})}function oe(){l.value||q(!B.value)}function be(){O.fromString(H.value)}function we(){const Ue=O.value;n(tr,Ue),n("change",Ue),r.validateEvent&&(o==null||o.validate("change").catch(yt=>void 0)),q(!1),bn(()=>{const yt=new x1({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});O.compare(yt)||ee()})}function pe(){q(!1),n(tr,null),n("change",null),r.modelValue!==null&&r.validateEvent&&(o==null||o.validate("change").catch(Ue=>void 0)),ee()}function Ce(){B.value&&(re(),T.value&&Ee())}function Ve(Ue){Ue.preventDefault(),Ue.stopPropagation(),J(!1),ee()}function et(Ue){switch(Ue.code){case En.enter:case En.space:Ue.preventDefault(),Ue.stopPropagation(),ce(),C.value.focus();break;case En.esc:Ve(Ue);break}}function Ee(){b.value.focus()}function Je(){b.value.blur()}return Un(()=>{r.modelValue&&(H.value=W.value)}),At(()=>r.modelValue,Ue=>{Ue?Ue&&Ue!==O.value&&(I=!1,O.fromString(Ue)):N.value=!1}),At(()=>W.value,Ue=>{H.value=Ue,I&&n("activeChange",Ue),I=!0}),At(()=>O.value,()=>{!r.modelValue&&!N.value&&(N.value=!0)}),At(()=>B.value,()=>{bn(()=>{var Ue,yt,Ne;(Ue=f.value)==null||Ue.update(),(yt=p.value)==null||yt.update(),(Ne=v.value)==null||Ne.update()})}),pr(lZ,{currentColor:W}),t({color:O,show:ce,hide:re,focus:Ee,blur:Je}),(Ue,yt)=>(te(),ft(w(Po),{ref_key:"popper",ref:_,visible:B.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[w(a).be("picker","panel"),w(a).b("dropdown"),Ue.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Ue.teleported,transition:`${w(a).namespace.value}-zoom-in-top`,persistent:"",onHide:Ne=>J(!1)},{content:ge(()=>[In((te(),me("div",{onKeydown:oi(Ve,["esc"])},[V("div",{class:se(w(a).be("dropdown","main-wrapper"))},[de(Zxe,{ref_key:"hue",ref:f,class:"hue-slider",color:w(O),vertical:""},null,8,["color"]),de(oSe,{ref_key:"sv",ref:p,color:w(O)},null,8,["color"])],2),Ue.showAlpha?(te(),ft(Gxe,{key:0,ref_key:"alpha",ref:v,color:w(O)},null,8,["color"])):Ge("v-if",!0),Ue.predefine?(te(),ft(rSe,{key:1,ref:"predefine","enable-alpha":Ue.showAlpha,color:w(O),colors:Ue.predefine},null,8,["enable-alpha","color","colors"])):Ge("v-if",!0),V("div",{class:se(w(a).be("dropdown","btns"))},[V("span",{class:se(w(a).be("dropdown","value"))},[de(w(Zo),{ref_key:"inputRef",ref:C,modelValue:H.value,"onUpdate:modelValue":Ne=>H.value=Ne,"validate-event":!1,size:"small",onKeyup:oi(be,["enter"]),onBlur:be},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),de(w(io),{class:se(w(a).be("dropdown","link-btn")),text:"",size:"small",onClick:pe},{default:ge(()=>[$t(Xe(w(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),de(w(io),{plain:"",size:"small",class:se(w(a).be("dropdown","btn")),onClick:we},{default:ge(()=>[$t(Xe(w(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[w(Xd),Ce]])]),default:ge(()=>[V("div",sr({id:w(c),ref_key:"triggerRef",ref:b},Ue.$attrs,{class:w(ie),role:"button","aria-label":w(U),"aria-labelledby":w(Y),"aria-description":w(i)("el.colorpicker.description",{color:Ue.modelValue||""}),"aria-disabled":w(l),tabindex:w(l)?-1:Ue.tabindex,onKeydown:et,onFocus:w(E),onBlur:w(A)}),[w(l)?(te(),me("div",{key:0,class:se(w(a).be("picker","mask"))},null,2)):Ge("v-if",!0),V("div",{class:se(w(a).be("picker","trigger")),onClick:oe},[V("span",{class:se([w(a).be("picker","color"),w(a).is("alpha",Ue.showAlpha)])},[V("span",{class:se(w(a).be("picker","color-inner")),style:_n({backgroundColor:w(j)})},[In(de(w(yn),{class:se([w(a).be("picker","icon"),w(a).is("icon-arrow-down")])},{default:ge(()=>[de(w(ah))]),_:1},8,["class"]),[[Lr,Ue.modelValue||N.value]]),In(de(w(yn),{class:se([w(a).be("picker","empty"),w(a).is("icon-close")])},{default:ge(()=>[de(w(Yu))]),_:1},8,["class"]),[[Lr,!Ue.modelValue&&!N.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var uSe=Kt(lSe,[["__file","color-picker.vue"]]);const cSe=Wn(uSe),dSe=Be({name:"ElContainer"}),hSe=Be({...dSe,props:{direction:{type:String}},setup(e){const t=e,n=qa(),r=Rt("container"),i=X(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:n&&n.default?n.default().some(o=>{const s=o.type.name;return s==="ElHeader"||s==="ElFooter"}):!1);return(a,o)=>(te(),me("section",{class:se([w(r).b(),w(r).is("vertical",w(i))])},[st(a.$slots,"default")],2))}});var fSe=Kt(hSe,[["__file","container.vue"]]);const pSe=Be({name:"ElAside"}),vSe=Be({...pSe,props:{width:{type:String,default:null}},setup(e){const t=e,n=Rt("aside"),r=X(()=>t.width?n.cssVarBlock({width:t.width}):{});return(i,a)=>(te(),me("aside",{class:se(w(n).b()),style:_n(w(r))},[st(i.$slots,"default")],6))}});var uZ=Kt(vSe,[["__file","aside.vue"]]);const mSe=Be({name:"ElFooter"}),gSe=Be({...mSe,props:{height:{type:String,default:null}},setup(e){const t=e,n=Rt("footer"),r=X(()=>t.height?n.cssVarBlock({height:t.height}):{});return(i,a)=>(te(),me("footer",{class:se(w(n).b()),style:_n(w(r))},[st(i.$slots,"default")],6))}});var cZ=Kt(gSe,[["__file","footer.vue"]]);const ySe=Be({name:"ElHeader"}),_Se=Be({...ySe,props:{height:{type:String,default:null}},setup(e){const t=e,n=Rt("header"),r=X(()=>t.height?n.cssVarBlock({height:t.height}):{});return(i,a)=>(te(),me("header",{class:se(w(n).b()),style:_n(w(r))},[st(i.$slots,"default")],6))}});var dZ=Kt(_Se,[["__file","header.vue"]]);const bSe=Be({name:"ElMain"}),wSe=Be({...bSe,setup(e){const t=Rt("main");return(n,r)=>(te(),me("main",{class:se(w(t).b())},[st(n.$slots,"default")],2))}});var hZ=Kt(wSe,[["__file","main.vue"]]);const xSe=Wn(fSe,{Aside:uZ,Footer:cZ,Header:dZ,Main:hZ}),SSe=Ki(uZ),CSe=Ki(cZ),TSe=Ki(dZ),MSe=Ki(hZ);var fZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r){var i=r.prototype,a=i.format;i.format=function(o){var s=this,l=this.$locale();if(!this.isValid())return a.bind(this)(o);var c=this.$utils(),h=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return l.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return l.ordinal(s.week(),"W");case"w":case"ww":return c.s(s.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(s.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(s.$H===0?24:s.$H),f==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return f}});return a.bind(this)(h)}}})})(fZ);var kSe=fZ.exports;const ESe=oc(kSe);var pZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){var n="week",r="year";return function(i,a,o){var s=a.prototype;s.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var h=o(this).startOf(r).add(1,r).date(c),f=o(this).endOf(n);if(h.isBefore(f))return 1}var p=o(this).startOf(r).date(c).startOf(n).subtract(1,"millisecond"),v=this.diff(p,n,!0);return v<0?o(this).startOf("week").week():Math.ceil(v)},s.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(pZ);var ASe=pZ.exports;const PSe=oc(ASe);var vZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r){r.prototype.weekYear=function(){var i=this.month(),a=this.week(),o=this.year();return a===1&&i===11?o+1:i===0&&a>=52?o-1:o}}})})(vZ);var ISe=vZ.exports;const LSe=oc(ISe);var mZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r,i){r.prototype.dayOfYear=function(a){var o=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return a==null?o:this.add(a-o,"day")}}})})(mZ);var DSe=mZ.exports;const RSe=oc(DSe);var gZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r){r.prototype.isSameOrAfter=function(i,a){return this.isSame(i,a)||this.isAfter(i,a)}}})})(gZ);var OSe=gZ.exports;const zSe=oc(OSe);var yZ={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(od,function(){return function(n,r){r.prototype.isSameOrBefore=function(i,a){return this.isSame(i,a)||this.isBefore(i,a)}}})})(yZ);var BSe=yZ.exports;const FSe=oc(BSe),dk=Symbol(),NSe=Wt({...S5,type:{type:Qe(String),default:"date"}}),$Se=["date","dates","year","years","month","months","week","range"],T5=Wt({disabledDate:{type:Qe(Function)},date:{type:Qe(Object),required:!0},minDate:{type:Qe(Object)},maxDate:{type:Qe(Object)},parsedValue:{type:Qe([Object,Array])},rangeState:{type:Qe(Object),default:()=>({endDate:null,selecting:!1})}}),_Z=Wt({type:{type:Qe(String),required:!0,values:Jve},dateFormat:String,timeFormat:String}),M5=Wt({unlinkPanels:Boolean,parsedValue:{type:Qe(Array)}}),k5=e=>({type:String,values:$Se,default:e}),VSe=Wt({..._Z,parsedValue:{type:Qe([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),e0=e=>{if(!sn(e))return!1;const[t,n]=e;return jn.isDayjs(t)&&jn.isDayjs(n)&&t.isSameOrBefore(n)},E5=(e,{lang:t,unit:n,unlinkPanels:r})=>{let i;if(sn(e)){let[a,o]=e.map(s=>jn(s).locale(t));return r||(o=a.add(1,n)),[a,o]}else e?i=jn(e):i=jn();return i=i.locale(t),[i,i.add(1,n)]},HSe=(e,t,{columnIndexOffset:n,startDate:r,nextEndDate:i,now:a,unit:o,relativeDateGetter:s,setCellMetadata:l,setRowMetadata:c})=>{for(let h=0;h<e.row;h++){const f=t[h];for(let p=0;p<e.column;p++){let v=f[p+n];v||(v={row:h,column:p,type:"normal",inRange:!1,start:!1,end:!1});const _=h*e.column+p,b=s(_);v.dayjs=b,v.date=b.toDate(),v.timestamp=b.valueOf(),v.type="normal",v.inRange=!!(r&&b.isSameOrAfter(r,o)&&i&&b.isSameOrBefore(i,o))||!!(r&&b.isSameOrBefore(r,o)&&i&&b.isSameOrAfter(i,o)),r!=null&&r.isSameOrAfter(i)?(v.start=!!i&&b.isSame(i,o),v.end=r&&b.isSame(r,o)):(v.start=!!r&&b.isSame(r,o),v.end=!!i&&b.isSame(i,o)),b.isSame(a,o)&&(v.type="today"),l==null||l(v,{rowIndex:h,columnIndex:p}),f[p+n]=v}c==null||c(f)}},ET=(e,t,n)=>{const r=jn().locale(n).startOf("month").month(t).year(e),i=r.daysInMonth();return Cf(i).map(a=>r.add(a,"day").toDate())},hw=(e,t,n,r)=>{const i=jn().year(e).month(t).startOf("month"),a=ET(e,t,n).find(o=>!(r!=null&&r(o)));return a?jn(a).locale(n):i.locale(n)},MD=(e,t,n)=>{const r=e.year();if(!(n!=null&&n(e.toDate())))return e.locale(t);const i=e.month();if(!ET(r,i,t).every(n))return hw(r,i,t,n);for(let a=0;a<12;a++)if(!ET(r,a,t).every(n))return hw(r,a,t,n);return e},jSe=Wt({...T5,cellClassName:{type:Qe(Function)},showWeekNumber:Boolean,selectionMode:k5("date")}),USe=["changerange","pick","select"],kD=(e="")=>["normal","today"].includes(e),WSe=(e,t)=>{const{lang:n}=Sr(),r=le(),i=le(),a=le(),o=le(),s=le([[],[],[],[],[],[]]);let l=!1;const c=e.date.$locale().weekStart||7,h=e.date.locale("en").localeData().weekdaysShort().map(ee=>ee.toLowerCase()),f=X(()=>c>3?7-c:-c),p=X(()=>{const ee=e.date.startOf("month");return ee.subtract(ee.day()||7,"day")}),v=X(()=>h.concat(h).slice(c,c+7)),_=X(()=>RG(w(I)).some(ee=>ee.isCurrent)),b=X(()=>{const ee=e.date.startOf("month"),oe=ee.day()||7,be=ee.daysInMonth(),we=ee.subtract(1,"month").daysInMonth();return{startOfMonthDay:oe,dateCountOfMonth:be,dateCountOfLastMonth:we}}),C=X(()=>e.selectionMode==="dates"?ms(e.parsedValue):[]),T=(ee,{count:oe,rowIndex:be,columnIndex:we})=>{const{startOfMonthDay:pe,dateCountOfMonth:Ce,dateCountOfLastMonth:Ve}=w(b),et=w(f);if(be>=0&&be<=1){const Ee=pe+et<0?7+pe+et:pe+et;if(we+be*7>=Ee)return ee.text=oe,!0;ee.text=Ve-(Ee-we%7)+1+be*7,ee.type="prev-month"}else return oe<=Ce?ee.text=oe:(ee.text=oe-Ce,ee.type="next-month"),!0;return!1},E=(ee,{columnIndex:oe,rowIndex:be},we)=>{const{disabledDate:pe,cellClassName:Ce}=e,Ve=w(C),et=T(ee,{count:we,rowIndex:be,columnIndex:oe}),Ee=ee.dayjs.toDate();return ee.selected=Ve.find(Je=>Je.isSame(ee.dayjs,"day")),ee.isSelected=!!ee.selected,ee.isCurrent=B(ee),ee.disabled=pe==null?void 0:pe(Ee),ee.customClass=Ce==null?void 0:Ce(Ee),et},A=ee=>{if(e.selectionMode==="week"){const[oe,be]=e.showWeekNumber?[1,7]:[0,6],we=re(ee[oe+1]);ee[oe].inRange=we,ee[oe].start=we,ee[be].inRange=we,ee[be].end=we}},I=X(()=>{const{minDate:ee,maxDate:oe,rangeState:be,showWeekNumber:we}=e,pe=w(f),Ce=w(s),Ve="day";let et=1;if(we)for(let Ee=0;Ee<6;Ee++)Ce[Ee][0]||(Ce[Ee][0]={type:"week",text:w(p).add(Ee*7+1,Ve).week()});return HSe({row:6,column:7},Ce,{startDate:ee,columnIndexOffset:we?1:0,nextEndDate:be.endDate||oe||be.selecting&&ee||null,now:jn().locale(w(n)).startOf(Ve),unit:Ve,relativeDateGetter:Ee=>w(p).add(Ee-pe,Ve),setCellMetadata:(...Ee)=>{E(...Ee,et)&&(et+=1)},setRowMetadata:A}),Ce});At(()=>e.date,async()=>{var ee;(ee=w(r))!=null&&ee.contains(document.activeElement)&&(await bn(),await O())});const O=async()=>{var ee;return(ee=w(i))==null?void 0:ee.focus()},B=ee=>e.selectionMode==="date"&&kD(ee.type)&&N(ee,e.parsedValue),N=(ee,oe)=>oe?jn(oe).locale(w(n)).isSame(e.date.date(Number(ee.text)),"day"):!1,H=(ee,oe)=>{const be=ee*7+(oe-(e.showWeekNumber?1:0))-w(f);return w(p).add(be,"day")},j=ee=>{var oe;if(!e.rangeState.selecting)return;let be=ee.target;if(be.tagName==="SPAN"&&(be=(oe=be.parentNode)==null?void 0:oe.parentNode),be.tagName==="DIV"&&(be=be.parentNode),be.tagName!=="TD")return;const we=be.parentNode.rowIndex-1,pe=be.cellIndex;w(I)[we][pe].disabled||(we!==w(a)||pe!==w(o))&&(a.value=we,o.value=pe,t("changerange",{selecting:!0,endDate:H(we,pe)}))},W=ee=>!w(_)&&(ee==null?void 0:ee.text)===1&&ee.type==="normal"||ee.isCurrent,U=ee=>{l||w(_)||e.selectionMode!=="date"||ce(ee,!0)},Y=ee=>{ee.target.closest("td")&&(l=!0)},ie=ee=>{ee.target.closest("td")&&(l=!1)},ue=ee=>{!e.rangeState.selecting||!e.minDate?(t("pick",{minDate:ee,maxDate:null}),t("select",!0)):(ee>=e.minDate?t("pick",{minDate:e.minDate,maxDate:ee}):t("pick",{minDate:ee,maxDate:e.minDate}),t("select",!1))},J=ee=>{const oe=ee.week(),be=`${ee.year()}w${oe}`;t("pick",{year:ee.year(),week:oe,value:be,date:ee.startOf("week")})},q=(ee,oe)=>{const be=oe?ms(e.parsedValue).filter(we=>(we==null?void 0:we.valueOf())!==ee.valueOf()):ms(e.parsedValue).concat([ee]);t("pick",be)},ce=(ee,oe=!1)=>{const be=ee.target.closest("td");if(!be)return;const we=be.parentNode.rowIndex-1,pe=be.cellIndex,Ce=w(I)[we][pe];if(Ce.disabled||Ce.type==="week")return;const Ve=H(we,pe);switch(e.selectionMode){case"range":{ue(Ve);break}case"date":{t("pick",Ve,oe);break}case"week":{J(Ve);break}case"dates":{q(Ve,!!Ce.selected);break}}},re=ee=>{if(e.selectionMode!=="week")return!1;let oe=e.date.startOf("day");if(ee.type==="prev-month"&&(oe=oe.subtract(1,"month")),ee.type==="next-month"&&(oe=oe.add(1,"month")),oe=oe.date(Number.parseInt(ee.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const be=(e.parsedValue.day()-c+7)%7-1;return e.parsedValue.subtract(be,"day").isSame(oe,"day")}return!1};return{WEEKS:v,rows:I,tbodyRef:r,currentCellRef:i,focus:O,isCurrent:B,isWeekActive:re,isSelectedCell:W,handlePickDate:ce,handleMouseUp:ie,handleMouseDown:Y,handleMouseMove:j,handleFocus:U}},GSe=(e,{isCurrent:t,isWeekActive:n})=>{const r=Rt("date-table"),{t:i}=Sr(),a=X(()=>[r.b(),{"is-week-mode":e.selectionMode==="week"}]),o=X(()=>i("el.datepicker.dateTablePrompt")),s=X(()=>i("el.datepicker.week"));return{tableKls:a,tableLabel:o,weekLabel:s,getCellClasses:h=>{const f=[];return kD(h.type)&&!h.disabled?(f.push("available"),h.type==="today"&&f.push("today")):f.push(h.type),t(h)&&f.push("current"),h.inRange&&(kD(h.type)||e.selectionMode==="week")&&(f.push("in-range"),h.start&&f.push("start-date"),h.end&&f.push("end-date")),h.disabled&&f.push("disabled"),h.selected&&f.push("selected"),h.customClass&&f.push(h.customClass),f.join(" ")},getRowKls:h=>[r.e("row"),{current:n(h)}],t:i}},KSe=Wt({cell:{type:Qe(Object)}});var A5=Be({name:"ElDatePickerCell",props:KSe,setup(e){const t=Rt("date-table-cell"),{slots:n}=un(dk);return()=>{const{cell:r}=e;return st(n,"default",{...r},()=>{var i;return[de("div",{class:t.b()},[de("span",{class:t.e("text")},[(i=r==null?void 0:r.renderText)!=null?i:r==null?void 0:r.text])])]})}}});const qSe=Be({__name:"basic-date-table",props:jSe,emits:USe,setup(e,{expose:t,emit:n}){const r=e,{WEEKS:i,rows:a,tbodyRef:o,currentCellRef:s,focus:l,isCurrent:c,isWeekActive:h,isSelectedCell:f,handlePickDate:p,handleMouseUp:v,handleMouseDown:_,handleMouseMove:b,handleFocus:C}=WSe(r,n),{tableLabel:T,tableKls:E,weekLabel:A,getCellClasses:I,getRowKls:O,t:B}=GSe(r,{isCurrent:c,isWeekActive:h});return t({focus:l}),(N,H)=>(te(),me("table",{"aria-label":w(T),class:se(w(E)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:w(p),onMousemove:w(b),onMousedown:Fn(w(_),["prevent"]),onMouseup:w(v)},[V("tbody",{ref_key:"tbodyRef",ref:o},[V("tr",null,[N.showWeekNumber?(te(),me("th",{key:0,scope:"col"},Xe(w(A)),1)):Ge("v-if",!0),(te(!0),me(hn,null,Kn(w(i),(j,W)=>(te(),me("th",{key:W,"aria-label":w(B)("el.datepicker.weeksFull."+j),scope:"col"},Xe(w(B)("el.datepicker.weeks."+j)),9,["aria-label"]))),128))]),(te(!0),me(hn,null,Kn(w(a),(j,W)=>(te(),me("tr",{key:W,class:se(w(O)(j[1]))},[(te(!0),me(hn,null,Kn(j,(U,Y)=>(te(),me("td",{key:`${W}.${Y}`,ref_for:!0,ref:ie=>w(f)(U)&&(s.value=ie),class:se(w(I)(U)),"aria-current":U.isCurrent?"date":void 0,"aria-selected":U.isCurrent,tabindex:w(f)(U)?0:-1,onFocus:w(C)},[de(w(A5),{cell:U},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var ED=Kt(qSe,[["__file","basic-date-table.vue"]]);const ZSe=Wt({...T5,selectionMode:k5("month")}),YSe=Be({__name:"basic-month-table",props:ZSe,emits:["changerange","pick","select"],setup(e,{expose:t,emit:n}){const r=e,i=Rt("month-table"),{t:a,lang:o}=Sr(),s=le(),l=le(),c=le(r.date.locale("en").localeData().monthsShort().map(A=>A.toLowerCase())),h=le([[],[],[]]),f=le(),p=le(),v=X(()=>{var A,I;const O=h.value,B=jn().locale(o.value).startOf("month");for(let N=0;N<3;N++){const H=O[N];for(let j=0;j<4;j++){const W=H[j]||(H[j]={row:N,column:j,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});W.type="normal";const U=N*4+j,Y=r.date.startOf("year").month(U),ie=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;W.inRange=!!(r.minDate&&Y.isSameOrAfter(r.minDate,"month")&&ie&&Y.isSameOrBefore(ie,"month"))||!!(r.minDate&&Y.isSameOrBefore(r.minDate,"month")&&ie&&Y.isSameOrAfter(ie,"month")),(A=r.minDate)!=null&&A.isSameOrAfter(ie)?(W.start=!!(ie&&Y.isSame(ie,"month")),W.end=r.minDate&&Y.isSame(r.minDate,"month")):(W.start=!!(r.minDate&&Y.isSame(r.minDate,"month")),W.end=!!(ie&&Y.isSame(ie,"month"))),B.isSame(Y)&&(W.type="today"),W.text=U,W.disabled=((I=r.disabledDate)==null?void 0:I.call(r,Y.toDate()))||!1}}return O}),_=()=>{var A;(A=l.value)==null||A.focus()},b=A=>{const I={},O=r.date.year(),B=new Date,N=A.text;return I.disabled=r.disabledDate?ET(O,N,o.value).every(r.disabledDate):!1,I.current=ms(r.parsedValue).findIndex(H=>jn.isDayjs(H)&&H.year()===O&&H.month()===N)>=0,I.today=B.getFullYear()===O&&B.getMonth()===N,A.inRange&&(I["in-range"]=!0,A.start&&(I["start-date"]=!0),A.end&&(I["end-date"]=!0)),I},C=A=>{const I=r.date.year(),O=A.text;return ms(r.date).findIndex(B=>B.year()===I&&B.month()===O)>=0},T=A=>{var I;if(!r.rangeState.selecting)return;let O=A.target;if(O.tagName==="SPAN"&&(O=(I=O.parentNode)==null?void 0:I.parentNode),O.tagName==="DIV"&&(O=O.parentNode),O.tagName!=="TD")return;const B=O.parentNode.rowIndex,N=O.cellIndex;v.value[B][N].disabled||(B!==f.value||N!==p.value)&&(f.value=B,p.value=N,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(B*4+N)}))},E=A=>{var I;const O=(I=A.target)==null?void 0:I.closest("td");if((O==null?void 0:O.tagName)!=="TD"||Vs(O,"disabled"))return;const B=O.cellIndex,H=O.parentNode.rowIndex*4+B,j=r.date.startOf("year").month(H);if(r.selectionMode==="months"){if(A.type==="keydown"){n("pick",ms(r.parsedValue),!1);return}const W=hw(r.date.year(),H,o.value,r.disabledDate),U=Vs(O,"current")?ms(r.parsedValue).filter(Y=>(Y==null?void 0:Y.month())!==W.month()):ms(r.parsedValue).concat([jn(W)]);n("pick",U)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&j>=r.minDate?n("pick",{minDate:r.minDate,maxDate:j}):n("pick",{minDate:j,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:j,maxDate:null}),n("select",!0)):n("pick",H)};return At(()=>r.date,async()=>{var A,I;(A=s.value)!=null&&A.contains(document.activeElement)&&(await bn(),(I=l.value)==null||I.focus())}),t({focus:_}),(A,I)=>(te(),me("table",{role:"grid","aria-label":w(a)("el.datepicker.monthTablePrompt"),class:se(w(i).b()),onClick:E,onMousemove:T},[V("tbody",{ref_key:"tbodyRef",ref:s},[(te(!0),me(hn,null,Kn(w(v),(O,B)=>(te(),me("tr",{key:B},[(te(!0),me(hn,null,Kn(O,(N,H)=>(te(),me("td",{key:H,ref_for:!0,ref:j=>C(N)&&(l.value=j),class:se(b(N)),"aria-selected":`${C(N)}`,"aria-label":w(a)(`el.datepicker.month${+N.text+1}`),tabindex:C(N)?0:-1,onKeydown:[oi(Fn(E,["prevent","stop"]),["space"]),oi(Fn(E,["prevent","stop"]),["enter"])]},[de(w(A5),{cell:{...N,renderText:w(a)("el.datepicker.months."+c.value[N.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var AD=Kt(YSe,[["__file","basic-month-table.vue"]]);const XSe=Wt({...T5,selectionMode:k5("year")}),JSe=Be({__name:"basic-year-table",props:XSe,emits:["changerange","pick","select"],setup(e,{expose:t,emit:n}){const r=e,i=(I,O)=>{const B=jn(String(I)).locale(O).startOf("year"),H=B.endOf("year").dayOfYear();return Cf(H).map(j=>B.add(j,"day").toDate())},a=Rt("year-table"),{t:o,lang:s}=Sr(),l=le(),c=le(),h=X(()=>Math.floor(r.date.year()/10)*10),f=le([[],[],[]]),p=le(),v=le(),_=X(()=>{var I;const O=f.value,B=jn().locale(s.value).startOf("year");for(let N=0;N<3;N++){const H=O[N];for(let j=0;j<4&&!(N*4+j>=10);j++){let W=H[j];W||(W={row:N,column:j,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),W.type="normal";const U=N*4+j+h.value,Y=jn().year(U),ie=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;W.inRange=!!(r.minDate&&Y.isSameOrAfter(r.minDate,"year")&&ie&&Y.isSameOrBefore(ie,"year"))||!!(r.minDate&&Y.isSameOrBefore(r.minDate,"year")&&ie&&Y.isSameOrAfter(ie,"year")),(I=r.minDate)!=null&&I.isSameOrAfter(ie)?(W.start=!!(ie&&Y.isSame(ie,"year")),W.end=!!(r.minDate&&Y.isSame(r.minDate,"year"))):(W.start=!!(r.minDate&&Y.isSame(r.minDate,"year")),W.end=!!(ie&&Y.isSame(ie,"year"))),B.isSame(Y)&&(W.type="today"),W.text=U;const J=Y.toDate();W.disabled=r.disabledDate&&r.disabledDate(J)||!1,H[j]=W}}return O}),b=()=>{var I;(I=c.value)==null||I.focus()},C=I=>{const O={},B=jn().locale(s.value),N=I.text;return O.disabled=r.disabledDate?i(N,s.value).every(r.disabledDate):!1,O.today=B.year()===N,O.current=ms(r.parsedValue).findIndex(H=>H.year()===N)>=0,I.inRange&&(O["in-range"]=!0,I.start&&(O["start-date"]=!0),I.end&&(O["end-date"]=!0)),O},T=I=>{const O=I.text;return ms(r.date).findIndex(B=>B.year()===O)>=0},E=I=>{var O;const B=(O=I.target)==null?void 0:O.closest("td");if(!B||!B.textContent||Vs(B,"disabled"))return;const N=B.cellIndex,j=B.parentNode.rowIndex*4+N+h.value,W=jn().year(j);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&W>=r.minDate?n("pick",{minDate:r.minDate,maxDate:W}):n("pick",{minDate:W,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:W,maxDate:null}),n("select",!0));else if(r.selectionMode==="years"){if(I.type==="keydown"){n("pick",ms(r.parsedValue),!1);return}const U=MD(W.startOf("year"),s.value,r.disabledDate),Y=Vs(B,"current")?ms(r.parsedValue).filter(ie=>(ie==null?void 0:ie.year())!==j):ms(r.parsedValue).concat([U]);n("pick",Y)}else n("pick",j)},A=I=>{var O;if(!r.rangeState.selecting)return;const B=(O=I.target)==null?void 0:O.closest("td");if(!B)return;const N=B.parentNode.rowIndex,H=B.cellIndex;_.value[N][H].disabled||(N!==p.value||H!==v.value)&&(p.value=N,v.value=H,n("changerange",{selecting:!0,endDate:jn().year(h.value).add(N*4+H,"year")}))};return At(()=>r.date,async()=>{var I,O;(I=l.value)!=null&&I.contains(document.activeElement)&&(await bn(),(O=c.value)==null||O.focus())}),t({focus:b}),(I,O)=>(te(),me("table",{role:"grid","aria-label":w(o)("el.datepicker.yearTablePrompt"),class:se(w(a).b()),onClick:E,onMousemove:A},[V("tbody",{ref_key:"tbodyRef",ref:l},[(te(!0),me(hn,null,Kn(w(_),(B,N)=>(te(),me("tr",{key:N},[(te(!0),me(hn,null,Kn(B,(H,j)=>(te(),me("td",{key:`${N}_${j}`,ref_for:!0,ref:W=>T(H)&&(c.value=W),class:se(["available",C(H)]),"aria-selected":T(H),"aria-label":String(H.text),tabindex:T(H)?0:-1,onKeydown:[oi(Fn(E,["prevent","stop"]),["space"]),oi(Fn(E,["prevent","stop"]),["enter"])]},[de(w(A5),{cell:H},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var PD=Kt(JSe,[["__file","basic-year-table.vue"]]);const QSe=Be({__name:"panel-date-pick",props:VSe,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const n=e,r=(xt,Zt,Ze)=>!0,i=Rt("picker-panel"),a=Rt("date-picker"),o=gm(),s=qa(),{t:l,lang:c}=Sr(),h=un("EP_PICKER_BASE"),f=un(uk),{shortcuts:p,disabledDate:v,cellClassName:_,defaultTime:b}=h.props,C=Gr(h.props,"defaultValue"),T=le(),E=le(jn().locale(c.value)),A=le(!1);let I=!1;const O=X(()=>jn(b).locale(c.value)),B=X(()=>E.value.month()),N=X(()=>E.value.year()),H=le([]),j=le(null),W=le(null),U=xt=>H.value.length>0?r(xt,H.value,n.format||"HH:mm:ss"):!0,Y=xt=>b&&!ct.value&&!A.value&&!I?O.value.year(xt.year()).month(xt.month()).date(xt.date()):Ee.value?xt.millisecond(0):xt.startOf("day"),ie=(xt,...Zt)=>{if(!xt)t("pick",xt,...Zt);else if(sn(xt)){const Ze=xt.map(Y);t("pick",Ze,...Zt)}else t("pick",Y(xt),...Zt);j.value=null,W.value=null,A.value=!1,I=!1},ue=async(xt,Zt)=>{if(oe.value==="date"){xt=xt;let Ze=n.parsedValue?n.parsedValue.year(xt.year()).month(xt.month()).date(xt.date()):xt;U(Ze)||(Ze=H.value[0][0].year(xt.year()).month(xt.month()).date(xt.date())),E.value=Ze,ie(Ze,Ee.value||Zt),n.type==="datetime"&&(await bn(),On())}else oe.value==="week"?ie(xt.date):oe.value==="dates"&&ie(xt,!0)},J=xt=>{const Zt=xt?"add":"subtract";E.value=E.value[Zt](1,"month"),gn("month")},q=xt=>{const Zt=E.value,Ze=xt?"add":"subtract";E.value=ce.value==="year"?Zt[Ze](10,"year"):Zt[Ze](1,"year"),gn("year")},ce=le("date"),re=X(()=>{const xt=l("el.datepicker.year");if(ce.value==="year"){const Zt=Math.floor(N.value/10)*10;return xt?`${Zt} ${xt} - ${Zt+9} ${xt}`:`${Zt} - ${Zt+9}`}return`${N.value} ${xt}`}),ee=xt=>{const Zt=Dn(xt.value)?xt.value():xt.value;if(Zt){I=!0,ie(jn(Zt).locale(c.value));return}xt.onClick&&xt.onClick({attrs:o,slots:s,emit:t})},oe=X(()=>{const{type:xt}=n;return["week","month","months","year","years","dates"].includes(xt)?xt:"date"}),be=X(()=>oe.value==="dates"||oe.value==="months"||oe.value==="years"),we=X(()=>oe.value==="date"?ce.value:oe.value),pe=X(()=>!!p.length),Ce=async(xt,Zt)=>{oe.value==="month"?(E.value=hw(E.value.year(),xt,c.value,v),ie(E.value,!1)):oe.value==="months"?ie(xt,Zt??!0):(E.value=hw(E.value.year(),xt,c.value,v),ce.value="date",["month","year","date","week"].includes(oe.value)&&(ie(E.value,!0),await bn(),On())),gn("month")},Ve=async(xt,Zt)=>{if(oe.value==="year"){const Ze=E.value.startOf("year").year(xt);E.value=MD(Ze,c.value,v),ie(E.value,!1)}else if(oe.value==="years")ie(xt,Zt??!0);else{const Ze=E.value.year(xt);E.value=MD(Ze,c.value,v),ce.value="month",["month","year","date","week"].includes(oe.value)&&(ie(E.value,!0),await bn(),On())}gn("year")},et=async xt=>{ce.value=xt,await bn(),On()},Ee=X(()=>n.type==="datetime"||n.type==="datetimerange"),Je=X(()=>{const xt=Ee.value||oe.value==="dates",Zt=oe.value==="years",Ze=oe.value==="months",Fe=ce.value==="date",ve=ce.value==="year",ke=ce.value==="month";return xt&&Fe||Zt&&ve||Ze&&ke}),Ue=X(()=>v?n.parsedValue?sn(n.parsedValue)?v(n.parsedValue[0].toDate()):v(n.parsedValue.toDate()):!0:!1),yt=()=>{if(be.value)ie(n.parsedValue);else{let xt=n.parsedValue;if(!xt){const Zt=jn(b).locale(c.value),Ze=Rn();xt=Zt.year(Ze.year()).month(Ze.month()).date(Ze.date())}E.value=xt,ie(xt)}},Ne=X(()=>v?v(jn().locale(c.value).toDate()):!1),dt=()=>{const Zt=jn().locale(c.value).toDate();A.value=!0,(!v||!v(Zt))&&U(Zt)&&(E.value=jn().locale(c.value),ie(E.value))},Le=X(()=>n.timeFormat||Tq(n.format)),ze=X(()=>n.dateFormat||Cq(n.format)),ct=X(()=>{if(W.value)return W.value;if(!(!n.parsedValue&&!C.value))return(n.parsedValue||E.value).format(Le.value)}),Lt=X(()=>{if(j.value)return j.value;if(!(!n.parsedValue&&!C.value))return(n.parsedValue||E.value).format(ze.value)}),lt=le(!1),Ct=()=>{lt.value=!0},_t=()=>{lt.value=!1},It=xt=>({hour:xt.hour(),minute:xt.minute(),second:xt.second(),year:xt.year(),month:xt.month(),date:xt.date()}),Bt=(xt,Zt,Ze)=>{const{hour:Fe,minute:ve,second:ke}=It(xt),Oe=n.parsedValue?n.parsedValue.hour(Fe).minute(ve).second(ke):xt;E.value=Oe,ie(E.value,!0),Ze||(lt.value=Zt)},Ft=xt=>{const Zt=jn(xt,Le.value).locale(c.value);if(Zt.isValid()&&U(Zt)){const{year:Ze,month:Fe,date:ve}=It(E.value);E.value=Zt.year(Ze).month(Fe).date(ve),W.value=null,lt.value=!1,ie(E.value,!0)}},cn=xt=>{const Zt=jn(xt,ze.value).locale(c.value);if(Zt.isValid()){if(v&&v(Zt.toDate()))return;const{hour:Ze,minute:Fe,second:ve}=It(E.value);E.value=Zt.hour(Ze).minute(Fe).second(ve),j.value=null,ie(E.value,!0)}},Ot=xt=>jn.isDayjs(xt)&&xt.isValid()&&(v?!v(xt.toDate()):!0),kt=xt=>sn(xt)?xt.map(Zt=>Zt.format(n.format)):xt.format(n.format),fn=xt=>jn(xt,n.format).locale(c.value),Rn=()=>{const xt=jn(C.value).locale(c.value);if(!C.value){const Zt=O.value;return jn().hour(Zt.hour()).minute(Zt.minute()).second(Zt.second()).locale(c.value)}return xt},On=async()=>{var xt;["week","month","year","date"].includes(oe.value)&&((xt=T.value)==null||xt.focus(),oe.value==="week"&&Gt(En.down))},mt=xt=>{const{code:Zt}=xt;[En.up,En.down,En.left,En.right,En.home,En.end,En.pageUp,En.pageDown].includes(Zt)&&(Gt(Zt),xt.stopPropagation(),xt.preventDefault()),[En.enter,En.space,En.numpadEnter].includes(Zt)&&j.value===null&&W.value===null&&(xt.preventDefault(),ie(E.value,!1))},Gt=xt=>{var Zt;const{up:Ze,down:Fe,left:ve,right:ke,home:Oe,end:Me,pageUp:Ae,pageDown:pt}=En,Mt={year:{[Ze]:-4,[Fe]:4,[ve]:-1,[ke]:1,offset:(Et,Vt)=>Et.setFullYear(Et.getFullYear()+Vt)},month:{[Ze]:-4,[Fe]:4,[ve]:-1,[ke]:1,offset:(Et,Vt)=>Et.setMonth(Et.getMonth()+Vt)},week:{[Ze]:-1,[Fe]:1,[ve]:-1,[ke]:1,offset:(Et,Vt)=>Et.setDate(Et.getDate()+Vt*7)},date:{[Ze]:-7,[Fe]:7,[ve]:-1,[ke]:1,[Oe]:Et=>-Et.getDay(),[Me]:Et=>-Et.getDay()+6,[Ae]:Et=>-new Date(Et.getFullYear(),Et.getMonth(),0).getDate(),[pt]:Et=>new Date(Et.getFullYear(),Et.getMonth()+1,0).getDate(),offset:(Et,Vt)=>Et.setDate(Et.getDate()+Vt)}},it=E.value.toDate();for(;Math.abs(E.value.diff(it,"year",!0))<1;){const Et=Mt[we.value];if(!Et)return;if(Et.offset(it,Dn(Et[xt])?Et[xt](it):(Zt=Et[xt])!=null?Zt:0),v&&v(it))break;const Vt=jn(it).locale(c.value);E.value=Vt,t("pick",Vt,!0);break}},gn=xt=>{t("panel-change",E.value.toDate(),xt,ce.value)};return At(()=>oe.value,xt=>{if(["month","year"].includes(xt)){ce.value=xt;return}else if(xt==="years"){ce.value="year";return}else if(xt==="months"){ce.value="month";return}ce.value="date"},{immediate:!0}),At(()=>ce.value,()=>{f==null||f.updatePopper()}),At(()=>C.value,xt=>{xt&&(E.value=Rn())},{immediate:!0}),At(()=>n.parsedValue,xt=>{if(xt){if(be.value||Array.isArray(xt))return;E.value=xt}else E.value=Rn()},{immediate:!0}),t("set-picker-option",["isValidValue",Ot]),t("set-picker-option",["formatToString",kt]),t("set-picker-option",["parseUserInput",fn]),t("set-picker-option",["handleFocusPicker",On]),(xt,Zt)=>(te(),me("div",{class:se([w(i).b(),w(a).b(),{"has-sidebar":xt.$slots.sidebar||w(pe),"has-time":w(Ee)}])},[V("div",{class:se(w(i).e("body-wrapper"))},[st(xt.$slots,"sidebar",{class:se(w(i).e("sidebar"))}),w(pe)?(te(),me("div",{key:0,class:se(w(i).e("sidebar"))},[(te(!0),me(hn,null,Kn(w(p),(Ze,Fe)=>(te(),me("button",{key:Fe,type:"button",class:se(w(i).e("shortcut")),onClick:ve=>ee(Ze)},Xe(Ze.text),11,["onClick"]))),128))],2)):Ge("v-if",!0),V("div",{class:se(w(i).e("body"))},[w(Ee)?(te(),me("div",{key:0,class:se(w(a).e("time-header"))},[V("span",{class:se(w(a).e("editor-wrap"))},[de(w(Zo),{placeholder:w(l)("el.datepicker.selectDate"),"model-value":w(Lt),size:"small","validate-event":!1,onInput:Ze=>j.value=Ze,onChange:cn},null,8,["placeholder","model-value","onInput"])],2),In((te(),me("span",{class:se(w(a).e("editor-wrap"))},[de(w(Zo),{placeholder:w(l)("el.datepicker.selectTime"),"model-value":w(ct),size:"small","validate-event":!1,onFocus:Ct,onInput:Ze=>W.value=Ze,onChange:Ft},null,8,["placeholder","model-value","onInput"]),de(w(kT),{visible:lt.value,format:w(Le),"parsed-value":E.value,onPick:Bt},null,8,["visible","format","parsed-value"])],2)),[[w(Xd),_t]])],2)):Ge("v-if",!0),In(V("div",{class:se([w(a).e("header"),(ce.value==="year"||ce.value==="month")&&w(a).e("header--bordered")])},[V("span",{class:se(w(a).e("prev-btn"))},[V("button",{type:"button","aria-label":w(l)("el.datepicker.prevYear"),class:se(["d-arrow-left",w(i).e("icon-btn")]),onClick:Ze=>q(!1)},[st(xt.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["aria-label","onClick"]),In(V("button",{type:"button","aria-label":w(l)("el.datepicker.prevMonth"),class:se([w(i).e("icon-btn"),"arrow-left"]),onClick:Ze=>J(!1)},[st(xt.$slots,"prev-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1})])],10,["aria-label","onClick"]),[[Lr,ce.value==="date"]])],2),V("span",{role:"button",class:se(w(a).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:oi(Ze=>et("year"),["enter"]),onClick:Ze=>et("year")},Xe(w(re)),43,["onKeydown","onClick"]),In(V("span",{role:"button","aria-live":"polite",tabindex:"0",class:se([w(a).e("header-label"),{active:ce.value==="month"}]),onKeydown:oi(Ze=>et("month"),["enter"]),onClick:Ze=>et("month")},Xe(w(l)(`el.datepicker.month${w(B)+1}`)),43,["onKeydown","onClick"]),[[Lr,ce.value==="date"]]),V("span",{class:se(w(a).e("next-btn"))},[In(V("button",{type:"button","aria-label":w(l)("el.datepicker.nextMonth"),class:se([w(i).e("icon-btn"),"arrow-right"]),onClick:Ze=>J(!0)},[st(xt.$slots,"next-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})])],10,["aria-label","onClick"]),[[Lr,ce.value==="date"]]),V("button",{type:"button","aria-label":w(l)("el.datepicker.nextYear"),class:se([w(i).e("icon-btn"),"d-arrow-right"]),onClick:Ze=>q(!0)},[st(xt.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Lr,ce.value!=="time"]]),V("div",{class:se(w(i).e("content")),onKeydown:mt},[ce.value==="date"?(te(),ft(ED,{key:0,ref_key:"currentViewRef",ref:T,"selection-mode":w(oe),date:E.value,"parsed-value":xt.parsedValue,"disabled-date":w(v),"cell-class-name":w(_),onPick:ue},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Ge("v-if",!0),ce.value==="year"?(te(),ft(PD,{key:1,ref_key:"currentViewRef",ref:T,"selection-mode":w(oe),date:E.value,"disabled-date":w(v),"parsed-value":xt.parsedValue,onPick:Ve},null,8,["selection-mode","date","disabled-date","parsed-value"])):Ge("v-if",!0),ce.value==="month"?(te(),ft(AD,{key:2,ref_key:"currentViewRef",ref:T,"selection-mode":w(oe),date:E.value,"parsed-value":xt.parsedValue,"disabled-date":w(v),onPick:Ce},null,8,["selection-mode","date","parsed-value","disabled-date"])):Ge("v-if",!0)],34)],2)],2),In(V("div",{class:se(w(i).e("footer"))},[In(de(w(io),{text:"",size:"small",class:se(w(i).e("link-btn")),disabled:w(Ne),onClick:dt},{default:ge(()=>[$t(Xe(w(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Lr,!w(be)]]),de(w(io),{plain:"",size:"small",class:se(w(i).e("link-btn")),disabled:w(Ue),onClick:yt},{default:ge(()=>[$t(Xe(w(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Lr,w(Je)]])],2))}});var e2e=Kt(QSe,[["__file","panel-date-pick.vue"]]);const t2e=Wt({..._Z,...M5,visible:Boolean}),bZ=e=>{const{emit:t}=er(),n=gm(),r=qa();return a=>{const o=Dn(a.value)?a.value():a.value;if(o){t("pick",[jn(o[0]).locale(e.value),jn(o[1]).locale(e.value)]);return}a.onClick&&a.onClick({attrs:n,slots:r,emit:t})}},wZ=(e,{defaultValue:t,leftDate:n,rightDate:r,unit:i,onParsedValueChanged:a})=>{const{emit:o}=er(),{pickerNs:s}=un(dk),l=Rt("date-range-picker"),{t:c,lang:h}=Sr(),f=bZ(h),p=le(),v=le(),_=le({endDate:null,selecting:!1}),b=I=>{_.value=I},C=(I=!1)=>{const O=w(p),B=w(v);e0([O,B])&&o("pick",[O,B],I)},T=I=>{_.value.selecting=I,I||(_.value.endDate=null)},E=I=>{if(sn(I)&&I.length===2){const[O,B]=I;p.value=O,n.value=O,v.value=B,a(w(p),w(v))}else A()},A=()=>{const[I,O]=E5(w(t),{lang:w(h),unit:i,unlinkPanels:e.unlinkPanels});p.value=void 0,v.value=void 0,n.value=I,r.value=O};return At(t,I=>{I&&A()},{immediate:!0}),At(()=>e.parsedValue,E,{immediate:!0}),{minDate:p,maxDate:v,rangeState:_,lang:h,ppNs:s,drpNs:l,handleChangeRange:b,handleRangeConfirm:C,handleShortcutClick:f,onSelect:T,onReset:E,t:c}},h2="month",n2e=Be({__name:"panel-date-range",props:t2e,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const n=e,r=un("EP_PICKER_BASE"),{disabledDate:i,cellClassName:a,defaultTime:o,clearable:s}=r.props,l=Gr(r.props,"format"),c=Gr(r.props,"shortcuts"),h=Gr(r.props,"defaultValue"),{lang:f}=Sr(),p=le(jn().locale(f.value)),v=le(jn().locale(f.value).add(1,h2)),{minDate:_,maxDate:b,rangeState:C,ppNs:T,drpNs:E,handleChangeRange:A,handleRangeConfirm:I,handleShortcutClick:O,onSelect:B,onReset:N,t:H}=wZ(n,{defaultValue:h,leftDate:p,rightDate:v,unit:h2,onParsedValueChanged:Zt});At(()=>n.visible,Ze=>{!Ze&&C.value.selecting&&(N(n.parsedValue),B(!1))});const j=le({min:null,max:null}),W=le({min:null,max:null}),U=X(()=>`${p.value.year()} ${H("el.datepicker.year")} ${H(`el.datepicker.month${p.value.month()+1}`)}`),Y=X(()=>`${v.value.year()} ${H("el.datepicker.year")} ${H(`el.datepicker.month${v.value.month()+1}`)}`),ie=X(()=>p.value.year()),ue=X(()=>p.value.month()),J=X(()=>v.value.year()),q=X(()=>v.value.month()),ce=X(()=>!!c.value.length),re=X(()=>j.value.min!==null?j.value.min:_.value?_.value.format(pe.value):""),ee=X(()=>j.value.max!==null?j.value.max:b.value||_.value?(b.value||_.value).format(pe.value):""),oe=X(()=>W.value.min!==null?W.value.min:_.value?_.value.format(we.value):""),be=X(()=>W.value.max!==null?W.value.max:b.value||_.value?(b.value||_.value).format(we.value):""),we=X(()=>n.timeFormat||Tq(l.value)),pe=X(()=>n.dateFormat||Cq(l.value)),Ce=Ze=>e0(Ze)&&(i?!i(Ze[0].toDate())&&!i(Ze[1].toDate()):!0),Ve=()=>{p.value=p.value.subtract(1,"year"),n.unlinkPanels||(v.value=p.value.add(1,"month")),Le("year")},et=()=>{p.value=p.value.subtract(1,"month"),n.unlinkPanels||(v.value=p.value.add(1,"month")),Le("month")},Ee=()=>{n.unlinkPanels?v.value=v.value.add(1,"year"):(p.value=p.value.add(1,"year"),v.value=p.value.add(1,"month")),Le("year")},Je=()=>{n.unlinkPanels?v.value=v.value.add(1,"month"):(p.value=p.value.add(1,"month"),v.value=p.value.add(1,"month")),Le("month")},Ue=()=>{p.value=p.value.add(1,"year"),Le("year")},yt=()=>{p.value=p.value.add(1,"month"),Le("month")},Ne=()=>{v.value=v.value.subtract(1,"year"),Le("year")},dt=()=>{v.value=v.value.subtract(1,"month"),Le("month")},Le=Ze=>{t("panel-change",[p.value.toDate(),v.value.toDate()],Ze)},ze=X(()=>{const Ze=(ue.value+1)%12,Fe=ue.value+1>=12?1:0;return n.unlinkPanels&&new Date(ie.value+Fe,Ze)<new Date(J.value,q.value)}),ct=X(()=>n.unlinkPanels&&J.value*12+q.value-(ie.value*12+ue.value+1)>=12),Lt=X(()=>!(_.value&&b.value&&!C.value.selecting&&e0([_.value,b.value]))),lt=X(()=>n.type==="datetime"||n.type==="datetimerange"),Ct=(Ze,Fe)=>{if(Ze)return o?jn(o[Fe]||o).locale(f.value).year(Ze.year()).month(Ze.month()).date(Ze.date()):Ze},_t=(Ze,Fe=!0)=>{const ve=Ze.minDate,ke=Ze.maxDate,Oe=Ct(ve,0),Me=Ct(ke,1);b.value===Me&&_.value===Oe||(t("calendar-change",[ve.toDate(),ke&&ke.toDate()]),b.value=Me,_.value=Oe,!(!Fe||lt.value)&&I())},It=le(!1),Bt=le(!1),Ft=()=>{It.value=!1},cn=()=>{Bt.value=!1},Ot=(Ze,Fe)=>{j.value[Fe]=Ze;const ve=jn(Ze,pe.value).locale(f.value);if(ve.isValid()){if(i&&i(ve.toDate()))return;Fe==="min"?(p.value=ve,_.value=(_.value||p.value).year(ve.year()).month(ve.month()).date(ve.date()),!n.unlinkPanels&&(!b.value||b.value.isBefore(_.value))&&(v.value=ve.add(1,"month"),b.value=_.value.add(1,"month"))):(v.value=ve,b.value=(b.value||v.value).year(ve.year()).month(ve.month()).date(ve.date()),!n.unlinkPanels&&(!_.value||_.value.isAfter(b.value))&&(p.value=ve.subtract(1,"month"),_.value=b.value.subtract(1,"month")))}},kt=(Ze,Fe)=>{j.value[Fe]=null},fn=(Ze,Fe)=>{W.value[Fe]=Ze;const ve=jn(Ze,we.value).locale(f.value);ve.isValid()&&(Fe==="min"?(It.value=!0,_.value=(_.value||p.value).hour(ve.hour()).minute(ve.minute()).second(ve.second())):(Bt.value=!0,b.value=(b.value||v.value).hour(ve.hour()).minute(ve.minute()).second(ve.second()),v.value=b.value))},Rn=(Ze,Fe)=>{W.value[Fe]=null,Fe==="min"?(p.value=_.value,It.value=!1,(!b.value||b.value.isBefore(_.value))&&(b.value=_.value)):(v.value=b.value,Bt.value=!1,b.value&&b.value.isBefore(_.value)&&(_.value=b.value))},On=(Ze,Fe,ve)=>{W.value.min||(Ze&&(p.value=Ze,_.value=(_.value||p.value).hour(Ze.hour()).minute(Ze.minute()).second(Ze.second())),ve||(It.value=Fe),(!b.value||b.value.isBefore(_.value))&&(b.value=_.value,v.value=Ze))},mt=(Ze,Fe,ve)=>{W.value.max||(Ze&&(v.value=Ze,b.value=(b.value||v.value).hour(Ze.hour()).minute(Ze.minute()).second(Ze.second())),ve||(Bt.value=Fe),b.value&&b.value.isBefore(_.value)&&(_.value=b.value))},Gt=()=>{p.value=E5(w(h),{lang:w(f),unit:"month",unlinkPanels:n.unlinkPanels})[0],v.value=p.value.add(1,"month"),b.value=void 0,_.value=void 0,t("pick",null)},gn=Ze=>sn(Ze)?Ze.map(Fe=>Fe.format(l.value)):Ze.format(l.value),xt=Ze=>sn(Ze)?Ze.map(Fe=>jn(Fe,l.value).locale(f.value)):jn(Ze,l.value).locale(f.value);function Zt(Ze,Fe){if(n.unlinkPanels&&Fe){const ve=(Ze==null?void 0:Ze.year())||0,ke=(Ze==null?void 0:Ze.month())||0,Oe=Fe.year(),Me=Fe.month();v.value=ve===Oe&&ke===Me?Fe.add(1,h2):Fe}else v.value=p.value.add(1,h2),Fe&&(v.value=v.value.hour(Fe.hour()).minute(Fe.minute()).second(Fe.second()))}return t("set-picker-option",["isValidValue",Ce]),t("set-picker-option",["parseUserInput",xt]),t("set-picker-option",["formatToString",gn]),t("set-picker-option",["handleClear",Gt]),(Ze,Fe)=>(te(),me("div",{class:se([w(T).b(),w(E).b(),{"has-sidebar":Ze.$slots.sidebar||w(ce),"has-time":w(lt)}])},[V("div",{class:se(w(T).e("body-wrapper"))},[st(Ze.$slots,"sidebar",{class:se(w(T).e("sidebar"))}),w(ce)?(te(),me("div",{key:0,class:se(w(T).e("sidebar"))},[(te(!0),me(hn,null,Kn(w(c),(ve,ke)=>(te(),me("button",{key:ke,type:"button",class:se(w(T).e("shortcut")),onClick:Oe=>w(O)(ve)},Xe(ve.text),11,["onClick"]))),128))],2)):Ge("v-if",!0),V("div",{class:se(w(T).e("body"))},[w(lt)?(te(),me("div",{key:0,class:se(w(E).e("time-header"))},[V("span",{class:se(w(E).e("editors-wrap"))},[V("span",{class:se(w(E).e("time-picker-wrap"))},[de(w(Zo),{size:"small",disabled:w(C).selecting,placeholder:w(H)("el.datepicker.startDate"),class:se(w(E).e("editor")),"model-value":w(re),"validate-event":!1,onInput:ve=>Ot(ve,"min"),onChange:ve=>kt(ve,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),In((te(),me("span",{class:se(w(E).e("time-picker-wrap"))},[de(w(Zo),{size:"small",class:se(w(E).e("editor")),disabled:w(C).selecting,placeholder:w(H)("el.datepicker.startTime"),"model-value":w(oe),"validate-event":!1,onFocus:ve=>It.value=!0,onInput:ve=>fn(ve,"min"),onChange:ve=>Rn(ve,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),de(w(kT),{visible:It.value,format:w(we),"datetime-role":"start","parsed-value":p.value,onPick:On},null,8,["visible","format","parsed-value"])],2)),[[w(Xd),Ft]])],2),V("span",null,[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})]),V("span",{class:se([w(E).e("editors-wrap"),"is-right"])},[V("span",{class:se(w(E).e("time-picker-wrap"))},[de(w(Zo),{size:"small",class:se(w(E).e("editor")),disabled:w(C).selecting,placeholder:w(H)("el.datepicker.endDate"),"model-value":w(ee),readonly:!w(_),"validate-event":!1,onInput:ve=>Ot(ve,"max"),onChange:ve=>kt(ve,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),In((te(),me("span",{class:se(w(E).e("time-picker-wrap"))},[de(w(Zo),{size:"small",class:se(w(E).e("editor")),disabled:w(C).selecting,placeholder:w(H)("el.datepicker.endTime"),"model-value":w(be),readonly:!w(_),"validate-event":!1,onFocus:ve=>w(_)&&(Bt.value=!0),onInput:ve=>fn(ve,"max"),onChange:ve=>Rn(ve,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),de(w(kT),{"datetime-role":"end",visible:Bt.value,format:w(we),"parsed-value":v.value,onPick:mt},null,8,["visible","format","parsed-value"])],2)),[[w(Xd),cn]])],2)],2)):Ge("v-if",!0),V("div",{class:se([[w(T).e("content"),w(E).e("content")],"is-left"])},[V("div",{class:se(w(E).e("header"))},[V("button",{type:"button",class:se([w(T).e("icon-btn"),"d-arrow-left"]),"aria-label":w(H)("el.datepicker.prevYear"),onClick:Ve},[st(Ze.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["aria-label"]),V("button",{type:"button",class:se([w(T).e("icon-btn"),"arrow-left"]),"aria-label":w(H)("el.datepicker.prevMonth"),onClick:et},[st(Ze.$slots,"prev-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1})])],10,["aria-label"]),Ze.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(ct),class:se([[w(T).e("icon-btn"),{"is-disabled":!w(ct)}],"d-arrow-right"]),"aria-label":w(H)("el.datepicker.nextYear"),onClick:Ue},[st(Ze.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["disabled","aria-label"])):Ge("v-if",!0),Ze.unlinkPanels?(te(),me("button",{key:1,type:"button",disabled:!w(ze),class:se([[w(T).e("icon-btn"),{"is-disabled":!w(ze)}],"arrow-right"]),"aria-label":w(H)("el.datepicker.nextMonth"),onClick:yt},[st(Ze.$slots,"next-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})])],10,["disabled","aria-label"])):Ge("v-if",!0),V("div",null,Xe(w(U)),1)],2),de(ED,{"selection-mode":"range",date:p.value,"min-date":w(_),"max-date":w(b),"range-state":w(C),"disabled-date":w(i),"cell-class-name":w(a),onChangerange:w(A),onPick:_t,onSelect:w(B)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),V("div",{class:se([[w(T).e("content"),w(E).e("content")],"is-right"])},[V("div",{class:se(w(E).e("header"))},[Ze.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(ct),class:se([[w(T).e("icon-btn"),{"is-disabled":!w(ct)}],"d-arrow-left"]),"aria-label":w(H)("el.datepicker.prevYear"),onClick:Ne},[st(Ze.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["disabled","aria-label"])):Ge("v-if",!0),Ze.unlinkPanels?(te(),me("button",{key:1,type:"button",disabled:!w(ze),class:se([[w(T).e("icon-btn"),{"is-disabled":!w(ze)}],"arrow-left"]),"aria-label":w(H)("el.datepicker.prevMonth"),onClick:dt},[st(Ze.$slots,"prev-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1})])],10,["disabled","aria-label"])):Ge("v-if",!0),V("button",{type:"button","aria-label":w(H)("el.datepicker.nextYear"),class:se([w(T).e("icon-btn"),"d-arrow-right"]),onClick:Ee},[st(Ze.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["aria-label"]),V("button",{type:"button",class:se([w(T).e("icon-btn"),"arrow-right"]),"aria-label":w(H)("el.datepicker.nextMonth"),onClick:Je},[st(Ze.$slots,"next-month",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})])],10,["aria-label"]),V("div",null,Xe(w(Y)),1)],2),de(ED,{"selection-mode":"range",date:v.value,"min-date":w(_),"max-date":w(b),"range-state":w(C),"disabled-date":w(i),"cell-class-name":w(a),onChangerange:w(A),onPick:_t,onSelect:w(B)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),w(lt)?(te(),me("div",{key:0,class:se(w(T).e("footer"))},[w(s)?(te(),ft(w(io),{key:0,text:"",size:"small",class:se(w(T).e("link-btn")),onClick:Gt},{default:ge(()=>[$t(Xe(w(H)("el.datepicker.clear")),1)]),_:1},8,["class"])):Ge("v-if",!0),de(w(io),{plain:"",size:"small",class:se(w(T).e("link-btn")),disabled:w(Lt),onClick:ve=>w(I)(!1)},{default:ge(()=>[$t(Xe(w(H)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Ge("v-if",!0)],2))}});var r2e=Kt(n2e,[["__file","panel-date-range.vue"]]);const i2e=Wt({...M5}),a2e=["pick","set-picker-option","calendar-change"],o2e=({unlinkPanels:e,leftDate:t,rightDate:n})=>{const{t:r}=Sr(),i=()=>{t.value=t.value.subtract(1,"year"),e.value||(n.value=n.value.subtract(1,"year"))},a=()=>{e.value||(t.value=t.value.add(1,"year")),n.value=n.value.add(1,"year")},o=()=>{t.value=t.value.add(1,"year")},s=()=>{n.value=n.value.subtract(1,"year")},l=X(()=>`${t.value.year()} ${r("el.datepicker.year")}`),c=X(()=>`${n.value.year()} ${r("el.datepicker.year")}`),h=X(()=>t.value.year()),f=X(()=>n.value.year()===t.value.year()?t.value.year()+1:n.value.year());return{leftPrevYear:i,rightNextYear:a,leftNextYear:o,rightPrevYear:s,leftLabel:l,rightLabel:c,leftYear:h,rightYear:f}},f2="year",s2e=Be({name:"DatePickerMonthRange"}),l2e=Be({...s2e,props:i2e,emits:a2e,setup(e,{emit:t}){const n=e,{lang:r}=Sr(),i=un("EP_PICKER_BASE"),{shortcuts:a,disabledDate:o}=i.props,s=Gr(i.props,"format"),l=Gr(i.props,"defaultValue"),c=le(jn().locale(r.value)),h=le(jn().locale(r.value).add(1,f2)),{minDate:f,maxDate:p,rangeState:v,ppNs:_,drpNs:b,handleChangeRange:C,handleRangeConfirm:T,handleShortcutClick:E,onSelect:A}=wZ(n,{defaultValue:l,leftDate:c,rightDate:h,unit:f2,onParsedValueChanged:re}),I=X(()=>!!a.length),{leftPrevYear:O,rightNextYear:B,leftNextYear:N,rightPrevYear:H,leftLabel:j,rightLabel:W,leftYear:U,rightYear:Y}=o2e({unlinkPanels:Gr(n,"unlinkPanels"),leftDate:c,rightDate:h}),ie=X(()=>n.unlinkPanels&&Y.value>U.value+1),ue=(ee,oe=!0)=>{const be=ee.minDate,we=ee.maxDate;p.value===we&&f.value===be||(t("calendar-change",[be.toDate(),we&&we.toDate()]),p.value=we,f.value=be,oe&&T())},J=()=>{c.value=E5(w(l),{lang:w(r),unit:"year",unlinkPanels:n.unlinkPanels})[0],h.value=c.value.add(1,"year"),t("pick",null)},q=ee=>sn(ee)?ee.map(oe=>oe.format(s.value)):ee.format(s.value),ce=ee=>sn(ee)?ee.map(oe=>jn(oe,s.value).locale(r.value)):jn(ee,s.value).locale(r.value);function re(ee,oe){if(n.unlinkPanels&&oe){const be=(ee==null?void 0:ee.year())||0,we=oe.year();h.value=be===we?oe.add(1,f2):oe}else h.value=c.value.add(1,f2)}return t("set-picker-option",["isValidValue",e0]),t("set-picker-option",["formatToString",q]),t("set-picker-option",["parseUserInput",ce]),t("set-picker-option",["handleClear",J]),(ee,oe)=>(te(),me("div",{class:se([w(_).b(),w(b).b(),{"has-sidebar":!!ee.$slots.sidebar||w(I)}])},[V("div",{class:se(w(_).e("body-wrapper"))},[st(ee.$slots,"sidebar",{class:se(w(_).e("sidebar"))}),w(I)?(te(),me("div",{key:0,class:se(w(_).e("sidebar"))},[(te(!0),me(hn,null,Kn(w(a),(be,we)=>(te(),me("button",{key:we,type:"button",class:se(w(_).e("shortcut")),onClick:pe=>w(E)(be)},Xe(be.text),11,["onClick"]))),128))],2)):Ge("v-if",!0),V("div",{class:se(w(_).e("body"))},[V("div",{class:se([[w(_).e("content"),w(b).e("content")],"is-left"])},[V("div",{class:se(w(b).e("header"))},[V("button",{type:"button",class:se([w(_).e("icon-btn"),"d-arrow-left"]),onClick:w(O)},[st(ee.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["onClick"]),ee.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(ie),class:se([[w(_).e("icon-btn"),{[w(_).is("disabled")]:!w(ie)}],"d-arrow-right"]),onClick:w(N)},[st(ee.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["disabled","onClick"])):Ge("v-if",!0),V("div",null,Xe(w(j)),1)],2),de(AD,{"selection-mode":"range",date:c.value,"min-date":w(f),"max-date":w(p),"range-state":w(v),"disabled-date":w(o),onChangerange:w(C),onPick:ue,onSelect:w(A)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),V("div",{class:se([[w(_).e("content"),w(b).e("content")],"is-right"])},[V("div",{class:se(w(b).e("header"))},[ee.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(ie),class:se([[w(_).e("icon-btn"),{"is-disabled":!w(ie)}],"d-arrow-left"]),onClick:w(H)},[st(ee.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["disabled","onClick"])):Ge("v-if",!0),V("button",{type:"button",class:se([w(_).e("icon-btn"),"d-arrow-right"]),onClick:w(B)},[st(ee.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["onClick"]),V("div",null,Xe(w(W)),1)],2),de(AD,{"selection-mode":"range",date:h.value,"min-date":w(f),"max-date":w(p),"range-state":w(v),"disabled-date":w(o),onChangerange:w(C),onPick:ue,onSelect:w(A)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var u2e=Kt(l2e,[["__file","panel-month-range.vue"]]);const c2e=Wt({...M5}),d2e=["pick","set-picker-option","calendar-change"],h2e=({unlinkPanels:e,leftDate:t,rightDate:n})=>{const r=()=>{t.value=t.value.subtract(10,"year"),e.value||(n.value=n.value.subtract(10,"year"))},i=()=>{e.value||(t.value=t.value.add(10,"year")),n.value=n.value.add(10,"year")},a=()=>{t.value=t.value.add(10,"year")},o=()=>{n.value=n.value.subtract(10,"year")},s=X(()=>{const f=Math.floor(t.value.year()/10)*10;return`${f}-${f+9}`}),l=X(()=>{const f=Math.floor(n.value.year()/10)*10;return`${f}-${f+9}`}),c=X(()=>Math.floor(t.value.year()/10)*10+9),h=X(()=>Math.floor(n.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:i,leftNextYear:a,rightPrevYear:o,leftLabel:s,rightLabel:l,leftYear:c,rightYear:h}},K6="year",f2e=Be({name:"DatePickerYearRange"}),p2e=Be({...f2e,props:c2e,emits:d2e,setup(e,{emit:t}){const n=e,{lang:r}=Sr(),i=le(jn().locale(r.value)),a=le(i.value.add(10,"year")),{pickerNs:o}=un(dk),s=Rt("date-range-picker"),l=X(()=>!!ue.length),c=X(()=>[o.b(),s.b(),{"has-sidebar":!!qa().sidebar||l.value}]),h=X(()=>({content:[o.e("content"),s.e("content"),"is-left"],arrowLeftBtn:[o.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),{[o.is("disabled")]:!O.value},"d-arrow-right"]})),f=X(()=>({content:[o.e("content"),s.e("content"),"is-right"],arrowLeftBtn:[o.e("icon-btn"),{"is-disabled":!O.value},"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),"d-arrow-right"]})),p=bZ(r),{leftPrevYear:v,rightNextYear:_,leftNextYear:b,rightPrevYear:C,leftLabel:T,rightLabel:E,leftYear:A,rightYear:I}=h2e({unlinkPanels:Gr(n,"unlinkPanels"),leftDate:i,rightDate:a}),O=X(()=>n.unlinkPanels&&I.value>A.value+1),B=le(),N=le(),H=le({endDate:null,selecting:!1}),j=pe=>{H.value=pe},W=(pe,Ce=!0)=>{const Ve=pe.minDate,et=pe.maxDate;N.value===et&&B.value===Ve||(t("calendar-change",[Ve.toDate(),et&&et.toDate()]),N.value=et,B.value=Ve,Ce&&U())},U=(pe=!1)=>{e0([B.value,N.value])&&t("pick",[B.value,N.value],pe)},Y=pe=>{H.value.selecting=pe,pe||(H.value.endDate=null)},ie=un("EP_PICKER_BASE"),{shortcuts:ue,disabledDate:J}=ie.props,q=Gr(ie.props,"format"),ce=Gr(ie.props,"defaultValue"),re=()=>{let pe;if(sn(ce.value)){const Ce=jn(ce.value[0]);let Ve=jn(ce.value[1]);return n.unlinkPanels||(Ve=Ce.add(10,K6)),[Ce,Ve]}else ce.value?pe=jn(ce.value):pe=jn();return pe=pe.locale(r.value),[pe,pe.add(10,K6)]};At(()=>ce.value,pe=>{if(pe){const Ce=re();i.value=Ce[0],a.value=Ce[1]}},{immediate:!0}),At(()=>n.parsedValue,pe=>{if(pe&&pe.length===2)if(B.value=pe[0],N.value=pe[1],i.value=B.value,n.unlinkPanels&&N.value){const Ce=B.value.year(),Ve=N.value.year();a.value=Ce===Ve?N.value.add(10,"year"):N.value}else a.value=i.value.add(10,"year");else{const Ce=re();B.value=void 0,N.value=void 0,i.value=Ce[0],a.value=Ce[1]}},{immediate:!0});const ee=pe=>sn(pe)?pe.map(Ce=>jn(Ce,q.value).locale(r.value)):jn(pe,q.value).locale(r.value),oe=pe=>sn(pe)?pe.map(Ce=>Ce.format(q.value)):pe.format(q.value),be=pe=>e0(pe)&&(J?!J(pe[0].toDate())&&!J(pe[1].toDate()):!0),we=()=>{const pe=re();i.value=pe[0],a.value=pe[1],N.value=void 0,B.value=void 0,t("pick",null)};return t("set-picker-option",["isValidValue",be]),t("set-picker-option",["parseUserInput",ee]),t("set-picker-option",["formatToString",oe]),t("set-picker-option",["handleClear",we]),(pe,Ce)=>(te(),me("div",{class:se(w(c))},[V("div",{class:se(w(o).e("body-wrapper"))},[st(pe.$slots,"sidebar",{class:se(w(o).e("sidebar"))}),w(l)?(te(),me("div",{key:0,class:se(w(o).e("sidebar"))},[(te(!0),me(hn,null,Kn(w(ue),(Ve,et)=>(te(),me("button",{key:et,type:"button",class:se(w(o).e("shortcut")),onClick:Ee=>w(p)(Ve)},Xe(Ve.text),11,["onClick"]))),128))],2)):Ge("v-if",!0),V("div",{class:se(w(o).e("body"))},[V("div",{class:se(w(h).content)},[V("div",{class:se(w(s).e("header"))},[V("button",{type:"button",class:se(w(h).arrowLeftBtn),onClick:w(v)},[st(pe.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["onClick"]),pe.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(O),class:se(w(h).arrowRightBtn),onClick:w(b)},[st(pe.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["disabled","onClick"])):Ge("v-if",!0),V("div",null,Xe(w(T)),1)],2),de(PD,{"selection-mode":"range",date:i.value,"min-date":B.value,"max-date":N.value,"range-state":H.value,"disabled-date":w(J),onChangerange:j,onPick:W,onSelect:Y},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),V("div",{class:se(w(f).content)},[V("div",{class:se(w(s).e("header"))},[pe.unlinkPanels?(te(),me("button",{key:0,type:"button",disabled:!w(O),class:se(w(f).arrowLeftBtn),onClick:w(C)},[st(pe.$slots,"prev-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(Of))]),_:1})])],10,["disabled","onClick"])):Ge("v-if",!0),V("button",{type:"button",class:se(w(f).arrowRightBtn),onClick:w(_)},[st(pe.$slots,"next-year",{},()=>[de(w(yn),null,{default:ge(()=>[de(w(zf))]),_:1})])],10,["onClick"]),V("div",null,Xe(w(E)),1)],2),de(PD,{"selection-mode":"range",date:a.value,"min-date":B.value,"max-date":N.value,"range-state":H.value,"disabled-date":w(J),onChangerange:j,onPick:W,onSelect:Y},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var v2e=Kt(p2e,[["__file","panel-year-range.vue"]]);const m2e=function(e){switch(e){case"daterange":case"datetimerange":return r2e;case"monthrange":return u2e;case"yearrange":return v2e;default:return e2e}};jn.extend(Vq);jn.extend(ESe);jn.extend(x5);jn.extend(PSe);jn.extend(LSe);jn.extend(RSe);jn.extend(zSe);jn.extend(FSe);var g2e=Be({name:"ElDatePicker",install:null,props:NSe,emits:["update:modelValue"],setup(e,{expose:t,emit:n,slots:r}){const i=Rt("picker-panel");pr("ElPopperOptions",Ar(Gr(e,"popperOptions"))),pr(dk,{slots:r,pickerNs:i});const a=le();t({focus:(l=!0)=>{var c;(c=a.value)==null||c.focus(l)},handleOpen:()=>{var l;(l=a.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=a.value)==null||l.handleClose()}});const s=l=>{n("update:modelValue",l)};return()=>{var l;const c=(l=e.format)!=null?l:Qbe[e.type]||Xg,h=m2e(e.type);return de(Eq,sr(e,{format:c,type:e.type,ref:a,"onUpdate:modelValue":s}),{default:f=>de(h,f,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const y2e=Wn(g2e),P5=Symbol("elDescriptions");var bb=Be({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:un(P5,{})}},render(){var e,t,n,r,i,a,o;const s=tme(this.cell),l=(((e=this.cell)==null?void 0:e.dirs)||[]).map(B=>{const{dir:N,arg:H,modifiers:j,value:W}=B;return[N,W,H,j]}),{border:c,direction:h}=this.descriptions,f=h==="vertical",p=((r=(n=(t=this.cell)==null?void 0:t.children)==null?void 0:n.label)==null?void 0:r.call(n))||s.label,v=(o=(a=(i=this.cell)==null?void 0:i.children)==null?void 0:a.default)==null?void 0:o.call(a),_=s.span,b=s.rowspan,C=s.align?`is-${s.align}`:"",T=s.labelAlign?`is-${s.labelAlign}`:C,E=s.className,A=s.labelClassName,I={width:oa(s.width),minWidth:oa(s.minWidth)},O=Rt("descriptions");switch(this.type){case"label":return In(Mn(this.tag,{style:I,class:[O.e("cell"),O.e("label"),O.is("bordered-label",c),O.is("vertical-label",f),T,A],colSpan:f?_:1,rowspan:f?1:b},p),l);case"content":return In(Mn(this.tag,{style:I,class:[O.e("cell"),O.e("content"),O.is("bordered-content",c),O.is("vertical-content",f),C,E],colSpan:f?_:_*2-1,rowspan:f?b*2-1:b},v),l);default:return In(Mn("td",{style:I,class:[O.e("cell"),C],colSpan:_,rowspan:b},[ro(p)?void 0:Mn("span",{class:[O.e("label"),A]},p),Mn("span",{class:[O.e("content"),E]},v)]),l)}}});const _2e=Wt({row:{type:Qe(Array),default:()=>[]}}),b2e=Be({name:"ElDescriptionsRow"}),w2e=Be({...b2e,props:_2e,setup(e){const t=un(P5,{});return(n,r)=>w(t).direction==="vertical"?(te(),me(hn,{key:0},[V("tr",null,[(te(!0),me(hn,null,Kn(n.row,(i,a)=>(te(),ft(w(bb),{key:`tr1-${a}`,cell:i,tag:"th",type:"label"},null,8,["cell"]))),128))]),V("tr",null,[(te(!0),me(hn,null,Kn(n.row,(i,a)=>(te(),ft(w(bb),{key:`tr2-${a}`,cell:i,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(te(),me("tr",{key:1},[(te(!0),me(hn,null,Kn(n.row,(i,a)=>(te(),me(hn,{key:`tr3-${a}`},[w(t).border?(te(),me(hn,{key:0},[de(w(bb),{cell:i,tag:"td",type:"label"},null,8,["cell"]),de(w(bb),{cell:i,tag:"td",type:"content"},null,8,["cell"])],64)):(te(),ft(w(bb),{key:1,cell:i,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var x2e=Kt(w2e,[["__file","descriptions-row.vue"]]);const S2e=Wt({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:$a,title:{type:String,default:""},extra:{type:String,default:""}}),C2e=Be({name:"ElDescriptions"}),T2e=Be({...C2e,props:S2e,setup(e){const t=e,n=Rt("descriptions"),r=Ea(),i=qa();pr(P5,t);const a=X(()=>[n.b(),n.m(r.value)]),o=(l,c,h,f=!1)=>(l.props||(l.props={}),c>h&&(l.props.span=h),f&&(l.props.span=c),l),s=()=>{if(!i.default)return[];const l=xf(i.default()).filter(_=>{var b;return((b=_==null?void 0:_.type)==null?void 0:b.name)==="ElDescriptionsItem"}),c=[];let h=[],f=t.column,p=0;const v=[];return l.forEach((_,b)=>{var C,T,E;const A=((C=_.props)==null?void 0:C.span)||1,I=((T=_.props)==null?void 0:T.rowspan)||1,O=c.length;if(v[O]||(v[O]=0),I>1)for(let B=1;B<I;B++)v[E=O+B]||(v[E]=0),v[O+B]++,p++;if(v[O]>0&&(f-=v[O],v[O]=0),b<l.length-1&&(p+=A>f?f:A),b===l.length-1){const B=t.column-p%t.column;h.push(o(_,B,f,!0)),c.push(h);return}A<f?(f-=A,h.push(_)):(h.push(o(_,A,f)),c.push(h),f=t.column,h=[])}),c};return(l,c)=>(te(),me("div",{class:se(w(a))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(te(),me("div",{key:0,class:se(w(n).e("header"))},[V("div",{class:se(w(n).e("title"))},[st(l.$slots,"title",{},()=>[$t(Xe(l.title),1)])],2),V("div",{class:se(w(n).e("extra"))},[st(l.$slots,"extra",{},()=>[$t(Xe(l.extra),1)])],2)],2)):Ge("v-if",!0),V("div",{class:se(w(n).e("body"))},[V("table",{class:se([w(n).e("table"),w(n).is("bordered",l.border)])},[V("tbody",null,[(te(!0),me(hn,null,Kn(s(),(h,f)=>(te(),ft(x2e,{key:f,row:h},null,8,["row"]))),128))])],2)],2)],2))}});var M2e=Kt(T2e,[["__file","description.vue"]]);const k2e=Wt({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),xZ=Be({name:"ElDescriptionsItem",props:k2e}),E2e=Wn(M2e,{DescriptionsItem:xZ}),A2e=Ki(xZ),P2e=Wt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Qe([String,Array,Object])},zIndex:{type:Qe([String,Number])}}),I2e={click:e=>e instanceof MouseEvent},L2e="overlay";var D2e=Be({name:"ElOverlay",props:P2e,emits:I2e,setup(e,{slots:t,emit:n}){const r=Rt(L2e),i=l=>{n("click",l)},{onClick:a,onMousedown:o,onMouseup:s}=o5(e.customMaskEvent?void 0:i);return()=>e.mask?de("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:o,onMouseup:s},[st(t,"default")],Fl.STYLE|Fl.CLASS|Fl.PROPS,["onClick","onMouseup","onMousedown"]):Mn("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[st(t,"default")])}});const I5=D2e,SZ=Symbol("dialogInjectionKey"),CZ=Wt({center:Boolean,alignCenter:Boolean,closeIcon:{type:si},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),R2e={close:()=>!0},O2e=Be({name:"ElDialogContent"}),z2e=Be({...O2e,props:CZ,emits:R2e,setup(e,{expose:t}){const n=e,{t:r}=Sr(),{Close:i}=G3,{dialogRef:a,headerRef:o,bodyId:s,ns:l,style:c}=un(SZ),{focusTrapRef:h}=un(_5),f=X(()=>[l.b(),l.is("fullscreen",n.fullscreen),l.is("draggable",n.draggable),l.is("align-center",n.alignCenter),{[l.m("center")]:n.center}]),p=ek(h,a),v=X(()=>n.draggable),_=X(()=>n.overflow),{resetPosition:b}=gK(a,o,v,_);return t({resetPosition:b}),(C,T)=>(te(),me("div",{ref:w(p),class:se(w(f)),style:_n(w(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:o,class:se([w(l).e("header"),{"show-close":C.showClose}])},[st(C.$slots,"header",{},()=>[V("span",{role:"heading","aria-level":C.ariaLevel,class:se(w(l).e("title"))},Xe(C.title),11,["aria-level"])]),C.showClose?(te(),me("button",{key:0,"aria-label":w(r)("el.dialog.close"),class:se(w(l).e("headerbtn")),type:"button",onClick:E=>C.$emit("close")},[de(w(yn),{class:se(w(l).e("close"))},{default:ge(()=>[(te(),ft(ir(C.closeIcon||w(i))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ge("v-if",!0)],2),V("div",{id:w(s),class:se(w(l).e("body"))},[st(C.$slots,"default")],10,["id"]),C.$slots.footer?(te(),me("footer",{key:0,class:se(w(l).e("footer"))},[st(C.$slots,"footer")],2)):Ge("v-if",!0)],6))}});var B2e=Kt(z2e,[["__file","dialog-content.vue"]]);const TZ=Wt({...CZ,appendToBody:Boolean,appendTo:{type:Qe([String,Object]),default:"body"},beforeClose:{type:Qe(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),MZ={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[tr]:e=>pa(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},kZ=(e,t)=>{var n;const i=er().emit,{nextZIndex:a}=k0();let o="";const s=mo(),l=mo(),c=le(!1),h=le(!1),f=le(!1),p=le((n=e.zIndex)!=null?n:a());let v,_;const b=ok("namespace",y1),C=X(()=>{const J={},q=`--${b.value}-dialog`;return e.fullscreen||(e.top&&(J[`${q}-margin-top`]=e.top),e.width&&(J[`${q}-width`]=oa(e.width))),J}),T=X(()=>e.alignCenter?{display:"flex"}:{});function E(){i("opened")}function A(){i("closed"),i(tr,!1),e.destroyOnClose&&(f.value=!1)}function I(){i("close")}function O(){_==null||_(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=Yv(()=>j(),e.openDelay):j()}function B(){v==null||v(),_==null||_(),e.closeDelay&&e.closeDelay>0?{stop:_}=Yv(()=>W(),e.closeDelay):W()}function N(){function J(q){q||(h.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(J):B()}function H(){e.closeOnClickModal&&N()}function j(){xr&&(c.value=!0)}function W(){c.value=!1}function U(){i("openAutoFocus")}function Y(){i("closeAutoFocus")}function ie(J){var q;((q=J.detail)==null?void 0:q.focusReason)==="pointer"&&J.preventDefault()}e.lockScroll&&X3(c);function ue(){e.closeOnPressEscape&&N()}return At(()=>e.modelValue,J=>{J?(h.value=!1,O(),f.value=!0,p.value=aK(e.zIndex)?a():p.value++,bn(()=>{i("open"),t.value&&(t.value.scrollTop=0)})):c.value&&B()}),At(()=>e.fullscreen,J=>{t.value&&(J?(o=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=o)}),Un(()=>{e.modelValue&&(c.value=!0,f.value=!0,O())}),{afterEnter:E,afterLeave:A,beforeLeave:I,handleClose:N,onModalClick:H,close:B,doClose:W,onOpenAutoFocus:U,onCloseAutoFocus:Y,onCloseRequested:ue,onFocusoutPrevented:ie,titleId:s,bodyId:l,closed:h,style:C,overlayDialogStyle:T,rendered:f,visible:c,zIndex:p}},F2e=Be({name:"ElDialog",inheritAttrs:!1}),N2e=Be({...F2e,props:TZ,emits:MZ,setup(e,{expose:t}){const n=e,r=qa();Sf({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},X(()=>!!r.title));const i=Rt("dialog"),a=le(),o=le(),s=le(),{visible:l,titleId:c,bodyId:h,style:f,overlayDialogStyle:p,rendered:v,zIndex:_,afterEnter:b,afterLeave:C,beforeLeave:T,handleClose:E,onModalClick:A,onOpenAutoFocus:I,onCloseAutoFocus:O,onCloseRequested:B,onFocusoutPrevented:N}=kZ(n,a);pr(SZ,{dialogRef:a,headerRef:o,bodyId:h,ns:i,rendered:v,style:f});const H=o5(A),j=X(()=>n.draggable&&!n.fullscreen);return t({visible:l,dialogContentRef:s,resetPosition:()=>{var U;(U=s.value)==null||U.resetPosition()}}),(U,Y)=>(te(),ft(w(P0),{to:U.appendTo,disabled:U.appendTo!=="body"?!1:!U.appendToBody},{default:ge(()=>[de(Ka,{name:"dialog-fade",onAfterEnter:w(b),onAfterLeave:w(C),onBeforeLeave:w(T),persisted:""},{default:ge(()=>[In(de(w(I5),{"custom-mask-event":"",mask:U.modal,"overlay-class":U.modalClass,"z-index":w(_)},{default:ge(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":U.title||void 0,"aria-labelledby":U.title?void 0:w(c),"aria-describedby":w(h),class:se(`${w(i).namespace.value}-overlay-dialog`),style:_n(w(p)),onClick:w(H).onClick,onMousedown:w(H).onMousedown,onMouseup:w(H).onMouseup},[de(w(hx),{loop:"",trapped:w(l),"focus-start-el":"container",onFocusAfterTrapped:w(I),onFocusAfterReleased:w(O),onFocusoutPrevented:w(N),onReleaseRequested:w(B)},{default:ge(()=>[w(v)?(te(),ft(B2e,sr({key:0,ref_key:"dialogContentRef",ref:s},U.$attrs,{center:U.center,"align-center":U.alignCenter,"close-icon":U.closeIcon,draggable:w(j),overflow:U.overflow,fullscreen:U.fullscreen,"show-close":U.showClose,title:U.title,"aria-level":U.headerAriaLevel,onClose:w(E)}),Zu({header:ge(()=>[U.$slots.title?st(U.$slots,"title",{key:1}):st(U.$slots,"header",{key:0,close:w(E),titleId:w(c),titleClass:w(i).e("title")})]),default:ge(()=>[st(U.$slots,"default")]),_:2},[U.$slots.footer?{name:"footer",fn:ge(()=>[st(U.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):Ge("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Lr,w(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var $2e=Kt(N2e,[["__file","dialog.vue"]]);const V2e=Wn($2e),H2e=Wt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Qe(String),default:"solid"}}),j2e=Be({name:"ElDivider"}),U2e=Be({...j2e,props:H2e,setup(e){const t=e,n=Rt("divider"),r=X(()=>n.cssVar({"border-style":t.borderStyle}));return(i,a)=>(te(),me("div",{class:se([w(n).b(),w(n).m(i.direction)]),style:_n(w(r)),role:"separator"},[i.$slots.default&&i.direction!=="vertical"?(te(),me("div",{key:0,class:se([w(n).e("text"),w(n).is(i.contentPosition)])},[st(i.$slots,"default")],2)):Ge("v-if",!0)],6))}});var W2e=Kt(U2e,[["__file","divider.vue"]]);const EZ=Wn(W2e),G2e=Wt({...TZ,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),K2e=MZ,q2e=Be({name:"ElDrawer",inheritAttrs:!1}),Z2e=Be({...q2e,props:G2e,emits:K2e,setup(e,{expose:t}){const n=e,r=qa();Sf({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},X(()=>!!r.title));const i=le(),a=le(),o=Rt("drawer"),{t:s}=Sr(),{afterEnter:l,afterLeave:c,beforeLeave:h,visible:f,rendered:p,titleId:v,bodyId:_,zIndex:b,onModalClick:C,onOpenAutoFocus:T,onCloseAutoFocus:E,onFocusoutPrevented:A,onCloseRequested:I,handleClose:O}=kZ(n,i),B=X(()=>n.direction==="rtl"||n.direction==="ltr"),N=X(()=>oa(n.size));return t({handleClose:O,afterEnter:l,afterLeave:c}),(H,j)=>(te(),ft(w(P0),{to:H.appendTo,disabled:H.appendTo!=="body"?!1:!H.appendToBody},{default:ge(()=>[de(Ka,{name:w(o).b("fade"),onAfterEnter:w(l),onAfterLeave:w(c),onBeforeLeave:w(h),persisted:""},{default:ge(()=>[In(de(w(I5),{mask:H.modal,"overlay-class":H.modalClass,"z-index":w(b),onClick:w(C)},{default:ge(()=>[de(w(hx),{loop:"",trapped:w(f),"focus-trap-el":i.value,"focus-start-el":a.value,onFocusAfterTrapped:w(T),onFocusAfterReleased:w(E),onFocusoutPrevented:w(A),onReleaseRequested:w(I)},{default:ge(()=>[V("div",sr({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":H.title||void 0,"aria-labelledby":H.title?void 0:w(v),"aria-describedby":w(_)},H.$attrs,{class:[w(o).b(),H.direction,w(f)&&"open"],style:w(B)?"width: "+w(N):"height: "+w(N),role:"dialog",onClick:Fn(()=>{},["stop"])}),[V("span",{ref_key:"focusStartRef",ref:a,class:se(w(o).e("sr-focus")),tabindex:"-1"},null,2),H.withHeader?(te(),me("header",{key:0,class:se(w(o).e("header"))},[H.$slots.title?st(H.$slots,"title",{key:1},()=>[Ge(" DEPRECATED SLOT ")]):st(H.$slots,"header",{key:0,close:w(O),titleId:w(v),titleClass:w(o).e("title")},()=>[H.$slots.title?Ge("v-if",!0):(te(),me("span",{key:0,id:w(v),role:"heading","aria-level":H.headerAriaLevel,class:se(w(o).e("title"))},Xe(H.title),11,["id","aria-level"]))]),H.showClose?(te(),me("button",{key:2,"aria-label":w(s)("el.drawer.close"),class:se(w(o).e("close-btn")),type:"button",onClick:w(O)},[de(w(yn),{class:se(w(o).e("close"))},{default:ge(()=>[de(w(Yu))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ge("v-if",!0)],2)):Ge("v-if",!0),w(p)?(te(),me("div",{key:1,id:w(_),class:se(w(o).e("body"))},[st(H.$slots,"default")],10,["id"])):Ge("v-if",!0),H.$slots.footer?(te(),me("div",{key:2,class:se(w(o).e("footer"))},[st(H.$slots,"footer")],2)):Ge("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Lr,w(f)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Y2e=Kt(Z2e,[["__file","drawer.vue"]]);const X2e=Wn(Y2e),J2e=Be({inheritAttrs:!1});function Q2e(e,t,n,r,i,a){return st(e.$slots,"default")}var eCe=Kt(J2e,[["render",Q2e],["__file","collection.vue"]]);const tCe=Be({name:"ElCollectionItem",inheritAttrs:!1});function nCe(e,t,n,r,i,a){return st(e.$slots,"default")}var rCe=Kt(tCe,[["render",nCe],["__file","collection-item.vue"]]);const AZ="data-el-collection-item",PZ=e=>{const t=`El${e}Collection`,n=`${t}Item`,r=Symbol(t),i=Symbol(n),a={...eCe,name:t,setup(){const s=le(null),l=new Map;pr(r,{itemMap:l,getItems:()=>{const h=w(s);if(!h)return[];const f=Array.from(h.querySelectorAll(`[${AZ}]`));return[...l.values()].sort((v,_)=>f.indexOf(v.ref)-f.indexOf(_.ref))},collectionRef:s})}},o={...rCe,name:n,setup(s,{attrs:l}){const c=le(null),h=un(r,void 0);pr(i,{collectionItemRef:c}),Un(()=>{const f=w(c);f&&h.itemMap.set(f,{ref:f,...l})}),ui(()=>{const f=w(c);h.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:a,ElCollectionItem:o}},iCe=Wt({style:{type:Qe([String,Array,Object])},currentTabId:{type:Qe(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Qe(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:aCe,ElCollectionItem:oCe,COLLECTION_INJECTION_KEY:L5,COLLECTION_ITEM_INJECTION_KEY:sCe}=PZ("RovingFocusGroup"),D5=Symbol("elRovingFocusGroup"),IZ=Symbol("elRovingFocusGroupItem"),lCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},uCe=(e,t)=>e,cCe=(e,t,n)=>{const r=uCe(e.key);return lCe[r]},dCe=(e,t)=>e.map((n,r)=>e[(r+t)%e.length]),R5=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},q6="currentTabIdChange",Z6="rovingFocusGroup.entryFocus",hCe={bubbles:!1,cancelable:!0},fCe=Be({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:iCe,emits:[q6,"entryFocus"],setup(e,{emit:t}){var n;const r=le((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),i=le(!1),a=le(!1),o=le(null),{getItems:s}=un(L5,void 0),l=X(()=>[{outline:"none"},e.style]),c=b=>{t(q6,b)},h=()=>{i.value=!0},f=ia(b=>{var C;(C=e.onMousedown)==null||C.call(e,b)},()=>{a.value=!0}),p=ia(b=>{var C;(C=e.onFocus)==null||C.call(e,b)},b=>{const C=!w(a),{target:T,currentTarget:E}=b;if(T===E&&C&&!w(i)){const A=new Event(Z6,hCe);if(E==null||E.dispatchEvent(A),!A.defaultPrevented){const I=s().filter(j=>j.focusable),O=I.find(j=>j.active),B=I.find(j=>j.id===w(r)),H=[O,B,...I].filter(Boolean).map(j=>j.ref);R5(H)}}a.value=!1}),v=ia(b=>{var C;(C=e.onBlur)==null||C.call(e,b)},()=>{i.value=!1}),_=(...b)=>{t("entryFocus",...b)};pr(D5,{currentTabbedId:b0(r),loop:Gr(e,"loop"),tabIndex:X(()=>w(i)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:l,orientation:Gr(e,"orientation"),dir:Gr(e,"dir"),onItemFocus:c,onItemShiftTab:h,onBlur:v,onFocus:p,onMousedown:f}),At(()=>e.currentTabId,b=>{r.value=b??null}),ti(o,Z6,_)}});function pCe(e,t,n,r,i,a){return st(e.$slots,"default")}var vCe=Kt(fCe,[["render",pCe],["__file","roving-focus-group-impl.vue"]]);const mCe=Be({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:aCe,ElRovingFocusGroupImpl:vCe}});function gCe(e,t,n,r,i,a){const o=Xt("el-roving-focus-group-impl"),s=Xt("el-focus-group-collection");return te(),ft(s,null,{default:ge(()=>[de(o,Bu(Pf(e.$attrs)),{default:ge(()=>[st(e.$slots,"default")]),_:3},16)]),_:3})}var yCe=Kt(mCe,[["render",gCe],["__file","roving-focus-group.vue"]]);const _Ce=Be({components:{ElRovingFocusCollectionItem:oCe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:r,onItemFocus:i,onItemShiftTab:a}=un(D5,void 0),{getItems:o}=un(L5,void 0),s=mo(),l=le(null),c=ia(v=>{t("mousedown",v)},v=>{e.focusable?i(w(s)):v.preventDefault()}),h=ia(v=>{t("focus",v)},()=>{i(w(s))}),f=ia(v=>{t("keydown",v)},v=>{const{key:_,shiftKey:b,target:C,currentTarget:T}=v;if(_===En.tab&&b){a();return}if(C!==T)return;const E=cCe(v);if(E){v.preventDefault();let I=o().filter(O=>O.focusable).map(O=>O.ref);switch(E){case"last":{I.reverse();break}case"prev":case"next":{E==="prev"&&I.reverse();const O=I.indexOf(T);I=r.value?dCe(I,O+1):I.slice(O+1);break}}bn(()=>{R5(I)})}}),p=X(()=>n.value===w(s));return pr(IZ,{rovingFocusGroupItemRef:l,tabIndex:X(()=>w(p)?0:-1),handleMousedown:c,handleFocus:h,handleKeydown:f}),{id:s,handleKeydown:f,handleFocus:h,handleMousedown:c}}});function bCe(e,t,n,r,i,a){const o=Xt("el-roving-focus-collection-item");return te(),ft(o,{id:e.id,focusable:e.focusable,active:e.active},{default:ge(()=>[st(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var wCe=Kt(_Ce,[["render",bCe],["__file","roving-focus-item.vue"]]);const PC=Wt({trigger:uw.trigger,effect:{...eo.effect,default:"light"},type:{type:Qe(String)},placement:{type:Qe(String),default:"bottom"},popperOptions:{type:Qe(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Qe([Number,String]),default:0},maxHeight:{type:Qe([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:Qe(Object)},teleported:eo.teleported}),LZ=Wt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:si}}),xCe=Wt({onKeydown:{type:Qe(Function)}}),SCe=[En.down,En.pageDown,En.home],DZ=[En.up,En.pageUp,En.end],CCe=[...SCe,...DZ],{ElCollection:TCe,ElCollectionItem:MCe,COLLECTION_INJECTION_KEY:kCe,COLLECTION_ITEM_INJECTION_KEY:ECe}=PZ("Dropdown"),hk=Symbol("elDropdown"),{ButtonGroup:ACe}=io,PCe=Be({name:"ElDropdown",components:{ElButton:io,ElButtonGroup:ACe,ElScrollbar:ad,ElDropdownCollection:TCe,ElTooltip:Po,ElRovingFocusGroup:yCe,ElOnlyChild:oq,ElIcon:yn,ArrowDown:ah},props:PC,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=er(),r=Rt("dropdown"),{t:i}=Sr(),a=le(),o=le(),s=le(null),l=le(null),c=le(null),h=le(null),f=le(!1),p=[En.enter,En.space,En.down],v=X(()=>({maxHeight:oa(e.maxHeight)})),_=X(()=>[r.m(O.value)]),b=X(()=>Wo(e.trigger)),C=mo().value,T=X(()=>e.id||C);At([a,b],([ce,re],[ee])=>{var oe,be,we;(oe=ee==null?void 0:ee.$el)!=null&&oe.removeEventListener&&ee.$el.removeEventListener("pointerenter",N),(be=ce==null?void 0:ce.$el)!=null&&be.removeEventListener&&ce.$el.removeEventListener("pointerenter",N),(we=ce==null?void 0:ce.$el)!=null&&we.addEventListener&&re.includes("hover")&&ce.$el.addEventListener("pointerenter",N)},{immediate:!0}),ui(()=>{var ce,re;(re=(ce=a.value)==null?void 0:ce.$el)!=null&&re.removeEventListener&&a.value.$el.removeEventListener("pointerenter",N)});function E(){A()}function A(){var ce;(ce=s.value)==null||ce.onClose()}function I(){var ce;(ce=s.value)==null||ce.onOpen()}const O=Ea();function B(...ce){t("command",...ce)}function N(){var ce,re;(re=(ce=a.value)==null?void 0:ce.$el)==null||re.focus()}function H(){}function j(){const ce=w(l);b.value.includes("hover")&&(ce==null||ce.focus()),h.value=null}function W(ce){h.value=ce}function U(ce){f.value||(ce.preventDefault(),ce.stopImmediatePropagation())}function Y(){t("visible-change",!0)}function ie(ce){(ce==null?void 0:ce.type)==="keydown"&&l.value.focus()}function ue(){t("visible-change",!1)}return pr(hk,{contentRef:l,role:X(()=>e.role),triggerId:T,isUsingKeyboard:f,onItemEnter:H,onItemLeave:j}),pr("elDropdown",{instance:n,dropdownSize:O,handleClick:E,commandHandler:B,trigger:Gr(e,"trigger"),hideOnClick:Gr(e,"hideOnClick")}),{t:i,ns:r,scrollbar:c,wrapStyle:v,dropdownTriggerKls:_,dropdownSize:O,triggerId:T,triggerKeys:p,currentTabId:h,handleCurrentTabIdChange:W,handlerMainButtonClick:ce=>{t("click",ce)},handleEntryFocus:U,handleClose:A,handleOpen:I,handleBeforeShowTooltip:Y,handleShowTooltip:ie,handleBeforeHideTooltip:ue,onFocusAfterTrapped:ce=>{var re,ee;ce.preventDefault(),(ee=(re=l.value)==null?void 0:re.focus)==null||ee.call(re,{preventScroll:!0})},popperRef:s,contentRef:l,triggeringElementRef:a,referenceElementRef:o}}});function ICe(e,t,n,r,i,a){var o;const s=Xt("el-dropdown-collection"),l=Xt("el-roving-focus-group"),c=Xt("el-scrollbar"),h=Xt("el-only-child"),f=Xt("el-tooltip"),p=Xt("el-button"),v=Xt("arrow-down"),_=Xt("el-icon"),b=Xt("el-button-group");return te(),me("div",{class:se([e.ns.b(),e.ns.is("disabled",e.disabled)])},[de(f,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(o=e.referenceElementRef)==null?void 0:o.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Zu({content:ge(()=>[de(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:ge(()=>[de(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:ge(()=>[de(s,null,{default:ge(()=>[st(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:ge(()=>[de(h,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:ge(()=>[st(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(te(),ft(b,{key:0},{default:ge(()=>[de(p,sr({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:ge(()=>[st(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),de(p,sr({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:ge(()=>[de(_,{class:se(e.ns.e("icon"))},{default:ge(()=>[de(v)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Ge("v-if",!0)],2)}var LCe=Kt(PCe,[["render",ICe],["__file","dropdown.vue"]]);const DCe=Be({name:"DropdownItemImpl",components:{ElIcon:yn},props:LZ,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:t}){const n=Rt("dropdown"),{role:r}=un(hk,void 0),{collectionItemRef:i}=un(ECe,void 0),{collectionItemRef:a}=un(sCe,void 0),{rovingFocusGroupItemRef:o,tabIndex:s,handleFocus:l,handleKeydown:c,handleMousedown:h}=un(IZ,void 0),f=ek(i,a,o),p=X(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),v=ia(_=>{const{code:b}=_;if(b===En.enter||b===En.space)return _.preventDefault(),_.stopImmediatePropagation(),t("clickimpl",_),!0},c);return{ns:n,itemRef:f,dataset:{[AZ]:""},role:p,tabIndex:s,handleFocus:l,handleKeydown:v,handleMousedown:h}}});function RCe(e,t,n,r,i,a){const o=Xt("el-icon");return te(),me(hn,null,[e.divided?(te(),me("li",sr({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):Ge("v-if",!0),V("li",sr({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:s=>e.$emit("clickimpl",s),onFocus:e.handleFocus,onKeydown:Fn(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:s=>e.$emit("pointermove",s),onPointerleave:s=>e.$emit("pointerleave",s)}),[e.icon?(te(),ft(o,{key:0},{default:ge(()=>[(te(),ft(ir(e.icon)))]),_:1})):Ge("v-if",!0),st(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var OCe=Kt(DCe,[["render",RCe],["__file","dropdown-item-impl.vue"]]);const RZ=()=>{const e=un("elDropdown",{}),t=X(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},zCe=Be({name:"ElDropdownItem",components:{ElDropdownCollectionItem:MCe,ElRovingFocusItem:wCe,ElDropdownItemImpl:OCe},inheritAttrs:!1,props:LZ,emits:["pointermove","pointerleave","click"],setup(e,{emit:t,attrs:n}){const{elDropdown:r}=RZ(),i=er(),a=le(null),o=X(()=>{var v,_;return(_=(v=w(a))==null?void 0:v.textContent)!=null?_:""}),{onItemEnter:s,onItemLeave:l}=un(hk,void 0),c=ia(v=>(t("pointermove",v),v.defaultPrevented),UN(v=>{if(e.disabled){l(v);return}const _=v.currentTarget;_===document.activeElement||_.contains(document.activeElement)||(s(v),v.defaultPrevented||_==null||_.focus())})),h=ia(v=>(t("pointerleave",v),v.defaultPrevented),UN(l)),f=ia(v=>{if(!e.disabled)return t("click",v),v.type!=="keydown"&&v.defaultPrevented},v=>{var _,b,C;if(e.disabled){v.stopImmediatePropagation();return}(_=r==null?void 0:r.hideOnClick)!=null&&_.value&&((b=r.handleClick)==null||b.call(r)),(C=r.commandHandler)==null||C.call(r,e.command,i,v)}),p=X(()=>({...e,...n}));return{handleClick:f,handlePointerMove:c,handlePointerLeave:h,textContent:o,propsAndAttrs:p}}});function BCe(e,t,n,r,i,a){var o;const s=Xt("el-dropdown-item-impl"),l=Xt("el-roving-focus-item"),c=Xt("el-dropdown-collection-item");return te(),ft(c,{disabled:e.disabled,"text-value":(o=e.textValue)!=null?o:e.textContent},{default:ge(()=>[de(l,{focusable:!e.disabled},{default:ge(()=>[de(s,sr(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:ge(()=>[st(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var OZ=Kt(zCe,[["render",BCe],["__file","dropdown-item.vue"]]);const FCe=Be({name:"ElDropdownMenu",props:xCe,setup(e){const t=Rt("dropdown"),{_elDropdownSize:n}=RZ(),r=n.value,{focusTrapRef:i,onKeydown:a}=un(_5,void 0),{contentRef:o,role:s,triggerId:l}=un(hk,void 0),{collectionRef:c,getItems:h}=un(kCe,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:p,tabIndex:v,onBlur:_,onFocus:b,onMousedown:C}=un(D5,void 0),{collectionRef:T}=un(L5,void 0),E=X(()=>[t.b("menu"),t.bm("menu",r==null?void 0:r.value)]),A=ek(o,c,i,f,T),I=ia(B=>{var N;(N=e.onKeydown)==null||N.call(e,B)},B=>{const{currentTarget:N,code:H,target:j}=B;if(N.contains(j),En.tab===H&&B.stopImmediatePropagation(),B.preventDefault(),j!==w(o)||!CCe.includes(H))return;const U=h().filter(Y=>!Y.disabled).map(Y=>Y.ref);DZ.includes(H)&&U.reverse(),R5(U)});return{size:r,rovingFocusGroupRootStyle:p,tabIndex:v,dropdownKls:E,role:s,triggerId:l,dropdownListWrapperRef:A,handleKeydown:B=>{I(B),a(B)},onBlur:_,onFocus:b,onMousedown:C}}});function NCe(e,t,n,r,i,a){return te(),me("ul",{ref:e.dropdownListWrapperRef,class:se(e.dropdownKls),style:_n(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:Fn(e.handleKeydown,["self"]),onMousedown:Fn(e.onMousedown,["self"])},[st(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var zZ=Kt(FCe,[["render",NCe],["__file","dropdown-menu.vue"]]);const $Ce=Wn(LCe,{DropdownItem:OZ,DropdownMenu:zZ}),VCe=Ki(OZ),HCe=Ki(zZ),jCe=Be({name:"ImgEmpty"}),UCe=Be({...jCe,setup(e){const t=Rt("empty"),n=mo();return(r,i)=>(te(),me("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[V("defs",null,[V("linearGradient",{id:`linearGradient-1-${w(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[V("stop",{"stop-color":`var(${w(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),V("stop",{"stop-color":`var(${w(t).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),V("linearGradient",{id:`linearGradient-2-${w(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[V("stop",{"stop-color":`var(${w(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),V("stop",{"stop-color":`var(${w(t).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),V("rect",{id:`path-3-${w(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),V("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[V("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[V("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[V("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${w(t).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),V("polygon",{id:"Rectangle-Copy-14",fill:`var(${w(t).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),V("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[V("polygon",{id:"Rectangle-Copy-10",fill:`var(${w(t).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),V("polygon",{id:"Rectangle-Copy-11",fill:`var(${w(t).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),V("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${w(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),V("polygon",{id:"Rectangle-Copy-13",fill:`var(${w(t).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),V("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${w(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),V("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[V("use",{id:"Mask",fill:`var(${w(t).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${w(n)}`},null,8,["fill","xlink:href"]),V("polygon",{id:"Rectangle-Copy",fill:`var(${w(t).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${w(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),V("polygon",{id:"Rectangle-Copy-18",fill:`var(${w(t).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var WCe=Kt(UCe,[["__file","img-empty.vue"]]);const GCe=Wt({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),KCe=Be({name:"ElEmpty"}),qCe=Be({...KCe,props:GCe,setup(e){const t=e,{t:n}=Sr(),r=Rt("empty"),i=X(()=>t.description||n("el.table.emptyText")),a=X(()=>({width:oa(t.imageSize)}));return(o,s)=>(te(),me("div",{class:se(w(r).b())},[V("div",{class:se(w(r).e("image")),style:_n(w(a))},[o.image?(te(),me("img",{key:0,src:o.image,ondragstart:"return false"},null,8,["src"])):st(o.$slots,"image",{key:1},()=>[de(WCe)])],6),V("div",{class:se(w(r).e("description"))},[o.$slots.description?st(o.$slots,"description",{key:0}):(te(),me("p",{key:1},Xe(w(i)),1))],2),o.$slots.default?(te(),me("div",{key:0,class:se(w(r).e("bottom"))},[st(o.$slots,"default")],2)):Ge("v-if",!0)],2))}});var ZCe=Kt(qCe,[["__file","empty.vue"]]);const BZ=Wn(ZCe),YCe=Wt({urlList:{type:Qe(Array),default:()=>ji([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Qe(String)}}),XCe={close:()=>!0,switch:e=>zn(e),rotate:e=>zn(e)},JCe=Be({name:"ElImageViewer"}),QCe=Be({...JCe,props:YCe,emits:XCe,setup(e,{expose:t,emit:n}){var r;const i=e,a={CONTAIN:{name:"contain",icon:_r(fve)},ORIGINAL:{name:"original",icon:_r(Dve)}},{t:o}=Sr(),s=Rt("image-viewer"),{nextZIndex:l}=k0(),c=le(),h=le([]),f=e3(),p=le(!0),v=le(i.initialIndex),_=_i(a.CONTAIN),b=le({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),C=le((r=i.zIndex)!=null?r:l()),T=X(()=>{const{urlList:oe}=i;return oe.length<=1}),E=X(()=>v.value===0),A=X(()=>v.value===i.urlList.length-1),I=X(()=>i.urlList[v.value]),O=X(()=>[s.e("btn"),s.e("prev"),s.is("disabled",!i.infinite&&E.value)]),B=X(()=>[s.e("btn"),s.e("next"),s.is("disabled",!i.infinite&&A.value)]),N=X(()=>{const{scale:oe,deg:be,offsetX:we,offsetY:pe,enableTransition:Ce}=b.value;let Ve=we/oe,et=pe/oe;const Ee=be*Math.PI/180,Je=Math.cos(Ee),Ue=Math.sin(Ee);Ve=Ve*Je+et*Ue,et=et*Je-we/oe*Ue;const yt={transform:`scale(${oe}) rotate(${be}deg) translate(${Ve}px, ${et}px)`,transition:Ce?"transform .3s":""};return _.value.name===a.CONTAIN.name&&(yt.maxWidth=yt.maxHeight="100%"),yt});function H(){W(),n("close")}function j(){const oe=Lv(we=>{switch(we.code){case En.esc:i.closeOnPressEscape&&H();break;case En.space:J();break;case En.left:ce();break;case En.up:ee("zoomIn");break;case En.right:re();break;case En.down:ee("zoomOut");break}}),be=Lv(we=>{const pe=we.deltaY||we.deltaX;ee(pe<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});f.run(()=>{ti(document,"keydown",oe),ti(document,"wheel",be)})}function W(){f.stop()}function U(){p.value=!1}function Y(oe){p.value=!1,oe.target.alt=o("el.image.error")}function ie(oe){if(p.value||oe.button!==0||!c.value)return;b.value.enableTransition=!1;const{offsetX:be,offsetY:we}=b.value,pe=oe.pageX,Ce=oe.pageY,Ve=Lv(Ee=>{b.value={...b.value,offsetX:be+Ee.pageX-pe,offsetY:we+Ee.pageY-Ce}}),et=ti(document,"mousemove",Ve);ti(document,"mouseup",()=>{et()}),oe.preventDefault()}function ue(){b.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function J(){if(p.value)return;const oe=Wy(a),be=Object.values(a),we=_.value.name,Ce=(be.findIndex(Ve=>Ve.name===we)+1)%oe.length;_.value=a[oe[Ce]],ue()}function q(oe){const be=i.urlList.length;v.value=(oe+be)%be}function ce(){E.value&&!i.infinite||q(v.value-1)}function re(){A.value&&!i.infinite||q(v.value+1)}function ee(oe,be={}){if(p.value)return;const{minScale:we,maxScale:pe}=i,{zoomRate:Ce,rotateDeg:Ve,enableTransition:et}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...be};switch(oe){case"zoomOut":b.value.scale>we&&(b.value.scale=Number.parseFloat((b.value.scale/Ce).toFixed(3)));break;case"zoomIn":b.value.scale<pe&&(b.value.scale=Number.parseFloat((b.value.scale*Ce).toFixed(3)));break;case"clockwise":b.value.deg+=Ve,n("rotate",b.value.deg);break;case"anticlockwise":b.value.deg-=Ve,n("rotate",b.value.deg);break}b.value.enableTransition=et}return At(I,()=>{bn(()=>{const oe=h.value[0];oe!=null&&oe.complete||(p.value=!0)})}),At(v,oe=>{ue(),n("switch",oe)}),Un(()=>{var oe,be;j(),(be=(oe=c.value)==null?void 0:oe.focus)==null||be.call(oe)}),t({setActiveItem:q}),(oe,be)=>(te(),ft(w(P0),{to:"body",disabled:!oe.teleported},{default:ge(()=>[de(Ka,{name:"viewer-fade",appear:""},{default:ge(()=>[V("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:se(w(s).e("wrapper")),style:_n({zIndex:C.value})},[V("div",{class:se(w(s).e("mask")),onClick:Fn(we=>oe.hideOnClickModal&&H(),["self"])},null,10,["onClick"]),Ge(" CLOSE "),V("span",{class:se([w(s).e("btn"),w(s).e("close")]),onClick:H},[de(w(yn),null,{default:ge(()=>[de(w(Yu))]),_:1})],2),Ge(" ARROW "),w(T)?Ge("v-if",!0):(te(),me(hn,{key:0},[V("span",{class:se(w(O)),onClick:ce},[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1})],2),V("span",{class:se(w(B)),onClick:re},[de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})],2)],64)),Ge(" ACTIONS "),V("div",{class:se([w(s).e("btn"),w(s).e("actions")])},[V("div",{class:se(w(s).e("actions__inner"))},[de(w(yn),{onClick:we=>ee("zoomOut")},{default:ge(()=>[de(w(Zve))]),_:1},8,["onClick"]),de(w(yn),{onClick:we=>ee("zoomIn")},{default:ge(()=>[de(w(fK))]),_:1},8,["onClick"]),V("i",{class:se(w(s).e("actions__divider"))},null,2),de(w(yn),{onClick:J},{default:ge(()=>[(te(),ft(ir(w(_).icon)))]),_:1}),V("i",{class:se(w(s).e("actions__divider"))},null,2),de(w(yn),{onClick:we=>ee("anticlockwise")},{default:ge(()=>[de(w(Ave))]),_:1},8,["onClick"]),de(w(yn),{onClick:we=>ee("clockwise")},{default:ge(()=>[de(w(Ive))]),_:1},8,["onClick"])],2)],2),Ge(" CANVAS "),V("div",{class:se(w(s).e("canvas"))},[(te(!0),me(hn,null,Kn(oe.urlList,(we,pe)=>In((te(),me("img",{ref_for:!0,ref:Ce=>h.value[pe]=Ce,key:we,src:we,style:_n(w(N)),class:se(w(s).e("img")),crossorigin:oe.crossorigin,onLoad:U,onError:Y,onMousedown:ie},null,46,["src","crossorigin"])),[[Lr,pe===v.value]])),128))],2),st(oe.$slots,"default")],6)]),_:3})]),_:3},8,["disabled"]))}});var eTe=Kt(QCe,[["__file","image-viewer.vue"]]);const FZ=Wn(eTe),tTe=Wt({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Qe([String,Object])},previewSrcList:{type:Qe(Array),default:()=>ji([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Qe(String)}}),nTe={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>zn(e),close:()=>!0,show:()=>!0},rTe=Be({name:"ElImage",inheritAttrs:!1}),iTe=Be({...rTe,props:tTe,emits:nTe,setup(e,{emit:t}){const n=e;let r="";const{t:i}=Sr(),a=Rt("image"),o=gm(),s=X(()=>iw(Object.entries(o).filter(([re])=>/^(data-|on[A-Z])/i.test(re)||["id","style"].includes(re)))),l=Z3({excludeListeners:!0,excludeKeys:X(()=>Object.keys(s.value))}),c=le(),h=le(!1),f=le(!0),p=le(!1),v=le(),_=le(),b=xr&&"loading"in HTMLImageElement.prototype;let C,T;const E=X(()=>[a.e("inner"),I.value&&a.e("preview"),f.value&&a.is("loading")]),A=X(()=>{const{fit:re}=n;return xr&&re?{objectFit:re}:{}}),I=X(()=>{const{previewSrcList:re}=n;return Array.isArray(re)&&re.length>0}),O=X(()=>{const{previewSrcList:re,initialIndex:ee}=n;let oe=ee;return ee>re.length-1&&(oe=0),oe}),B=X(()=>n.loading==="eager"?!1:!b&&n.loading==="lazy"||n.lazy),N=()=>{xr&&(f.value=!0,h.value=!1,c.value=n.src)};function H(re){f.value=!1,h.value=!1,t("load",re)}function j(re){f.value=!1,h.value=!0,t("error",re)}function W(){lue(v.value,_.value)&&(N(),ie())}const U=gG(W,200,!0);async function Y(){var re;if(!xr)return;await bn();const{scrollContainer:ee}=n;vl(ee)?_.value=ee:Ln(ee)&&ee!==""?_.value=(re=document.querySelector(ee))!=null?re:void 0:v.value&&(_.value=$3(v.value)),_.value&&(C=ti(_,"scroll",U),setTimeout(()=>W(),100))}function ie(){!xr||!_.value||!U||(C==null||C(),_.value=void 0)}function ue(re){if(re.ctrlKey){if(re.deltaY<0)return re.preventDefault(),!1;if(re.deltaY>0)return re.preventDefault(),!1}}function J(){I.value&&(T=ti("wheel",ue,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",p.value=!0,t("show"))}function q(){T==null||T(),document.body.style.overflow=r,p.value=!1,t("close")}function ce(re){t("switch",re)}return At(()=>n.src,()=>{B.value?(f.value=!0,h.value=!1,ie(),Y()):N()}),Un(()=>{B.value?Y():N()}),(re,ee)=>(te(),me("div",sr({ref_key:"container",ref:v},w(s),{class:[w(a).b(),re.$attrs.class]}),[h.value?st(re.$slots,"error",{key:0},()=>[V("div",{class:se(w(a).e("error"))},Xe(w(i)("el.image.error")),3)]):(te(),me(hn,{key:1},[c.value!==void 0?(te(),me("img",sr({key:0},w(l),{src:c.value,loading:re.loading,style:w(A),class:w(E),crossorigin:re.crossorigin,onClick:J,onLoad:H,onError:j}),null,16,["src","loading","crossorigin"])):Ge("v-if",!0),f.value?(te(),me("div",{key:1,class:se(w(a).e("wrapper"))},[st(re.$slots,"placeholder",{},()=>[V("div",{class:se(w(a).e("placeholder"))},null,2)])],2)):Ge("v-if",!0)],64)),w(I)?(te(),me(hn,{key:2},[p.value?(te(),ft(w(FZ),{key:0,"z-index":re.zIndex,"initial-index":w(O),infinite:re.infinite,"zoom-rate":re.zoomRate,"min-scale":re.minScale,"max-scale":re.maxScale,"url-list":re.previewSrcList,crossorigin:re.crossorigin,"hide-on-click-modal":re.hideOnClickModal,teleported:re.previewTeleported,"close-on-press-escape":re.closeOnPressEscape,onClose:q,onSwitch:ce},{default:ge(()=>[re.$slots.viewer?(te(),me("div",{key:0},[st(re.$slots,"viewer")])):Ge("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Ge("v-if",!0)],64)):Ge("v-if",!0)],16))}});var aTe=Kt(iTe,[["__file","image.vue"]]);const oTe=Wn(aTe),sTe=Wt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:$a,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||zn(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...yo(["ariaLabel"])}),lTe={[ki]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[_s]:e=>zn(e)||ro(e),[tr]:e=>zn(e)||ro(e)},uTe=Be({name:"ElInputNumber"}),cTe=Be({...uTe,props:sTe,emits:lTe,setup(e,{expose:t,emit:n}){const r=e,{t:i}=Sr(),a=Rt("input-number"),o=le(),s=Ar({currentValue:r.modelValue,userInput:null}),{formItem:l}=es(),c=X(()=>zn(r.modelValue)&&r.modelValue<=r.min),h=X(()=>zn(r.modelValue)&&r.modelValue>=r.max),f=X(()=>{const J=T(r.step);return aa(r.precision)?Math.max(T(r.modelValue),J):(J>r.precision,r.precision)}),p=X(()=>r.controls&&r.controlsPosition==="right"),v=Ea(),_=Ts(),b=X(()=>{if(s.userInput!==null)return s.userInput;let J=s.currentValue;if(ro(J))return"";if(zn(J)){if(Number.isNaN(J))return"";aa(r.precision)||(J=J.toFixed(r.precision))}return J}),C=(J,q)=>{if(aa(q)&&(q=f.value),q===0)return Math.round(J);let ce=String(J);const re=ce.indexOf(".");if(re===-1||!ce.replace(".","").split("")[re+q])return J;const be=ce.length;return ce.charAt(be-1)==="5"&&(ce=`${ce.slice(0,Math.max(0,be-1))}6`),Number.parseFloat(Number(ce).toFixed(q))},T=J=>{if(ro(J))return 0;const q=J.toString(),ce=q.indexOf(".");let re=0;return ce!==-1&&(re=q.length-ce-1),re},E=(J,q=1)=>zn(J)?C(J+r.step*q):s.currentValue,A=()=>{if(r.readonly||_.value||h.value)return;const J=Number(b.value)||0,q=E(J);B(q),n(_s,s.currentValue),ie()},I=()=>{if(r.readonly||_.value||c.value)return;const J=Number(b.value)||0,q=E(J,-1);B(q),n(_s,s.currentValue),ie()},O=(J,q)=>{const{max:ce,min:re,step:ee,precision:oe,stepStrictly:be,valueOnClear:we}=r;ce<re&&Na("InputNumber","min should not be greater than max.");let pe=Number(J);if(ro(J)||Number.isNaN(pe))return null;if(J===""){if(we===null)return null;pe=Ln(we)?{min:re,max:ce}[we]:we}return be&&(pe=C(Math.round(pe/ee)*ee,oe)),aa(oe)||(pe=C(pe,oe)),(pe>ce||pe<re)&&(pe=pe>ce?ce:re,q&&n(tr,pe)),pe},B=(J,q=!0)=>{var ce;const re=s.currentValue,ee=O(J);if(!q){n(tr,ee);return}re===ee&&J||(s.userInput=null,n(tr,ee),re!==ee&&n(ki,ee,re),r.validateEvent&&((ce=l==null?void 0:l.validate)==null||ce.call(l,"change").catch(oe=>void 0)),s.currentValue=ee)},N=J=>{s.userInput=J;const q=J===""?null:Number(J);n(_s,q),B(q,!1)},H=J=>{const q=J!==""?Number(J):"";(zn(q)&&!Number.isNaN(q)||J==="")&&B(q),ie(),s.userInput=null},j=()=>{var J,q;(q=(J=o.value)==null?void 0:J.focus)==null||q.call(J)},W=()=>{var J,q;(q=(J=o.value)==null?void 0:J.blur)==null||q.call(J)},U=J=>{n("focus",J)},Y=J=>{var q;s.userInput=null,n("blur",J),r.validateEvent&&((q=l==null?void 0:l.validate)==null||q.call(l,"blur").catch(ce=>void 0))},ie=()=>{s.currentValue!==r.modelValue&&(s.currentValue=r.modelValue)},ue=J=>{document.activeElement===J.target&&J.preventDefault()};return At(()=>r.modelValue,(J,q)=>{const ce=O(J,!0);s.userInput===null&&ce!==q&&(s.currentValue=ce)},{immediate:!0}),Un(()=>{var J;const{min:q,max:ce,modelValue:re}=r,ee=(J=o.value)==null?void 0:J.input;if(ee.setAttribute("role","spinbutton"),Number.isFinite(ce)?ee.setAttribute("aria-valuemax",String(ce)):ee.removeAttribute("aria-valuemax"),Number.isFinite(q)?ee.setAttribute("aria-valuemin",String(q)):ee.removeAttribute("aria-valuemin"),ee.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),ee.setAttribute("aria-disabled",String(_.value)),!zn(re)&&re!=null){let oe=Number(re);Number.isNaN(oe)&&(oe=null),n(tr,oe)}ee.addEventListener("wheel",ue,{passive:!1})}),nh(()=>{var J,q;const ce=(J=o.value)==null?void 0:J.input;ce==null||ce.setAttribute("aria-valuenow",`${(q=s.currentValue)!=null?q:""}`)}),t({focus:j,blur:W}),(J,q)=>(te(),me("div",{class:se([w(a).b(),w(a).m(w(v)),w(a).is("disabled",w(_)),w(a).is("without-controls",!J.controls),w(a).is("controls-right",w(p))]),onDragstart:Fn(()=>{},["prevent"])},[J.controls?In((te(),me("span",{key:0,role:"button","aria-label":w(i)("el.inputNumber.decrease"),class:se([w(a).e("decrease"),w(a).is("disabled",w(c))]),onKeydown:oi(I,["enter"])},[st(J.$slots,"decrease-icon",{},()=>[de(w(yn),null,{default:ge(()=>[w(p)?(te(),ft(w(ah),{key:0})):(te(),ft(w(_ve),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(MT),I]]):Ge("v-if",!0),J.controls?In((te(),me("span",{key:1,role:"button","aria-label":w(i)("el.inputNumber.increase"),class:se([w(a).e("increase"),w(a).is("disabled",w(h))]),onKeydown:oi(A,["enter"])},[st(J.$slots,"increase-icon",{},()=>[de(w(yn),null,{default:ge(()=>[w(p)?(te(),ft(w(H3),{key:0})):(te(),ft(w(dK),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(MT),A]]):Ge("v-if",!0),de(w(Zo),{id:J.id,ref_key:"input",ref:o,type:"number",step:J.step,"model-value":w(b),placeholder:J.placeholder,readonly:J.readonly,disabled:w(_),size:w(v),max:J.max,min:J.min,name:J.name,"aria-label":J.ariaLabel,"validate-event":!1,onKeydown:[oi(Fn(A,["prevent"]),["up"]),oi(Fn(I,["prevent"]),["down"])],onBlur:Y,onFocus:U,onInput:N,onChange:H},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var dTe=Kt(cTe,[["__file","input-number.vue"]]);const NZ=Wn(dTe),hTe=Wt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:si}}),fTe={click:e=>e instanceof MouseEvent},pTe=Be({name:"ElLink"}),vTe=Be({...pTe,props:hTe,emits:fTe,setup(e,{emit:t}){const n=e,r=Rt("link"),i=X(()=>[r.b(),r.m(n.type),r.is("disabled",n.disabled),r.is("underline",n.underline&&!n.disabled)]);function a(o){n.disabled||t("click",o)}return(o,s)=>(te(),me("a",{class:se(w(i)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:a},[o.icon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(o.icon)))]),_:1})):Ge("v-if",!0),o.$slots.default?(te(),me("span",{key:1,class:se(w(r).e("inner"))},[st(o.$slots,"default")],2)):Ge("v-if",!0),o.$slots.icon?st(o.$slots,"icon",{key:2}):Ge("v-if",!0)],10,["href","target"]))}});var mTe=Kt(vTe,[["__file","link.vue"]]);const gTe=Wn(mTe);let yTe=class{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",r=>{let i=!1;switch(r.code){case En.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case En.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case En.tab:{wC(t,"mouseleave");break}case En.enter:case En.space:{i=!0,r.currentTarget.click();break}}return i&&(r.preventDefault(),r.stopPropagation()),!1})})}},_Te=class{constructor(t,n){this.domNode=t,this.submenu=null,this.submenu=null,this.init(n)}init(t){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${t}-menu`);n&&(this.submenu=new yTe(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case En.down:{wC(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case En.up:{wC(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case En.tab:{wC(t.currentTarget,"mouseleave");break}case En.enter:case En.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}},bTe=class{constructor(t,n){this.domNode=t,this.init(n)}init(t){const n=this.domNode.childNodes;Array.from(n).forEach(r=>{r.nodeType===1&&new _Te(r,t)})}};const wTe=Be({name:"ElMenuCollapseTransition",setup(){const e=Rt("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,r){Kl(n,`${e.namespace.value}-opacity-transition`),n.style.opacity="1",r()},onAfterEnter(n){Xo(n,`${e.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),Vs(n,e.m("collapse"))?(Xo(n,e.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Kl(n,e.m("collapse"))):(Kl(n,e.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Xo(n,e.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){Kl(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}}}}});function xTe(e,t,n,r,i,a){return te(),ft(Ka,sr({mode:"out-in"},e.listeners),{default:ge(()=>[st(e.$slots,"default")]),_:3},16)}var STe=Kt(wTe,[["render",xTe],["__file","menu-collapse-transition.vue"]]);function $Z(e,t){const n=X(()=>{let i=e.parent;const a=[t.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a});return{parentMenu:X(()=>{let i=e.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:n}}function CTe(e){return X(()=>{const n=e.backgroundColor;return n?new _q(n).shade(20).toString():""})}const VZ=(e,t)=>{const n=Rt("menu");return X(()=>n.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":CTe(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},TTe=Wt({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:si},expandOpenIcon:{type:si},collapseCloseIcon:{type:si},collapseOpenIcon:{type:si}}),cP="ElSubMenu";var O5=Be({name:cP,props:TTe,setup(e,{slots:t,expose:n}){const r=er(),{indexPath:i,parentMenu:a}=$Z(r,X(()=>e.index)),o=Rt("menu"),s=Rt("sub-menu"),l=un("rootMenu");l||Na(cP,"can not inject root menu");const c=un(`subMenu:${a.value.uid}`);c||Na(cP,"can not inject sub menu");const h=le({}),f=le({});let p;const v=le(!1),_=le(),b=le(null),C=X(()=>H.value==="horizontal"&&E.value?"bottom-start":"right-start"),T=X(()=>H.value==="horizontal"&&E.value||H.value==="vertical"&&!l.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?B.value?e.expandOpenIcon:e.expandCloseIcon:ah:e.collapseCloseIcon&&e.collapseOpenIcon?B.value?e.collapseOpenIcon:e.collapseCloseIcon:ys),E=X(()=>c.level===0),A=X(()=>{const oe=e.teleported;return oe===void 0?E.value:oe}),I=X(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),O=X(()=>H.value==="horizontal"&&E.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),B=X(()=>l.openedMenus.includes(e.index)),N=X(()=>{let oe=!1;return Object.values(h.value).forEach(be=>{be.active&&(oe=!0)}),Object.values(f.value).forEach(be=>{be.active&&(oe=!0)}),oe}),H=X(()=>l.props.mode),j=Ar({index:e.index,indexPath:i,active:N}),W=VZ(l.props,c.level+1),U=X(()=>{var oe;return(oe=e.popperOffset)!=null?oe:l.props.popperOffset}),Y=X(()=>{var oe;return(oe=e.popperClass)!=null?oe:l.props.popperClass}),ie=X(()=>{var oe;return(oe=e.showTimeout)!=null?oe:l.props.showTimeout}),ue=X(()=>{var oe;return(oe=e.hideTimeout)!=null?oe:l.props.hideTimeout}),J=()=>{var oe,be,we;return(we=(be=(oe=b.value)==null?void 0:oe.popperRef)==null?void 0:be.popperInstanceRef)==null?void 0:we.destroy()},q=oe=>{oe||J()},ce=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||e.disabled||l.handleSubMenuClick({index:e.index,indexPath:i.value,active:N.value})},re=(oe,be=ie.value)=>{var we;if(oe.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||e.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,p==null||p(),{stop:p}=Yv(()=>{l.openMenu(e.index,i.value)},be),A.value&&((we=a.value.vnode.el)==null||we.dispatchEvent(new MouseEvent("mouseenter")))}},ee=(oe=!1)=>{var be;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}p==null||p(),c.mouseInChild.value=!1,{stop:p}=Yv(()=>!v.value&&l.closeMenu(e.index,i.value),ue.value),A.value&&oe&&((be=c.handleMouseleave)==null||be.call(c,!0))};At(()=>l.props.collapse,oe=>q(!!oe));{const oe=we=>{f.value[we.index]=we},be=we=>{delete f.value[we.index]};pr(`subMenu:${r.uid}`,{addSubMenu:oe,removeSubMenu:be,handleMouseleave:ee,mouseInChild:v,level:c.level+1})}return n({opened:B}),Un(()=>{l.addSubMenu(j),c.addSubMenu(j)}),ui(()=>{c.removeSubMenu(j),l.removeSubMenu(j)}),()=>{var oe;const be=[(oe=t.title)==null?void 0:oe.call(t),Mn(yn,{class:s.e("icon-arrow"),style:{transform:B.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Ln(T.value)?Mn(r.appContext.components[T.value]):Mn(T.value)})],we=l.isMenuPopup?Mn(Po,{ref:b,visible:B.value,effect:"light",pure:!0,offset:U.value,showArrow:!1,persistent:!0,popperClass:Y.value,placement:C.value,teleported:A.value,fallbackPlacements:O.value,transition:I.value,gpuAcceleration:!1},{content:()=>{var pe;return Mn("div",{class:[o.m(H.value),o.m("popup-container"),Y.value],onMouseenter:Ce=>re(Ce,100),onMouseleave:()=>ee(!0),onFocus:Ce=>re(Ce,100)},[Mn("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${C.value}`)],style:W.value},[(pe=t.default)==null?void 0:pe.call(t)])])},default:()=>Mn("div",{class:s.e("title"),onClick:ce},be)}):Mn(hn,{},[Mn("div",{class:s.e("title"),ref:_,onClick:ce},be),Mn(ck,{},{default:()=>{var pe;return In(Mn("ul",{role:"menu",class:[o.b(),o.m("inline")],style:W.value},[(pe=t.default)==null?void 0:pe.call(t)]),[[Lr,B.value]])}})]);return Mn("li",{class:[s.b(),s.is("active",N.value),s.is("opened",B.value),s.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:B.value,onMouseenter:re,onMouseleave:()=>ee(),onFocus:re},[we])}}});const MTe=Wt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Qe(Array),default:()=>ji([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:si,default:()=>xve},popperEffect:{type:Qe(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),dP=e=>Array.isArray(e)&&e.every(t=>Ln(t)),kTe={close:(e,t)=>Ln(e)&&dP(t),open:(e,t)=>Ln(e)&&dP(t),select:(e,t,n,r)=>Ln(e)&&dP(t)&&nr(n)&&(r===void 0||r instanceof Promise)};var ETe=Be({name:"ElMenu",props:MTe,emits:kTe,setup(e,{emit:t,slots:n,expose:r}){const i=er(),a=i.appContext.config.globalProperties.$router,o=le(),s=Rt("menu"),l=Rt("sub-menu"),c=le(-1),h=le(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),f=le(e.defaultActive),p=le({}),v=le({}),_=X(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),b=()=>{const ue=f.value&&p.value[f.value];if(!ue||e.mode==="horizontal"||e.collapse)return;ue.indexPath.forEach(q=>{const ce=v.value[q];ce&&C(q,ce.indexPath)})},C=(ue,J)=>{h.value.includes(ue)||(e.uniqueOpened&&(h.value=h.value.filter(q=>J.includes(q))),h.value.push(ue),t("open",ue,J))},T=ue=>{const J=h.value.indexOf(ue);J!==-1&&h.value.splice(J,1)},E=(ue,J)=>{T(ue),t("close",ue,J)},A=({index:ue,indexPath:J})=>{h.value.includes(ue)?E(ue,J):C(ue,J)},I=ue=>{(e.mode==="horizontal"||e.collapse)&&(h.value=[]);const{index:J,indexPath:q}=ue;if(!(ro(J)||ro(q)))if(e.router&&a){const ce=ue.route||J,re=a.push(ce).then(ee=>(ee||(f.value=J),ee));t("select",J,q,{index:J,indexPath:q,route:ce},re)}else f.value=J,t("select",J,q,{index:J,indexPath:q})},O=ue=>{const J=p.value,q=J[ue]||f.value&&J[f.value]||J[e.defaultActive];q?f.value=q.index:f.value=ue},B=ue=>{const J=getComputedStyle(ue),q=Number.parseInt(J.marginLeft,10),ce=Number.parseInt(J.marginRight,10);return ue.offsetWidth+q+ce||0},N=()=>{var ue,J;if(!o.value)return-1;const q=Array.from((J=(ue=o.value)==null?void 0:ue.childNodes)!=null?J:[]).filter(Ce=>Ce.nodeName!=="#comment"&&(Ce.nodeName!=="#text"||Ce.nodeValue)),ce=64,re=getComputedStyle(o.value),ee=Number.parseInt(re.paddingLeft,10),oe=Number.parseInt(re.paddingRight,10),be=o.value.clientWidth-ee-oe;let we=0,pe=0;return q.forEach((Ce,Ve)=>{we+=B(Ce),we<=be-ce&&(pe=Ve+1)}),pe===q.length?-1:pe},H=ue=>v.value[ue].indexPath,j=(ue,J=33.34)=>{let q;return()=>{q&&clearTimeout(q),q=setTimeout(()=>{ue()},J)}};let W=!0;const U=()=>{if(c.value===N())return;const ue=()=>{c.value=-1,bn(()=>{c.value=N()})};W?ue():j(ue)(),W=!1};At(()=>e.defaultActive,ue=>{p.value[ue]||(f.value=""),O(ue)}),At(()=>e.collapse,ue=>{ue&&(h.value=[])}),At(p.value,b);let Y;ko(()=>{e.mode==="horizontal"&&e.ellipsis?Y=Hi(o,U).stop:Y==null||Y()});const ie=le(!1);{const ue=re=>{v.value[re.index]=re},J=re=>{delete v.value[re.index]};pr("rootMenu",Ar({props:e,openedMenus:h,items:p,subMenus:v,activeIndex:f,isMenuPopup:_,addMenuItem:re=>{p.value[re.index]=re},removeMenuItem:re=>{delete p.value[re.index]},addSubMenu:ue,removeSubMenu:J,openMenu:C,closeMenu:E,handleMenuItemClick:I,handleSubMenuClick:A})),pr(`subMenu:${i.uid}`,{addSubMenu:ue,removeSubMenu:J,mouseInChild:ie,level:0})}return Un(()=>{e.mode==="horizontal"&&new bTe(i.vnode.el,s.namespace.value)}),r({open:J=>{const{indexPath:q}=v.value[J];q.forEach(ce=>C(ce,q))},close:T,handleResize:U}),()=>{var ue,J;let q=(J=(ue=n.default)==null?void 0:ue.call(n))!=null?J:[];const ce=[];if(e.mode==="horizontal"&&o.value){const be=xf(q),we=c.value===-1?be:be.slice(0,c.value),pe=c.value===-1?[]:be.slice(c.value);pe!=null&&pe.length&&e.ellipsis&&(q=we,ce.push(Mn(O5,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>Mn(yn,{class:l.e("icon-more")},{default:()=>Mn(e.ellipsisIcon)}),default:()=>pe})))}const re=VZ(e,0),ee=e.closeOnClickOutside?[[Xd,()=>{h.value.length&&(ie.value||(h.value.forEach(be=>t("close",be,H(be))),h.value=[]))}]]:[],oe=In(Mn("ul",{key:String(e.collapse),role:"menubar",ref:o,style:re.value,class:{[s.b()]:!0,[s.m(e.mode)]:!0,[s.m("collapse")]:e.collapse}},[...q,...ce]),ee);return e.collapseTransition&&e.mode==="vertical"?Mn(STe,()=>oe):oe}}});const ATe=Wt({index:{type:Qe([String,null]),default:null},route:{type:Qe([String,Object])},disabled:Boolean}),PTe={click:e=>Ln(e.index)&&Array.isArray(e.indexPath)},hP="ElMenuItem",ITe=Be({name:hP,components:{ElTooltip:Po},props:ATe,emits:PTe,setup(e,{emit:t}){const n=er(),r=un("rootMenu"),i=Rt("menu"),a=Rt("menu-item");r||Na(hP,"can not inject root menu");const{parentMenu:o,indexPath:s}=$Z(n,Gr(e,"index")),l=un(`subMenu:${o.value.uid}`);l||Na(hP,"can not inject sub menu");const c=X(()=>e.index===r.activeIndex),h=Ar({index:e.index,indexPath:s,active:c}),f=()=>{e.disabled||(r.handleMenuItemClick({index:e.index,indexPath:s.value,route:e.route}),t("click",h))};return Un(()=>{l.addSubMenu(h),r.addMenuItem(h)}),ui(()=>{l.removeSubMenu(h),r.removeMenuItem(h)}),{parentMenu:o,rootMenu:r,active:c,nsMenu:i,nsMenuItem:a,handleClick:f}}});function LTe(e,t,n,r,i,a){const o=Xt("el-tooltip");return te(),me("li",{class:se([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:e.handleClick},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(te(),ft(o,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:ge(()=>[st(e.$slots,"title")]),default:ge(()=>[V("div",{class:se(e.nsMenu.be("tooltip","trigger"))},[st(e.$slots,"default")],2)]),_:3},8,["effect"])):(te(),me(hn,{key:1},[st(e.$slots,"default"),st(e.$slots,"title")],64))],10,["onClick"])}var HZ=Kt(ITe,[["render",LTe],["__file","menu-item.vue"]]);const DTe={title:String},RTe="ElMenuItemGroup",OTe=Be({name:RTe,props:DTe,setup(){return{ns:Rt("menu-item-group")}}});function zTe(e,t,n,r,i,a){return te(),me("li",{class:se(e.ns.b())},[V("div",{class:se(e.ns.e("title"))},[e.$slots.title?st(e.$slots,"title",{key:1}):(te(),me(hn,{key:0},[$t(Xe(e.title),1)],64))],2),V("ul",null,[st(e.$slots,"default")])],2)}var jZ=Kt(OTe,[["render",zTe],["__file","menu-item-group.vue"]]);const BTe=Wn(ETe,{MenuItem:HZ,MenuItemGroup:jZ,SubMenu:O5}),FTe=Ki(HZ),NTe=Ki(jZ),$Te=Ki(O5),VTe=Wt({icon:{type:si,default:()=>Gpe},title:String,content:{type:String,default:""}}),HTe={back:()=>!0},jTe=Be({name:"ElPageHeader"}),UTe=Be({...jTe,props:VTe,emits:HTe,setup(e,{emit:t}){const n=qa(),{t:r}=Sr(),i=Rt("page-header"),a=X(()=>[i.b(),{[i.m("has-breadcrumb")]:!!n.breadcrumb,[i.m("has-extra")]:!!n.extra,[i.is("contentful")]:!!n.default}]);function o(){t("back")}return(s,l)=>(te(),me("div",{class:se(w(a))},[s.$slots.breadcrumb?(te(),me("div",{key:0,class:se(w(i).e("breadcrumb"))},[st(s.$slots,"breadcrumb")],2)):Ge("v-if",!0),V("div",{class:se(w(i).e("header"))},[V("div",{class:se(w(i).e("left"))},[V("div",{class:se(w(i).e("back")),role:"button",tabindex:"0",onClick:o},[s.icon||s.$slots.icon?(te(),me("div",{key:0,"aria-label":s.title||w(r)("el.pageHeader.title"),class:se(w(i).e("icon"))},[st(s.$slots,"icon",{},()=>[s.icon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(s.icon)))]),_:1})):Ge("v-if",!0)])],10,["aria-label"])):Ge("v-if",!0),V("div",{class:se(w(i).e("title"))},[st(s.$slots,"title",{},()=>[$t(Xe(s.title||w(r)("el.pageHeader.title")),1)])],2)],2),de(w(EZ),{direction:"vertical"}),V("div",{class:se(w(i).e("content"))},[st(s.$slots,"content",{},()=>[$t(Xe(s.content),1)])],2)],2),s.$slots.extra?(te(),me("div",{key:0,class:se(w(i).e("extra"))},[st(s.$slots,"extra")],2)):Ge("v-if",!0)],2),s.$slots.default?(te(),me("div",{key:1,class:se(w(i).e("main"))},[st(s.$slots,"default")],2)):Ge("v-if",!0)],2))}});var WTe=Kt(UTe,[["__file","page-header.vue"]]);const GTe=Wn(WTe),UZ=Symbol("elPaginationKey"),KTe=Wt({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:si}}),qTe={click:e=>e instanceof MouseEvent},ZTe=Be({name:"ElPaginationPrev"}),YTe=Be({...ZTe,props:KTe,emits:qTe,setup(e){const t=e,{t:n}=Sr(),r=X(()=>t.disabled||t.currentPage<=1);return(i,a)=>(te(),me("button",{type:"button",class:"btn-prev",disabled:w(r),"aria-label":i.prevText||w(n)("el.pagination.prev"),"aria-disabled":w(r),onClick:o=>i.$emit("click",o)},[i.prevText?(te(),me("span",{key:0},Xe(i.prevText),1)):(te(),ft(w(yn),{key:1},{default:ge(()=>[(te(),ft(ir(i.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var XTe=Kt(YTe,[["__file","prev.vue"]]);const JTe=Wt({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:si}}),QTe=Be({name:"ElPaginationNext"}),eMe=Be({...QTe,props:JTe,emits:["click"],setup(e){const t=e,{t:n}=Sr(),r=X(()=>t.disabled||t.currentPage===t.pageCount||t.pageCount===0);return(i,a)=>(te(),me("button",{type:"button",class:"btn-next",disabled:w(r),"aria-label":i.nextText||w(n)("el.pagination.next"),"aria-disabled":w(r),onClick:o=>i.$emit("click",o)},[i.nextText?(te(),me("span",{key:0},Xe(i.nextText),1)):(te(),ft(w(yn),{key:1},{default:ge(()=>[(te(),ft(ir(i.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var tMe=Kt(eMe,[["__file","next.vue"]]);const WZ=Symbol("ElSelectGroup"),L0=Symbol("ElSelect");function nMe(e,t){const n=un(L0),r=un(WZ,{disabled:!1}),i=X(()=>h(Wo(n.props.modelValue),e.value)),a=X(()=>{var v;if(n.props.multiple){const _=Wo((v=n.props.modelValue)!=null?v:[]);return!i.value&&_.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=X(()=>e.label||(nr(e.value)?"":e.value)),s=X(()=>e.value||e.label||""),l=X(()=>e.disabled||t.groupDisabled||a.value),c=er(),h=(v=[],_)=>{if(nr(e.value)){const b=n.props.valueKey;return v&&v.some(C=>ei(ha(C,b))===ha(_,b))}else return v&&v.includes(_)},f=()=>{!e.disabled&&!r.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(c.proxy))},p=v=>{const _=new RegExp(N3(v),"i");t.visible=_.test(o.value)||e.created};return At(()=>o.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),At(()=>e.value,(v,_)=>{const{remote:b,valueKey:C}=n.props;if(v!==_&&(n.onOptionDestroy(_,c.proxy),n.onOptionCreate(c.proxy)),!e.created&&!b){if(C&&nr(v)&&nr(_)&&v[C]===_[C])return;n.setSelected()}}),At(()=>r.disabled,()=>{t.groupDisabled=r.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:s,itemSelected:i,isDisabled:l,hoverItem:f,updateOption:p}}const rMe=Be({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=Rt("select"),n=mo(),r=X(()=>[t.be("dropdown","item"),t.is("disabled",w(s)),t.is("selected",w(o)),t.is("hovering",w(p))]),i=Ar({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:a,itemSelected:o,isDisabled:s,select:l,hoverItem:c,updateOption:h}=nMe(e,i),{visible:f,hover:p}=ao(i),v=er().proxy;l.onOptionCreate(v),ui(()=>{const b=v.value,{selected:C}=l.states,E=(l.props.multiple?C:[C]).some(A=>A.value===v.value);bn(()=>{l.states.cachedOptions.get(b)===v&&!E&&l.states.cachedOptions.delete(b)}),l.onOptionDestroy(b,v)});function _(){s.value||l.handleOptionSelect(v)}return{ns:t,id:n,containerKls:r,currentLabel:a,itemSelected:o,isDisabled:s,select:l,hoverItem:c,updateOption:h,visible:f,hover:p,selectOptionClick:_,states:i}}});function iMe(e,t,n,r,i,a){return In((te(),me("li",{id:e.id,class:se(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMouseenter:e.hoverItem,onClick:Fn(e.selectOptionClick,["stop"])},[st(e.$slots,"default",{},()=>[V("span",null,Xe(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"])),[[Lr,e.visible]])}var z5=Kt(rMe,[["render",iMe],["__file","option.vue"]]);const aMe=Be({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=un(L0),t=Rt("select"),n=X(()=>e.props.popperClass),r=X(()=>e.props.multiple),i=X(()=>e.props.fitInputWidth),a=le("");function o(){var s;a.value=`${(s=e.selectRef)==null?void 0:s.offsetWidth}px`}return Un(()=>{o(),Hi(e.selectRef,o)}),{ns:t,minWidth:a,popperClass:n,isMultiple:r,isFitInputWidth:i}}});function oMe(e,t,n,r,i,a){return te(),me("div",{class:se([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:_n({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(te(),me("div",{key:0,class:se(e.ns.be("dropdown","header"))},[st(e.$slots,"header")],2)):Ge("v-if",!0),st(e.$slots,"default"),e.$slots.footer?(te(),me("div",{key:1,class:se(e.ns.be("dropdown","footer"))},[st(e.$slots,"footer")],2)):Ge("v-if",!0)],6)}var sMe=Kt(aMe,[["render",oMe],["__file","select-dropdown.vue"]]);const lMe=11,uMe=(e,t)=>{const{t:n}=Sr(),r=mo(),i=Rt("select"),a=Rt("input"),o=Ar({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:e.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),s=le(null),l=le(null),c=le(null),h=le(null),f=le(null),p=le(null),v=le(null),_=le(null),b=le(null),C=le(null),T=le(null),E=le(null),{isComposing:A,handleCompositionStart:I,handleCompositionUpdate:O,handleCompositionEnd:B}=ik({afterComposition:St=>On(St)}),{wrapperRef:N,isFocused:H,handleBlur:j}=cx(f,{afterFocus(){e.automaticDropdown&&!W.value&&(W.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(St){var en,gr;return((en=c.value)==null?void 0:en.isFocusInsideContent(St))||((gr=h.value)==null?void 0:gr.isFocusInsideContent(St))},afterBlur(){W.value=!1,o.menuVisibleOnFocus=!1}}),W=le(!1),U=le(),{form:Y,formItem:ie}=es(),{inputId:ue}=ac(e,{formItemContext:ie}),{valueOnClear:J,isEmptyValue:q}=ak(e),ce=X(()=>e.disabled||(Y==null?void 0:Y.disabled)),re=X(()=>sn(e.modelValue)?e.modelValue.length>0:!q(e.modelValue)),ee=X(()=>e.clearable&&!ce.value&&o.inputHovering&&re.value),oe=X(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),be=X(()=>i.is("reverse",oe.value&&W.value)),we=X(()=>(ie==null?void 0:ie.validateState)||""),pe=X(()=>q3[we.value]),Ce=X(()=>e.remote?300:0),Ve=X(()=>e.loading?e.loadingText||n("el.select.loading"):e.remote&&!o.inputValue&&o.options.size===0?!1:e.filterable&&o.inputValue&&o.options.size>0&&et.value===0?e.noMatchText||n("el.select.noMatch"):o.options.size===0?e.noDataText||n("el.select.noData"):null),et=X(()=>Ee.value.filter(St=>St.visible).length),Ee=X(()=>{const St=Array.from(o.options.values()),en=[];return o.optionValues.forEach(gr=>{const Tr=St.findIndex(qr=>qr.value===gr);Tr>-1&&en.push(St[Tr])}),en.length>=St.length?en:St}),Je=X(()=>Array.from(o.cachedOptions.values())),Ue=X(()=>{const St=Ee.value.filter(en=>!en.created).some(en=>en.currentLabel===o.inputValue);return e.filterable&&e.allowCreate&&o.inputValue!==""&&!St}),yt=()=>{e.filterable&&Dn(e.filterMethod)||e.filterable&&e.remote&&Dn(e.remoteMethod)||Ee.value.forEach(St=>{var en;(en=St.updateOption)==null||en.call(St,o.inputValue)})},Ne=Ea(),dt=X(()=>["small"].includes(Ne.value)?"small":"default"),Le=X({get(){return W.value&&Ve.value!==!1},set(St){W.value=St}}),ze=X(()=>{if(e.multiple&&!aa(e.modelValue))return Wo(e.modelValue).length===0&&!o.inputValue;const St=sn(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||aa(St)?!o.inputValue:!0}),ct=X(()=>{var St;const en=(St=e.placeholder)!=null?St:n("el.select.placeholder");return e.multiple||!re.value?en:o.selectedLabel}),Lt=X(()=>jL?null:"mouseenter");At(()=>e.modelValue,(St,en)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(o.inputValue="",lt("")),_t(),!Yo(St,en)&&e.validateEvent&&(ie==null||ie.validate("change").catch(gr=>void 0))},{flush:"post",deep:!0}),At(()=>W.value,St=>{St?lt(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),t("visible-change",St)}),At(()=>o.options.entries(),()=>{var St;if(!xr)return;const en=((St=s.value)==null?void 0:St.querySelectorAll("input"))||[];(!e.filterable&&!e.defaultFirstOption&&!aa(e.modelValue)||!Array.from(en).includes(document.activeElement))&&_t(),e.defaultFirstOption&&(e.filterable||e.remote)&&et.value&&Ct()},{flush:"post"}),At(()=>o.hoveringIndex,St=>{zn(St)&&St>-1?U.value=Ee.value[St]||{}:U.value={},Ee.value.forEach(en=>{en.hover=U.value===en})}),ko(()=>{o.isBeforeHide||yt()});const lt=St=>{o.previousQuery===St||A.value||(o.previousQuery=St,e.filterable&&Dn(e.filterMethod)?e.filterMethod(St):e.filterable&&e.remote&&Dn(e.remoteMethod)&&e.remoteMethod(St),e.defaultFirstOption&&(e.filterable||e.remote)&&et.value?bn(Ct):bn(Bt))},Ct=()=>{const St=Ee.value.filter(Tr=>Tr.visible&&!Tr.disabled&&!Tr.states.groupDisabled),en=St.find(Tr=>Tr.created),gr=St[0];o.hoveringIndex=ve(Ee.value,en||gr)},_t=()=>{if(e.multiple)o.selectedLabel="";else{const en=sn(e.modelValue)?e.modelValue[0]:e.modelValue,gr=It(en);o.selectedLabel=gr.currentLabel,o.selected=gr;return}const St=[];aa(e.modelValue)||Wo(e.modelValue).forEach(en=>{St.push(It(en))}),o.selected=St},It=St=>{let en;const gr=vC(St).toLowerCase()==="object",Tr=vC(St).toLowerCase()==="null",qr=vC(St).toLowerCase()==="undefined";for(let je=o.cachedOptions.size-1;je>=0;je--){const zt=Je.value[je];if(gr?ha(zt.value,e.valueKey)===ha(St,e.valueKey):zt.value===St){en={value:St,currentLabel:zt.currentLabel,get isDisabled(){return zt.isDisabled}};break}}if(en)return en;const ar=gr?St.label:!Tr&&!qr?St:"";return{value:St,currentLabel:ar}},Bt=()=>{e.multiple?o.hoveringIndex=Ee.value.findIndex(St=>o.selected.some(en=>Tn(en)===Tn(St))):o.hoveringIndex=Ee.value.findIndex(St=>Tn(St)===Tn(o.selected))},Ft=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},cn=()=>{o.calculatorWidth=p.value.getBoundingClientRect().width},Ot=()=>{o.collapseItemWidth=T.value.getBoundingClientRect().width},kt=()=>{var St,en;(en=(St=c.value)==null?void 0:St.updatePopper)==null||en.call(St)},fn=()=>{var St,en;(en=(St=h.value)==null?void 0:St.updatePopper)==null||en.call(St)},Rn=()=>{o.inputValue.length>0&&!W.value&&(W.value=!0),lt(o.inputValue)},On=St=>{if(o.inputValue=St.target.value,e.remote)mt();else return Rn()},mt=Ks(()=>{Rn()},Ce.value),Gt=St=>{Yo(e.modelValue,St)||t(ki,St)},gn=St=>iK(St,en=>!o.disabledOptions.has(en)),xt=St=>{if(e.multiple&&St.code!==En.delete&&St.target.value.length<=0){const en=Wo(e.modelValue).slice(),gr=gn(en);if(gr<0)return;const Tr=en[gr];en.splice(gr,1),t(tr,en),Gt(en),t("remove-tag",Tr)}},Zt=(St,en)=>{const gr=o.selected.indexOf(en);if(gr>-1&&!ce.value){const Tr=Wo(e.modelValue).slice();Tr.splice(gr,1),t(tr,Tr),Gt(Tr),t("remove-tag",en.value)}St.stopPropagation(),Mt()},Ze=St=>{St.stopPropagation();const en=e.multiple?[]:J.value;if(e.multiple)for(const gr of o.selected)gr.isDisabled&&en.push(gr.value);t(tr,en),Gt(en),o.hoveringIndex=-1,W.value=!1,t("clear"),Mt()},Fe=St=>{var en;if(e.multiple){const gr=Wo((en=e.modelValue)!=null?en:[]).slice(),Tr=ve(gr,St.value);Tr>-1?gr.splice(Tr,1):(e.multipleLimit<=0||gr.length<e.multipleLimit)&&gr.push(St.value),t(tr,gr),Gt(gr),St.created&&lt(""),e.filterable&&!e.reserveKeyword&&(o.inputValue="")}else t(tr,St.value),Gt(St.value),W.value=!1;Mt(),!W.value&&bn(()=>{ke(St)})},ve=(St=[],en)=>{if(!nr(en))return St.indexOf(en);const gr=e.valueKey;let Tr=-1;return St.some((qr,ar)=>ei(ha(qr,gr))===ha(en,gr)?(Tr=ar,!0):!1),Tr},ke=St=>{var en,gr,Tr,qr,ar;const $e=sn(St)?St[0]:St;let je=null;if($e!=null&&$e.value){const zt=Ee.value.filter(rt=>rt.value===$e.value);zt.length>0&&(je=zt[0].$el)}if(c.value&&je){const zt=(qr=(Tr=(gr=(en=c.value)==null?void 0:en.popperRef)==null?void 0:gr.contentRef)==null?void 0:Tr.querySelector)==null?void 0:qr.call(Tr,`.${i.be("dropdown","wrap")}`);zt&&V3(zt,je)}(ar=E.value)==null||ar.handleScroll()},Oe=St=>{o.options.set(St.value,St),o.cachedOptions.set(St.value,St),St.disabled&&o.disabledOptions.set(St.value,St)},Me=(St,en)=>{o.options.get(St)===en&&o.options.delete(St)},Ae=X(()=>{var St,en;return(en=(St=c.value)==null?void 0:St.popperRef)==null?void 0:en.contentRef}),pt=()=>{o.isBeforeHide=!1,bn(()=>ke(o.selected))},Mt=()=>{var St;(St=f.value)==null||St.focus()},it=()=>{Vt()},Et=St=>{Ze(St)},Vt=St=>{if(W.value=!1,H.value){const en=new FocusEvent("focus",St);bn(()=>j(en))}},Dt=()=>{o.inputValue.length>0?o.inputValue="":W.value=!1},ln=()=>{ce.value||(jL&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:W.value=!W.value)},kn=()=>{W.value?Ee.value[o.hoveringIndex]&&Fe(Ee.value[o.hoveringIndex]):ln()},Tn=St=>nr(St.value)?ha(St.value,e.valueKey):St.value,Xn=X(()=>Ee.value.filter(St=>St.visible).every(St=>St.disabled)),mr=X(()=>e.multiple?e.collapseTags?o.selected.slice(0,e.maxCollapseTags):o.selected:[]),Yt=X(()=>e.multiple?e.collapseTags?o.selected.slice(e.maxCollapseTags):[]:[]),rr=St=>{if(!W.value){W.value=!0;return}if(!(o.options.size===0||o.filteredOptionsCount===0||A.value)&&!Xn.value){St==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):St==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const en=Ee.value[o.hoveringIndex];(en.disabled===!0||en.states.groupDisabled===!0||!en.visible)&&rr(St),bn(()=>ke(U.value))}},zr=()=>{if(!l.value)return 0;const St=window.getComputedStyle(l.value);return Number.parseFloat(St.gap||"6px")},Ur=X(()=>{const St=zr();return{maxWidth:`${T.value&&e.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-St:o.selectionWidth}px`}}),Br=X(()=>({maxWidth:`${o.selectionWidth}px`})),Qt=X(()=>({width:`${Math.max(o.calculatorWidth,lMe)}px`}));return Hi(l,Ft),Hi(p,cn),Hi(b,kt),Hi(N,kt),Hi(C,fn),Hi(T,Ot),Un(()=>{_t()}),{inputId:ue,contentId:r,nsSelect:i,nsInput:a,states:o,isFocused:H,expanded:W,optionsArray:Ee,hoverOption:U,selectSize:Ne,filteredOptionsCount:et,resetCalculatorWidth:cn,updateTooltip:kt,updateTagTooltip:fn,debouncedOnInputChange:mt,onInput:On,deletePrevTag:xt,deleteTag:Zt,deleteSelected:Ze,handleOptionSelect:Fe,scrollToOption:ke,hasModelValue:re,shouldShowPlaceholder:ze,currentPlaceholder:ct,mouseEnterEventName:Lt,showClose:ee,iconComponent:oe,iconReverse:be,validateState:we,validateIcon:pe,showNewOption:Ue,updateOptions:yt,collapseTagSize:dt,setSelected:_t,selectDisabled:ce,emptyText:Ve,handleCompositionStart:I,handleCompositionUpdate:O,handleCompositionEnd:B,onOptionCreate:Oe,onOptionDestroy:Me,handleMenuEnter:pt,focus:Mt,blur:it,handleClearClick:Et,handleClickOutside:Vt,handleEsc:Dt,toggleMenu:ln,selectOption:kn,getValueKey:Tn,navigateOptions:rr,dropdownMenuVisible:Le,showTagList:mr,collapseTagList:Yt,tagStyle:Ur,collapseTagStyle:Br,inputStyle:Qt,popperRef:Ae,inputRef:f,tooltipRef:c,tagTooltipRef:h,calculatorRef:p,prefixRef:v,suffixRef:_,selectRef:s,wrapperRef:N,selectionRef:l,scrollbarRef:E,menuRef:b,tagMenuRef:C,collapseItemRef:T}};var cMe=Be({name:"ElOptions",setup(e,{slots:t}){const n=un(L0);let r=[];return()=>{var i,a;const o=(i=t.default)==null?void 0:i.call(t),s=[];function l(c){sn(c)&&c.forEach(h=>{var f,p,v,_;const b=(f=(h==null?void 0:h.type)||{})==null?void 0:f.name;b==="ElOptionGroup"?l(!Ln(h.children)&&!sn(h.children)&&Dn((p=h.children)==null?void 0:p.default)?(v=h.children)==null?void 0:v.default():h.children):b==="ElOption"?s.push((_=h.props)==null?void 0:_.value):sn(h.children)&&l(h.children)})}return o.length&&l((a=o[0])==null?void 0:a.children),Yo(s,r)||(r=s,n&&(n.states.optionValues=s)),o}}});const dMe=Wt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:$a,effect:{type:Qe(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Qe(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:eo.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:si,default:Kf},fitInputWidth:Boolean,suffixIcon:{type:si,default:ah},tagType:{...nm.type,default:"info"},tagEffect:{...nm.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Qe(String),values:qf,default:"bottom-start"},fallbackPlacements:{type:Qe(Array),default:["bottom-start","top-start","right","left"]},...A0,...yo(["ariaLabel"])}),Y6="ElSelect",hMe=Be({name:Y6,componentName:Y6,components:{ElSelectMenu:sMe,ElOption:z5,ElOptions:cMe,ElTag:cw,ElScrollbar:ad,ElTooltip:Po,ElIcon:yn},directives:{ClickOutside:Xd},props:dMe,emits:[tr,ki,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=uMe(e,t);return pr(L0,Ar({props:e,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected})),{...n}}});function fMe(e,t,n,r,i,a){const o=Xt("el-tag"),s=Xt("el-tooltip"),l=Xt("el-icon"),c=Xt("el-option"),h=Xt("el-options"),f=Xt("el-scrollbar"),p=Xt("el-select-menu"),v=VM("click-outside");return In((te(),me("div",{ref:"selectRef",class:se([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[c1(e.mouseEnterEventName)]:_=>e.states.inputHovering=!0,onMouseleave:_=>e.states.inputHovering=!1},[de(s,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:_=>e.states.isBeforeHide=!1},{default:ge(()=>{var _;return[V("div",{ref:"wrapperRef",class:se([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:Fn(e.toggleMenu,["prevent"])},[e.$slots.prefix?(te(),me("div",{key:0,ref:"prefixRef",class:se(e.nsSelect.e("prefix"))},[st(e.$slots,"prefix")],2)):Ge("v-if",!0),V("div",{ref:"selectionRef",class:se([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?st(e.$slots,"tag",{key:0},()=>[(te(!0),me(hn,null,Kn(e.showTagList,b=>(te(),me("div",{key:e.getValueKey(b),class:se(e.nsSelect.e("selected-item"))},[de(o,{closable:!e.selectDisabled&&!b.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:_n(e.tagStyle),onClose:C=>e.deleteTag(C,b)},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))},[st(e.$slots,"label",{label:b.currentLabel,value:b.value},()=>[$t(Xe(b.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(te(),ft(s,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:ge(()=>[V("div",{ref:"collapseItemRef",class:se(e.nsSelect.e("selected-item"))},[de(o,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:_n(e.collapseTagStyle)},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))}," + "+Xe(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ge(()=>[V("div",{ref:"tagMenuRef",class:se(e.nsSelect.e("selection"))},[(te(!0),me(hn,null,Kn(e.collapseTagList,b=>(te(),me("div",{key:e.getValueKey(b),class:se(e.nsSelect.e("selected-item"))},[de(o,{class:"in-tooltip",closable:!e.selectDisabled&&!b.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:C=>e.deleteTag(C,b)},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))},[st(e.$slots,"label",{label:b.currentLabel,value:b.value},()=>[$t(Xe(b.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ge("v-if",!0)]):Ge("v-if",!0),e.selectDisabled?Ge("v-if",!0):(te(),me("div",{key:1,class:se([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[In(V("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":b=>e.states.inputValue=b,type:"text",name:e.name,class:se([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:_n(e.inputStyle),role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((_=e.hoverOption)==null?void 0:_.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[oi(Fn(b=>e.navigateOptions("next"),["stop","prevent"]),["down"]),oi(Fn(b=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),oi(Fn(e.handleEsc,["stop","prevent"]),["esc"]),oi(Fn(e.selectOption,["stop","prevent"]),["enter"]),oi(Fn(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:Fn(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[qo,e.states.inputValue]]),e.filterable?(te(),me("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:se(e.nsSelect.e("input-calculator")),textContent:Xe(e.states.inputValue)},null,10,["textContent"])):Ge("v-if",!0)],2)),e.shouldShowPlaceholder?(te(),me("div",{key:2,class:se([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?st(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[V("span",null,Xe(e.currentPlaceholder),1)]):(te(),me("span",{key:1},Xe(e.currentPlaceholder),1))],2)):Ge("v-if",!0)],2),V("div",{ref:"suffixRef",class:se(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(te(),ft(l,{key:0,class:se([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:ge(()=>[(te(),ft(ir(e.iconComponent)))]),_:1},8,["class"])):Ge("v-if",!0),e.showClose&&e.clearIcon?(te(),ft(l,{key:1,class:se([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:ge(()=>[(te(),ft(ir(e.clearIcon)))]),_:1},8,["class","onClick"])):Ge("v-if",!0),e.validateState&&e.validateIcon?(te(),ft(l,{key:2,class:se([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:ge(()=>[(te(),ft(ir(e.validateIcon)))]),_:1},8,["class"])):Ge("v-if",!0)],2)],10,["onClick"])]}),content:ge(()=>[de(p,{ref:"menuRef"},{default:ge(()=>[e.$slots.header?(te(),me("div",{key:0,class:se(e.nsSelect.be("dropdown","header")),onClick:Fn(()=>{},["stop"])},[st(e.$slots,"header")],10,["onClick"])):Ge("v-if",!0),In(de(f,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:se([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:ge(()=>[e.showNewOption?(te(),ft(c,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):Ge("v-if",!0),de(h,null,{default:ge(()=>[st(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Lr,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(te(),me("div",{key:1,class:se(e.nsSelect.be("dropdown","loading"))},[st(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(te(),me("div",{key:2,class:se(e.nsSelect.be("dropdown","empty"))},[st(e.$slots,"empty",{},()=>[V("span",null,Xe(e.emptyText),1)])],2)):Ge("v-if",!0),e.$slots.footer?(te(),me("div",{key:3,class:se(e.nsSelect.be("dropdown","footer")),onClick:Fn(()=>{},["stop"])},[st(e.$slots,"footer")],10,["onClick"])):Ge("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow","onHide"])],16,["onMouseleave"])),[[v,e.handleClickOutside,e.popperRef]])}var pMe=Kt(hMe,[["render",fMe],["__file","select.vue"]]);const vMe=Be({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=Rt("select"),n=le(null),r=er(),i=le([]);pr(WZ,Ar({...ao(e)}));const a=X(()=>i.value.some(c=>c.visible===!0)),o=c=>{var h,f;return((h=c.type)==null?void 0:h.name)==="ElOption"&&!!((f=c.component)!=null&&f.proxy)},s=c=>{const h=Wo(c),f=[];return h.forEach(p=>{var v,_;o(p)?f.push(p.component.proxy):(v=p.children)!=null&&v.length?f.push(...s(p.children)):(_=p.component)!=null&&_.subTree&&f.push(...s(p.component.subTree))}),f},l=()=>{i.value=s(r.subTree)};return Un(()=>{l()}),_G(n,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:a,ns:t}}});function mMe(e,t,n,r,i,a){return In((te(),me("ul",{ref:"groupRef",class:se(e.ns.be("group","wrap"))},[V("li",{class:se(e.ns.be("group","title"))},Xe(e.label),3),V("li",null,[V("ul",{class:se(e.ns.b("group"))},[st(e.$slots,"default")],2)])],2)),[[Lr,e.visible]])}var GZ=Kt(vMe,[["render",mMe],["__file","option-group.vue"]]);const rm=Wn(pMe,{Option:z5,OptionGroup:GZ}),AT=Ki(z5),gMe=Ki(GZ),B5=()=>un(UZ,{}),yMe=Wt({pageSize:{type:Number,required:!0},pageSizes:{type:Qe(Array),default:()=>ji([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:id}}),_Me=Be({name:"ElPaginationSizes"}),bMe=Be({..._Me,props:yMe,emits:["page-size-change"],setup(e,{emit:t}){const n=e,{t:r}=Sr(),i=Rt("pagination"),a=B5(),o=le(n.pageSize);At(()=>n.pageSizes,(c,h)=>{if(!Yo(c,h)&&Array.isArray(c)){const f=c.includes(n.pageSize)?n.pageSize:n.pageSizes[0];t("page-size-change",f)}}),At(()=>n.pageSize,c=>{o.value=c});const s=X(()=>n.pageSizes);function l(c){var h;c!==o.value&&(o.value=c,(h=a.handleSizeChange)==null||h.call(a,Number(c)))}return(c,h)=>(te(),me("span",{class:se(w(i).e("sizes"))},[de(w(rm),{"model-value":o.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,onChange:l},{default:ge(()=>[(te(!0),me(hn,null,Kn(w(s),f=>(te(),ft(w(AT),{key:f,value:f,label:f+w(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var wMe=Kt(bMe,[["__file","sizes.vue"]]);const xMe=Wt({size:{type:String,values:id}}),SMe=Be({name:"ElPaginationJumper"}),CMe=Be({...SMe,props:xMe,setup(e){const{t}=Sr(),n=Rt("pagination"),{pageCount:r,disabled:i,currentPage:a,changeEvent:o}=B5(),s=le(),l=X(()=>{var f;return(f=s.value)!=null?f:a==null?void 0:a.value});function c(f){s.value=f?+f:""}function h(f){f=Math.trunc(+f),o==null||o(f),s.value=void 0}return(f,p)=>(te(),me("span",{class:se(w(n).e("jump")),disabled:w(i)},[V("span",{class:se([w(n).e("goto")])},Xe(w(t)("el.pagination.goto")),3),de(w(Zo),{size:f.size,class:se([w(n).e("editor"),w(n).is("in-pagination")]),min:1,max:w(r),disabled:w(i),"model-value":w(l),"validate-event":!1,"aria-label":w(t)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:h},null,8,["size","class","max","disabled","model-value","aria-label"]),V("span",{class:se([w(n).e("classifier")])},Xe(w(t)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var TMe=Kt(CMe,[["__file","jumper.vue"]]);const MMe=Wt({total:{type:Number,default:1e3}}),kMe=Be({name:"ElPaginationTotal"}),EMe=Be({...kMe,props:MMe,setup(e){const{t}=Sr(),n=Rt("pagination"),{disabled:r}=B5();return(i,a)=>(te(),me("span",{class:se(w(n).e("total")),disabled:w(r)},Xe(w(t)("el.pagination.total",{total:i.total})),11,["disabled"]))}});var AMe=Kt(EMe,[["__file","total.vue"]]);const PMe=Wt({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),IMe=Be({name:"ElPaginationPager"}),LMe=Be({...IMe,props:PMe,emits:["change"],setup(e,{emit:t}){const n=e,r=Rt("pager"),i=Rt("icon"),{t:a}=Sr(),o=le(!1),s=le(!1),l=le(!1),c=le(!1),h=le(!1),f=le(!1),p=X(()=>{const I=n.pagerCount,O=(I-1)/2,B=Number(n.currentPage),N=Number(n.pageCount);let H=!1,j=!1;N>I&&(B>I-O&&(H=!0),B<N-O&&(j=!0));const W=[];if(H&&!j){const U=N-(I-2);for(let Y=U;Y<N;Y++)W.push(Y)}else if(!H&&j)for(let U=2;U<I;U++)W.push(U);else if(H&&j){const U=Math.floor(I/2)-1;for(let Y=B-U;Y<=B+U;Y++)W.push(Y)}else for(let U=2;U<N;U++)W.push(U);return W}),v=X(()=>["more","btn-quickprev",i.b(),r.is("disabled",n.disabled)]),_=X(()=>["more","btn-quicknext",i.b(),r.is("disabled",n.disabled)]),b=X(()=>n.disabled?-1:0);ko(()=>{const I=(n.pagerCount-1)/2;o.value=!1,s.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-I&&(o.value=!0),n.currentPage<n.pageCount-I&&(s.value=!0))});function C(I=!1){n.disabled||(I?l.value=!0:c.value=!0)}function T(I=!1){I?h.value=!0:f.value=!0}function E(I){const O=I.target;if(O.tagName.toLowerCase()==="li"&&Array.from(O.classList).includes("number")){const B=Number(O.textContent);B!==n.currentPage&&t("change",B)}else O.tagName.toLowerCase()==="li"&&Array.from(O.classList).includes("more")&&A(I)}function A(I){const O=I.target;if(O.tagName.toLowerCase()==="ul"||n.disabled)return;let B=Number(O.textContent);const N=n.pageCount,H=n.currentPage,j=n.pagerCount-2;O.className.includes("more")&&(O.className.includes("quickprev")?B=H-j:O.className.includes("quicknext")&&(B=H+j)),Number.isNaN(+B)||(B<1&&(B=1),B>N&&(B=N)),B!==H&&t("change",B)}return(I,O)=>(te(),me("ul",{class:se(w(r).b()),onClick:A,onKeyup:oi(E,["enter"])},[I.pageCount>0?(te(),me("li",{key:0,class:se([[w(r).is("active",I.currentPage===1),w(r).is("disabled",I.disabled)],"number"]),"aria-current":I.currentPage===1,"aria-label":w(a)("el.pagination.currentPage",{pager:1}),tabindex:w(b)}," 1 ",10,["aria-current","aria-label","tabindex"])):Ge("v-if",!0),o.value?(te(),me("li",{key:1,class:se(w(v)),tabindex:w(b),"aria-label":w(a)("el.pagination.prevPages",{pager:I.pagerCount-2}),onMouseenter:B=>C(!0),onMouseleave:B=>l.value=!1,onFocus:B=>T(!0),onBlur:B=>h.value=!1},[(l.value||h.value)&&!I.disabled?(te(),ft(w(Of),{key:0})):(te(),ft(w(F8),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Ge("v-if",!0),(te(!0),me(hn,null,Kn(w(p),B=>(te(),me("li",{key:B,class:se([[w(r).is("active",I.currentPage===B),w(r).is("disabled",I.disabled)],"number"]),"aria-current":I.currentPage===B,"aria-label":w(a)("el.pagination.currentPage",{pager:B}),tabindex:w(b)},Xe(B),11,["aria-current","aria-label","tabindex"]))),128)),s.value?(te(),me("li",{key:2,class:se(w(_)),tabindex:w(b),"aria-label":w(a)("el.pagination.nextPages",{pager:I.pagerCount-2}),onMouseenter:B=>C(),onMouseleave:B=>c.value=!1,onFocus:B=>T(),onBlur:B=>f.value=!1},[(c.value||f.value)&&!I.disabled?(te(),ft(w(zf),{key:0})):(te(),ft(w(F8),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Ge("v-if",!0),I.pageCount>1?(te(),me("li",{key:3,class:se([[w(r).is("active",I.currentPage===I.pageCount),w(r).is("disabled",I.disabled)],"number"]),"aria-current":I.currentPage===I.pageCount,"aria-label":w(a)("el.pagination.currentPage",{pager:I.pageCount}),tabindex:w(b)},Xe(I.pageCount),11,["aria-current","aria-label","tabindex"])):Ge("v-if",!0)],42,["onKeyup"]))}});var DMe=Kt(LMe,[["__file","pager.vue"]]);const ss=e=>typeof e!="number",RMe=Wt({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>zn(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Qe(Array),default:()=>ji([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:si,default:()=>Rf},nextText:{type:String,default:""},nextIcon:{type:si,default:()=>ys},teleported:{type:Boolean,default:!0},small:Boolean,size:$a,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),OMe={"update:current-page":e=>zn(e),"update:page-size":e=>zn(e),"size-change":e=>zn(e),change:(e,t)=>zn(e)&&zn(t),"current-change":e=>zn(e),"prev-click":e=>zn(e),"next-click":e=>zn(e)},X6="ElPagination";var zMe=Be({name:X6,props:RMe,emits:OMe,setup(e,{emit:t,slots:n}){const{t:r}=Sr(),i=Rt("pagination"),a=er().vnode.props||{},o=X(()=>{var I;return e.small?"small":(I=e.size)!=null?I:YK().value});Sf({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},X(()=>!!e.small));const s="onUpdate:currentPage"in a||"onUpdate:current-page"in a||"onCurrentChange"in a,l="onUpdate:pageSize"in a||"onUpdate:page-size"in a||"onSizeChange"in a,c=X(()=>{if(ss(e.total)&&ss(e.pageCount)||!ss(e.currentPage)&&!s)return!1;if(e.layout.includes("sizes")){if(ss(e.pageCount)){if(!ss(e.total)&&!ss(e.pageSize)&&!l)return!1}else if(!l)return!1}return!0}),h=le(ss(e.defaultPageSize)?10:e.defaultPageSize),f=le(ss(e.defaultCurrentPage)?1:e.defaultCurrentPage),p=X({get(){return ss(e.pageSize)?h.value:e.pageSize},set(I){ss(e.pageSize)&&(h.value=I),l&&(t("update:page-size",I),t("size-change",I))}}),v=X(()=>{let I=0;return ss(e.pageCount)?ss(e.total)||(I=Math.max(1,Math.ceil(e.total/p.value))):I=e.pageCount,I}),_=X({get(){return ss(e.currentPage)?f.value:e.currentPage},set(I){let O=I;I<1?O=1:I>v.value&&(O=v.value),ss(e.currentPage)&&(f.value=O),s&&(t("update:current-page",O),t("current-change",O))}});At(v,I=>{_.value>I&&(_.value=I)}),At([_,p],I=>{t("change",...I)},{flush:"post"});function b(I){_.value=I}function C(I){p.value=I;const O=v.value;_.value>O&&(_.value=O)}function T(){e.disabled||(_.value-=1,t("prev-click",_.value))}function E(){e.disabled||(_.value+=1,t("next-click",_.value))}function A(I,O){I&&(I.props||(I.props={}),I.props.class=[I.props.class,O].join(" "))}return pr(UZ,{pageCount:v,disabled:X(()=>e.disabled),currentPage:_,changeEvent:b,handleSizeChange:C}),()=>{var I,O;if(!c.value)return r("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&v.value<=1)return null;const B=[],N=[],H=Mn("div",{class:i.e("rightwrapper")},N),j={prev:Mn(XTe,{disabled:e.disabled,currentPage:_.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:T}),jumper:Mn(TMe,{size:o.value}),pager:Mn(DMe,{currentPage:_.value,pageCount:v.value,pagerCount:e.pagerCount,onChange:b,disabled:e.disabled}),next:Mn(tMe,{disabled:e.disabled,currentPage:_.value,pageCount:v.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:E}),sizes:Mn(wMe,{pageSize:p.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:o.value}),slot:(O=(I=n==null?void 0:n.default)==null?void 0:I.call(n))!=null?O:null,total:Mn(AMe,{total:ss(e.total)?0:e.total})},W=e.layout.split(",").map(Y=>Y.trim());let U=!1;return W.forEach(Y=>{if(Y==="->"){U=!0;return}U?N.push(j[Y]):B.push(j[Y])}),A(B[0],i.is("first")),A(B[B.length-1],i.is("last")),U&&N.length>0&&(A(N[0],i.is("first")),A(N[N.length-1],i.is("last")),B.push(H)),Mn("div",{class:[i.b(),i.is("background",e.background),i.m(o.value)]},B)}}});const BMe=Wn(zMe),FMe=Wt({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:lD,default:"primary"},cancelButtonType:{type:String,values:lD,default:"text"},icon:{type:si,default:()=>kve},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:eo.teleported,persistent:eo.persistent,width:{type:[String,Number],default:150}}),NMe={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},$Me=Be({name:"ElPopconfirm"}),VMe=Be({...$Me,props:FMe,emits:NMe,setup(e,{emit:t}){const n=e,{t:r}=Sr(),i=Rt("popconfirm"),a=le(),o=()=>{var p,v;(v=(p=a.value)==null?void 0:p.onClose)==null||v.call(p)},s=X(()=>({width:oa(n.width)})),l=p=>{t("confirm",p),o()},c=p=>{t("cancel",p),o()},h=X(()=>n.confirmButtonText||r("el.popconfirm.confirmButtonText")),f=X(()=>n.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(p,v)=>(te(),ft(w(Po),sr({ref_key:"tooltipRef",ref:a,trigger:"click",effect:"light"},p.$attrs,{"popper-class":`${w(i).namespace.value}-popover`,"popper-style":w(s),teleported:p.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":p.hideAfter,persistent:p.persistent}),{content:ge(()=>[V("div",{class:se(w(i).b())},[V("div",{class:se(w(i).e("main"))},[!p.hideIcon&&p.icon?(te(),ft(w(yn),{key:0,class:se(w(i).e("icon")),style:_n({color:p.iconColor})},{default:ge(()=>[(te(),ft(ir(p.icon)))]),_:1},8,["class","style"])):Ge("v-if",!0),$t(" "+Xe(p.title),1)],2),V("div",{class:se(w(i).e("action"))},[st(p.$slots,"actions",{confirm:l,cancel:c},()=>[de(w(io),{size:"small",type:p.cancelButtonType==="text"?"":p.cancelButtonType,text:p.cancelButtonType==="text",onClick:c},{default:ge(()=>[$t(Xe(w(f)),1)]),_:1},8,["type","text"]),de(w(io),{size:"small",type:p.confirmButtonType==="text"?"":p.confirmButtonType,text:p.confirmButtonType==="text",onClick:l},{default:ge(()=>[$t(Xe(w(h)),1)]),_:1},8,["type","text"])])],2)],2)]),default:ge(()=>[p.$slots.reference?st(p.$slots,"reference",{key:0}):Ge("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var HMe=Kt(VMe,[["__file","popconfirm.vue"]]);const jMe=Wn(HMe),UMe=Wt({trigger:uw.trigger,placement:PC.placement,disabled:uw.disabled,visible:eo.visible,transition:eo.transition,popperOptions:PC.popperOptions,tabindex:PC.tabindex,content:eo.content,popperStyle:eo.popperStyle,popperClass:eo.popperClass,enterable:{...eo.enterable,default:!0},effect:{...eo.effect,default:"light"},teleported:eo.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),WMe={"update:visible":e=>pa(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},GMe="onUpdate:visible",KMe=Be({name:"ElPopover"}),qMe=Be({...KMe,props:UMe,emits:WMe,setup(e,{expose:t,emit:n}){const r=e,i=X(()=>r[GMe]),a=Rt("popover"),o=le(),s=X(()=>{var C;return(C=w(o))==null?void 0:C.popperRef}),l=X(()=>[{width:oa(r.width)},r.popperStyle]),c=X(()=>[a.b(),r.popperClass,{[a.m("plain")]:!!r.content}]),h=X(()=>r.transition===`${a.namespace.value}-fade-in-linear`),f=()=>{var C;(C=o.value)==null||C.hide()},p=()=>{n("before-enter")},v=()=>{n("before-leave")},_=()=>{n("after-enter")},b=()=>{n("update:visible",!1),n("after-leave")};return t({popperRef:s,hide:f}),(C,T)=>(te(),ft(w(Po),sr({ref_key:"tooltipRef",ref:o},C.$attrs,{trigger:C.trigger,placement:C.placement,disabled:C.disabled,visible:C.visible,transition:C.transition,"popper-options":C.popperOptions,tabindex:C.tabindex,content:C.content,offset:C.offset,"show-after":C.showAfter,"hide-after":C.hideAfter,"auto-close":C.autoClose,"show-arrow":C.showArrow,"aria-label":C.title,effect:C.effect,enterable:C.enterable,"popper-class":w(c),"popper-style":w(l),teleported:C.teleported,persistent:C.persistent,"gpu-acceleration":w(h),"onUpdate:visible":w(i),onBeforeShow:p,onBeforeHide:v,onShow:_,onHide:b}),{content:ge(()=>[C.title?(te(),me("div",{key:0,class:se(w(a).e("title")),role:"title"},Xe(C.title),3)):Ge("v-if",!0),st(C.$slots,"default",{},()=>[$t(Xe(C.content),1)])]),default:ge(()=>[C.$slots.reference?st(C.$slots,"reference",{key:0}):Ge("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var ZMe=Kt(qMe,[["__file","popover.vue"]]);const J6=(e,t)=>{const n=t.arg||t.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=e)};var YMe={mounted(e,t){J6(e,t)},updated(e,t){J6(e,t)}};const XMe="popover",KZ=Xve(YMe,XMe),JMe=Wn(ZMe,{directive:KZ}),QMe=Wt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Qe(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Qe([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Qe(Function),default:e=>`${e}%`}}),eke=Be({name:"ElProgress"}),tke=Be({...eke,props:QMe,setup(e){const t=e,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Rt("progress"),i=X(()=>{const A={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},I=E(t.percentage);return I.includes("gradient")?A.background=I:A.backgroundColor=I,A}),a=X(()=>(t.strokeWidth/t.width*100).toFixed(1)),o=X(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),s=X(()=>{const A=o.value,I=t.type==="dashboard";return`
          M 50 50
          m 0 ${I?"":"-"}${A}
          a ${A} ${A} 0 1 1 0 ${I?"-":""}${A*2}
          a ${A} ${A} 0 1 1 0 ${I?"":"-"}${A*2}
          `}),l=X(()=>2*Math.PI*o.value),c=X(()=>t.type==="dashboard"?.75:1),h=X(()=>`${-1*l.value*(1-c.value)/2}px`),f=X(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:h.value})),p=X(()=>({strokeDasharray:`${l.value*c.value*(t.percentage/100)}px, ${l.value}px`,strokeDashoffset:h.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),v=X(()=>{let A;return t.color?A=E(t.percentage):A=n[t.status]||n.default,A}),_=X(()=>t.status==="warning"?QM:t.type==="line"?t.status==="success"?j3:Kf:t.status==="success"?ix:Yu),b=X(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),C=X(()=>t.format(t.percentage));function T(A){const I=100/A.length;return A.map((B,N)=>Ln(B)?{color:B,percentage:(N+1)*I}:B).sort((B,N)=>B.percentage-N.percentage)}const E=A=>{var I;const{color:O}=t;if(Dn(O))return O(A);if(Ln(O))return O;{const B=T(O);for(const N of B)if(N.percentage>A)return N.color;return(I=B[B.length-1])==null?void 0:I.color}};return(A,I)=>(te(),me("div",{class:se([w(r).b(),w(r).m(A.type),w(r).is(A.status),{[w(r).m("without-text")]:!A.showText,[w(r).m("text-inside")]:A.textInside}]),role:"progressbar","aria-valuenow":A.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[A.type==="line"?(te(),me("div",{key:0,class:se(w(r).b("bar"))},[V("div",{class:se(w(r).be("bar","outer")),style:_n({height:`${A.strokeWidth}px`})},[V("div",{class:se([w(r).be("bar","inner"),{[w(r).bem("bar","inner","indeterminate")]:A.indeterminate},{[w(r).bem("bar","inner","striped")]:A.striped},{[w(r).bem("bar","inner","striped-flow")]:A.stripedFlow}]),style:_n(w(i))},[(A.showText||A.$slots.default)&&A.textInside?(te(),me("div",{key:0,class:se(w(r).be("bar","innerText"))},[st(A.$slots,"default",{percentage:A.percentage},()=>[V("span",null,Xe(w(C)),1)])],2)):Ge("v-if",!0)],6)],6)],2)):(te(),me("div",{key:1,class:se(w(r).b("circle")),style:_n({height:`${A.width}px`,width:`${A.width}px`})},[(te(),me("svg",{viewBox:"0 0 100 100"},[V("path",{class:se(w(r).be("circle","track")),d:w(s),stroke:`var(${w(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":A.strokeLinecap,"stroke-width":w(a),fill:"none",style:_n(w(f))},null,14,["d","stroke","stroke-linecap","stroke-width"]),V("path",{class:se(w(r).be("circle","path")),d:w(s),stroke:w(v),fill:"none",opacity:A.percentage?1:0,"stroke-linecap":A.strokeLinecap,"stroke-width":w(a),style:_n(w(p))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(A.showText||A.$slots.default)&&!A.textInside?(te(),me("div",{key:2,class:se(w(r).e("text")),style:_n({fontSize:`${w(b)}px`})},[st(A.$slots,"default",{percentage:A.percentage},()=>[A.status?(te(),ft(w(yn),{key:1},{default:ge(()=>[(te(),ft(ir(w(_))))]),_:1})):(te(),me("span",{key:0},Xe(w(C)),1))])],6)):Ge("v-if",!0)],10,["aria-valuenow"]))}});var nke=Kt(tke,[["__file","progress.vue"]]);const qZ=Wn(nke),rke=Wt({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Qe([Array,Object]),default:()=>ji(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Qe([Array,Object]),default:()=>[t2,t2,t2]},voidIcon:{type:si,default:()=>Hve},disabledVoidIcon:{type:si,default:()=>t2},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Qe(Array),default:()=>ji(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:$a,clearable:Boolean,...yo(["ariaLabel"])}),ike={[ki]:e=>zn(e),[tr]:e=>zn(e)},ake=Be({name:"ElRate"}),oke=Be({...ake,props:rke,emits:ike,setup(e,{expose:t,emit:n}){const r=e;function i(q,ce){const re=be=>nr(be),ee=Object.keys(ce).map(be=>+be).filter(be=>{const we=ce[be];return(re(we)?we.excluded:!1)?q<be:q<=be}).sort((be,we)=>be-we),oe=ce[ee[0]];return re(oe)&&oe.value||oe}const a=un(wm,void 0),o=un(Qc,void 0),s=Ea(),l=Rt("rate"),{inputId:c,isLabeledByFormItem:h}=ac(r,{formItemContext:o}),f=le(r.modelValue),p=le(-1),v=le(!0),_=X(()=>[l.b(),l.m(s.value)]),b=X(()=>r.disabled||(a==null?void 0:a.disabled)),C=X(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":I.value})),T=X(()=>{let q="";return r.showScore?q=r.scoreTemplate.replace(/\{\s*value\s*\}/,b.value?`${r.modelValue}`:`${f.value}`):r.showText&&(q=r.texts[Math.ceil(f.value)-1]),q}),E=X(()=>r.modelValue*100-Math.floor(r.modelValue)*100),A=X(()=>sn(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),I=X(()=>{const q=i(f.value,A.value);return nr(q)?"":q}),O=X(()=>{let q="";return b.value?q=`${E.value}%`:r.allowHalf&&(q="50%"),{color:I.value,width:q}}),B=X(()=>{let q=sn(r.icons)?[...r.icons]:{...r.icons};return q=_r(q),sn(q)?{[r.lowThreshold]:q[0],[r.highThreshold]:{value:q[1],excluded:!0},[r.max]:q[2]}:q}),N=X(()=>i(r.modelValue,B.value)),H=X(()=>b.value?Ln(r.disabledVoidIcon)?r.disabledVoidIcon:_r(r.disabledVoidIcon):Ln(r.voidIcon)?r.voidIcon:_r(r.voidIcon)),j=X(()=>i(f.value,B.value));function W(q){const ce=b.value&&E.value>0&&q-1<r.modelValue&&q>r.modelValue,re=r.allowHalf&&v.value&&q-.5<=f.value&&q>f.value;return ce||re}function U(q){r.clearable&&q===r.modelValue&&(q=0),n(tr,q),r.modelValue!==q&&n("change",q)}function Y(q){b.value||(r.allowHalf&&v.value?U(f.value):U(q))}function ie(q){if(b.value)return;let ce=f.value;const re=q.code;return re===En.up||re===En.right?(r.allowHalf?ce+=.5:ce+=1,q.stopPropagation(),q.preventDefault()):(re===En.left||re===En.down)&&(r.allowHalf?ce-=.5:ce-=1,q.stopPropagation(),q.preventDefault()),ce=ce<0?0:ce,ce=ce>r.max?r.max:ce,n(tr,ce),n("change",ce),ce}function ue(q,ce){if(!b.value){if(r.allowHalf&&ce){let re=ce.target;Vs(re,l.e("item"))&&(re=re.querySelector(`.${l.e("icon")}`)),(re.clientWidth===0||Vs(re,l.e("decimal")))&&(re=re.parentNode),v.value=ce.offsetX*2<=re.clientWidth,f.value=v.value?q-.5:q}else f.value=q;p.value=q}}function J(){b.value||(r.allowHalf&&(v.value=r.modelValue!==Math.floor(r.modelValue)),f.value=r.modelValue,p.value=-1)}return At(()=>r.modelValue,q=>{f.value=q,v.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||n(tr,0),t({setCurrentValue:ue,resetCurrentValue:J}),(q,ce)=>{var re;return te(),me("div",{id:w(c),class:se([w(_),w(l).is("disabled",w(b))]),role:"slider","aria-label":w(h)?void 0:q.ariaLabel||"rating","aria-labelledby":w(h)?(re=w(o))==null?void 0:re.labelId:void 0,"aria-valuenow":f.value,"aria-valuetext":w(T)||void 0,"aria-valuemin":"0","aria-valuemax":q.max,tabindex:"0",style:_n(w(C)),onKeydown:ie},[(te(!0),me(hn,null,Kn(q.max,(ee,oe)=>(te(),me("span",{key:oe,class:se(w(l).e("item")),onMousemove:be=>ue(ee,be),onMouseleave:J,onClick:be=>Y(ee)},[de(w(yn),{class:se([w(l).e("icon"),{hover:p.value===ee},w(l).is("active",ee<=f.value)])},{default:ge(()=>[W(ee)?Ge("v-if",!0):(te(),me(hn,{key:0},[In((te(),ft(ir(w(j)),null,null,512)),[[Lr,ee<=f.value]]),In((te(),ft(ir(w(H)),null,null,512)),[[Lr,!(ee<=f.value)]])],64)),W(ee)?(te(),me(hn,{key:1},[(te(),ft(ir(w(H)),{class:se([w(l).em("decimal","box")])},null,8,["class"])),de(w(yn),{style:_n(w(O)),class:se([w(l).e("icon"),w(l).e("decimal")])},{default:ge(()=>[(te(),ft(ir(w(N))))]),_:1},8,["style","class"])],64)):Ge("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),q.showText||q.showScore?(te(),me("span",{key:0,class:se(w(l).e("text")),style:_n({color:q.textColor})},Xe(w(T)),7)):Ge("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var ske=Kt(oke,[["__file","rate.vue"]]);const lke=Wn(ske),ly={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},Q6={[ly.success]:eve,[ly.warning]:QM,[ly.error]:U3,[ly.info]:W3},uke=Wt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),cke=Be({name:"ElResult"}),dke=Be({...cke,props:uke,setup(e){const t=e,n=Rt("result"),r=X(()=>{const i=t.icon,a=i&&ly[i]?ly[i]:"icon-info",o=Q6[a]||Q6["icon-info"];return{class:a,component:o}});return(i,a)=>(te(),me("div",{class:se(w(n).b())},[V("div",{class:se(w(n).e("icon"))},[st(i.$slots,"icon",{},()=>[w(r).component?(te(),ft(ir(w(r).component),{key:0,class:se(w(r).class)},null,8,["class"])):Ge("v-if",!0)])],2),i.title||i.$slots.title?(te(),me("div",{key:0,class:se(w(n).e("title"))},[st(i.$slots,"title",{},()=>[V("p",null,Xe(i.title),1)])],2)):Ge("v-if",!0),i.subTitle||i.$slots["sub-title"]?(te(),me("div",{key:1,class:se(w(n).e("subtitle"))},[st(i.$slots,"sub-title",{},()=>[V("p",null,Xe(i.subTitle),1)])],2)):Ge("v-if",!0),i.$slots.extra?(te(),me("div",{key:2,class:se(w(n).e("extra"))},[st(i.$slots,"extra")],2)):Ge("v-if",!0)],2))}});var hke=Kt(dke,[["__file","result.vue"]]);const fke=Wn(hke);var e$=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function pke(e,t){return!!(e===t||e$(e)&&e$(t))}function vke(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!pke(e[n],t[n]))return!1;return!0}function mke(e,t){t===void 0&&(t=vke);var n=null;function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var o=e.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}const ZZ=()=>{const t=er().proxy.$props;return X(()=>{const n=(r,i,a)=>({});return t.perfMode?ZM(n):mke(n)})},ID=50,PT="itemRendered",IT="scroll",uy="forward",LT="backward",ql="auto",fk="smart",fw="start",Vc="center",pw="end",t0="horizontal",F5="vertical",gke="ltr",Ty="rtl",vw="negative",N5="positive-ascending",$5="positive-descending",yke={[t0]:"left",[F5]:"top"},_ke=20,bke={[t0]:"deltaX",[F5]:"deltaY"},wke=({atEndEdge:e,atStartEdge:t,layout:n},r)=>{let i,a=0;const o=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:o,onWheel:l=>{Qv(i);const c=l[bke[n.value]];o(a)&&o(a+c)||(a+=c,x3()||l.preventDefault(),i=Df(()=>{r(a),a=0}))}}},LD=rc({type:Qe([Number,Function]),required:!0}),DD=rc({type:Number}),RD=rc({type:Number,default:2}),xke=rc({type:String,values:["ltr","rtl"],default:"ltr"}),OD=rc({type:Number,default:0}),DT=rc({type:Number,required:!0}),YZ=rc({type:String,values:["horizontal","vertical"],default:F5}),XZ=Wt({className:{type:String,default:""},containerElement:{type:Qe([String,Object]),default:"div"},data:{type:Qe(Array),default:()=>ji([])},direction:xke,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Qe([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),JZ=Wt({cache:RD,estimatedItemSize:DD,layout:YZ,initScrollOffset:OD,total:DT,itemSize:LD,...XZ}),zD={type:Number,default:6},QZ={type:Number,default:0},eY={type:Number,default:2},Ov=Wt({columnCache:RD,columnWidth:LD,estimatedColumnWidth:DD,estimatedRowHeight:DD,initScrollLeft:OD,initScrollTop:OD,itemKey:{type:Qe(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:RD,rowHeight:LD,totalColumn:DT,totalRow:DT,hScrollbarSize:zD,vScrollbarSize:zD,scrollbarStartGap:QZ,scrollbarEndGap:eY,role:String,...XZ}),tY=Wt({alwaysOn:Boolean,class:String,layout:YZ,total:DT,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:zD,startGap:QZ,endGap:eY,visible:Boolean}),bv=(e,t)=>e<t?uy:LT,mw=e=>e===gke||e===Ty||e===t0,t$=e=>e===Ty;let Eg=null;function RT(e=!1){if(Eg===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Eg=$5:(t.scrollLeft=1,t.scrollLeft===0?Eg=vw:Eg=N5),document.body.removeChild(t),Eg}return Eg}function Ske({move:e,size:t,bar:n},r){const i={},a=`translate${n.axis}(${e}px)`;return i[n.size]=t,i.transform=a,i.msTransform=a,i.webkitTransform=a,r==="horizontal"?i.height="100%":i.width="100%",i}const BD=Be({name:"ElVirtualScrollBar",props:tY,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const n=X(()=>e.startGap+e.endGap),r=Rt("virtual-scrollbar"),i=Rt("scrollbar"),a=le(),o=le();let s=null,l=null;const c=Ar({isDragging:!1,traveled:0}),h=X(()=>nq[e.layout]),f=X(()=>e.clientSize-w(n)),p=X(()=>({position:"absolute",width:`${t0===e.layout?f.value:e.scrollbarSize}px`,height:`${t0===e.layout?e.scrollbarSize:f.value}px`,[yke[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),v=X(()=>{const B=e.ratio,N=e.clientSize;if(B>=100)return Number.POSITIVE_INFINITY;if(B>=50)return B*N/100;const H=N/3;return Math.floor(Math.min(Math.max(B*N,_ke),H))}),_=X(()=>{if(!Number.isFinite(v.value))return{display:"none"};const B=`${v.value}px`;return Ske({bar:h.value,size:B,move:c.traveled},e.layout)}),b=X(()=>Math.floor(e.clientSize-v.value-w(n))),C=()=>{window.addEventListener("mousemove",I),window.addEventListener("mouseup",A);const B=w(o);B&&(l=document.onselectstart,document.onselectstart=()=>!1,B.addEventListener("touchmove",I,{passive:!0}),B.addEventListener("touchend",A))},T=()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",A),document.onselectstart=l,l=null;const B=w(o);B&&(B.removeEventListener("touchmove",I),B.removeEventListener("touchend",A))},E=B=>{B.stopImmediatePropagation(),!(B.ctrlKey||[1,2].includes(B.button))&&(c.isDragging=!0,c[h.value.axis]=B.currentTarget[h.value.offset]-(B[h.value.client]-B.currentTarget.getBoundingClientRect()[h.value.direction]),t("start-move"),C())},A=()=>{c.isDragging=!1,c[h.value.axis]=0,t("stop-move"),T()},I=B=>{const{isDragging:N}=c;if(!N||!o.value||!a.value)return;const H=c[h.value.axis];if(!H)return;Qv(s);const j=(a.value.getBoundingClientRect()[h.value.direction]-B[h.value.client])*-1,W=o.value[h.value.offset]-H,U=j-W;s=Df(()=>{c.traveled=Math.max(e.startGap,Math.min(U,b.value)),t("scroll",U,b.value)})},O=B=>{const N=Math.abs(B.target.getBoundingClientRect()[h.value.direction]-B[h.value.client]),H=o.value[h.value.offset]/2,j=N-H;c.traveled=Math.max(0,Math.min(j,b.value)),t("scroll",j,b.value)};return At(()=>e.scrollFrom,B=>{c.isDragging||(c.traveled=Math.ceil(B*b.value))}),ui(()=>{T()}),()=>Mn("div",{role:"presentation",ref:a,class:[r.b(),e.class,(e.alwaysOn||c.isDragging)&&"always-on"],style:p.value,onMousedown:Fn(O,["stop","prevent"]),onTouchstartPrevent:E},Mn("div",{ref:o,class:i.e("thumb"),style:_.value,onMousedown:E},[]))}}),nY=({name:e,getOffset:t,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:i,getStartIndexForOffset:a,getStopIndexForStartIndex:o,initCache:s,clearCache:l,validateProps:c})=>Be({name:e??"ElVirtualList",props:JZ,emits:[PT,IT],setup(h,{emit:f,expose:p}){c(h);const v=er(),_=Rt("vl"),b=le(s(h,v)),C=ZZ(),T=le(),E=le(),A=le(),I=le({isScrolling:!1,scrollDir:"forward",scrollOffset:zn(h.initScrollOffset)?h.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:h.scrollbarAlwaysOn}),O=X(()=>{const{total:pe,cache:Ce}=h,{isScrolling:Ve,scrollDir:et,scrollOffset:Ee}=w(I);if(pe===0)return[0,0,0,0];const Je=a(h,Ee,w(b)),Ue=o(h,Je,Ee,w(b)),yt=!Ve||et===LT?Math.max(1,Ce):1,Ne=!Ve||et===uy?Math.max(1,Ce):1;return[Math.max(0,Je-yt),Math.max(0,Math.min(pe-1,Ue+Ne)),Je,Ue]}),B=X(()=>i(h,w(b))),N=X(()=>mw(h.layout)),H=X(()=>[{position:"relative",[`overflow-${N.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:h.direction,height:zn(h.height)?`${h.height}px`:h.height,width:zn(h.width)?`${h.width}px`:h.width},h.style]),j=X(()=>{const pe=w(B),Ce=w(N);return{height:Ce?"100%":`${pe}px`,pointerEvents:w(I).isScrolling?"none":void 0,width:Ce?`${pe}px`:"100%"}}),W=X(()=>N.value?h.width:h.height),{onWheel:U}=wke({atStartEdge:X(()=>I.value.scrollOffset<=0),atEndEdge:X(()=>I.value.scrollOffset>=B.value),layout:X(()=>h.layout)},pe=>{var Ce,Ve;(Ve=(Ce=A.value).onMouseUp)==null||Ve.call(Ce),ce(Math.min(I.value.scrollOffset+pe,B.value-W.value))});ti(T,"wheel",U,{passive:!1});const Y=()=>{const{total:pe}=h;if(pe>0){const[Ee,Je,Ue,yt]=w(O);f(PT,Ee,Je,Ue,yt)}const{scrollDir:Ce,scrollOffset:Ve,updateRequested:et}=w(I);f(IT,Ce,Ve,et)},ie=pe=>{const{clientHeight:Ce,scrollHeight:Ve,scrollTop:et}=pe.currentTarget,Ee=w(I);if(Ee.scrollOffset===et)return;const Je=Math.max(0,Math.min(et,Ve-Ce));I.value={...Ee,isScrolling:!0,scrollDir:bv(Ee.scrollOffset,Je),scrollOffset:Je,updateRequested:!1},bn(oe)},ue=pe=>{const{clientWidth:Ce,scrollLeft:Ve,scrollWidth:et}=pe.currentTarget,Ee=w(I);if(Ee.scrollOffset===Ve)return;const{direction:Je}=h;let Ue=Ve;if(Je===Ty)switch(RT()){case vw:{Ue=-Ve;break}case $5:{Ue=et-Ce-Ve;break}}Ue=Math.max(0,Math.min(Ue,et-Ce)),I.value={...Ee,isScrolling:!0,scrollDir:bv(Ee.scrollOffset,Ue),scrollOffset:Ue,updateRequested:!1},bn(oe)},J=pe=>{w(N)?ue(pe):ie(pe),Y()},q=(pe,Ce)=>{const Ve=(B.value-W.value)/Ce*pe;ce(Math.min(B.value-W.value,Ve))},ce=pe=>{pe=Math.max(pe,0),pe!==w(I).scrollOffset&&(I.value={...w(I),scrollOffset:pe,scrollDir:bv(w(I).scrollOffset,pe),updateRequested:!0},bn(oe))},re=(pe,Ce=ql)=>{const{scrollOffset:Ve}=w(I);pe=Math.max(0,Math.min(pe,h.total-1)),ce(t(h,pe,Ce,Ve,w(b)))},ee=pe=>{const{direction:Ce,itemSize:Ve,layout:et}=h,Ee=C.value(l&&Ve,l&&et,l&&Ce);let Je;if(Er(Ee,String(pe)))Je=Ee[pe];else{const Ue=r(h,pe,w(b)),yt=n(h,pe,w(b)),Ne=w(N),dt=Ce===Ty,Le=Ne?Ue:0;Ee[pe]=Je={position:"absolute",left:dt?void 0:`${Le}px`,right:dt?`${Le}px`:void 0,top:Ne?0:`${Ue}px`,height:Ne?"100%":`${yt}px`,width:Ne?`${yt}px`:"100%"}}return Je},oe=()=>{I.value.isScrolling=!1,bn(()=>{C.value(-1,null,null)})},be=()=>{const pe=T.value;pe&&(pe.scrollTop=0)};Un(()=>{if(!xr)return;const{initScrollOffset:pe}=h,Ce=w(T);zn(pe)&&Ce&&(w(N)?Ce.scrollLeft=pe:Ce.scrollTop=pe),Y()}),nh(()=>{const{direction:pe,layout:Ce}=h,{scrollOffset:Ve,updateRequested:et}=w(I),Ee=w(T);if(et&&Ee)if(Ce===t0)if(pe===Ty)switch(RT()){case vw:{Ee.scrollLeft=-Ve;break}case N5:{Ee.scrollLeft=Ve;break}default:{const{clientWidth:Je,scrollWidth:Ue}=Ee;Ee.scrollLeft=Ue-Je-Ve;break}}else Ee.scrollLeft=Ve;else Ee.scrollTop=Ve}),h3(()=>{w(T).scrollTop=w(I).scrollOffset});const we={ns:_,clientSize:W,estimatedTotalSize:B,windowStyle:H,windowRef:T,innerRef:E,innerStyle:j,itemsToRender:O,scrollbarRef:A,states:I,getItemStyle:ee,onScroll:J,onScrollbarScroll:q,onWheel:U,scrollTo:ce,scrollToItem:re,resetScrollTop:be};return p({windowRef:T,innerRef:E,getItemStyleCache:C,scrollTo:ce,scrollToItem:re,resetScrollTop:be,states:I}),we},render(h){var f;const{$slots:p,className:v,clientSize:_,containerElement:b,data:C,getItemStyle:T,innerElement:E,itemsToRender:A,innerStyle:I,layout:O,total:B,onScroll:N,onScrollbarScroll:H,states:j,useIsScrolling:W,windowStyle:U,ns:Y}=h,[ie,ue]=A,J=ir(b),q=ir(E),ce=[];if(B>0)for(let be=ie;be<=ue;be++)ce.push(Mn(hn,{key:be},(f=p.default)==null?void 0:f.call(p,{data:C,index:be,isScrolling:W?j.isScrolling:void 0,style:T(be)})));const re=[Mn(q,{style:I,ref:"innerRef"},Ln(q)?ce:{default:()=>ce})],ee=Mn(BD,{ref:"scrollbarRef",clientSize:_,layout:O,onScroll:H,ratio:_*100/this.estimatedTotalSize,scrollFrom:j.scrollOffset/(this.estimatedTotalSize-_),total:B}),oe=Mn(J,{class:[Y.e("window"),v],style:U,onScroll:N,ref:"windowRef",key:0},Ln(J)?[re]:{default:()=>[re]});return Mn("div",{key:0,class:[Y.e("wrapper"),j.scrollbarAlwaysOn?"always-on":""]},[oe,ee])}}),rY=nY({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:r,width:i},a,o,s)=>{const l=mw(r)?i:e,c=Math.max(0,t*n-l),h=Math.min(c,a*n),f=Math.max(0,(a+1)*n-l);switch(o===fk&&(s>=f-l&&s<=h+l?o=ql:o=Vc),o){case fw:return h;case pw:return f;case Vc:{const p=Math.round(f+(h-f)/2);return p<Math.ceil(l/2)?0:p>c+Math.floor(l/2)?c:p}case ql:default:return s>=f&&s<=h?s:s<f?f:h}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:r,width:i},a,o)=>{const s=a*n,l=mw(r)?i:e,c=Math.ceil((l+o-s)/n);return Math.max(0,Math.min(t-1,a+c-1))},initCache(){},clearCache:!0,validateProps(){}}),cy=(e,t,n)=>{const{itemSize:r}=e,{items:i,lastVisitedIndex:a}=n;if(t>a){let o=0;if(a>=0){const s=i[a];o=s.offset+s.size}for(let s=a+1;s<=t;s++){const l=r(s);i[s]={offset:o,size:l},o+=l}n.lastVisitedIndex=t}return i[t]},Cke=(e,t,n)=>{const{items:r,lastVisitedIndex:i}=t;return(i>0?r[i].offset:0)>=n?iY(e,t,0,i,n):Tke(e,t,Math.max(0,i),n)},iY=(e,t,n,r,i)=>{for(;n<=r;){const a=n+Math.floor((r-n)/2),o=cy(e,a,t).offset;if(o===i)return a;o<i?n=a+1:o>i&&(r=a-1)}return Math.max(0,n-1)},Tke=(e,t,n,r)=>{const{total:i}=e;let a=1;for(;n<i&&cy(e,n,t).offset<r;)n+=a,a*=2;return iY(e,t,Math.floor(n/2),Math.min(n,i-1),r)},n$=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:r})=>{let i=0;if(r>=e&&(r=e-1),r>=0){const s=t[r];i=s.offset+s.size}const o=(e-r-1)*n;return i+o},Mke=nY({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>cy(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:n$,getOffset:(e,t,n,r,i)=>{const{height:a,layout:o,width:s}=e,l=mw(o)?s:a,c=cy(e,t,i),h=n$(e,i),f=Math.max(0,Math.min(h-l,c.offset)),p=Math.max(0,c.offset-l+c.size);switch(n===fk&&(r>=p-l&&r<=f+l?n=ql:n=Vc),n){case fw:return f;case pw:return p;case Vc:return Math.round(p+(f-p)/2);case ql:default:return r>=p&&r<=f?r:r<p?p:f}},getStartIndexForOffset:(e,t,n)=>Cke(e,n,t),getStopIndexForStartIndex:(e,t,n,r)=>{const{height:i,total:a,layout:o,width:s}=e,l=mw(o)?s:i,c=cy(e,t,r),h=n+l;let f=c.offset+c.size,p=t;for(;p<a-1&&f<h;)p++,f+=cy(e,p,r).size;return p},initCache({estimatedItemSize:e=ID},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(r,i=!0)=>{var a,o;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,r-1),(a=t.exposed)==null||a.getItemStyleCache(-1),i&&((o=t.proxy)==null||o.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:e})=>{}}),kke=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:n,atYStartEdge:r},i)=>{let a=null,o=0,s=0;const l=(h,f)=>{const p=h<=0&&t.value||h>=0&&e.value,v=f<=0&&r.value||f>=0&&n.value;return p&&v};return{hasReachedEdge:l,onWheel:h=>{Qv(a);let f=h.deltaX,p=h.deltaY;Math.abs(f)>Math.abs(p)?p=0:f=0,h.shiftKey&&p!==0&&(f=p,p=0),!(l(o,s)&&l(o+f,s+p))&&(o+=f,s+=p,h.preventDefault(),a=Df(()=>{i(o,s),o=0,s=0}))}}},aY=({name:e,clearCache:t,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:i,getEstimatedTotalHeight:a,getEstimatedTotalWidth:o,getColumnOffset:s,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:h,getRowStopIndexForStartIndex:f,initCache:p,injectToInstance:v,validateProps:_})=>Be({name:e??"ElVirtualList",props:Ov,emits:[PT,IT],setup(b,{emit:C,expose:T,slots:E}){const A=Rt("vl");_(b);const I=er(),O=le(p(b,I));v==null||v(I,O);const B=le(),N=le(),H=le(),j=le(null),W=le({isScrolling:!1,scrollLeft:zn(b.initScrollLeft)?b.initScrollLeft:0,scrollTop:zn(b.initScrollTop)?b.initScrollTop:0,updateRequested:!1,xAxisScrollDir:uy,yAxisScrollDir:uy}),U=ZZ(),Y=X(()=>Number.parseInt(`${b.height}`,10)),ie=X(()=>Number.parseInt(`${b.width}`,10)),ue=X(()=>{const{totalColumn:lt,totalRow:Ct,columnCache:_t}=b,{isScrolling:It,xAxisScrollDir:Bt,scrollLeft:Ft}=w(W);if(lt===0||Ct===0)return[0,0,0,0];const cn=r(b,Ft,w(O)),Ot=i(b,cn,Ft,w(O)),kt=!It||Bt===LT?Math.max(1,_t):1,fn=!It||Bt===uy?Math.max(1,_t):1;return[Math.max(0,cn-kt),Math.max(0,Math.min(lt-1,Ot+fn)),cn,Ot]}),J=X(()=>{const{totalColumn:lt,totalRow:Ct,rowCache:_t}=b,{isScrolling:It,yAxisScrollDir:Bt,scrollTop:Ft}=w(W);if(lt===0||Ct===0)return[0,0,0,0];const cn=h(b,Ft,w(O)),Ot=f(b,cn,Ft,w(O)),kt=!It||Bt===LT?Math.max(1,_t):1,fn=!It||Bt===uy?Math.max(1,_t):1;return[Math.max(0,cn-kt),Math.max(0,Math.min(Ct-1,Ot+fn)),cn,Ot]}),q=X(()=>a(b,w(O))),ce=X(()=>o(b,w(O))),re=X(()=>{var lt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:b.direction,height:zn(b.height)?`${b.height}px`:b.height,width:zn(b.width)?`${b.width}px`:b.width},(lt=b.style)!=null?lt:{}]}),ee=X(()=>{const lt=`${w(ce)}px`;return{height:`${w(q)}px`,pointerEvents:w(W).isScrolling?"none":void 0,width:lt}}),oe=()=>{const{totalColumn:lt,totalRow:Ct}=b;if(lt>0&&Ct>0){const[Ot,kt,fn,Rn]=w(ue),[On,mt,Gt,gn]=w(J);C(PT,{columnCacheStart:Ot,columnCacheEnd:kt,rowCacheStart:On,rowCacheEnd:mt,columnVisibleStart:fn,columnVisibleEnd:Rn,rowVisibleStart:Gt,rowVisibleEnd:gn})}const{scrollLeft:_t,scrollTop:It,updateRequested:Bt,xAxisScrollDir:Ft,yAxisScrollDir:cn}=w(W);C(IT,{xAxisScrollDir:Ft,scrollLeft:_t,yAxisScrollDir:cn,scrollTop:It,updateRequested:Bt})},be=lt=>{const{clientHeight:Ct,clientWidth:_t,scrollHeight:It,scrollLeft:Bt,scrollTop:Ft,scrollWidth:cn}=lt.currentTarget,Ot=w(W);if(Ot.scrollTop===Ft&&Ot.scrollLeft===Bt)return;let kt=Bt;if(t$(b.direction))switch(RT()){case vw:kt=-Bt;break;case $5:kt=cn-_t-Bt;break}W.value={...Ot,isScrolling:!0,scrollLeft:kt,scrollTop:Math.max(0,Math.min(Ft,It-Ct)),updateRequested:!0,xAxisScrollDir:bv(Ot.scrollLeft,kt),yAxisScrollDir:bv(Ot.scrollTop,Ft)},bn(()=>Je()),Ue(),oe()},we=(lt,Ct)=>{const _t=w(Y),It=(q.value-_t)/Ct*lt;Ve({scrollTop:Math.min(q.value-_t,It)})},pe=(lt,Ct)=>{const _t=w(ie),It=(ce.value-_t)/Ct*lt;Ve({scrollLeft:Math.min(ce.value-_t,It)})},{onWheel:Ce}=kke({atXStartEdge:X(()=>W.value.scrollLeft<=0),atXEndEdge:X(()=>W.value.scrollLeft>=ce.value-w(ie)),atYStartEdge:X(()=>W.value.scrollTop<=0),atYEndEdge:X(()=>W.value.scrollTop>=q.value-w(Y))},(lt,Ct)=>{var _t,It,Bt,Ft;(It=(_t=N.value)==null?void 0:_t.onMouseUp)==null||It.call(_t),(Ft=(Bt=H.value)==null?void 0:Bt.onMouseUp)==null||Ft.call(Bt);const cn=w(ie),Ot=w(Y);Ve({scrollLeft:Math.min(W.value.scrollLeft+lt,ce.value-cn),scrollTop:Math.min(W.value.scrollTop+Ct,q.value-Ot)})});ti(B,"wheel",Ce,{passive:!1});const Ve=({scrollLeft:lt=W.value.scrollLeft,scrollTop:Ct=W.value.scrollTop})=>{lt=Math.max(lt,0),Ct=Math.max(Ct,0);const _t=w(W);Ct===_t.scrollTop&&lt===_t.scrollLeft||(W.value={..._t,xAxisScrollDir:bv(_t.scrollLeft,lt),yAxisScrollDir:bv(_t.scrollTop,Ct),scrollLeft:lt,scrollTop:Ct,updateRequested:!0},bn(()=>Je()),Ue(),oe())},et=(lt=0,Ct=0,_t=ql)=>{const It=w(W);Ct=Math.max(0,Math.min(Ct,b.totalColumn-1)),lt=Math.max(0,Math.min(lt,b.totalRow-1));const Bt=lK(A.namespace.value),Ft=w(O),cn=a(b,Ft),Ot=o(b,Ft);Ve({scrollLeft:s(b,Ct,_t,It.scrollLeft,Ft,Ot>b.width?Bt:0),scrollTop:l(b,lt,_t,It.scrollTop,Ft,cn>b.height?Bt:0)})},Ee=(lt,Ct)=>{const{columnWidth:_t,direction:It,rowHeight:Bt}=b,Ft=U.value(t&&_t,t&&Bt,t&&It),cn=`${lt},${Ct}`;if(Er(Ft,cn))return Ft[cn];{const[,Ot]=n(b,Ct,w(O)),kt=w(O),fn=t$(It),[Rn,On]=c(b,lt,kt),[mt]=n(b,Ct,kt);return Ft[cn]={position:"absolute",left:fn?void 0:`${Ot}px`,right:fn?`${Ot}px`:void 0,top:`${On}px`,height:`${Rn}px`,width:`${mt}px`},Ft[cn]}},Je=()=>{W.value.isScrolling=!1,bn(()=>{U.value(-1,null,null)})};Un(()=>{if(!xr)return;const{initScrollLeft:lt,initScrollTop:Ct}=b,_t=w(B);_t&&(zn(lt)&&(_t.scrollLeft=lt),zn(Ct)&&(_t.scrollTop=Ct)),oe()});const Ue=()=>{const{direction:lt}=b,{scrollLeft:Ct,scrollTop:_t,updateRequested:It}=w(W),Bt=w(B);if(It&&Bt){if(lt===Ty)switch(RT()){case vw:{Bt.scrollLeft=-Ct;break}case N5:{Bt.scrollLeft=Ct;break}default:{const{clientWidth:Ft,scrollWidth:cn}=Bt;Bt.scrollLeft=cn-Ft-Ct;break}}else Bt.scrollLeft=Math.max(0,Ct);Bt.scrollTop=Math.max(0,_t)}},{resetAfterColumnIndex:yt,resetAfterRowIndex:Ne,resetAfter:dt}=I.proxy;T({windowRef:B,innerRef:j,getItemStyleCache:U,scrollTo:Ve,scrollToItem:et,states:W,resetAfterColumnIndex:yt,resetAfterRowIndex:Ne,resetAfter:dt});const Le=()=>{const{scrollbarAlwaysOn:lt,scrollbarStartGap:Ct,scrollbarEndGap:_t,totalColumn:It,totalRow:Bt}=b,Ft=w(ie),cn=w(Y),Ot=w(ce),kt=w(q),{scrollLeft:fn,scrollTop:Rn}=w(W),On=Mn(BD,{ref:N,alwaysOn:lt,startGap:Ct,endGap:_t,class:A.e("horizontal"),clientSize:Ft,layout:"horizontal",onScroll:pe,ratio:Ft*100/Ot,scrollFrom:fn/(Ot-Ft),total:Bt,visible:!0}),mt=Mn(BD,{ref:H,alwaysOn:lt,startGap:Ct,endGap:_t,class:A.e("vertical"),clientSize:cn,layout:"vertical",onScroll:we,ratio:cn*100/kt,scrollFrom:Rn/(kt-cn),total:It,visible:!0});return{horizontalScrollbar:On,verticalScrollbar:mt}},ze=()=>{var lt;const[Ct,_t]=w(ue),[It,Bt]=w(J),{data:Ft,totalColumn:cn,totalRow:Ot,useIsScrolling:kt,itemKey:fn}=b,Rn=[];if(Ot>0&&cn>0)for(let On=It;On<=Bt;On++)for(let mt=Ct;mt<=_t;mt++){const Gt=fn({columnIndex:mt,data:Ft,rowIndex:On});Rn.push(Mn(hn,{key:Gt},(lt=E.default)==null?void 0:lt.call(E,{columnIndex:mt,data:Ft,isScrolling:kt?w(W).isScrolling:void 0,style:Ee(On,mt),rowIndex:On})))}return Rn},ct=()=>{const lt=ir(b.innerElement),Ct=ze();return[Mn(lt,{style:w(ee),ref:j},Ln(lt)?Ct:{default:()=>Ct})]};return()=>{const lt=ir(b.containerElement),{horizontalScrollbar:Ct,verticalScrollbar:_t}=Le(),It=ct();return Mn("div",{key:0,class:A.e("wrapper"),role:b.role},[Mn(lt,{class:b.className,style:w(re),onScroll:be,ref:B},Ln(lt)?It:{default:()=>It}),Ct,_t])}}}),Eke=aY({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:n},r,i,a,o,s)=>{n=Number(n);const l=Math.max(0,e*t-n),c=Math.min(l,r*t),h=Math.max(0,r*t-n+s+t);switch(i==="smart"&&(a>=h-n&&a<=c+n?i=ql:i=Vc),i){case fw:return c;case pw:return h;case Vc:{const f=Math.round(h+(c-h)/2);return f<Math.ceil(n/2)?0:f>l+Math.floor(n/2)?l:f}case ql:default:return a>=h&&a<=c?a:h>c||a<h?h:c}},getRowOffset:({rowHeight:e,height:t,totalRow:n},r,i,a,o,s)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,r*e),h=Math.max(0,r*e-t+s+e);switch(i===fk&&(a>=h-t&&a<=c+t?i=ql:i=Vc),i){case fw:return c;case pw:return h;case Vc:{const f=Math.round(h+(c-h)/2);return f<Math.ceil(t/2)?0:f>l+Math.floor(t/2)?l:f}case ql:default:return a>=h&&a<=c?a:h>c||a<h?h:c}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:n},r,i)=>{const a=r*e,o=Math.ceil((n+i-a)/e);return Math.max(0,Math.min(t-1,r+o-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:n},r,i)=>{const a=r*e,o=Math.ceil((n+i-a)/e);return Math.max(0,Math.min(t-1,r+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),{max:OT,min:oY,floor:sY}=Math,Ake={column:"columnWidth",row:"rowHeight"},FD={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Bd=(e,t,n,r)=>{const[i,a,o]=[n[r],e[Ake[r]],n[FD[r]]];if(t>o){let s=0;if(o>=0){const l=i[o];s=l.offset+l.size}for(let l=o+1;l<=t;l++){const c=a(l);i[l]={offset:s,size:c},s+=c}n[FD[r]]=t}return i[t]},lY=(e,t,n,r,i,a)=>{for(;n<=r;){const o=n+sY((r-n)/2),s=Bd(e,o,t,a).offset;if(s===i)return o;s<i?n=o+1:r=o-1}return OT(0,n-1)},Pke=(e,t,n,r,i)=>{const a=i==="column"?e.totalColumn:e.totalRow;let o=1;for(;n<a&&Bd(e,n,t,i).offset<r;)n+=o,o*=2;return lY(e,t,sY(n/2),oY(n,a-1),r,i)},r$=(e,t,n,r)=>{const[i,a]=[t[r],t[FD[r]]];return(a>0?i[a].offset:0)>=n?lY(e,t,0,a,n,r):Pke(e,t,OT(0,a),n,r)},uY=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:n,row:r})=>{let i=0;if(n>=e&&(n=e-1),n>=0){const s=r[n];i=s.offset+s.size}const o=(e-n-1)*t;return i+o},cY=({totalColumn:e},{column:t,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let i=0;if(r>e&&(r=e-1),r>=0){const s=t[r];i=s.offset+s.size}const o=(e-r-1)*n;return i+o},Ike={column:cY,row:uY},i$=(e,t,n,r,i,a,o)=>{const[s,l]=[a==="row"?e.height:e.width,Ike[a]],c=Bd(e,t,i,a),h=l(e,i),f=OT(0,oY(h-s,c.offset)),p=OT(0,c.offset-s+o+c.size);switch(n===fk&&(r>=p-s&&r<=f+s?n=ql:n=Vc),n){case fw:return f;case pw:return p;case Vc:return Math.round(p+(f-p)/2);case ql:default:return r>=p&&r<=f?r:p>f||r<p?p:f}},Lke=aY({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,n)=>{const r=Bd(e,t,n,"column");return[r.size,r.offset]},getRowPosition:(e,t,n)=>{const r=Bd(e,t,n,"row");return[r.size,r.offset]},getColumnOffset:(e,t,n,r,i,a)=>i$(e,t,n,r,i,"column",a),getRowOffset:(e,t,n,r,i,a)=>i$(e,t,n,r,i,"row",a),getColumnStartIndexForOffset:(e,t,n)=>r$(e,n,t,"column"),getColumnStopIndexForStartIndex:(e,t,n,r)=>{const i=Bd(e,t,r,"column"),a=n+e.width;let o=i.offset+i.size,s=t;for(;s<e.totalColumn-1&&o<a;)s++,o+=Bd(e,t,r,"column").size;return s},getEstimatedTotalHeight:uY,getEstimatedTotalWidth:cY,getRowStartIndexForOffset:(e,t,n)=>r$(e,n,t,"row"),getRowStopIndexForStartIndex:(e,t,n,r)=>{const{totalRow:i,height:a}=e,o=Bd(e,t,r,"row"),s=n+a;let l=o.size+o.offset,c=t;for(;c<i-1&&l<s;)c++,l+=Bd(e,c,r,"row").size;return c},injectToInstance:(e,t)=>{const n=({columnIndex:a,rowIndex:o},s)=>{var l,c;s=aa(s)?!0:s,zn(a)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,a-1)),zn(o)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,o-1)),(l=e.exposed)==null||l.getItemStyleCache.value(-1,null,null),s&&((c=e.proxy)==null||c.$forceUpdate())},r=(a,o)=>{n({columnIndex:a},o)},i=(a,o)=>{n({rowIndex:a},o)};Object.assign(e.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:i,resetAfter:n})},initCache:({estimatedColumnWidth:e=ID,estimatedRowHeight:t=ID})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Dke=Be({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Rt("select")}}});function Rke(e,t,n,r,i,a){return te(),me("div",{class:se(e.ns.be("group","title")),style:_n([e.style,{lineHeight:`${e.height}px`}])},Xe(e.item.label),7)}var Oke=Kt(Dke,[["render",Rke],["__file","group-item.vue"]]);function zke(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const dY={label:"label",value:"value",disabled:"disabled",options:"options"};function pk(e){const t=X(()=>({...dY,...e.props}));return{aliasProps:t,getLabel:o=>ha(o,t.value.label),getValue:o=>ha(o,t.value.value),getDisabled:o=>ha(o,t.value.disabled),getOptions:o=>ha(o,t.value.options)}}const Bke=Wt({allowCreate:Boolean,autocomplete:{type:Qe(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:si,default:Kf},effect:{type:Qe(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Qe([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Qe(Array),required:!0},placeholder:{type:String},teleported:eo.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Qe(Object),default:()=>({})},remote:Boolean,size:$a,props:{type:Qe(Object),default:()=>dY},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},placement:{type:Qe(String),values:qf,default:"bottom-start"},fallbackPlacements:{type:Qe(Array),default:["bottom-start","top-start","right","left"]},tagType:{...nm.type,default:"info"},tagEffect:{...nm.effect,default:"light"},...A0,...yo(["ariaLabel"])}),Fke=Wt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Qe(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),V5=Symbol("ElSelectV2Injection"),Nke=Be({props:Fke,emits:["select","hover"],setup(e,{emit:t}){const n=un(V5),r=Rt("select"),{hoverItem:i,selectOptionClick:a}=zke(e,{emit:t}),{getLabel:o}=pk(n.props);return{ns:r,hoverItem:i,selectOptionClick:a,getLabel:o}}});function $ke(e,t,n,r,i,a){return te(),me("li",{"aria-selected":e.selected,style:_n(e.style),class:se([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMouseenter:e.hoverItem,onClick:Fn(e.selectOptionClick,["stop"])},[st(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[V("span",null,Xe(e.getLabel(e.item)),1)])],46,["aria-selected","onMouseenter","onClick"])}var Vke=Kt(Nke,[["render",$ke],["__file","option-item.vue"]]),Hke=Be({name:"ElSelectDropdown",props:{loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:t,expose:n}){const r=un(V5),i=Rt("select"),{getLabel:a,getValue:o,getDisabled:s}=pk(r.props),l=le([]),c=le(),h=X(()=>e.data.length);At(()=>h.value,()=>{var U,Y;(Y=(U=r.tooltipRef.value).updatePopper)==null||Y.call(U)});const f=X(()=>aa(r.props.estimatedOptionHeight)),p=X(()=>f.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:U=>l.value[U]}),v=(U=[],Y)=>{const{props:{valueKey:ie}}=r;return nr(Y)?U&&U.some(ue=>ei(ha(ue,ie))===ha(Y,ie)):U.includes(Y)},_=(U,Y)=>{if(nr(Y)){const{valueKey:ie}=r.props;return ha(U,ie)===ha(Y,ie)}else return U===Y},b=(U,Y)=>r.props.multiple?v(U,o(Y)):_(U,o(Y)),C=(U,Y)=>{const{disabled:ie,multiple:ue,multipleLimit:J}=r.props;return ie||!Y&&(ue?J>0&&U.length>=J:!1)},T=U=>e.hoveringIndex===U;n({listRef:c,isSized:f,isItemDisabled:C,isItemHovering:T,isItemSelected:b,scrollToItem:U=>{const Y=c.value;Y&&Y.scrollToItem(U)},resetScrollTop:()=>{const U=c.value;U&&U.resetScrollTop()}});const I=U=>{const{index:Y,data:ie,style:ue}=U,J=w(f),{itemSize:q,estimatedSize:ce}=w(p),{modelValue:re}=r.props,{onSelect:ee,onHover:oe}=r,be=ie[Y];if(be.type==="Group")return de(Oke,{item:be,style:ue,height:J?q:ce},null);const we=b(re,be),pe=C(re,we),Ce=T(Y);return de(Vke,sr(U,{selected:we,disabled:s(be)||pe,created:!!be.created,hovering:Ce,item:be,onSelect:ee,onHover:oe}),{default:Ve=>{var et;return((et=t.default)==null?void 0:et.call(t,Ve))||de("span",null,[a(be)])}})},{onKeyboardNavigate:O,onKeyboardSelect:B}=r,N=()=>{O("forward")},H=()=>{O("backward")},j=()=>{r.expanded=!1},W=U=>{const{code:Y}=U,{tab:ie,esc:ue,down:J,up:q,enter:ce}=En;switch(Y!==ie&&(U.preventDefault(),U.stopPropagation()),Y){case ie:case ue:{j();break}case J:{N();break}case q:{H();break}case ce:{B();break}}};return()=>{var U,Y,ie,ue;const{data:J,width:q}=e,{height:ce,multiple:re,scrollbarAlwaysOn:ee}=r.props,oe=w(f)?rY:Mke;return de("div",{class:[i.b("dropdown"),i.is("multiple",re)],style:{width:`${q}px`}},[(U=t.header)==null?void 0:U.call(t),((Y=t.loading)==null?void 0:Y.call(t))||((ie=t.empty)==null?void 0:ie.call(t))||de(oe,sr({ref:c},w(p),{className:i.be("dropdown","list"),scrollbarAlwaysOn:ee,data:J,height:ce,width:q,total:J.length,onKeydown:W}),{default:be=>de(I,be,null)}),(ue=t.footer)==null?void 0:ue.call(t)])}}});function jke(e,t){const{aliasProps:n,getLabel:r,getValue:i}=pk(e),a=le(0),o=le(null),s=X(()=>e.allowCreate&&e.filterable);function l(v){const _=b=>r(b)===v;return e.options&&e.options.some(_)||t.createdOptions.some(_)}function c(v){s.value&&(e.multiple&&v.created?a.value++:o.value=v)}function h(v){if(s.value)if(v&&v.length>0){if(l(v))return;const _={[n.value.value]:v,[n.value.label]:v,created:!0,[n.value.disabled]:!1};t.createdOptions.length>=a.value?t.createdOptions[a.value]=_:t.createdOptions.push(_)}else if(e.multiple)t.createdOptions.length=a.value;else{const _=o.value;t.createdOptions.length=0,_&&_.created&&t.createdOptions.push(_)}}function f(v){if(!s.value||!v||!v.created||v.created&&e.reserveKeyword&&t.inputValue===r(v))return;const _=t.createdOptions.findIndex(b=>i(b)===i(v));~_&&(t.createdOptions.splice(_,1),a.value--)}function p(){s.value&&(t.createdOptions.length=0,a.value=0)}return{createNewOption:h,removeNewOption:f,selectNewOption:c,clearAllNewOption:p}}const Uke=11,Wke=(e,t)=>{const{t:n}=Sr(),r=Rt("select"),i=Rt("input"),{form:a,formItem:o}=es(),{inputId:s}=ac(e,{formItemContext:o}),{aliasProps:l,getLabel:c,getValue:h,getDisabled:f,getOptions:p}=pk(e),{valueOnClear:v,isEmptyValue:_}=ak(e),b=Ar({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),C=le(-1),T=le(null),E=le(null),A=le(null),I=le(null),O=le(null),B=le(null),N=le(null),H=le(null),j=le(null),W=le(null),U=le(null),{isComposing:Y,handleCompositionStart:ie,handleCompositionEnd:ue,handleCompositionUpdate:J}=ik({afterComposition:rt=>Tr(rt)}),{wrapperRef:q,isFocused:ce}=cx(O,{afterFocus(){e.automaticDropdown&&!oe.value&&(oe.value=!0,b.menuVisibleOnFocus=!0)},beforeBlur(rt){var Ht,Pt;return((Ht=A.value)==null?void 0:Ht.isFocusInsideContent(rt))||((Pt=I.value)==null?void 0:Pt.isFocusInsideContent(rt))},afterBlur(){oe.value=!1,b.menuVisibleOnFocus=!1}}),re=le([]),ee=le([]),oe=le(!1),be=X(()=>e.disabled||(a==null?void 0:a.disabled)),we=X(()=>{const rt=ee.value.length*e.itemHeight;return rt>e.height?e.height:rt}),pe=X(()=>e.multiple?sn(e.modelValue)&&e.modelValue.length>0:!_(e.modelValue)),Ce=X(()=>e.clearable&&!be.value&&b.inputHovering&&pe.value),Ve=X(()=>e.remote&&e.filterable?"":ah),et=X(()=>Ve.value&&r.is("reverse",oe.value)),Ee=X(()=>(o==null?void 0:o.validateState)||""),Je=X(()=>q3[Ee.value]),Ue=X(()=>e.remote?300:0),yt=X(()=>e.loading?e.loadingText||n("el.select.loading"):e.remote&&!b.inputValue&&re.value.length===0?!1:e.filterable&&b.inputValue&&re.value.length>0&&ee.value.length===0?e.noMatchText||n("el.select.noMatch"):re.value.length===0?e.noDataText||n("el.select.noData"):null),Ne=rt=>{const Ht=Pt=>{if(e.filterable&&Dn(e.filterMethod)||e.filterable&&e.remote&&Dn(e.remoteMethod))return!0;const dn=new RegExp(N3(rt),"i");return rt?dn.test(c(Pt)||""):!0};return e.loading?[]:[...b.createdOptions,...e.options].reduce((Pt,dn)=>{const Hn=p(dn);if(sn(Hn)){const dr=Hn.filter(Ht);dr.length>0&&Pt.push({label:c(dn),type:"Group"},...dr)}else(e.remote||Ht(dn))&&Pt.push(dn);return Pt},[])},dt=()=>{re.value=Ne(""),ee.value=Ne(b.inputValue)},Le=X(()=>{const rt=new Map;return re.value.forEach((Ht,Pt)=>{rt.set(Mt(h(Ht)),{option:Ht,index:Pt})}),rt}),ze=X(()=>{const rt=new Map;return ee.value.forEach((Ht,Pt)=>{rt.set(Mt(h(Ht)),{option:Ht,index:Pt})}),rt}),ct=X(()=>ee.value.every(rt=>f(rt))),Lt=Ea(),lt=X(()=>Lt.value==="small"?"small":"default"),Ct=()=>{var rt;C.value=((rt=T.value)==null?void 0:rt.offsetWidth)||200},_t=()=>{if(!E.value)return 0;const rt=window.getComputedStyle(E.value);return Number.parseFloat(rt.gap||"6px")},It=X(()=>{const rt=_t();return{maxWidth:`${U.value&&e.maxCollapseTags===1?b.selectionWidth-b.collapseItemWidth-rt:b.selectionWidth}px`}}),Bt=X(()=>({maxWidth:`${b.selectionWidth}px`})),Ft=X(()=>({width:`${Math.max(b.calculatorWidth,Uke)}px`})),cn=X(()=>sn(e.modelValue)?e.modelValue.length===0&&!b.inputValue:e.filterable?!b.inputValue:!0),Ot=X(()=>{var rt;const Ht=(rt=e.placeholder)!=null?rt:n("el.select.placeholder");return e.multiple||!pe.value?Ht:b.selectedLabel}),kt=X(()=>{var rt,Ht;return(Ht=(rt=A.value)==null?void 0:rt.popperRef)==null?void 0:Ht.contentRef}),fn=X(()=>{if(e.multiple){const rt=e.modelValue.length;if(e.modelValue.length>0&&ze.value.has(e.modelValue[rt-1])){const{index:Ht}=ze.value.get(e.modelValue[rt-1]);return Ht}}else if(e.modelValue&&ze.value.has(e.modelValue)){const{index:rt}=ze.value.get(e.modelValue);return rt}return-1}),Rn=X({get(){return oe.value&&yt.value!==!1},set(rt){oe.value=rt}}),On=X(()=>e.multiple?e.collapseTags?b.cachedOptions.slice(0,e.maxCollapseTags):b.cachedOptions:[]),mt=X(()=>e.multiple?e.collapseTags?b.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Gt,removeNewOption:gn,selectNewOption:xt,clearAllNewOption:Zt}=jke(e,b),Ze=()=>{be.value||(b.menuVisibleOnFocus?b.menuVisibleOnFocus=!1:oe.value=!oe.value)},Fe=()=>{b.inputValue.length>0&&!oe.value&&(oe.value=!0),Gt(b.inputValue),ke(b.inputValue)},ve=Ks(Fe,Ue.value),ke=rt=>{b.previousQuery===rt||Y.value||(b.previousQuery=rt,e.filterable&&Dn(e.filterMethod)?e.filterMethod(rt):e.filterable&&e.remote&&Dn(e.remoteMethod)&&e.remoteMethod(rt),e.defaultFirstOption&&(e.filterable||e.remote)&&ee.value.length?bn(Oe):bn(gr))},Oe=()=>{const rt=ee.value.filter(dn=>!dn.disabled&&dn.type!=="Group"),Ht=rt.find(dn=>dn.created),Pt=rt[0];b.hoveringIndex=pt(ee.value,Ht||Pt)},Me=rt=>{Yo(e.modelValue,rt)||t(ki,rt)},Ae=rt=>{t(tr,rt),Me(rt),b.previousValue=e.multiple?String(rt):rt},pt=(rt=[],Ht)=>{if(!nr(Ht))return rt.indexOf(Ht);const Pt=e.valueKey;let dn=-1;return rt.some((Hn,dr)=>ha(Hn,Pt)===ha(Ht,Pt)?(dn=dr,!0):!1),dn},Mt=rt=>nr(rt)?ha(rt,e.valueKey):rt,it=()=>{Ct()},Et=()=>{b.selectionWidth=E.value.getBoundingClientRect().width},Vt=()=>{b.calculatorWidth=B.value.getBoundingClientRect().width},Dt=()=>{b.collapseItemWidth=U.value.getBoundingClientRect().width},ln=()=>{var rt,Ht;(Ht=(rt=A.value)==null?void 0:rt.updatePopper)==null||Ht.call(rt)},kn=()=>{var rt,Ht;(Ht=(rt=I.value)==null?void 0:rt.updatePopper)==null||Ht.call(rt)},Tn=rt=>{if(e.multiple){let Ht=e.modelValue.slice();const Pt=pt(Ht,h(rt));Pt>-1?(Ht=[...Ht.slice(0,Pt),...Ht.slice(Pt+1)],b.cachedOptions.splice(Pt,1),gn(rt)):(e.multipleLimit<=0||Ht.length<e.multipleLimit)&&(Ht=[...Ht,h(rt)],b.cachedOptions.push(rt),xt(rt)),Ae(Ht),rt.created&&ke(""),e.filterable&&!e.reserveKeyword&&(b.inputValue="")}else b.selectedLabel=c(rt),Ae(h(rt)),oe.value=!1,xt(rt),rt.created||Zt();mr()},Xn=(rt,Ht)=>{let Pt=e.modelValue.slice();const dn=pt(Pt,h(Ht));dn>-1&&!be.value&&(Pt=[...e.modelValue.slice(0,dn),...e.modelValue.slice(dn+1)],b.cachedOptions.splice(dn,1),Ae(Pt),t("remove-tag",h(Ht)),gn(Ht)),rt.stopPropagation(),mr()},mr=()=>{var rt;(rt=O.value)==null||rt.focus()},Yt=()=>{var rt;(rt=O.value)==null||rt.blur()},rr=()=>{b.inputValue.length>0?b.inputValue="":oe.value=!1},zr=rt=>iK(rt,Ht=>!b.cachedOptions.some(Pt=>h(Pt)===Ht&&f(Pt))),Ur=rt=>{if(e.multiple&&rt.code!==En.delete&&b.inputValue.length===0){rt.preventDefault();const Ht=e.modelValue.slice(),Pt=zr(Ht);if(Pt<0)return;const dn=Ht[Pt];Ht.splice(Pt,1);const Hn=b.cachedOptions[Pt];b.cachedOptions.splice(Pt,1),gn(Hn),Ae(Ht),t("remove-tag",dn)}},Br=()=>{let rt;sn(e.modelValue)?rt=[]:rt=v.value,e.multiple?b.cachedOptions=[]:b.selectedLabel="",oe.value=!1,Ae(rt),t("clear"),Zt(),mr()},Qt=(rt,Ht=void 0)=>{const Pt=ee.value;if(!["forward","backward"].includes(rt)||be.value||Pt.length<=0||ct.value||Y.value)return;if(!oe.value)return Ze();Ht===void 0&&(Ht=b.hoveringIndex);let dn=-1;rt==="forward"?(dn=Ht+1,dn>=Pt.length&&(dn=0)):rt==="backward"&&(dn=Ht-1,(dn<0||dn>=Pt.length)&&(dn=Pt.length-1));const Hn=Pt[dn];if(f(Hn)||Hn.type==="Group")return Qt(rt,dn);b.hoveringIndex=dn,$e(dn)},St=()=>{if(oe.value)~b.hoveringIndex&&ee.value[b.hoveringIndex]&&Tn(ee.value[b.hoveringIndex]);else return Ze()},en=rt=>{b.hoveringIndex=rt},gr=()=>{e.multiple?b.hoveringIndex=ee.value.findIndex(rt=>e.modelValue.some(Ht=>Mt(Ht)===Mt(rt))):b.hoveringIndex=ee.value.findIndex(rt=>Mt(rt)===Mt(e.modelValue))},Tr=rt=>{if(b.inputValue=rt.target.value,e.remote)ve();else return Fe()},qr=rt=>{if(oe.value=!1,ce.value){const Ht=new FocusEvent("focus",rt);handleBlur(Ht)}},ar=()=>(b.isBeforeHide=!1,bn(()=>{~fn.value&&$e(b.hoveringIndex)})),$e=rt=>{j.value.scrollToItem(rt)},je=rt=>{const Ht=Mt(rt);if(Le.value.has(Ht)){const{option:Pt}=Le.value.get(Ht);return Pt}return{[l.value.value]:rt,[l.value.label]:rt}},zt=()=>{if(e.multiple)if(e.modelValue.length>0){b.cachedOptions.length=0,b.previousValue=e.modelValue.toString();for(const rt of e.modelValue){const Ht=je(rt);b.cachedOptions.push(Ht)}}else b.cachedOptions=[],b.previousValue=void 0;else if(pe.value){b.previousValue=e.modelValue;const rt=ee.value,Ht=rt.findIndex(Pt=>Mt(h(Pt))===Mt(e.modelValue));~Ht?b.selectedLabel=c(rt[Ht]):b.selectedLabel=Mt(e.modelValue)}else b.selectedLabel="",b.previousValue=void 0;Zt(),Ct()};return At(oe,rt=>{rt?ke(""):(b.inputValue="",b.previousQuery=null,b.isBeforeHide=!0,Gt("")),t("visible-change",rt)}),At(()=>e.modelValue,(rt,Ht)=>{var Pt;(!rt||e.multiple&&rt.toString()!==b.previousValue||!e.multiple&&Mt(rt)!==Mt(b.previousValue))&&zt(),!Yo(rt,Ht)&&e.validateEvent&&((Pt=o==null?void 0:o.validate)==null||Pt.call(o,"change").catch(dn=>void 0))},{deep:!0}),At(()=>e.options,()=>{const rt=O.value;(!rt||rt&&document.activeElement!==rt)&&zt()},{deep:!0,flush:"post"}),At(()=>ee.value,()=>j.value&&bn(j.value.resetScrollTop)),ko(()=>{b.isBeforeHide||dt()}),ko(()=>{const{valueKey:rt,options:Ht}=e,Pt=new Map;for(const dn of Ht){const Hn=h(dn);let dr=Hn;if(nr(dr)&&(dr=ha(Hn,rt)),Pt.get(dr))break;Pt.set(dr,!0)}}),Un(()=>{zt()}),Hi(T,it),Hi(E,Et),Hi(B,Vt),Hi(j,ln),Hi(q,ln),Hi(W,kn),Hi(U,Dt),{inputId:s,collapseTagSize:lt,currentPlaceholder:Ot,expanded:oe,emptyText:yt,popupHeight:we,debounce:Ue,allOptions:re,filteredOptions:ee,iconComponent:Ve,iconReverse:et,tagStyle:It,collapseTagStyle:Bt,inputStyle:Ft,popperSize:C,dropdownMenuVisible:Rn,hasModelValue:pe,shouldShowPlaceholder:cn,selectDisabled:be,selectSize:Lt,showClearBtn:Ce,states:b,isFocused:ce,nsSelect:r,nsInput:i,calculatorRef:B,inputRef:O,menuRef:j,tagMenuRef:W,tooltipRef:A,tagTooltipRef:I,selectRef:T,wrapperRef:q,selectionRef:E,prefixRef:N,suffixRef:H,collapseItemRef:U,popperRef:kt,validateState:Ee,validateIcon:Je,showTagList:On,collapseTagList:mt,debouncedOnInputChange:ve,deleteTag:Xn,getLabel:c,getValue:h,getDisabled:f,getValueKey:Mt,handleClear:Br,handleClickOutside:qr,handleDel:Ur,handleEsc:rr,focus:mr,blur:Yt,handleMenuEnter:ar,handleResize:it,resetSelectionWidth:Et,resetCalculatorWidth:Vt,updateTooltip:ln,updateTagTooltip:kn,updateOptions:dt,toggleMenu:Ze,scrollTo:$e,onInput:Tr,onKeyboardNavigate:Qt,onKeyboardSelect:St,onSelect:Tn,onHover:en,handleCompositionStart:ie,handleCompositionEnd:ue,handleCompositionUpdate:J}},Gke=Be({name:"ElSelectV2",components:{ElSelectMenu:Hke,ElTag:cw,ElTooltip:Po,ElIcon:yn},directives:{ClickOutside:Xd},props:Bke,emits:[tr,ki,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=X(()=>{const{modelValue:i,multiple:a}=e,o=a?[]:void 0;return sn(i)?a?i:o:a?o:i}),r=Wke(Ar({...ao(e),modelValue:n}),t);return pr(V5,{props:Ar({...ao(e),height:r.popupHeight,modelValue:n}),tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect}),{...r,modelValue:n}}});function Kke(e,t,n,r,i,a){const o=Xt("el-tag"),s=Xt("el-tooltip"),l=Xt("el-icon"),c=Xt("el-select-menu"),h=VM("click-outside");return In((te(),me("div",{ref:"selectRef",class:se([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:f=>e.states.inputHovering=!0,onMouseleave:f=>e.states.inputHovering=!1},[de(s,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:f=>e.states.isBeforeHide=!1},{default:ge(()=>[V("div",{ref:"wrapperRef",class:se([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:Fn(e.toggleMenu,["prevent"])},[e.$slots.prefix?(te(),me("div",{key:0,ref:"prefixRef",class:se(e.nsSelect.e("prefix"))},[st(e.$slots,"prefix")],2)):Ge("v-if",!0),V("div",{ref:"selectionRef",class:se([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?st(e.$slots,"tag",{key:0},()=>[(te(!0),me(hn,null,Kn(e.showTagList,f=>(te(),me("div",{key:e.getValueKey(e.getValue(f)),class:se(e.nsSelect.e("selected-item"))},[de(o,{closable:!e.selectDisabled&&!e.getDisabled(f),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:_n(e.tagStyle),onClose:p=>e.deleteTag(p,f)},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))},[st(e.$slots,"label",{label:e.getLabel(f),value:e.getValue(f)},()=>[$t(Xe(e.getLabel(f)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(te(),ft(s,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:ge(()=>[V("div",{ref:"collapseItemRef",class:se(e.nsSelect.e("selected-item"))},[de(o,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:_n(e.collapseTagStyle),"disable-transitions":""},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))}," + "+Xe(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ge(()=>[V("div",{ref:"tagMenuRef",class:se(e.nsSelect.e("selection"))},[(te(!0),me(hn,null,Kn(e.collapseTagList,f=>(te(),me("div",{key:e.getValueKey(e.getValue(f)),class:se(e.nsSelect.e("selected-item"))},[de(o,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(f),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:p=>e.deleteTag(p,f)},{default:ge(()=>[V("span",{class:se(e.nsSelect.e("tags-text"))},[st(e.$slots,"label",{label:e.getLabel(f),value:e.getValue(f)},()=>[$t(Xe(e.getLabel(f)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ge("v-if",!0)]):Ge("v-if",!0),e.selectDisabled?Ge("v-if",!0):(te(),me("div",{key:1,class:se([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[In(V("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":f=>e.states.inputValue=f,style:_n(e.inputStyle),autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:se([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[oi(Fn(f=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),oi(Fn(f=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),oi(Fn(e.onKeyboardSelect,["stop","prevent"]),["enter"]),oi(Fn(e.handleEsc,["stop","prevent"]),["esc"]),oi(Fn(e.handleDel,["stop"]),["delete"])],onClick:Fn(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[qo,e.states.inputValue]]),e.filterable?(te(),me("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:se(e.nsSelect.e("input-calculator")),textContent:Xe(e.states.inputValue)},null,10,["textContent"])):Ge("v-if",!0)],2)),e.shouldShowPlaceholder?(te(),me("div",{key:2,class:se([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?st(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[V("span",null,Xe(e.currentPlaceholder),1)]):(te(),me("span",{key:1},Xe(e.currentPlaceholder),1))],2)):Ge("v-if",!0)],2),V("div",{ref:"suffixRef",class:se(e.nsSelect.e("suffix"))},[e.iconComponent?In((te(),ft(l,{key:0,class:se([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:ge(()=>[(te(),ft(ir(e.iconComponent)))]),_:1},8,["class"])),[[Lr,!e.showClearBtn]]):Ge("v-if",!0),e.showClearBtn&&e.clearIcon?(te(),ft(l,{key:1,class:se([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:Fn(e.handleClear,["prevent","stop"])},{default:ge(()=>[(te(),ft(ir(e.clearIcon)))]),_:1},8,["class","onClick"])):Ge("v-if",!0),e.validateState&&e.validateIcon?(te(),ft(l,{key:2,class:se([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:ge(()=>[(te(),ft(ir(e.validateIcon)))]),_:1},8,["class"])):Ge("v-if",!0)],2)],10,["onClick"])]),content:ge(()=>[de(c,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},Zu({default:ge(f=>[st(e.$slots,"default",Bu(Pf(f)))]),_:2},[e.$slots.header?{name:"header",fn:ge(()=>[V("div",{class:se(e.nsSelect.be("dropdown","header"))},[st(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:ge(()=>[V("div",{class:se(e.nsSelect.be("dropdown","loading"))},[st(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:ge(()=>[V("div",{class:se(e.nsSelect.be("dropdown","empty"))},[st(e.$slots,"empty",{},()=>[V("span",null,Xe(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:ge(()=>[V("div",{class:se(e.nsSelect.be("dropdown","footer"))},[st(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[h,e.handleClickOutside,e.popperRef]])}var qke=Kt(Gke,[["render",Kke],["__file","select.vue"]]);const Zke=Wn(qke),Yke=Wt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Xke=Wt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Jke=Be({name:"ElSkeletonItem"}),Qke=Be({...Jke,props:Xke,setup(e){const t=Rt("skeleton");return(n,r)=>(te(),me("div",{class:se([w(t).e("item"),w(t).e(n.variant)])},[n.variant==="image"?(te(),ft(w(Cve),{key:0})):Ge("v-if",!0)],2))}});var zT=Kt(Qke,[["__file","skeleton-item.vue"]]);const eEe=Be({name:"ElSkeleton"}),tEe=Be({...eEe,props:Yke,setup(e,{expose:t}){const n=e,r=Rt("skeleton"),i=yge(Gr(n,"loading"),n.throttle);return t({uiLoading:i}),(a,o)=>w(i)?(te(),me("div",sr({key:0,class:[w(r).b(),w(r).is("animated",a.animated)]},a.$attrs),[(te(!0),me(hn,null,Kn(a.count,s=>(te(),me(hn,{key:s},[a.loading?st(a.$slots,"template",{key:s},()=>[de(zT,{class:se(w(r).is("first")),variant:"p"},null,8,["class"]),(te(!0),me(hn,null,Kn(a.rows,l=>(te(),ft(zT,{key:l,class:se([w(r).e("paragraph"),w(r).is("last",l===a.rows&&a.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Ge("v-if",!0)],64))),128))],16)):st(a.$slots,"default",Bu(sr({key:1},a.$attrs)))}});var nEe=Kt(tEe,[["__file","skeleton.vue"]]);const rEe=Wn(nEe,{SkeletonItem:zT}),iEe=Ki(zT),hY=Symbol("sliderContextKey"),aEe=Wt({modelValue:{type:Qe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:$a,inputSize:$a,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Qe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Qe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:qf,default:"top"},marks:{type:Qe(Object)},validateEvent:{type:Boolean,default:!0},...yo(["ariaLabel"])}),fP=e=>zn(e)||sn(e)&&e.every(zn),oEe={[tr]:fP,[_s]:fP,[ki]:fP},sEe=(e,t,n)=>{const r=le();return Un(async()=>{e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),ti(window,"resize",n),await bn(),n()}),{sliderWrapper:r}},lEe=e=>X(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),uEe=(e,t,n)=>{const{form:r,formItem:i}=es(),a=_i(),o=le(),s=le(),l={firstButton:o,secondButton:s},c=X(()=>e.disabled||(r==null?void 0:r.disabled)||!1),h=X(()=>Math.min(t.firstValue,t.secondValue)),f=X(()=>Math.max(t.firstValue,t.secondValue)),p=X(()=>e.range?`${100*(f.value-h.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),v=X(()=>e.range?`${100*(h.value-e.min)/(e.max-e.min)}%`:"0%"),_=X(()=>e.vertical?{height:e.height}:{}),b=X(()=>e.vertical?{height:p.value,bottom:v.value}:{width:p.value,left:v.value}),C=()=>{a.value&&(t.sliderSize=a.value[`client${e.vertical?"Height":"Width"}`])},T=Y=>{const ie=e.min+Y*(e.max-e.min)/100;if(!e.range)return o;let ue;return Math.abs(h.value-ie)<Math.abs(f.value-ie)?ue=t.firstValue<t.secondValue?"firstButton":"secondButton":ue=t.firstValue>t.secondValue?"firstButton":"secondButton",l[ue]},E=Y=>{const ie=T(Y);return ie.value.setPosition(Y),ie},A=Y=>{t.firstValue=Y??e.min,O(e.range?[h.value,f.value]:Y??e.min)},I=Y=>{t.secondValue=Y,e.range&&O([h.value,f.value])},O=Y=>{n(tr,Y),n(_s,Y)},B=async()=>{await bn(),n(ki,e.range?[h.value,f.value]:e.modelValue)},N=Y=>{var ie,ue,J,q,ce,re;if(c.value||t.dragging)return;C();let ee=0;if(e.vertical){const oe=(J=(ue=(ie=Y.touches)==null?void 0:ie.item(0))==null?void 0:ue.clientY)!=null?J:Y.clientY;ee=(a.value.getBoundingClientRect().bottom-oe)/t.sliderSize*100}else{const oe=(re=(ce=(q=Y.touches)==null?void 0:q.item(0))==null?void 0:ce.clientX)!=null?re:Y.clientX,be=a.value.getBoundingClientRect().left;ee=(oe-be)/t.sliderSize*100}if(!(ee<0||ee>100))return E(ee)};return{elFormItem:i,slider:a,firstButton:o,secondButton:s,sliderDisabled:c,minValue:h,maxValue:f,runwayStyle:_,barStyle:b,resetSize:C,setPosition:E,emitChange:B,onSliderWrapperPrevent:Y=>{var ie,ue;((ie=l.firstButton.value)!=null&&ie.dragging||(ue=l.secondButton.value)!=null&&ue.dragging)&&Y.preventDefault()},onSliderClick:Y=>{N(Y)&&B()},onSliderDown:async Y=>{const ie=N(Y);ie&&(await bn(),ie.value.onButtonDown(Y))},onSliderMarkerDown:Y=>{c.value||t.dragging||E(Y)},setFirstValue:A,setSecondValue:I}},{left:cEe,down:dEe,right:hEe,up:fEe,home:pEe,end:vEe,pageUp:mEe,pageDown:gEe}=En,yEe=(e,t,n)=>{const r=le(),i=le(!1),a=X(()=>t.value instanceof Function),o=X(()=>a.value&&t.value(e.modelValue)||e.modelValue),s=Ks(()=>{n.value&&(i.value=!0)},50),l=Ks(()=>{n.value&&(i.value=!1)},50);return{tooltip:r,tooltipVisible:i,formatValue:o,displayTooltip:s,hideTooltip:l}},_Ee=(e,t,n)=>{const{disabled:r,min:i,max:a,step:o,showTooltip:s,precision:l,sliderSize:c,formatTooltip:h,emitChange:f,resetSize:p,updateDragging:v}=un(hY),{tooltip:_,tooltipVisible:b,formatValue:C,displayTooltip:T,hideTooltip:E}=yEe(e,h,s),A=le(),I=X(()=>`${(e.modelValue-i.value)/(a.value-i.value)*100}%`),O=X(()=>e.vertical?{bottom:I.value}:{left:I.value}),B=()=>{t.hovering=!0,T()},N=()=>{t.hovering=!1,t.dragging||E()},H=we=>{r.value||(we.preventDefault(),re(we),window.addEventListener("mousemove",ee),window.addEventListener("touchmove",ee),window.addEventListener("mouseup",oe),window.addEventListener("touchend",oe),window.addEventListener("contextmenu",oe),A.value.focus())},j=we=>{r.value||(t.newPosition=Number.parseFloat(I.value)+we/(a.value-i.value)*100,be(t.newPosition),f())},W=()=>{j(-o.value)},U=()=>{j(o.value)},Y=()=>{j(-o.value*4)},ie=()=>{j(o.value*4)},ue=()=>{r.value||(be(0),f())},J=()=>{r.value||(be(100),f())},q=we=>{let pe=!0;[cEe,dEe].includes(we.key)?W():[hEe,fEe].includes(we.key)?U():we.key===pEe?ue():we.key===vEe?J():we.key===gEe?Y():we.key===mEe?ie():pe=!1,pe&&we.preventDefault()},ce=we=>{let pe,Ce;return we.type.startsWith("touch")?(Ce=we.touches[0].clientY,pe=we.touches[0].clientX):(Ce=we.clientY,pe=we.clientX),{clientX:pe,clientY:Ce}},re=we=>{t.dragging=!0,t.isClick=!0;const{clientX:pe,clientY:Ce}=ce(we);e.vertical?t.startY=Ce:t.startX=pe,t.startPosition=Number.parseFloat(I.value),t.newPosition=t.startPosition},ee=we=>{if(t.dragging){t.isClick=!1,T(),p();let pe;const{clientX:Ce,clientY:Ve}=ce(we);e.vertical?(t.currentY=Ve,pe=(t.startY-t.currentY)/c.value*100):(t.currentX=Ce,pe=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+pe,be(t.newPosition)}},oe=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||E(),t.isClick||be(t.newPosition),f()},0),window.removeEventListener("mousemove",ee),window.removeEventListener("touchmove",ee),window.removeEventListener("mouseup",oe),window.removeEventListener("touchend",oe),window.removeEventListener("contextmenu",oe))},be=async we=>{if(we===null||Number.isNaN(+we))return;we<0?we=0:we>100&&(we=100);const pe=100/((a.value-i.value)/o.value);let Ve=Math.round(we/pe)*pe*(a.value-i.value)*.01+i.value;Ve=Number.parseFloat(Ve.toFixed(l.value)),Ve!==e.modelValue&&n(tr,Ve),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await bn(),t.dragging&&T(),_.value.updatePopper()};return At(()=>t.dragging,we=>{v(we)}),ti(A,"touchstart",H,{passive:!1}),{disabled:r,button:A,tooltip:_,tooltipVisible:b,showTooltip:s,wrapperStyle:O,formatValue:C,handleMouseEnter:B,handleMouseLeave:N,onButtonDown:H,onKeyDown:q,setPosition:be}},bEe=(e,t,n,r)=>({stops:X(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const o=(e.max-e.min)/e.step,s=100*e.step/(e.max-e.min),l=Array.from({length:o-1}).map((c,h)=>(h+1)*s);return e.range?l.filter(c=>c<100*(n.value-e.min)/(e.max-e.min)||c>100*(r.value-e.min)/(e.max-e.min)):l.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:o=>e.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),wEe=(e,t,n,r,i,a)=>{const o=c=>{i(tr,c),i(_s,c)},s=()=>e.range?![n.value,r.value].every((c,h)=>c===t.oldValue[h]):e.modelValue!==t.oldValue,l=()=>{var c,h;e.min>e.max&&Na("Slider","min should not be greater than max.");const f=e.modelValue;e.range&&Array.isArray(f)?f[1]<e.min?o([e.min,e.min]):f[0]>e.max?o([e.max,e.max]):f[0]<e.min?o([e.min,f[1]]):f[1]>e.max?o([f[0],e.max]):(t.firstValue=f[0],t.secondValue=f[1],s()&&(e.validateEvent&&((c=a==null?void 0:a.validate)==null||c.call(a,"change").catch(p=>void 0)),t.oldValue=f.slice())):!e.range&&typeof f=="number"&&!Number.isNaN(f)&&(f<e.min?o(e.min):f>e.max?o(e.max):(t.firstValue=f,s()&&(e.validateEvent&&((h=a==null?void 0:a.validate)==null||h.call(a,"change").catch(p=>void 0)),t.oldValue=f)))};l(),At(()=>t.dragging,c=>{c||l()}),At(()=>e.modelValue,(c,h)=>{t.dragging||Array.isArray(c)&&Array.isArray(h)&&c.every((f,p)=>f===h[p])&&t.firstValue===c[0]&&t.secondValue===c[1]||l()},{deep:!0}),At(()=>[e.min,e.max],()=>{l()})},xEe=Wt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:qf,default:"top"}}),SEe={[tr]:e=>zn(e)},CEe=Be({name:"ElSliderButton"}),TEe=Be({...CEe,props:xEe,emits:SEe,setup(e,{expose:t,emit:n}){const r=e,i=Rt("slider"),a=Ar({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:o,button:s,tooltip:l,showTooltip:c,tooltipVisible:h,wrapperStyle:f,formatValue:p,handleMouseEnter:v,handleMouseLeave:_,onButtonDown:b,onKeyDown:C,setPosition:T}=_Ee(r,a,n),{hovering:E,dragging:A}=ao(a);return t({onButtonDown:b,onKeyDown:C,setPosition:T,hovering:E,dragging:A}),(I,O)=>(te(),me("div",{ref_key:"button",ref:s,class:se([w(i).e("button-wrapper"),{hover:w(E),dragging:w(A)}]),style:_n(w(f)),tabindex:w(o)?-1:0,onMouseenter:w(v),onMouseleave:w(_),onMousedown:w(b),onFocus:w(v),onBlur:w(_),onKeydown:w(C)},[de(w(Po),{ref_key:"tooltip",ref:l,visible:w(h),placement:I.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":I.tooltipClass,disabled:!w(c),persistent:""},{content:ge(()=>[V("span",null,Xe(w(p)),1)]),default:ge(()=>[V("div",{class:se([w(i).e("button"),{hover:w(E),dragging:w(A)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var a$=Kt(TEe,[["__file","button.vue"]]);const MEe=Wt({mark:{type:Qe([String,Object]),default:void 0}});var kEe=Be({name:"ElSliderMarker",props:MEe,setup(e){const t=Rt("slider"),n=X(()=>Ln(e.mark)?e.mark:e.mark.label),r=X(()=>Ln(e.mark)?void 0:e.mark.style);return()=>Mn("div",{class:t.e("marks-text"),style:r.value},n.value)}});const EEe=Be({name:"ElSlider"}),AEe=Be({...EEe,props:aEe,emits:oEe,setup(e,{expose:t,emit:n}){const r=e,i=Rt("slider"),{t:a}=Sr(),o=Ar({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:l,firstButton:c,secondButton:h,sliderDisabled:f,minValue:p,maxValue:v,runwayStyle:_,barStyle:b,resetSize:C,emitChange:T,onSliderWrapperPrevent:E,onSliderClick:A,onSliderDown:I,onSliderMarkerDown:O,setFirstValue:B,setSecondValue:N}=uEe(r,o,n),{stops:H,getStopStyle:j}=bEe(r,o,p,v),{inputId:W,isLabeledByFormItem:U}=ac(r,{formItemContext:s}),Y=Ea(),ie=X(()=>r.inputSize||Y.value),ue=X(()=>r.ariaLabel||a("el.slider.defaultLabel",{min:r.min,max:r.max})),J=X(()=>r.range?r.rangeStartLabel||a("el.slider.defaultRangeStartLabel"):ue.value),q=X(()=>r.formatValueText?r.formatValueText(pe.value):`${pe.value}`),ce=X(()=>r.rangeEndLabel||a("el.slider.defaultRangeEndLabel")),re=X(()=>r.formatValueText?r.formatValueText(Ce.value):`${Ce.value}`),ee=X(()=>[i.b(),i.m(Y.value),i.is("vertical",r.vertical),{[i.m("with-input")]:r.showInput}]),oe=lEe(r);wEe(r,o,p,v,n,s);const be=X(()=>{const Ee=[r.min,r.max,r.step].map(Je=>{const Ue=`${Je}`.split(".")[1];return Ue?Ue.length:0});return Math.max.apply(null,Ee)}),{sliderWrapper:we}=sEe(r,o,C),{firstValue:pe,secondValue:Ce,sliderSize:Ve}=ao(o),et=Ee=>{o.dragging=Ee};return ti(we,"touchstart",E,{passive:!1}),ti(we,"touchmove",E,{passive:!1}),pr(hY,{...ao(r),sliderSize:Ve,disabled:f,precision:be,emitChange:T,resetSize:C,updateDragging:et}),t({onSliderClick:A}),(Ee,Je)=>{var Ue,yt;return te(),me("div",{id:Ee.range?w(W):void 0,ref_key:"sliderWrapper",ref:we,class:se(w(ee)),role:Ee.range?"group":void 0,"aria-label":Ee.range&&!w(U)?w(ue):void 0,"aria-labelledby":Ee.range&&w(U)?(Ue=w(s))==null?void 0:Ue.labelId:void 0},[V("div",{ref_key:"slider",ref:l,class:se([w(i).e("runway"),{"show-input":Ee.showInput&&!Ee.range},w(i).is("disabled",w(f))]),style:_n(w(_)),onMousedown:w(I),onTouchstartPassive:w(I)},[V("div",{class:se(w(i).e("bar")),style:_n(w(b))},null,6),de(a$,{id:Ee.range?void 0:w(W),ref_key:"firstButton",ref:c,"model-value":w(pe),vertical:Ee.vertical,"tooltip-class":Ee.tooltipClass,placement:Ee.placement,role:"slider","aria-label":Ee.range||!w(U)?w(J):void 0,"aria-labelledby":!Ee.range&&w(U)?(yt=w(s))==null?void 0:yt.labelId:void 0,"aria-valuemin":Ee.min,"aria-valuemax":Ee.range?w(Ce):Ee.max,"aria-valuenow":w(pe),"aria-valuetext":w(q),"aria-orientation":Ee.vertical?"vertical":"horizontal","aria-disabled":w(f),"onUpdate:modelValue":w(B)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Ee.range?(te(),ft(a$,{key:0,ref_key:"secondButton",ref:h,"model-value":w(Ce),vertical:Ee.vertical,"tooltip-class":Ee.tooltipClass,placement:Ee.placement,role:"slider","aria-label":w(ce),"aria-valuemin":w(pe),"aria-valuemax":Ee.max,"aria-valuenow":w(Ce),"aria-valuetext":w(re),"aria-orientation":Ee.vertical?"vertical":"horizontal","aria-disabled":w(f),"onUpdate:modelValue":w(N)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Ge("v-if",!0),Ee.showStops?(te(),me("div",{key:1},[(te(!0),me(hn,null,Kn(w(H),(Ne,dt)=>(te(),me("div",{key:dt,class:se(w(i).e("stop")),style:_n(w(j)(Ne))},null,6))),128))])):Ge("v-if",!0),w(oe).length>0?(te(),me(hn,{key:2},[V("div",null,[(te(!0),me(hn,null,Kn(w(oe),(Ne,dt)=>(te(),me("div",{key:dt,style:_n(w(j)(Ne.position)),class:se([w(i).e("stop"),w(i).e("marks-stop")])},null,6))),128))]),V("div",{class:se(w(i).e("marks"))},[(te(!0),me(hn,null,Kn(w(oe),(Ne,dt)=>(te(),ft(w(kEe),{key:dt,mark:Ne.mark,style:_n(w(j)(Ne.position)),onMousedown:Fn(Le=>w(O)(Ne.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Ge("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),Ee.showInput&&!Ee.range?(te(),ft(w(NZ),{key:0,ref:"input","model-value":w(pe),class:se(w(i).e("input")),step:Ee.step,disabled:w(f),controls:Ee.showInputControls,min:Ee.min,max:Ee.max,precision:w(be),debounce:Ee.debounce,size:w(ie),"onUpdate:modelValue":w(B),onChange:w(T)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Ge("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var PEe=Kt(AEe,[["__file","slider.vue"]]);const IEe=Wn(PEe),LEe=Wt({prefixCls:{type:String}}),o$=Be({name:"ElSpaceItem",props:LEe,setup(e,{slots:t}){const n=Rt("space"),r=X(()=>`${e.prefixCls||n.b()}__item`);return()=>Mn("div",{class:r.value},st(t,"default"))}}),s$={small:8,default:12,large:16};function DEe(e){const t=Rt("space"),n=X(()=>[t.b(),t.m(e.direction),e.class]),r=le(0),i=le(0),a=X(()=>{const s=e.wrap||e.fill?{flexWrap:"wrap"}:{},l={alignItems:e.alignment},c={rowGap:`${i.value}px`,columnGap:`${r.value}px`};return[s,l,c,e.style]}),o=X(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return ko(()=>{const{size:s="small",wrap:l,direction:c,fill:h}=e;if(sn(s)){const[f=0,p=0]=s;r.value=f,i.value=p}else{let f;zn(s)?f=s:f=s$[s||"small"]||s$.small,(l||h)&&c==="horizontal"?r.value=i.value=f:c==="horizontal"?(r.value=f,i.value=0):(i.value=f,r.value=0)}}),{classes:n,containerStyle:a,itemStyle:o}}const REe=Wt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Qe([String,Object,Array]),default:""},style:{type:Qe([String,Array,Object]),default:""},alignment:{type:Qe(String),default:"center"},prefixCls:{type:String},spacer:{type:Qe([Object,String,Number,Array]),default:null,validator:e=>Oi(e)||zn(e)||Ln(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:id,validator:e=>zn(e)||sn(e)&&e.length===2&&e.every(zn)}}),OEe=Be({name:"ElSpace",props:REe,setup(e,{slots:t}){const{classes:n,containerStyle:r,itemStyle:i}=DEe(e);function a(o,s="",l=[]){const{prefixCls:c}=e;return o.forEach((h,f)=>{XL(h)?sn(h.children)&&h.children.forEach((p,v)=>{XL(p)&&sn(p.children)?a(p.children,`${s+v}-`,l):l.push(de(o$,{style:i.value,prefixCls:c,key:`nested-${s+v}`},{default:()=>[p]},Fl.PROPS|Fl.STYLE,["style","prefixCls"]))}):eme(h)&&l.push(de(o$,{style:i.value,prefixCls:c,key:`LoopKey${s+f}`},{default:()=>[h]},Fl.PROPS|Fl.STYLE,["style","prefixCls"]))}),l}return()=>{var o;const{spacer:s,direction:l}=e,c=st(t,"default",{key:0},()=>[]);if(((o=c.children)!=null?o:[]).length===0)return null;if(sn(c.children)){let h=a(c.children);if(s){const f=h.length-1;h=h.reduce((p,v,_)=>{const b=[...p,v];return _!==f&&b.push(de("span",{style:[i.value,l==="vertical"?"width: 100%":null],key:_},[Oi(s)?s:$t(s,Fl.TEXT)],Fl.STYLE)),b},[])}return de("div",{class:n.value,style:r.value},h,Fl.STYLE|Fl.CLASS)}return c.children}}}),zEe=Wn(OEe),BEe=Wt({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Qe([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Qe([String,Object,Array])}}),FEe=Be({name:"ElStatistic"}),NEe=Be({...FEe,props:BEe,setup(e,{expose:t}){const n=e,r=Rt("statistic"),i=X(()=>{const{value:a,formatter:o,precision:s,decimalSeparator:l,groupSeparator:c}=n;if(Dn(o))return o(a);if(!zn(a)||Number.isNaN(a))return a;let[h,f=""]=String(a).split(".");return f=f.padEnd(s,"0").slice(0,s>0?s:0),h=h.replace(/\B(?=(\d{3})+(?!\d))/g,c),[h,f].join(f?l:"")});return t({displayValue:i}),(a,o)=>(te(),me("div",{class:se(w(r).b())},[a.$slots.title||a.title?(te(),me("div",{key:0,class:se(w(r).e("head"))},[st(a.$slots,"title",{},()=>[$t(Xe(a.title),1)])],2)):Ge("v-if",!0),V("div",{class:se(w(r).e("content"))},[a.$slots.prefix||a.prefix?(te(),me("div",{key:0,class:se(w(r).e("prefix"))},[st(a.$slots,"prefix",{},()=>[V("span",null,Xe(a.prefix),1)])],2)):Ge("v-if",!0),V("span",{class:se(w(r).e("number")),style:_n(a.valueStyle)},Xe(w(i)),7),a.$slots.suffix||a.suffix?(te(),me("div",{key:1,class:se(w(r).e("suffix"))},[st(a.$slots,"suffix",{},()=>[V("span",null,Xe(a.suffix),1)])],2)):Ge("v-if",!0)],2)],2))}});var $Ee=Kt(NEe,[["__file","statistic.vue"]]);const fY=Wn($Ee),VEe=Wt({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Qe([Number,Object]),default:0},valueStyle:{type:Qe([String,Object,Array])}}),HEe={finish:()=>!0,[ki]:e=>zn(e)},jEe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],l$=e=>zn(e)?new Date(e).getTime():e.valueOf(),u$=(e,t)=>{let n=e;const r=/\[([^\]]*)]/g;return jEe.reduce((a,[o,s])=>{const l=new RegExp(`${o}+(?![^\\[\\]]*\\])`,"g");if(l.test(a)){const c=Math.floor(n/s);return n-=c*s,a.replace(l,h=>String(c).padStart(h.length,"0"))}return a},t).replace(r,"$1")},UEe=Be({name:"ElCountdown"}),WEe=Be({...UEe,props:VEe,emits:HEe,setup(e,{expose:t,emit:n}){const r=e;let i;const a=le(0),o=X(()=>u$(a.value,r.format)),s=h=>u$(h,r.format),l=()=>{i&&(Qv(i),i=void 0)},c=()=>{const h=l$(r.value),f=()=>{let p=h-Date.now();n("change",p),p<=0?(p=0,l(),n("finish")):i=Df(f),a.value=p};i=Df(f)};return Un(()=>{a.value=l$(r.value)-Date.now(),At(()=>[r.value,r.format],()=>{l(),c()},{immediate:!0})}),ui(()=>{l()}),t({displayValue:o}),(h,f)=>(te(),ft(w(fY),{value:a.value,title:h.title,prefix:h.prefix,suffix:h.suffix,"value-style":h.valueStyle,formatter:s},Zu({_:2},[Kn(h.$slots,(p,v)=>({name:v,fn:ge(()=>[st(h.$slots,v)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var GEe=Kt(WEe,[["__file","countdown.vue"]]);const KEe=Wn(GEe),qEe=Wt({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),ZEe={[ki]:(e,t)=>[e,t].every(zn)},YEe=Be({name:"ElSteps"}),XEe=Be({...YEe,props:qEe,emits:ZEe,setup(e,{emit:t}){const n=e,r=Rt("steps"),{children:i,addChild:a,removeChild:o}=p5(er(),"ElStep");return At(i,()=>{i.value.forEach((s,l)=>{s.setIndex(l)})}),pr("ElSteps",{props:n,steps:i,addStep:a,removeStep:o}),At(()=>n.active,(s,l)=>{t(ki,s,l)}),(s,l)=>(te(),me("div",{class:se([w(r).b(),w(r).m(s.simple?"simple":s.direction)])},[st(s.$slots,"default")],2))}});var JEe=Kt(XEe,[["__file","steps.vue"]]);const QEe=Wt({title:{type:String,default:""},icon:{type:si},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),eAe=Be({name:"ElStep"}),tAe=Be({...eAe,props:QEe,setup(e){const t=e,n=Rt("step"),r=le(-1),i=le({}),a=le(""),o=un("ElSteps"),s=er();Un(()=>{At([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([B])=>{I(B)},{immediate:!0})}),ui(()=>{o.removeStep(O.uid)});const l=X(()=>t.status||a.value),c=X(()=>{const B=o.steps.value[r.value-1];return B?B.currentStatus:"wait"}),h=X(()=>o.props.alignCenter),f=X(()=>o.props.direction==="vertical"),p=X(()=>o.props.simple),v=X(()=>o.steps.value.length),_=X(()=>{var B;return((B=o.steps.value[v.value-1])==null?void 0:B.uid)===(s==null?void 0:s.uid)}),b=X(()=>p.value?"":o.props.space),C=X(()=>[n.b(),n.is(p.value?"simple":o.props.direction),n.is("flex",_.value&&!b.value&&!h.value),n.is("center",h.value&&!f.value&&!p.value)]),T=X(()=>{const B={flexBasis:zn(b.value)?`${b.value}px`:b.value?b.value:`${100/(v.value-(h.value?0:1))}%`};return f.value||_.value&&(B.maxWidth=`${100/v.value}%`),B}),E=B=>{r.value=B},A=B=>{const N=B==="wait",H={transitionDelay:`${N?"-":""}${150*r.value}ms`},j=B===o.props.processStatus||N?0:100;H.borderWidth=j&&!p.value?"1px":0,H[o.props.direction==="vertical"?"height":"width"]=`${j}%`,i.value=H},I=B=>{B>r.value?a.value=o.props.finishStatus:B===r.value&&c.value!=="error"?a.value=o.props.processStatus:a.value="wait";const N=o.steps.value[r.value-1];N&&N.calcProgress(a.value)},O=Ar({uid:s.uid,currentStatus:l,setIndex:E,calcProgress:A});return o.addStep(O),(B,N)=>(te(),me("div",{style:_n(w(T)),class:se(w(C))},[Ge(" icon & line "),V("div",{class:se([w(n).e("head"),w(n).is(w(l))])},[w(p)?Ge("v-if",!0):(te(),me("div",{key:0,class:se(w(n).e("line"))},[V("i",{class:se(w(n).e("line-inner")),style:_n(i.value)},null,6)],2)),V("div",{class:se([w(n).e("icon"),w(n).is(B.icon||B.$slots.icon?"icon":"text")])},[st(B.$slots,"icon",{},()=>[B.icon?(te(),ft(w(yn),{key:0,class:se(w(n).e("icon-inner"))},{default:ge(()=>[(te(),ft(ir(B.icon)))]),_:1},8,["class"])):w(l)==="success"?(te(),ft(w(yn),{key:1,class:se([w(n).e("icon-inner"),w(n).is("status")])},{default:ge(()=>[de(w(ix))]),_:1},8,["class"])):w(l)==="error"?(te(),ft(w(yn),{key:2,class:se([w(n).e("icon-inner"),w(n).is("status")])},{default:ge(()=>[de(w(Yu))]),_:1},8,["class"])):w(p)?Ge("v-if",!0):(te(),me("div",{key:3,class:se(w(n).e("icon-inner"))},Xe(r.value+1),3))])],2)],2),Ge(" title & description "),V("div",{class:se(w(n).e("main"))},[V("div",{class:se([w(n).e("title"),w(n).is(w(l))])},[st(B.$slots,"title",{},()=>[$t(Xe(B.title),1)])],2),w(p)?(te(),me("div",{key:0,class:se(w(n).e("arrow"))},null,2)):(te(),me("div",{key:1,class:se([w(n).e("description"),w(n).is(w(l))])},[st(B.$slots,"description",{},()=>[$t(Xe(B.description),1)])],2))],2)],6))}});var pY=Kt(tAe,[["__file","item.vue"]]);const nAe=Wn(JEe,{Step:pY}),rAe=Ki(pY),iAe=Wt({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:mK},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:si},activeActionIcon:{type:si},activeIcon:{type:si},inactiveIcon:{type:si},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Qe(Function)},id:String,tabindex:{type:[String,Number]},...yo(["ariaLabel"])}),aAe={[tr]:e=>pa(e)||Ln(e)||zn(e),[ki]:e=>pa(e)||Ln(e)||zn(e),[_s]:e=>pa(e)||Ln(e)||zn(e)},vY="ElSwitch",oAe=Be({name:vY}),sAe=Be({...oAe,props:iAe,emits:aAe,setup(e,{expose:t,emit:n}){const r=e,{formItem:i}=es(),a=Ea(),o=Rt("switch"),{inputId:s}=ac(r,{formItemContext:i}),l=Ts(X(()=>r.loading)),c=le(r.modelValue!==!1),h=le(),f=le(),p=X(()=>[o.b(),o.m(a.value),o.is("disabled",l.value),o.is("checked",T.value)]),v=X(()=>[o.e("label"),o.em("label","left"),o.is("active",!T.value)]),_=X(()=>[o.e("label"),o.em("label","right"),o.is("active",T.value)]),b=X(()=>({width:oa(r.width)}));At(()=>r.modelValue,()=>{c.value=!0});const C=X(()=>c.value?r.modelValue:!1),T=X(()=>C.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(C.value)||(n(tr,r.inactiveValue),n(ki,r.inactiveValue),n(_s,r.inactiveValue)),At(T,O=>{var B;h.value.checked=O,r.validateEvent&&((B=i==null?void 0:i.validate)==null||B.call(i,"change").catch(N=>void 0))});const E=()=>{const O=T.value?r.inactiveValue:r.activeValue;n(tr,O),n(ki,O),n(_s,O),bn(()=>{h.value.checked=T.value})},A=()=>{if(l.value)return;const{beforeChange:O}=r;if(!O){E();return}const B=O();[G1(B),pa(B)].includes(!0)||Na(vY,"beforeChange must return type `Promise<boolean>` or `boolean`"),G1(B)?B.then(H=>{H&&E()}).catch(H=>{}):B&&E()},I=()=>{var O,B;(B=(O=h.value)==null?void 0:O.focus)==null||B.call(O)};return Un(()=>{h.value.checked=T.value}),t({focus:I,checked:T}),(O,B)=>(te(),me("div",{class:se(w(p)),onClick:Fn(A,["prevent"])},[V("input",{id:w(s),ref_key:"input",ref:h,class:se(w(o).e("input")),type:"checkbox",role:"switch","aria-checked":w(T),"aria-disabled":w(l),"aria-label":O.ariaLabel,name:O.name,"true-value":O.activeValue,"false-value":O.inactiveValue,disabled:w(l),tabindex:O.tabindex,onChange:E,onKeydown:oi(A,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!O.inlinePrompt&&(O.inactiveIcon||O.inactiveText)?(te(),me("span",{key:0,class:se(w(v))},[O.inactiveIcon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(O.inactiveIcon)))]),_:1})):Ge("v-if",!0),!O.inactiveIcon&&O.inactiveText?(te(),me("span",{key:1,"aria-hidden":w(T)},Xe(O.inactiveText),9,["aria-hidden"])):Ge("v-if",!0)],2)):Ge("v-if",!0),V("span",{ref_key:"core",ref:f,class:se(w(o).e("core")),style:_n(w(b))},[O.inlinePrompt?(te(),me("div",{key:0,class:se(w(o).e("inner"))},[O.activeIcon||O.inactiveIcon?(te(),ft(w(yn),{key:0,class:se(w(o).is("icon"))},{default:ge(()=>[(te(),ft(ir(w(T)?O.activeIcon:O.inactiveIcon)))]),_:1},8,["class"])):O.activeText||O.inactiveText?(te(),me("span",{key:1,class:se(w(o).is("text")),"aria-hidden":!w(T)},Xe(w(T)?O.activeText:O.inactiveText),11,["aria-hidden"])):Ge("v-if",!0)],2)):Ge("v-if",!0),V("div",{class:se(w(o).e("action"))},[O.loading?(te(),ft(w(yn),{key:0,class:se(w(o).is("loading"))},{default:ge(()=>[de(w(Yc))]),_:1},8,["class"])):w(T)?st(O.$slots,"active-action",{key:1},()=>[O.activeActionIcon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(O.activeActionIcon)))]),_:1})):Ge("v-if",!0)]):w(T)?Ge("v-if",!0):st(O.$slots,"inactive-action",{key:2},()=>[O.inactiveActionIcon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(O.inactiveActionIcon)))]),_:1})):Ge("v-if",!0)])],2)],6),!O.inlinePrompt&&(O.activeIcon||O.activeText)?(te(),me("span",{key:1,class:se(w(_))},[O.activeIcon?(te(),ft(w(yn),{key:0},{default:ge(()=>[(te(),ft(ir(O.activeIcon)))]),_:1})):Ge("v-if",!0),!O.activeIcon&&O.activeText?(te(),me("span",{key:1,"aria-hidden":!w(T)},Xe(O.activeText),9,["aria-hidden"])):Ge("v-if",!0)],2)):Ge("v-if",!0)],10,["onClick"]))}});var lAe=Kt(sAe,[["__file","switch.vue"]]);const uAe=Wn(lAe),pP=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},cAe=function(e,t,n,r,i){if(!t&&!r&&(!i||Array.isArray(i)&&!i.length))return e;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const a=r?null:function(s,l){return i?(Array.isArray(i)||(i=[i]),i.map(c=>typeof c=="string"?ha(s,c):c(s,l,e))):(t!=="$key"&&nr(s)&&"$value"in s&&(s=s.$value),[nr(s)?ha(s,t):s])},o=function(s,l){if(r)return r(s.value,l.value);for(let c=0,h=s.key.length;c<h;c++){if(s.key[c]<l.key[c])return-1;if(s.key[c]>l.key[c])return 1}return 0};return e.map((s,l)=>({value:s,index:l,key:a?a(s,l):null})).sort((s,l)=>{let c=o(s,l);return c||(c=s.index-l.index),c*+n}).map(s=>s.value)},mY=function(e,t){let n=null;return e.columns.forEach(r=>{r.id===t&&(n=r)}),n},dAe=function(e,t){let n=null;for(let r=0;r<e.columns.length;r++){const i=e.columns[r];if(i.columnKey===t){n=i;break}}return n||Na("ElTable",`No column matching with column-key: ${t}`),n},c$=function(e,t,n){const r=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?mY(e,r[0]):null},Go=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(!t.includes("."))return`${e[t]}`;const n=t.split(".");let r=e;for(const i of n)r=r[i];return`${r}`}else if(typeof t=="function")return t.call(null,e)},wv=function(e,t){const n={};return(e||[]).forEach((r,i)=>{n[Go(r,t)]={row:r,index:i}}),n};function hAe(e,t){const n={};let r;for(r in e)n[r]=e[r];for(r in t)if(Er(t,r)){const i=t[r];typeof i<"u"&&(n[r]=i)}return n}function H5(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function gY(e){return e===""||e!==void 0&&(e=H5(e),Number.isNaN(e)&&(e=80)),e}function fAe(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function pAe(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function BT(e,t,n,r,i,a){let o=a??0,s=!1;const l=e.indexOf(t),c=l!==-1,h=i==null?void 0:i.call(null,t,a),f=v=>{v==="add"?e.push(t):e.splice(l,1),s=!0},p=v=>{let _=0;const b=(r==null?void 0:r.children)&&v[r.children];return b&&sn(b)&&(_+=b.length,b.forEach(C=>{_+=p(C)})),_};return(!i||h)&&(pa(n)?n&&!c?f("add"):!n&&c&&f("remove"):f(c?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&sn(t[r.children])&&t[r.children].forEach(v=>{BT(e,v,n??!c,r,i,o+1),o+=p(v)+1}),s}function vAe(e,t,n="children",r="hasChildren"){const i=o=>!(Array.isArray(o)&&o.length);function a(o,s,l){t(o,s,l),s.forEach(c=>{if(c[r]){t(c,null,l+1);return}const h=c[n];i(h)||a(c,h,l+1)})}e.forEach(o=>{if(o[r]){t(o,null,0);return}const s=o[n];i(s)||a(o,s,0)})}let Ll=null;function mAe(e,t,n,r){if((Ll==null?void 0:Ll.trigger)===n)return;Ll==null||Ll();const i=r==null?void 0:r.refs.tableWrapper,a=i==null?void 0:i.dataset.prefix,o={strategy:"fixed",...e.popperOptions},s=de(Po,{content:t,virtualTriggering:!0,virtualRef:n,appendTo:i,placement:"top",transition:"none",offset:0,hideAfter:0,...e,popperOptions:o,onHide:()=>{Ll==null||Ll()}});s.appContext={...r.appContext,...r};const l=document.createElement("div");If(s,l),s.component.exposed.onOpen();const c=i==null?void 0:i.querySelector(`.${a}-scrollbar__wrap`);Ll=()=>{If(null,l),c==null||c.removeEventListener("scroll",Ll),Ll=null},Ll.trigger=n,c==null||c.addEventListener("scroll",Ll)}function yY(e){return e.children?gpe(e.children,yY):[e]}function d$(e,t){return e+t.colSpan}const _Y=(e,t,n,r)=>{let i=0,a=e;const o=n.states.columns.value;if(r){const l=yY(r[e]);i=o.slice(0,o.indexOf(l[0])).reduce(d$,0),a=i+l.reduce(d$,0)-1}else i=e;let s;switch(t){case"left":a<n.states.fixedLeafColumnsLength.value&&(s="left");break;case"right":i>=o.length-n.states.rightFixedLeafColumnsLength.value&&(s="right");break;default:a<n.states.fixedLeafColumnsLength.value?s="left":i>=o.length-n.states.rightFixedLeafColumnsLength.value&&(s="right")}return s?{direction:s,start:i,after:a}:{}},j5=(e,t,n,r,i,a=0)=>{const o=[],{direction:s,start:l,after:c}=_Y(t,n,r,i);if(s){const h=s==="left";o.push(`${e}-fixed-column--${s}`),h&&c+a===r.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!h&&l-a===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function h$(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const U5=(e,t,n,r)=>{const{direction:i,start:a=0,after:o=0}=_Y(e,t,n,r);if(!i)return;const s={},l=i==="left",c=n.states.columns.value;return l?s.left=c.slice(0,a).reduce(h$,0):s.right=c.slice(o+1).reverse().reduce(h$,0),s},n0=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function gAe(e){const t=er(),n=le(!1),r=le([]);return{updateExpandRows:()=>{const l=e.data.value||[],c=e.rowKey.value;if(n.value)r.value=l.slice();else if(c){const h=wv(r.value,c);r.value=l.reduce((f,p)=>{const v=Go(p,c);return h[v]&&f.push(p),f},[])}else r.value=[]},toggleRowExpansion:(l,c)=>{BT(r.value,l,c)&&t.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{t.store.assertRowKey();const c=e.data.value||[],h=e.rowKey.value,f=wv(c,h);r.value=l.reduce((p,v)=>{const _=f[v];return _&&p.push(_.row),p},[])},isRowExpanded:l=>{const c=e.rowKey.value;return c?!!wv(r.value,c)[Go(l,c)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:n}}}function yAe(e){const t=er(),n=le(null),r=le(null),i=c=>{t.store.assertRowKey(),n.value=c,o(c)},a=()=>{n.value=null},o=c=>{const{data:h,rowKey:f}=e;let p=null;f.value&&(p=(w(h)||[]).find(v=>Go(v,f.value)===c)),r.value=p,t.emit("current-change",r.value,null)};return{setCurrentRowKey:i,restoreCurrentRowKey:a,setCurrentRowByKey:o,updateCurrentRow:c=>{const h=r.value;if(c&&c!==h){r.value=c,t.emit("current-change",r.value,h);return}!c&&h&&(r.value=null,t.emit("current-change",null,h))},updateCurrentRowData:()=>{const c=e.rowKey.value,h=e.data.value||[],f=r.value;if(!h.includes(f)&&f){if(c){const p=Go(f,c);o(p)}else r.value=null;r.value===null&&t.emit("current-change",null,f)}else n.value&&(o(n.value),a())},states:{_currentRowKey:n,currentRow:r}}}function _Ae(e){const t=le([]),n=le({}),r=le(16),i=le(!1),a=le({}),o=le("hasChildren"),s=le("children"),l=le(!1),c=er(),h=X(()=>{if(!e.rowKey.value)return{};const E=e.data.value||[];return p(E)}),f=X(()=>{const E=e.rowKey.value,A=Object.keys(a.value),I={};return A.length&&A.forEach(O=>{if(a.value[O].length){const B={children:[]};a.value[O].forEach(N=>{const H=Go(N,E);B.children.push(H),N[o.value]&&!I[H]&&(I[H]={children:[]})}),I[O]=B}}),I}),p=E=>{const A=e.rowKey.value,I={};return vAe(E,(O,B,N)=>{const H=Go(O,A);Array.isArray(B)?I[H]={children:B.map(j=>Go(j,A)),level:N}:i.value&&(I[H]={children:[],lazy:!0,level:N})},s.value,o.value),I},v=(E=!1,A=(I=>(I=c.store)==null?void 0:I.states.defaultExpandAll.value)())=>{var I;const O=h.value,B=f.value,N=Object.keys(O),H={};if(N.length){const j=w(n),W=[],U=(ie,ue)=>{if(E)return t.value?A||t.value.includes(ue):!!(A||ie!=null&&ie.expanded);{const J=A||t.value&&t.value.includes(ue);return!!(ie!=null&&ie.expanded||J)}};N.forEach(ie=>{const ue=j[ie],J={...O[ie]};if(J.expanded=U(ue,ie),J.lazy){const{loaded:q=!1,loading:ce=!1}=ue||{};J.loaded=!!q,J.loading=!!ce,W.push(ie)}H[ie]=J});const Y=Object.keys(B);i.value&&Y.length&&W.length&&Y.forEach(ie=>{const ue=j[ie],J=B[ie].children;if(W.includes(ie)){if(H[ie].children.length!==0)throw new Error("[ElTable]children must be an empty array.");H[ie].children=J}else{const{loaded:q=!1,loading:ce=!1}=ue||{};H[ie]={lazy:!0,loaded:!!q,loading:!!ce,expanded:U(ue,ie),children:J,level:""}}})}n.value=H,(I=c.store)==null||I.updateTableScrollY()};At(()=>t.value,()=>{v(!0)}),At(()=>h.value,()=>{v()}),At(()=>f.value,()=>{v()});const _=E=>{t.value=E,v()},b=(E,A)=>{c.store.assertRowKey();const I=e.rowKey.value,O=Go(E,I),B=O&&n.value[O];if(O&&B&&"expanded"in B){const N=B.expanded;A=typeof A>"u"?!B.expanded:A,n.value[O].expanded=A,N!==A&&c.emit("expand-change",E,A),c.store.updateTableScrollY()}},C=E=>{c.store.assertRowKey();const A=e.rowKey.value,I=Go(E,A),O=n.value[I];i.value&&O&&"loaded"in O&&!O.loaded?T(E,I,O):b(E,void 0)},T=(E,A,I)=>{const{load:O}=c.props;O&&!n.value[A].loaded&&(n.value[A].loading=!0,O(E,I,B=>{if(!Array.isArray(B))throw new TypeError("[ElTable] data must be an array");n.value[A].loading=!1,n.value[A].loaded=!0,n.value[A].expanded=!0,B.length&&(a.value[A]=B),c.emit("expand-change",E,!0)}))};return{loadData:T,loadOrToggle:C,toggleTreeExpansion:b,updateTreeExpandKeys:_,updateTreeData:v,normalize:p,states:{expandRowKeys:t,treeData:n,indent:r,lazy:i,lazyTreeNodeMap:a,lazyColumnIdentifier:o,childrenColumnName:s,checkStrictly:l}}}const bAe=(e,t)=>{const n=t.sortingColumn;return!n||typeof n.sortable=="string"?e:cAe(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy)},IC=e=>{const t=[];return e.forEach(n=>{n.children&&n.children.length>0?t.push.apply(t,IC(n.children)):t.push(n)}),t};function wAe(){var e;const t=er(),{size:n}=ao((e=t.proxy)==null?void 0:e.$props),r=le(null),i=le([]),a=le([]),o=le(!1),s=le([]),l=le([]),c=le([]),h=le([]),f=le([]),p=le([]),v=le([]),_=le([]),b=[],C=le(0),T=le(0),E=le(0),A=le(!1),I=le([]),O=le(!1),B=le(!1),N=le(null),H=le({}),j=le(null),W=le(null),U=le(null),Y=le(null),ie=le(null);At(i,()=>t.state&&ce(!1),{deep:!0});const ue=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},J=Gt=>{var gn;(gn=Gt.children)==null||gn.forEach(xt=>{xt.fixed=Gt.fixed,J(xt)})},q=()=>{s.value.forEach(Ze=>{J(Ze)}),h.value=s.value.filter(Ze=>Ze.fixed===!0||Ze.fixed==="left"),f.value=s.value.filter(Ze=>Ze.fixed==="right"),h.value.length>0&&s.value[0]&&s.value[0].type==="selection"&&!s.value[0].fixed&&(s.value[0].fixed=!0,h.value.unshift(s.value[0]));const Gt=s.value.filter(Ze=>!Ze.fixed);l.value=[].concat(h.value).concat(Gt).concat(f.value);const gn=IC(Gt),xt=IC(h.value),Zt=IC(f.value);C.value=gn.length,T.value=xt.length,E.value=Zt.length,c.value=[].concat(xt).concat(gn).concat(Zt),o.value=h.value.length>0||f.value.length>0},ce=(Gt,gn=!1)=>{Gt&&q(),gn?t.state.doLayout():t.state.debouncedUpdateLayout()},re=Gt=>I.value.some(gn=>Yo(gn,Gt)),ee=()=>{A.value=!1;const Gt=I.value;I.value=[],Gt.length&&t.emit("selection-change",[])},oe=()=>{let Gt;if(r.value){Gt=[];const gn=wv(I.value,r.value),xt=wv(i.value,r.value);for(const Zt in gn)Er(gn,Zt)&&!xt[Zt]&&Gt.push(gn[Zt].row)}else Gt=I.value.filter(gn=>!i.value.includes(gn));if(Gt.length){const gn=I.value.filter(xt=>!Gt.includes(xt));I.value=gn,t.emit("selection-change",gn.slice())}},be=()=>(I.value||[]).slice(),we=(Gt,gn,xt=!0)=>{var Zt,Ze,Fe,ve;const ke={children:(Ze=(Zt=t==null?void 0:t.store)==null?void 0:Zt.states)==null?void 0:Ze.childrenColumnName.value,checkStrictly:(ve=(Fe=t==null?void 0:t.store)==null?void 0:Fe.states)==null?void 0:ve.checkStrictly.value};if(BT(I.value,Gt,gn,ke)){const Me=(I.value||[]).slice();xt&&t.emit("select",Me,Gt),t.emit("selection-change",Me)}},pe=()=>{var Gt,gn;const xt=B.value?!A.value:!(A.value||I.value.length);A.value=xt;let Zt=!1,Ze=0;const Fe=(gn=(Gt=t==null?void 0:t.store)==null?void 0:Gt.states)==null?void 0:gn.rowKey.value,{childrenColumnName:ve}=t.store.states,ke={children:ve.value,checkStrictly:!1};i.value.forEach((Oe,Me)=>{const Ae=Me+Ze;BT(I.value,Oe,xt,ke,N.value,Ae)&&(Zt=!0),Ze+=et(Go(Oe,Fe))}),Zt&&t.emit("selection-change",I.value?I.value.slice():[]),t.emit("select-all",(I.value||[]).slice())},Ce=()=>{const Gt=wv(I.value,r.value);i.value.forEach(gn=>{const xt=Go(gn,r.value),Zt=Gt[xt];Zt&&(I.value[Zt.index]=gn)})},Ve=()=>{var Gt;if(((Gt=i.value)==null?void 0:Gt.length)===0){A.value=!1;return}const{childrenColumnName:gn}=t.store.states,xt=r.value?wv(I.value,r.value):void 0;let Zt=0,Ze=0;const Fe=Oe=>xt?!!xt[Go(Oe,r.value)]:I.value.includes(Oe),ve=Oe=>{var Me;for(const Ae of Oe){const pt=N.value&&N.value.call(null,Ae,Zt);if(Fe(Ae))Ze++;else if(!N.value||pt)return!1;if(Zt++,(Me=Ae[gn.value])!=null&&Me.length&&!ve(Ae[gn.value]))return!1}return!0},ke=ve(i.value||[]);A.value=Ze===0?!1:ke},et=Gt=>{var gn;if(!t||!t.store)return 0;const{treeData:xt}=t.store.states;let Zt=0;const Ze=(gn=xt.value[Gt])==null?void 0:gn.children;return Ze&&(Zt+=Ze.length,Ze.forEach(Fe=>{Zt+=et(Fe)})),Zt},Ee=(Gt,gn)=>{Array.isArray(Gt)||(Gt=[Gt]);const xt={};return Gt.forEach(Zt=>{H.value[Zt.id]=gn,xt[Zt.columnKey||Zt.id]=gn}),xt},Je=(Gt,gn,xt)=>{W.value&&W.value!==Gt&&(W.value.order=null),W.value=Gt,U.value=gn,Y.value=xt},Ue=()=>{let Gt=w(a);Object.keys(H.value).forEach(gn=>{const xt=H.value[gn];if(!xt||xt.length===0)return;const Zt=mY({columns:c.value},gn);Zt&&Zt.filterMethod&&(Gt=Gt.filter(Ze=>xt.some(Fe=>Zt.filterMethod.call(null,Fe,Ze,Zt))))}),j.value=Gt},yt=()=>{i.value=bAe(j.value,{sortingColumn:W.value,sortProp:U.value,sortOrder:Y.value})},Ne=(Gt=void 0)=>{Gt&&Gt.filter||Ue(),yt()},dt=Gt=>{const{tableHeaderRef:gn}=t.refs;if(!gn)return;const xt=Object.assign({},gn.filterPanels),Zt=Object.keys(xt);if(Zt.length)if(typeof Gt=="string"&&(Gt=[Gt]),Array.isArray(Gt)){const Ze=Gt.map(Fe=>dAe({columns:c.value},Fe));Zt.forEach(Fe=>{const ve=Ze.find(ke=>ke.id===Fe);ve&&(ve.filteredValue=[])}),t.store.commit("filterChange",{column:Ze,values:[],silent:!0,multi:!0})}else Zt.forEach(Ze=>{const Fe=c.value.find(ve=>ve.id===Ze);Fe&&(Fe.filteredValue=[])}),H.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},Le=()=>{W.value&&(Je(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:ze,toggleRowExpansion:ct,updateExpandRows:Lt,states:lt,isRowExpanded:Ct}=gAe({data:i,rowKey:r}),{updateTreeExpandKeys:_t,toggleTreeExpansion:It,updateTreeData:Bt,loadOrToggle:Ft,states:cn}=_Ae({data:i,rowKey:r}),{updateCurrentRowData:Ot,updateCurrentRow:kt,setCurrentRowKey:fn,states:Rn}=yAe({data:i,rowKey:r});return{assertRowKey:ue,updateColumns:q,scheduleLayout:ce,isSelected:re,clearSelection:ee,cleanSelection:oe,getSelectionRows:be,toggleRowSelection:we,_toggleAllSelection:pe,toggleAllSelection:null,updateSelectionByRowKey:Ce,updateAllSelected:Ve,updateFilters:Ee,updateCurrentRow:kt,updateSort:Je,execFilter:Ue,execSort:yt,execQuery:Ne,clearFilter:dt,clearSort:Le,toggleRowExpansion:ct,setExpandRowKeysAdapter:Gt=>{ze(Gt),_t(Gt)},setCurrentRowKey:fn,toggleRowExpansionAdapter:(Gt,gn)=>{c.value.some(({type:Zt})=>Zt==="expand")?ct(Gt,gn):It(Gt,gn)},isRowExpanded:Ct,updateExpandRows:Lt,updateCurrentRowData:Ot,loadOrToggle:Ft,updateTreeData:Bt,states:{tableSize:n,rowKey:r,data:i,_data:a,isComplex:o,_columns:s,originColumns:l,columns:c,fixedColumns:h,rightFixedColumns:f,leafColumns:p,fixedLeafColumns:v,rightFixedLeafColumns:_,updateOrderFns:b,leafColumnsLength:C,fixedLeafColumnsLength:T,rightFixedLeafColumnsLength:E,isAllSelected:A,selection:I,reserveSelection:O,selectOnIndeterminate:B,selectable:N,filters:H,filteredData:j,sortingColumn:W,sortProp:U,sortOrder:Y,hoverRow:ie,...lt,...cn,...Rn}}}function ND(e,t){return e.map(n=>{var r;return n.id===t.id?t:((r=n.children)!=null&&r.length&&(n.children=ND(n.children,t)),n)})}function $D(e){e.forEach(t=>{var n,r;t.no=(n=t.getColumnIndex)==null?void 0:n.call(t),(r=t.children)!=null&&r.length&&$D(t.children)}),e.sort((t,n)=>t.no-n.no)}function xAe(){const e=er(),t=wAe();return{ns:Rt("table"),...t,mutations:{setData(o,s){const l=w(o._data)!==s;o.data.value=s,o._data.value=s,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),w(o.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(o,s,l,c){const h=w(o._columns);let f=[];l?(l&&!l.children&&(l.children=[]),l.children.push(s),f=ND(h,l)):(h.push(s),f=h),$D(f),o._columns.value=f,o.updateOrderFns.push(c),s.type==="selection"&&(o.selectable.value=s.selectable,o.reserveSelection.value=s.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(o,s){var l;((l=s.getColumnIndex)==null?void 0:l.call(s))!==s.no&&($D(o._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(o,s,l,c){const h=w(o._columns)||[];if(l)l.children.splice(l.children.findIndex(p=>p.id===s.id),1),bn(()=>{var p;((p=l.children)==null?void 0:p.length)===0&&delete l.children}),o._columns.value=ND(h,l);else{const p=h.indexOf(s);p>-1&&(h.splice(p,1),o._columns.value=h)}const f=o.updateOrderFns.indexOf(c);f>-1&&o.updateOrderFns.splice(f,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(o,s){const{prop:l,order:c,init:h}=s;if(l){const f=w(o.columns).find(p=>p.property===l);f&&(f.order=c,e.store.updateSort(f,l,c),e.store.commit("changeSortCondition",{init:h}))}},changeSortCondition(o,s){const{sortingColumn:l,sortProp:c,sortOrder:h}=o,f=w(l),p=w(c),v=w(h);v===null&&(o.sortingColumn.value=null,o.sortProp.value=null);const _={filter:!0};e.store.execQuery(_),(!s||!(s.silent||s.init))&&e.emit("sort-change",{column:f,prop:p,order:v}),e.store.updateTableScrollY()},filterChange(o,s){const{column:l,values:c,silent:h}=s,f=e.store.updateFilters(l,c);e.store.execQuery(),h||e.emit("filter-change",f),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(o,s){e.store.toggleRowSelection(s),e.store.updateAllSelected()},setHoverRow(o,s){o.hoverRow.value=s},setCurrentRow(o,s){e.store.updateCurrentRow(s)}},commit:function(o,...s){const l=e.store.mutations;if(l[o])l[o].apply(e,[e.store.states].concat(s));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){bn(()=>e.layout.updateScrollY.apply(e.layout))}}}const S1={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function SAe(e,t){if(!e)throw new Error("Table is required.");const n=xAe();return n.toggleAllSelection=Ks(n._toggleAllSelection,10),Object.keys(S1).forEach(r=>{bY(wY(t,r),r,n)}),CAe(n,t),n}function CAe(e,t){Object.keys(S1).forEach(n=>{At(()=>wY(t,n),r=>{bY(r,n,e)})})}function bY(e,t,n){let r=e,i=S1[t];typeof S1[t]=="object"&&(i=i.key,r=r||S1[t].default),n.states[i].value=r}function wY(e,t){if(t.includes(".")){const n=t.split(".");let r=e;return n.forEach(i=>{r=r[i]}),r}else return e[t]}class TAe{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=le(null),this.scrollX=le(!1),this.scrollY=le(!1),this.bodyWidth=le(null),this.fixedWidth=le(null),this.rightFixedWidth=le(null),this.gutterWidth=0;for(const n in t)Er(t,n)&&(li(this[n])?this[n].value=t[n]:this[n]=t[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let r=!0;const i=this.scrollY.value;return r=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=r,i!==r}return!1}setHeight(t,n="height"){if(!xr)return;const r=this.table.vnode.el;if(t=fAe(t),this.height.value=Number(t),!r&&(t||t===0))return bn(()=>this.setHeight(t,n));typeof t=="number"?(r.style[n]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(r.style[n]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?t.push.apply(t,r.columns):t.push(r)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let n=t;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!xr)return;const t=this.fit,n=this.table.vnode.el.clientWidth;let r=0;const i=this.getFlattenColumns(),a=i.filter(l=>typeof l.width!="number");if(i.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),a.length>0&&t){if(i.forEach(l=>{r+=Number(l.width||l.minWidth||80)}),r<=n){this.scrollX.value=!1;const l=n-r;if(a.length===1)a[0].realWidth=Number(a[0].minWidth||80)+l;else{const c=a.reduce((p,v)=>p+Number(v.minWidth||80),0),h=l/c;let f=0;a.forEach((p,v)=>{if(v===0)return;const _=Math.floor(Number(p.minWidth||80)*h);f+=_,p.realWidth=Number(p.minWidth||80)+_}),a[0].realWidth=Number(a[0].minWidth||80)+l-f}}else this.scrollX.value=!0,a.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(r,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else i.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),r+=l.realWidth}),this.scrollX.value=r>n,this.bodyWidth.value=r;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const s=this.store.states.rightFixedColumns.value;if(s.length>0){let l=0;s.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}notifyObservers(t){this.observers.forEach(r=>{var i,a;switch(t){case"columns":(i=r.state)==null||i.onColumnsChange(this);break;case"scrollable":(a=r.state)==null||a.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:MAe}=iu,kAe=Be({name:"ElTableFilterPanel",components:{ElCheckbox:iu,ElCheckboxGroup:MAe,ElScrollbar:ad,ElTooltip:Po,ElIcon:yn,ArrowDown:ah,ArrowUp:H3},directives:{ClickOutside:Xd},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=er(),{t:n}=Sr(),r=Rt("table-filter"),i=t==null?void 0:t.parent;i.filterPanels.value[e.column.id]||(i.filterPanels.value[e.column.id]=t);const a=le(!1),o=le(null),s=X(()=>e.column&&e.column.filters),l=X(()=>e.column.filterClassName?`${r.b()} ${e.column.filterClassName}`:r.b()),c=X({get:()=>{var O;return(((O=e.column)==null?void 0:O.filteredValue)||[])[0]},set:O=>{h.value&&(typeof O<"u"&&O!==null?h.value.splice(0,1,O):h.value.splice(0,1))}}),h=X({get(){return e.column?e.column.filteredValue||[]:[]},set(O){e.column&&e.upDataColumn("filteredValue",O)}}),f=X(()=>e.column?e.column.filterMultiple:!0),p=O=>O.value===c.value,v=()=>{a.value=!1},_=O=>{O.stopPropagation(),a.value=!a.value},b=()=>{a.value=!1},C=()=>{A(h.value),v()},T=()=>{h.value=[],A(h.value),v()},E=O=>{c.value=O,A(typeof O<"u"&&O!==null?h.value:[]),v()},A=O=>{e.store.commit("filterChange",{column:e.column,values:O}),e.store.updateAllSelected()};At(a,O=>{e.column&&e.upDataColumn("filterOpened",O)},{immediate:!0});const I=X(()=>{var O,B;return(B=(O=o.value)==null?void 0:O.popperRef)==null?void 0:B.contentRef});return{tooltipVisible:a,multiple:f,filterClassName:l,filteredValue:h,filterValue:c,filters:s,handleConfirm:C,handleReset:T,handleSelect:E,isActive:p,t:n,ns:r,showFilterPanel:_,hideFilterPanel:b,popperPaneRef:I,tooltip:o}}});function EAe(e,t,n,r,i,a){const o=Xt("el-checkbox"),s=Xt("el-checkbox-group"),l=Xt("el-scrollbar"),c=Xt("arrow-up"),h=Xt("arrow-down"),f=Xt("el-icon"),p=Xt("el-tooltip"),v=VM("click-outside");return te(),ft(p,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:""},{content:ge(()=>[e.multiple?(te(),me("div",{key:0},[V("div",{class:se(e.ns.e("content"))},[de(l,{"wrap-class":e.ns.e("wrap")},{default:ge(()=>[de(s,{modelValue:e.filteredValue,"onUpdate:modelValue":_=>e.filteredValue=_,class:se(e.ns.e("checkbox-group"))},{default:ge(()=>[(te(!0),me(hn,null,Kn(e.filters,_=>(te(),ft(o,{key:_.value,value:_.value},{default:ge(()=>[$t(Xe(_.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),V("div",{class:se(e.ns.e("bottom"))},[V("button",{class:se({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},Xe(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),V("button",{type:"button",onClick:e.handleReset},Xe(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(te(),me("ul",{key:1,class:se(e.ns.e("list"))},[V("li",{class:se([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:_=>e.handleSelect(null)},Xe(e.t("el.table.clearFilter")),11,["onClick"]),(te(!0),me(hn,null,Kn(e.filters,_=>(te(),me("li",{key:_.value,class:se([e.ns.e("list-item"),e.ns.is("active",e.isActive(_))]),label:_.value,onClick:b=>e.handleSelect(_.value)},Xe(_.text),11,["label","onClick"]))),128))],2))]),default:ge(()=>[In((te(),me("span",{class:se([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[de(f,null,{default:ge(()=>[st(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(te(),ft(c,{key:0})):(te(),ft(h,{key:1}))])]),_:3})],10,["onClick"])),[[v,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class"])}var AAe=Kt(kAe,[["render",EAe],["__file","filter-panel.vue"]]);function xY(e){const t=er();$M(()=>{n.value.addObserver(t)}),Un(()=>{r(n.value),i(n.value)}),nh(()=>{r(n.value),i(n.value)}),Wf(()=>{n.value.removeObserver(t)});const n=X(()=>{const a=e.layout;if(!a)throw new Error("Can not find table layout.");return a}),r=a=>{var o;const s=((o=e.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!s.length)return;const l=a.getFlattenColumns(),c={};l.forEach(h=>{c[h.id]=h});for(let h=0,f=s.length;h<f;h++){const p=s[h],v=p.getAttribute("name"),_=c[v];_&&p.setAttribute("width",_.realWidth||_.width)}},i=a=>{var o,s;const l=((o=e.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let h=0,f=l.length;h<f;h++)l[h].setAttribute("width",a.scrollY.value?a.gutterWidth:"0");const c=((s=e.vnode.el)==null?void 0:s.querySelectorAll("th.gutter"))||[];for(let h=0,f=c.length;h<f;h++){const p=c[h];p.style.width=a.scrollY.value?`${a.gutterWidth}px`:"0",p.style.display=a.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:i}}const sd=Symbol("ElTable");function PAe(e,t){const n=er(),r=un(sd),i=b=>{b.stopPropagation()},a=(b,C)=>{!C.filters&&C.sortable?_(b,C,!1):C.filterable&&!C.sortable&&i(b),r==null||r.emit("header-click",C,b)},o=(b,C)=>{r==null||r.emit("header-contextmenu",C,b)},s=le(null),l=le(!1),c=le({}),h=(b,C)=>{if(xr&&!(C.children&&C.children.length>0)&&s.value&&e.border){l.value=!0;const T=r;t("set-drag-visible",!0);const A=(T==null?void 0:T.vnode.el).getBoundingClientRect().left,I=n.vnode.el.querySelector(`th.${C.id}`),O=I.getBoundingClientRect(),B=O.left-A+30;Kl(I,"noclick"),c.value={startMouseLeft:b.clientX,startLeft:O.right-A,startColumnLeft:O.left-A,tableLeft:A};const N=T==null?void 0:T.refs.resizeProxy;N.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const H=W=>{const U=W.clientX-c.value.startMouseLeft,Y=c.value.startLeft+U;N.style.left=`${Math.max(B,Y)}px`},j=()=>{if(l.value){const{startColumnLeft:W,startLeft:U}=c.value,ie=Number.parseInt(N.style.left,10)-W;C.width=C.realWidth=ie,T==null||T.emit("header-dragend",C.width,U-W,C,b),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,s.value=null,c.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",j),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Xo(I,"noclick")},0)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",j)}},f=(b,C)=>{if(C.children&&C.children.length>0)return;const T=b.target;if(!vl(T))return;const E=T==null?void 0:T.closest("th");if(!(!C||!C.resizable)&&!l.value&&e.border){const A=E.getBoundingClientRect(),I=document.body.style;A.width>12&&A.right-b.pageX<8?(I.cursor="col-resize",Vs(E,"is-sortable")&&(E.style.cursor="col-resize"),s.value=C):l.value||(I.cursor="",Vs(E,"is-sortable")&&(E.style.cursor="pointer"),s.value=null)}},p=()=>{xr&&(document.body.style.cursor="")},v=({order:b,sortOrders:C})=>{if(b==="")return C[0];const T=C.indexOf(b||null);return C[T>C.length-2?0:T+1]},_=(b,C,T)=>{var E;b.stopPropagation();const A=C.order===T?null:T||v(C),I=(E=b.target)==null?void 0:E.closest("th");if(I&&Vs(I,"noclick")){Xo(I,"noclick");return}if(!C.sortable)return;const O=b.currentTarget;if(["ascending","descending"].some(W=>Vs(O,W)&&!C.sortOrders.includes(W)))return;const B=e.store.states;let N=B.sortProp.value,H;const j=B.sortingColumn.value;(j!==C||j===C&&j.order===null)&&(j&&(j.order=null),B.sortingColumn.value=C,N=C.property),A?H=C.order=A:H=C.order=null,B.sortProp.value=N,B.sortOrder.value=H,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:a,handleHeaderContextMenu:o,handleMouseDown:h,handleMouseMove:f,handleMouseOut:p,handleSortClick:_,handleFilterClick:i}}function IAe(e){const t=un(sd),n=Rt("table");return{getHeaderRowStyle:s=>{const l=t==null?void 0:t.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:s}):l},getHeaderRowClass:s=>{const l=[],c=t==null?void 0:t.props.headerRowClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:s})),l.join(" ")},getHeaderCellStyle:(s,l,c,h)=>{var f;let p=(f=t==null?void 0:t.props.headerCellStyle)!=null?f:{};typeof p=="function"&&(p=p.call(null,{rowIndex:s,columnIndex:l,row:c,column:h}));const v=U5(l,h.fixed,e.store,c);return n0(v,"left"),n0(v,"right"),Object.assign({},p,v)},getHeaderCellClass:(s,l,c,h)=>{const f=j5(n.b(),l,h.fixed,e.store,c),p=[h.id,h.order,h.headerAlign,h.className,h.labelClassName,...f];h.children||p.push("is-leaf"),h.sortable&&p.push("is-sortable");const v=t==null?void 0:t.props.headerCellClassName;return typeof v=="string"?p.push(v):typeof v=="function"&&p.push(v.call(null,{rowIndex:s,columnIndex:l,row:c,column:h})),p.push(n.e("cell")),p.filter(_=>!!_).join(" ")}}}const SY=e=>{const t=[];return e.forEach(n=>{n.children?(t.push(n),t.push.apply(t,SY(n.children))):t.push(n)}),t},CY=e=>{let t=1;const n=(a,o)=>{if(o&&(a.level=o.level+1,t<a.level&&(t=a.level)),a.children){let s=0;a.children.forEach(l=>{n(l,a),s+=l.colSpan}),a.colSpan=s}else a.colSpan=1};e.forEach(a=>{a.level=1,n(a,void 0)});const r=[];for(let a=0;a<t;a++)r.push([]);return SY(e).forEach(a=>{a.children?(a.rowSpan=1,a.children.forEach(o=>o.isSubColumn=!0)):a.rowSpan=t-a.level+1,r[a.level-1].push(a)}),r};function LAe(e){const t=un(sd),n=X(()=>CY(e.store.states.originColumns.value));return{isGroup:X(()=>{const a=n.value.length>1;return a&&t&&(t.state.isGroup.value=!0),a}),toggleAllSelection:a=>{a.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:n}}var DAe=Be({name:"ElTableHeader",components:{ElCheckbox:iu},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=er(),r=un(sd),i=Rt("table"),a=le({}),{onColumnsChange:o,onScrollableChange:s}=xY(r);Un(async()=>{await bn(),await bn();const{prop:B,order:N}=e.defaultSort;r==null||r.store.commit("sort",{prop:B,order:N,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:h,handleMouseMove:f,handleMouseOut:p,handleSortClick:v,handleFilterClick:_}=PAe(e,t),{getHeaderRowStyle:b,getHeaderRowClass:C,getHeaderCellStyle:T,getHeaderCellClass:E}=IAe(e),{isGroup:A,toggleAllSelection:I,columnRows:O}=LAe(e);return n.state={onColumnsChange:o,onScrollableChange:s},n.filterPanels=a,{ns:i,filterPanels:a,onColumnsChange:o,onScrollableChange:s,columnRows:O,getHeaderRowClass:C,getHeaderRowStyle:b,getHeaderCellClass:E,getHeaderCellStyle:T,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:h,handleMouseMove:f,handleMouseOut:p,handleSortClick:v,handleFilterClick:_,isGroup:A,toggleAllSelection:I}},render(){const{ns:e,isGroup:t,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:i,getHeaderRowClass:a,getHeaderRowStyle:o,handleHeaderClick:s,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:h,handleSortClick:f,handleMouseOut:p,store:v,$parent:_}=this;let b=1;return Mn("thead",{class:{[e.is("group")]:t}},n.map((C,T)=>Mn("tr",{class:a(T),key:T,style:o(T)},C.map((E,A)=>(E.rowSpan>b&&(b=E.rowSpan),Mn("th",{class:i(T,A,C,E),colspan:E.colSpan,key:`${E.id}-thead`,rowspan:E.rowSpan,style:r(T,A,C,E),onClick:I=>{I.currentTarget.classList.contains("noclick")||s(I,E)},onContextmenu:I=>l(I,E),onMousedown:I=>c(I,E),onMousemove:I=>h(I,E),onMouseout:p},[Mn("div",{class:["cell",E.filteredValue&&E.filteredValue.length>0?"highlight":""]},[E.renderHeader?E.renderHeader({column:E,$index:A,store:v,_self:_}):E.label,E.sortable&&Mn("span",{onClick:I=>f(I,E),class:"caret-wrapper"},[Mn("i",{onClick:I=>f(I,E,"ascending"),class:"sort-caret ascending"}),Mn("i",{onClick:I=>f(I,E,"descending"),class:"sort-caret descending"})]),E.filterable&&Mn(AAe,{store:v,placement:E.filterPlacement||"bottom-start",column:E,upDataColumn:(I,O)=>{E[I]=O}},{"filter-icon":()=>E.renderFilterIcon?E.renderFilterIcon({filterOpened:E.filterOpened}):null})])]))))))}});function vP(e,t,n=.03){return e-t>n}function RAe(e){const t=un(sd),n=le(""),r=le(Mn("div")),i=(_,b,C)=>{var T;const E=t,A=pP(_);let I;const O=(T=E==null?void 0:E.vnode.el)==null?void 0:T.dataset.prefix;A&&(I=c$({columns:e.store.states.columns.value},A,O),I&&(E==null||E.emit(`cell-${C}`,b,I,A,_))),E==null||E.emit(`row-${C}`,b,I,_)},a=(_,b)=>{i(_,b,"dblclick")},o=(_,b)=>{e.store.commit("setCurrentRow",b),i(_,b,"click")},s=(_,b)=>{i(_,b,"contextmenu")},l=Ks(_=>{e.store.commit("setHoverRow",_)},30),c=Ks(()=>{e.store.commit("setHoverRow",null)},30),h=_=>{const b=window.getComputedStyle(_,null),C=Number.parseInt(b.paddingLeft,10)||0,T=Number.parseInt(b.paddingRight,10)||0,E=Number.parseInt(b.paddingTop,10)||0,A=Number.parseInt(b.paddingBottom,10)||0;return{left:C,right:T,top:E,bottom:A}},f=(_,b,C)=>{let T=b.target.parentNode;for(;_>1&&(T=T==null?void 0:T.nextSibling,!(!T||T.nodeName!=="TR"));)C(T,"hover-row hover-fixed-row"),_--};return{handleDoubleClick:a,handleClick:o,handleContextMenu:s,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(_,b,C)=>{var T;const E=t,A=pP(_),I=(T=E==null?void 0:E.vnode.el)==null?void 0:T.dataset.prefix;if(A){const ce=c$({columns:e.store.states.columns.value},A,I);A.rowSpan>1&&f(A.rowSpan,_,Kl);const re=E.hoverState={cell:A,column:ce,row:b};E==null||E.emit("cell-mouse-enter",re.row,re.column,re.cell,_)}if(!C)return;const O=_.target.querySelector(".cell");if(!(Vs(O,`${I}-tooltip`)&&O.childNodes.length))return;const B=document.createRange();B.setStart(O,0),B.setEnd(O,O.childNodes.length);const{width:N,height:H}=B.getBoundingClientRect(),{width:j,height:W}=O.getBoundingClientRect(),{top:U,left:Y,right:ie,bottom:ue}=h(O),J=Y+ie,q=U+ue;(vP(N+J,j)||vP(H+q,W)||vP(O.scrollWidth,j))&&mAe(C,A.innerText||A.textContent,A,E)},handleCellMouseLeave:_=>{const b=pP(_);if(!b)return;b.rowSpan>1&&f(b.rowSpan,_,Xo);const C=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",C==null?void 0:C.row,C==null?void 0:C.column,C==null?void 0:C.cell,_)},tooltipContent:n,tooltipTrigger:r}}function OAe(e){const t=un(sd),n=Rt("table");return{getRowStyle:(c,h)=>{const f=t==null?void 0:t.props.rowStyle;return typeof f=="function"?f.call(null,{row:c,rowIndex:h}):f||null},getRowClass:(c,h)=>{const f=[n.e("row")];t!=null&&t.props.highlightCurrentRow&&c===e.store.states.currentRow.value&&f.push("current-row"),e.stripe&&h%2===1&&f.push(n.em("row","striped"));const p=t==null?void 0:t.props.rowClassName;return typeof p=="string"?f.push(p):typeof p=="function"&&f.push(p.call(null,{row:c,rowIndex:h})),f},getCellStyle:(c,h,f,p)=>{const v=t==null?void 0:t.props.cellStyle;let _=v??{};typeof v=="function"&&(_=v.call(null,{rowIndex:c,columnIndex:h,row:f,column:p}));const b=U5(h,e==null?void 0:e.fixed,e.store);return n0(b,"left"),n0(b,"right"),Object.assign({},_,b)},getCellClass:(c,h,f,p,v)=>{const _=j5(n.b(),h,e==null?void 0:e.fixed,e.store,void 0,v),b=[p.id,p.align,p.className,..._],C=t==null?void 0:t.props.cellClassName;return typeof C=="string"?b.push(C):typeof C=="function"&&b.push(C.call(null,{rowIndex:c,columnIndex:h,row:f,column:p})),b.push(n.e("cell")),b.filter(T=>!!T).join(" ")},getSpan:(c,h,f,p)=>{let v=1,_=1;const b=t==null?void 0:t.props.spanMethod;if(typeof b=="function"){const C=b({row:c,column:h,rowIndex:f,columnIndex:p});Array.isArray(C)?(v=C[0],_=C[1]):typeof C=="object"&&(v=C.rowspan,_=C.colspan)}return{rowspan:v,colspan:_}},getColspanRealWidth:(c,h,f)=>{if(h<1)return c[f].realWidth;const p=c.map(({realWidth:v,width:_})=>v||_).slice(f,f+h);return Number(p.reduce((v,_)=>Number(v)+Number(_),-1))}}}function zAe(e){const t=un(sd),n=Rt("table"),{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:o,handleMouseLeave:s,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:h,tooltipTrigger:f}=RAe(e),{getRowStyle:p,getRowClass:v,getCellStyle:_,getCellClass:b,getSpan:C,getColspanRealWidth:T}=OAe(e),E=X(()=>e.store.states.columns.value.findIndex(({type:N})=>N==="default")),A=(N,H)=>{const j=t.props.rowKey;return j?Go(N,j):H},I=(N,H,j,W=!1)=>{const{tooltipEffect:U,tooltipOptions:Y,store:ie}=e,{indent:ue,columns:J}=ie.states,q=v(N,H);let ce=!0;return j&&(q.push(n.em("row",`level-${j.level}`)),ce=j.display),Mn("tr",{style:[ce?null:{display:"none"},p(N,H)],class:q,key:A(N,H),onDblclick:ee=>r(ee,N),onClick:ee=>i(ee,N),onContextmenu:ee=>a(ee,N),onMouseenter:()=>o(H),onMouseleave:s},J.value.map((ee,oe)=>{const{rowspan:be,colspan:we}=C(N,ee,H,oe);if(!be||!we)return null;const pe=Object.assign({},ee);pe.realWidth=T(J.value,we,oe);const Ce={store:e.store,_self:e.context||t,column:pe,row:N,$index:H,cellIndex:oe,expanded:W};oe===E.value&&j&&(Ce.treeNode={indent:j.level*ue.value,level:j.level},typeof j.expanded=="boolean"&&(Ce.treeNode.expanded=j.expanded,"loading"in j&&(Ce.treeNode.loading=j.loading),"noLazyChildren"in j&&(Ce.treeNode.noLazyChildren=j.noLazyChildren)));const Ve=`${A(N,H)},${oe}`,et=pe.columnKey||pe.rawColumnKey||"",Ee=O(oe,ee,Ce),Je=ee.showOverflowTooltip&&wpe({effect:U},Y,ee.showOverflowTooltip);return Mn("td",{style:_(H,oe,N,ee),class:b(H,oe,N,ee,we-1),key:`${et}${Ve}`,rowspan:be,colspan:we,onMouseenter:Ue=>l(Ue,N,Je),onMouseleave:c},[Ee])}))},O=(N,H,j)=>H.renderCell(j);return{wrappedRowRender:(N,H)=>{const j=e.store,{isRowExpanded:W,assertRowKey:U}=j,{treeData:Y,lazyTreeNodeMap:ie,childrenColumnName:ue,rowKey:J}=j.states,q=j.states.columns.value;if(q.some(({type:re})=>re==="expand")){const re=W(N),ee=I(N,H,void 0,re),oe=t.renderExpanded;return re?oe?[[ee,Mn("tr",{key:`expanded-row__${ee.key}`},[Mn("td",{colspan:q.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[oe({row:N,$index:H,store:j,expanded:re})])])]]:(console.error("[Element Error]renderExpanded is required."),ee):[[ee]]}else if(Object.keys(Y.value).length){U();const re=Go(N,J.value);let ee=Y.value[re],oe=null;ee&&(oe={expanded:ee.expanded,level:ee.level,display:!0},typeof ee.lazy=="boolean"&&(typeof ee.loaded=="boolean"&&ee.loaded&&(oe.noLazyChildren=!(ee.children&&ee.children.length)),oe.loading=ee.loading));const be=[I(N,H,oe)];if(ee){let we=0;const pe=(Ve,et)=>{Ve&&Ve.length&&et&&Ve.forEach(Ee=>{const Je={display:et.display&&et.expanded,level:et.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Ue=Go(Ee,J.value);if(Ue==null)throw new Error("For nested data item, row-key is required.");if(ee={...Y.value[Ue]},ee&&(Je.expanded=ee.expanded,ee.level=ee.level||Je.level,ee.display=!!(ee.expanded&&Je.display),typeof ee.lazy=="boolean"&&(typeof ee.loaded=="boolean"&&ee.loaded&&(Je.noLazyChildren=!(ee.children&&ee.children.length)),Je.loading=ee.loading)),we++,be.push(I(Ee,H+we,Je)),ee){const yt=ie.value[Ue]||Ee[ue.value];pe(yt,ee)}})};ee.display=!0;const Ce=ie.value[re]||N[ue.value];pe(Ce,ee)}return be}else return I(N,H,void 0)},tooltipContent:h,tooltipTrigger:f}}const BAe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var FAe=Be({name:"ElTableBody",props:BAe,setup(e){const t=er(),n=un(sd),r=Rt("table"),{wrappedRowRender:i,tooltipContent:a,tooltipTrigger:o}=zAe(e),{onColumnsChange:s,onScrollableChange:l}=xY(n),c=[];return At(e.store.states.hoverRow,(h,f)=>{var p;const v=t==null?void 0:t.vnode.el,_=Array.from((v==null?void 0:v.children)||[]).filter(T=>T==null?void 0:T.classList.contains(`${r.e("row")}`));let b=h;const C=(p=_[b])==null?void 0:p.childNodes;if(C!=null&&C.length){let T=0;Array.from(C).reduce((A,I,O)=>{var B,N;return((B=C[O])==null?void 0:B.colSpan)>1&&(T=(N=C[O])==null?void 0:N.colSpan),I.nodeName!=="TD"&&T===0&&A.push(O),T>0&&T--,A},[]).forEach(A=>{var I;for(b=h;b>0;){const O=(I=_[b-1])==null?void 0:I.childNodes;if(O[A]&&O[A].nodeName==="TD"&&O[A].rowSpan>1){Kl(O[A],"hover-cell"),c.push(O[A]);break}b--}})}else c.forEach(T=>Xo(T,"hover-cell")),c.length=0;!e.store.states.isComplex.value||!xr||Df(()=>{const T=_[f],E=_[h];T&&!T.classList.contains("hover-fixed-row")&&Xo(T,"hover-row"),E&&Kl(E,"hover-row")})}),Wf(()=>{var h;(h=Ll)==null||h()}),{ns:r,onColumnsChange:s,onScrollableChange:l,wrappedRowRender:i,tooltipContent:a,tooltipTrigger:o}},render(){const{wrappedRowRender:e,store:t}=this,n=t.states.data.value||[];return Mn("tbody",{tabIndex:-1},[n.reduce((r,i)=>r.concat(e(i,r.length)),[])])}});function NAe(){const e=un(sd),t=e==null?void 0:e.store,n=X(()=>t.states.fixedLeafColumnsLength.value),r=X(()=>t.states.rightFixedColumns.value.length),i=X(()=>t.states.columns.value.length),a=X(()=>t.states.fixedColumns.value.length),o=X(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:r,columnsCount:i,leftFixedCount:a,rightFixedCount:o,columns:t.states.columns}}function $Ae(e){const{columns:t}=NAe(),n=Rt("table");return{getCellClasses:(a,o)=>{const s=a[o],l=[n.e("cell"),s.id,s.align,s.labelClassName,...j5(n.b(),o,s.fixed,e.store)];return s.className&&l.push(s.className),s.children||l.push(n.is("leaf")),l},getCellStyles:(a,o)=>{const s=U5(o,a.fixed,e.store);return n0(s,"left"),n0(s,"right"),s},columns:t}}var VAe=Be({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:r}=$Ae(e);return{ns:Rt("table"),getCellClasses:t,getCellStyles:n,columns:r}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:r,sumText:i}=this,a=this.store.states.data.value;let o=[];return r?o=r({columns:e,data:a}):e.forEach((s,l)=>{if(l===0){o[l]=i;return}const c=a.map(v=>Number(v[s.property])),h=[];let f=!0;c.forEach(v=>{if(!Number.isNaN(+v)){f=!1;const _=`${v}`.split(".")[1];h.push(_?_.length:0)}});const p=Math.max.apply(null,h);f?o[l]="":o[l]=c.reduce((v,_)=>{const b=Number(_);return Number.isNaN(+b)?v:Number.parseFloat((v+_).toFixed(Math.min(p,20)))},0)}),Mn(Mn("tfoot",[Mn("tr",{},[...e.map((s,l)=>Mn("td",{key:l,colspan:s.colSpan,rowspan:s.rowSpan,class:n(e,l),style:t(s,l)},[Mn("div",{class:["cell",s.labelClassName]},[o[l]])]))])]))}});function HAe(e){return{setCurrentRow:h=>{e.commit("setCurrentRow",h)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(h,f)=>{e.toggleRowSelection(h,f,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:h=>{e.clearFilter(h)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(h,f)=>{e.toggleRowExpansionAdapter(h,f)},clearSort:()=>{e.clearSort()},sort:(h,f)=>{e.commit("sort",{prop:h,order:f})}}}function jAe(e,t,n,r){const i=le(!1),a=le(null),o=le(!1),s=ee=>{o.value=ee},l=le({width:null,height:null,headerHeight:null}),c=le(!1),h={display:"inline-block",verticalAlign:"middle"},f=le(),p=le(0),v=le(0),_=le(0),b=le(0),C=le(0);ko(()=>{t.setHeight(e.height)}),ko(()=>{t.setMaxHeight(e.maxHeight)}),At(()=>[e.currentRowKey,n.states.rowKey],([ee,oe])=>{!w(oe)||!w(ee)||n.setCurrentRowKey(`${ee}`)},{immediate:!0}),At(()=>e.data,ee=>{r.store.commit("setData",ee)},{immediate:!0,deep:!0}),ko(()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)});const T=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},E=(ee,oe)=>{const{pixelX:be,pixelY:we}=oe;Math.abs(be)>=Math.abs(we)&&(r.refs.bodyWrapper.scrollLeft+=oe.pixelX/5)},A=X(()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),I=X(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),O=()=>{A.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(j)};Un(async()=>{await bn(),n.updateColumns(),W(),requestAnimationFrame(O);const ee=r.vnode.el,oe=r.refs.headerWrapper;e.flexible&&ee&&ee.parentElement&&(ee.parentElement.style.minWidth="0"),l.value={width:f.value=ee.offsetWidth,height:ee.offsetHeight,headerHeight:e.showHeader&&oe?oe.offsetHeight:null},n.states.columns.value.forEach(be=>{be.filteredValue&&be.filteredValue.length&&r.store.commit("filterChange",{column:be,values:be.filteredValue,silent:!0})}),r.$ready=!0});const B=(ee,oe)=>{if(!ee)return;const be=Array.from(ee.classList).filter(we=>!we.startsWith("is-scrolling-"));be.push(t.scrollX.value?oe:"is-scrolling-none"),ee.className=be.join(" ")},N=ee=>{const{tableWrapper:oe}=r.refs;B(oe,ee)},H=ee=>{const{tableWrapper:oe}=r.refs;return!!(oe&&oe.classList.contains(ee))},j=function(){if(!r.refs.scrollBarRef)return;if(!t.scrollX.value){const et="is-scrolling-none";H(et)||N(et);return}const ee=r.refs.scrollBarRef.wrapRef;if(!ee)return;const{scrollLeft:oe,offsetWidth:be,scrollWidth:we}=ee,{headerWrapper:pe,footerWrapper:Ce}=r.refs;pe&&(pe.scrollLeft=oe),Ce&&(Ce.scrollLeft=oe);const Ve=we-be-1;oe>=Ve?N("is-scrolling-right"):N(oe===0?"is-scrolling-left":"is-scrolling-middle")},W=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&ti(r.refs.scrollBarRef.wrapRef,"scroll",j,{passive:!0}),e.fit?Hi(r.vnode.el,U):ti(window,"resize",U),Hi(r.refs.bodyWrapper,()=>{var ee,oe;U(),(oe=(ee=r.refs)==null?void 0:ee.scrollBarRef)==null||oe.update()}))},U=()=>{var ee,oe,be,we;const pe=r.vnode.el;if(!r.$ready||!pe)return;let Ce=!1;const{width:Ve,height:et,headerHeight:Ee}=l.value,Je=f.value=pe.offsetWidth;Ve!==Je&&(Ce=!0);const Ue=pe.offsetHeight;(e.height||A.value)&&et!==Ue&&(Ce=!0);const yt=e.tableLayout==="fixed"?r.refs.headerWrapper:(ee=r.refs.tableHeaderRef)==null?void 0:ee.$el;e.showHeader&&(yt==null?void 0:yt.offsetHeight)!==Ee&&(Ce=!0),p.value=((oe=r.refs.tableWrapper)==null?void 0:oe.scrollHeight)||0,_.value=(yt==null?void 0:yt.scrollHeight)||0,b.value=((be=r.refs.footerWrapper)==null?void 0:be.offsetHeight)||0,C.value=((we=r.refs.appendWrapper)==null?void 0:we.offsetHeight)||0,v.value=p.value-_.value-b.value-C.value,Ce&&(l.value={width:Je,height:Ue,headerHeight:e.showHeader&&(yt==null?void 0:yt.offsetHeight)||0},O())},Y=Ea(),ie=X(()=>{const{bodyWidth:ee,scrollY:oe,gutterWidth:be}=t;return ee.value?`${ee.value-(oe.value?be:0)}px`:""}),ue=X(()=>e.maxHeight?"fixed":e.tableLayout),J=X(()=>{if(e.data&&e.data.length)return null;let ee="100%";e.height&&v.value&&(ee=`${v.value}px`);const oe=f.value;return{width:oe?`${oe}px`:"",height:ee}}),q=X(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),ce=X(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${_.value+b.value}px)`}:{maxHeight:`${e.maxHeight-_.value-b.value}px`}:{});return{isHidden:i,renderExpanded:a,setDragVisible:s,isGroup:c,handleMouseLeave:T,handleHeaderFooterMousewheel:E,tableSize:Y,emptyBlockStyle:J,handleFixedMousewheel:(ee,oe)=>{const be=r.refs.bodyWrapper;if(Math.abs(oe.spinY)>0){const we=be.scrollTop;oe.pixelY<0&&we!==0&&ee.preventDefault(),oe.pixelY>0&&be.scrollHeight-be.clientHeight>we&&ee.preventDefault(),be.scrollTop+=Math.ceil(oe.pixelY/5)}else be.scrollLeft+=Math.ceil(oe.pixelX/5)},resizeProxyVisible:o,bodyWidth:ie,resizeState:l,doLayout:O,tableBodyStyles:I,tableLayout:ue,scrollbarViewStyle:h,tableInnerStyle:q,scrollbarStyle:ce}}function UAe(e){const t=le(),n=()=>{const i=e.vnode.el.querySelector(".hidden-columns"),a={childList:!0,subtree:!0},o=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{o.forEach(s=>s())}),t.value.observe(i,a)};Un(()=>{n()}),Wf(()=>{var r;(r=t.value)==null||r.disconnect()})}var WAe={data:{type:Array,default:()=>[]},size:$a,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function TY(e){const t=e.tableLayout==="auto";let n=e.columns||[];t&&n.every(i=>i.width===void 0)&&(n=[]);const r=i=>{const a={key:`${e.tableLayout}_${i.id}`,style:{},name:void 0};return t?a.style={width:`${i.width}px`}:a.name=i.id,a};return Mn("colgroup",{},n.map(i=>Mn("col",r(i))))}TY.props=["columns","tableLayout"];const GAe=()=>{const e=le(),t=(a,o)=>{const s=e.value;s&&s.scrollTo(a,o)},n=(a,o)=>{const s=e.value;s&&zn(o)&&["Top","Left"].includes(a)&&s[`setScroll${a}`](o)};return{scrollBarRef:e,scrollTo:t,setScrollTop:a=>n("Top",a),setScrollLeft:a=>n("Left",a)}};let KAe=1;const qAe=Be({name:"ElTable",directives:{Mousewheel:h1e},components:{TableHeader:DAe,TableBody:FAe,TableFooter:VAe,ElScrollbar:ad,hColgroup:TY},props:WAe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=Sr(),n=Rt("table"),r=er();pr(sd,r);const i=SAe(r,e);r.store=i;const a=new TAe({store:r.store,table:r,fit:e.fit,showHeader:e.showHeader});r.layout=a;const o=X(()=>(i.states.data.value||[]).length===0),{setCurrentRow:s,getSelectionRows:l,toggleRowSelection:c,clearSelection:h,clearFilter:f,toggleAllSelection:p,toggleRowExpansion:v,clearSort:_,sort:b}=HAe(i),{isHidden:C,renderExpanded:T,setDragVisible:E,isGroup:A,handleMouseLeave:I,handleHeaderFooterMousewheel:O,tableSize:B,emptyBlockStyle:N,handleFixedMousewheel:H,resizeProxyVisible:j,bodyWidth:W,resizeState:U,doLayout:Y,tableBodyStyles:ie,tableLayout:ue,scrollbarViewStyle:J,tableInnerStyle:q,scrollbarStyle:ce}=jAe(e,a,i,r),{scrollBarRef:re,scrollTo:ee,setScrollLeft:oe,setScrollTop:be}=GAe(),we=Ks(Y,50),pe=`${n.namespace.value}-table_${KAe++}`;r.tableId=pe,r.state={isGroup:A,resizeState:U,doLayout:Y,debouncedUpdateLayout:we};const Ce=X(()=>{var Ee;return(Ee=e.sumText)!=null?Ee:t("el.table.sumText")}),Ve=X(()=>{var Ee;return(Ee=e.emptyText)!=null?Ee:t("el.table.emptyText")}),et=X(()=>CY(i.states.originColumns.value)[0]);return UAe(r),{ns:n,layout:a,store:i,columns:et,handleHeaderFooterMousewheel:O,handleMouseLeave:I,tableId:pe,tableSize:B,isHidden:C,isEmpty:o,renderExpanded:T,resizeProxyVisible:j,resizeState:U,isGroup:A,bodyWidth:W,tableBodyStyles:ie,emptyBlockStyle:N,debouncedUpdateLayout:we,handleFixedMousewheel:H,setCurrentRow:s,getSelectionRows:l,toggleRowSelection:c,clearSelection:h,clearFilter:f,toggleAllSelection:p,toggleRowExpansion:v,clearSort:_,doLayout:Y,sort:b,t,setDragVisible:E,context:r,computedSumText:Ce,computedEmptyText:Ve,tableLayout:ue,scrollbarViewStyle:J,tableInnerStyle:q,scrollbarStyle:ce,scrollBarRef:re,scrollTo:ee,setScrollLeft:oe,setScrollTop:be}}});function ZAe(e,t,n,r,i,a){const o=Xt("hColgroup"),s=Xt("table-header"),l=Xt("table-body"),c=Xt("table-footer"),h=Xt("el-scrollbar"),f=VM("mousewheel");return te(),me("div",{ref:"tableWrapper",class:se([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:_n(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[V("div",{class:se(e.ns.e("inner-wrapper")),style:_n(e.tableInnerStyle)},[V("div",{ref:"hiddenColumns",class:"hidden-columns"},[st(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?In((te(),me("div",{key:0,ref:"headerWrapper",class:se(e.ns.e("header-wrapper"))},[V("table",{ref:"tableHeader",class:se(e.ns.e("header")),style:_n(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[de(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),de(s,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[f,e.handleHeaderFooterMousewheel]]):Ge("v-if",!0),V("div",{ref:"bodyWrapper",class:se(e.ns.e("body-wrapper"))},[de(h,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:ge(()=>[V("table",{ref:"tableBody",class:se(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:_n({width:e.bodyWidth,tableLayout:e.tableLayout})},[de(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(te(),ft(s,{key:0,ref:"tableHeaderRef",class:se(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):Ge("v-if",!0),de(l,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(te(),ft(c,{key:1,class:se(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Ge("v-if",!0)],6),e.isEmpty?(te(),me("div",{key:0,ref:"emptyBlock",style:_n(e.emptyBlockStyle),class:se(e.ns.e("empty-block"))},[V("span",{class:se(e.ns.e("empty-text"))},[st(e.$slots,"empty",{},()=>[$t(Xe(e.computedEmptyText),1)])],2)],6)):Ge("v-if",!0),e.$slots.append?(te(),me("div",{key:1,ref:"appendWrapper",class:se(e.ns.e("append-wrapper"))},[st(e.$slots,"append")],2)):Ge("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary&&e.tableLayout==="fixed"?In((te(),me("div",{key:1,ref:"footerWrapper",class:se(e.ns.e("footer-wrapper"))},[V("table",{class:se(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:_n(e.tableBodyStyles)},[de(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),de(c,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Lr,!e.isEmpty],[f,e.handleHeaderFooterMousewheel]]):Ge("v-if",!0),e.border||e.isGroup?(te(),me("div",{key:2,class:se(e.ns.e("border-left-patch"))},null,2)):Ge("v-if",!0)],6),In(V("div",{ref:"resizeProxy",class:se(e.ns.e("column-resize-proxy"))},null,2),[[Lr,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var YAe=Kt(qAe,[["render",ZAe],["__file","table.vue"]]);const XAe={selection:"table-column--selection",expand:"table__expand-column"},JAe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},QAe=e=>XAe[e]||"",ePe={selection:{renderHeader({store:e,column:t}){function n(){return e.states.data.value&&e.states.data.value.length===0}return Mn(iu,{disabled:n(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:n,$index:r}){return Mn(iu,{disabled:t.selectable?!t.selectable.call(null,e,r):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:i=>i.stopPropagation(),modelValue:n.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const r=e.index;return typeof r=="number"?n=t+r:typeof r=="function"&&(n=r(t)),Mn("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:n}){const{ns:r}=t,i=[r.e("expand-icon")];return n&&i.push(r.em("expand-icon","expanded")),Mn("div",{class:i,onClick:function(o){o.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[Mn(yn,null,{default:()=>[Mn(ys)]})]})},sortable:!1,resizable:!1}};function tPe({row:e,column:t,$index:n}){var r;const i=t.property,a=i&&SC(e,i).value;return t&&t.formatter?t.formatter(e,t,a,n):((r=a==null?void 0:a.toString)==null?void 0:r.call(a))||""}function nPe({row:e,treeNode:t,store:n},r=!1){const{ns:i}=n;if(!t)return r?[Mn("span",{class:i.e("placeholder")})]:null;const a=[],o=function(s){s.stopPropagation(),!t.loading&&n.loadOrToggle(e)};if(t.indent&&a.push(Mn("span",{class:i.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const s=[i.e("expand-icon"),t.expanded?i.em("expand-icon","expanded"):""];let l=ys;t.loading&&(l=Yc),a.push(Mn("div",{class:s,onClick:o},{default:()=>[Mn(yn,{class:{[i.is("loading")]:t.loading}},{default:()=>[Mn(l)]})]}))}else a.push(Mn("span",{class:i.e("placeholder")}));return a}function f$(e,t){return e.reduce((n,r)=>(n[r]=r,n),t)}function rPe(e,t){const n=er();return{registerComplexWatchers:()=>{const a=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},s=f$(a,o);Object.keys(s).forEach(l=>{const c=o[l];Er(t,c)&&At(()=>t[c],h=>{let f=h;c==="width"&&l==="realWidth"&&(f=H5(h)),c==="minWidth"&&l==="realMinWidth"&&(f=gY(h)),n.columnConfig.value[c]=f,n.columnConfig.value[l]=f;const p=c==="fixed";e.value.store.scheduleLayout(p)})})},registerNormalWatchers:()=>{const a=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},s=f$(a,o);Object.keys(s).forEach(l=>{const c=o[l];Er(t,c)&&At(()=>t[c],h=>{n.columnConfig.value[l]=h})})}}}function iPe(e,t,n){const r=er(),i=le(""),a=le(!1),o=le(),s=le(),l=Rt("table");ko(()=>{o.value=e.align?`is-${e.align}`:null,o.value}),ko(()=>{s.value=e.headerAlign?`is-${e.headerAlign}`:o.value,s.value});const c=X(()=>{let I=r.vnode.vParent||r.parent;for(;I&&!I.tableId&&!I.columnId;)I=I.vnode.vParent||I.parent;return I}),h=X(()=>{const{store:I}=r.parent;if(!I)return!1;const{treeData:O}=I.states,B=O.value;return B&&Object.keys(B).length>0}),f=le(H5(e.width)),p=le(gY(e.minWidth)),v=I=>(f.value&&(I.width=f.value),p.value&&(I.minWidth=p.value),!f.value&&p.value&&(I.width=void 0),I.minWidth||(I.minWidth=80),I.realWidth=Number(I.width===void 0?I.minWidth:I.width),I),_=I=>{const O=I.type,B=ePe[O]||{};Object.keys(B).forEach(H=>{const j=B[H];H!=="className"&&j!==void 0&&(I[H]=j)});const N=QAe(O);if(N){const H=`${w(l.namespace)}-${N}`;I.className=I.className?`${I.className} ${H}`:H}return I},b=I=>{Array.isArray(I)?I.forEach(B=>O(B)):O(I);function O(B){var N;((N=B==null?void 0:B.type)==null?void 0:N.name)==="ElTableColumn"&&(B.vParent=r)}};return{columnId:i,realAlign:o,isSubColumn:a,realHeaderAlign:s,columnOrTableParent:c,setColumnWidth:v,setColumnForcedProps:_,setColumnRenders:I=>{e.renderHeader||I.type!=="selection"&&(I.renderHeader=B=>(r.columnConfig.value.label,st(t,"header",B,()=>[I.label]))),t["filter-icon"]&&(I.renderFilterIcon=B=>st(t,"filter-icon",B));let O=I.renderCell;return I.type==="expand"?(I.renderCell=B=>Mn("div",{class:"cell"},[O(B)]),n.value.renderExpanded=B=>t.default?t.default(B):t.default):(O=O||tPe,I.renderCell=B=>{let N=null;if(t.default){const ie=t.default(B);N=ie.some(ue=>ue.type!==po)?ie:O(B)}else N=O(B);const{columns:H}=n.value.store.states,j=H.value.findIndex(ie=>ie.type==="default"),W=h.value&&B.cellIndex===j,U=nPe(B,W),Y={class:"cell",style:{}};return I.showOverflowTooltip&&(Y.class=`${Y.class} ${w(l.namespace)}-tooltip`,Y.style={width:`${(B.column.realWidth||Number(B.column.width))-1}px`}),b(N),Mn("div",Y,[U,N])}),I},getPropsData:(...I)=>I.reduce((O,B)=>(Array.isArray(B)&&B.forEach(N=>{O[N]=e[N]}),O),{}),getColumnElIndex:(I,O)=>Array.prototype.indexOf.call(I,O),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var aPe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let oPe=1;var MY=Be({name:"ElTableColumn",components:{ElCheckbox:iu},props:aPe,setup(e,{slots:t}){const n=er(),r=le({}),i=X(()=>{let A=n.parent;for(;A&&!A.tableId;)A=A.parent;return A}),{registerNormalWatchers:a,registerComplexWatchers:o}=rPe(i,e),{columnId:s,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:h,setColumnWidth:f,setColumnForcedProps:p,setColumnRenders:v,getPropsData:_,getColumnElIndex:b,realAlign:C,updateColumnOrder:T}=iPe(e,t,i),E=h.value;s.value=`${E.tableId||E.columnId}_column_${oPe++}`,$M(()=>{l.value=i.value!==E;const A=e.type||"default",I=e.sortable===""?!0:e.sortable,O=aa(e.showOverflowTooltip)?E.props.showOverflowTooltip:e.showOverflowTooltip,B={...JAe[A],id:s.value,type:A,property:e.prop||e.property,align:C,headerAlign:c,showOverflowTooltip:O,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:I,index:e.index,rawColumnKey:n.vnode.key};let U=_(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);U=hAe(B,U),U=pAe(v,f,p)(U),r.value=U,a(),o()}),Un(()=>{var A;const I=h.value,O=l.value?I.vnode.el.children:(A=I.refs.hiddenColumns)==null?void 0:A.children,B=()=>b(O||[],n.vnode.el);r.value.getColumnIndex=B,B()>-1&&i.value.store.commit("insertColumn",r.value,l.value?I.columnConfig.value:null,T)}),ui(()=>{r.value.getColumnIndex()>-1&&i.value.store.commit("removeColumn",r.value,l.value?E.columnConfig.value:null,T)}),n.columnId=s.value,n.columnConfig=r},render(){var e,t,n;try{const r=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),i=[];if(Array.isArray(r))for(const o of r)((n=o.type)==null?void 0:n.name)==="ElTableColumn"||o.shapeFlag&2?i.push(o):o.type===hn&&Array.isArray(o.children)&&o.children.forEach(s=>{(s==null?void 0:s.patchFlag)!==1024&&!Ln(s==null?void 0:s.children)&&i.push(s)});return Mn("div",i)}catch{return Mn("div",[])}}});const sPe=Wn(YAe,{TableColumn:MY}),lPe=Ki(MY);var gw=(e=>(e.ASC="asc",e.DESC="desc",e))(gw||{}),yw=(e=>(e.CENTER="center",e.RIGHT="right",e))(yw||{}),kY=(e=>(e.LEFT="left",e.RIGHT="right",e))(kY||{});const VD={asc:"desc",desc:"asc"},_w=Symbol("placeholder"),uPe=(e,t,n)=>{var r;const i={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};n||(i.flexShrink=1);const a={...(r=e.style)!=null?r:{},...i,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(a.maxWidth=e.maxWidth),e.minWidth&&(a.minWidth=e.minWidth)),a};function cPe(e,t,n){const r=X(()=>w(t).filter(b=>!b.hidden)),i=X(()=>w(r).filter(b=>b.fixed==="left"||b.fixed===!0)),a=X(()=>w(r).filter(b=>b.fixed==="right")),o=X(()=>w(r).filter(b=>!b.fixed)),s=X(()=>{const b=[];return w(i).forEach(C=>{b.push({...C,placeholderSign:_w})}),w(o).forEach(C=>{b.push(C)}),w(a).forEach(C=>{b.push({...C,placeholderSign:_w})}),b}),l=X(()=>w(i).length||w(a).length),c=X(()=>w(t).reduce((C,T)=>(C[T.key]=uPe(T,w(n),e.fixed),C),{})),h=X(()=>w(r).reduce((b,C)=>b+C.width,0)),f=b=>w(t).find(C=>C.key===b),p=b=>w(c)[b],v=(b,C)=>{b.width=C};function _(b){var C;const{key:T}=b.currentTarget.dataset;if(!T)return;const{sortState:E,sortBy:A}=e;let I=gw.ASC;nr(E)?I=VD[E[T]]:I=VD[A.order],(C=e.onColumnSort)==null||C.call(e,{column:f(T),key:T,order:I})}return{columns:t,columnsStyles:c,columnsTotalWidth:h,fixedColumnsOnLeft:i,fixedColumnsOnRight:a,hasFixedColumns:l,mainColumns:s,normalColumns:o,visibleColumns:r,getColumn:f,getColumnStyle:p,updateColumnWidth:v,onColumnSorted:_}}const dPe=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:i})=>{const a=le({scrollLeft:0,scrollTop:0});function o(v){var _,b,C;const{scrollTop:T}=v;(_=t.value)==null||_.scrollTo(v),(b=n.value)==null||b.scrollToTop(T),(C=r.value)==null||C.scrollToTop(T)}function s(v){a.value=v,o(v)}function l(v){a.value.scrollTop=v,o(w(a))}function c(v){var _,b;a.value.scrollLeft=v,(b=(_=t.value)==null?void 0:_.scrollTo)==null||b.call(_,w(a))}function h(v){var _;s(v),(_=e.onScroll)==null||_.call(e,v)}function f({scrollTop:v}){const{scrollTop:_}=w(a);v!==_&&l(v)}function p(v,_="auto"){var b;(b=t.value)==null||b.scrollToRow(v,_)}return At(()=>w(a).scrollTop,(v,_)=>{v>_&&i()}),{scrollPos:a,scrollTo:s,scrollToLeft:c,scrollToTop:l,scrollToRow:p,onScroll:h,onVerticalScroll:f}},hPe=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,tableInstance:i,ns:a,isScrolling:o})=>{const s=er(),{emit:l}=s,c=_i(!1),h=le(e.defaultExpandedRowKeys||[]),f=le(-1),p=_i(null),v=le({}),_=le({}),b=_i({}),C=_i({}),T=_i({}),E=X(()=>zn(e.estimatedRowHeight));function A(W){var U;(U=e.onRowsRendered)==null||U.call(e,W),W.rowCacheEnd>w(f)&&(f.value=W.rowCacheEnd)}function I({hovered:W,rowKey:U}){if(o.value)return;i.vnode.el.querySelectorAll(`[rowkey="${String(U)}"]`).forEach(ue=>{W?ue.classList.add(a.is("hovered")):ue.classList.remove(a.is("hovered"))})}function O({expanded:W,rowData:U,rowIndex:Y,rowKey:ie}){var ue,J;const q=[...w(h)],ce=q.indexOf(ie);W?ce===-1&&q.push(ie):ce>-1&&q.splice(ce,1),h.value=q,l("update:expandedRowKeys",q),(ue=e.onRowExpand)==null||ue.call(e,{expanded:W,rowData:U,rowIndex:Y,rowKey:ie}),(J=e.onExpandedRowsChange)==null||J.call(e,q)}const B=Ks(()=>{var W,U,Y,ie;c.value=!0,v.value={...w(v),...w(_)},N(w(p),!1),_.value={},p.value=null,(W=t.value)==null||W.forceUpdate(),(U=n.value)==null||U.forceUpdate(),(Y=r.value)==null||Y.forceUpdate(),(ie=s.proxy)==null||ie.$forceUpdate(),c.value=!1},0);function N(W,U=!1){w(E)&&[t,n,r].forEach(Y=>{const ie=w(Y);ie&&ie.resetAfterRowIndex(W,U)})}function H(W,U,Y){const ie=w(p);(ie===null||ie>Y)&&(p.value=Y),_.value[W]=U}function j({rowKey:W,height:U,rowIndex:Y},ie){ie?ie===kY.RIGHT?T.value[W]=U:b.value[W]=U:C.value[W]=U;const ue=Math.max(...[b,T,C].map(J=>J.value[W]||0));w(v)[W]!==ue&&(H(W,ue,Y),B())}return{expandedRowKeys:h,lastRenderedRowIndex:f,isDynamic:E,isResetting:c,rowHeights:v,resetAfterIndex:N,onRowExpanded:O,onRowHovered:I,onRowsRendered:A,onRowHeightChange:j}},fPe=(e,{expandedRowKeys:t,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const i=le({}),a=X(()=>{const s={},{data:l,rowKey:c}=e,h=w(t);if(!h||!h.length)return l;const f=[],p=new Set;h.forEach(_=>p.add(_));let v=l.slice();for(v.forEach(_=>s[_[c]]=0);v.length>0;){const _=v.shift();f.push(_),p.has(_[c])&&Array.isArray(_.children)&&_.children.length>0&&(v=[..._.children,...v],_.children.forEach(b=>s[b[c]]=s[_[c]]+1))}return i.value=s,f}),o=X(()=>{const{data:s,expandColumnKey:l}=e;return l?w(a):s});return At(o,(s,l)=>{s!==l&&(n.value=-1,r(0,!0))}),{data:o,depthMap:i}},pPe=(e,t)=>e+t,LC=e=>sn(e)?e.reduce(pPe,0):e,im=(e,t,n={})=>Dn(e)?e(t):e??n,uf=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=oa(e[t])}),e),EY=e=>Oi(e)?t=>Mn(e,t):e,vPe=(e,{columnsTotalWidth:t,data:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:i})=>{const a=X(()=>{const{fixed:A,width:I,vScrollbarSize:O}=e,B=I-O;return A?Math.max(Math.round(w(t)),B):B}),o=X(()=>w(a)+e.vScrollbarSize),s=X(()=>{const{height:A=0,maxHeight:I=0,footerHeight:O,hScrollbarSize:B}=e;if(I>0){const N=w(_),H=w(l),W=w(v)+N+H+B;return Math.min(W,I-O)}return A-O}),l=X(()=>{const{rowHeight:A,estimatedRowHeight:I}=e,O=w(n);return zn(I)?O.length*I:O.length*A}),c=X(()=>{const{maxHeight:A}=e,I=w(s);if(zn(A)&&A>0)return I;const O=w(l)+w(v)+w(_);return Math.min(I,O)}),h=A=>A.width,f=X(()=>LC(w(r).map(h))),p=X(()=>LC(w(i).map(h))),v=X(()=>LC(e.headerHeight)),_=X(()=>{var A;return(((A=e.fixedData)==null?void 0:A.length)||0)*e.rowHeight}),b=X(()=>w(s)-w(v)-w(_)),C=X(()=>{const{style:A={},height:I,width:O}=e;return uf({...A,height:I,width:O})}),T=X(()=>uf({height:e.footerHeight})),E=X(()=>({top:oa(w(v)),bottom:oa(e.footerHeight),width:oa(e.width)}));return{bodyWidth:a,fixedTableHeight:c,mainTableHeight:s,leftTableWidth:f,rightTableWidth:p,headerWidth:o,rowsHeight:l,windowHeight:b,footerHeight:T,emptyStyle:E,rootStyle:C,headerHeight:v}},mPe=e=>{const t=le(),n=le(0),r=le(0);let i;return Un(()=>{i=Hi(t,([a])=>{const{width:o,height:s}=a.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:h,paddingBottom:f}=getComputedStyle(a.target),p=Number.parseInt(l)||0,v=Number.parseInt(c)||0,_=Number.parseInt(h)||0,b=Number.parseInt(f)||0;n.value=o-p-v,r.value=s-_-b}).stop}),ui(()=>{i==null||i()}),At([n,r],([a,o])=>{var s;(s=e.onResize)==null||s.call(e,{width:a,height:o})}),{sizer:t,width:n,height:r}};function gPe(e){const t=le(),n=le(),r=le(),{columns:i,columnsStyles:a,columnsTotalWidth:o,fixedColumnsOnLeft:s,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:h,onColumnSorted:f}=cPe(e,Gr(e,"columns"),Gr(e,"fixed")),{scrollTo:p,scrollToLeft:v,scrollToTop:_,scrollToRow:b,onScroll:C,onVerticalScroll:T,scrollPos:E}=dPe(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:Le}),A=Rt("table-v2"),I=er(),O=_i(!1),{expandedRowKeys:B,lastRenderedRowIndex:N,isDynamic:H,isResetting:j,rowHeights:W,resetAfterIndex:U,onRowExpanded:Y,onRowHeightChange:ie,onRowHovered:ue,onRowsRendered:J}=hPe(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,tableInstance:I,ns:A,isScrolling:O}),{data:q,depthMap:ce}=fPe(e,{expandedRowKeys:B,lastRenderedRowIndex:N,resetAfterIndex:U}),{bodyWidth:re,fixedTableHeight:ee,mainTableHeight:oe,leftTableWidth:be,rightTableWidth:we,headerWidth:pe,rowsHeight:Ce,windowHeight:Ve,footerHeight:et,emptyStyle:Ee,rootStyle:Je,headerHeight:Ue}=vPe(e,{columnsTotalWidth:o,data:q,fixedColumnsOnLeft:s,fixedColumnsOnRight:l}),yt=le(),Ne=X(()=>{const ze=w(q).length===0;return sn(e.fixedData)?e.fixedData.length===0&&ze:ze});function dt(ze){const{estimatedRowHeight:ct,rowHeight:Lt,rowKey:lt}=e;return ct?w(W)[w(q)[ze][lt]]||ct:Lt}function Le(){const{onEndReached:ze}=e;if(!ze)return;const{scrollTop:ct}=w(E),Lt=w(Ce),lt=w(Ve),Ct=Lt-(ct+lt)+e.hScrollbarSize;w(N)>=0&&Lt===ct+w(oe)-w(Ue)&&ze(Ct)}return At(()=>e.expandedRowKeys,ze=>B.value=ze,{deep:!0}),{columns:i,containerRef:yt,mainTableRef:t,leftTableRef:n,rightTableRef:r,isDynamic:H,isResetting:j,isScrolling:O,hasFixedColumns:c,columnsStyles:a,columnsTotalWidth:o,data:q,expandedRowKeys:B,depthMap:ce,fixedColumnsOnLeft:s,fixedColumnsOnRight:l,mainColumns:h,bodyWidth:re,emptyStyle:Ee,rootStyle:Je,headerWidth:pe,footerHeight:et,mainTableHeight:oe,fixedTableHeight:ee,leftTableWidth:be,rightTableWidth:we,showEmpty:Ne,getRowHeight:dt,onColumnSorted:f,onRowHovered:ue,onRowExpanded:Y,onRowsRendered:J,onRowHeightChange:ie,scrollTo:p,scrollToLeft:v,scrollToTop:_,scrollToRow:b,onScroll:C,onVerticalScroll:T}}const W5=Symbol("tableV2"),AY=String,fx={type:Qe(Array),required:!0},G5={type:Qe(Array)},PY={...G5,required:!0},yPe=String,p$={type:Qe(Array),default:()=>ji([])},vv={type:Number,required:!0},IY={type:Qe([String,Number,Symbol]),default:"id"},v$={type:Qe(Object)},xv=Wt({class:String,columns:fx,columnsStyles:{type:Qe(Object),required:!0},depth:Number,expandColumnKey:yPe,estimatedRowHeight:{...Ov.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Qe(Function)},onRowHover:{type:Qe(Function)},onRowHeightChange:{type:Qe(Function)},rowData:{type:Qe(Object),required:!0},rowEventHandlers:{type:Qe(Object)},rowIndex:{type:Number,required:!0},rowKey:IY,style:{type:Qe(Object)}}),mP={type:Number,required:!0},K5=Wt({class:String,columns:fx,fixedHeaderData:{type:Qe(Array)},headerData:{type:Qe(Array),required:!0},headerHeight:{type:Qe([Number,Array]),default:50},rowWidth:mP,rowHeight:{type:Number,default:50},height:mP,width:mP}),DC=Wt({columns:fx,data:PY,fixedData:G5,estimatedRowHeight:xv.estimatedRowHeight,width:vv,height:vv,headerWidth:vv,headerHeight:K5.headerHeight,bodyWidth:vv,rowHeight:vv,cache:JZ.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Ov.scrollbarAlwaysOn,scrollbarStartGap:Ov.scrollbarStartGap,scrollbarEndGap:Ov.scrollbarEndGap,class:AY,style:v$,containerStyle:v$,getRowHeight:{type:Qe(Function),required:!0},rowKey:xv.rowKey,onRowsRendered:{type:Qe(Function)},onScroll:{type:Qe(Function)}}),_Pe=Wt({cache:DC.cache,estimatedRowHeight:xv.estimatedRowHeight,rowKey:IY,headerClass:{type:Qe([String,Function])},headerProps:{type:Qe([Object,Function])},headerCellProps:{type:Qe([Object,Function])},headerHeight:K5.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Qe([String,Function])},rowProps:{type:Qe([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Qe([Object,Function])},columns:fx,data:PY,dataGetter:{type:Qe(Function)},fixedData:G5,expandColumnKey:xv.expandColumnKey,expandedRowKeys:p$,defaultExpandedRowKeys:p$,class:AY,fixed:Boolean,style:{type:Qe(Object)},width:vv,height:vv,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Ov.hScrollbarSize,vScrollbarSize:Ov.vScrollbarSize,scrollbarAlwaysOn:tY.alwaysOn,sortBy:{type:Qe(Object),default:()=>({})},sortState:{type:Qe(Object),default:void 0},onColumnSort:{type:Qe(Function)},onExpandedRowsChange:{type:Qe(Function)},onEndReached:{type:Qe(Function)},onRowExpand:xv.onRowExpand,onScroll:DC.onScroll,onRowsRendered:DC.onRowsRendered,rowEventHandlers:xv.rowEventHandlers}),q5=(e,{slots:t})=>{var n;const{cellData:r,style:i}=e,a=((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||"",o=st(t,"default",e,()=>[a]);return de("div",{class:e.class,title:a,style:i},[o])};q5.displayName="ElTableV2Cell";q5.inheritAttrs=!1;const Z5=(e,{slots:t})=>st(t,"default",e,()=>{var n,r;return[de("div",{class:e.class,title:(n=e.column)==null?void 0:n.title},[(r=e.column)==null?void 0:r.title])]});Z5.displayName="ElTableV2HeaderCell";Z5.inheritAttrs=!1;const bPe=Wt({class:String,columns:fx,columnsStyles:{type:Qe(Object),required:!0},headerIndex:Number,style:{type:Qe(Object)}}),wPe=Be({name:"ElTableV2HeaderRow",props:bPe,setup(e,{slots:t}){return()=>{const{columns:n,columnsStyles:r,headerIndex:i,style:a}=e;let o=n.map((s,l)=>t.cell({columns:n,column:s,columnIndex:l,headerIndex:i,style:r[s.key]}));return t.header&&(o=t.header({cells:o.map(s=>sn(s)&&s.length===1?s[0]:s),columns:n,headerIndex:i})),de("div",{class:e.class,style:a,role:"row"},[o])}}}),xPe="ElTableV2Header",SPe=Be({name:xPe,props:K5,setup(e,{slots:t,expose:n}){const r=Rt("table-v2"),i=le(),a=X(()=>uf({width:e.width,height:e.height})),o=X(()=>uf({width:e.rowWidth,height:e.height})),s=X(()=>Wo(w(e.headerHeight))),l=f=>{const p=w(i);bn(()=>{p!=null&&p.scroll&&p.scroll({left:f})})},c=()=>{const f=r.e("fixed-header-row"),{columns:p,fixedHeaderData:v,rowHeight:_}=e;return v==null?void 0:v.map((b,C)=>{var T;const E=uf({height:_,width:"100%"});return(T=t.fixed)==null?void 0:T.call(t,{class:f,columns:p,rowData:b,rowIndex:-(C+1),style:E})})},h=()=>{const f=r.e("dynamic-header-row"),{columns:p}=e;return w(s).map((v,_)=>{var b;const C=uf({width:"100%",height:v});return(b=t.dynamic)==null?void 0:b.call(t,{class:f,columns:p,headerIndex:_,style:C})})};return n({scrollToLeft:l}),()=>{if(!(e.height<=0))return de("div",{ref:i,class:e.class,style:w(a),role:"rowgroup"},[de("div",{style:w(o),class:r.e("header")},[h(),c()])])}}}),CPe=e=>{const{isScrolling:t}=un(W5),n=le(!1),r=le(),i=X(()=>zn(e.estimatedRowHeight)&&e.rowIndex>=0),a=(l=!1)=>{const c=w(r);if(!c)return;const{columns:h,onRowHeightChange:f,rowKey:p,rowIndex:v,style:_}=e,{height:b}=c.getBoundingClientRect();n.value=!0,bn(()=>{if(l||b!==Number.parseInt(_.height)){const C=h[0],T=(C==null?void 0:C.placeholderSign)===_w;f==null||f({rowKey:p,height:b,rowIndex:v},C&&!T&&C.fixed)}})},o=X(()=>{const{rowData:l,rowIndex:c,rowKey:h,onRowHover:f}=e,p=e.rowEventHandlers||{},v={};return Object.entries(p).forEach(([_,b])=>{Dn(b)&&(v[_]=C=>{b({event:C,rowData:l,rowIndex:c,rowKey:h})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:_,hovered:b})=>{const C=v[_];v[_]=T=>{f({event:T,hovered:b,rowData:l,rowIndex:c,rowKey:h}),C==null||C(T)}}),v}),s=l=>{const{onRowExpand:c,rowData:h,rowIndex:f,rowKey:p}=e;c==null||c({expanded:l,rowData:h,rowIndex:f,rowKey:p})};return Un(()=>{w(i)&&a(!0)}),{isScrolling:t,measurable:i,measured:n,rowRef:r,eventHandlers:o,onExpand:s}},TPe="ElTableV2TableRow",MPe=Be({name:TPe,props:xv,setup(e,{expose:t,slots:n,attrs:r}){const{eventHandlers:i,isScrolling:a,measurable:o,measured:s,rowRef:l,onExpand:c}=CPe(e);return t({onExpand:c}),()=>{const{columns:h,columnsStyles:f,expandColumnKey:p,depth:v,rowData:_,rowIndex:b,style:C}=e;let T=h.map((E,A)=>{const I=sn(_.children)&&_.children.length>0&&E.key===p;return n.cell({column:E,columns:h,columnIndex:A,depth:v,style:f[E.key],rowData:_,rowIndex:b,isScrolling:w(a),expandIconProps:I?{rowData:_,rowIndex:b,onExpand:c}:void 0})});if(n.row&&(T=n.row({cells:T.map(E=>sn(E)&&E.length===1?E[0]:E),style:C,columns:h,depth:v,rowData:_,rowIndex:b,isScrolling:w(a)})),w(o)){const{height:E,...A}=C||{},I=w(s);return de("div",sr({ref:l,class:e.class,style:I?C:A,role:"row"},r,w(i)),[T])}return de("div",sr(r,{ref:l,class:e.class,style:C,role:"row"},w(i)),[T])}}}),kPe=e=>{const{sortOrder:t}=e;return de(yn,{size:14,class:e.class},{default:()=>[t===gw.ASC?de(Nve,null,null):de(Bve,null,null)]})},EPe=e=>{const{expanded:t,expandable:n,onExpand:r,style:i,size:a}=e,o={onClick:n?()=>r(!t):void 0,class:e.class};return de(yn,sr(o,{size:a,style:i}),{default:()=>[de(ys,null,null)]})},APe="ElTableV2Grid",PPe=e=>{const t=le(),n=le(),r=X(()=>{const{data:b,rowHeight:C,estimatedRowHeight:T}=e;if(!T)return b.length*C}),i=X(()=>{const{fixedData:b,rowHeight:C}=e;return((b==null?void 0:b.length)||0)*C}),a=X(()=>LC(e.headerHeight)),o=X(()=>{const{height:b}=e;return Math.max(0,b-w(a)-w(i))}),s=X(()=>w(a)+w(i)>0),l=({data:b,rowIndex:C})=>b[C][e.rowKey];function c({rowCacheStart:b,rowCacheEnd:C,rowVisibleStart:T,rowVisibleEnd:E}){var A;(A=e.onRowsRendered)==null||A.call(e,{rowCacheStart:b,rowCacheEnd:C,rowVisibleStart:T,rowVisibleEnd:E})}function h(b,C){var T;(T=n.value)==null||T.resetAfterRowIndex(b,C)}function f(b,C){const T=w(t),E=w(n);nr(b)?(T==null||T.scrollToLeft(b.scrollLeft),E==null||E.scrollTo(b)):(T==null||T.scrollToLeft(b),E==null||E.scrollTo({scrollLeft:b,scrollTop:C}))}function p(b){var C;(C=w(n))==null||C.scrollTo({scrollTop:b})}function v(b,C){var T;(T=w(n))==null||T.scrollToItem(b,1,C)}function _(){var b,C;(b=w(n))==null||b.$forceUpdate(),(C=w(t))==null||C.$forceUpdate()}return{bodyRef:n,forceUpdate:_,fixedRowHeight:i,gridHeight:o,hasHeader:s,headerHeight:a,headerRef:t,totalHeight:r,itemKey:l,onItemRendered:c,resetAfterRowIndex:h,scrollTo:f,scrollToTop:p,scrollToRow:v}},Y5=Be({name:APe,props:DC,setup(e,{slots:t,expose:n}){const{ns:r}=un(W5),{bodyRef:i,fixedRowHeight:a,gridHeight:o,hasHeader:s,headerRef:l,headerHeight:c,totalHeight:h,forceUpdate:f,itemKey:p,onItemRendered:v,resetAfterRowIndex:_,scrollTo:b,scrollToTop:C,scrollToRow:T}=PPe(e);n({forceUpdate:f,totalHeight:h,scrollTo:b,scrollToTop:C,scrollToRow:T,resetAfterRowIndex:_});const E=()=>e.bodyWidth;return()=>{const{cache:A,columns:I,data:O,fixedData:B,useIsScrolling:N,scrollbarAlwaysOn:H,scrollbarEndGap:j,scrollbarStartGap:W,style:U,rowHeight:Y,bodyWidth:ie,estimatedRowHeight:ue,headerWidth:J,height:q,width:ce,getRowHeight:re,onScroll:ee}=e,oe=zn(ue),be=oe?Lke:Eke,we=w(c);return de("div",{role:"table",class:[r.e("table"),e.class],style:U},[de(be,{ref:i,data:O,useIsScrolling:N,itemKey:p,columnCache:0,columnWidth:oe?E:ie,totalColumn:1,totalRow:O.length,rowCache:A,rowHeight:oe?re:Y,width:ce,height:w(o),class:r.e("body"),role:"rowgroup",scrollbarStartGap:W,scrollbarEndGap:j,scrollbarAlwaysOn:H,onScroll:ee,onItemRendered:v,perfMode:!1},{default:pe=>{var Ce;const Ve=O[pe.rowIndex];return(Ce=t.row)==null?void 0:Ce.call(t,{...pe,columns:I,rowData:Ve})}}),w(s)&&de(SPe,{ref:l,class:r.e("header-wrapper"),columns:I,headerData:O,headerHeight:e.headerHeight,fixedHeaderData:B,rowWidth:J,rowHeight:Y,width:ce,height:Math.min(we+w(a),q)},{dynamic:t.header,fixed:t.row})])}}});function IPe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const LPe=(e,{slots:t})=>{const{mainTableRef:n,...r}=e;return de(Y5,sr({ref:n},r),IPe(t)?t:{default:()=>[t]})};function DPe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const RPe=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:n,...r}=e;return de(Y5,sr({ref:n},r),DPe(t)?t:{default:()=>[t]})};function OPe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const zPe=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:n,...r}=e;return de(Y5,sr({ref:n},r),OPe(t)?t:{default:()=>[t]})};function BPe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const FPe=(e,{slots:t})=>{const{columns:n,columnsStyles:r,depthMap:i,expandColumnKey:a,expandedRowKeys:o,estimatedRowHeight:s,hasFixedColumns:l,rowData:c,rowIndex:h,style:f,isScrolling:p,rowProps:v,rowClass:_,rowKey:b,rowEventHandlers:C,ns:T,onRowHovered:E,onRowExpanded:A}=e,I=im(_,{columns:n,rowData:c,rowIndex:h},""),O=im(v,{columns:n,rowData:c,rowIndex:h}),B=c[b],N=i[B]||0,H=!!a,j=h<0,W=[T.e("row"),I,{[T.e(`row-depth-${N}`)]:H&&h>=0,[T.is("expanded")]:H&&o.includes(B),[T.is("fixed")]:!N&&j,[T.is("customized")]:!!t.row}],U=l?E:void 0,Y={...O,columns:n,columnsStyles:r,class:W,depth:N,expandColumnKey:a,estimatedRowHeight:j?void 0:s,isScrolling:p,rowIndex:h,rowData:c,rowKey:B,rowEventHandlers:C,style:f};return de(MPe,sr(Y,{onRowExpand:A,onMouseenter:J=>{U==null||U({hovered:!0,rowKey:B,event:J,rowData:c,rowIndex:h})},onMouseleave:J=>{U==null||U({hovered:!1,rowKey:B,event:J,rowData:c,rowIndex:h})},rowkey:B}),BPe(t)?t:{default:()=>[t]})},HD=({columns:e,column:t,columnIndex:n,depth:r,expandIconProps:i,isScrolling:a,rowData:o,rowIndex:s,style:l,expandedRowKeys:c,ns:h,cellProps:f,expandColumnKey:p,indentSize:v,iconSize:_,rowKey:b},{slots:C})=>{const T=uf(l);if(t.placeholderSign===_w)return de("div",{class:h.em("row-cell","placeholder"),style:T},null);const{cellRenderer:E,dataKey:A,dataGetter:I}=t,O=Dn(I)?I({columns:e,column:t,columnIndex:n,rowData:o,rowIndex:s}):ha(o,A??""),B=im(f,{cellData:O,columns:e,column:t,columnIndex:n,rowIndex:s,rowData:o}),N={class:h.e("cell-text"),columns:e,column:t,columnIndex:n,cellData:O,isScrolling:a,rowData:o,rowIndex:s},H=EY(E),j=H?H(N):st(C,"default",N,()=>[de(q5,N,null)]),W=[h.e("row-cell"),t.class,t.align===yw.CENTER&&h.is("align-center"),t.align===yw.RIGHT&&h.is("align-right")],U=s>=0&&p&&t.key===p,Y=s>=0&&c.includes(o[b]);let ie;const ue=`margin-inline-start: ${r*v}px;`;return U&&(nr(i)?ie=de(EPe,sr(i,{class:[h.e("expand-icon"),h.is("expanded",Y)],size:_,expanded:Y,style:ue,expandable:!0}),null):ie=de("div",{style:[ue,`width: ${_}px; height: ${_}px;`].join(" ")},null)),de("div",sr({class:W,style:T},B,{role:"cell"}),[ie,j])};HD.inheritAttrs=!1;function NPe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const $Pe=({columns:e,columnsStyles:t,headerIndex:n,style:r,headerClass:i,headerProps:a,ns:o},{slots:s})=>{const l={columns:e,headerIndex:n},c=[o.e("header-row"),im(i,l,""),{[o.is("customized")]:!!s.header}],h={...im(a,l),columnsStyles:t,class:c,columns:e,headerIndex:n,style:r};return de(wPe,h,NPe(s)?s:{default:()=>[s]})},m$=(e,{slots:t})=>{const{column:n,ns:r,style:i,onColumnSorted:a}=e,o=uf(i);if(n.placeholderSign===_w)return de("div",{class:r.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:s,headerClass:l,sortable:c}=n,h={...e,class:r.e("header-cell-text")},f=EY(s),p=f?f(h):st(t,"default",h,()=>[de(Z5,h,null)]),{sortBy:v,sortState:_,headerCellProps:b}=e;let C,T;if(_){const I=_[n.key];C=!!VD[I],T=C?I:gw.ASC}else C=n.key===v.key,T=C?v.order:gw.ASC;const E=[r.e("header-cell"),im(l,e,""),n.align===yw.CENTER&&r.is("align-center"),n.align===yw.RIGHT&&r.is("align-right"),c&&r.is("sortable")],A={...im(b,e),onClick:n.sortable?a:void 0,class:E,style:o,"data-key":n.key};return de("div",sr(A,{role:"columnheader"}),[p,c&&de(kPe,{class:[r.e("sort-icon"),C&&r.is("sorting")],sortOrder:T},null)])},LY=(e,{slots:t})=>{var n;return de("div",{class:e.class,style:e.style},[(n=t.default)==null?void 0:n.call(t)])};LY.displayName="ElTableV2Footer";const DY=(e,{slots:t})=>{const n=st(t,"default",{},()=>[de(BZ,null,null)]);return de("div",{class:e.class,style:e.style},[n])};DY.displayName="ElTableV2Empty";const RY=(e,{slots:t})=>{var n;return de("div",{class:e.class,style:e.style},[(n=t.default)==null?void 0:n.call(t)])};RY.displayName="ElTableV2Overlay";function wb(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Oi(e)}const VPe="ElTableV2",HPe=Be({name:VPe,props:_Pe,setup(e,{slots:t,expose:n}){const r=Rt("table-v2"),{columnsStyles:i,fixedColumnsOnLeft:a,fixedColumnsOnRight:o,mainColumns:s,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:h,rightTableWidth:f,data:p,depthMap:v,expandedRowKeys:_,hasFixedColumns:b,mainTableRef:C,leftTableRef:T,rightTableRef:E,isDynamic:A,isResetting:I,isScrolling:O,bodyWidth:B,emptyStyle:N,rootStyle:H,headerWidth:j,footerHeight:W,showEmpty:U,scrollTo:Y,scrollToLeft:ie,scrollToTop:ue,scrollToRow:J,getRowHeight:q,onColumnSorted:ce,onRowHeightChange:re,onRowHovered:ee,onRowExpanded:oe,onRowsRendered:be,onScroll:we,onVerticalScroll:pe}=gPe(e);return n({scrollTo:Y,scrollToLeft:ie,scrollToTop:ue,scrollToRow:J}),pr(W5,{ns:r,isResetting:I,isScrolling:O}),()=>{const{cache:Ce,cellProps:Ve,estimatedRowHeight:et,expandColumnKey:Ee,fixedData:Je,headerHeight:Ue,headerClass:yt,headerProps:Ne,headerCellProps:dt,sortBy:Le,sortState:ze,rowHeight:ct,rowClass:Lt,rowEventHandlers:lt,rowKey:Ct,rowProps:_t,scrollbarAlwaysOn:It,indentSize:Bt,iconSize:Ft,useIsScrolling:cn,vScrollbarSize:Ot,width:kt}=e,fn=w(p),Rn={cache:Ce,class:r.e("main"),columns:w(s),data:fn,fixedData:Je,estimatedRowHeight:et,bodyWidth:w(B)+Ot,headerHeight:Ue,headerWidth:w(j),height:w(l),mainTableRef:C,rowKey:Ct,rowHeight:ct,scrollbarAlwaysOn:It,scrollbarStartGap:2,scrollbarEndGap:Ot,useIsScrolling:cn,width:kt,getRowHeight:q,onRowsRendered:be,onScroll:we},On=w(h),mt=w(c),Gt={cache:Ce,class:r.e("left"),columns:w(a),data:fn,estimatedRowHeight:et,leftTableRef:T,rowHeight:ct,bodyWidth:On,headerWidth:On,headerHeight:Ue,height:mt,rowKey:Ct,scrollbarAlwaysOn:It,scrollbarStartGap:2,scrollbarEndGap:Ot,useIsScrolling:cn,width:On,getRowHeight:q,onScroll:pe},xt=w(f)+Ot,Zt={cache:Ce,class:r.e("right"),columns:w(o),data:fn,estimatedRowHeight:et,rightTableRef:E,rowHeight:ct,bodyWidth:xt,headerWidth:xt,headerHeight:Ue,height:mt,rowKey:Ct,scrollbarAlwaysOn:It,scrollbarStartGap:2,scrollbarEndGap:Ot,width:xt,style:`--${w(r.namespace)}-table-scrollbar-size: ${Ot}px`,useIsScrolling:cn,getRowHeight:q,onScroll:pe},Ze=w(i),Fe={ns:r,depthMap:w(v),columnsStyles:Ze,expandColumnKey:Ee,expandedRowKeys:w(_),estimatedRowHeight:et,hasFixedColumns:w(b),rowProps:_t,rowClass:Lt,rowKey:Ct,rowEventHandlers:lt,onRowHovered:ee,onRowExpanded:oe,onRowHeightChange:re},ve={cellProps:Ve,expandColumnKey:Ee,indentSize:Bt,iconSize:Ft,rowKey:Ct,expandedRowKeys:w(_),ns:r},ke={ns:r,headerClass:yt,headerProps:Ne,columnsStyles:Ze},Oe={ns:r,sortBy:Le,sortState:ze,headerCellProps:dt,onColumnSorted:ce},Me={row:Mt=>de(FPe,sr(Mt,Fe),{row:t.row,cell:it=>{let Et;return t.cell?de(HD,sr(it,ve,{style:Ze[it.column.key]}),wb(Et=t.cell(it))?Et:{default:()=>[Et]}):de(HD,sr(it,ve,{style:Ze[it.column.key]}),null)}}),header:Mt=>de($Pe,sr(Mt,ke),{header:t.header,cell:it=>{let Et;return t["header-cell"]?de(m$,sr(it,Oe,{style:Ze[it.column.key]}),wb(Et=t["header-cell"](it))?Et:{default:()=>[Et]}):de(m$,sr(it,Oe,{style:Ze[it.column.key]}),null)}})},Ae=[e.class,r.b(),r.e("root"),{[r.is("dynamic")]:w(A)}],pt={class:r.e("footer"),style:w(W)};return de("div",{class:Ae,style:w(H)},[de(LPe,Rn,wb(Me)?Me:{default:()=>[Me]}),de(RPe,Gt,wb(Me)?Me:{default:()=>[Me]}),de(zPe,Zt,wb(Me)?Me:{default:()=>[Me]}),t.footer&&de(LY,pt,{default:t.footer}),w(U)&&de(DY,{class:r.e("empty"),style:w(N)},{default:t.empty}),t.overlay&&de(RY,{class:r.e("overlay")},{default:t.overlay})])}}}),jPe=Wt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Qe(Function)}}),UPe=Be({name:"ElAutoResizer",props:jPe,setup(e,{slots:t}){const n=Rt("auto-resizer"),{height:r,width:i,sizer:a}=mPe(e),o={width:"100%",height:"100%"};return()=>{var s;return de("div",{ref:a,class:n.b(),style:o},[(s=t.default)==null?void 0:s.call(t,{height:r.value,width:i.value})])}}}),WPe=Wn(HPe),GPe=Wn(UPe),vk=Symbol("tabsRootContextKey"),KPe=Wt({tabs:{type:Qe(Array),default:()=>ji([])}}),OY="ElTabBar",qPe=Be({name:OY}),ZPe=Be({...qPe,props:KPe,setup(e,{expose:t}){const n=e,r=er(),i=un(vk);i||Na(OY,"<el-tabs><el-tab-bar /></el-tabs>");const a=Rt("tabs"),o=le(),s=le(),l=()=>{let h=0,f=0;const p=["top","bottom"].includes(i.props.tabPosition)?"width":"height",v=p==="width"?"x":"y",_=v==="x"?"left":"top";return n.tabs.every(b=>{var C,T;const E=(T=(C=r.parent)==null?void 0:C.refs)==null?void 0:T[`tab-${b.uid}`];if(!E)return!1;if(!b.active)return!0;h=E[`offset${Bc(_)}`],f=E[`client${Bc(p)}`];const A=window.getComputedStyle(E);return p==="width"&&(f-=Number.parseFloat(A.paddingLeft)+Number.parseFloat(A.paddingRight),h+=Number.parseFloat(A.paddingLeft)),!1}),{[p]:`${f}px`,transform:`translate${Bc(v)}(${h}px)`}},c=()=>s.value=l();return At(()=>n.tabs,async()=>{await bn(),c()},{immediate:!0}),Hi(o,()=>c()),t({ref:o,update:c}),(h,f)=>(te(),me("div",{ref_key:"barRef",ref:o,class:se([w(a).e("active-bar"),w(a).is(w(i).props.tabPosition)]),style:_n(s.value)},null,6))}});var YPe=Kt(ZPe,[["__file","tab-bar.vue"]]);const XPe=Wt({panes:{type:Qe(Array),default:()=>ji([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),JPe={tabClick:(e,t,n)=>n instanceof Event,tabRemove:(e,t)=>t instanceof Event},g$="ElTabNav",QPe=Be({name:g$,props:XPe,emits:JPe,setup(e,{expose:t,emit:n}){const r=un(vk);r||Na(g$,"<el-tabs><tab-nav /></el-tabs>");const i=Rt("tabs"),a=qle(),o=oue(),s=le(),l=le(),c=le(),h=le(),f=le(!1),p=le(0),v=le(!1),_=le(!0),b=X(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),C=X(()=>({transform:`translate${b.value==="width"?"X":"Y"}(-${p.value}px)`})),T=()=>{if(!s.value)return;const H=s.value[`offset${Bc(b.value)}`],j=p.value;if(!j)return;const W=j>H?j-H:0;p.value=W},E=()=>{if(!s.value||!l.value)return;const H=l.value[`offset${Bc(b.value)}`],j=s.value[`offset${Bc(b.value)}`],W=p.value;if(H-W<=j)return;const U=H-W>j*2?W+j:H-j;p.value=U},A=async()=>{const H=l.value;if(!f.value||!c.value||!s.value||!H)return;await bn();const j=c.value.querySelector(".is-active");if(!j)return;const W=s.value,U=["top","bottom"].includes(r.props.tabPosition),Y=j.getBoundingClientRect(),ie=W.getBoundingClientRect(),ue=U?H.offsetWidth-ie.width:H.offsetHeight-ie.height,J=p.value;let q=J;U?(Y.left<ie.left&&(q=J-(ie.left-Y.left)),Y.right>ie.right&&(q=J+Y.right-ie.right)):(Y.top<ie.top&&(q=J-(ie.top-Y.top)),Y.bottom>ie.bottom&&(q=J+(Y.bottom-ie.bottom))),q=Math.max(q,0),p.value=Math.min(q,ue)},I=()=>{var H;if(!l.value||!s.value)return;e.stretch&&((H=h.value)==null||H.update());const j=l.value[`offset${Bc(b.value)}`],W=s.value[`offset${Bc(b.value)}`],U=p.value;W<j?(f.value=f.value||{},f.value.prev=U,f.value.next=U+W<j,j-U<W&&(p.value=j-W)):(f.value=!1,U>0&&(p.value=0))},O=H=>{const j=H.code,{up:W,down:U,left:Y,right:ie}=En;if(![W,U,Y,ie].includes(j))return;const ue=Array.from(H.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),J=ue.indexOf(H.target);let q;j===Y||j===W?J===0?q=ue.length-1:q=J-1:J<ue.length-1?q=J+1:q=0,ue[q].focus({preventScroll:!0}),ue[q].click(),B()},B=()=>{_.value&&(v.value=!0)},N=()=>v.value=!1;return At(a,H=>{H==="hidden"?_.value=!1:H==="visible"&&setTimeout(()=>_.value=!0,50)}),At(o,H=>{H?setTimeout(()=>_.value=!0,50):_.value=!1}),Hi(c,I),Un(()=>setTimeout(()=>A(),0)),nh(()=>I()),t({scrollToActiveTab:A,removeFocus:N}),()=>{const H=f.value?[de("span",{class:[i.e("nav-prev"),i.is("disabled",!f.value.prev)],onClick:T},[de(yn,null,{default:()=>[de(Rf,null,null)]})]),de("span",{class:[i.e("nav-next"),i.is("disabled",!f.value.next)],onClick:E},[de(yn,null,{default:()=>[de(ys,null,null)]})])]:null,j=e.panes.map((W,U)=>{var Y,ie,ue,J;const q=W.uid,ce=W.props.disabled,re=(ie=(Y=W.props.name)!=null?Y:W.index)!=null?ie:`${U}`,ee=!ce&&(W.isClosable||e.editable);W.index=`${U}`;const oe=ee?de(yn,{class:"is-icon-close",onClick:pe=>n("tabRemove",W,pe)},{default:()=>[de(Yu,null,null)]}):null,be=((J=(ue=W.slots).label)==null?void 0:J.call(ue))||W.props.label,we=!ce&&W.active?0:-1;return de("div",{ref:`tab-${q}`,class:[i.e("item"),i.is(r.props.tabPosition),i.is("active",W.active),i.is("disabled",ce),i.is("closable",ee),i.is("focus",v.value)],id:`tab-${re}`,key:`tab-${q}`,"aria-controls":`pane-${re}`,role:"tab","aria-selected":W.active,tabindex:we,onFocus:()=>B(),onBlur:()=>N(),onClick:pe=>{N(),n("tabClick",W,re,pe)},onKeydown:pe=>{ee&&(pe.code===En.delete||pe.code===En.backspace)&&n("tabRemove",W,pe)}},[be,oe])});return de("div",{ref:c,class:[i.e("nav-wrap"),i.is("scrollable",!!f.value),i.is(r.props.tabPosition)]},[H,de("div",{class:i.e("nav-scroll"),ref:s},[de("div",{class:[i.e("nav"),i.is(r.props.tabPosition),i.is("stretch",e.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:l,style:C.value,role:"tablist",onKeydown:O},[e.type?null:de(YPe,{ref:h,tabs:[...e.panes]},null),j])])])}}}),eIe=Wt({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Qe(Function),default:()=>!0},stretch:Boolean}),gP=e=>Ln(e)||zn(e),tIe={[tr]:e=>gP(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>gP(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>gP(e),tabAdd:()=>!0},nIe=Be({name:"ElTabs",props:eIe,emits:tIe,setup(e,{emit:t,slots:n,expose:r}){var i;const a=Rt("tabs"),o=X(()=>["left","right"].includes(e.tabPosition)),{children:s,addChild:l,removeChild:c}=p5(er(),"ElTabPane"),h=le(),f=le((i=e.modelValue)!=null?i:"0"),p=async(T,E=!1)=>{var A,I,O;if(!(f.value===T||aa(T)))try{await((A=e.beforeLeave)==null?void 0:A.call(e,T,f.value))!==!1&&(f.value=T,E&&(t(tr,T),t("tabChange",T)),(O=(I=h.value)==null?void 0:I.removeFocus)==null||O.call(I))}catch{}},v=(T,E,A)=>{T.props.disabled||(p(E,!0),t("tabClick",T,A))},_=(T,E)=>{T.props.disabled||aa(T.props.name)||(E.stopPropagation(),t("edit",T.props.name,"remove"),t("tabRemove",T.props.name))},b=()=>{t("edit",void 0,"add"),t("tabAdd")};At(()=>e.modelValue,T=>p(T)),At(f,async()=>{var T;await bn(),(T=h.value)==null||T.scrollToActiveTab()}),pr(vk,{props:e,currentName:f,registerPane:T=>{s.value.push(T)},sortPane:l,unregisterPane:c}),r({currentName:f});const C=({render:T})=>T();return()=>{const T=n["add-icon"],E=e.editable||e.addable?de("div",{class:[a.e("new-tab"),o.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:b,onKeydown:O=>{O.code===En.enter&&b()}},[T?st(n,"add-icon"):de(yn,{class:a.is("icon-plus")},{default:()=>[de(dK,null,null)]})]):null,A=de("div",{class:[a.e("header"),o.value&&a.e("header-vertical"),a.is(e.tabPosition)]},[de(C,{render:()=>{const O=s.value.some(B=>B.slots.label);return de(QPe,{ref:h,currentName:f.value,editable:e.editable,type:e.type,panes:s.value,stretch:e.stretch,onTabClick:v,onTabRemove:_},{$stable:!O})}},null),E]),I=de("div",{class:a.e("content")},[st(n,"default")]);return de("div",{class:[a.b(),a.m(e.tabPosition),{[a.m("card")]:e.type==="card",[a.m("border-card")]:e.type==="border-card"}]},[I,A])}}}),rIe=Wt({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),zY="ElTabPane",iIe=Be({name:zY}),aIe=Be({...iIe,props:rIe,setup(e){const t=e,n=er(),r=qa(),i=un(vk);i||Na(zY,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=Rt("tab-pane"),o=le(),s=X(()=>t.closable||i.props.closable),l=KN(()=>{var v;return i.currentName.value===((v=t.name)!=null?v:o.value)}),c=le(l.value),h=X(()=>{var v;return(v=t.name)!=null?v:o.value}),f=KN(()=>!t.lazy||c.value||l.value);At(l,v=>{v&&(c.value=!0)});const p=Ar({uid:n.uid,slots:r,props:t,paneName:h,active:l,index:o,isClosable:s});return i.registerPane(p),Un(()=>{i.sortPane(p)}),Wf(()=>{i.unregisterPane(p.uid)}),(v,_)=>w(f)?In((te(),me("div",{key:0,id:`pane-${w(h)}`,class:se(w(a).b()),role:"tabpanel","aria-hidden":!w(l),"aria-labelledby":`tab-${w(h)}`},[st(v.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Lr,w(l)]]):Ge("v-if",!0)}});var BY=Kt(aIe,[["__file","tab-pane.vue"]]);const oIe=Wn(nIe,{TabPane:BY}),sIe=Ki(BY),lIe=Wt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:id,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),uIe=Be({name:"ElText"}),cIe=Be({...uIe,props:lIe,setup(e){const t=e,n=Ea(),r=Rt("text"),i=X(()=>[r.b(),r.m(t.type),r.m(n.value),r.is("truncated",t.truncated),r.is("line-clamp",!aa(t.lineClamp))]);return(a,o)=>(te(),ft(ir(a.tag),{class:se(w(i)),style:_n({"-webkit-line-clamp":a.lineClamp})},{default:ge(()=>[st(a.$slots,"default")]),_:3},8,["class","style"]))}});var dIe=Kt(cIe,[["__file","text.vue"]]);const hIe=Wn(dIe),fIe=Wt({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Qe(String),default:"light"},clearable:{type:Boolean,default:!0},size:$a,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Qe([String,Object]),default:()=>cK},clearIcon:{type:Qe([String,Object]),default:()=>Kf},...A0}),$d=e=>{const t=(e||"").split(":");if(t.length>=2){let n=Number.parseInt(t[0],10);const r=Number.parseInt(t[1],10),i=e.toUpperCase();return i.includes("AM")&&n===12?n=0:i.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},yP=(e,t)=>{const n=$d(e);if(!n)return-1;const r=$d(t);if(!r)return-1;const i=n.minutes+n.hours*60,a=r.minutes+r.hours*60;return i===a?0:i>a?1:-1},y$=e=>`${e}`.padStart(2,"0"),Jg=e=>`${y$(e.hours)}:${y$(e.minutes)}`,pIe=(e,t)=>{const n=$d(e);if(!n)return"";const r=$d(t);if(!r)return"";const i={hours:n.hours,minutes:n.minutes};return i.minutes+=r.minutes,i.hours+=r.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,Jg(i)},vIe=Be({name:"ElTimeSelect"}),mIe=Be({...vIe,props:fIe,emits:["change","blur","focus","clear","update:modelValue"],setup(e,{expose:t}){const n=e;jn.extend(x5);const{Option:r}=rm,i=Rt("input"),a=le(),o=Ts(),{lang:s}=Sr(),l=X(()=>n.modelValue),c=X(()=>{const T=$d(n.start);return T?Jg(T):null}),h=X(()=>{const T=$d(n.end);return T?Jg(T):null}),f=X(()=>{const T=$d(n.step);return T?Jg(T):null}),p=X(()=>{const T=$d(n.minTime||"");return T?Jg(T):null}),v=X(()=>{const T=$d(n.maxTime||"");return T?Jg(T):null}),_=X(()=>{const T=[];if(n.start&&n.end&&n.step){let E=c.value,A;for(;E&&h.value&&yP(E,h.value)<=0;)A=jn(E,"HH:mm").locale(s.value).format(n.format),T.push({value:A,disabled:yP(E,p.value||"-1:-1")<=0||yP(E,v.value||"100:100")>=0}),E=pIe(E,f.value)}return T});return t({blur:()=>{var T,E;(E=(T=a.value)==null?void 0:T.blur)==null||E.call(T)},focus:()=>{var T,E;(E=(T=a.value)==null?void 0:T.focus)==null||E.call(T)}}),(T,E)=>(te(),ft(w(rm),{ref_key:"select",ref:a,"model-value":w(l),disabled:w(o),clearable:T.clearable,"clear-icon":T.clearIcon,size:T.size,effect:T.effect,placeholder:T.placeholder,"default-first-option":"",filterable:T.editable,"empty-values":T.emptyValues,"value-on-clear":T.valueOnClear,"onUpdate:modelValue":A=>T.$emit("update:modelValue",A),onChange:A=>T.$emit("change",A),onBlur:A=>T.$emit("blur",A),onFocus:A=>T.$emit("focus",A),onClear:()=>T.$emit("clear")},{prefix:ge(()=>[T.prefixIcon?(te(),ft(w(yn),{key:0,class:se(w(i).e("prefix-icon"))},{default:ge(()=>[(te(),ft(ir(T.prefixIcon)))]),_:1},8,["class"])):Ge("v-if",!0)]),default:ge(()=>[(te(!0),me(hn,null,Kn(w(_),A=>(te(),ft(w(r),{key:A.value,label:A.value,value:A.value,disabled:A.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var gIe=Kt(mIe,[["__file","time-select.vue"]]);const yIe=Wn(gIe),_Ie=Be({name:"ElTimeline",setup(e,{slots:t}){const n=Rt("timeline");return pr("timeline",t),()=>Mn("ul",{class:[n.b()]},[st(t,"default")])}}),bIe=Wt({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:si},hollow:Boolean}),wIe=Be({name:"ElTimelineItem"}),xIe=Be({...wIe,props:bIe,setup(e){const t=e,n=Rt("timeline-item"),r=X(()=>[n.e("node"),n.em("node",t.size||""),n.em("node",t.type||""),n.is("hollow",t.hollow)]);return(i,a)=>(te(),me("li",{class:se([w(n).b(),{[w(n).e("center")]:i.center}])},[V("div",{class:se(w(n).e("tail"))},null,2),i.$slots.dot?Ge("v-if",!0):(te(),me("div",{key:0,class:se(w(r)),style:_n({backgroundColor:i.color})},[i.icon?(te(),ft(w(yn),{key:0,class:se(w(n).e("icon"))},{default:ge(()=>[(te(),ft(ir(i.icon)))]),_:1},8,["class"])):Ge("v-if",!0)],6)),i.$slots.dot?(te(),me("div",{key:1,class:se(w(n).e("dot"))},[st(i.$slots,"dot")],2)):Ge("v-if",!0),V("div",{class:se(w(n).e("wrapper"))},[!i.hideTimestamp&&i.placement==="top"?(te(),me("div",{key:0,class:se([w(n).e("timestamp"),w(n).is("top")])},Xe(i.timestamp),3)):Ge("v-if",!0),V("div",{class:se(w(n).e("content"))},[st(i.$slots,"default")],2),!i.hideTimestamp&&i.placement==="bottom"?(te(),me("div",{key:1,class:se([w(n).e("timestamp"),w(n).is("bottom")])},Xe(i.timestamp),3)):Ge("v-if",!0)],2)],2))}});var FY=Kt(xIe,[["__file","timeline-item.vue"]]);const SIe=Wn(_Ie,{TimelineItem:FY}),CIe=Ki(FY),NY=Wt({nowrap:Boolean});var $Y=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))($Y||{});const TIe=Object.values($Y),X5=Wt({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Qe(Object),default:null}}),MIe=Wt({side:{type:Qe(String),values:TIe,required:!0}}),kIe=["absolute","fixed"],EIe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],J5=Wt({arrowPadding:{type:Qe(Number),default:5},effect:{type:Qe(String),default:"light"},contentClass:String,placement:{type:Qe(String),values:EIe,default:"bottom"},reference:{type:Qe(Object),default:null},offset:{type:Number,default:8},strategy:{type:Qe(String),values:kIe,default:"absolute"},showArrow:Boolean,...yo(["ariaLabel"])}),Q5=Wt({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Qe(Function)},"onUpdate:open":{type:Qe(Function)}}),Ag={type:Qe(Function)},ez=Wt({onBlur:Ag,onClick:Ag,onFocus:Ag,onMouseDown:Ag,onMouseEnter:Ag,onMouseLeave:Ag}),AIe=Wt({...Q5,...X5,...ez,...J5,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Qe(Object),default:null},teleported:Boolean,to:{type:Qe(String),default:"body"}}),mk=Symbol("tooltipV2"),VY=Symbol("tooltipV2Content"),_P="tooltip_v2.open",PIe=Be({name:"ElTooltipV2Root"}),IIe=Be({...PIe,props:Q5,setup(e,{expose:t}){const n=e,r=le(n.defaultOpen),i=le(null),a=X({get:()=>Jv(n.open)?r.value:n.open,set:C=>{var T;r.value=C,(T=n["onUpdate:open"])==null||T.call(n,C)}}),o=X(()=>zn(n.delayDuration)&&n.delayDuration>0),{start:s,stop:l}=Yv(()=>{a.value=!0},X(()=>n.delayDuration),{immediate:!1}),c=Rt("tooltip-v2"),h=mo(),f=()=>{l(),a.value=!0},p=()=>{w(o)?s():f()},v=f,_=()=>{l(),a.value=!1};return At(a,C=>{var T;C&&(document.dispatchEvent(new CustomEvent(_P)),v()),(T=n.onOpenChange)==null||T.call(n,C)}),Un(()=>{document.addEventListener(_P,_)}),ui(()=>{l(),document.removeEventListener(_P,_)}),pr(mk,{contentId:h,triggerRef:i,ns:c,onClose:_,onDelayOpen:p,onOpen:v}),t({onOpen:v,onClose:_}),(C,T)=>st(C.$slots,"default",{open:w(a)})}});var LIe=Kt(IIe,[["__file","root.vue"]]);const DIe=Be({name:"ElTooltipV2Arrow"}),RIe=Be({...DIe,props:{...X5,...MIe},setup(e){const t=e,{ns:n}=un(mk),{arrowRef:r}=un(VY),i=X(()=>{const{style:a,width:o,height:s}=t,l=n.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${o}px`,[`--${l}-tooltip-v2-arrow-height`]:`${s}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:o/2-1,...a||{}}});return(a,o)=>(te(),me("span",{ref_key:"arrowRef",ref:r,style:_n(w(i)),class:se(w(n).e("arrow"))},null,6))}});var _$=Kt(RIe,[["__file","arrow.vue"]]);const OIe=Wt({style:{type:Qe([String,Object,Array]),default:()=>({})}}),zIe=Be({name:"ElVisuallyHidden"}),BIe=Be({...zIe,props:OIe,setup(e){const t=e,n=X(()=>[t.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,i)=>(te(),me("span",sr(r.$attrs,{style:w(n)}),[st(r.$slots,"default")],16))}});var FIe=Kt(BIe,[["__file","visual-hidden.vue"]]);const NIe=Be({name:"ElTooltipV2Content"}),$Ie=Be({...NIe,props:{...J5,...NY},setup(e){const t=e,{triggerRef:n,contentId:r}=un(mk),i=le(t.placement),a=le(t.strategy),o=le(null),{referenceRef:s,contentRef:l,middlewareData:c,x:h,y:f,update:p}=lye({placement:i,strategy:a,middleware:X(()=>{const A=[GK(t.offset)];return t.showArrow&&A.push(uye({arrowRef:o})),A})}),v=k0().nextZIndex(),_=Rt("tooltip-v2"),b=X(()=>i.value.split("-")[0]),C=X(()=>({position:w(a),top:`${w(f)||0}px`,left:`${w(h)||0}px`,zIndex:v})),T=X(()=>{if(!t.showArrow)return{};const{arrow:A}=w(c);return{[`--${_.namespace.value}-tooltip-v2-arrow-x`]:`${A==null?void 0:A.x}px`||"",[`--${_.namespace.value}-tooltip-v2-arrow-y`]:`${A==null?void 0:A.y}px`||""}}),E=X(()=>[_.e("content"),_.is("dark",t.effect==="dark"),_.is(w(a)),t.contentClass]);return At(o,()=>p()),At(()=>t.placement,A=>i.value=A),Un(()=>{At(()=>t.reference||n.value,A=>{s.value=A||void 0},{immediate:!0})}),pr(VY,{arrowRef:o}),(A,I)=>(te(),me("div",{ref_key:"contentRef",ref:l,style:_n(w(C)),"data-tooltip-v2-root":""},[A.nowrap?Ge("v-if",!0):(te(),me("div",{key:0,"data-side":w(b),class:se(w(E))},[st(A.$slots,"default",{contentStyle:w(C),contentClass:w(E)}),de(w(FIe),{id:w(r),role:"tooltip"},{default:ge(()=>[A.ariaLabel?(te(),me(hn,{key:0},[$t(Xe(A.ariaLabel),1)],64)):st(A.$slots,"default",{key:1})]),_:3},8,["id"]),st(A.$slots,"arrow",{style:_n(w(T)),side:w(b)})],10,["data-side"]))],4))}});var b$=Kt($Ie,[["__file","content.vue"]]);const VIe=Wt({setRef:{type:Qe(Function),required:!0},onlyChild:Boolean});var HIe=Be({props:VIe,setup(e,{slots:t}){const n=le(),r=ek(n,i=>{i?e.setRef(i.nextElementSibling):e.setRef(null)});return()=>{var i;const[a]=((i=t.default)==null?void 0:i.call(t))||[],o=e.onlyChild?nme(a.children):a.children;return de(hn,{ref:r},[o])}}});const jIe=Be({name:"ElTooltipV2Trigger"}),UIe=Be({...jIe,props:{...NY,...ez},setup(e){const t=e,{onClose:n,onOpen:r,onDelayOpen:i,triggerRef:a,contentId:o}=un(mk);let s=!1;const l=E=>{a.value=E},c=()=>{s=!1},h=ia(t.onMouseEnter,i),f=ia(t.onMouseLeave,n),p=ia(t.onMouseDown,()=>{n(),s=!0,document.addEventListener("mouseup",c,{once:!0})}),v=ia(t.onFocus,()=>{s||r()}),_=ia(t.onBlur,n),b=ia(t.onClick,E=>{E.detail===0&&n()}),C={blur:_,click:b,focus:v,mousedown:p,mouseenter:h,mouseleave:f},T=(E,A,I)=>{E&&Object.entries(A).forEach(([O,B])=>{E[I](O,B)})};return At(a,(E,A)=>{T(E,C,"addEventListener"),T(A,C,"removeEventListener"),E&&E.setAttribute("aria-describedby",o.value)}),ui(()=>{T(a.value,C,"removeEventListener"),document.removeEventListener("mouseup",c)}),(E,A)=>E.nowrap?(te(),ft(w(HIe),{key:0,"set-ref":l,"only-child":""},{default:ge(()=>[st(E.$slots,"default")]),_:3})):(te(),me("button",sr({key:1,ref_key:"triggerRef",ref:a},E.$attrs),[st(E.$slots,"default")],16))}});var WIe=Kt(UIe,[["__file","trigger.vue"]]);const GIe=Be({name:"ElTooltipV2"}),KIe=Be({...GIe,props:AIe,setup(e){const n=ao(e),r=Ar(Nu(n,Object.keys(X5))),i=Ar(Nu(n,Object.keys(J5))),a=Ar(Nu(n,Object.keys(Q5))),o=Ar(Nu(n,Object.keys(ez)));return(s,l)=>(te(),ft(LIe,Bu(Pf(a)),{default:ge(({open:c})=>[de(WIe,sr(o,{nowrap:""}),{default:ge(()=>[st(s.$slots,"trigger")]),_:3},16),de(w(P0),{to:s.to,disabled:!s.teleported},{default:ge(()=>[s.fullTransition?(te(),ft(Ka,Bu(sr({key:0},s.transitionProps)),{default:ge(()=>[s.alwaysOn||c?(te(),ft(b$,Bu(sr({key:0},i)),{arrow:ge(({style:h,side:f})=>[s.showArrow?(te(),ft(_$,sr({key:0},r,{style:h,side:f}),null,16,["style","side"])):Ge("v-if",!0)]),default:ge(()=>[st(s.$slots,"default")]),_:3},16)):Ge("v-if",!0)]),_:2},1040)):(te(),me(hn,{key:1},[s.alwaysOn||c?(te(),ft(b$,Bu(sr({key:0},i)),{arrow:ge(({style:h,side:f})=>[s.showArrow?(te(),ft(_$,sr({key:0},r,{style:h,side:f}),null,16,["style","side"])):Ge("v-if",!0)]),default:ge(()=>[st(s.$slots,"default")]),_:3},16)):Ge("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var qIe=Kt(KIe,[["__file","tooltip.vue"]]);const ZIe=Wn(qIe),HY="left-check-change",jY="right-check-change",Qg=Wt({data:{type:Qe(Array),default:()=>[]},titles:{type:Qe(Array),default:()=>[]},buttonTexts:{type:Qe(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Qe(Function)},leftDefaultChecked:{type:Qe(Array),default:()=>[]},rightDefaultChecked:{type:Qe(Array),default:()=>[]},renderContent:{type:Qe(Function)},modelValue:{type:Qe(Array),default:()=>[]},format:{type:Qe(Object),default:()=>({})},filterable:Boolean,props:{type:Qe(Object),default:()=>ji({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),jD=(e,t)=>[e,t].every(sn)||sn(e)&&ro(t),YIe={[ki]:(e,t,n)=>[e,n].every(sn)&&["left","right"].includes(t),[tr]:e=>sn(e),[HY]:jD,[jY]:jD},UD="checked-change",XIe=Wt({data:Qg.data,optionRender:{type:Qe(Function)},placeholder:String,title:String,filterable:Boolean,format:Qg.format,filterMethod:Qg.filterMethod,defaultChecked:Qg.leftDefaultChecked,props:Qg.props}),JIe={[UD]:jD},px=e=>{const t={label:"label",key:"key",disabled:"disabled"};return X(()=>({...t,...e.props}))},QIe=(e,t,n)=>{const r=px(e),i=X(()=>e.data.filter(h=>Dn(e.filterMethod)?e.filterMethod(t.query,h):String(h[r.value.label]||h[r.value.key]).toLowerCase().includes(t.query.toLowerCase()))),a=X(()=>i.value.filter(h=>!h[r.value.disabled])),o=X(()=>{const h=t.checked.length,f=e.data.length,{noChecked:p,hasChecked:v}=e.format;return p&&v?h>0?v.replace(/\${checked}/g,h.toString()).replace(/\${total}/g,f.toString()):p.replace(/\${total}/g,f.toString()):`${h}/${f}`}),s=X(()=>{const h=t.checked.length;return h>0&&h<a.value.length}),l=()=>{const h=a.value.map(f=>f[r.value.key]);t.allChecked=h.length>0&&h.every(f=>t.checked.includes(f))},c=h=>{t.checked=h?a.value.map(f=>f[r.value.key]):[]};return At(()=>t.checked,(h,f)=>{if(l(),t.checkChangeByUser){const p=h.concat(f).filter(v=>!h.includes(v)||!f.includes(v));n(UD,h,p)}else n(UD,h),t.checkChangeByUser=!0}),At(a,()=>{l()}),At(()=>e.data,()=>{const h=[],f=i.value.map(p=>p[r.value.key]);t.checked.forEach(p=>{f.includes(p)&&h.push(p)}),t.checkChangeByUser=!1,t.checked=h}),At(()=>e.defaultChecked,(h,f)=>{if(f&&h.length===f.length&&h.every(_=>f.includes(_)))return;const p=[],v=a.value.map(_=>_[r.value.key]);h.forEach(_=>{v.includes(_)&&p.push(_)}),t.checkChangeByUser=!1,t.checked=p},{immediate:!0}),{filteredData:i,checkableData:a,checkedSummary:o,isIndeterminate:s,updateAllChecked:l,handleAllCheckedChange:c}},eLe=(e,t)=>({onSourceCheckedChange:(i,a)=>{e.leftChecked=i,a&&t(HY,i,a)},onTargetCheckedChange:(i,a)=>{e.rightChecked=i,a&&t(jY,i,a)}}),tLe=e=>{const t=px(e),n=X(()=>e.data.reduce((a,o)=>(a[o[t.value.key]]=o)&&a,{})),r=X(()=>e.data.filter(a=>!e.modelValue.includes(a[t.value.key]))),i=X(()=>e.targetOrder==="original"?e.data.filter(a=>e.modelValue.includes(a[t.value.key])):e.modelValue.reduce((a,o)=>{const s=n.value[o];return s&&a.push(s),a},[]));return{sourceData:r,targetData:i}},nLe=(e,t,n)=>{const r=px(e),i=(s,l,c)=>{n(tr,s),n(ki,s,l,c)};return{addToLeft:()=>{const s=e.modelValue.slice();t.rightChecked.forEach(l=>{const c=s.indexOf(l);c>-1&&s.splice(c,1)}),i(s,"left",t.rightChecked)},addToRight:()=>{let s=e.modelValue.slice();const l=e.data.filter(c=>{const h=c[r.value.key];return t.leftChecked.includes(h)&&!e.modelValue.includes(h)}).map(c=>c[r.value.key]);s=e.targetOrder==="unshift"?l.concat(s):s.concat(l),e.targetOrder==="original"&&(s=e.data.filter(c=>s.includes(c[r.value.key])).map(c=>c[r.value.key])),i(s,"right",t.leftChecked)}}},rLe=Be({name:"ElTransferPanel"}),iLe=Be({...rLe,props:XIe,emits:JIe,setup(e,{expose:t,emit:n}){const r=e,i=qa(),a=({option:A})=>A,{t:o}=Sr(),s=Rt("transfer"),l=Ar({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=px(r),{filteredData:h,checkedSummary:f,isIndeterminate:p,handleAllCheckedChange:v}=QIe(r,l,n),_=X(()=>!Ul(l.query)&&Ul(h.value)),b=X(()=>!Ul(i.default()[0].children)),{checked:C,allChecked:T,query:E}=ao(l);return t({query:E}),(A,I)=>(te(),me("div",{class:se(w(s).b("panel"))},[V("p",{class:se(w(s).be("panel","header"))},[de(w(iu),{modelValue:w(T),"onUpdate:modelValue":O=>li(T)?T.value=O:null,indeterminate:w(p),"validate-event":!1,onChange:w(v)},{default:ge(()=>[$t(Xe(A.title)+" ",1),V("span",null,Xe(w(f)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),V("div",{class:se([w(s).be("panel","body"),w(s).is("with-footer",w(b))])},[A.filterable?(te(),ft(w(Zo),{key:0,modelValue:w(E),"onUpdate:modelValue":O=>li(E)?E.value=O:null,class:se(w(s).be("panel","filter")),size:"default",placeholder:A.placeholder,"prefix-icon":w(Ove),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):Ge("v-if",!0),In(de(w(Zq),{modelValue:w(C),"onUpdate:modelValue":O=>li(C)?C.value=O:null,"validate-event":!1,class:se([w(s).is("filterable",A.filterable),w(s).be("panel","list")])},{default:ge(()=>[(te(!0),me(hn,null,Kn(w(h),O=>(te(),ft(w(iu),{key:O[w(c).key],class:se(w(s).be("panel","item")),value:O[w(c).key],disabled:O[w(c).disabled],"validate-event":!1},{default:ge(()=>{var B;return[de(a,{option:(B=A.optionRender)==null?void 0:B.call(A,O)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Lr,!w(_)&&!w(Ul)(A.data)]]),In(V("p",{class:se(w(s).be("panel","empty"))},Xe(w(_)?w(o)("el.transfer.noMatch"):w(o)("el.transfer.noData")),3),[[Lr,w(_)||w(Ul)(A.data)]])],2),w(b)?(te(),me("p",{key:0,class:se(w(s).be("panel","footer"))},[st(A.$slots,"default")],2)):Ge("v-if",!0)],2))}});var w$=Kt(iLe,[["__file","transfer-panel.vue"]]);const aLe=Be({name:"ElTransfer"}),oLe=Be({...aLe,props:Qg,emits:YIe,setup(e,{expose:t,emit:n}){const r=e,i=qa(),{t:a}=Sr(),o=Rt("transfer"),{formItem:s}=es(),l=Ar({leftChecked:[],rightChecked:[]}),c=px(r),{sourceData:h,targetData:f}=tLe(r),{onSourceCheckedChange:p,onTargetCheckedChange:v}=eLe(l,n),{addToLeft:_,addToRight:b}=nLe(r,l,n),C=le(),T=le(),E=H=>{switch(H){case"left":C.value.query="";break;case"right":T.value.query="";break}},A=X(()=>r.buttonTexts.length===2),I=X(()=>r.titles[0]||a("el.transfer.titles.0")),O=X(()=>r.titles[1]||a("el.transfer.titles.1")),B=X(()=>r.filterPlaceholder||a("el.transfer.filterPlaceholder"));At(()=>r.modelValue,()=>{var H;r.validateEvent&&((H=s==null?void 0:s.validate)==null||H.call(s,"change").catch(j=>void 0))});const N=X(()=>H=>r.renderContent?r.renderContent(Mn,H):i.default?i.default({option:H}):Mn("span",H[c.value.label]||H[c.value.key]));return t({clearQuery:E,leftPanel:C,rightPanel:T}),(H,j)=>(te(),me("div",{class:se(w(o).b())},[de(w$,{ref_key:"leftPanel",ref:C,data:w(h),"option-render":w(N),placeholder:w(B),title:w(I),filterable:H.filterable,format:H.format,"filter-method":H.filterMethod,"default-checked":H.leftDefaultChecked,props:r.props,onCheckedChange:w(p)},{default:ge(()=>[st(H.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),V("div",{class:se(w(o).e("buttons"))},[de(w(io),{type:"primary",class:se([w(o).e("button"),w(o).is("with-texts",w(A))]),disabled:w(Ul)(l.rightChecked),onClick:w(_)},{default:ge(()=>[de(w(yn),null,{default:ge(()=>[de(w(Rf))]),_:1}),w(aa)(H.buttonTexts[0])?Ge("v-if",!0):(te(),me("span",{key:0},Xe(H.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),de(w(io),{type:"primary",class:se([w(o).e("button"),w(o).is("with-texts",w(A))]),disabled:w(Ul)(l.leftChecked),onClick:w(b)},{default:ge(()=>[w(aa)(H.buttonTexts[1])?Ge("v-if",!0):(te(),me("span",{key:0},Xe(H.buttonTexts[1]),1)),de(w(yn),null,{default:ge(()=>[de(w(ys))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),de(w$,{ref_key:"rightPanel",ref:T,data:w(f),"option-render":w(N),placeholder:w(B),filterable:H.filterable,format:H.format,"filter-method":H.filterMethod,title:w(O),"default-checked":H.rightDefaultChecked,props:r.props,onCheckedChange:w(v)},{default:ge(()=>[st(H.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var sLe=Kt(oLe,[["__file","transfer.vue"]]);const lLe=Wn(sLe),My="$treeNodeId",x$=function(e,t){!t||t[My]||Object.defineProperty(t,My,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},tz=function(e,t){return e?t[e]:t[My]},WD=(e,t,n)=>{const r=e.value.currentNode;n();const i=e.value.currentNode;r!==i&&t("current-change",i?i.data:null,i)},GD=e=>{let t=!0,n=!0,r=!0;for(let i=0,a=e.length;i<a;i++){const o=e[i];(o.checked!==!0||o.indeterminate)&&(t=!1,o.disabled||(r=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:r,half:!t&&!n}},Xb=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:n,half:r}=GD(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):r?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const i=e.parent;!i||i.level===0||e.store.checkStrictly||Xb(i)},p2=function(e,t){const n=e.store.props,r=e.data||{},i=n[t];if(typeof i=="function")return i(r,e);if(typeof i=="string")return r[i];if(typeof i>"u"){const a=r[t];return a===void 0?"":a}};let uLe=0,KD=class RC{constructor(t){this.id=uLe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)Er(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf<"u"){const a=p2(this,"isLeaf");typeof a=="boolean"&&(this.isLeafByUser=a)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Array.isArray(this.data)||x$(this,this.data),!this.data)return;const r=t.defaultExpandedKeys,i=t.key;i&&r&&r.includes(this.key)&&this.expand(null,t.autoExpandParent),i&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||x$(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=p2(this,"children")||[];for(let r=0,i=n.length;r<i;r++)this.insertChild({data:n[r]})}get label(){return p2(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return p2(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(r=>r===t||n&&r.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,r){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof RC)){if(!r){const i=this.getChildren(!0);i.includes(t.data)||(typeof n>"u"||n<0?i.push(t.data):i.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Ar(new RC(t)),t instanceof RC&&t.initialize()}t.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let r;n&&(r=this.childNodes.indexOf(n)),this.insertChild(t,r)}insertAfter(t,n){let r;n&&(r=this.childNodes.indexOf(n),r!==-1&&(r+=1)),this.insertChild(t,r)}removeChild(t){const n=this.getChildren()||[],r=n.indexOf(t.data);r>-1&&n.splice(r,1);const i=this.childNodes.indexOf(t);i>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===t){n=this.childNodes[r];break}n&&this.removeChild(n)}expand(t,n){const r=()=>{if(n){let i=this.parent;for(;i.level>0;)i.expanded=!0,i=i.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(i=>{i.canFocus=!0})};this.shouldLoadData()?this.loadData(i=>{Array.isArray(i)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Xb(this),r())}):r()}doCreateChildren(t,n={}){t.forEach(r=>{this.insertChild(Object.assign({data:r},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,r,i){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:s}=GD(this.childNodes);!this.isLeaf&&!o&&s&&(this.checked=!1,t=!1);const l=()=>{if(n){const c=this.childNodes;for(let p=0,v=c.length;p<v;p++){const _=c[p];i=i||t!==!1;const b=_.disabled?_.checked:i;_.setChecked(b,n,!0,i)}const{half:h,all:f}=GD(c);f||(this.checked=f,this.indeterminate=h)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Xb(this)},{checked:t!==!1});return}else l()}const a=this.parent;!a||a.level===0||r||Xb(a)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const r=this.store.props;let i="children";return r&&(i=r.children||"children"),n[i]===void 0&&(n[i]=null),t&&!n[i]&&(n[i]=[]),n[i]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(a=>a.data),r={},i=[];t.forEach((a,o)=>{const s=a[My];!!s&&n.findIndex(c=>c[My]===s)>=0?r[s]={index:o,data:a}:i.push({index:o,data:a})}),this.store.lazy||n.forEach(a=>{r[a[My]]||this.removeChildByData(a)}),i.forEach(({index:a,data:o})=>{this.insertChild({data:o},a)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const r=a=>{this.childNodes=[],this.doCreateChildren(a,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},i=()=>{this.loading=!1};this.store.load(this,r,i)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const r=n.shift();n.unshift(...r.childNodes),t(r)}}reInitChecked(){this.store.checkStrictly||Xb(this)}};class cLe{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)Er(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new KD({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,r=this.lazy,i=function(a){const o=a.root?a.root.childNodes:a.childNodes;if(o.forEach(s=>{s.visible=n.call(s,t,s.data,s),i(s)}),!a.visible&&o.length){let s=!0;s=!o.some(l=>l.visible),a.root?a.root.visible=s===!1:a.visible=s===!1}t&&a.visible&&!a.isLeaf&&(!r||a.loaded)&&a.expand()};i(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof KD)return t;const n=nr(t)?tz(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){const r=this.getNode(n);r.parent.insertBefore({data:t},r)}insertAfter(t,n){const r=this.getNode(n);r.parent.insertAfter({data:t},r)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const r=Jv(n)?this.root:this.getNode(n);r&&r.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(r=>{const i=n[r];i&&i.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const r=[],i=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(s=>{(s.checked||n&&s.indeterminate)&&(!t||t&&s.isLeaf)&&r.push(s.data),i(s)})};return i(this),r}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),n(a)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const r in n)Er(n,r)&&t.push(n[r]);return t}updateChildren(t,n){const r=this.nodesMap[t];if(!r)return;const i=r.childNodes;for(let a=i.length-1;a>=0;a--){const o=i[a];this.remove(o.data)}for(let a=0,o=n.length;a<o;a++){const s=n[a];this.append(s,r.data)}}_setCheckedKeys(t,n=!1,r){const i=this._getAllNodes().sort((l,c)=>l.level-c.level),a=Object.create(null),o=Object.keys(r);i.forEach(l=>l.setChecked(!1,!1));const s=l=>{l.childNodes.forEach(c=>{var h;a[c.data[t]]=!0,(h=c.childNodes)!=null&&h.length&&s(c)})};for(let l=0,c=i.length;l<c;l++){const h=i[l],f=h.data[t].toString();if(!o.includes(f)){h.checked&&!a[f]&&h.setChecked(!1,!1);continue}if(h.childNodes.length&&s(h),h.isLeaf||this.checkStrictly){h.setChecked(!0,!1);continue}if(h.setChecked(!0,!0),n){h.setChecked(!1,!1);const v=function(_){_.childNodes.forEach(C=>{C.isLeaf||C.setChecked(!1,!1),v(C)})};v(h)}}}setCheckedNodes(t,n=!1){const r=this.key,i={};t.forEach(a=>{i[(a||{})[r]]=!0}),this._setCheckedKeys(r,n,i)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const r=this.key,i={};t.forEach(a=>{i[a]=!0}),this._setCheckedKeys(r,n,i)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const r=this.getNode(n);r&&r.expand(null,this.autoExpandParent)})}setChecked(t,n,r){const i=this.getNode(t);i&&i.setChecked(!!n,r)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const r=t[this.key],i=this.nodesMap[r];this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(t);r&&(this.setCurrentNode(r),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const dLe=Be({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Rt("tree"),n=un("NodeInstance"),r=un("RootTree");return()=>{const i=e.node,{data:a,store:o}=i;return e.renderContent?e.renderContent(Mn,{_self:n,node:i,data:a,store:o}):st(r.ctx.slots,"default",{node:i,data:a},()=>[Mn("span",{class:t.be("node","label")},[i.label])])}}});var hLe=Kt(dLe,[["__file","tree-node-content.vue"]]);function UY(e){const t=un("TreeNodeMap",null),n={treeNodeExpand:r=>{e.node!==r&&e.node.collapse()},children:[]};return t&&t.children.push(n),pr("TreeNodeMap",n),{broadcastExpanded:r=>{if(e.accordion)for(const i of n.children)i.treeNodeExpand(r)}}}const WY=Symbol("dragEvents");function fLe({props:e,ctx:t,el$:n,dropIndicator$:r,store:i}){const a=Rt("tree"),o=le({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return pr(WY,{treeNodeDragStart:({event:h,treeNode:f})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(f.node))return h.preventDefault(),!1;h.dataTransfer.effectAllowed="move";try{h.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=f,t.emit("node-drag-start",f.node,h)},treeNodeDragOver:({event:h,treeNode:f})=>{const p=f,v=o.value.dropNode;v&&v.node.id!==p.node.id&&Xo(v.$el,a.is("drop-inner"));const _=o.value.draggingNode;if(!_||!p)return;let b=!0,C=!0,T=!0,E=!0;typeof e.allowDrop=="function"&&(b=e.allowDrop(_.node,p.node,"prev"),E=C=e.allowDrop(_.node,p.node,"inner"),T=e.allowDrop(_.node,p.node,"next")),h.dataTransfer.dropEffect=C||b||T?"move":"none",(b||C||T)&&(v==null?void 0:v.node.id)!==p.node.id&&(v&&t.emit("node-drag-leave",_.node,v.node,h),t.emit("node-drag-enter",_.node,p.node,h)),b||C||T?o.value.dropNode=p:o.value.dropNode=null,p.node.nextSibling===_.node&&(T=!1),p.node.previousSibling===_.node&&(b=!1),p.node.contains(_.node,!1)&&(C=!1),(_.node===p.node||_.node.contains(p.node))&&(b=!1,C=!1,T=!1);const A=p.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),I=n.value.getBoundingClientRect();let O;const B=b?C?.25:T?.45:1:-1,N=T?C?.75:b?.55:0:1;let H=-9999;const j=h.clientY-A.top;j<A.height*B?O="before":j>A.height*N?O="after":C?O="inner":O="none";const W=p.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),U=r.value;O==="before"?H=W.top-I.top:O==="after"&&(H=W.bottom-I.top),U.style.top=`${H}px`,U.style.left=`${W.right-I.left}px`,O==="inner"?Kl(p.$el,a.is("drop-inner")):Xo(p.$el,a.is("drop-inner")),o.value.showDropIndicator=O==="before"||O==="after",o.value.allowDrop=o.value.showDropIndicator||E,o.value.dropType=O,t.emit("node-drag-over",_.node,p.node,h)},treeNodeDragEnd:h=>{const{draggingNode:f,dropType:p,dropNode:v}=o.value;if(h.preventDefault(),h.dataTransfer&&(h.dataTransfer.dropEffect="move"),f&&v){const _={data:f.node.data};p!=="none"&&f.node.remove(),p==="before"?v.node.parent.insertBefore(_,v.node):p==="after"?v.node.parent.insertAfter(_,v.node):p==="inner"&&v.node.insertChild(_),p!=="none"&&(i.value.registerNode(_),i.value.key&&f.node.eachNode(b=>{var C;(C=i.value.nodesMap[b.data[i.value.key]])==null||C.setChecked(b.checked,!i.value.checkStrictly)})),Xo(v.$el,a.is("drop-inner")),t.emit("node-drag-end",f.node,v.node,p,h),p!=="none"&&t.emit("node-drop",f.node,v.node,p,h)}f&&!v&&t.emit("node-drag-end",f.node,null,p,h),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const pLe=Be({name:"ElTreeNode",components:{ElCollapseTransition:ck,ElCheckbox:iu,NodeContent:hLe,ElIcon:yn,Loading:Yc},props:{node:{type:KD,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=Rt("tree"),{broadcastExpanded:r}=UY(e),i=un("RootTree"),a=le(!1),o=le(!1),s=le(null),l=le(null),c=le(null),h=un(WY),f=er();pr("NodeInstance",f),e.node.expanded&&(a.value=!0,o.value=!0);const p=i.props.props.children||"children";At(()=>{const j=e.node.data[p];return j&&[...j]},()=>{e.node.updateChildren()}),At(()=>e.node.indeterminate,j=>{b(e.node.checked,j)}),At(()=>e.node.checked,j=>{b(j,e.node.indeterminate)}),At(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),At(()=>e.node.expanded,j=>{bn(()=>a.value=j),j&&(o.value=!0)});const v=j=>tz(i.props.nodeKey,j.data),_=j=>{const W=e.props.class;if(!W)return{};let U;if(Dn(W)){const{data:Y}=j;U=W(Y,j)}else U=W;return Ln(U)?{[U]:!0}:U},b=(j,W)=>{(s.value!==j||l.value!==W)&&i.ctx.emit("check-change",e.node.data,j,W),s.value=j,l.value=W},C=j=>{WD(i.store,i.ctx.emit,()=>i.store.value.setCurrentNode(e.node)),i.currentNode.value=e.node,i.props.expandOnClickNode&&E(),i.props.checkOnClickNode&&!e.node.disabled&&A(null,{target:{checked:!e.node.checked}}),i.ctx.emit("node-click",e.node.data,e.node,f,j)},T=j=>{i.instance.vnode.props.onNodeContextmenu&&(j.stopPropagation(),j.preventDefault()),i.ctx.emit("node-contextmenu",j,e.node.data,e.node,f)},E=()=>{e.node.isLeaf||(a.value?(i.ctx.emit("node-collapse",e.node.data,e.node,f),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,f)))},A=(j,W)=>{e.node.setChecked(W.target.checked,!i.props.checkStrictly),bn(()=>{const U=i.store.value;i.ctx.emit("check",e.node.data,{checkedNodes:U.getCheckedNodes(),checkedKeys:U.getCheckedKeys(),halfCheckedNodes:U.getHalfCheckedNodes(),halfCheckedKeys:U.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:i,expanded:a,childNodeRendered:o,oldChecked:s,oldIndeterminate:l,getNodeKey:v,getNodeClass:_,handleSelectChange:b,handleClick:C,handleContextMenu:T,handleExpandIconClick:E,handleCheckChange:A,handleChildNodeExpand:(j,W,U)=>{r(W),i.ctx.emit("node-expand",j,W,U)},handleDragStart:j=>{i.props.draggable&&h.treeNodeDragStart({event:j,treeNode:e})},handleDragOver:j=>{j.preventDefault(),i.props.draggable&&h.treeNodeDragOver({event:j,treeNode:{$el:c.value,node:e.node}})},handleDrop:j=>{j.preventDefault()},handleDragEnd:j=>{i.props.draggable&&h.treeNodeDragEnd(j)},CaretRight:uK}}});function vLe(e,t,n,r,i,a){const o=Xt("el-icon"),s=Xt("el-checkbox"),l=Xt("loading"),c=Xt("node-content"),h=Xt("el-tree-node"),f=Xt("el-collapse-transition");return In((te(),me("div",{ref:"node$",class:se([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:Fn(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:Fn(e.handleDragStart,["stop"]),onDragover:Fn(e.handleDragOver,["stop"]),onDragend:Fn(e.handleDragEnd,["stop"]),onDrop:Fn(e.handleDrop,["stop"])},[V("div",{class:se(e.ns.be("node","content")),style:_n({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(te(),ft(o,{key:0,class:se([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:Fn(e.handleExpandIconClick,["stop"])},{default:ge(()=>[(te(),ft(ir(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):Ge("v-if",!0),e.showCheckbox?(te(),ft(s,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:Fn(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):Ge("v-if",!0),e.node.loading?(te(),ft(o,{key:2,class:se([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:ge(()=>[de(l)]),_:1},8,["class"])):Ge("v-if",!0),de(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),de(f,null,{default:ge(()=>[!e.renderAfterExpand||e.childNodeRendered?In((te(),me("div",{key:0,class:se(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(te(!0),me(hn,null,Kn(e.node.childNodes,p=>(te(),ft(h,{key:e.getNodeKey(p),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:p,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[Lr,e.expanded]]):Ge("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Lr,e.node.visible]])}var mLe=Kt(pLe,[["render",vLe],["__file","tree-node.vue"]]);function gLe({el$:e},t){const n=Rt("tree"),r=_i([]),i=_i([]);Un(()=>{o()}),nh(()=>{r.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),At(i,s=>{s.forEach(l=>{l.setAttribute("tabindex","-1")})}),ti(e,"keydown",s=>{const l=s.target;if(!l.className.includes(n.b("node")))return;const c=s.code;r.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const h=r.value.indexOf(l);let f;if([En.up,En.down].includes(c)){if(s.preventDefault(),c===En.up){f=h===-1?0:h!==0?h-1:r.value.length-1;const v=f;for(;!t.value.getNode(r.value[f].dataset.key).canFocus;){if(f--,f===v){f=-1;break}f<0&&(f=r.value.length-1)}}else{f=h===-1?0:h<r.value.length-1?h+1:0;const v=f;for(;!t.value.getNode(r.value[f].dataset.key).canFocus;){if(f++,f===v){f=-1;break}f>=r.value.length&&(f=0)}}f!==-1&&r.value[f].focus()}[En.left,En.right].includes(c)&&(s.preventDefault(),l.click());const p=l.querySelector('[type="checkbox"]');[En.enter,En.space].includes(c)&&p&&(s.preventDefault(),p.click())});const o=()=>{var s;r.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const l=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(s=r.value[0])==null||s.setAttribute("tabindex","0")}}const yLe=Be({name:"ElTree",components:{ElTreeNode:mLe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:si}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Sr(),r=Rt("tree"),i=un(L0,null),a=le(new cLe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const o=le(a.value.root),s=le(null),l=le(null),c=le(null),{broadcastExpanded:h}=UY(e),{dragState:f}=fLe({props:e,ctx:t,el$:l,dropIndicator$:c,store:a});gLe({el$:l},a);const p=X(()=>{const{childNodes:re}=o.value,ee=i?i.hasFilteredOptions!==0:!1;return(!re||re.length===0||re.every(({visible:oe})=>!oe))&&!ee});At(()=>e.currentNodeKey,re=>{a.value.setCurrentNodeKey(re)}),At(()=>e.defaultCheckedKeys,re=>{a.value.setDefaultCheckedKey(re)}),At(()=>e.defaultExpandedKeys,re=>{a.value.setDefaultExpandedKeys(re)}),At(()=>e.data,re=>{a.value.setData(re)},{deep:!0}),At(()=>e.checkStrictly,re=>{a.value.checkStrictly=re});const v=re=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(re)},_=re=>tz(e.nodeKey,re.data),b=re=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const ee=a.value.getNode(re);if(!ee)return[];const oe=[ee.data];let be=ee.parent;for(;be&&be!==o.value;)oe.push(be.data),be=be.parent;return oe.reverse()},C=(re,ee)=>a.value.getCheckedNodes(re,ee),T=re=>a.value.getCheckedKeys(re),E=()=>{const re=a.value.getCurrentNode();return re?re.data:null},A=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const re=E();return re?re[e.nodeKey]:null},I=(re,ee)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(re,ee)},O=(re,ee)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(re,ee)},B=(re,ee,oe)=>{a.value.setChecked(re,ee,oe)},N=()=>a.value.getHalfCheckedNodes(),H=()=>a.value.getHalfCheckedKeys(),j=(re,ee=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");WD(a,t.emit,()=>{h(re),a.value.setUserCurrentNode(re,ee)})},W=(re,ee=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");WD(a,t.emit,()=>{h(),a.value.setCurrentNodeKey(re,ee)})},U=re=>a.value.getNode(re),Y=re=>{a.value.remove(re)},ie=(re,ee)=>{a.value.append(re,ee)},ue=(re,ee)=>{a.value.insertBefore(re,ee)},J=(re,ee)=>{a.value.insertAfter(re,ee)},q=(re,ee,oe)=>{h(ee),t.emit("node-expand",re,ee,oe)},ce=(re,ee)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(re,ee)};return pr("RootTree",{ctx:t,props:e,store:a,root:o,currentNode:s,instance:er()}),pr(Qc,void 0),{ns:r,store:a,root:o,currentNode:s,dragState:f,el$:l,dropIndicator$:c,isEmpty:p,filter:v,getNodeKey:_,getNodePath:b,getCheckedNodes:C,getCheckedKeys:T,getCurrentNode:E,getCurrentKey:A,setCheckedNodes:I,setCheckedKeys:O,setChecked:B,getHalfCheckedNodes:N,getHalfCheckedKeys:H,setCurrentNode:j,setCurrentKey:W,t:n,getNode:U,remove:Y,append:ie,insertBefore:ue,insertAfter:J,handleNodeExpand:q,updateKeyChildren:ce}}});function _Le(e,t,n,r,i,a){const o=Xt("el-tree-node");return te(),me("div",{ref:"el$",class:se([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(te(!0),me(hn,null,Kn(e.root.childNodes,s=>(te(),ft(o,{key:e.getNodeKey(s),node:s,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(te(),me("div",{key:0,class:se(e.ns.e("empty-block"))},[st(e.$slots,"empty",{},()=>{var s;return[V("span",{class:se(e.ns.e("empty-text"))},Xe((s=e.emptyText)!=null?s:e.t("el.tree.emptyText")),3)]})],2)):Ge("v-if",!0),In(V("div",{ref:"dropIndicator$",class:se(e.ns.e("drop-indicator"))},null,2),[[Lr,e.dragState.showDropIndicator]])],2)}var bLe=Kt(yLe,[["render",_Le],["__file","tree.vue"]]);const FT=Wn(bLe),wLe=(e,{attrs:t,emit:n},{select:r,tree:i,key:a})=>{const o=Rt("tree-select");return At(()=>e.data,()=>{e.filterable&&bn(()=>{var l,c;(c=i.value)==null||c.filter((l=r.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Nu(ao(e),Object.keys(rm.props)),...t,"onUpdate:modelValue":l=>n(tr,l),valueKey:a,popperClass:X(()=>{const l=[o.e("popper")];return e.popperClass&&l.push(e.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;e.filterMethod?e.filterMethod(l):e.remoteMethod?e.remoteMethod(l):(c=i.value)==null||c.filter(l)}}},xLe=Be({extends:AT,setup(e,t){const n=AT.setup(e,t);delete n.selectOptionClick;const r=er().proxy;return bn(()=>{n.select.states.cachedOptions.get(r.value)||n.select.onOptionCreate(r)}),At(()=>t.attrs.visible,i=>{n.states.visible=i},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function qD(e){return e||e===0}function nz(e){return Array.isArray(e)&&e.length}function xb(e){return Array.isArray(e)?e:qD(e)?[e]:[]}function OC(e,t,n,r,i){for(let a=0;a<e.length;a++){const o=e[a];if(t(o,a,e,i))return r?r(o,a,e,i):o;{const s=n(o);if(nz(s)){const l=OC(s,t,n,r,o);if(l)return l}}}}function ZD(e,t,n,r){for(let i=0;i<e.length;i++){const a=e[i];t(a,i,e,r);const o=n(a);nz(o)&&ZD(o,t,n,a)}}const SLe=(e,{attrs:t,slots:n,emit:r},{select:i,tree:a,key:o})=>{At(()=>e.modelValue,()=>{e.showCheckbox&&bn(()=>{const f=a.value;f&&!Yo(f.getCheckedKeys(),xb(e.modelValue))&&f.setCheckedKeys(xb(e.modelValue))})},{immediate:!0,deep:!0});const s=X(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),l=(f,p)=>{var v;const _=s.value[f];return Dn(_)?_(p,(v=a.value)==null?void 0:v.getNode(l("value",p))):p[_]},c=xb(e.modelValue).map(f=>OC(e.data||[],p=>l("value",p)===f,p=>l("children",p),(p,v,_,b)=>b&&l("value",b))).filter(f=>qD(f)),h=X(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const f=[];return ZD(e.data.concat(e.cacheData),p=>{const v=l("value",p);f.push({value:v,currentLabel:l("label",p),isDisabled:l("disabled",p)})},p=>l("children",p)),f});return{...Nu(ao(e),Object.keys(FT.props)),...t,nodeKey:o,expandOnClickNode:X(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:X(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(c):c),renderContent:(f,{node:p,data:v,store:_})=>f(xLe,{value:l("value",v),label:l("label",v),disabled:l("disabled",v),visible:p.visible},e.renderContent?()=>e.renderContent(f,{node:p,data:v,store:_}):n.default?()=>n.default({node:p,data:v,store:_}):void 0),filterNodeMethod:(f,p,v)=>e.filterNodeMethod?e.filterNodeMethod(f,p,v):f?new RegExp(N3(f),"i").test(l("label",p)||""):!0,onNodeClick:(f,p,v)=>{var _,b,C,T;if((_=t.onNodeClick)==null||_.call(t,f,p,v),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||p.isLeaf)){if(!l("disabled",f)){const E=(b=i.value)==null?void 0:b.states.options.get(l("value",f));(C=i.value)==null||C.handleOptionSelect(E)}}else e.expandOnClickNode&&v.proxy.handleExpandIconClick();(T=i.value)==null||T.focus()}},onCheck:(f,p)=>{var v;if(!e.showCheckbox)return;const _=l("value",f),b={};ZD([a.value.store.root],A=>b[A.key]=A,A=>A.childNodes);const C=p.checkedKeys,T=e.multiple?xb(e.modelValue).filter(A=>!(A in b)&&!C.includes(A)):[],E=T.concat(C);if(e.checkStrictly)r(tr,e.multiple?E:E.includes(_)?_:void 0);else if(e.multiple)r(tr,T.concat(a.value.getCheckedKeys(!0)));else{const A=OC([f],B=>!nz(l("children",B))&&!l("disabled",B),B=>l("children",B)),I=A?l("value",A):void 0,O=qD(e.modelValue)&&!!OC([f],B=>l("value",B)===e.modelValue,B=>l("children",B));r(tr,I===e.modelValue||O?void 0:I)}bn(()=>{var A;const I=xb(e.modelValue);a.value.setCheckedKeys(I),(A=t.onCheck)==null||A.call(t,f,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(v=i.value)==null||v.focus()},cacheOptions:h}};var CLe=Be({props:{data:{type:Array,default:()=>[]}},setup(e){const t=un(L0);return At(()=>e.data,()=>{var n;e.data.forEach(i=>{t.states.cachedOptions.has(i.value)||t.states.cachedOptions.set(i.value,i)});const r=((n=t.selectRef)==null?void 0:n.querySelectorAll("input"))||[];xr&&!Array.from(r).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const TLe=Be({name:"ElTreeSelect",inheritAttrs:!1,props:{...rm.props,...FT.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:n,expose:r}=t,i=le(),a=le(),o=X(()=>e.nodeKey||e.valueKey||"value"),s=wLe(e,t,{select:i,tree:a,key:o}),{cacheOptions:l,...c}=SLe(e,t,{select:i,tree:a,key:o}),h=Ar({});return r(h),Un(()=>{Object.assign(h,{...Nu(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Nu(i.value,["focus","blur"])})}),()=>Mn(rm,Ar({...s,ref:f=>i.value=f}),{...n,default:()=>[Mn(CLe,{data:l.value}),Mn(FT,Ar({...c,ref:f=>a.value=f}))]})}});var MLe=Kt(TLe,[["__file","tree-select.vue"]]);const kLe=Wn(MLe),rz=Symbol(),ELe={key:-1,level:-1,data:{}};var Jb=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(Jb||{}),YD=(e=>(e.ADD="add",e.DELETE="delete",e))(YD||{});const GY={type:Number,default:26},ALe=Wt({data:{type:Qe(Array),default:()=>ji([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Qe(Object),default:()=>ji({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Qe(Array),default:()=>ji([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Qe(Array),default:()=>ji([])},indent:{type:Number,default:16},itemSize:GY,icon:{type:si},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Qe([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Qe(Function)},perfMode:{type:Boolean,default:!0}}),PLe=Wt({node:{type:Qe(Object),default:()=>ji(ELe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:GY}),ILe=Wt({node:{type:Qe(Object),required:!0}}),KY="node-click",qY="node-expand",ZY="node-collapse",YY="current-change",XY="check",JY="check-change",QY="node-contextmenu",LLe={[KY]:(e,t,n)=>e&&t&&n,[qY]:(e,t)=>e&&t,[ZY]:(e,t)=>e&&t,[YY]:(e,t)=>e&&t,[XY]:(e,t)=>e&&t,[JY]:(e,t)=>e&&typeof t=="boolean",[QY]:(e,t,n)=>e&&t&&n},DLe={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function RLe(e,t){const n=le(new Set),r=le(new Set),{emit:i}=er();At([()=>t.value,()=>e.defaultCheckedKeys],()=>bn(()=>{E(e.defaultCheckedKeys)}),{immediate:!0});const a=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:A,maxLevel:I}=t.value,O=n.value,B=new Set;for(let N=I-1;N>=1;--N){const H=A.get(N);H&&H.forEach(j=>{const W=j.children;if(W){let U=!0,Y=!1;for(const ie of W){const ue=ie.key;if(O.has(ue))Y=!0;else if(B.has(ue)){U=!1,Y=!0;break}else U=!1}U?O.add(j.key):Y?(B.add(j.key),O.delete(j.key)):(O.delete(j.key),B.delete(j.key))}})}r.value=B},o=A=>n.value.has(A.key),s=A=>r.value.has(A.key),l=(A,I,O=!0)=>{const B=n.value,N=(H,j)=>{B[j?YD.ADD:YD.DELETE](H.key);const W=H.children;!e.checkStrictly&&W&&W.forEach(U=>{U.disabled||N(U,j)})};N(A,I),a(),O&&c(A,I)},c=(A,I)=>{const{checkedNodes:O,checkedKeys:B}=_(),{halfCheckedNodes:N,halfCheckedKeys:H}=b();i(XY,A.data,{checkedKeys:B,checkedNodes:O,halfCheckedKeys:H,halfCheckedNodes:N}),i(JY,A.data,I)};function h(A=!1){return _(A).checkedKeys}function f(A=!1){return _(A).checkedNodes}function p(){return b().halfCheckedKeys}function v(){return b().halfCheckedNodes}function _(A=!1){const I=[],O=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:B}=t.value;n.value.forEach(N=>{const H=B.get(N);H&&(!A||A&&H.isLeaf)&&(O.push(N),I.push(H.data))})}return{checkedKeys:O,checkedNodes:I}}function b(){const A=[],I=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:O}=t.value;r.value.forEach(B=>{const N=O.get(B);N&&(I.push(B),A.push(N.data))})}return{halfCheckedNodes:A,halfCheckedKeys:I}}function C(A){n.value.clear(),r.value.clear(),bn(()=>{E(A)})}function T(A,I){if(t!=null&&t.value&&e.showCheckbox){const O=t.value.treeNodeMap.get(A);O&&l(O,I,!1)}}function E(A){if(t!=null&&t.value){const{treeNodeMap:I}=t.value;if(e.showCheckbox&&I&&A)for(const O of A){const B=I.get(O);B&&!o(B)&&l(B,!0,!1)}}}return{updateCheckedKeys:a,toggleCheckbox:l,isChecked:o,isIndeterminate:s,getCheckedKeys:h,getCheckedNodes:f,getHalfCheckedKeys:p,getHalfCheckedNodes:v,setChecked:T,setCheckedKeys:C}}function OLe(e,t){const n=le(new Set([])),r=le(new Set([])),i=X(()=>Dn(e.filterMethod));function a(s){var l;if(!i.value)return;const c=new Set,h=r.value,f=n.value,p=[],v=((l=t.value)==null?void 0:l.treeNodes)||[],_=e.filterMethod;f.clear();function b(C){C.forEach(T=>{p.push(T),_!=null&&_(s,T.data)?p.forEach(A=>{c.add(A.key)}):T.isLeaf&&f.add(T.key);const E=T.children;if(E&&b(E),!T.isLeaf){if(!c.has(T.key))f.add(T.key);else if(E){let A=!0;for(const I of E)if(!f.has(I.key)){A=!1;break}A?h.add(T.key):h.delete(T.key)}}p.pop()})}return b(v),c}function o(s){return r.value.has(s.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:a,isForceHiddenExpandIcon:o}}function zLe(e,t){const n=le(new Set(e.defaultExpandedKeys)),r=le(),i=_i(),a=le();At(()=>e.currentNodeKey,Ne=>{r.value=Ne},{immediate:!0}),At(()=>e.data,Ne=>{Ee(Ne)},{immediate:!0});const{isIndeterminate:o,isChecked:s,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:h,getHalfCheckedKeys:f,getHalfCheckedNodes:p,setChecked:v,setCheckedKeys:_}=RLe(e,i),{doFilter:b,hiddenNodeKeySet:C,isForceHiddenExpandIcon:T}=OLe(e,i),E=X(()=>{var Ne;return((Ne=e.props)==null?void 0:Ne.value)||Jb.KEY}),A=X(()=>{var Ne;return((Ne=e.props)==null?void 0:Ne.children)||Jb.CHILDREN}),I=X(()=>{var Ne;return((Ne=e.props)==null?void 0:Ne.disabled)||Jb.DISABLED}),O=X(()=>{var Ne;return((Ne=e.props)==null?void 0:Ne.label)||Jb.LABEL}),B=X(()=>{const Ne=n.value,dt=C.value,Le=[],ze=i.value&&i.value.treeNodes||[];function ct(){const Lt=[];for(let lt=ze.length-1;lt>=0;--lt)Lt.push(ze[lt]);for(;Lt.length;){const lt=Lt.pop();if(lt&&(dt.has(lt.key)||Le.push(lt),Ne.has(lt.key))){const Ct=lt.children;if(Ct){const _t=Ct.length;for(let It=_t-1;It>=0;--It)Lt.push(Ct[It])}}}}return ct(),Le}),N=X(()=>B.value.length>0);function H(Ne){const dt=new Map,Le=new Map;let ze=1;function ct(lt,Ct=1,_t=void 0){var It;const Bt=[];for(const Ft of lt){const cn=U(Ft),Ot={level:Ct,key:cn,data:Ft};Ot.label=ie(Ft),Ot.parent=_t;const kt=W(Ft);Ot.disabled=Y(Ft),Ot.isLeaf=!kt||kt.length===0,kt&&kt.length&&(Ot.children=ct(kt,Ct+1,Ot)),Bt.push(Ot),dt.set(cn,Ot),Le.has(Ct)||Le.set(Ct,[]),(It=Le.get(Ct))==null||It.push(Ot)}return Ct>ze&&(ze=Ct),Bt}const Lt=ct(Ne);return{treeNodeMap:dt,levelTreeNodeMap:Le,maxLevel:ze,treeNodes:Lt}}function j(Ne){const dt=b(Ne);dt&&(n.value=dt)}function W(Ne){return Ne[A.value]}function U(Ne){return Ne?Ne[E.value]:""}function Y(Ne){return Ne[I.value]}function ie(Ne){return Ne[O.value]}function ue(Ne){n.value.has(Ne.key)?oe(Ne):ee(Ne)}function J(Ne){n.value=new Set(Ne)}function q(Ne,dt){t(KY,Ne.data,Ne,dt),ce(Ne),e.expandOnClickNode&&ue(Ne),e.showCheckbox&&e.checkOnClickNode&&!Ne.disabled&&l(Ne,!s(Ne),!0)}function ce(Ne){pe(Ne)||(r.value=Ne.key,t(YY,Ne.data,Ne))}function re(Ne,dt){l(Ne,dt)}function ee(Ne){const dt=n.value;if(i.value&&e.accordion){const{treeNodeMap:Le}=i.value;dt.forEach(ze=>{const ct=Le.get(ze);Ne&&Ne.level===(ct==null?void 0:ct.level)&&dt.delete(ze)})}dt.add(Ne.key),t(qY,Ne.data,Ne)}function oe(Ne){n.value.delete(Ne.key),t(ZY,Ne.data,Ne)}function be(Ne){return n.value.has(Ne.key)}function we(Ne){return!!Ne.disabled}function pe(Ne){const dt=r.value;return dt!==void 0&&dt===Ne.key}function Ce(){var Ne,dt;if(r.value)return(dt=(Ne=i.value)==null?void 0:Ne.treeNodeMap.get(r.value))==null?void 0:dt.data}function Ve(){return r.value}function et(Ne){r.value=Ne}function Ee(Ne){bn(()=>i.value=H(Ne))}function Je(Ne){var dt;const Le=nr(Ne)?U(Ne):Ne;return(dt=i.value)==null?void 0:dt.treeNodeMap.get(Le)}function Ue(Ne,dt="auto"){const Le=Je(Ne);Le&&a.value&&a.value.scrollToItem(B.value.indexOf(Le),dt)}function yt(Ne){var dt;(dt=a.value)==null||dt.scrollTo(Ne)}return{tree:i,flattenTree:B,isNotEmpty:N,listRef:a,getKey:U,getChildren:W,toggleExpand:ue,toggleCheckbox:l,isExpanded:be,isChecked:s,isIndeterminate:o,isDisabled:we,isCurrent:pe,isForceHiddenExpandIcon:T,handleNodeClick:q,handleNodeCheck:re,getCurrentNode:Ce,getCurrentKey:Ve,setCurrentKey:et,getCheckedKeys:c,getCheckedNodes:h,getHalfCheckedKeys:f,getHalfCheckedNodes:p,setChecked:v,setCheckedKeys:_,filter:j,setData:Ee,getNode:Je,expandNode:ee,collapseNode:oe,setExpandedKeys:J,scrollToNode:Ue,scrollTo:yt}}var BLe=Be({name:"ElTreeNodeContent",props:ILe,setup(e){const t=un(rz),n=Rt("tree");return()=>{const r=e.node,{data:i}=r;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:r,data:i}):Mn("span",{class:n.be("node","label")},[r==null?void 0:r.label])}}});const FLe=Be({name:"ElTreeNode"}),NLe=Be({...FLe,props:PLe,emits:DLe,setup(e,{emit:t}){const n=e,r=un(rz),i=Rt("tree"),a=X(()=>{var f;return(f=r==null?void 0:r.props.indent)!=null?f:16}),o=X(()=>{var f;return(f=r==null?void 0:r.props.icon)!=null?f:uK}),s=f=>{t("click",n.node,f)},l=()=>{t("toggle",n.node)},c=f=>{t("check",n.node,f)},h=f=>{var p,v,_,b;(_=(v=(p=r==null?void 0:r.instance)==null?void 0:p.vnode)==null?void 0:v.props)!=null&&_.onNodeContextmenu&&(f.stopPropagation(),f.preventDefault()),r==null||r.ctx.emit(QY,f,(b=n.node)==null?void 0:b.data,n.node)};return(f,p)=>{var v,_,b;return te(),me("div",{ref:"node$",class:se([w(i).b("node"),w(i).is("expanded",f.expanded),w(i).is("current",f.current),w(i).is("focusable",!f.disabled),w(i).is("checked",!f.disabled&&f.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":f.expanded,"aria-disabled":f.disabled,"aria-checked":f.checked,"data-key":(v=f.node)==null?void 0:v.key,onClick:Fn(s,["stop"]),onContextmenu:h},[V("div",{class:se(w(i).be("node","content")),style:_n({paddingLeft:`${(f.node.level-1)*w(a)}px`,height:f.itemSize+"px"})},[w(o)?(te(),ft(w(yn),{key:0,class:se([w(i).is("leaf",!!((_=f.node)!=null&&_.isLeaf)),w(i).is("hidden",f.hiddenExpandIcon),{expanded:!((b=f.node)!=null&&b.isLeaf)&&f.expanded},w(i).be("node","expand-icon")]),onClick:Fn(l,["stop"])},{default:ge(()=>[(te(),ft(ir(w(o))))]),_:1},8,["class","onClick"])):Ge("v-if",!0),f.showCheckbox?(te(),ft(w(iu),{key:1,"model-value":f.checked,indeterminate:f.indeterminate,disabled:f.disabled,onChange:c,onClick:Fn(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Ge("v-if",!0),de(w(BLe),{node:f.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick"])}}});var $Le=Kt(NLe,[["__file","tree-node.vue"]]);const VLe=Be({name:"ElTreeV2"}),HLe=Be({...VLe,props:ALe,emits:LLe,setup(e,{expose:t,emit:n}){const r=e,i=qa(),a=X(()=>r.itemSize);pr(rz,{ctx:{emit:n,slots:i},props:r,instance:er()}),pr(Qc,void 0);const{t:o}=Sr(),s=Rt("tree"),{flattenTree:l,isNotEmpty:c,listRef:h,toggleExpand:f,isExpanded:p,isIndeterminate:v,isChecked:_,isDisabled:b,isCurrent:C,isForceHiddenExpandIcon:T,handleNodeClick:E,handleNodeCheck:A,toggleCheckbox:I,getCurrentNode:O,getCurrentKey:B,setCurrentKey:N,getCheckedKeys:H,getCheckedNodes:j,getHalfCheckedKeys:W,getHalfCheckedNodes:U,setChecked:Y,setCheckedKeys:ie,filter:ue,setData:J,getNode:q,expandNode:ce,collapseNode:re,setExpandedKeys:ee,scrollToNode:oe,scrollTo:be}=zLe(r,n);return t({toggleCheckbox:I,getCurrentNode:O,getCurrentKey:B,setCurrentKey:N,getCheckedKeys:H,getCheckedNodes:j,getHalfCheckedKeys:W,getHalfCheckedNodes:U,setChecked:Y,setCheckedKeys:ie,filter:ue,setData:J,getNode:q,expandNode:ce,collapseNode:re,setExpandedKeys:ee,scrollToNode:oe,scrollTo:be}),(we,pe)=>{var Ce;return te(),me("div",{class:se([w(s).b(),{[w(s).m("highlight-current")]:we.highlightCurrent}]),role:"tree"},[w(c)?(te(),ft(w(rY),{key:0,ref_key:"listRef",ref:h,"class-name":w(s).b("virtual-list"),data:w(l),total:w(l).length,height:we.height,"item-size":w(a),"perf-mode":we.perfMode},{default:ge(({data:Ve,index:et,style:Ee})=>[(te(),ft($Le,{key:Ve[et].key,style:_n(Ee),node:Ve[et],expanded:w(p)(Ve[et]),"show-checkbox":we.showCheckbox,checked:w(_)(Ve[et]),indeterminate:w(v)(Ve[et]),"item-size":w(a),disabled:w(b)(Ve[et]),current:w(C)(Ve[et]),"hidden-expand-icon":w(T)(Ve[et]),onClick:w(E),onToggle:w(f),onCheck:w(A)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(te(),me("div",{key:1,class:se(w(s).e("empty-block"))},[V("span",{class:se(w(s).e("empty-text"))},Xe((Ce=we.emptyText)!=null?Ce:w(o)("el.tree.emptyText")),3)],2))],2)}}});var jLe=Kt(HLe,[["__file","tree.vue"]]);const ULe=Wn(jLe),eX=Symbol("uploadContextKey"),WLe="ElUpload";class GLe extends Error{constructor(t,n,r,i){super(t),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=i}}function S$(e,t,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${t.method} ${e} ${n.status}`,new GLe(r,n.status,t.method,e)}function KLe(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const qLe=e=>{typeof XMLHttpRequest>"u"&&Na(WLe,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",a=>{const o=a;o.percent=a.total>0?a.loaded/a.total*100:0,e.onProgress(o)});const r=new FormData;if(e.data)for(const[a,o]of Object.entries(e.data))sn(o)&&o.length?r.append(a,...o):r.append(a,o);r.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(S$(n,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(S$(n,e,t));e.onSuccess(KLe(t))}),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const i=e.headers||{};if(i instanceof Headers)i.forEach((a,o)=>t.setRequestHeader(o,a));else for(const[a,o]of Object.entries(i))ro(o)||t.setRequestHeader(a,String(o));return t.send(r),t},tX=["text","picture","picture-card"];let ZLe=1;const XD=()=>Date.now()+ZLe++,nX=Wt({action:{type:String,default:"#"},headers:{type:Qe(Object)},method:{type:String,default:"post"},data:{type:Qe([Object,Function,Promise]),default:()=>ji({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Qe(Array),default:()=>ji([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:tX,default:"text"},httpRequest:{type:Qe(Function),default:qLe},disabled:Boolean,limit:Number}),YLe=Wt({...nX,beforeUpload:{type:Qe(Function),default:ai},beforeRemove:{type:Qe(Function)},onRemove:{type:Qe(Function),default:ai},onChange:{type:Qe(Function),default:ai},onPreview:{type:Qe(Function),default:ai},onSuccess:{type:Qe(Function),default:ai},onProgress:{type:Qe(Function),default:ai},onError:{type:Qe(Function),default:ai},onExceed:{type:Qe(Function),default:ai},crossorigin:{type:Qe(String)}}),XLe=Wt({files:{type:Qe(Array),default:()=>ji([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Qe(Function),default:ai},listType:{type:String,values:tX,default:"text"},crossorigin:{type:Qe(String)}}),JLe={remove:e=>!!e},QLe=Be({name:"ElUploadList"}),eDe=Be({...QLe,props:XLe,emits:JLe,setup(e,{emit:t}){const n=e,{t:r}=Sr(),i=Rt("upload"),a=Rt("icon"),o=Rt("list"),s=Ts(),l=le(!1),c=X(()=>[i.b("list"),i.bm("list",n.listType),i.is("disabled",n.disabled)]),h=f=>{t("remove",f)};return(f,p)=>(te(),ft(iG,{tag:"ul",class:se(w(c)),name:w(o).b()},{default:ge(()=>[(te(!0),me(hn,null,Kn(f.files,(v,_)=>(te(),me("li",{key:v.uid||v.name,class:se([w(i).be("list","item"),w(i).is(v.status),{focusing:l.value}]),tabindex:"0",onKeydown:oi(b=>!w(s)&&h(v),["delete"]),onFocus:b=>l.value=!0,onBlur:b=>l.value=!1,onClick:b=>l.value=!1},[st(f.$slots,"default",{file:v,index:_},()=>[f.listType==="picture"||v.status!=="uploading"&&f.listType==="picture-card"?(te(),me("img",{key:0,class:se(w(i).be("list","item-thumbnail")),src:v.url,crossorigin:f.crossorigin,alt:""},null,10,["src","crossorigin"])):Ge("v-if",!0),v.status==="uploading"||f.listType!=="picture-card"?(te(),me("div",{key:1,class:se(w(i).be("list","item-info"))},[V("a",{class:se(w(i).be("list","item-name")),onClick:Fn(b=>f.handlePreview(v),["prevent"])},[de(w(yn),{class:se(w(a).m("document"))},{default:ge(()=>[de(w(dve))]),_:1},8,["class"]),V("span",{class:se(w(i).be("list","item-file-name")),title:v.name},Xe(v.name),11,["title"])],10,["onClick"]),v.status==="uploading"?(te(),ft(w(qZ),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(v.percentage),style:_n(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Ge("v-if",!0)],2)):Ge("v-if",!0),V("label",{class:se(w(i).be("list","item-status-label"))},[f.listType==="text"?(te(),ft(w(yn),{key:0,class:se([w(a).m("upload-success"),w(a).m("circle-check")])},{default:ge(()=>[de(w(j3))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(te(),ft(w(yn),{key:1,class:se([w(a).m("upload-success"),w(a).m("check")])},{default:ge(()=>[de(w(ix))]),_:1},8,["class"])):Ge("v-if",!0)],2),w(s)?Ge("v-if",!0):(te(),ft(w(yn),{key:2,class:se(w(a).m("close")),onClick:b=>h(v)},{default:ge(()=>[de(w(Yu))]),_:2},1032,["class","onClick"])),Ge(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Ge(" This is a bug which needs to be fixed "),Ge(" TODO: Fix the incorrect navigation interaction "),w(s)?Ge("v-if",!0):(te(),me("i",{key:3,class:se(w(a).m("close-tip"))},Xe(w(r)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(te(),me("span",{key:4,class:se(w(i).be("list","item-actions"))},[V("span",{class:se(w(i).be("list","item-preview")),onClick:b=>f.handlePreview(v)},[de(w(yn),{class:se(w(a).m("zoom-in"))},{default:ge(()=>[de(w(fK))]),_:1},8,["class"])],10,["onClick"]),w(s)?Ge("v-if",!0):(te(),me("span",{key:0,class:se(w(i).be("list","item-delete")),onClick:b=>h(v)},[de(w(yn),{class:se(w(a).m("delete"))},{default:ge(()=>[de(w(uve))]),_:1},8,["class"])],10,["onClick"]))],2)):Ge("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),st(f.$slots,"append")]),_:3},8,["class","name"]))}});var C$=Kt(eDe,[["__file","upload-list.vue"]]);const tDe=Wt({disabled:{type:Boolean,default:!1}}),nDe={file:e=>sn(e)},rX="ElUploadDrag",rDe=Be({name:rX}),iDe=Be({...rDe,props:tDe,emits:nDe,setup(e,{emit:t}){un(eX)||Na(rX,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Rt("upload"),i=le(!1),a=Ts(),o=l=>{if(a.value)return;i.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);t("file",c)},s=()=>{a.value||(i.value=!0)};return(l,c)=>(te(),me("div",{class:se([w(r).b("dragger"),w(r).is("dragover",i.value)]),onDrop:Fn(o,["prevent"]),onDragover:Fn(s,["prevent"]),onDragleave:Fn(h=>i.value=!1,["prevent"])},[st(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var aDe=Kt(iDe,[["__file","upload-dragger.vue"]]);const oDe=Wt({...nX,beforeUpload:{type:Qe(Function),default:ai},onRemove:{type:Qe(Function),default:ai},onStart:{type:Qe(Function),default:ai},onSuccess:{type:Qe(Function),default:ai},onProgress:{type:Qe(Function),default:ai},onError:{type:Qe(Function),default:ai},onExceed:{type:Qe(Function),default:ai}}),sDe=Be({name:"ElUploadContent",inheritAttrs:!1}),lDe=Be({...sDe,props:oDe,setup(e,{expose:t}){const n=e,r=Rt("upload"),i=Ts(),a=_i({}),o=_i(),s=b=>{if(b.length===0)return;const{autoUpload:C,limit:T,fileList:E,multiple:A,onStart:I,onExceed:O}=n;if(T&&E.length+b.length>T){O(b,E);return}A||(b=b.slice(0,1));for(const B of b){const N=B;N.uid=XD(),I(N),C&&l(N)}},l=async b=>{if(o.value.value="",!n.beforeUpload)return h(b);let C,T={};try{const A=n.data,I=n.beforeUpload(b);T=lT(n.data)?bT(n.data):n.data,C=await I,lT(n.data)&&Yo(A,T)&&(T=bT(n.data))}catch{C=!1}if(C===!1){n.onRemove(b);return}let E=b;C instanceof Blob&&(C instanceof File?E=C:E=new File([C],b.name,{type:b.type})),h(Object.assign(E,{uid:b.uid}),T)},c=async(b,C)=>Dn(b)?b(C):b,h=async(b,C)=>{const{headers:T,data:E,method:A,withCredentials:I,name:O,action:B,onProgress:N,onSuccess:H,onError:j,httpRequest:W}=n;try{C=await c(C??E,b)}catch{n.onRemove(b);return}const{uid:U}=b,Y={headers:T||{},withCredentials:I,file:b,data:C,method:A,filename:O,action:B,onProgress:ue=>{N(ue,b)},onSuccess:ue=>{H(ue,b),delete a.value[U]},onError:ue=>{j(ue,b),delete a.value[U]}},ie=W(Y);a.value[U]=ie,ie instanceof Promise&&ie.then(Y.onSuccess,Y.onError)},f=b=>{const C=b.target.files;C&&s(Array.from(C))},p=()=>{i.value||(o.value.value="",o.value.click())},v=()=>{p()};return t({abort:b=>{Bpe(a.value).filter(b?([T])=>String(b.uid)===T:()=>!0).forEach(([T,E])=>{E instanceof XMLHttpRequest&&E.abort(),delete a.value[T]})},upload:l}),(b,C)=>(te(),me("div",{class:se([w(r).b(),w(r).m(b.listType),w(r).is("drag",b.drag),w(r).is("disabled",w(i))]),tabindex:w(i)?"-1":"0",onClick:p,onKeydown:oi(Fn(v,["self"]),["enter","space"])},[b.drag?(te(),ft(aDe,{key:0,disabled:w(i),onFile:s},{default:ge(()=>[st(b.$slots,"default")]),_:3},8,["disabled"])):st(b.$slots,"default",{key:1}),V("input",{ref_key:"inputRef",ref:o,class:se(w(r).e("input")),name:b.name,disabled:w(i),multiple:b.multiple,accept:b.accept,type:"file",onChange:f,onClick:Fn(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var T$=Kt(lDe,[["__file","upload-content.vue"]]);const M$="ElUpload",k$=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},uDe=(e,t)=>{const n=bG(e,"fileList",void 0,{passive:!0}),r=v=>n.value.find(_=>_.uid===v.uid);function i(v){var _;(_=t.value)==null||_.abort(v)}function a(v=["ready","uploading","success","fail"]){n.value=n.value.filter(_=>!v.includes(_.status))}function o(v){n.value=n.value.filter(_=>_!==v)}const s=(v,_)=>{const b=r(_);b&&(console.error(v),b.status="fail",o(b),e.onError(v,b,n.value),e.onChange(b,n.value))},l=(v,_)=>{const b=r(_);b&&(e.onProgress(v,b,n.value),b.status="uploading",b.percentage=Math.round(v.percent))},c=(v,_)=>{const b=r(_);b&&(b.status="success",b.response=v,e.onSuccess(v,b,n.value),e.onChange(b,n.value))},h=v=>{ro(v.uid)&&(v.uid=XD());const _={name:v.name,percentage:0,status:"ready",size:v.size,raw:v,uid:v.uid};if(e.listType==="picture-card"||e.listType==="picture")try{_.url=URL.createObjectURL(v)}catch(b){b.message,e.onError(b,_,n.value)}n.value=[...n.value,_],e.onChange(_,n.value)},f=async v=>{const _=v instanceof File?r(v):v;_||Na(M$,"file to be removed not found");const b=C=>{i(C),o(C),e.onRemove(C,n.value),k$(C)};e.beforeRemove?await e.beforeRemove(_,n.value)!==!1&&b(_):b(_)};function p(){n.value.filter(({status:v})=>v==="ready").forEach(({raw:v})=>{var _;return v&&((_=t.value)==null?void 0:_.upload(v))})}return At(()=>e.listType,v=>{v!=="picture-card"&&v!=="picture"||(n.value=n.value.map(_=>{const{raw:b,url:C}=_;if(!C&&b)try{_.url=URL.createObjectURL(b)}catch(T){e.onError(T,_,n.value)}return _}))}),At(n,v=>{for(const _ of v)_.uid||(_.uid=XD()),_.status||(_.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:i,clearFiles:a,handleError:s,handleProgress:l,handleStart:h,handleSuccess:c,handleRemove:f,submit:p,revokeFileObjectURL:k$}},cDe=Be({name:"ElUpload"}),dDe=Be({...cDe,props:YLe,setup(e,{expose:t}){const n=e,r=Ts(),i=_i(),{abort:a,submit:o,clearFiles:s,uploadFiles:l,handleStart:c,handleError:h,handleRemove:f,handleSuccess:p,handleProgress:v,revokeFileObjectURL:_}=uDe(n,i),b=X(()=>n.listType==="picture-card"),C=X(()=>({...n,fileList:l.value,onStart:c,onProgress:v,onSuccess:p,onError:h,onRemove:f}));return ui(()=>{l.value.forEach(_)}),pr(eX,{accept:Gr(n,"accept")}),t({abort:a,submit:o,clearFiles:s,handleStart:c,handleRemove:f}),(T,E)=>(te(),me("div",null,[w(b)&&T.showFileList?(te(),ft(C$,{key:0,disabled:w(r),"list-type":T.listType,files:w(l),crossorigin:T.crossorigin,"handle-preview":T.onPreview,onRemove:w(f)},Zu({append:ge(()=>[de(T$,sr({ref_key:"uploadRef",ref:i},w(C)),{default:ge(()=>[T.$slots.trigger?st(T.$slots,"trigger",{key:0}):Ge("v-if",!0),!T.$slots.trigger&&T.$slots.default?st(T.$slots,"default",{key:1}):Ge("v-if",!0)]),_:3},16)]),_:2},[T.$slots.file?{name:"default",fn:ge(({file:A,index:I})=>[st(T.$slots,"file",{file:A,index:I})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ge("v-if",!0),!w(b)||w(b)&&!T.showFileList?(te(),ft(T$,sr({key:1,ref_key:"uploadRef",ref:i},w(C)),{default:ge(()=>[T.$slots.trigger?st(T.$slots,"trigger",{key:0}):Ge("v-if",!0),!T.$slots.trigger&&T.$slots.default?st(T.$slots,"default",{key:1}):Ge("v-if",!0)]),_:3},16)):Ge("v-if",!0),T.$slots.trigger?st(T.$slots,"default",{key:2}):Ge("v-if",!0),st(T.$slots,"tip"),!w(b)&&T.showFileList?(te(),ft(C$,{key:3,disabled:w(r),"list-type":T.listType,files:w(l),crossorigin:T.crossorigin,"handle-preview":T.onPreview,onRemove:w(f)},Zu({_:2},[T.$slots.file?{name:"default",fn:ge(({file:A,index:I})=>[st(T.$slots,"file",{file:A,index:I})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ge("v-if",!0)]))}});var hDe=Kt(dDe,[["__file","upload.vue"]]);const fDe=Wn(hDe),pDe=Wt({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Qe([String,Array]),default:"Element Plus"},font:{type:Qe(Object)},gap:{type:Qe(Array),default:()=>[100,100]},offset:{type:Qe(Array)}});function vDe(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function mDe(e){return Object.keys(e).map(t=>`${vDe(t)}: ${e[t]};`).join(" ")}function gDe(){return window.devicePixelRatio||1}const yDe=(e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),e.type==="attributes"&&e.target===t&&(n=!0),n},iX=3;function bP(e,t,n=1){const r=document.createElement("canvas"),i=r.getContext("2d"),a=e*n,o=t*n;return r.setAttribute("width",`${a}px`),r.setAttribute("height",`${o}px`),i.save(),[i,r,a,o]}function _De(){function e(t,n,r,i,a,o,s,l){const[c,h,f,p]=bP(i,a,r);if(t instanceof HTMLImageElement)c.drawImage(t,0,0,f,p);else{const{color:be,fontSize:we,fontStyle:pe,fontWeight:Ce,fontFamily:Ve,textAlign:et,textBaseline:Ee}=o,Je=Number(we)*r;c.font=`${pe} normal ${Ce} ${Je}px/${a}px ${Ve}`,c.fillStyle=be,c.textAlign=et,c.textBaseline=Ee;const Ue=Array.isArray(t)?t:[t];Ue==null||Ue.forEach((yt,Ne)=>{c.fillText(yt??"",f/2,Ne*(Je+iX*r))})}const v=Math.PI/180*Number(n),_=Math.max(i,a),[b,C,T]=bP(_,_,r);b.translate(T/2,T/2),b.rotate(v),f>0&&p>0&&b.drawImage(h,-f/2,-p/2);function E(be,we){const pe=be*Math.cos(v)-we*Math.sin(v),Ce=be*Math.sin(v)+we*Math.cos(v);return[pe,Ce]}let A=0,I=0,O=0,B=0;const N=f/2,H=p/2;[[0-N,0-H],[0+N,0-H],[0+N,0+H],[0-N,0+H]].forEach(([be,we])=>{const[pe,Ce]=E(be,we);A=Math.min(A,pe),I=Math.max(I,pe),O=Math.min(O,Ce),B=Math.max(B,Ce)});const W=A+T/2,U=O+T/2,Y=I-A,ie=B-O,ue=s*r,J=l*r,q=(Y+ue)*2,ce=ie+J,[re,ee]=bP(q,ce);function oe(be=0,we=0){re.drawImage(C,W,U,Y,ie,be,we,Y,ie)}return oe(),oe(Y+ue,-ie/2-J/2),oe(Y+ue,+ie/2+J/2),[ee.toDataURL(),q/r,ce/r]}return e}const bDe=Be({name:"ElWatermark"}),wDe=Be({...bDe,props:pDe,setup(e){const t=e,n={position:"relative"},r=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.color)!=null?U:"rgba(0,0,0,.15)"}),i=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.fontSize)!=null?U:16}),a=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.fontWeight)!=null?U:"normal"}),o=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.fontStyle)!=null?U:"normal"}),s=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.fontFamily)!=null?U:"sans-serif"}),l=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.textAlign)!=null?U:"center"}),c=X(()=>{var W,U;return(U=(W=t.font)==null?void 0:W.textBaseline)!=null?U:"hanging"}),h=X(()=>t.gap[0]),f=X(()=>t.gap[1]),p=X(()=>h.value/2),v=X(()=>f.value/2),_=X(()=>{var W,U;return(U=(W=t.offset)==null?void 0:W[0])!=null?U:p.value}),b=X(()=>{var W,U;return(U=(W=t.offset)==null?void 0:W[1])!=null?U:v.value}),C=()=>{const W={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let U=_.value-p.value,Y=b.value-v.value;return U>0&&(W.left=`${U}px`,W.width=`calc(100% - ${U}px)`,U=0),Y>0&&(W.top=`${Y}px`,W.height=`calc(100% - ${Y}px)`,Y=0),W.backgroundPosition=`${U}px ${Y}px`,W},T=_i(null),E=_i(),A=le(!1),I=()=>{E.value&&(E.value.remove(),E.value=void 0)},O=(W,U)=>{var Y;T.value&&E.value&&(A.value=!0,E.value.setAttribute("style",mDe({...C(),backgroundImage:`url('${W}')`,backgroundSize:`${Math.floor(U)}px`})),(Y=T.value)==null||Y.append(E.value),setTimeout(()=>{A.value=!1}))},B=W=>{let U=120,Y=64;const ie=t.image,ue=t.content,J=t.width,q=t.height;if(!ie&&W.measureText){W.font=`${Number(i.value)}px ${s.value}`;const ce=Array.isArray(ue)?ue:[ue],re=ce.map(ee=>{const oe=W.measureText(ee);return[oe.width,oe.fontBoundingBoxAscent!==void 0?oe.fontBoundingBoxAscent+oe.fontBoundingBoxDescent:oe.actualBoundingBoxAscent+oe.actualBoundingBoxDescent]});U=Math.ceil(Math.max(...re.map(ee=>ee[0]))),Y=Math.ceil(Math.max(...re.map(ee=>ee[1])))*ce.length+(ce.length-1)*iX}return[J??U,q??Y]},N=_De(),H=()=>{const U=document.createElement("canvas").getContext("2d"),Y=t.image,ie=t.content,ue=t.rotate;if(U){E.value||(E.value=document.createElement("div"));const J=gDe(),[q,ce]=B(U),re=ee=>{const[oe,be]=N(ee||"",ue,J,q,ce,{color:r.value,fontSize:i.value,fontStyle:o.value,fontWeight:a.value,fontFamily:s.value,textAlign:l.value,textBaseline:c.value},h.value,f.value);O(oe,be)};if(Y){const ee=new Image;ee.onload=()=>{re(ee)},ee.onerror=()=>{re(ie)},ee.crossOrigin="anonymous",ee.referrerPolicy="no-referrer",ee.src=Y}else re(ie)}};return Un(()=>{H()}),At(()=>t,()=>{H()},{deep:!0,flush:"post"}),ui(()=>{I()}),_G(T,W=>{A.value||W.forEach(U=>{yDe(U,E.value)&&(I(),H())})},{attributes:!0,subtree:!0,childList:!0}),(W,U)=>(te(),me("div",{ref_key:"containerRef",ref:T,style:_n([n])},[st(W.$slots,"default")],4))}});var xDe=Kt(wDe,[["__file","watermark.vue"]]);const SDe=Wn(xDe),CDe=Wt({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Qe(Object)},targetAreaClickable:{type:Boolean,default:!0}}),TDe=(e,t,n,r,i)=>{const a=le(null),o=()=>{let f;return Ln(e.value)?f=document.querySelector(e.value):Dn(e.value)?f=e.value():f=e.value,f},s=()=>{const f=o();if(!f||!t.value){a.value=null;return}!MDe(f)&&t.value&&f.scrollIntoView(i.value);const{left:p,top:v,width:_,height:b}=f.getBoundingClientRect();a.value={left:p,top:v,width:_,height:b,radius:0}};Un(()=>{At([t,e],()=>{s()},{immediate:!0}),window.addEventListener("resize",s)}),ui(()=>{window.removeEventListener("resize",s)});const l=f=>{var p;return(p=sn(n.value.offset)?n.value.offset[f]:n.value.offset)!=null?p:6},c=X(()=>{var f;if(!a.value)return a.value;const p=l(0),v=l(1),_=((f=n.value)==null?void 0:f.radius)||2;return{left:a.value.left-p,top:a.value.top-v,width:a.value.width+p*2,height:a.value.height+v*2,radius:_}}),h=X(()=>{const f=o();return!r.value||!f||!window.DOMRect?f||void 0:{getBoundingClientRect(){var p,v,_,b;return window.DOMRect.fromRect({width:((p=c.value)==null?void 0:p.width)||0,height:((v=c.value)==null?void 0:v.height)||0,x:((_=c.value)==null?void 0:_.left)||0,y:((b=c.value)==null?void 0:b.top)||0})}}});return{mergedPosInfo:c,triggerTarget:h}},gk=Symbol("ElTour");function MDe(e){const t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:i,bottom:a,left:o}=e.getBoundingClientRect();return r>=0&&o>=0&&i<=t&&a<=n}const kDe=(e,t,n,r,i,a,o,s)=>{const l=le(),c=le(),h=le({}),f={x:l,y:c,placement:r,strategy:i,middlewareData:h},p=X(()=>{const T=[GK(w(a)),oye(),aye(),EDe()];return w(s)&&w(n)&&T.push(KK({element:w(n)})),T}),v=async()=>{if(!xr)return;const T=w(e),E=w(t);if(!T||!E)return;const A=await qK(T,E,{placement:w(r),strategy:w(i),middleware:w(p)});Wy(f).forEach(I=>{f[I].value=A[I]})},_=X(()=>{if(!w(e))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:w(o)};const{overflow:T}=w(h);return{position:w(i),zIndex:w(o),top:w(c)!=null?`${w(c)}px`:"",left:w(l)!=null?`${w(l)}px`:"",maxWidth:T!=null&&T.maxWidth?`${T==null?void 0:T.maxWidth}px`:""}}),b=X(()=>{if(!w(s))return{};const{arrow:T}=w(h);return{left:(T==null?void 0:T.x)!=null?`${T==null?void 0:T.x}px`:"",top:(T==null?void 0:T.y)!=null?`${T==null?void 0:T.y}px`:""}});let C;return Un(()=>{const T=w(e),E=w(t);T&&E&&(C=rye(T,E,v)),ko(()=>{v()})}),ui(()=>{C&&C()}),{update:v,contentStyle:_,arrowStyle:b}},EDe=()=>({name:"overflow",async fn(e){const t=await iye(e);let n=0;return t.left>0&&(n=t.left),t.right>0&&(n=t.right),{data:{maxWidth:e.rects.floating.width-n}}}}),ADe=Be({name:"ElTourMask",inheritAttrs:!1}),PDe=Be({...ADe,props:CDe,setup(e){const t=e,{ns:n}=un(gk),r=X(()=>{var s,l;return(l=(s=t.pos)==null?void 0:s.radius)!=null?l:2}),i=X(()=>{const s=r.value,l=`a${s},${s} 0 0 1`;return{topRight:`${l} ${s},${s}`,bottomRight:`${l} ${-s},${s}`,bottomLeft:`${l} ${-s},${-s}`,topLeft:`${l} ${s},${-s}`}}),a=X(()=>{const s=window.innerWidth,l=window.innerHeight,c=i.value,h=`M${s},0 L0,0 L0,${l} L${s},${l} L${s},0 Z`,f=r.value;return t.pos?`${h} M${t.pos.left+f},${t.pos.top} h${t.pos.width-f*2} ${c.topRight} v${t.pos.height-f*2} ${c.bottomRight} h${-t.pos.width+f*2} ${c.bottomLeft} v${-t.pos.height+f*2} ${c.topLeft} z`:h}),o=X(()=>({fill:t.fill,pointerEvents:"auto",cursor:"auto"}));return X3(Gr(t,"visible"),{ns:n}),(s,l)=>s.visible?(te(),me("div",sr({key:0,class:w(n).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:s.zIndex,pointerEvents:s.pos&&s.targetAreaClickable?"none":"auto"}},s.$attrs),[(te(),me("svg",{style:{width:"100%",height:"100%"}},[V("path",{class:se(w(n).e("hollow")),style:_n(w(o)),d:w(a)},null,14,["d"])]))],16)):Ge("v-if",!0)}});var IDe=Kt(PDe,[["__file","mask.vue"]]);const LDe=["absolute","fixed"],DDe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],iz=Wt({placement:{type:Qe(String),values:DDe,default:"bottom"},reference:{type:Qe(Object),default:null},strategy:{type:Qe(String),values:LDe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),RDe={close:()=>!0},ODe=Be({name:"ElTourContent"}),zDe=Be({...ODe,props:iz,emits:RDe,setup(e,{emit:t}){const n=e,r=le(n.placement),i=le(n.strategy),a=le(null),o=le(null);At(()=>n.placement,()=>{r.value=n.placement});const{contentStyle:s,arrowStyle:l}=kDe(Gr(n,"reference"),a,o,r,i,Gr(n,"offset"),Gr(n,"zIndex"),Gr(n,"showArrow")),c=X(()=>r.value.split("-")[0]),{ns:h}=un(gk),f=()=>{t("close")},p=v=>{v.detail.focusReason==="pointer"&&v.preventDefault()};return(v,_)=>(te(),me("div",{ref_key:"contentRef",ref:a,style:_n(w(s)),class:se(w(h).e("content")),"data-side":w(c),tabindex:"-1"},[de(w(hx),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":a.value||void 0,onReleaseRequested:f,onFocusoutPrevented:p},{default:ge(()=>[st(v.$slots,"default")]),_:3},8,["focus-trap-el"]),v.showArrow?(te(),me("span",{key:0,ref_key:"arrowRef",ref:o,style:_n(w(l)),class:se(w(h).e("arrow"))},null,6)):Ge("v-if",!0)],14,["data-side"]))}});var BDe=Kt(zDe,[["__file","content.vue"]]),FDe=Be({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(e,{slots:t,emit:n}){let r=0;return()=>{var i,a;const o=(i=t.default)==null?void 0:i.call(t),s=[];let l=0;function c(h){sn(h)&&h.forEach(f=>{var p;((p=(f==null?void 0:f.type)||{})==null?void 0:p.name)==="ElTourStep"&&(s.push(f),l+=1)})}return o.length&&c(xf((a=o[0])==null?void 0:a.children)),r!==l&&(r=l,n("update-total",l)),s.length?s[e.current]:null}}});const NDe=Wt({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:si},placement:iz.placement,contentStyle:{type:Qe([Object])},mask:{type:Qe([Boolean,Object]),default:!0},gap:{type:Qe(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Qe([Boolean,Object]),default:()=>({block:"center"})},type:{type:Qe(String)},appendTo:{type:Qe([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),$De={[tr]:e=>pa(e),"update:current":e=>zn(e),close:e=>zn(e),finish:()=>!0,change:e=>zn(e)},VDe=Be({name:"ElTour"}),HDe=Be({...VDe,props:NDe,emits:$De,setup(e,{emit:t}){const n=e,r=Rt("tour"),i=le(0),a=le(),o=bG(n,"current",t,{passive:!0}),s=X(()=>{var j;return(j=a.value)==null?void 0:j.target}),l=X(()=>[r.b(),C.value==="primary"?r.m("primary"):""]),c=X(()=>{var j;return((j=a.value)==null?void 0:j.placement)||n.placement}),h=X(()=>{var j,W;return(W=(j=a.value)==null?void 0:j.contentStyle)!=null?W:n.contentStyle}),f=X(()=>{var j,W;return(W=(j=a.value)==null?void 0:j.mask)!=null?W:n.mask}),p=X(()=>!!f.value&&n.modelValue),v=X(()=>pa(f.value)?void 0:f.value),_=X(()=>{var j,W;return!!s.value&&((W=(j=a.value)==null?void 0:j.showArrow)!=null?W:n.showArrow)}),b=X(()=>{var j,W;return(W=(j=a.value)==null?void 0:j.scrollIntoViewOptions)!=null?W:n.scrollIntoViewOptions}),C=X(()=>{var j,W;return(W=(j=a.value)==null?void 0:j.type)!=null?W:n.type}),{nextZIndex:T}=k0(),E=T(),A=X(()=>{var j;return(j=n.zIndex)!=null?j:E}),{mergedPosInfo:I,triggerTarget:O}=TDe(s,Gr(n,"modelValue"),Gr(n,"gap"),f,b);At(()=>n.modelValue,j=>{j||(o.value=0)});const B=()=>{n.closeOnPressEscape&&(t("update:modelValue",!1),t("close",o.value))},N=j=>{i.value=j},H=qa();return pr(gk,{currentStep:a,current:o,total:i,showClose:Gr(n,"showClose"),closeIcon:Gr(n,"closeIcon"),mergedType:C,ns:r,slots:H,updateModelValue(j){t("update:modelValue",j)},onClose(){t("close",o.value)},onFinish(){t("finish")},onChange(){t("change",o.value)}}),(j,W)=>(te(),me(hn,null,[de(w(P0),{to:j.appendTo},{default:ge(()=>{var U,Y;return[V("div",sr({class:w(l)},j.$attrs),[de(IDe,{visible:w(p),fill:(U=w(v))==null?void 0:U.color,style:_n((Y=w(v))==null?void 0:Y.style),pos:w(I),"z-index":w(A),"target-area-clickable":j.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),j.modelValue?(te(),ft(BDe,{key:w(o),reference:w(O),placement:w(c),"show-arrow":w(_),"z-index":w(A),style:_n(w(h)),onClose:B},{default:ge(()=>[de(w(FDe),{current:w(o),onUpdateTotal:N},{default:ge(()=>[st(j.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Ge("v-if",!0)],16)]}),_:3},8,["to"]),Ge(" just for IDE "),Ge("v-if",!0)],64))}});var jDe=Kt(HDe,[["__file","tour.vue"]]);const UDe=Wt({target:{type:Qe([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:si},showArrow:{type:Boolean,default:void 0},placement:iz.placement,mask:{type:Qe([Boolean,Object]),default:void 0},contentStyle:{type:Qe([Object])},prevButtonProps:{type:Qe(Object)},nextButtonProps:{type:Qe(Object)},scrollIntoViewOptions:{type:Qe([Boolean,Object]),default:void 0},type:{type:Qe(String)}}),WDe={close:()=>!0},GDe=Be({name:"ElTourStep"}),KDe=Be({...GDe,props:UDe,emits:WDe,setup(e,{emit:t}){const n=e,{Close:r}=G3,{t:i}=Sr(),{currentStep:a,current:o,total:s,showClose:l,closeIcon:c,mergedType:h,ns:f,slots:p,updateModelValue:v,onClose:_,onFinish:b,onChange:C}=un(gk);At(n,H=>{a.value=H},{immediate:!0});const T=X(()=>{var H;return(H=n.showClose)!=null?H:l.value}),E=X(()=>{var H,j;return(j=(H=n.closeIcon)!=null?H:c.value)!=null?j:r}),A=H=>{if(H)return kpe(H,["children","onClick"])},I=()=>{var H,j;o.value-=1,(H=n.prevButtonProps)!=null&&H.onClick&&((j=n.prevButtonProps)==null||j.onClick()),C()},O=()=>{var H;o.value>=s.value-1?B():o.value+=1,(H=n.nextButtonProps)!=null&&H.onClick&&n.nextButtonProps.onClick(),C()},B=()=>{N(),b()},N=()=>{v(!1),_(),t("close")};return(H,j)=>(te(),me(hn,null,[w(T)?(te(),me("button",{key:0,"aria-label":"Close",class:se(w(f).e("closebtn")),type:"button",onClick:N},[de(w(yn),{class:se(w(f).e("close"))},{default:ge(()=>[(te(),ft(ir(w(E))))]),_:1},8,["class"])],2)):Ge("v-if",!0),V("header",{class:se([w(f).e("header"),{"show-close":w(l)}])},[st(H.$slots,"header",{},()=>[V("span",{role:"heading",class:se(w(f).e("title"))},Xe(H.title),3)])],2),V("div",{class:se(w(f).e("body"))},[st(H.$slots,"default",{},()=>[V("span",null,Xe(H.description),1)])],2),V("footer",{class:se(w(f).e("footer"))},[V("div",{class:se(w(f).b("indicators"))},[w(p).indicators?(te(),ft(ir(w(p).indicators),{key:0,current:w(o),total:w(s)},null,8,["current","total"])):(te(!0),me(hn,{key:1},Kn(w(s),(W,U)=>(te(),me("span",{key:W,class:se([w(f).b("indicator"),U===w(o)?"is-active":""])},null,2))),128))],2),V("div",{class:se(w(f).b("buttons"))},[w(o)>0?(te(),ft(w(io),sr({key:0,size:"small",type:w(h)},A(H.prevButtonProps),{onClick:I}),{default:ge(()=>{var W,U;return[$t(Xe((U=(W=H.prevButtonProps)==null?void 0:W.children)!=null?U:w(i)("el.tour.previous")),1)]}),_:1},16,["type"])):Ge("v-if",!0),w(o)<=w(s)-1?(te(),ft(w(io),sr({key:1,size:"small",type:w(h)==="primary"?"default":"primary"},A(H.nextButtonProps),{onClick:O}),{default:ge(()=>{var W,U;return[$t(Xe((U=(W=H.nextButtonProps)==null?void 0:W.children)!=null?U:w(o)===w(s)-1?w(i)("el.tour.finish"):w(i)("el.tour.next")),1)]}),_:1},16,["type"])):Ge("v-if",!0)],2)],2)],64))}});var aX=Kt(KDe,[["__file","step.vue"]]);const qDe=Wn(jDe,{TourStep:aX}),ZDe=Ki(aX),YDe=Wt({container:{type:Qe([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Qe(String),default:"default"},direction:{type:Qe(String),default:"vertical"}}),XDe={change:e=>Ln(e),click:(e,t)=>e instanceof MouseEvent&&(Ln(t)||aa(t))},oX=Symbol("anchor"),JDe=Be({name:"ElAnchor"}),QDe=Be({...JDe,props:YDe,emits:XDe,setup(e,{expose:t,emit:n}){const r=e,i=le(""),a=le(null),o=le(null),s=le(),l={};let c=!1,h=0;const f=Rt("anchor"),p=X(()=>[f.b(),r.type==="underline"?f.m("underline"):"",f.m(r.direction)]),v=H=>{l[H.href]=H.el},_=H=>{delete l[H]},b=H=>{i.value!==H&&(i.value=H,n("change",H))};let C=null;const T=H=>{if(!s.value)return;const j=e2(H);if(!j)return;C&&C(),c=!0;const W=z8(j,s.value),U=UL(j,W),Y=W.scrollHeight-W.clientHeight,ie=Math.min(U-r.offset,Y);C=$pe(s.value,h,ie,r.duration,()=>{setTimeout(()=>{c=!1},20)})},E=H=>{H&&(b(H),T(H))},A=(H,j)=>{n("click",H,j),E(j)},I=ime(()=>{s.value&&(h=B8(s.value));const H=O();c||aa(H)||b(H)}),O=()=>{if(!s.value)return;const H=B8(s.value),j=[];for(const W of Object.keys(l)){const U=e2(W);if(!U)continue;const Y=z8(U,s.value),ie=UL(U,Y);j.push({top:ie-r.offset-r.bound,href:W})}j.sort((W,U)=>W.top-U.top);for(let W=0;W<j.length;W++){const U=j[W],Y=j[W+1];if(W===0&&H===0)return"";if(U.top<=H&&(!Y||Y.top>H))return U.href}},B=()=>{const H=e2(r.container);!H||JM(H)?s.value=window:s.value=H};ti(s,"scroll",I);const N=X(()=>{if(!a.value||!o.value||!i.value)return{};const H=l[i.value];if(!H)return{};const j=a.value.getBoundingClientRect(),W=o.value.getBoundingClientRect(),U=H.getBoundingClientRect();return r.direction==="horizontal"?{left:`${U.left-j.left}px`,width:`${U.width}px`,opacity:1}:{top:`${U.top-j.top+(U.height-W.height)/2}px`,opacity:1}});return Un(()=>{B();const H=decodeURIComponent(window.location.hash);e2(H)?E(H):I()}),At(()=>r.container,()=>{B()}),pr(oX,{ns:f,direction:r.direction,currentAnchor:i,addLink:v,removeLink:_,handleClick:A}),t({scrollTo:E}),(H,j)=>(te(),me("div",{ref_key:"anchorRef",ref:a,class:se(w(p))},[H.marker?(te(),me("div",{key:0,ref_key:"markerRef",ref:o,class:se(w(f).e("marker")),style:_n(w(N))},null,6)):Ge("v-if",!0),V("div",{class:se(w(f).e("list"))},[st(H.$slots,"default")],2)],2))}});var eRe=Kt(QDe,[["__file","anchor.vue"]]);const tRe=Wt({title:String,href:String}),nRe=Be({name:"ElAnchorLink"}),rRe=Be({...nRe,props:tRe,setup(e){const t=e,n=le(null),{ns:r,direction:i,currentAnchor:a,addLink:o,removeLink:s,handleClick:l}=un(oX),c=X(()=>[r.e("link"),r.is("active",a.value===t.href)]),h=f=>{l(f,t.href)};return At(()=>t.href,(f,p)=>{bn(()=>{p&&s(p),f&&o({href:f,el:n.value})})}),Un(()=>{const{href:f}=t;f&&o({href:f,el:n.value})}),ui(()=>{const{href:f}=t;f&&s(f)}),(f,p)=>(te(),me("div",{class:se(w(r).e("item"))},[V("a",{ref_key:"linkRef",ref:n,class:se(w(c)),href:f.href,onClick:h},[st(f.$slots,"default",{},()=>[$t(Xe(f.title),1)])],10,["href"]),f.$slots["sub-link"]&&w(i)==="vertical"?(te(),me("div",{key:0,class:se(w(r).e("list"))},[st(f.$slots,"sub-link")],2)):Ge("v-if",!0)],2))}});var sX=Kt(rRe,[["__file","anchor-link.vue"]]);const iRe=Wn(eRe,{AnchorLink:sX}),aRe=Ki(sX),oRe=Wt({options:{type:Qe(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:$a,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...yo(["ariaLabel"])}),sRe={[tr]:e=>Ln(e)||zn(e)||pa(e),[ki]:e=>Ln(e)||zn(e)||pa(e)},lRe=Be({name:"ElSegmented"}),uRe=Be({...lRe,props:oRe,emits:sRe,setup(e,{emit:t}){const n=e,r=Rt("segmented"),i=mo(),a=Ea(),o=Ts(),{formItem:s}=es(),{inputId:l,isLabeledByFormItem:c}=ac(n,{formItemContext:s}),h=le(null),f=Wle(),p=Ar({isInit:!1,width:0,translateX:0,focusVisible:!1}),v=j=>{const W=_(j);t(tr,W),t(ki,W)},_=j=>nr(j)?j.value:j,b=j=>nr(j)?j.label:j,C=j=>!!(o.value||nr(j)&&j.disabled),T=j=>n.modelValue===_(j),E=j=>n.options.find(W=>_(W)===j),A=j=>[r.e("item"),r.is("selected",T(j)),r.is("disabled",C(j))],I=()=>{if(!h.value)return;const j=h.value.querySelector(".is-selected"),W=h.value.querySelector(".is-selected input");if(!j||!W){p.width=0,p.translateX=0,p.focusVisible=!1;return}const U=j.getBoundingClientRect();p.isInit=!0,p.width=U.width,p.translateX=j.offsetLeft;try{p.focusVisible=W.matches(":focus-visible")}catch{}},O=X(()=>[r.b(),r.m(a.value),r.is("block",n.block)]),B=X(()=>({width:`${p.width}px`,transform:`translateX(${p.translateX}px)`,display:p.isInit?"block":"none"})),N=X(()=>[r.e("item-selected"),r.is("disabled",C(E(n.modelValue))),r.is("focus-visible",p.focusVisible)]),H=X(()=>n.name||i.value);return Hi(h,I),At(f,I),At(()=>n.modelValue,()=>{var j;I(),n.validateEvent&&((j=s==null?void 0:s.validate)==null||j.call(s,"change").catch(W=>void 0))},{flush:"post"}),(j,W)=>(te(),me("div",{id:w(l),ref_key:"segmentedRef",ref:h,class:se(w(O)),role:"radiogroup","aria-label":w(c)?void 0:j.ariaLabel||"segmented","aria-labelledby":w(c)?w(s).labelId:void 0},[V("div",{class:se(w(r).e("group"))},[V("div",{style:_n(w(B)),class:se(w(N))},null,6),(te(!0),me(hn,null,Kn(j.options,(U,Y)=>(te(),me("label",{key:Y,class:se(A(U))},[V("input",{class:se(w(r).e("item-input")),type:"radio",name:w(H),disabled:C(U),checked:T(U),onChange:ie=>v(U)},null,42,["name","disabled","checked","onChange"]),V("div",{class:se(w(r).e("item-label"))},[st(j.$slots,"default",{item:U},()=>[$t(Xe(b(U)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"]))}});var cRe=Kt(uRe,[["__file","segmented.vue"]]);const dRe=Wn(cRe),hRe=(e,t)=>{const n=e.toLowerCase();return(t.label||t.value).toLowerCase().includes(n)},fRe=(e,t,n)=>{const{selectionEnd:r}=e;if(r===null)return;const i=e.value,a=Wo(t);let o=-1,s;for(let l=r-1;l>=0;--l){const c=i[l];if(c===n||c===`
`||c==="\r"){o=l;continue}if(a.includes(c)){const h=o===-1?r:o;s={pattern:i.slice(l+1,h),start:l+1,end:h,prefix:c,prefixIndex:l,splitIndex:o,selectionEnd:r};break}}return s},pRe=(e,t={debug:!1,useSelectionEnd:!1})=>{const n=e.selectionStart!==null?e.selectionStart:0,r=e.selectionEnd!==null?e.selectionEnd:0,i=t.useSelectionEnd?r:n,a=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(t.debug){const p=document.querySelector("#input-textarea-caret-position-mirror-div");p!=null&&p.parentNode&&p.parentNode.removeChild(p)}const o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);const s=o.style,l=window.getComputedStyle(e),c=e.nodeName==="INPUT";s.whiteSpace=c?"nowrap":"pre-wrap",c||(s.wordWrap="break-word"),s.position="absolute",t.debug||(s.visibility="hidden"),a.forEach(p=>{if(c&&p==="lineHeight")if(l.boxSizing==="border-box"){const v=Number.parseInt(l.height),_=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),b=_+Number.parseInt(l.lineHeight);v>b?s.lineHeight=`${v-_}px`:v===b?s.lineHeight=l.lineHeight:s.lineHeight="0"}else s.lineHeight=l.height;else s[p]=l[p]}),x3()?e.scrollHeight>Number.parseInt(l.height)&&(s.overflowY="scroll"):s.overflow="hidden",o.textContent=e.value.slice(0,Math.max(0,i)),c&&o.textContent&&(o.textContent=o.textContent.replace(/\s/g," "));const h=document.createElement("span");h.textContent=e.value.slice(Math.max(0,i))||".",h.style.position="relative",h.style.left=`${-e.scrollLeft}px`,h.style.top=`${-e.scrollTop}px`,o.appendChild(h);const f={top:h.offsetTop+Number.parseInt(l.borderTopWidth),left:h.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return t.debug?h.style.backgroundColor="#aaa":document.body.removeChild(o),f.left>=e.clientWidth&&(f.left=e.clientWidth),f},vRe=Wt({...m5,options:{type:Qe(Array),default:()=>[]},prefix:{type:Qe([String,Array]),default:"@",validator:e=>Ln(e)?e.length===1:e.every(t=>Ln(t)&&t.length===1)},split:{type:String,default:" ",validator:e=>e.length===1},filterOption:{type:Qe([Boolean,Function]),default:()=>hRe,validator:e=>e===!1?!0:Dn(e)},placement:{type:Qe(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:Qe(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Qe(Object),default:()=>({})}}),mRe={[tr]:e=>Ln(e),search:(e,t)=>Ln(e)&&Ln(t),select:(e,t)=>Ln(e.value)&&Ln(t),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},gRe=Wt({options:{type:Qe(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),yRe={select:e=>Ln(e.value)},_Re=Be({name:"ElMentionDropdown"}),bRe=Be({..._Re,props:gRe,emits:yRe,setup(e,{expose:t,emit:n}){const r=e,i=Rt("mention"),{t:a}=Sr(),o=le(-1),s=le(),l=le(),c=le(),h=(A,I)=>[i.be("dropdown","item"),i.is("hovering",o.value===I),i.is("disabled",A.disabled||r.disabled)],f=A=>{A.disabled||r.disabled||n("select",A)},p=A=>{o.value=A},v=X(()=>r.disabled||r.options.every(A=>A.disabled)),_=X(()=>r.options[o.value]),b=()=>{_.value&&n("select",_.value)},C=A=>{const{options:I}=r;if(I.length===0||v.value)return;A==="next"?(o.value++,o.value===I.length&&(o.value=0)):A==="prev"&&(o.value--,o.value<0&&(o.value=I.length-1));const O=I[o.value];if(O.disabled){C(A);return}bn(()=>T(O))},T=A=>{var I,O,B,N;const{options:H}=r,j=H.findIndex(U=>U.value===A.value),W=(I=l.value)==null?void 0:I[j];if(W){const U=(B=(O=c.value)==null?void 0:O.querySelector)==null?void 0:B.call(O,`.${i.be("dropdown","wrap")}`);U&&V3(U,W)}(N=s.value)==null||N.handleScroll()};return At(()=>r.options,()=>{v.value||r.options.length===0?o.value=-1:o.value=0},{immediate:!0}),t({hoveringIndex:o,navigateOptions:C,selectHoverOption:b,hoverOption:_}),(A,I)=>(te(),me("div",{ref_key:"dropdownRef",ref:c,class:se(w(i).b("dropdown"))},[A.$slots.header?(te(),me("div",{key:0,class:se(w(i).be("dropdown","header"))},[st(A.$slots,"header")],2)):Ge("v-if",!0),In(de(w(ad),{id:A.contentId,ref_key:"scrollbarRef",ref:s,tag:"ul","wrap-class":w(i).be("dropdown","wrap"),"view-class":w(i).be("dropdown","list"),role:"listbox","aria-label":A.ariaLabel,"aria-orientation":"vertical"},{default:ge(()=>[(te(!0),me(hn,null,Kn(A.options,(O,B)=>(te(),me("li",{id:`${A.contentId}-${B}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:O.value,class:se(h(O,B)),role:"option","aria-disabled":O.disabled||A.disabled||void 0,"aria-selected":o.value===B,onMouseenter:N=>p(B),onClick:Fn(N=>f(O),["stop"])},[st(A.$slots,"label",{item:O,index:B},()=>{var N;return[V("span",null,Xe((N=O.label)!=null?N:O.value),1)]})],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Lr,A.options.length>0&&!A.loading]]),A.loading?(te(),me("div",{key:1,class:se(w(i).be("dropdown","loading"))},[st(A.$slots,"loading",{},()=>[$t(Xe(w(a)("el.mention.loading")),1)])],2)):Ge("v-if",!0),A.$slots.footer?(te(),me("div",{key:2,class:se(w(i).be("dropdown","footer"))},[st(A.$slots,"footer")],2)):Ge("v-if",!0)],2))}});var wRe=Kt(bRe,[["__file","mention-dropdown.vue"]]);const xRe=Be({name:"ElMention"}),SRe=Be({...xRe,props:vRe,emits:mRe,setup(e,{expose:t,emit:n}){const r=e,i=X(()=>Nu(r,Object.keys(m5))),a=Rt("mention"),o=mo(),s=le(),l=le(),c=le(),h=le(!1),f=le(),p=le(),v=X(()=>r.showArrow?r.placement:`${r.placement}-start`),_=X(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),b=X(()=>{const{filterOption:U,options:Y}=r;return!p.value||!U?Y:Y.filter(ie=>U(p.value.pattern,ie))}),C=X(()=>h.value&&(!!b.value.length||r.loading)),T=X(()=>{var U;return`${o.value}-${(U=c.value)==null?void 0:U.hoveringIndex}`}),E=U=>{n("update:modelValue",U),H()},A=U=>{var Y,ie,ue,J;if("key"in U&&!((Y=s.value)!=null&&Y.isComposing)){if(["ArrowLeft","ArrowRight"].includes(U.key))H();else if(["ArrowUp","ArrowDown"].includes(U.key)){if(!h.value)return;U.preventDefault();const q=U.key==="ArrowUp"?"prev":"next";(ie=c.value)==null||ie.navigateOptions(q)}else if(["Enter"].includes(U.key)){if(!h.value)return;U.preventDefault(),(ue=c.value)!=null&&ue.hoverOption?(J=c.value)==null||J.selectHoverOption():h.value=!1}else if(["Escape"].includes(U.key)){if(!h.value)return;U.preventDefault(),h.value=!1}else if(["Backspace"].includes(U.key)&&r.whole&&p.value){const{splitIndex:q,selectionEnd:ce,pattern:re,prefixIndex:ee,prefix:oe}=p.value,be=N();if(!be)return;const we=be.value,pe=r.options.find(Ve=>Ve.value===re);if((Dn(r.checkIsWhole)?r.checkIsWhole(re,oe):pe)&&q!==-1&&q+1===ce){U.preventDefault();const Ve=we.slice(0,ee)+we.slice(q+1);n(tr,Ve);const et=ee;bn(()=>{be.selectionStart=et,be.selectionEnd=et,W()})}}}},{wrapperRef:I}=cx(s,{afterFocus(){H()},beforeBlur(U){var Y;return(Y=l.value)==null?void 0:Y.isFocusInsideContent(U)},afterBlur(){h.value=!1}}),O=()=>{H()},B=U=>{if(!p.value)return;const Y=N();if(!Y)return;const ie=Y.value,{split:ue}=r,J=ie.slice(p.value.end),q=J.startsWith(ue),ce=`${U.value}${q?"":ue}`,re=ie.slice(0,p.value.start)+ce+J;n(tr,re),n("select",U,p.value.prefix);const ee=p.value.start+ce.length+(q?1:0);bn(()=>{Y.selectionStart=ee,Y.selectionEnd=ee,Y.focus(),W()})},N=()=>{var U,Y;return r.type==="textarea"?(U=s.value)==null?void 0:U.textarea:(Y=s.value)==null?void 0:Y.input},H=()=>{setTimeout(()=>{j(),W(),bn(()=>{var U;return(U=l.value)==null?void 0:U.updatePopper()})},0)},j=()=>{const U=N();if(!U)return;const Y=pRe(U),ie=U.getBoundingClientRect(),ue=s.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${Y.height}px`,left:`${Y.left+ie.left-ue.left}px`,top:`${Y.top+ie.top-ue.top}px`}},W=()=>{const U=N();if(document.activeElement!==U){h.value=!1;return}const{prefix:Y,split:ie}=r;if(p.value=fRe(U,Y,ie),p.value&&p.value.splitIndex===-1){h.value=!0,n("search",p.value.pattern,p.value.prefix);return}h.value=!1};return t({input:s,tooltip:l}),(U,Y)=>(te(),me("div",{ref_key:"wrapperRef",ref:I,class:se(w(a).b())},[de(w(Zo),sr(sr(w(i),U.$attrs),{ref_key:"elInputRef",ref:s,"model-value":U.modelValue,role:w(C)?"combobox":void 0,"aria-activedescendant":w(C)?w(T)||"":void 0,"aria-controls":w(C)?w(o):void 0,"aria-expanded":w(C)||void 0,"aria-label":U.ariaLabel,"aria-autocomplete":w(C)?"none":void 0,"aria-haspopup":w(C)?"listbox":void 0,onInput:E,onKeydown:A,onMousedown:O}),Zu({_:2},[Kn(U.$slots,(ie,ue)=>({name:ue,fn:ge(J=>[st(U.$slots,ue,Bu(Pf(J)))])}))]),1040,["model-value","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),de(w(Po),{ref_key:"tooltipRef",ref:l,visible:w(C),"popper-class":[w(a).e("popper"),U.popperClass],"popper-options":U.popperOptions,placement:w(v),"fallback-placements":w(_),effect:"light",pure:"",offset:U.offset,"show-arrow":U.showArrow},{default:ge(()=>[V("div",{style:_n(f.value)},null,4)]),content:ge(()=>{var ie;return[de(wRe,{ref_key:"dropdownRef",ref:c,options:w(b),disabled:U.disabled,loading:U.loading,"content-id":w(o),"aria-label":U.ariaLabel,onSelect:B,onClick:Fn((ie=s.value)==null?void 0:ie.focus,["stop"])},Zu({_:2},[Kn(U.$slots,(ue,J)=>({name:J,fn:ge(q=>[st(U.$slots,J,Bu(Pf(q)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var CRe=Kt(SRe,[["__file","mention.vue"]]);const TRe=Wn(CRe);var MRe=[Mye,Bye,nbe,GPe,lbe,vbe,pq,kbe,Ebe,io,wq,$1e,W1e,rwe,iwe,ixe,iZ,cxe,iu,ywe,Zq,xxe,Fxe,Nxe,ck,cSe,yye,xSe,SSe,CSe,TSe,MSe,y2e,E2e,A2e,V2e,EZ,X2e,$Ce,VCe,HCe,BZ,A0e,P0e,yn,oTe,FZ,Zo,NZ,gTe,BTe,FTe,NTe,$Te,GTe,BMe,jMe,JMe,dq,qZ,nZ,Iwe,Pwe,lke,fke,gxe,ad,rm,AT,gMe,Zke,rEe,iEe,IEe,zEe,fY,KEe,nAe,rAe,uAe,sPe,lPe,WPe,oIe,sIe,cw,hIe,b1e,yIe,SIe,CIe,Po,ZIe,lLe,FT,kLe,ULe,fDe,SDe,qDe,ZDe,iRe,aRe,dRe,TRe];const $l="ElInfiniteScroll",kRe=50,ERe=200,ARe=0,PRe={delay:{type:Number,default:ERe},distance:{type:Number,default:ARe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},az=(e,t)=>Object.entries(PRe).reduce((n,[r,i])=>{var a,o;const{type:s,default:l}=i,c=e.getAttribute(`infinite-scroll-${r}`);let h=(o=(a=t[c])!=null?a:c)!=null?o:l;return h=h==="false"?!1:h,h=s(h),n[r]=Number.isNaN(h)?l:h,n},{}),lX=e=>{const{observer:t}=e[$l];t&&(t.disconnect(),delete e[$l].observer)},IRe=(e,t)=>{const{container:n,containerEl:r,instance:i,observer:a,lastScrollTop:o}=e[$l],{disabled:s,distance:l}=az(e,i),{clientHeight:c,scrollHeight:h,scrollTop:f}=r,p=f-o;if(e[$l].lastScrollTop=f,a||s||p<0)return;let v=!1;if(n===e)v=h-(c+f)<=l;else{const{clientTop:_,scrollHeight:b}=e,C=UL(e,r);v=f+c>=C+_+b-l}v&&t.call(i)};function wP(e,t){const{containerEl:n,instance:r}=e[$l],{disabled:i}=az(e,r);i||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(r):lX(e))}const LRe={async mounted(e,t){const{instance:n,value:r}=t;Dn(r)||Na($l,"'v-infinite-scroll' binding value must be a function"),await bn();const{delay:i,immediate:a}=az(e,n),o=$3(e,!0),s=o===window?document.documentElement:o,l=Lv(IRe.bind(null,e,r),i);if(o){if(e[$l]={instance:n,container:o,containerEl:s,delay:i,cb:r,onScroll:l,lastScrollTop:s.scrollTop},a){const c=new MutationObserver(Lv(wP.bind(null,e,r),kRe));e[$l].observer=c,c.observe(e,{childList:!0,subtree:!0}),wP(e,r)}o.addEventListener("scroll",l)}},unmounted(e){if(!e[$l])return;const{container:t,onScroll:n}=e[$l];t==null||t.removeEventListener("scroll",n),lX(e)},async updated(e){if(!e[$l])await bn();else{const{containerEl:t,cb:n,observer:r}=e[$l];t.clientHeight&&r&&wP(e,n)}}},JD=LRe;JD.install=e=>{e.directive("InfiniteScroll",JD)};const DRe=JD;function RRe(e){let t;const n=le(!1),r=Ar({...e,originalPosition:"",originalOverflow:"",visible:!1});function i(p){r.text=p}function a(){const p=r.parent,v=f.ns;if(!p.vLoadingAddClassList){let _=p.getAttribute("loading-number");_=Number.parseInt(_)-1,_?p.setAttribute("loading-number",_.toString()):(Xo(p,v.bm("parent","relative")),p.removeAttribute("loading-number")),Xo(p,v.bm("parent","hidden"))}o(),h.unmount()}function o(){var p,v;(v=(p=f.$el)==null?void 0:p.parentNode)==null||v.removeChild(f.$el)}function s(){var p;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=setTimeout(l,400),r.visible=!1,(p=e.closed)==null||p.call(e))}function l(){if(!n.value)return;const p=r.parent;n.value=!1,p.vLoadingAddClassList=void 0,a()}const h=uG(Be({name:"ElLoading",setup(p,{expose:v}){const{ns:_,zIndex:b}=sk("loading");return v({ns:_,zIndex:b}),()=>{const C=r.spinner||r.svg,T=Mn("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...C?{innerHTML:C}:{}},[Mn("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),E=r.text?Mn("p",{class:_.b("text")},[r.text]):void 0;return Mn(Ka,{name:_.b("fade"),onAfterLeave:l},{default:ge(()=>[In(de("div",{style:{backgroundColor:r.background||""},class:[_.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[Mn("div",{class:_.b("spinner")},[T,E])]),[[Lr,r.visible]])])})}}})),f=h.mount(document.createElement("div"));return{...ao(r),setText:i,removeElLoadingChild:o,close:s,handleAfterLeave:l,vm:f,get $el(){return f.$el}}}let v2;const QD=function(e={}){if(!xr)return;const t=ORe(e);if(t.fullscreen&&v2)return v2;const n=RRe({...t,closed:()=>{var i;(i=t.closed)==null||i.call(t),t.fullscreen&&(v2=void 0)}});zRe(t,t.parent,n),E$(t,t.parent,n),t.parent.vLoadingAddClassList=()=>E$(t,t.parent,n);let r=t.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",t.parent.setAttribute("loading-number",r),t.parent.appendChild(n.$el),bn(()=>n.visible.value=t.visible),t.fullscreen&&(v2=n),n},ORe=e=>{var t,n,r,i;let a;return Ln(e.target)?a=(t=document.querySelector(e.target))!=null?t:document.body:a=e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(r=e.lock)!=null?r:!1,customClass:e.customClass||"",visible:(i=e.visible)!=null?i:!0,beforeClose:e.beforeClose,closed:e.closed,target:a}},zRe=async(e,t,n)=>{const{nextZIndex:r}=n.vm.zIndex||n.vm._.exposed.zIndex,i={};if(e.fullscreen)n.originalPosition.value=af(document.body,"position"),n.originalOverflow.value=af(document.body,"overflow"),i.zIndex=r();else if(e.parent===document.body){n.originalPosition.value=af(document.body,"position"),await bn();for(const a of["top","left"]){const o=a==="top"?"scrollTop":"scrollLeft";i[a]=`${e.target.getBoundingClientRect()[a]+document.body[o]+document.documentElement[o]-Number.parseInt(af(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])i[a]=`${e.target.getBoundingClientRect()[a]}px`}else n.originalPosition.value=af(t,"position");for(const[a,o]of Object.entries(i))n.$el.style[a]=o},E$=(e,t,n)=>{const r=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?Xo(t,r.bm("parent","relative")):Kl(t,r.bm("parent","relative")),e.fullscreen&&e.lock?Kl(t,r.bm("parent","hidden")):Xo(t,r.bm("parent","hidden"))},zC=Symbol("ElLoading"),A$=(e,t)=>{var n,r,i,a;const o=t.instance,s=p=>nr(t.value)?t.value[p]:void 0,l=p=>{const v=Ln(p)&&(o==null?void 0:o[p])||p;return v&&le(v)},c=p=>l(s(p)||e.getAttribute(`element-loading-${eh(p)}`)),h=(n=s("fullscreen"))!=null?n:t.modifiers.fullscreen,f={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:h,target:(r=s("target"))!=null?r:h?void 0:e,body:(i=s("body"))!=null?i:t.modifiers.body,lock:(a=s("lock"))!=null?a:t.modifiers.lock};e[zC]={options:f,instance:QD(f)}},BRe=(e,t)=>{for(const n of Object.keys(t))li(t[n])&&(t[n].value=e[n])},P$={mounted(e,t){t.value&&A$(e,t)},updated(e,t){const n=e[zC];t.oldValue!==t.value&&(t.value&&!t.oldValue?A$(e,t):t.value&&t.oldValue?nr(t.value)&&BRe(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[zC])==null||t.instance.close(),e[zC]=null}},FRe={install(e){e.directive("loading",P$),e.config.globalProperties.$loading=QD},directive:P$,service:QD},uX=["success","info","warning","error"],$o=ji({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:xr?document.body:void 0}),NRe=Wt({customClass:{type:String,default:$o.customClass},center:{type:Boolean,default:$o.center},dangerouslyUseHTMLString:{type:Boolean,default:$o.dangerouslyUseHTMLString},duration:{type:Number,default:$o.duration},icon:{type:si,default:$o.icon},id:{type:String,default:$o.id},message:{type:Qe([String,Object,Function]),default:$o.message},onClose:{type:Qe(Function),default:$o.onClose},showClose:{type:Boolean,default:$o.showClose},type:{type:String,values:uX,default:$o.type},plain:{type:Boolean,default:$o.plain},offset:{type:Number,default:$o.offset},zIndex:{type:Number,default:$o.zIndex},grouping:{type:Boolean,default:$o.grouping},repeatNum:{type:Number,default:$o.repeatNum}}),$Re={destroy:()=>!0},$u=s3([]),VRe=e=>{const t=$u.findIndex(i=>i.id===e),n=$u[t];let r;return t>0&&(r=$u[t-1]),{current:n,prev:r}},HRe=e=>{const{prev:t}=VRe(e);return t?t.vm.exposed.bottom.value:0},jRe=(e,t)=>$u.findIndex(r=>r.id===e)>0?16:t,URe=Be({name:"ElMessage"}),WRe=Be({...URe,props:NRe,emits:$Re,setup(e,{expose:t}){const n=e,{Close:r}=K3,{ns:i,zIndex:a}=sk("message"),{currentZIndex:o,nextZIndex:s}=a,l=le(),c=le(!1),h=le(0);let f;const p=X(()=>n.type?n.type==="error"?"danger":n.type:"info"),v=X(()=>{const N=n.type;return{[i.bm("icon",N)]:N&&Bf[N]}}),_=X(()=>n.icon||Bf[n.type]||""),b=X(()=>HRe(n.id)),C=X(()=>jRe(n.id,n.offset)+b.value),T=X(()=>h.value+C.value),E=X(()=>({top:`${C.value}px`,zIndex:o.value}));function A(){n.duration!==0&&({stop:f}=Yv(()=>{O()},n.duration))}function I(){f==null||f()}function O(){c.value=!1}function B({code:N}){N===En.esc&&O()}return Un(()=>{A(),s(),c.value=!0}),At(()=>n.repeatNum,()=>{I(),A()}),ti(document,"keydown",B),Hi(l,()=>{h.value=l.value.getBoundingClientRect().height}),t({visible:c,bottom:T,close:O}),(N,H)=>(te(),ft(Ka,{name:w(i).b("fade"),onBeforeLeave:N.onClose,onAfterLeave:j=>N.$emit("destroy"),persisted:""},{default:ge(()=>[In(V("div",{id:N.id,ref_key:"messageRef",ref:l,class:se([w(i).b(),{[w(i).m(N.type)]:N.type},w(i).is("center",N.center),w(i).is("closable",N.showClose),w(i).is("plain",N.plain),N.customClass]),style:_n(w(E)),role:"alert",onMouseenter:I,onMouseleave:A},[N.repeatNum>1?(te(),ft(w(pq),{key:0,value:N.repeatNum,type:w(p),class:se(w(i).e("badge"))},null,8,["value","type","class"])):Ge("v-if",!0),w(_)?(te(),ft(w(yn),{key:1,class:se([w(i).e("icon"),w(v)])},{default:ge(()=>[(te(),ft(ir(w(_))))]),_:1},8,["class"])):Ge("v-if",!0),st(N.$slots,"default",{},()=>[N.dangerouslyUseHTMLString?(te(),me(hn,{key:1},[Ge(" Caution here, message could've been compromised, never use user's input as message "),V("p",{class:se(w(i).e("content")),innerHTML:N.message},null,10,["innerHTML"])],2112)):(te(),me("p",{key:0,class:se(w(i).e("content"))},Xe(N.message),3))]),N.showClose?(te(),ft(w(yn),{key:2,class:se(w(i).e("closeBtn")),onClick:Fn(O,["stop"])},{default:ge(()=>[de(w(r))]),_:1},8,["class","onClick"])):Ge("v-if",!0)],46,["id"]),[[Lr,c.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var GRe=Kt(WRe,[["__file","message.vue"]]);let KRe=1;const cX=e=>{const t=!e||Ln(e)||Oi(e)||Dn(e)?{message:e}:e,n={...$o,...t};if(!n.appendTo)n.appendTo=document.body;else if(Ln(n.appendTo)){let r=document.querySelector(n.appendTo);vl(r)||(r=document.body),n.appendTo=r}return n},qRe=e=>{const t=$u.indexOf(e);if(t===-1)return;$u.splice(t,1);const{handler:n}=e;n.close()},ZRe=({appendTo:e,...t},n)=>{const r=`message_${KRe++}`,i=t.onClose,a=document.createElement("div"),o={...t,id:r,onClose:()=>{i==null||i(),qRe(h)},onDestroy:()=>{If(null,a)}},s=de(GRe,o,Dn(o.message)||Oi(o.message)?{default:Dn(o.message)?o.message:()=>o.message}:null);s.appContext=n||r0._context,If(s,a),e.appendChild(a.firstElementChild);const l=s.component,h={id:r,vnode:s,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:s.component.props};return h},r0=(e={},t)=>{if(!xr)return{close:()=>{}};if(zn(nD.max)&&$u.length>=nD.max)return{close:()=>{}};const n=cX(e);if(n.grouping&&$u.length){const i=$u.find(({vnode:a})=>{var o;return((o=a.props)==null?void 0:o.message)===n.message});if(i)return i.props.repeatNum+=1,i.props.type=n.type,i.handler}const r=ZRe(n,t);return $u.push(r),r.handler};uX.forEach(e=>{r0[e]=(t={},n)=>{const r=cX(t);return r0({...r,type:e},n)}});function YRe(e){for(const t of $u)(!e||e===t.props.type)&&t.handler.close()}r0.closeAll=YRe;r0._context=null;const XRe=vK(r0,"$message"),JRe=Be({name:"ElMessageBox",directives:{TrapFocus:a1e},components:{ElButton:io,ElFocusTrap:hx,ElInput:Zo,ElOverlay:I5,ElIcon:yn,...K3},inheritAttrs:!1,props:{buttonSize:{type:String,validator:mK},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:n,zIndex:r,ns:i,size:a}=sk("message-box",X(()=>e.buttonSize)),{t:o}=n,{nextZIndex:s}=r,l=le(!1),c=Ar({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:_r(Yc),cancelButtonLoadingIcon:_r(Yc),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:s()}),h=X(()=>{const q=c.type;return{[i.bm("icon",q)]:q&&Bf[q]}}),f=mo(),p=mo(),v=X(()=>c.icon||Bf[c.type]||""),_=X(()=>!!c.message),b=le(),C=le(),T=le(),E=le(),A=le(),I=X(()=>c.confirmButtonClass);At(()=>c.inputValue,async q=>{await bn(),e.boxType==="prompt"&&q!==null&&Y()},{immediate:!0}),At(()=>l.value,q=>{var ce,re;q&&(e.boxType!=="prompt"&&(c.autofocus?T.value=(re=(ce=A.value)==null?void 0:ce.$el)!=null?re:b.value:T.value=b.value),c.zIndex=s()),e.boxType==="prompt"&&(q?bn().then(()=>{var ee;E.value&&E.value.$el&&(c.autofocus?T.value=(ee=ie())!=null?ee:b.value:T.value=b.value)}):(c.editorErrorMessage="",c.validateError=!1))});const O=X(()=>e.draggable),B=X(()=>e.overflow);gK(b,C,O,B),Un(async()=>{await bn(),e.closeOnHashChange&&window.addEventListener("hashchange",N)}),ui(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",N)});function N(){l.value&&(l.value=!1,bn(()=>{c.action&&t("action",c.action)}))}const H=()=>{e.closeOnClickModal&&U(c.distinguishCancelAndClose?"close":"cancel")},j=o5(H),W=q=>{if(c.inputType!=="textarea")return q.preventDefault(),U("confirm")},U=q=>{var ce;e.boxType==="prompt"&&q==="confirm"&&!Y()||(c.action=q,c.beforeClose?(ce=c.beforeClose)==null||ce.call(c,q,c,N):N())},Y=()=>{if(e.boxType==="prompt"){const q=c.inputPattern;if(q&&!q.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const ce=c.inputValidator;if(typeof ce=="function"){const re=ce(c.inputValue);if(re===!1)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if(typeof re=="string")return c.editorErrorMessage=re,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},ie=()=>{const q=E.value.$refs;return q.input||q.textarea},ue=()=>{U("close")},J=()=>{e.closeOnPressEscape&&ue()};return e.lockScroll&&X3(l),{...ao(c),ns:i,overlayEvent:j,visible:l,hasMessage:_,typeClass:h,contentId:f,inputId:p,btnSize:a,iconComponent:v,confirmButtonClasses:I,rootRef:b,focusStartRef:T,headerRef:C,inputRef:E,confirmRef:A,doClose:N,handleClose:ue,onCloseRequested:J,handleWrapperClick:H,handleInputEnter:W,handleAction:U,t:o}}});function QRe(e,t,n,r,i,a){const o=Xt("el-icon"),s=Xt("close"),l=Xt("el-input"),c=Xt("el-button"),h=Xt("el-focus-trap"),f=Xt("el-overlay");return te(),ft(Ka,{name:"fade-in-linear",onAfterLeave:p=>e.$emit("vanish"),persisted:""},{default:ge(()=>[In(de(f,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:ge(()=>[V("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:se(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[de(h,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:ge(()=>[V("div",{ref:"rootRef",class:se([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:_n(e.customStyle),tabindex:"-1",onClick:Fn(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(te(),me("div",{key:0,ref:"headerRef",class:se([e.ns.e("header"),{"show-close":e.showClose}])},[V("div",{class:se(e.ns.e("title"))},[e.iconComponent&&e.center?(te(),ft(o,{key:0,class:se([e.ns.e("status"),e.typeClass])},{default:ge(()=>[(te(),ft(ir(e.iconComponent)))]),_:1},8,["class"])):Ge("v-if",!0),V("span",null,Xe(e.title),1)],2),e.showClose?(te(),me("button",{key:0,type:"button",class:se(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:oi(Fn(p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[de(o,{class:se(e.ns.e("close"))},{default:ge(()=>[de(s)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Ge("v-if",!0)],2)):Ge("v-if",!0),V("div",{id:e.contentId,class:se(e.ns.e("content"))},[V("div",{class:se(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(te(),ft(o,{key:0,class:se([e.ns.e("status"),e.typeClass])},{default:ge(()=>[(te(),ft(ir(e.iconComponent)))]),_:1},8,["class"])):Ge("v-if",!0),e.hasMessage?(te(),me("div",{key:1,class:se(e.ns.e("message"))},[st(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(te(),ft(ir(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(te(),ft(ir(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:ge(()=>[$t(Xe(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):Ge("v-if",!0)],2),In(V("div",{class:se(e.ns.e("input"))},[de(l,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":p=>e.inputValue=p,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:se({invalid:e.validateError}),onKeydown:oi(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),V("div",{class:se(e.ns.e("errormsg")),style:_n({visibility:e.editorErrorMessage?"visible":"hidden"})},Xe(e.editorErrorMessage),7)],2),[[Lr,e.showInput]])],10,["id"]),V("div",{class:se(e.ns.e("btns"))},[e.showCancelButton?(te(),ft(c,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:se([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:p=>e.handleAction("cancel"),onKeydown:oi(Fn(p=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:ge(()=>[$t(Xe(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Ge("v-if",!0),In(de(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:se([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:p=>e.handleAction("confirm"),onKeydown:oi(Fn(p=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:ge(()=>[$t(Xe(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Lr,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Lr,e.visible]])]),_:3},8,["onAfterLeave"])}var eOe=Kt(JRe,[["render",QRe],["__file","index.vue"]]);const bw=new Map,tOe=e=>{let t=document.body;return e.appendTo&&(Ln(e.appendTo)&&(t=document.querySelector(e.appendTo)),vl(e.appendTo)&&(t=e.appendTo),vl(t)||(t=document.body)),t},nOe=(e,t,n=null)=>{const r=de(eOe,e,Dn(e.message)||Oi(e.message)?{default:Dn(e.message)?e.message:()=>e.message}:null);return r.appContext=n,If(r,t),tOe(e).appendChild(t.firstElementChild),r.component},rOe=()=>document.createElement("div"),iOe=(e,t)=>{const n=rOe();e.onVanish=()=>{If(null,n),bw.delete(i)},e.onAction=a=>{const o=bw.get(i);let s;e.showInput?s={value:i.inputValue,action:a}:s=a,e.callback?e.callback(s,r.proxy):a==="cancel"||a==="close"?e.distinguishCancelAndClose&&a!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(s)};const r=nOe(e,n,t),i=r.proxy;for(const a in e)Er(e,a)&&!Er(i.$props,a)&&(i[a]=e[a]);return i.visible=!0,i};function D0(e,t=null){if(!xr)return Promise.reject();let n;return Ln(e)||Oi(e)?e={message:e}:n=e.callback,new Promise((r,i)=>{const a=iOe(e,t??D0._context);bw.set(a,{options:e,callback:n,resolve:r,reject:i})})}const aOe=["alert","confirm","prompt"],oOe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};aOe.forEach(e=>{D0[e]=sOe(e)});function sOe(e){return(t,n,r,i)=>{let a="";return nr(n)?(r=n,a=""):aa(n)?a="":a=n,D0(Object.assign({title:a,message:t,type:"",...oOe[e]},r,{boxType:e}),i)}}D0.close=()=>{bw.forEach((e,t)=>{t.doClose()}),bw.clear()};D0._context=null;const Yh=D0;Yh.install=e=>{Yh._context=e._context,e.config.globalProperties.$msgbox=Yh,e.config.globalProperties.$messageBox=Yh,e.config.globalProperties.$alert=Yh.alert,e.config.globalProperties.$confirm=Yh.confirm,e.config.globalProperties.$prompt=Yh.prompt};const lOe=Yh,dX=["success","info","warning","error"],uOe=Wt({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:si},id:{type:String,default:""},message:{type:Qe([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Qe(Function),default:()=>{}},onClose:{type:Qe(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...dX,""],default:""},zIndex:Number}),cOe={destroy:()=>!0},dOe=Be({name:"ElNotification"}),hOe=Be({...dOe,props:uOe,emits:cOe,setup(e,{expose:t}){const n=e,{ns:r,zIndex:i}=sk("notification"),{nextZIndex:a,currentZIndex:o}=i,{Close:s}=G3,l=le(!1);let c;const h=X(()=>{const A=n.type;return A&&Bf[n.type]?r.m(A):""}),f=X(()=>n.type&&Bf[n.type]||n.icon),p=X(()=>n.position.endsWith("right")?"right":"left"),v=X(()=>n.position.startsWith("top")?"top":"bottom"),_=X(()=>{var A;return{[v.value]:`${n.offset}px`,zIndex:(A=n.zIndex)!=null?A:o.value}});function b(){n.duration>0&&({stop:c}=Yv(()=>{l.value&&T()},n.duration))}function C(){c==null||c()}function T(){l.value=!1}function E({code:A}){A===En.delete||A===En.backspace?C():A===En.esc?l.value&&T():b()}return Un(()=>{b(),a(),l.value=!0}),ti(document,"keydown",E),t({visible:l,close:T}),(A,I)=>(te(),ft(Ka,{name:w(r).b("fade"),onBeforeLeave:A.onClose,onAfterLeave:O=>A.$emit("destroy"),persisted:""},{default:ge(()=>[In(V("div",{id:A.id,class:se([w(r).b(),A.customClass,w(p)]),style:_n(w(_)),role:"alert",onMouseenter:C,onMouseleave:b,onClick:A.onClick},[w(f)?(te(),ft(w(yn),{key:0,class:se([w(r).e("icon"),w(h)])},{default:ge(()=>[(te(),ft(ir(w(f))))]),_:1},8,["class"])):Ge("v-if",!0),V("div",{class:se(w(r).e("group"))},[V("h2",{class:se(w(r).e("title")),textContent:Xe(A.title)},null,10,["textContent"]),In(V("div",{class:se(w(r).e("content")),style:_n(A.title?void 0:{margin:0})},[st(A.$slots,"default",{},()=>[A.dangerouslyUseHTMLString?(te(),me(hn,{key:1},[Ge(" Caution here, message could've been compromised, never use user's input as message "),V("p",{innerHTML:A.message},null,8,["innerHTML"])],2112)):(te(),me("p",{key:0},Xe(A.message),1))])],6),[[Lr,A.message]]),A.showClose?(te(),ft(w(yn),{key:0,class:se(w(r).e("closeBtn")),onClick:Fn(T,["stop"])},{default:ge(()=>[de(w(s))]),_:1},8,["class","onClick"])):Ge("v-if",!0)],2)],46,["id","onClick"]),[[Lr,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var fOe=Kt(hOe,[["__file","notification.vue"]]);const NT={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},eR=16;let pOe=1;const i0=function(e={},t=null){if(!xr)return{close:()=>{}};(typeof e=="string"||Oi(e))&&(e={message:e});const n=e.position||"top-right";let r=e.offset||0;NT[n].forEach(({vm:h})=>{var f;r+=(((f=h.el)==null?void 0:f.offsetHeight)||0)+eR}),r+=eR;const i=`notification_${pOe++}`,a=e.onClose,o={...e,offset:r,id:i,onClose:()=>{vOe(i,n,a)}};let s=document.body;vl(e.appendTo)?s=e.appendTo:Ln(e.appendTo)&&(s=document.querySelector(e.appendTo)),vl(s)||(s=document.body);const l=document.createElement("div"),c=de(fOe,o,Oi(o.message)?{default:()=>o.message}:null);return c.appContext=t??i0._context,c.props.onDestroy=()=>{If(null,l)},If(c,l),NT[n].push({vm:c}),s.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};dX.forEach(e=>{i0[e]=(t={})=>((typeof t=="string"||Oi(t))&&(t={message:t}),i0({...t,type:e}))});function vOe(e,t,n){const r=NT[t],i=r.findIndex(({vm:c})=>{var h;return((h=c.component)==null?void 0:h.props.id)===e});if(i===-1)return;const{vm:a}=r[i];if(!a)return;n==null||n(a);const o=a.el.offsetHeight,s=t.split("-")[0];r.splice(i,1);const l=r.length;if(!(l<1))for(let c=i;c<l;c++){const{el:h,component:f}=r[c].vm,p=Number.parseInt(h.style[s],10)-o-eR;f.props.offset=p}}function mOe(){for(const e of Object.values(NT))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}i0.closeAll=mOe;i0._context=null;const gOe=vK(i0,"$notify");var yOe=[DRe,FRe,XRe,lOe,gOe,KZ],_Oe=bye([...MRe,...yOe]);const oz=x0("ui",{state:()=>({panels:{modelList:!0,materialEditor:!1,sceneEditor:!1,properties:!0,screenshots:!1,settings:!1},leftPanelWidth:280,rightPanelWidth:300,collapsed:{leftPanel:!1,rightPanel:!1},toolbar:{visible:!0,position:"top",items:[{id:"pan",icon:"mdi-cursor-move",active:!0,tooltip:"平移视图"},{id:"rotate",icon:"mdi-rotate-3d",active:!1,tooltip:"旋转视图"},{id:"zoom",icon:"mdi-magnify",active:!1,tooltip:"缩放视图"},{id:"select",icon:"mdi-cursor-default",active:!1,tooltip:"选择对象"},{id:"reset-view",icon:"mdi-camera-outline",active:!1,tooltip:"重置视图"},{id:"screenshot",icon:"mdi-camera",active:!1,tooltip:"截图"}]},activeToolId:"pan",dialogs:{about:!1,settings:!1,materialCreate:!1,exportModel:!1,importModel:!1,confirmDelete:!1,help:!1},confirmDeleteConfig:{title:"",message:"",itemId:null,itemType:"",callback:null},theme:{dark:!1,primary:"#1976D2",accent:"#FF4081",secondary:"#424242",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},notification:{show:!1,message:"",color:"info",timeout:3e3},loading:{global:!1,model:!1,material:!1,screenshot:!1,export:!1},viewport:{width:window.innerWidth,height:window.innerHeight},contextMenu:{show:!1,x:0,y:0,items:[]},dragDrop:{isDragging:!1,dragType:null,dragData:null},preferences:{autoHidePanels:!1,showTooltips:!0,showWelcomeScreen:!0,interfaceScale:1,lowPerformanceMode:!1,showFPS:!1,language:"zh-CN"}}),getters:{isPanelVisible:e=>t=>e.panels[t]||!1,getLeftPanelStatus:e=>({width:e.leftPanelWidth,collapsed:e.collapsed.leftPanel}),getRightPanelStatus:e=>({width:e.rightPanelWidth,collapsed:e.collapsed.rightPanel}),getToolbar:e=>e.toolbar,getActiveTool:e=>e.toolbar.items.find(t=>t.id===e.activeToolId)||e.toolbar.items[0],isDialogOpen:e=>t=>e.dialogs[t]||!1,getTheme:e=>e.theme,isDarkTheme:e=>e.theme.dark,getPreferences:e=>e.preferences,isLoading:e=>(t="global")=>e.loading[t]||e.loading.global,getViewportSize:e=>e.viewport},actions:{togglePanel(e){this.panels.hasOwnProperty(e)&&(this.panels[e]=!this.panels[e])},showPanel(e){this.panels.hasOwnProperty(e)&&(this.panels[e]=!0)},hidePanel(e){this.panels.hasOwnProperty(e)&&(this.panels[e]=!1)},setPanelWidth(e,t){const i=Math.max(200,Math.min(600,t));e==="left"?this.leftPanelWidth=i:e==="right"&&(this.rightPanelWidth=i)},togglePanelCollapse(e){(e==="left"||e==="right")&&(this.collapsed[`${e}Panel`]=!this.collapsed[`${e}Panel`])},setToolbarVisible(e){this.toolbar.visible=e},setToolbarPosition(e){["top","left","right","bottom"].includes(e)&&(this.toolbar.position=e)},setActiveTool(e){this.toolbar.items.forEach(t=>{t.active=t.id===e}),this.activeToolId=e},openDialog(e){this.dialogs.hasOwnProperty(e)&&(this.dialogs[e]=!0)},closeDialog(e){this.dialogs.hasOwnProperty(e)&&(this.dialogs[e]=!1)},configureConfirmDialog({title:e,message:t,itemId:n,itemType:r,callback:i}){this.confirmDeleteConfig={title:e||"确认删除",message:t||"您确定要删除此项目吗？此操作无法撤销。",itemId:n,itemType:r,callback:i},this.dialogs.confirmDelete=!0},toggleDarkMode(){this.theme.dark=!this.theme.dark,this.saveThemeToLocalStorage()},setThemeColor(e,t){this.theme.hasOwnProperty(e)&&(this.theme[e]=t,this.saveThemeToLocalStorage())},showNotification(e,t={}){this.notification={show:!0,message:e,color:t.color||"info",timeout:t.timeout||3e3},this.notification.timeout>0&&setTimeout(()=>{this.notification.show=!1},this.notification.timeout)},hideNotification(){this.notification.show=!1},setLoading(e="global",t){this.loading.hasOwnProperty(e)&&(this.loading[e]=t)},updateViewportSize(e,t){this.viewport.width=e,this.viewport.height=t},showContextMenu(e,t,n){this.contextMenu={show:!0,x:e,y:t,items:n}},hideContextMenu(){this.contextMenu.show=!1},setDragDropState(e,t=null,n=null){this.dragDrop={isDragging:e,dragType:t,dragData:n}},updatePreferences(e){this.preferences={...this.preferences,...e},this.savePreferencesToLocalStorage()},saveThemeToLocalStorage(){try{localStorage.setItem("ui_theme",JSON.stringify(this.theme))}catch(e){console.error("保存主题设置失败:",e)}},loadThemeFromLocalStorage(){try{const e=localStorage.getItem("ui_theme");e&&(this.theme={...this.theme,...JSON.parse(e)})}catch(e){console.error("加载主题设置失败:",e)}},savePreferencesToLocalStorage(){try{localStorage.setItem("ui_preferences",JSON.stringify(this.preferences))}catch(e){console.error("保存用户偏好设置失败:",e)}},loadPreferencesFromLocalStorage(){try{const e=localStorage.getItem("ui_preferences");e&&(this.preferences={...this.preferences,...JSON.parse(e)})}catch(e){console.error("加载用户偏好设置失败:",e)}},savePanelConfigToLocalStorage(){try{const e={panels:this.panels,leftPanelWidth:this.leftPanelWidth,rightPanelWidth:this.rightPanelWidth,collapsed:this.collapsed};localStorage.setItem("ui_panel_config",JSON.stringify(e))}catch(e){console.error("保存面板配置失败:",e)}},loadPanelConfigFromLocalStorage(){try{const e=localStorage.getItem("ui_panel_config");if(e){const t=JSON.parse(e);t.panels&&(this.panels={...this.panels,...t.panels}),t.leftPanelWidth&&(this.leftPanelWidth=t.leftPanelWidth),t.rightPanelWidth&&(this.rightPanelWidth=t.rightPanelWidth),t.collapsed&&(this.collapsed={...this.collapsed,...t.collapsed})}}catch(e){console.error("加载面板配置失败:",e)}},resetPanelConfig(){this.panels={modelList:!0,materialEditor:!1,sceneEditor:!1,properties:!0,screenshots:!1,settings:!1},this.leftPanelWidth=280,this.rightPanelWidth=300,this.collapsed={leftPanel:!1,rightPanel:!1},this.savePanelConfigToLocalStorage()},resetAllUISettings(){this.theme={dark:!1,primary:"#1976D2",accent:"#FF4081",secondary:"#424242",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},this.preferences={autoHidePanels:!1,showTooltips:!0,showWelcomeScreen:!0,interfaceScale:1,lowPerformanceMode:!1,showFPS:!1,language:"zh-CN"},this.resetPanelConfig(),this.saveThemeToLocalStorage(),this.savePreferencesToLocalStorage()},initStore(){this.loadThemeFromLocalStorage(),this.loadPreferencesFromLocalStorage(),this.loadPanelConfigFromLocalStorage(),this.updateViewportSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",()=>{this.updateViewportSize(window.innerWidth,window.innerHeight)})}}}),Ms=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},bOe={class:"toast-content"},wOe={class:"icon"},xOe={class:"message"},SOe={__name:"NotificationToast",setup(e){const t=oz(),n=X(()=>t.notification),r=i=>{switch(i){case"success":return"✓";case"error":return"✗";case"warning":return"⚠";case"info":default:return"ℹ"}};return(i,a)=>(te(),ft(Ka,{name:"fade"},{default:ge(()=>[n.value.show?(te(),me("div",{key:0,class:se(["notification-toast",n.value.color])},[V("div",bOe,[V("span",wOe,Xe(r(n.value.color)),1),V("span",xOe,Xe(n.value.message),1)])],2)):Ge("",!0)]),_:1}))}},COe=Ms(SOe,[["__scopeId","data-v-ebcf66cc"]]),TOe={class:"app-container"},MOe={class:"nav-menu"},kOe={class:"content-container"},EOe={__name:"App",setup(e){const t=oz();return Un(()=>{t.initStore(),window.addEventListener("resize",()=>{t.updateViewportSize(window.innerWidth,window.innerHeight)})}),(n,r)=>{const i=Xt("router-link"),a=Xt("router-view");return te(),me("div",TOe,[V("div",MOe,[de(i,{to:"/Demo",class:"nav-button"},{default:ge(()=>r[0]||(r[0]=[$t("模型查看器")])),_:1}),de(i,{to:"/Demo2",class:"nav-button"},{default:ge(()=>r[1]||(r[1]=[$t("模型查看器2")])),_:1}),de(i,{to:"/model-viewer",class:"nav-button"},{default:ge(()=>r[2]||(r[2]=[$t("3D模型查看器")])),_:1}),de(i,{to:"/digital-twin",class:"nav-button"},{default:ge(()=>r[3]||(r[3]=[$t("digital-twin")])),_:1}),de(i,{to:"/maritime-map",class:"nav-button"},{default:ge(()=>r[4]||(r[4]=[$t("海事地图")])),_:1}),de(i,{to:"/mapbox-maritime",class:"nav-button"},{default:ge(()=>r[5]||(r[5]=[$t("Mapbox航海系统")])),_:1})]),V("div",kOe,[de(a)]),de(COe)])}}};/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ey=typeof document<"u";function hX(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function AOe(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&hX(e.default)}const Ri=Object.assign;function xP(e,t){const n={};for(const r in t){const i=t[r];n[r]=Qu(i)?i.map(e):e(i)}return n}const C1=()=>{},Qu=Array.isArray,fX=/#/g,POe=/&/g,IOe=/\//g,LOe=/=/g,DOe=/\?/g,pX=/\+/g,ROe=/%5B/g,OOe=/%5D/g,vX=/%5E/g,zOe=/%60/g,mX=/%7B/g,BOe=/%7C/g,gX=/%7D/g,FOe=/%20/g;function sz(e){return encodeURI(""+e).replace(BOe,"|").replace(ROe,"[").replace(OOe,"]")}function NOe(e){return sz(e).replace(mX,"{").replace(gX,"}").replace(vX,"^")}function tR(e){return sz(e).replace(pX,"%2B").replace(FOe,"+").replace(fX,"%23").replace(POe,"%26").replace(zOe,"`").replace(mX,"{").replace(gX,"}").replace(vX,"^")}function $Oe(e){return tR(e).replace(LOe,"%3D")}function VOe(e){return sz(e).replace(fX,"%23").replace(DOe,"%3F")}function HOe(e){return e==null?"":VOe(e).replace(IOe,"%2F")}function ww(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const jOe=/\/$/,UOe=e=>e.replace(jOe,"");function SP(e,t,n="/"){let r,i={},a="",o="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),a=t.slice(l+1,s>-1?s:t.length),i=e(a)),s>-1&&(r=r||t.slice(0,s),o=t.slice(s,t.length)),r=qOe(r??t,n),{fullPath:r+(a&&"?")+a+o,path:r,query:i,hash:ww(o)}}function WOe(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function I$(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function GOe(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&a0(t.matched[r],n.matched[i])&&yX(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function a0(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yX(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!KOe(e[n],t[n]))return!1;return!0}function KOe(e,t){return Qu(e)?L$(e,t):Qu(t)?L$(t,e):e===t}function L$(e,t){return Qu(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function qOe(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let a=n.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const Oh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xw;(function(e){e.pop="pop",e.push="push"})(xw||(xw={}));var T1;(function(e){e.back="back",e.forward="forward",e.unknown=""})(T1||(T1={}));function ZOe(e){if(!e)if(ey){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),UOe(e)}const YOe=/^[^#]+#/;function XOe(e,t){return e.replace(YOe,"#")+t}function JOe(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const yk=()=>({left:window.scrollX,top:window.scrollY});function QOe(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=JOe(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function D$(e,t){return(history.state?history.state.position-t:-1)+e}const nR=new Map;function e3e(e,t){nR.set(e,t)}function t3e(e){const t=nR.get(e);return nR.delete(e),t}let n3e=()=>location.protocol+"//"+location.host;function _X(e,t){const{pathname:n,search:r,hash:i}=t,a=e.indexOf("#");if(a>-1){let s=i.includes(e.slice(a))?e.slice(a).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),I$(l,"")}return I$(n,e)+r+i}function r3e(e,t,n,r){let i=[],a=[],o=null;const s=({state:p})=>{const v=_X(e,location),_=n.value,b=t.value;let C=0;if(p){if(n.value=v,t.value=p,o&&o===_){o=null;return}C=b?p.position-b.position:0}else r(v);i.forEach(T=>{T(n.value,_,{delta:C,type:xw.pop,direction:C?C>0?T1.forward:T1.back:T1.unknown})})};function l(){o=n.value}function c(p){i.push(p);const v=()=>{const _=i.indexOf(p);_>-1&&i.splice(_,1)};return a.push(v),v}function h(){const{history:p}=window;p.state&&p.replaceState(Ri({},p.state,{scroll:yk()}),"")}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function R$(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?yk():null}}function i3e(e){const{history:t,location:n}=window,r={value:_X(e,n)},i={value:t.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,c,h){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:n3e()+e+l;try{t[h?"replaceState":"pushState"](c,"",p),i.value=c}catch(v){console.error(v),n[h?"replace":"assign"](p)}}function o(l,c){const h=Ri({},t.state,R$(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});a(l,h,!0),r.value=l}function s(l,c){const h=Ri({},i.value,t.state,{forward:l,scroll:yk()});a(h.current,h,!0);const f=Ri({},R$(r.value,l,null),{position:h.position+1},c);a(l,f,!1),r.value=l}return{location:r,state:i,push:s,replace:o}}function a3e(e){e=ZOe(e);const t=i3e(e),n=r3e(e,t.state,t.location,t.replace);function r(a,o=!0){o||n.pauseListeners(),history.go(a)}const i=Ri({location:"",base:e,go:r,createHref:XOe.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function o3e(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),a3e(e)}function s3e(e){return typeof e=="string"||e&&typeof e=="object"}function bX(e){return typeof e=="string"||typeof e=="symbol"}const wX=Symbol("");var O$;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(O$||(O$={}));function o0(e,t){return Ri(new Error,{type:e,[wX]:!0},t)}function Id(e,t){return e instanceof Error&&wX in e&&(t==null||!!(e.type&t))}const z$="[^/]+?",l3e={sensitive:!1,strict:!1,start:!0,end:!0},u3e=/[.+*?^${}()[\]/\\]/g;function c3e(e,t){const n=Ri({},l3e,t),r=[];let i=n.start?"^":"";const a=[];for(const c of e){const h=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const p=c[f];let v=40+(n.sensitive?.25:0);if(p.type===0)f||(i+="/"),i+=p.value.replace(u3e,"\\$&"),v+=40;else if(p.type===1){const{value:_,repeatable:b,optional:C,regexp:T}=p;a.push({name:_,repeatable:b,optional:C});const E=T||z$;if(E!==z$){v+=10;try{new RegExp(`(${E})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${_}" (${E}): `+I.message)}}let A=b?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(A=C&&c.length<2?`(?:/${A})`:"/"+A),C&&(A+="?"),i+=A,v+=20,C&&(v+=-8),b&&(v+=-20),E===".*"&&(v+=-50)}h.push(v)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function s(c){const h=c.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const v=h[p]||"",_=a[p-1];f[_.name]=v&&_.repeatable?v.split("/"):v}return f}function l(c){let h="",f=!1;for(const p of e){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const v of p)if(v.type===0)h+=v.value;else if(v.type===1){const{value:_,repeatable:b,optional:C}=v,T=_ in c?c[_]:"";if(Qu(T)&&!b)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const E=Qu(T)?T.join("/"):T;if(!E)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);h+=E}}return h||"/"}return{re:o,score:r,keys:a,parse:s,stringify:l}}function d3e(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function xX(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const a=d3e(r[n],i[n]);if(a)return a;n++}if(Math.abs(i.length-r.length)===1){if(B$(r))return 1;if(B$(i))return-1}return i.length-r.length}function B$(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const h3e={type:0,value:""},f3e=/[a-zA-Z0-9_]/;function p3e(e){if(!e)return[[]];if(e==="/")return[[h3e]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${n})/"${c}": ${v}`)}let n=0,r=n;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,l,c="",h="";function f(){c&&(n===0?a.push({type:0,value:c}):n===1||n===2||n===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:f3e.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function v3e(e,t,n){const r=c3e(p3e(e.path),n),i=Ri(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function m3e(e,t){const n=[],r=new Map;t=V$({strict:!1,end:!0,sensitive:!1},t);function i(f){return r.get(f)}function a(f,p,v){const _=!v,b=N$(f);b.aliasOf=v&&v.record;const C=V$(t,f),T=[b];if("alias"in f){const I=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of I)T.push(N$(Ri({},b,{components:v?v.record.components:b.components,path:O,aliasOf:v?v.record:b})))}let E,A;for(const I of T){const{path:O}=I;if(p&&O[0]!=="/"){const B=p.record.path,N=B[B.length-1]==="/"?"":"/";I.path=p.record.path+(O&&N+O)}if(E=v3e(I,p,C),v?v.alias.push(E):(A=A||E,A!==E&&A.alias.push(E),_&&f.name&&!$$(E)&&o(f.name)),SX(E)&&l(E),b.children){const B=b.children;for(let N=0;N<B.length;N++)a(B[N],E,v&&v.children[N])}v=v||E}return A?()=>{o(A)}:C1}function o(f){if(bX(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function s(){return n}function l(f){const p=_3e(f,n);n.splice(p,0,f),f.record.name&&!$$(f)&&r.set(f.record.name,f)}function c(f,p){let v,_={},b,C;if("name"in f&&f.name){if(v=r.get(f.name),!v)throw o0(1,{location:f});C=v.record.name,_=Ri(F$(p.params,v.keys.filter(A=>!A.optional).concat(v.parent?v.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),f.params&&F$(f.params,v.keys.map(A=>A.name))),b=v.stringify(_)}else if(f.path!=null)b=f.path,v=n.find(A=>A.re.test(b)),v&&(_=v.parse(b),C=v.record.name);else{if(v=p.name?r.get(p.name):n.find(A=>A.re.test(p.path)),!v)throw o0(1,{location:f,currentLocation:p});C=v.record.name,_=Ri({},p.params,f.params),b=v.stringify(_)}const T=[];let E=v;for(;E;)T.unshift(E.record),E=E.parent;return{name:C,path:b,params:_,matched:T,meta:y3e(T)}}e.forEach(f=>a(f));function h(){n.length=0,r.clear()}return{addRoute:a,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:s,getRecordMatcher:i}}function F$(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function N$(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:g3e(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function g3e(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function $$(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function y3e(e){return e.reduce((t,n)=>Ri(t,n.meta),{})}function V$(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function _3e(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;xX(e,t[a])<0?r=a:n=a+1}const i=b3e(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function b3e(e){let t=e;for(;t=t.parent;)if(SX(t)&&xX(e,t)===0)return t}function SX({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function w3e(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const a=r[i].replace(pX," "),o=a.indexOf("="),s=ww(o<0?a:a.slice(0,o)),l=o<0?null:ww(a.slice(o+1));if(s in t){let c=t[s];Qu(c)||(c=t[s]=[c]),c.push(l)}else t[s]=l}return t}function H$(e){let t="";for(let n in e){const r=e[n];if(n=$Oe(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Qu(r)?r.map(a=>a&&tR(a)):[r&&tR(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function x3e(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Qu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const S3e=Symbol(""),j$=Symbol(""),lz=Symbol(""),CX=Symbol(""),rR=Symbol("");function Sb(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function nf(e,t,n,r,i,a=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const c=p=>{p===!1?l(o0(4,{from:n,to:t})):p instanceof Error?l(p):s3e(p)?l(o0(2,{from:t,to:p})):(o&&r.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),s())},h=a(()=>e.call(r&&r.instances[i],t,n,c));let f=Promise.resolve(h);e.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function CP(e,t,n,r,i=a=>a()){const a=[];for(const o of e)for(const s in o.components){let l=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(hX(l)){const h=(l.__vccOpts||l)[t];h&&a.push(nf(h,n,r,o,s,i))}else{let c=l();a.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${s}" at "${o.path}"`);const f=AOe(h)?h.default:h;o.mods[s]=h,o.components[s]=f;const v=(f.__vccOpts||f)[t];return v&&nf(v,n,r,o,s,i)()}))}}return a}function U$(e){const t=un(lz),n=un(CX),r=X(()=>{const l=w(e.to);return t.resolve(l)}),i=X(()=>{const{matched:l}=r.value,{length:c}=l,h=l[c-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(a0.bind(null,h));if(p>-1)return p;const v=W$(l[c-2]);return c>1&&W$(h)===v&&f[f.length-1].path!==v?f.findIndex(a0.bind(null,l[c-2])):p}),a=X(()=>i.value>-1&&E3e(n.params,r.value.params)),o=X(()=>i.value>-1&&i.value===n.matched.length-1&&yX(n.params,r.value.params));function s(l={}){if(k3e(l)){const c=t[w(e.replace)?"replace":"push"](w(e.to)).catch(C1);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:X(()=>r.value.href),isActive:a,isExactActive:o,navigate:s}}function C3e(e){return e.length===1?e[0]:e}const T3e=Be({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:U$,setup(e,{slots:t}){const n=Ar(U$(e)),{options:r}=un(lz),i=X(()=>({[G$(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[G$(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&C3e(t.default(n));return e.custom?a:Mn("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},a)}}}),M3e=T3e;function k3e(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function E3e(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Qu(i)||i.length!==r.length||r.some((a,o)=>a!==i[o]))return!1}return!0}function W$(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const G$=(e,t,n)=>e??t??n,A3e=Be({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=un(rR),i=X(()=>e.route||r.value),a=un(j$,0),o=X(()=>{let c=w(a);const{matched:h}=i.value;let f;for(;(f=h[c])&&!f.components;)c++;return c}),s=X(()=>i.value.matched[o.value]);pr(j$,X(()=>o.value+1)),pr(S3e,s),pr(rR,i);const l=le();return At(()=>[l.value,s.value,e.name],([c,h,f],[p,v,_])=>{h&&(h.instances[f]=c,v&&v!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=v.leaveGuards),h.updateGuards.size||(h.updateGuards=v.updateGuards))),c&&h&&(!v||!a0(h,v)||!p)&&(h.enterCallbacks[f]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=i.value,h=e.name,f=s.value,p=f&&f.components[h];if(!p)return K$(n.default,{Component:p,route:c});const v=f.props[h],_=v?v===!0?c.params:typeof v=="function"?v(c):v:null,C=Mn(p,Ri({},_,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return K$(n.default,{Component:C,route:c})||C}}});function K$(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const P3e=A3e;function I3e(e){const t=m3e(e.routes,e),n=e.parseQuery||w3e,r=e.stringifyQuery||H$,i=e.history,a=Sb(),o=Sb(),s=Sb(),l=_i(Oh);let c=Oh;ey&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=xP.bind(null,Ee=>""+Ee),f=xP.bind(null,HOe),p=xP.bind(null,ww);function v(Ee,Je){let Ue,yt;return bX(Ee)?(Ue=t.getRecordMatcher(Ee),yt=Je):yt=Ee,t.addRoute(yt,Ue)}function _(Ee){const Je=t.getRecordMatcher(Ee);Je&&t.removeRoute(Je)}function b(){return t.getRoutes().map(Ee=>Ee.record)}function C(Ee){return!!t.getRecordMatcher(Ee)}function T(Ee,Je){if(Je=Ri({},Je||l.value),typeof Ee=="string"){const ze=SP(n,Ee,Je.path),ct=t.resolve({path:ze.path},Je),Lt=i.createHref(ze.fullPath);return Ri(ze,ct,{params:p(ct.params),hash:ww(ze.hash),redirectedFrom:void 0,href:Lt})}let Ue;if(Ee.path!=null)Ue=Ri({},Ee,{path:SP(n,Ee.path,Je.path).path});else{const ze=Ri({},Ee.params);for(const ct in ze)ze[ct]==null&&delete ze[ct];Ue=Ri({},Ee,{params:f(ze)}),Je.params=f(Je.params)}const yt=t.resolve(Ue,Je),Ne=Ee.hash||"";yt.params=h(p(yt.params));const dt=WOe(r,Ri({},Ee,{hash:NOe(Ne),path:yt.path})),Le=i.createHref(dt);return Ri({fullPath:dt,hash:Ne,query:r===H$?x3e(Ee.query):Ee.query||{}},yt,{redirectedFrom:void 0,href:Le})}function E(Ee){return typeof Ee=="string"?SP(n,Ee,l.value.path):Ri({},Ee)}function A(Ee,Je){if(c!==Ee)return o0(8,{from:Je,to:Ee})}function I(Ee){return N(Ee)}function O(Ee){return I(Ri(E(Ee),{replace:!0}))}function B(Ee){const Je=Ee.matched[Ee.matched.length-1];if(Je&&Je.redirect){const{redirect:Ue}=Je;let yt=typeof Ue=="function"?Ue(Ee):Ue;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=E(yt):{path:yt},yt.params={}),Ri({query:Ee.query,hash:Ee.hash,params:yt.path!=null?{}:Ee.params},yt)}}function N(Ee,Je){const Ue=c=T(Ee),yt=l.value,Ne=Ee.state,dt=Ee.force,Le=Ee.replace===!0,ze=B(Ue);if(ze)return N(Ri(E(ze),{state:typeof ze=="object"?Ri({},Ne,ze.state):Ne,force:dt,replace:Le}),Je||Ue);const ct=Ue;ct.redirectedFrom=Je;let Lt;return!dt&&GOe(r,yt,Ue)&&(Lt=o0(16,{to:ct,from:yt}),be(yt,yt,!0,!1)),(Lt?Promise.resolve(Lt):W(ct,yt)).catch(lt=>Id(lt)?Id(lt,2)?lt:oe(lt):re(lt,ct,yt)).then(lt=>{if(lt){if(Id(lt,2))return N(Ri({replace:Le},E(lt.to),{state:typeof lt.to=="object"?Ri({},Ne,lt.to.state):Ne,force:dt}),Je||ct)}else lt=Y(ct,yt,!0,Le,Ne);return U(ct,yt,lt),lt})}function H(Ee,Je){const Ue=A(Ee,Je);return Ue?Promise.reject(Ue):Promise.resolve()}function j(Ee){const Je=Ce.values().next().value;return Je&&typeof Je.runWithContext=="function"?Je.runWithContext(Ee):Ee()}function W(Ee,Je){let Ue;const[yt,Ne,dt]=L3e(Ee,Je);Ue=CP(yt.reverse(),"beforeRouteLeave",Ee,Je);for(const ze of yt)ze.leaveGuards.forEach(ct=>{Ue.push(nf(ct,Ee,Je))});const Le=H.bind(null,Ee,Je);return Ue.push(Le),et(Ue).then(()=>{Ue=[];for(const ze of a.list())Ue.push(nf(ze,Ee,Je));return Ue.push(Le),et(Ue)}).then(()=>{Ue=CP(Ne,"beforeRouteUpdate",Ee,Je);for(const ze of Ne)ze.updateGuards.forEach(ct=>{Ue.push(nf(ct,Ee,Je))});return Ue.push(Le),et(Ue)}).then(()=>{Ue=[];for(const ze of dt)if(ze.beforeEnter)if(Qu(ze.beforeEnter))for(const ct of ze.beforeEnter)Ue.push(nf(ct,Ee,Je));else Ue.push(nf(ze.beforeEnter,Ee,Je));return Ue.push(Le),et(Ue)}).then(()=>(Ee.matched.forEach(ze=>ze.enterCallbacks={}),Ue=CP(dt,"beforeRouteEnter",Ee,Je,j),Ue.push(Le),et(Ue))).then(()=>{Ue=[];for(const ze of o.list())Ue.push(nf(ze,Ee,Je));return Ue.push(Le),et(Ue)}).catch(ze=>Id(ze,8)?ze:Promise.reject(ze))}function U(Ee,Je,Ue){s.list().forEach(yt=>j(()=>yt(Ee,Je,Ue)))}function Y(Ee,Je,Ue,yt,Ne){const dt=A(Ee,Je);if(dt)return dt;const Le=Je===Oh,ze=ey?history.state:{};Ue&&(yt||Le?i.replace(Ee.fullPath,Ri({scroll:Le&&ze&&ze.scroll},Ne)):i.push(Ee.fullPath,Ne)),l.value=Ee,be(Ee,Je,Ue,Le),oe()}let ie;function ue(){ie||(ie=i.listen((Ee,Je,Ue)=>{if(!Ve.listening)return;const yt=T(Ee),Ne=B(yt);if(Ne){N(Ri(Ne,{replace:!0,force:!0}),yt).catch(C1);return}c=yt;const dt=l.value;ey&&e3e(D$(dt.fullPath,Ue.delta),yk()),W(yt,dt).catch(Le=>Id(Le,12)?Le:Id(Le,2)?(N(Ri(E(Le.to),{force:!0}),yt).then(ze=>{Id(ze,20)&&!Ue.delta&&Ue.type===xw.pop&&i.go(-1,!1)}).catch(C1),Promise.reject()):(Ue.delta&&i.go(-Ue.delta,!1),re(Le,yt,dt))).then(Le=>{Le=Le||Y(yt,dt,!1),Le&&(Ue.delta&&!Id(Le,8)?i.go(-Ue.delta,!1):Ue.type===xw.pop&&Id(Le,20)&&i.go(-1,!1)),U(yt,dt,Le)}).catch(C1)}))}let J=Sb(),q=Sb(),ce;function re(Ee,Je,Ue){oe(Ee);const yt=q.list();return yt.length?yt.forEach(Ne=>Ne(Ee,Je,Ue)):console.error(Ee),Promise.reject(Ee)}function ee(){return ce&&l.value!==Oh?Promise.resolve():new Promise((Ee,Je)=>{J.add([Ee,Je])})}function oe(Ee){return ce||(ce=!Ee,ue(),J.list().forEach(([Je,Ue])=>Ee?Ue(Ee):Je()),J.reset()),Ee}function be(Ee,Je,Ue,yt){const{scrollBehavior:Ne}=e;if(!ey||!Ne)return Promise.resolve();const dt=!Ue&&t3e(D$(Ee.fullPath,0))||(yt||!Ue)&&history.state&&history.state.scroll||null;return bn().then(()=>Ne(Ee,Je,dt)).then(Le=>Le&&QOe(Le)).catch(Le=>re(Le,Ee,Je))}const we=Ee=>i.go(Ee);let pe;const Ce=new Set,Ve={currentRoute:l,listening:!0,addRoute:v,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:C,getRoutes:b,resolve:T,options:e,push:I,replace:O,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:q.add,isReady:ee,install(Ee){const Je=this;Ee.component("RouterLink",M3e),Ee.component("RouterView",P3e),Ee.config.globalProperties.$router=Je,Object.defineProperty(Ee.config.globalProperties,"$route",{enumerable:!0,get:()=>w(l)}),ey&&!pe&&l.value===Oh&&(pe=!0,I(i.location).catch(Ne=>{}));const Ue={};for(const Ne in Oh)Object.defineProperty(Ue,Ne,{get:()=>l.value[Ne],enumerable:!0});Ee.provide(lz,Je),Ee.provide(CX,s3(Ue)),Ee.provide(rR,l);const yt=Ee.unmount;Ce.add(Ee),Ee.unmount=function(){Ce.delete(Ee),Ce.size<1&&(c=Oh,ie&&ie(),ie=null,l.value=Oh,pe=!1,ce=!1),yt()}}};function et(Ee){return Ee.reduce((Je,Ue)=>Je.then(()=>j(Ue)),Promise.resolve())}return Ve}function L3e(e,t){const n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(e.matched.find(c=>a0(c,s))?r.push(s):n.push(s));const l=e.matched[o];l&&(t.matched.find(c=>a0(c,l))||i.push(l))}return[n,r,i]}const D3e=/^[og]\s*(.+)?/,R3e=/^mtllib /,O3e=/^usemtl /,z3e=/^usemap /,q$=/\s+/,Z$=new lr,TP=new lr,Y$=new lr,X$=new lr,Al=new lr,m2=new ra;function B3e(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=n!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,a){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const s={index:this.materials.length,name:i||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),i&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,n){const r=parseInt(t,10);return(r>=0?r-1:r+n/3)*3},parseNormalIndex:function(t,n){const r=parseInt(t,10);return(r>=0?r-1:r+n/3)*3},parseUVIndex:function(t,n){const r=parseInt(t,10);return(r>=0?r-1:r+n/2)*2},addVertex:function(t,n,r){const i=this.vertices,a=this.object.geometry.vertices;a.push(i[t+0],i[t+1],i[t+2]),a.push(i[n+0],i[n+1],i[n+2]),a.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addVertexLine:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addNormal:function(t,n,r){const i=this.normals,a=this.object.geometry.normals;a.push(i[t+0],i[t+1],i[t+2]),a.push(i[n+0],i[n+1],i[n+2]),a.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(t,n,r){const i=this.vertices,a=this.object.geometry.normals;Z$.fromArray(i,t),TP.fromArray(i,n),Y$.fromArray(i,r),Al.subVectors(Y$,TP),X$.subVectors(Z$,TP),Al.cross(X$),Al.normalize(),a.push(Al.x,Al.y,Al.z),a.push(Al.x,Al.y,Al.z),a.push(Al.x,Al.y,Al.z)},addColor:function(t,n,r){const i=this.colors,a=this.object.geometry.colors;i[t]!==void 0&&a.push(i[t+0],i[t+1],i[t+2]),i[n]!==void 0&&a.push(i[n+0],i[n+1],i[n+2]),i[r]!==void 0&&a.push(i[r+0],i[r+1],i[r+2])},addUV:function(t,n,r){const i=this.uvs,a=this.object.geometry.uvs;a.push(i[t+0],i[t+1]),a.push(i[n+0],i[n+1]),a.push(i[r+0],i[r+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const n=this.uvs;this.object.geometry.uvs.push(n[t+0],n[t+1])},addFace:function(t,n,r,i,a,o,s,l,c){const h=this.vertices.length;let f=this.parseVertexIndex(t,h),p=this.parseVertexIndex(n,h),v=this.parseVertexIndex(r,h);if(this.addVertex(f,p,v),this.addColor(f,p,v),s!==void 0&&s!==""){const _=this.normals.length;f=this.parseNormalIndex(s,_),p=this.parseNormalIndex(l,_),v=this.parseNormalIndex(c,_),this.addNormal(f,p,v)}else this.addFaceNormal(f,p,v);if(i!==void 0&&i!==""){const _=this.uvs.length;f=this.parseUVIndex(i,_),p=this.parseUVIndex(a,_),v=this.parseUVIndex(o,_),this.addUV(f,p,v),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const n=this.vertices.length;for(let r=0,i=t.length;r<i;r++){const a=this.parseVertexIndex(t[r],n);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(t,n){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let a=0,o=t.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(t[a],r));for(let a=0,o=n.length;a<o;a++)this.addUVLine(this.parseUVIndex(n[a],i))}};return e.startObject("",!1),e}class F3e extends I7{constructor(t){super(t),this.materials=null}load(t,n,r,i){const a=this,o=new L7(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(s){try{n(a.parse(s))}catch(l){i?i(l):console.error(l),a.manager.itemError(t)}},r,i)}setMaterials(t){return this.materials=t,this}parse(t){const n=new B3e;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const r=t.split(`
`);let i=[];for(let s=0,l=r.length;s<l;s++){const c=r[s].trimStart();if(c.length===0)continue;const h=c.charAt(0);if(h!=="#")if(h==="v"){const f=c.split(q$);switch(f[0]){case"v":n.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(m2.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),n.colors.push(m2.r,m2.g,m2.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":n.uvs.push(parseFloat(f[1]),parseFloat(f[2]));break}}else if(h==="f"){const p=c.slice(1).trim().split(q$),v=[];for(let b=0,C=p.length;b<C;b++){const T=p[b];if(T.length>0){const E=T.split("/");v.push(E)}}const _=v[0];for(let b=1,C=v.length-1;b<C;b++){const T=v[b],E=v[b+1];n.addFace(_[0],T[0],E[0],_[1],T[1],E[1],_[2],T[2],E[2])}}else if(h==="l"){const f=c.substring(1).trim().split(" ");let p=[];const v=[];if(c.indexOf("/")===-1)p=f;else for(let _=0,b=f.length;_<b;_++){const C=f[_].split("/");C[0]!==""&&p.push(C[0]),C[1]!==""&&v.push(C[1])}n.addLineGeometry(p,v)}else if(h==="p"){const p=c.slice(1).trim().split(" ");n.addPointGeometry(p)}else if((i=D3e.exec(c))!==null){const f=(" "+i[0].slice(1).trim()).slice(1);n.startObject(f)}else if(O3e.test(c))n.object.startMaterial(c.substring(7).trim(),n.materialLibraries);else if(R3e.test(c))n.materialLibraries.push(c.substring(7).trim());else if(z3e.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(h==="s"){if(i=c.split(" "),i.length>1){const p=i[1].trim().toLowerCase();n.object.smooth=p!=="0"&&p!=="off"}else n.object.smooth=!0;const f=n.object.currentMaterial();f&&(f.smooth=n.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}n.finalize();const a=new ML;if(a.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let s=0,l=n.objects.length;s<l;s++){const c=n.objects[s],h=c.geometry,f=c.materials,p=h.type==="Line",v=h.type==="Points";let _=!1;if(h.vertices.length===0)continue;const b=new _f;b.setAttribute("position",new Rs(h.vertices,3)),h.normals.length>0&&b.setAttribute("normal",new Rs(h.normals,3)),h.colors.length>0&&(_=!0,b.setAttribute("color",new Rs(h.colors,3))),h.hasUVIndices===!0&&b.setAttribute("uv",new Rs(h.uvs,2));const C=[];for(let E=0,A=f.length;E<A;E++){const I=f[E],O=I.name+"_"+I.smooth+"_"+_;let B=n.materials[O];if(this.materials!==null){if(B=this.materials.create(I.name),p&&B&&!(B instanceof fC)){const N=new fC;KF.prototype.copy.call(N,B),N.color.copy(B.color),B=N}else if(v&&B&&!(B instanceof WS)){const N=new WS({size:10,sizeAttenuation:!1});KF.prototype.copy.call(N,B),N.color.copy(B.color),N.map=B.map,B=N}}B===void 0&&(p?B=new fC:v?B=new WS({size:1,sizeAttenuation:!1}):B=new pC,B.name=I.name,B.flatShading=!I.smooth,B.vertexColors=_,n.materials[O]=B),C.push(B)}let T;if(C.length>1){for(let E=0,A=f.length;E<A;E++){const I=f[E];b.addGroup(I.groupStart,I.groupCount,E)}p?T=new qF(b,C):v?T=new LA(b,C):T=new Ru(b,C)}else p?T=new qF(b,C[0]):v?T=new LA(b,C[0]):T=new Ru(b,C[0]);T.name=c.name,a.add(T)}else if(n.vertices.length>0){const s=new WS({size:1,sizeAttenuation:!1}),l=new _f;l.setAttribute("position",new Rs(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(l.setAttribute("color",new Rs(n.colors,3)),s.vertexColors=!0);const c=new LA(l,s);a.add(c)}return a}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var J$=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(J$(""))}catch{J$=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)}}var Wl=Uint8Array,cf=Uint16Array,iR=Uint32Array,TX=new Wl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),MX=new Wl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),N3e=new Wl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kX=function(e,t){for(var n=new cf(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new iR(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},EX=kX(TX,2),AX=EX[0],$3e=EX[1];AX[28]=258,$3e[258]=28;var V3e=kX(MX,0),H3e=V3e[0],aR=new cf(32768);for(var fa=0;fa<32768;++fa){var zh=(fa&43690)>>>1|(fa&21845)<<1;zh=(zh&52428)>>>2|(zh&13107)<<2,zh=(zh&61680)>>>4|(zh&3855)<<4,aR[fa]=((zh&65280)>>>8|(zh&255)<<8)>>>1}var M1=function(e,t,n){for(var r=e.length,i=0,a=new cf(t);i<r;++i)++a[e[i]-1];var o=new cf(t);for(i=0;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(n){s=new cf(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],h=t-e[i],f=o[e[i]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[aR[f]>>>l]=c}else for(s=new cf(r),i=0;i<r;++i)e[i]&&(s[i]=aR[o[e[i]-1]++]>>>15-e[i]);return s},vx=new Wl(288);for(var fa=0;fa<144;++fa)vx[fa]=8;for(var fa=144;fa<256;++fa)vx[fa]=9;for(var fa=256;fa<280;++fa)vx[fa]=7;for(var fa=280;fa<288;++fa)vx[fa]=8;var PX=new Wl(32);for(var fa=0;fa<32;++fa)PX[fa]=5;var j3e=M1(vx,9,1),U3e=M1(PX,5,1),MP=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Tu=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},kP=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},W3e=function(e){return(e/8|0)+(e&7&&1)},G3e=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof cf?cf:e instanceof iR?iR:Wl)(n-t);return r.set(e.subarray(t,n)),r},K3e=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new Wl(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new Wl(r*3));var o=function(et){var Ee=t.length;if(et>Ee){var Je=new Wl(Math.max(Ee*2,et));Je.set(t),t=Je}},s=n.f||0,l=n.p||0,c=n.b||0,h=n.l,f=n.d,p=n.m,v=n.n,_=r*8;do{if(!h){n.f=s=Tu(e,l,1);var b=Tu(e,l+1,3);if(l+=3,b)if(b==1)h=j3e,f=U3e,p=9,v=5;else if(b==2){var A=Tu(e,l,31)+257,I=Tu(e,l+10,15)+4,O=A+Tu(e,l+5,31)+1;l+=14;for(var B=new Wl(O),N=new Wl(19),H=0;H<I;++H)N[N3e[H]]=Tu(e,l+H*3,7);l+=I*3;for(var j=MP(N),W=(1<<j)-1,U=M1(N,j,1),H=0;H<O;){var Y=U[Tu(e,l,W)];l+=Y&15;var C=Y>>>4;if(C<16)B[H++]=C;else{var ie=0,ue=0;for(C==16?(ue=3+Tu(e,l,3),l+=2,ie=B[H-1]):C==17?(ue=3+Tu(e,l,7),l+=3):C==18&&(ue=11+Tu(e,l,127),l+=7);ue--;)B[H++]=ie}}var J=B.subarray(0,A),q=B.subarray(A);p=MP(J),v=MP(q),h=M1(J,p,1),f=M1(q,v,1)}else throw"invalid block type";else{var C=W3e(l)+4,T=e[C-4]|e[C-3]<<8,E=C+T;if(E>r){if(a)throw"unexpected EOF";break}i&&o(c+T),t.set(e.subarray(C,E),c),n.b=c+=T,n.p=l=E*8;continue}if(l>_){if(a)throw"unexpected EOF";break}}i&&o(c+131072);for(var ce=(1<<p)-1,re=(1<<v)-1,ee=l;;ee=l){var ie=h[kP(e,l)&ce],oe=ie>>>4;if(l+=ie&15,l>_){if(a)throw"unexpected EOF";break}if(!ie)throw"invalid length/literal";if(oe<256)t[c++]=oe;else if(oe==256){ee=l,h=null;break}else{var be=oe-254;if(oe>264){var H=oe-257,we=TX[H];be=Tu(e,l,(1<<we)-1)+AX[H],l+=we}var pe=f[kP(e,l)&re],Ce=pe>>>4;if(!pe)throw"invalid distance";l+=pe&15;var q=H3e[Ce];if(Ce>3){var we=MX[Ce];q+=kP(e,l)&(1<<we)-1,l+=we}if(l>_){if(a)throw"unexpected EOF";break}i&&o(c+131072);for(var Ve=c+be;c<Ve;c+=4)t[c]=t[c-q],t[c+1]=t[c+1-q],t[c+2]=t[c+2-q],t[c+3]=t[c+3-q];c=Ve}}n.l=h,n.p=ee,n.b=c,h&&(s=1,n.m=p,n.d=f,n.n=v)}while(!s);return c==t.length?t:G3e(t,0,c)},q3e=new Wl(0),Z3e=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Y3e(e,t){return K3e((Z3e(e),e.subarray(2,-4)),t)}var X3e=typeof TextDecoder<"u"&&new TextDecoder,J3e=0;try{X3e.decode(q3e,{stream:!0}),J3e=1}catch{}function IX(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,a=r,o=Math.floor((i+a)/2);for(;t<n[o]||t>=n[o+1];)t<n[o]?a=o:i=o,o=Math.floor((i+a)/2);return o}function Q3e(e,t,n,r){const i=[],a=[],o=[];i[0]=1;for(let s=1;s<=n;++s){a[s]=t-r[e+1-s],o[s]=r[e+s]-t;let l=0;for(let c=0;c<s;++c){const h=o[c+1],f=a[s-c],p=i[c]/(h+f);i[c]=l+h*p,l=f*p}i[s]=l}return i}function e5e(e,t,n,r){const i=IX(e,r,t),a=Q3e(i,r,e,t),o=new PM(0,0,0,0);for(let s=0;s<=e;++s){const l=n[i-e+s],c=a[s],h=l.w*c;o.x+=l.x*h,o.y+=l.y*h,o.z+=l.z*h,o.w+=l.w*c}return o}function t5e(e,t,n,r,i){const a=[];for(let f=0;f<=n;++f)a[f]=0;const o=[];for(let f=0;f<=r;++f)o[f]=a.slice(0);const s=[];for(let f=0;f<=n;++f)s[f]=a.slice(0);s[0][0]=1;const l=a.slice(0),c=a.slice(0);for(let f=1;f<=n;++f){l[f]=t-i[e+1-f],c[f]=i[e+f]-t;let p=0;for(let v=0;v<f;++v){const _=c[v+1],b=l[f-v];s[f][v]=_+b;const C=s[v][f-1]/s[f][v];s[v][f]=p+_*C,p=b*C}s[f][f]=p}for(let f=0;f<=n;++f)o[0][f]=s[f][n];for(let f=0;f<=n;++f){let p=0,v=1;const _=[];for(let b=0;b<=n;++b)_[b]=a.slice(0);_[0][0]=1;for(let b=1;b<=r;++b){let C=0;const T=f-b,E=n-b;f>=b&&(_[v][0]=_[p][0]/s[E+1][T],C=_[v][0]*s[T][E]);const A=T>=-1?1:-T,I=f-1<=E?b-1:n-f;for(let B=A;B<=I;++B)_[v][B]=(_[p][B]-_[p][B-1])/s[E+1][T+B],C+=_[v][B]*s[T+B][E];f<=E&&(_[v][b]=-_[p][b-1]/s[E+1][f],C+=_[v][b]*s[f][E]),o[b][f]=C;const O=p;p=v,v=O}}let h=n;for(let f=1;f<=r;++f){for(let p=0;p<=n;++p)o[f][p]*=h;h*=n-f}return o}function n5e(e,t,n,r,i){const a=i<e?i:e,o=[],s=IX(e,r,t),l=t5e(s,r,e,a,t),c=[];for(let h=0;h<n.length;++h){const f=n[h].clone(),p=f.w;f.x*=p,f.y*=p,f.z*=p,c[h]=f}for(let h=0;h<=a;++h){const f=c[s-e].clone().multiplyScalar(l[h][0]);for(let p=1;p<=e;++p)f.add(c[s-e+p].clone().multiplyScalar(l[h][p]));o[h]=f}for(let h=a+1;h<=i+1;++h)o[h]=new PM(0,0,0);return o}function r5e(e,t){let n=1;for(let i=2;i<=e;++i)n*=i;let r=1;for(let i=2;i<=t;++i)r*=i;for(let i=2;i<=e-t;++i)r*=i;return n/r}function i5e(e){const t=e.length,n=[],r=[];for(let a=0;a<t;++a){const o=e[a];n[a]=new lr(o.x,o.y,o.z),r[a]=o.w}const i=[];for(let a=0;a<t;++a){const o=n[a].clone();for(let s=1;s<=a;++s)o.sub(i[a-s].clone().multiplyScalar(r5e(a,s)*r[s]));i[a]=o.divideScalar(r[0])}return i}function a5e(e,t,n,r,i){const a=n5e(e,t,n,r,i);return i5e(a)}class o5e extends Cae{constructor(t,n,r,i,a){super(),this.degree=t,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=a||this.knots.length-1;for(let o=0;o<r.length;++o){const s=r[o];this.controlPoints[o]=new PM(s.x,s.y,s.z,s.w)}}getPoint(t,n=new lr){const r=n,i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=e5e(this.degree,this.knots,this.controlPoints,i);return a.w!==1&&a.divideScalar(a.w),r.set(a.x,a.y,a.z)}getTangent(t,n=new lr){const r=n,i=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),a=a5e(this.degree,this.knots,this.controlPoints,i,1);return r.copy(a[1]).normalize(),r}}let ii,Da,Ds;class uz extends I7{constructor(t){super(t)}load(t,n,r,i){const a=this,o=a.path===""?Tae.extractUrlBase(t):a.path,s=new L7(this.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(t,function(l){try{n(a.parse(l,o))}catch(c){i?i(c):console.error(c),a.manager.itemError(t)}},r,i)}parse(t,n){if(h5e(t))ii=new d5e().parse(t);else{const i=OX(t);if(!f5e(i))throw new Error("THREE.FBXLoader: Unknown format.");if(eV(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+eV(i));ii=new c5e().parse(i)}const r=new Mae(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new s5e(r,this.manager).parse(ii)}}class s5e{constructor(t,n){this.textureLoader=t,this.manager=n}parse(){Da=this.parseConnections();const t=this.parseImages(),n=this.parseTextures(t),r=this.parseMaterials(n),i=this.parseDeformers(),a=new l5e().parse(i);return this.parseScene(i,a,r),Ds}parseConnections(){const t=new Map;return"Connections"in ii&&ii.Connections.connections.forEach(function(r){const i=r[0],a=r[1],o=r[2];t.has(i)||t.set(i,{parents:[],children:[]});const s={ID:a,relationship:o};t.get(i).parents.push(s),t.has(a)||t.set(a,{parents:[],children:[]});const l={ID:i,relationship:o};t.get(a).children.push(l)}),t}parseImages(){const t={},n={};if("Video"in ii.Objects){const r=ii.Objects.Video;for(const i in r){const a=r[i],o=parseInt(i);if(t[o]=a.RelativeFilename||a.Filename,"Content"in a){const s=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,l=typeof a.Content=="string"&&a.Content!=="";if(s||l){const c=this.parseImage(r[i]);n[a.RelativeFilename||a.Filename]=c}}}}for(const r in t){const i=t[r];n[i]!==void 0?t[r]=n[i]:t[r]=t[r].split("\\").pop()}return t}parseImage(t){const n=t.Content,r=t.RelativeFilename||t.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let a;switch(i){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof n=="string")return"data:"+a+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:a}))}}parseTextures(t){const n=new Map;if("Texture"in ii.Objects){const r=ii.Objects.Texture;for(const i in r){const a=this.parseTexture(r[i],t);n.set(parseInt(i),a)}}return n}parseTexture(t,n){const r=this.loadTexture(t,n);r.ID=t.id,r.name=t.attrName;const i=t.WrapModeU,a=t.WrapModeV,o=i!==void 0?i.value:0,s=a!==void 0?a.value:0;if(r.wrapS=o===0?ZF:YF,r.wrapT=s===0?ZF:YF,"Scaling"in t){const l=t.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in t){const l=t.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(t,n){let r;const i=this.textureLoader.path,a=Da.get(t.id).children;a!==void 0&&a.length>0&&n[a[0].ID]!==void 0&&(r=n[a[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const s=t.FileName.slice(-3).toLowerCase();if(s==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),o=new aT):(l.setPath(this.textureLoader.path),o=l.load(r))}else s==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),o=new aT):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(t){const n=new Map;if("Material"in ii.Objects){const r=ii.Objects.Material;for(const i in r){const a=this.parseMaterial(r[i],t);a!==null&&n.set(parseInt(i),a)}}return n}parseMaterial(t,n){const r=t.id,i=t.attrName;let a=t.ShadingModel;if(typeof a=="object"&&(a=a.value),!Da.has(r))return null;const o=this.parseParameters(t,n,r);let s;switch(a.toLowerCase()){case"phong":s=new pC;break;case"lambert":s=new kae;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),s=new pC;break}return s.setValues(o),s.name=i,s}parseParameters(t,n,r){const i={};t.BumpFactor&&(i.bumpScale=t.BumpFactor.value),t.Diffuse?i.color=new ra().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(i.color=new ra().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(i.displacementScale=t.DisplacementFactor.value),t.Emissive?i.emissive=new ra().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(i.emissive=new ra().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(i.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(i.opacity=parseFloat(t.Opacity.value)),i.opacity<1&&(i.transparent=!0),t.ReflectionFactor&&(i.reflectivity=t.ReflectionFactor.value),t.Shininess&&(i.shininess=t.Shininess.value),t.Specular?i.specular=new ra().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(i.specular=new ra().fromArray(t.SpecularColor.value));const a=this;return Da.get(r).children.forEach(function(o){const s=o.relationship;switch(s){case"Bump":i.bumpMap=a.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=a.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=a.getTexture(n,o.ID),i.map!==void 0&&(i.map.encoding=GS);break;case"DisplacementColor":i.displacementMap=a.getTexture(n,o.ID);break;case"EmissiveColor":i.emissiveMap=a.getTexture(n,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=GS);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=a.getTexture(n,o.ID);break;case"ReflectionColor":i.envMap=a.getTexture(n,o.ID),i.envMap!==void 0&&(i.envMap.mapping=Eae,i.envMap.encoding=GS);break;case"SpecularColor":i.specularMap=a.getTexture(n,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=GS);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=a.getTexture(n,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",s);break}}),i}getTexture(t,n){return"LayeredTexture"in ii.Objects&&n in ii.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=Da.get(n).children[0].ID),t.get(n)}parseDeformers(){const t={},n={};if("Deformer"in ii.Objects){const r=ii.Objects.Deformer;for(const i in r){const a=r[i],o=Da.get(parseInt(i));if(a.attrType==="Skin"){const s=this.parseSkeleton(o,r);s.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),s.geometryID=o.parents[0].ID,t[i]=s}else if(a.attrType==="BlendShape"){const s={id:i};s.rawTargets=this.parseMorphTargets(o,r),s.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=s}}}return{skeletons:t,morphTargets:n}}parseSkeleton(t,n){const r=[];return t.children.forEach(function(i){const a=n[i.ID];if(a.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Ta().fromArray(a.TransformLink.a)};"Indexes"in a&&(o.indices=a.Indexes.a,o.weights=a.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(t,n){const r=[];for(let i=0;i<t.children.length;i++){const a=t.children[i],o=n[a.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;s.geoID=Da.get(parseInt(a.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(s)}return r}parseScene(t,n,r){Ds=new ML;const i=this.parseModels(t.skeletons,n,r),a=ii.Objects.Model,o=this;i.forEach(function(l){const c=a[l.ID];o.setLookAtProperties(l,c),Da.get(l.ID).parents.forEach(function(f){const p=i.get(f.ID);p!==void 0&&p.add(l)}),l.parent===null&&Ds.add(l)}),this.bindSkeleton(t.skeletons,n,i),this.createAmbientLight(),Ds.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=DX(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const s=new u5e().parse();Ds.children.length===1&&Ds.children[0].isGroup&&(Ds.children[0].animations=s,Ds=Ds.children[0]),Ds.animations=s}parseModels(t,n,r){const i=new Map,a=ii.Objects.Model;for(const o in a){const s=parseInt(o),l=a[o],c=Da.get(s);let h=this.buildSkeleton(c,t,s,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(c);break;case"Light":h=this.createLight(c);break;case"Mesh":h=this.createMesh(c,n,r);break;case"NurbsCurve":h=this.createCurve(c,n);break;case"LimbNode":case"Root":h=new XF;break;case"Null":default:h=new ML;break}h.name=l.attrName?oT.sanitizeNodeName(l.attrName):"",h.ID=s}this.getTransformData(h,l),i.set(s,h)}return i}buildSkeleton(t,n,r,i){let a=null;return t.parents.forEach(function(o){for(const s in n){const l=n[s];l.rawBones.forEach(function(c,h){if(c.ID===o.ID){const f=a;a=new XF,a.matrixWorld.copy(c.transformLink),a.name=i?oT.sanitizeNodeName(i):"",a.ID=r,l.bones[h]=a,f!==null&&a.add(f)}})}}),a}createCamera(t){let n,r;if(t.children.forEach(function(i){const a=ii.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)n=new DA;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let a=1;r.NearPlane!==void 0&&(a=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let s=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(s=r.AspectWidth.value,l=r.AspectHeight.value);const c=s/l;let h=45;r.FieldOfView!==void 0&&(h=r.FieldOfView.value);const f=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new y0(h,c,a,o),f!==null&&n.setFocalLength(f);break;case 1:n=new D7(-s/2,s/2,l/2,-l/2,a,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new DA;break}}return n}createLight(t){let n,r;if(t.children.forEach(function(i){const a=ii.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)n=new DA;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let a=16777215;r.Color!==void 0&&(a=new ra().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let s=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?s=0:s=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:n=new JF(a,o,s,l);break;case 1:n=new Uc(a,o);break;case 2:let c=Math.PI/3;r.InnerAngle!==void 0&&(c=Oc.degToRad(r.InnerAngle.value));let h=0;r.OuterAngle!==void 0&&(h=Oc.degToRad(r.OuterAngle.value),h=Math.max(h,1)),n=new Aae(a,o,s,c,h,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new JF(a,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(t,n,r){let i,a=null,o=null;const s=[];return t.children.forEach(function(l){n.has(l.ID)&&(a=n.get(l.ID)),r.has(l.ID)&&s.push(r.get(l.ID))}),s.length>1?o=s:s.length>0?o=s[0]:(o=new pC({color:13421772}),s.push(o)),"color"in a.attributes&&s.forEach(function(l){l.vertexColors=!0}),a.FBX_Deformer?(i=new Pae(a,o),i.normalizeSkinWeights()):i=new Ru(a,o),i}createCurve(t,n){const r=t.children.reduce(function(a,o){return n.has(o.ID)&&(a=n.get(o.ID)),a},null),i=new fC({color:3342591,linewidth:1});return new Iae(r,i)}getTransformData(t,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=RX(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),t.userData.transformData=r}setLookAtProperties(t,n){"LookAtProperty"in n&&Da.get(t.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const a=ii.Objects.Model[i.ID];if("Lcl_Translation"in a){const o=a.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(o),Ds.add(t.target)):t.lookAt(new lr().fromArray(o))}}})}bindSkeleton(t,n,r){const i=this.parsePoseNodes();for(const a in t){const o=t[a];Da.get(parseInt(o.ID)).parents.forEach(function(l){if(n.has(l.ID)){const c=l.ID;Da.get(c).parents.forEach(function(f){r.has(f.ID)&&r.get(f.ID).bind(new Lae(o.bones),i[f.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in ii.Objects){const n=ii.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(a){t[a.Node]=new Ta().fromArray(a.Matrix.a)}):t[i.Node]=new Ta().fromArray(i.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in ii&&"AmbientColor"in ii.GlobalSettings){const t=ii.GlobalSettings.AmbientColor.value,n=t[0],r=t[1],i=t[2];if(n!==0||r!==0||i!==0){const a=new ra(n,r,i);Ds.add(new _0(a,1))}}}}class l5e{constructor(){this.negativeMaterialIndices=!1}parse(t){const n=new Map;if("Geometry"in ii.Objects){const r=ii.Objects.Geometry;for(const i in r){const a=Da.get(parseInt(i)),o=this.parseGeometry(a,r[i],t);n.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(t,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(t,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(t,n,r){const i=r.skeletons,a=[],o=t.parents.map(function(f){return ii.Objects.Model[f.ID]});if(o.length===0)return;const s=t.children.reduce(function(f,p){return i[p.ID]!==void 0&&(f=i[p.ID]),f},null);t.children.forEach(function(f){r.morphTargets[f.ID]!==void 0&&a.push(r.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=RX(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const h=DX(c);return this.genGeometry(n,s,a,h)}genGeometry(t,n,r,i){const a=new _f;t.attrName&&(a.name=t.attrName);const o=this.parseGeoNode(t,n),s=this.genBuffers(o),l=new Rs(s.vertex,3);if(l.applyMatrix4(i),a.setAttribute("position",l),s.colors.length>0&&a.setAttribute("color",new Rs(s.colors,3)),n&&(a.setAttribute("skinIndex",new Dae(s.weightsIndices,4)),a.setAttribute("skinWeight",new Rs(s.vertexWeights,4)),a.FBX_Deformer=n),s.normal.length>0){const c=new Rae().getNormalMatrix(i),h=new Rs(s.normal,3);h.applyNormalMatrix(c),a.setAttribute("normal",h)}if(s.uvs.forEach(function(c,h){let f="uv"+(h+1).toString();h===0&&(f="uv"),a.setAttribute(f,new Rs(s.uvs[h],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=s.materialIndex[0],h=0;if(s.materialIndex.forEach(function(f,p){f!==c&&(a.addGroup(h,p-h,c),c=f,h=p)}),a.groups.length>0){const f=a.groups[a.groups.length-1],p=f.start+f.count;p!==s.materialIndex.length&&a.addGroup(p,s.materialIndex.length-p,c)}a.groups.length===0&&a.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(a,t,r,i),a}parseGeoNode(t,n){const r={};if(r.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],r.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(r.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(r.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(r.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){r.uv=[];let i=0;for(;t.LayerElementUV[i];)t.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(t.LayerElementUV[i])),i++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(i,a){i.indices.forEach(function(o,s){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:a,weight:i.weights[s]})})})),r}genBuffers(t){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,a=!1,o=[],s=[],l=[],c=[],h=[],f=[];const p=this;return t.vertexIndices.forEach(function(v,_){let b,C=!1;v<0&&(v=v^-1,C=!0);let T=[],E=[];if(o.push(v*3,v*3+1,v*3+2),t.color){const A=g2(_,r,v,t.color);l.push(A[0],A[1],A[2])}if(t.skeleton){if(t.weightTable[v]!==void 0&&t.weightTable[v].forEach(function(A){E.push(A.weight),T.push(A.id)}),E.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const A=[0,0,0,0],I=[0,0,0,0];E.forEach(function(O,B){let N=O,H=T[B];I.forEach(function(j,W,U){if(N>j){U[W]=N,N=j;const Y=A[W];A[W]=H,H=Y}})}),T=A,E=I}for(;E.length<4;)E.push(0),T.push(0);for(let A=0;A<4;++A)h.push(E[A]),f.push(T[A])}if(t.normal){const A=g2(_,r,v,t.normal);s.push(A[0],A[1],A[2])}t.material&&t.material.mappingType!=="AllSame"&&(b=g2(_,r,v,t.material)[0],b<0&&(p.negativeMaterialIndices=!0,b=0)),t.uv&&t.uv.forEach(function(A,I){const O=g2(_,r,v,A);c[I]===void 0&&(c[I]=[]),c[I].push(O[0]),c[I].push(O[1])}),i++,C&&(i>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),p.genFace(n,t,o,b,s,l,c,h,f,i),r++,i=0,o=[],s=[],l=[],c=[],h=[],f=[])}),n}genFace(t,n,r,i,a,o,s,l,c,h){for(let f=2;f<h;f++)t.vertex.push(n.vertexPositions[r[0]]),t.vertex.push(n.vertexPositions[r[1]]),t.vertex.push(n.vertexPositions[r[2]]),t.vertex.push(n.vertexPositions[r[(f-1)*3]]),t.vertex.push(n.vertexPositions[r[(f-1)*3+1]]),t.vertex.push(n.vertexPositions[r[(f-1)*3+2]]),t.vertex.push(n.vertexPositions[r[f*3]]),t.vertex.push(n.vertexPositions[r[f*3+1]]),t.vertex.push(n.vertexPositions[r[f*3+2]]),n.skeleton&&(t.vertexWeights.push(l[0]),t.vertexWeights.push(l[1]),t.vertexWeights.push(l[2]),t.vertexWeights.push(l[3]),t.vertexWeights.push(l[(f-1)*4]),t.vertexWeights.push(l[(f-1)*4+1]),t.vertexWeights.push(l[(f-1)*4+2]),t.vertexWeights.push(l[(f-1)*4+3]),t.vertexWeights.push(l[f*4]),t.vertexWeights.push(l[f*4+1]),t.vertexWeights.push(l[f*4+2]),t.vertexWeights.push(l[f*4+3]),t.weightsIndices.push(c[0]),t.weightsIndices.push(c[1]),t.weightsIndices.push(c[2]),t.weightsIndices.push(c[3]),t.weightsIndices.push(c[(f-1)*4]),t.weightsIndices.push(c[(f-1)*4+1]),t.weightsIndices.push(c[(f-1)*4+2]),t.weightsIndices.push(c[(f-1)*4+3]),t.weightsIndices.push(c[f*4]),t.weightsIndices.push(c[f*4+1]),t.weightsIndices.push(c[f*4+2]),t.weightsIndices.push(c[f*4+3])),n.color&&(t.colors.push(o[0]),t.colors.push(o[1]),t.colors.push(o[2]),t.colors.push(o[(f-1)*3]),t.colors.push(o[(f-1)*3+1]),t.colors.push(o[(f-1)*3+2]),t.colors.push(o[f*3]),t.colors.push(o[f*3+1]),t.colors.push(o[f*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(t.materialIndex.push(i),t.materialIndex.push(i),t.materialIndex.push(i)),n.normal&&(t.normal.push(a[0]),t.normal.push(a[1]),t.normal.push(a[2]),t.normal.push(a[(f-1)*3]),t.normal.push(a[(f-1)*3+1]),t.normal.push(a[(f-1)*3+2]),t.normal.push(a[f*3]),t.normal.push(a[f*3+1]),t.normal.push(a[f*3+2])),n.uv&&n.uv.forEach(function(p,v){t.uvs[v]===void 0&&(t.uvs[v]=[]),t.uvs[v].push(s[v][0]),t.uvs[v].push(s[v][1]),t.uvs[v].push(s[v][(f-1)*2]),t.uvs[v].push(s[v][(f-1)*2+1]),t.uvs[v].push(s[v][f*2]),t.uvs[v].push(s[v][f*2+1])})}addMorphTargets(t,n,r,i){if(r.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const a=this;r.forEach(function(o){o.rawTargets.forEach(function(s){const l=ii.Objects.Geometry[s.geoID];l!==void 0&&a.genMorphGeometry(t,n,l,i,s.name)})})}genMorphGeometry(t,n,r,i,a){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],s=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],c=t.attributes.position.count*3,h=new Float32Array(c);for(let _=0;_<l.length;_++){const b=l[_]*3;h[b]=s[_*3],h[b+1]=s[_*3+1],h[b+2]=s[_*3+2]}const f={vertexIndices:o,vertexPositions:h},p=this.genBuffers(f),v=new Rs(p.vertex,3);v.name=a||r.attrName,v.applyMatrix4(i),t.morphAttributes.position.push(v)}parseNormals(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,i=t.Normals.a;let a=[];return r==="IndexToDirect"&&("NormalIndex"in t?a=t.NormalIndex.a:"NormalsIndex"in t&&(a=t.NormalsIndex.a)),{dataSize:3,buffer:i,indices:a,mappingType:n,referenceType:r}}parseUVs(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,i=t.UV.a;let a=[];return r==="IndexToDirect"&&(a=t.UVIndex.a),{dataSize:2,buffer:i,indices:a,mappingType:n,referenceType:r}}parseVertexColors(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,i=t.Colors.a;let a=[];return r==="IndexToDirect"&&(a=t.ColorIndex.a),{dataSize:4,buffer:i,indices:a,mappingType:n,referenceType:r}}parseMaterialIndices(t){const n=t.MappingInformationType,r=t.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=t.Materials.a,a=[];for(let o=0;o<i.length;++o)a.push(o);return{dataSize:1,buffer:i,indices:a,mappingType:n,referenceType:r}}parseNurbsGeometry(t){const n=parseInt(t.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new _f;const r=n-1,i=t.KnotVector.a,a=[],o=t.Points.a;for(let f=0,p=o.length;f<p;f+=4)a.push(new PM().fromArray(o,f));let s,l;if(t.Form==="Closed")a.push(a[0]);else if(t.Form==="Periodic"){s=r,l=i.length-1-s;for(let f=0;f<r;++f)a.push(a[f])}const h=new o5e(r,i,a,s,l).getPoints(a.length*12);return new _f().setFromPoints(h)}}class u5e{parse(){const t=[],n=this.parseClips();if(n!==void 0)for(const r in n){const i=n[r],a=this.addClip(i);t.push(a)}return t}parseClips(){if(ii.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const t=ii.Objects.AnimationCurveNode,n=new Map;for(const r in t){const i=t[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:i.id,attr:i.attrName,curves:{}};n.set(a.id,a)}}return n}parseAnimationCurves(t){const n=ii.Objects.AnimationCurve;for(const r in n){const i={id:n[r].id,times:n[r].KeyTime.a.map(p5e),values:n[r].KeyValueFloat.a},a=Da.get(i.id);if(a!==void 0){const o=a.parents[0].ID,s=a.parents[0].relationship;s.match(/X/)?t.get(o).curves.x=i:s.match(/Y/)?t.get(o).curves.y=i:s.match(/Z/)?t.get(o).curves.z=i:s.match(/d|DeformPercent/)&&t.has(o)&&(t.get(o).curves.morph=i)}}}parseAnimationLayers(t){const n=ii.Objects.AnimationLayer,r=new Map;for(const i in n){const a=[],o=Da.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,c){if(t.has(l.ID)){const h=t.get(l.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(a[c]===void 0){const f=Da.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(f!==void 0){const p=ii.Objects.Model[f.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const v={modelName:p.attrName?oT.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ds.traverse(function(_){_.ID===p.id&&(v.transform=_.matrix,_.userData.transformData&&(v.eulerOrder=_.userData.transformData.eulerOrder))}),v.transform||(v.transform=new Ta),"PreRotation"in p&&(v.preRotation=p.PreRotation.value),"PostRotation"in p&&(v.postRotation=p.PostRotation.value),a[c]=v}}a[c]&&(a[c][h.attr]=h)}else if(h.curves.morph!==void 0){if(a[c]===void 0){const f=Da.get(l.ID).parents.filter(function(T){return T.relationship!==void 0})[0].ID,p=Da.get(f).parents[0].ID,v=Da.get(p).parents[0].ID,_=Da.get(v).parents[0].ID,b=ii.Objects.Model[_],C={modelName:b.attrName?oT.sanitizeNodeName(b.attrName):"",morphName:ii.Objects.Deformer[f].attrName};a[c]=C}a[c][h.attr]=h}}}),r.set(parseInt(i),a))}return r}parseAnimStacks(t){const n=ii.Objects.AnimationStack,r={};for(const i in n){const a=Da.get(parseInt(i)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=t.get(a[0].ID);r[i]={name:n[i].attrName,layer:o}}return r}addClip(t){let n=[];const r=this;return t.layer.forEach(function(i){n=n.concat(r.generateTracks(i))}),new Oae(t.name,-1,n)}generateTracks(t){const n=[];let r=new lr,i=new sy,a=new lr;if(t.transform&&t.transform.decompose(r,i,a),r=r.toArray(),i=new of().setFromQuaternion(i,t.eulerOrder).toArray(),a=a.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.T.curves,r,"position");o!==void 0&&n.push(o)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const o=this.generateRotationTrack(t.modelName,t.R.curves,i,t.preRotation,t.postRotation,t.eulerOrder);o!==void 0&&n.push(o)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.S.curves,a,"scale");o!==void 0&&n.push(o)}if(t.DeformPercent!==void 0){const o=this.generateMorphTrack(t);o!==void 0&&n.push(o)}return n}generateVectorTrack(t,n,r,i){const a=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(a,n,r);return new zae(t+"."+i,a,o)}generateRotationTrack(t,n,r,i,a,o){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(Oc.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(Oc.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(Oc.degToRad));const s=this.getTimesForAllAxes(n),l=this.getKeyframeTrackValues(s,n,r);i!==void 0&&(i=i.map(Oc.degToRad),i.push(o),i=new of().fromArray(i),i=new sy().setFromEuler(i)),a!==void 0&&(a=a.map(Oc.degToRad),a.push(o),a=new of().fromArray(a),a=new sy().setFromEuler(a).invert());const c=new sy,h=new of,f=[];for(let p=0;p<l.length;p+=3)h.set(l[p],l[p+1],l[p+2],o),c.setFromEuler(h),i!==void 0&&c.premultiply(i),a!==void 0&&c.multiply(a),c.toArray(f,p/3*4);return new Bae(t+".quaternion",s,f)}generateMorphTrack(t){const n=t.DeformPercent.curves.morph,r=n.values.map(function(a){return a/100}),i=Ds.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new Fae(t.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(t){let n=[];if(t.x!==void 0&&(n=n.concat(t.x.times)),t.y!==void 0&&(n=n.concat(t.y.times)),t.z!==void 0&&(n=n.concat(t.z.times)),n=n.sort(function(r,i){return r-i}),n.length>1){let r=1,i=n[0];for(let a=1;a<n.length;a++){const o=n[a];o!==i&&(n[r]=o,i=o,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(t,n,r){const i=r,a=[];let o=-1,s=-1,l=-1;return t.forEach(function(c){if(n.x&&(o=n.x.times.indexOf(c)),n.y&&(s=n.y.times.indexOf(c)),n.z&&(l=n.z.times.indexOf(c)),o!==-1){const h=n.x.values[o];a.push(h),i[0]=h}else a.push(i[0]);if(s!==-1){const h=n.y.values[s];a.push(h),i[1]=h}else a.push(i[1]);if(l!==-1){const h=n.z.values[l];a.push(h),i[2]=h}else a.push(i[2])}),a}interpolateRotations(t){for(let n=1;n<t.values.length;n++){const r=t.values[n-1],i=t.values[n]-r,a=Math.abs(i);if(a>=180){const o=a/180,s=i/o;let l=r+s;const c=t.times[n-1],f=(t.times[n]-c)/o;let p=c+f;const v=[],_=[];for(;p<t.times[n];)v.push(p),p+=f,_.push(l),l+=s;t.times=tV(t.times,n,v),t.values=tV(t.values,n,_)}}}}class c5e{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,n){this.currentProp=t,this.currentPropName=n}parse(t){this.currentIndent=0,this.allNodes=new LX,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=t.split(/[\r\n]+/);return r.forEach(function(i,a){const o=i.match(/^[\s\t]*;/),s=i.match(/^[\s\t]*$/);if(o||s)return;const l=i.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=i.match("^\\t{"+(n.currentIndent-1)+"}}");l?n.parseNodeBegin(i,l):c?n.parseNodeProperty(i,c,r[++a]):h?n.popStack():i.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(t,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:r},o=this.parseNodeAttr(i),s=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,a):r in s?(r==="PoseNode"?s.PoseNode.push(a):s[r].id!==void 0&&(s[r]={},s[r][s[r].id]=s[r]),o.id!==""&&(s[r][o.id]=a)):typeof o.id=="number"?(s[r]={},s[r][o.id]=a):r!=="Properties70"&&(r==="PoseNode"?s[r]=[a]:s[r]=a),typeof o.id=="number"&&(a.id=o.id),o.name!==""&&(a.attrName=o.name),o.type!==""&&(a.attrType=o.type),this.pushStack(a)}parseNodeAttr(t){let n=t[0];t[0]!==""&&(n=parseInt(t[0]),isNaN(n)&&(n=t[0]));let r="",i="";return t.length>1&&(r=t[1].replace(/^(\w+)::/,""),i=t[2]),{id:n,name:r,type:i}}parseNodeProperty(t,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),a=n[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&a===","&&(a=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(t,i,a);return}if(i==="C"){const l=a.split(",").slice(1),c=parseInt(l[0]),h=parseInt(l[1]);let f=a.split(",").slice(3);f=f.map(function(p){return p.trim().replace(/^"/,"")}),i="connections",a=[c,h],m5e(a,f),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=a),i in o&&Array.isArray(o[i])?o[i].push(a):i!=="a"?o[i]=a:o.a=a,this.setCurrentProp(o,i),i==="a"&&a.slice(-1)!==","&&(o.a=AP(a))}parseNodePropertyContinued(t){const n=this.getCurrentNode();n.a+=t,t.slice(-1)!==","&&(n.a=AP(n.a))}parseNodeSpecialProperty(t,n,r){const i=r.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=i[0],o=i[1],s=i[2],l=i[3];let c=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=AP(c);break}this.getPrevNode()[a]={type:o,type2:s,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),a)}}class d5e{parse(t){const n=new Q$(t);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new LX;for(;!this.endOfContent(n);){const a=this.parseNode(n,r);a!==null&&i.add(a.name,a)}return i}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,n){const r={},i=n>=7500?t.getUint64():t.getUint32(),a=n>=7500?t.getUint64():t.getUint32();n>=7500?t.getUint64():t.getUint32();const o=t.getUint8(),s=t.getString(o);if(i===0)return null;const l=[];for(let p=0;p<a;p++)l.push(this.parseProperty(t));const c=l.length>0?l[0]:"",h=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(r.singleProperty=a===1&&t.getOffset()===i;i>t.getOffset();){const p=this.parseNode(t,n);p!==null&&this.parseSubNode(s,r,p)}return r.propertyList=l,typeof c=="number"&&(r.id=c),h!==""&&(r.attrName=h),f!==""&&(r.attrType=f),s!==""&&(r.name=s),r}parseSubNode(t,n,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if(t==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(a,o){o!==0&&i.push(a)}),n.connections===void 0&&(n.connections=[]),n.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(a){n[a]=r[a]});else if(t==="Properties70"&&r.name==="P"){let i=r.propertyList[0],a=r.propertyList[1];const o=r.propertyList[2],s=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],n[i]={type:a,type2:o,flag:s,value:l}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(t){const n=t.getString(1);let r;switch(n){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return r=t.getUint32(),t.getArrayBuffer(r);case"S":return r=t.getUint32(),t.getString(r);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=t.getUint32(),a=t.getUint32(),o=t.getUint32();if(a===0)switch(n){case"b":case"c":return t.getBooleanArray(i);case"d":return t.getFloat64Array(i);case"f":return t.getFloat32Array(i);case"i":return t.getInt32Array(i);case"l":return t.getInt64Array(i)}const s=Y3e(new Uint8Array(t.getArrayBuffer(o))),l=new Q$(s.buffer);switch(n){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class Q${constructor(t,n){this.dv=new DataView(t),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const n=[];for(let r=0;r<t;r++)n.push(this.getBoolean());return n}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getInt32());return n}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n&2147483648?(n=~n&4294967295,t=~t&4294967295,t===4294967295&&(n=n+1&4294967295),t=t+1&4294967295,-(n*4294967296+t)):n*4294967296+t}getInt64Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getInt64());return n}getUint64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getFloat32());return n}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getFloat64());return n}getArrayBuffer(t){const n=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}getString(t){const n=this.offset;let r=new Uint8Array(this.dv.buffer,n,t);this.skip(t);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class LX{add(t,n){this[t]=n}}function h5e(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===OX(e,0,t.length)}function f5e(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(i){const a=e[i-1];return e=e.slice(n+i),n++,a}for(let i=0;i<t.length;++i)if(r(1)===t[i])return!1;return!0}function eV(e){const t=/FBXVersion: (\d+)/,n=e.match(t);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p5e(e){return e/46186158e3}const v5e=[];function g2(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const a=i*r.dataSize,o=a+r.dataSize;return g5e(v5e,r.buffer,a,o)}const EP=new of,Pg=new lr;function DX(e){const t=new Ta,n=new Ta,r=new Ta,i=new Ta,a=new Ta,o=new Ta,s=new Ta,l=new Ta,c=new Ta,h=new Ta,f=new Ta,p=new Ta,v=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(Pg.fromArray(e.translation)),e.preRotation){const W=e.preRotation.map(Oc.degToRad);W.push(e.eulerOrder||of.DEFAULT_ORDER),n.makeRotationFromEuler(EP.fromArray(W))}if(e.rotation){const W=e.rotation.map(Oc.degToRad);W.push(e.eulerOrder||of.DEFAULT_ORDER),r.makeRotationFromEuler(EP.fromArray(W))}if(e.postRotation){const W=e.postRotation.map(Oc.degToRad);W.push(e.eulerOrder||of.DEFAULT_ORDER),i.makeRotationFromEuler(EP.fromArray(W)),i.invert()}e.scale&&a.scale(Pg.fromArray(e.scale)),e.scalingOffset&&s.setPosition(Pg.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(Pg.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(Pg.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(Pg.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const _=n.clone().multiply(r).multiply(i),b=new Ta;b.extractRotation(h);const C=new Ta;C.copyPosition(h);const T=C.clone().invert().multiply(h),E=b.clone().invert().multiply(T),A=a,I=new Ta;if(v===0)I.copy(b).multiply(_).multiply(E).multiply(A);else if(v===1)I.copy(b).multiply(E).multiply(_).multiply(A);else{const U=new Ta().scale(new lr().setFromMatrixScale(f)).clone().invert(),Y=E.clone().multiply(U);I.copy(b).multiply(_).multiply(Y).multiply(A)}const O=c.clone().invert(),B=o.clone().invert();let N=t.clone().multiply(l).multiply(c).multiply(n).multiply(r).multiply(i).multiply(O).multiply(s).multiply(o).multiply(a).multiply(B);const H=new Ta().copyPosition(N),j=h.clone().multiply(H);return p.copyPosition(j),N=p.clone().multiply(I),N.premultiply(h.invert()),N}function RX(e){e=e||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return e===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function AP(e){return e.split(",").map(function(n){return parseFloat(n)})}function OX(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=e.byteLength),new TextDecoder().decode(new Uint8Array(e,t,n))}function m5e(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}function g5e(e,t,n,r){for(let i=n,a=0;i<r;i++,a++)e[a]=t[i];return e}function tV(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}const nV={type:"change"},PP={type:"start"},rV={type:"end"};class mx extends Nae{constructor(t,n){super(),this.object=t,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new lr,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:wg.ROTATE,MIDDLE:wg.DOLLY,RIGHT:wg.PAN},this.touches={ONE:xg.ROTATE,TWO:xg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(mt){mt.addEventListener("keydown",Bt),this._domElementKeyEvents=mt},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Bt),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(nV),r.update(),a=i.NONE},this.update=function(){const mt=new lr,Gt=new sy().setFromUnitVectors(t.up,new lr(0,1,0)),gn=Gt.clone().invert(),xt=new lr,Zt=new sy,Ze=2*Math.PI;return function(){const ve=r.object.position;mt.copy(ve).sub(r.target),mt.applyQuaternion(Gt),s.setFromVector3(mt),r.autoRotate&&a===i.NONE&&j(N()),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let ke=r.minAzimuthAngle,Oe=r.maxAzimuthAngle;return isFinite(ke)&&isFinite(Oe)&&(ke<-Math.PI?ke+=Ze:ke>Math.PI&&(ke-=Ze),Oe<-Math.PI?Oe+=Ze:Oe>Math.PI&&(Oe-=Ze),ke<=Oe?s.theta=Math.max(ke,Math.min(Oe,s.theta)):s.theta=s.theta>(ke+Oe)/2?Math.max(ke,s.theta):Math.min(Oe,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=c,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),mt.setFromSpherical(s),mt.applyQuaternion(gn),ve.copy(r.target).add(mt),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),c=1,f||xt.distanceToSquared(r.object.position)>o||8*(1-Zt.dot(r.object.quaternion))>o?(r.dispatchEvent(nV),xt.copy(r.object.position),Zt.copy(r.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Ot),r.domElement.removeEventListener("pointerdown",ze),r.domElement.removeEventListener("pointercancel",lt),r.domElement.removeEventListener("wheel",It),r.domElement.removeEventListener("pointermove",ct),r.domElement.removeEventListener("pointerup",Lt),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Bt),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const o=1e-6,s=new QF,l=new QF;let c=1;const h=new lr;let f=!1;const p=new na,v=new na,_=new na,b=new na,C=new na,T=new na,E=new na,A=new na,I=new na,O=[],B={};function N(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function j(mt){l.theta-=mt}function W(mt){l.phi-=mt}const U=function(){const mt=new lr;return function(gn,xt){mt.setFromMatrixColumn(xt,0),mt.multiplyScalar(-gn),h.add(mt)}}(),Y=function(){const mt=new lr;return function(gn,xt){r.screenSpacePanning===!0?mt.setFromMatrixColumn(xt,1):(mt.setFromMatrixColumn(xt,0),mt.crossVectors(r.object.up,mt)),mt.multiplyScalar(gn),h.add(mt)}}(),ie=function(){const mt=new lr;return function(gn,xt){const Zt=r.domElement;if(r.object.isPerspectiveCamera){const Ze=r.object.position;mt.copy(Ze).sub(r.target);let Fe=mt.length();Fe*=Math.tan(r.object.fov/2*Math.PI/180),U(2*gn*Fe/Zt.clientHeight,r.object.matrix),Y(2*xt*Fe/Zt.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(U(gn*(r.object.right-r.object.left)/r.object.zoom/Zt.clientWidth,r.object.matrix),Y(xt*(r.object.top-r.object.bottom)/r.object.zoom/Zt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function ue(mt){r.object.isPerspectiveCamera?c/=mt:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*mt)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function J(mt){r.object.isPerspectiveCamera?c*=mt:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/mt)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function q(mt){p.set(mt.clientX,mt.clientY)}function ce(mt){E.set(mt.clientX,mt.clientY)}function re(mt){b.set(mt.clientX,mt.clientY)}function ee(mt){v.set(mt.clientX,mt.clientY),_.subVectors(v,p).multiplyScalar(r.rotateSpeed);const Gt=r.domElement;j(2*Math.PI*_.x/Gt.clientHeight),W(2*Math.PI*_.y/Gt.clientHeight),p.copy(v),r.update()}function oe(mt){A.set(mt.clientX,mt.clientY),I.subVectors(A,E),I.y>0?ue(H()):I.y<0&&J(H()),E.copy(A),r.update()}function be(mt){C.set(mt.clientX,mt.clientY),T.subVectors(C,b).multiplyScalar(r.panSpeed),ie(T.x,T.y),b.copy(C),r.update()}function we(mt){mt.deltaY<0?J(H()):mt.deltaY>0&&ue(H()),r.update()}function pe(mt){let Gt=!1;switch(mt.code){case r.keys.UP:mt.ctrlKey||mt.metaKey||mt.shiftKey?W(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ie(0,r.keyPanSpeed),Gt=!0;break;case r.keys.BOTTOM:mt.ctrlKey||mt.metaKey||mt.shiftKey?W(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ie(0,-r.keyPanSpeed),Gt=!0;break;case r.keys.LEFT:mt.ctrlKey||mt.metaKey||mt.shiftKey?j(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ie(r.keyPanSpeed,0),Gt=!0;break;case r.keys.RIGHT:mt.ctrlKey||mt.metaKey||mt.shiftKey?j(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ie(-r.keyPanSpeed,0),Gt=!0;break}Gt&&(mt.preventDefault(),r.update())}function Ce(){if(O.length===1)p.set(O[0].pageX,O[0].pageY);else{const mt=.5*(O[0].pageX+O[1].pageX),Gt=.5*(O[0].pageY+O[1].pageY);p.set(mt,Gt)}}function Ve(){if(O.length===1)b.set(O[0].pageX,O[0].pageY);else{const mt=.5*(O[0].pageX+O[1].pageX),Gt=.5*(O[0].pageY+O[1].pageY);b.set(mt,Gt)}}function et(){const mt=O[0].pageX-O[1].pageX,Gt=O[0].pageY-O[1].pageY,gn=Math.sqrt(mt*mt+Gt*Gt);E.set(0,gn)}function Ee(){r.enableZoom&&et(),r.enablePan&&Ve()}function Je(){r.enableZoom&&et(),r.enableRotate&&Ce()}function Ue(mt){if(O.length==1)v.set(mt.pageX,mt.pageY);else{const gn=On(mt),xt=.5*(mt.pageX+gn.x),Zt=.5*(mt.pageY+gn.y);v.set(xt,Zt)}_.subVectors(v,p).multiplyScalar(r.rotateSpeed);const Gt=r.domElement;j(2*Math.PI*_.x/Gt.clientHeight),W(2*Math.PI*_.y/Gt.clientHeight),p.copy(v)}function yt(mt){if(O.length===1)C.set(mt.pageX,mt.pageY);else{const Gt=On(mt),gn=.5*(mt.pageX+Gt.x),xt=.5*(mt.pageY+Gt.y);C.set(gn,xt)}T.subVectors(C,b).multiplyScalar(r.panSpeed),ie(T.x,T.y),b.copy(C)}function Ne(mt){const Gt=On(mt),gn=mt.pageX-Gt.x,xt=mt.pageY-Gt.y,Zt=Math.sqrt(gn*gn+xt*xt);A.set(0,Zt),I.set(0,Math.pow(A.y/E.y,r.zoomSpeed)),ue(I.y),E.copy(A)}function dt(mt){r.enableZoom&&Ne(mt),r.enablePan&&yt(mt)}function Le(mt){r.enableZoom&&Ne(mt),r.enableRotate&&Ue(mt)}function ze(mt){r.enabled!==!1&&(O.length===0&&(r.domElement.setPointerCapture(mt.pointerId),r.domElement.addEventListener("pointermove",ct),r.domElement.addEventListener("pointerup",Lt)),kt(mt),mt.pointerType==="touch"?Ft(mt):Ct(mt))}function ct(mt){r.enabled!==!1&&(mt.pointerType==="touch"?cn(mt):_t(mt))}function Lt(mt){fn(mt),O.length===0&&(r.domElement.releasePointerCapture(mt.pointerId),r.domElement.removeEventListener("pointermove",ct),r.domElement.removeEventListener("pointerup",Lt)),r.dispatchEvent(rV),a=i.NONE}function lt(mt){fn(mt)}function Ct(mt){let Gt;switch(mt.button){case 0:Gt=r.mouseButtons.LEFT;break;case 1:Gt=r.mouseButtons.MIDDLE;break;case 2:Gt=r.mouseButtons.RIGHT;break;default:Gt=-1}switch(Gt){case wg.DOLLY:if(r.enableZoom===!1)return;ce(mt),a=i.DOLLY;break;case wg.ROTATE:if(mt.ctrlKey||mt.metaKey||mt.shiftKey){if(r.enablePan===!1)return;re(mt),a=i.PAN}else{if(r.enableRotate===!1)return;q(mt),a=i.ROTATE}break;case wg.PAN:if(mt.ctrlKey||mt.metaKey||mt.shiftKey){if(r.enableRotate===!1)return;q(mt),a=i.ROTATE}else{if(r.enablePan===!1)return;re(mt),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(PP)}function _t(mt){switch(a){case i.ROTATE:if(r.enableRotate===!1)return;ee(mt);break;case i.DOLLY:if(r.enableZoom===!1)return;oe(mt);break;case i.PAN:if(r.enablePan===!1)return;be(mt);break}}function It(mt){r.enabled===!1||r.enableZoom===!1||a!==i.NONE||(mt.preventDefault(),r.dispatchEvent(PP),we(mt),r.dispatchEvent(rV))}function Bt(mt){r.enabled===!1||r.enablePan===!1||pe(mt)}function Ft(mt){switch(Rn(mt),O.length){case 1:switch(r.touches.ONE){case xg.ROTATE:if(r.enableRotate===!1)return;Ce(),a=i.TOUCH_ROTATE;break;case xg.PAN:if(r.enablePan===!1)return;Ve(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case xg.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ee(),a=i.TOUCH_DOLLY_PAN;break;case xg.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Je(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(PP)}function cn(mt){switch(Rn(mt),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ue(mt),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;yt(mt),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;dt(mt),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Le(mt),r.update();break;default:a=i.NONE}}function Ot(mt){r.enabled!==!1&&mt.preventDefault()}function kt(mt){O.push(mt)}function fn(mt){delete B[mt.pointerId];for(let Gt=0;Gt<O.length;Gt++)if(O[Gt].pointerId==mt.pointerId){O.splice(Gt,1);return}}function Rn(mt){let Gt=B[mt.pointerId];Gt===void 0&&(Gt=new na,B[mt.pointerId]=Gt),Gt.set(mt.pageX,mt.pageY)}function On(mt){const Gt=mt.pointerId===O[0].pointerId?O[1]:O[0];return B[Gt.pointerId]}r.domElement.addEventListener("contextmenu",Ot),r.domElement.addEventListener("pointerdown",ze),r.domElement.addEventListener("pointercancel",lt),r.domElement.addEventListener("wheel",It,{passive:!1}),this.update()}}var k1=function(){var e=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(h){h.preventDefault(),r(++e%t.children.length)},!1);function n(h){return t.appendChild(h.dom),h}function r(h){for(var f=0;f<t.children.length;f++)t.children[f].style.display=f===h?"block":"none";e=h}var i=(performance||Date).now(),a=i,o=0,s=n(new k1.Panel("FPS","#0ff","#002")),l=n(new k1.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new k1.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:t,addPanel:n,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){o++;var h=(performance||Date).now();if(l.update(h-i,200),h>=a+1e3&&(s.update(o*1e3/(h-a),100),a=h,o=0,c)){var f=performance.memory;c.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return h},update:function(){i=this.end()},domElement:t,setMode:r}};k1.Panel=function(e,t,n){var r=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,c=3*o,h=2*o,f=3*o,p=15*o,v=74*o,_=30*o,b=document.createElement("canvas");b.width=s,b.height=l,b.style.cssText="width:80px;height:48px";var C=b.getContext("2d");return C.font="bold "+9*o+"px Helvetica,Arial,sans-serif",C.textBaseline="top",C.fillStyle=n,C.fillRect(0,0,s,l),C.fillStyle=t,C.fillText(e,c,h),C.fillRect(f,p,v,_),C.fillStyle=n,C.globalAlpha=.9,C.fillRect(f,p,v,_),{dom:b,update:function(T,E){r=Math.min(r,T),i=Math.max(i,T),C.fillStyle=n,C.globalAlpha=1,C.fillRect(0,0,s,p),C.fillStyle=t,C.fillText(a(T)+" "+e+" ("+a(r)+"-"+a(i)+")",c,h),C.drawImage(b,f+o,p,v-o,_,f,p,v-o,_),C.fillRect(f+v-o,p,o,_),C.fillStyle=n,C.globalAlpha=.9,C.fillRect(f+v-o,p,o,a((1-T/E)*_))}}};const xo=[];for(let e=0;e<256;++e)xo.push((e+256).toString(16).slice(1));function y5e(e,t=0){return(xo[e[t+0]]+xo[e[t+1]]+xo[e[t+2]]+xo[e[t+3]]+"-"+xo[e[t+4]]+xo[e[t+5]]+"-"+xo[e[t+6]]+xo[e[t+7]]+"-"+xo[e[t+8]]+xo[e[t+9]]+"-"+xo[e[t+10]]+xo[e[t+11]]+xo[e[t+12]]+xo[e[t+13]]+xo[e[t+14]]+xo[e[t+15]]).toLowerCase()}let IP;const _5e=new Uint8Array(16);function b5e(){if(!IP){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");IP=crypto.getRandomValues.bind(crypto)}return IP(_5e)}const w5e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iV={randomUUID:w5e};function dy(e,t,n){var i;if(iV.randomUUID&&!t&&!e)return iV.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??b5e();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,y5e(r)}const x5e=x0("model",{state:()=>({models:[],selectedModel:null,loadingModels:{},loadingErrors:{},globalTransform:{scale:1,autoCenter:!0,autoScale:!0,normalizeSize:!0}}),getters:{getModels:e=>e.models,getSelectedModel:e=>e.selectedModel,hasSelectedModel:e=>e.selectedModel!==null,getModelCount:e=>e.models.length,getVisibleModels:e=>e.models.filter(t=>t.visible),getLoadingStatus:e=>t=>e.loadingModels[t]||!1,isLoading:e=>Object.values(e.loadingModels).some(t=>t),getLoadingError:e=>t=>e.loadingErrors[t]||null,getGlobalTransform:e=>e.globalTransform},actions:{addModel(e){const t=e.id||dy(),n={id:t,name:e.name||`模型 ${this.models.length+1}`,file:e.file||null,url:e.url||null,type:e.type||"gltf",visible:e.visible!==void 0?e.visible:!0,wireframe:e.wireframe||!1,position:e.position||{x:0,y:0,z:0},rotation:e.rotation||{x:0,y:0,z:0},scale:e.scale||{x:1,y:1,z:1},materials:e.materials||[],animations:e.animations||[],metadata:e.metadata||{},thumbnail:e.thumbnail||null,createdAt:e.createdAt||new Date().toISOString()};return this.models.push(n),this.selectedModel||(this.selectedModel=n),this.saveModelsToLocalStorage(),t},async loadModelFromFile(e,t={}){const n=dy(),r=e.name,i=r.split(".").pop().toLowerCase();let a="gltf";["obj"].includes(i)?a="obj":["fbx"].includes(i)?a="fbx":["stl"].includes(i)?a="stl":["glb","gltf"].includes(i)&&(a="gltf");const o=URL.createObjectURL(e);this.setModelLoadingStatus(n,!0);try{const s={id:n,name:t.name||r.replace(`.${i}`,""),file:o,localFile:e,type:a,visible:!0,wireframe:!1,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},materials:[],animations:[],metadata:{fileSize:e.size,fileType:e.type,originalName:r},createdAt:new Date().toISOString()};return this.models.push(s),this.selectedModel=s,this.saveModelsToLocalStorage(),this.setModelLoadingStatus(n,!1),n}catch(s){throw console.error("加载模型文件失败:",s),this.setModelLoadingError(n,s.message||"加载失败"),this.setModelLoadingStatus(n,!1),s}},async loadModelFromURL(e,t={}){const n=t.id||dy(),r=e.split(".").pop().split("?")[0].toLowerCase();let i=t.type||"gltf";t.type||(["obj"].includes(r)?i="obj":["fbx"].includes(r)?i="fbx":["stl"].includes(r)?i="stl":["glb","gltf"].includes(r)&&(i="gltf")),this.setModelLoadingStatus(n,!0);try{let a=t.name;if(!a){const s=e.split("/");let l=s[s.length-1];l=l.split("?")[0],a=l.replace(`.${r}`,"")}const o={id:n,name:a,url:e,type:i,visible:!0,wireframe:!1,position:t.position||{x:0,y:0,z:0},rotation:t.rotation||{x:0,y:0,z:0},scale:t.scale||{x:1,y:1,z:1},materials:[],animations:[],metadata:{source:"url",...t.metadata},createdAt:new Date().toISOString()};return this.models.push(o),this.selectedModel=o,this.saveModelsToLocalStorage(),this.setModelLoadingStatus(n,!1),n}catch(a){throw console.error("从URL加载模型失败:",a),this.setModelLoadingError(n,a.message||"加载失败"),this.setModelLoadingStatus(n,!1),a}},setModelLoadingStatus(e,t){t?this.loadingModels[e]=!0:this.loadingModels={...this.loadingModels,[e]:!1}},setModelLoadingError(e,t){this.loadingErrors={...this.loadingErrors,[e]:t}},clearModelLoadingError(e){const t={...this.loadingErrors};delete t[e],this.loadingErrors=t},updateModel(e,t){const n=this.models.findIndex(i=>i.id===e);if(n===-1)return!1;const r=this.models[n];for(const i in t)i==="position"||i==="rotation"||i==="scale"?r[i]={...r[i],...t[i]}:r[i]=t[i];return this.selectedModel&&this.selectedModel.id===e&&(this.selectedModel={...r}),this.saveModelsToLocalStorage(),!0},removeModel(e){const t=this.models.findIndex(a=>a.id===e);if(t===-1)return!1;const n=this.models[t];n.file&&n.file.startsWith("blob:")&&URL.revokeObjectURL(n.file),this.models.splice(t,1),this.selectedModel&&this.selectedModel.id===e&&(this.models.length>0?this.selectedModel=this.models[0]:this.selectedModel=null);const r={...this.loadingModels},i={...this.loadingErrors};return delete r[e],delete i[e],this.loadingModels=r,this.loadingErrors=i,this.saveModelsToLocalStorage(),!0},selectModel(e){const t=this.models.find(n=>n.id===e);this.selectedModel=t||null},clearSelectedModel(){this.selectedModel=null},toggleModelVisibility(e){const t=this.models.find(n=>n.id===e);return t?(t.visible=!t.visible,this.selectedModel&&this.selectedModel.id===e&&(this.selectedModel={...t}),this.saveModelsToLocalStorage(),!0):!1},setModelMaterial(e,t,n={}){const r=this.models.find(i=>i.id===e);if(!r)return!1;if(n.applyToAll)r.materials=[{id:t,applyToAll:!0}];else if(n.meshName){const i=r.materials.findIndex(a=>a.meshName===n.meshName);i!==-1?r.materials[i].id=t:r.materials.push({id:t,meshName:n.meshName})}return this.selectedModel&&this.selectedModel.id===e&&(this.selectedModel={...r}),this.saveModelsToLocalStorage(),!0},updateModelAnimations(e,t){const n=this.models.find(r=>r.id===e);return n?(n.animations=t,this.selectedModel&&this.selectedModel.id===e&&(this.selectedModel={...n}),this.saveModelsToLocalStorage(),!0):!1},updateModelThumbnail(e,t){const n=this.models.find(r=>r.id===e);return n?(n.thumbnail&&n.thumbnail.startsWith("blob:")&&URL.revokeObjectURL(n.thumbnail),n.thumbnail=t,this.selectedModel&&this.selectedModel.id===e&&(this.selectedModel={...n}),this.saveModelsToLocalStorage(),!0):!1},updateGlobalTransform(e){this.globalTransform={...this.globalTransform,...e}},saveModelsToLocalStorage(){try{const e=this.models.map(t=>{const{localFile:n,...r}=t;return r});localStorage.setItem("models",JSON.stringify(e))}catch(e){console.error("保存模型数据失败:",e)}},loadModelsFromLocalStorage(){try{const e=localStorage.getItem("models");e&&(this.models=JSON.parse(e),this.models.length>0&&(this.selectedModel=this.models[0]))}catch(e){console.error("加载模型数据失败:",e)}},clearAllModels(){this.models.forEach(e=>{e.file&&e.file.startsWith("blob:")&&URL.revokeObjectURL(e.file),e.thumbnail&&e.thumbnail.startsWith("blob:")&&URL.revokeObjectURL(e.thumbnail)}),this.models=[],this.selectedModel=null,this.loadingModels={},this.loadingErrors={},localStorage.removeItem("models")},exportModelsAsJSON(){const e={models:this.models.map(({localFile:t,...n})=>n),version:"1.0",exportDate:new Date().toISOString()};return JSON.stringify(e,null,2)},importModelsFromJSON(e){try{const t=typeof e=="string"?JSON.parse(e):e;if(!t.models||!Array.isArray(t.models))throw new Error("无效的模型数据格式");return this.clearAllModels(),t.models.forEach(n=>{this.models.push({...n,id:n.id||dy()})}),this.models.length>0&&(this.selectedModel=this.models[0]),this.saveModelsToLocalStorage(),!0}catch(t){return console.error("导入模型数据失败:",t),!1}},initStore(){this.loadModelsFromLocalStorage()}}}),S5e=x0("materials",{state:()=>({materials:[],originalMaterials:[],selectedMaterial:null,materialPresets:[{id:"preset_metal",name:"金属材质",properties:{metalness:.9,roughness:.1,color:"#ffffff"}},{id:"preset_plastic",name:"塑料材质",properties:{metalness:0,roughness:.9,color:"#dddddd"}},{id:"preset_glass",name:"玻璃材质",properties:{metalness:0,roughness:0,color:"#ffffff",transparent:!0,opacity:.5}},{id:"preset_neon",name:"霓虹材质",properties:{metalness:.5,roughness:.2,color:"#00ff00",emissive:"#00ff00",emissiveIntensity:.5}},{id:"preset_matte",name:"哑光材质",properties:{metalness:0,roughness:1,color:"#cccccc"}}],customMaterials:[]}),getters:{getAllMaterials:e=>e.materials,getSelectedMaterial:e=>e.selectedMaterial,getMaterialPresets:e=>e.materialPresets,getCustomMaterials:e=>e.customMaterials},actions:{initStore(){console.log("初始化材质存储"),this.loadCustomMaterialsFromStorage(),this.materials.length===0&&(this.materials=[...this.materialPresets],this.originalMaterials=[...this.materials])},setMaterials(e){this.materials=e,this.originalMaterials=[...e]},updateMaterial(e,t){const n=this.materials.findIndex(r=>r.id===e);n!==-1&&(this.materials[n]={...this.materials[n],...t})},selectMaterial(e){this.selectedMaterial=e},clearAllMaterials(){this.materials=[],this.selectedMaterial=null},serializeMaterials(){return JSON.stringify({materials:this.materials,customMaterials:this.customMaterials,selectedMaterial:this.selectedMaterial?this.selectedMaterial.id:null})},loadMaterialsFromSerialized(e){try{const t=JSON.parse(e);return this.materials=t.materials||[],this.customMaterials=t.customMaterials||[],t.selectedMaterial&&(this.selectedMaterial=this.materials.find(n=>n.id===t.selectedMaterial)||null),!0}catch(t){return console.error("加载材质数据失败:",t),!1}},resetMaterials(){this.materials=[...this.originalMaterials],this.selectedMaterial=null},applyMaterialPreset(e){const t=this.materialPresets.find(n=>n.name===e);return t&&this.selectedMaterial?(this.updateMaterial(this.selectedMaterial.id,t.properties),!0):!1},createCustomMaterial(e,t){const n={id:`custom_${Date.now()}`,name:e,properties:t};return this.customMaterials.push(n),this.saveCustomMaterialsToStorage(),n},deleteCustomMaterial(e){const t=this.customMaterials.findIndex(n=>n.id===e);return t!==-1?(this.customMaterials.splice(t,1),this.saveCustomMaterialsToStorage(),!0):!1},saveCustomMaterialsToStorage(){try{localStorage.setItem("customMaterials",JSON.stringify(this.customMaterials))}catch(e){console.error("保存自定义材质失败:",e)}},loadCustomMaterialsFromStorage(){try{const e=localStorage.getItem("customMaterials");e&&(this.customMaterials=JSON.parse(e))}catch(e){console.error("加载自定义材质失败:",e)}}}}),C5e=x0("scene",{state:()=>({environment:{backgroundColor:"#F5F5F5",environmentMap:null,environmentMapIntensity:1,fog:{enabled:!1,color:"#CCCCCC",near:1,far:1e3},grid:{enabled:!0,size:20,divisions:20,colorCenterLine:"#444444",colorGrid:"#888888"}},lights:[{id:"ambient",type:"ambient",name:"环境光",color:"#FFFFFF",intensity:.5,visible:!0},{id:"directional",type:"directional",name:"主光源",color:"#FFFFFF",intensity:1,position:{x:5,y:10,z:7.5},castShadow:!0,shadowBias:-.001,shadowMapSize:2048,visible:!0}],selectedLight:null,camera:{position:{x:5,y:5,z:5},lookAt:{x:0,y:0,z:0},fov:50,near:.1,far:2e3,zoom:1},renderer:{antialias:!0,shadowsEnabled:!0,shadowType:"PCFSoftShadowMap",toneMapping:"ACESFilmic",toneMappingExposure:1,outputEncoding:"sRGB",physicallyCorrectLights:!0},postProcessing:{enabled:!1,bloom:{enabled:!1,strength:.5,radius:.4,threshold:.85},ssao:{enabled:!1,radius:4,intensity:1.5,bias:.025}},scenePresets:[{id:"preset_default",name:"默认场景",environment:{backgroundColor:"#F5F5F5",environmentMapIntensity:1,fog:{enabled:!1}},lights:[{type:"ambient",color:"#FFFFFF",intensity:.5},{type:"directional",color:"#FFFFFF",intensity:1,position:{x:5,y:10,z:7.5},castShadow:!0}]},{id:"preset_studio",name:"工作室预设",environment:{backgroundColor:"#000000",environmentMapIntensity:.5,fog:{enabled:!1}},lights:[{type:"ambient",color:"#FFFFFF",intensity:.2},{type:"directional",color:"#FFFFFF",intensity:1.5,position:{x:0,y:10,z:10},castShadow:!0},{type:"point",color:"#FFEED9",intensity:1,position:{x:-10,y:5,z:0},castShadow:!1},{type:"point",color:"#D9F9FF",intensity:1,position:{x:10,y:5,z:0},castShadow:!1}]},{id:"preset_outdoor",name:"室外预设",environment:{backgroundColor:"#87CEEB",environmentMapIntensity:1.5,fog:{enabled:!0,color:"#E0E0E0",near:10,far:1e3}},lights:[{type:"ambient",color:"#AACCFF",intensity:.8},{type:"directional",color:"#FFFAFA",intensity:1.2,position:{x:50,y:100,z:50},castShadow:!0},{type:"hemisphere",skyColor:"#87CEEB",groundColor:"#57432A",intensity:.5}]}],customScenePresets:[]}),getters:{getEnvironment:e=>e.environment,getLights:e=>e.lights,getCamera:e=>e.camera,getRenderer:e=>e.renderer,getPostProcessing:e=>e.postProcessing,getAmbientLight:e=>e.lights.find(t=>t.type==="ambient"),getMainLight:e=>e.lights.find(t=>t.id==="directional"),getSelectedLight:e=>e.selectedLight,getScenePresets:e=>[...e.scenePresets,...e.customScenePresets],getActivePreset:e=>{const t=[...e.scenePresets,...e.customScenePresets].find(n=>n.environment.backgroundColor===e.environment.backgroundColor&&n.environment.fog.enabled===e.environment.fog.enabled);return t?t.id:null}},actions:{updateEnvironment(e){this.environment={...this.environment,...e}},setBackgroundColor(e){this.environment.backgroundColor=e},setEnvironmentMap(e,t=1){this.environment.environmentMap=e,this.environment.environmentMapIntensity=t},toggleFog(e){this.environment.fog.enabled=e},updateFog(e){this.environment.fog={...this.environment.fog,...e}},toggleGrid(e){this.environment.grid.enabled=e},updateGrid(e){this.environment.grid={...this.environment.grid,...e}},addLight(e){const t="light_"+Date.now(),n={id:t,type:"point",name:"新建光源",color:"#FFFFFF",intensity:1,position:{x:0,y:5,z:0},castShadow:!1,visible:!0,...e};return this.lights.push(n),t},removeLight(e){if(e==="ambient"||e==="directional")return!1;const t=this.lights.findIndex(n=>n.id===e);return t!==-1?(this.lights.splice(t,1),this.selectedLight&&this.selectedLight.id===e&&(this.selectedLight=null),!0):!1},updateLight(e,t){const n=this.lights.find(r=>r.id===e);if(n){for(const r in t)r==="position"||r==="rotation"?n[r]={...n[r],...t[r]}:n[r]=t[r];return this.selectedLight&&this.selectedLight.id===e&&(this.selectedLight=n),!0}return!1},selectLight(e){const t=this.lights.find(n=>n.id===e);this.selectedLight=t||null},clearSelectedLight(){this.selectedLight=null},updateCamera(e){this.camera={...this.camera,...e}},updateRenderer(e){this.renderer={...this.renderer,...e}},togglePostProcessing(e){this.postProcessing.enabled=e},updatePostProcessing(e){this.postProcessing={...this.postProcessing,...e}},toggleBloom(e){this.postProcessing.bloom.enabled=e,e&&!this.postProcessing.enabled&&(this.postProcessing.enabled=!0)},updateBloom(e){this.postProcessing.bloom={...this.postProcessing.bloom,...e}},toggleSSAO(e){this.postProcessing.ssao.enabled=e,e&&!this.postProcessing.enabled&&(this.postProcessing.enabled=!0)},updateSSAO(e){this.postProcessing.ssao={...this.postProcessing.ssao,...e}},applyScenePreset(e){const t=[...this.scenePresets,...this.customScenePresets].find(n=>n.id===e);if(!t)return!1;if(t.environment&&(this.environment={...this.environment,...t.environment}),t.lights){const n=this.lights.filter(i=>i.id==="ambient"||i.id==="directional");n.forEach(i=>{const a=t.lights.find(o=>o.type===i.type);if(a)for(const o in a)o!=="id"&&o!=="type"&&(i[o]=a[o])});const r=t.lights.filter(i=>i.type!=="ambient"&&i.type!=="directional");this.lights=n,r.forEach(i=>{this.addLight(i)})}return!0},saveCurrentAsPreset(e){const t="custom_"+Date.now(),n={backgroundColor:this.environment.backgroundColor,environmentMap:this.environment.environmentMap,environmentMapIntensity:this.environment.environmentMapIntensity,fog:{...this.environment.fog}},r=this.lights.map(a=>{const o={...a};return a.position&&(o.position={...a.position}),a.rotation&&(o.rotation={...a.rotation}),o}),i={id:t,name:e||"自定义场景",environment:n,lights:r};return this.customScenePresets.push(i),this.saveCustomPresetsToLocalStorage(),t},deleteCustomPreset(e){const t=this.customScenePresets.findIndex(n=>n.id===e);return t!==-1?(this.customScenePresets.splice(t,1),this.saveCustomPresetsToLocalStorage(),!0):!1},loadCustomPresetsFromLocalStorage(){try{const e=localStorage.getItem("scenePresets");e&&(this.customScenePresets=JSON.parse(e))}catch(e){console.error("加载场景预设失败:",e)}},saveCustomPresetsToLocalStorage(){try{localStorage.setItem("scenePresets",JSON.stringify(this.customScenePresets))}catch(e){console.error("保存场景预设失败:",e)}},resetToDefaultScene(){return this.applyScenePreset("preset_default")},initStore(){this.loadCustomPresetsFromLocalStorage()}}}),T5e=x0("screenshot",{state:()=>({screenshots:[],selectedScreenshot:null,settings:{resolution:{width:1920,height:1080},format:"png",quality:.9,captureUI:!1,transparentBackground:!1,fileNameTemplate:"screenshot_{date}_{time}"}}),getters:{getScreenshots:e=>e.screenshots,getSelectedScreenshot:e=>e.selectedScreenshot,getSettings:e=>e.settings,getRecentScreenshots:e=>[...e.screenshots].sort((t,n)=>new Date(n.createdAt)-new Date(t.createdAt)).slice(0,10),getScreenshotById:e=>t=>e.screenshots.find(n=>n.id===t)||null},actions:{addScreenshot(e){const t=e.id||dy(),n=new Date,r={id:t,name:e.name||this.generateFileName(n),imageData:e.imageData,thumbnailData:e.thumbnailData||e.imageData,resolution:e.resolution||this.settings.resolution,format:e.format||this.settings.format,size:e.size||0,createdAt:n.toISOString(),modelInfo:e.modelInfo||{},tags:e.tags||[],note:e.note||""};return this.screenshots.push(r),this.selectedScreenshot=r,this.saveScreenshotsToLocalStorage(),t},generateFileName(e){const t=this.settings.fileNameTemplate,n=e||new Date,r=n.toISOString().split("T")[0],i=n.toTimeString().split(" ")[0].replace(/:/g,"-");return t.replace("{date}",r).replace("{time}",i).replace("{random}",Math.floor(Math.random()*1e3))},updateScreenshot(e,t){const n=this.screenshots.find(r=>r.id===e);if(!n)return!1;for(const r in t)r!=="id"&&r!=="createdAt"&&(n[r]=t[r]);return this.selectedScreenshot&&this.selectedScreenshot.id===e&&(this.selectedScreenshot={...n}),this.saveScreenshotsToLocalStorage(),!0},removeScreenshot(e){const t=this.screenshots.findIndex(r=>r.id===e);if(t===-1)return!1;const n=this.screenshots[t];return n.imageData&&n.imageData.startsWith("blob:")&&URL.revokeObjectURL(n.imageData),n.thumbnailData&&n.thumbnailData.startsWith("blob:")&&n.thumbnailData!==n.imageData&&URL.revokeObjectURL(n.thumbnailData),this.screenshots.splice(t,1),this.selectedScreenshot&&this.selectedScreenshot.id===e&&(this.screenshots.length>0?this.selectedScreenshot=this.screenshots[0]:this.selectedScreenshot=null),this.saveScreenshotsToLocalStorage(),!0},removeMultipleScreenshots(e){const t=[];for(const n of e)t.push({id:n,success:this.removeScreenshot(n)});return t},selectScreenshot(e){const t=this.screenshots.find(n=>n.id===e);this.selectedScreenshot=t||null},clearSelectedScreenshot(){this.selectedScreenshot=null},updateSettings(e){this.settings={...this.settings,...e},this.saveSettingsToLocalStorage()},downloadScreenshot(e){const t=this.screenshots.find(r=>r.id===e);if(!t||!t.imageData)return!1;const n=document.createElement("a");return t.imageData.startsWith("data:")||t.imageData.startsWith("blob:"),n.href=t.imageData,n.download=t.name+"."+t.format,document.body.appendChild(n),n.click(),document.body.removeChild(n),!0},addTagToScreenshot(e,t){const n=this.screenshots.find(r=>r.id===e);return n?(n.tags.includes(t)||(n.tags.push(t),this.selectedScreenshot&&this.selectedScreenshot.id===e&&(this.selectedScreenshot={...n}),this.saveScreenshotsToLocalStorage()),!0):!1},removeTagFromScreenshot(e,t){const n=this.screenshots.find(i=>i.id===e);if(!n)return!1;const r=n.tags.indexOf(t);return r!==-1&&(n.tags.splice(r,1),this.selectedScreenshot&&this.selectedScreenshot.id===e&&(this.selectedScreenshot={...n}),this.saveScreenshotsToLocalStorage()),!0},getAllTags(){const e=new Set;return this.screenshots.forEach(t=>{t.tags.forEach(n=>e.add(n))}),Array.from(e)},findScreenshotsByTag(e){return this.screenshots.filter(t=>t.tags.includes(e))},saveScreenshotsToLocalStorage(){try{const e=this.screenshots.map(t=>{let n=t.imageData,r=t.thumbnailData;return n&&n.length>1e6&&(n=`[Large image data: ${t.id}]`),r&&r.length>1e5&&(r=`[Large thumbnail data: ${t.id}]`),{...t,imageData:n,thumbnailData:r}});localStorage.setItem("screenshots",JSON.stringify(e))}catch(e){console.error("保存截图数据失败:",e);try{const t=this.screenshots.map(({imageData:n,thumbnailData:r,...i})=>i);localStorage.setItem("screenshots_metadata",JSON.stringify(t))}catch(t){console.error("保存截图元数据也失败:",t)}}},loadScreenshotsFromLocalStorage(){try{const e=localStorage.getItem("screenshots");e&&(this.screenshots=JSON.parse(e),this.screenshots.length>0&&(this.selectedScreenshot=this.screenshots[0]))}catch(e){console.error("加载截图数据失败:",e)}},saveSettingsToLocalStorage(){try{localStorage.setItem("screenshot_settings",JSON.stringify(this.settings))}catch(e){console.error("保存截图设置失败:",e)}},loadSettingsFromLocalStorage(){try{const e=localStorage.getItem("screenshot_settings");e&&(this.settings={...this.settings,...JSON.parse(e)})}catch(e){console.error("加载截图设置失败:",e)}},clearAllScreenshots(){this.screenshots.forEach(e=>{e.imageData&&e.imageData.startsWith("blob:")&&URL.revokeObjectURL(e.imageData),e.thumbnailData&&e.thumbnailData.startsWith("blob:")&&e.thumbnailData!==e.imageData&&URL.revokeObjectURL(e.thumbnailData)}),this.screenshots=[],this.selectedScreenshot=null,localStorage.removeItem("screenshots"),localStorage.removeItem("screenshots_metadata")},exportScreenshotsAsJSON(){const e={screenshots:this.screenshots.map(({imageData:t,thumbnailData:n,...r})=>r),version:"1.0",exportDate:new Date().toISOString()};return JSON.stringify(e,null,2)},initStore(){this.loadSettingsFromLocalStorage(),this.loadScreenshotsFromLocalStorage()}}});function M5e(){const e=S5e(),t=x5e(),n=C5e(),r=T5e(),i=oz();return i.initStore(),e.initStore(),n.initStore(),t.initStore(),r.initStore(),{materialStore:e,modelStore:t,sceneStore:n,screenshotStore:r,uiStore:i}}class k5e{constructor(t={}){this.config={sampleSize:t.sampleSize||60,targetFPS:t.targetFPS||30,criticalFPS:t.criticalFPS||20,interval:t.interval||1e3,memoryWarningLevel:t.memoryWarningLevel||500,memoryErrorLevel:t.memoryErrorLevel||800,autoAdjust:t.autoAdjust!==!1},this.fpsHistory=[],this.memoryHistory=[],this.lastTime=0,this.frameCount=0,this.running=!1,this.qualityLevel=1,this.adjustmentStrength=.1,this.onFPSUpdate=t.onFPSUpdate||null,this.onMemoryUpdate=t.onMemoryUpdate||null,this.onQualityChange=t.onQualityChange||null,this.onThresholdExceeded=t.onThresholdExceeded||null,this.update=this.update.bind(this),this.analyzePerformance=this.analyzePerformance.bind(this)}start(){this.running||(this.running=!0,this.lastTime=performance.now(),this.frameCount=0,this.analysisInterval=setInterval(this.analyzePerformance,this.config.interval),requestAnimationFrame(this.update),console.log("性能监控已启动"))}stop(){this.running=!1,clearInterval(this.analysisInterval),console.log("性能监控已停止")}update(){this.running&&(this.frameCount++,requestAnimationFrame(this.update))}analyzePerformance(){if(!this.running)return;const t=performance.now(),n=t-this.lastTime,r=Math.round(this.frameCount*1e3/n);if(this.fpsHistory.push(r),this.fpsHistory.length>this.config.sampleSize&&this.fpsHistory.shift(),window.performance&&performance.memory){const a=Math.round(performance.memory.usedJSHeapSize/1048576);this.memoryHistory.push(a),this.memoryHistory.length>this.config.sampleSize&&this.memoryHistory.shift(),this.onMemoryUpdate&&this.onMemoryUpdate(a),this.checkMemoryThresholds(a)}this.lastTime=t,this.frameCount=0;const i=Math.round(this.fpsHistory.reduce((a,o)=>a+o,0)/this.fpsHistory.length);this.onFPSUpdate&&this.onFPSUpdate(i),this.config.autoAdjust&&this.adjustQuality(i),i<this.config.criticalFPS&&this.onThresholdExceeded&&this.onThresholdExceeded(i)}checkMemoryThresholds(t){t>this.config.memoryErrorLevel?(console.error(`内存使用超过错误阈值: ${t}MB > ${this.config.memoryErrorLevel}MB`),this.qualityLevel=Math.max(.2,this.qualityLevel-.3),this.triggerQualityChange(),this.onThresholdExceeded&&this.onThresholdExceeded(0,t)):t>this.config.memoryWarningLevel&&(console.warn(`内存使用超过警告阈值: ${t}MB > ${this.config.memoryWarningLevel}MB`),this.qualityLevel=Math.max(.3,this.qualityLevel-.1),this.triggerQualityChange())}adjustQuality(t){const n=t-this.config.targetFPS;n<-10?(this.qualityLevel=Math.max(.2,this.qualityLevel-this.adjustmentStrength),this.triggerQualityChange()):n<-5?(this.qualityLevel=Math.max(.3,this.qualityLevel-this.adjustmentStrength/2),this.triggerQualityChange()):n>15&&this.qualityLevel<1&&(this.qualityLevel=Math.min(1,this.qualityLevel+this.adjustmentStrength/3),this.triggerQualityChange())}triggerQualityChange(){this.onQualityChange&&this.onQualityChange(this.qualityLevel)}setQualityLevel(t){return this.qualityLevel=Math.max(.1,Math.min(1,t)),this.triggerQualityChange(),this.qualityLevel}getStatus(){const t=this.fpsHistory.length?Math.round(this.fpsHistory.reduce((r,i)=>r+i,0)/this.fpsHistory.length):0,n=this.memoryHistory.length?Math.round(this.memoryHistory.reduce((r,i)=>r+i,0)/this.memoryHistory.length):0;return{fps:t,memory:n,qualityLevel:this.qualityLevel,isLowPerformance:t<this.config.targetFPS,isCritical:t<this.config.criticalFPS,memoryWarning:n>this.config.memoryWarningLevel}}}const E5e={class:"model-container"},A5e={key:0,class:"loading-indicator"},P5e={key:0,class:"loading-hint"},I5e={key:1,class:"error-message"},L5e={class:"model-selector"},D5e={class:"model-buttons"},R5e=["onClick","title"],O5e={class:"controls-panel"},z5e={class:"control-group"},B5e={class:"control-group"},F5e={class:"slider-container"},N5e={class:"slider-container"},$5e={class:"control-group"},V5e={key:0,class:"slider-container"},H5e={class:"control-group"},j5e={key:2,class:"parts-panel"},U5e={class:"search-box"},W5e={class:"parts-list"},G5e=["onMouseenter","onMouseleave","onClick"],K5e={class:"part-name"},q5e={key:0,class:"no-parts"},Z5e={key:3,class:"part-details-panel"},Y5e={class:"details-content"},X5e={class:"detail-item"},J5e={class:"detail-item"},Q5e={class:"detail-item"},eze={class:"detail-item"},tze={class:"detail-item"},nze={class:"detail-item"},rze={class:"detail-item"},ize={key:4,class:"hover-info"},aze={key:5,class:"model-info-panel"},oze={class:"info-item"},sze={class:"info-item"},lze={class:"info-item"},uze={class:"info-item"},cze={class:"performance-info"},dze={class:"info-item"},hze={key:0,class:"info-item"},fze={key:6,class:"screenshot-toast"},pze={__name:"Demo3",setup(e){const{modelStore:t,materialStore:n,sceneStore:r,screenshotStore:i,uiStore:a}=M5e(),o=le(null),s=le(null),l=le(null),c=le(null),h=le(null);le(null);const f=le(null);let p=null;const v=new lr(0,0,5),_=le(!1),b=le(null),C=le(0);le(!1);const T=le(null),E=le(null),A=le(!1);le([]),le(null),le(!1),le(null);const I=Ar({vertices:0,faces:0,materials:0,dimensions:"0 x 0 x 0"}),O=le("阀门.fbx"),B=Ar({船舶模型:[{name:"船模型 (GLTF)",path:"6.gltf"},{name:"船模型1 (FBX)",path:"ship1.fbx"},{name:"备用模型 (GLTF)",path:"untitled.gltf"}],其他模型:[{name:"1号模型 (FBX)",path:"1.fbx"},{name:"2号模型 (FBX)",path:"2.fbx"},{name:"PrimaryIonDrive",path:"PrimaryIonDrive.glb"},{name:"UI模型",path:"ui.fbx"},{name:"机器模型",path:"machine.fbx"},{name:"阀门模型",path:"阀门.fbx"},{name:"阀门模型(GLTF格式)",path:"阀门.gltf"}]}),N={scene:null,camera:null,renderer:null,controls:null,model:null,originalMaterials:new Map,mouse:{x:0,y:0},raycaster:null,modelManager:null,intersectMeshes:null,lastModelUpdate:null},H=le(!0),j=le(!0),W=le(!1),U=le(.8),Y=le(.2),ie=le([]),ue=le(null),J=le(null),q=le(!1),ce=le("");let re=null,ee=null;const oe=le(!0),be=le(.7),we=Ar({fps:0,lastFrameTime:0,frameCount:0,lastFpsUpdateTime:0,memoryUsage:0}),pe=X(()=>{if(!ce.value)return ie.value;const $e=ce.value.toLowerCase();return ie.value.filter(je=>je.name.toLowerCase().includes($e)||je.type.toLowerCase().includes($e))}),Ce=()=>{try{console.log("=== 开始初始化Three.js ===");const $e=_r(new Kw);$e.background=new ra(3158064);const je=_r(new _0(16777215,.6));$e.add(je);const zt=_r(new Uc(16777215,1.2));zt.position.set(5,10,7.5),zt.castShadow=!0,zt.shadow.mapSize.width=512,zt.shadow.mapSize.height=512,zt.shadow.camera.near=.5,zt.shadow.camera.far=500,zt.shadow.camera.left=-10,zt.shadow.camera.right=10,zt.shadow.camera.top=10,zt.shadow.camera.bottom=-10,$e.add(zt);const rt=_r(new Uc(16777215,.6));rt.position.set(-5,5,-7.5),$e.add(rt);const Ht=_r(new R7(16777215,5592405,.6));Ht.position.set(0,20,0),$e.add(Ht),N.scene=$e,o.value=$e;const Pt=document.getElementById("model-viewer");if(!Pt)throw console.error("找不到model-viewer容器元素，尝试创建容器"),new Error("找不到model-viewer容器元素");console.log("找到model-viewer容器",Pt);const dn=_r(new y0(45,Pt.clientWidth/Pt.clientHeight,.1,1e3));dn.position.set(2,2,5),dn.lookAt(0,0,0),N.camera=dn,s.value=dn;const Hn=_r(new qw({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0,powerPreference:"high-performance"}));Hn.setSize(Pt.clientWidth,Pt.clientHeight),Hn.setPixelRatio(Math.min(window.devicePixelRatio,1.5)),Hn.shadowMap.enabled=!0,Hn.shadowMap.type=UO,Hn.outputColorSpace=WO,Hn.toneMapping=GO,Hn.toneMappingExposure=1.2,Hn.sortObjects=!1,N.renderer=Hn,l.value=Hn;try{Pt.appendChild(Hn.domElement),console.log("成功将renderer添加到容器")}catch(uu){throw console.error("添加renderer到容器时出错:",uu),uu}const dr=_r(new mx(dn,Hn.domElement));dr.enableDamping=!0,dr.dampingFactor=.05,dr.enablePan=!0,dr.minDistance=1,dr.maxDistance=20,dr.maxPolarAngle=Math.PI/1.5,dr.update(),N.controls=dr,c.value=dr;const Cr=_r(new KO(20,20,5592405,3355443));Cr.name="gridHelper",$e.add(Cr);const ci=_r(new O7(5));ci.name="axesHelper",$e.add(ci),N.raycaster=_r(new qO),Pt.addEventListener("mousemove",On),Pt.addEventListener("click",mt);const Li=_r(new Dc({color:16749824,emissive:16729088,emissiveIntensity:.4,metalness:.8,roughness:.2,transparent:!0,opacity:.9})),Lo=_r(new Dc({color:4500223,emissive:35071,emissiveIntensity:.6,metalness:.8,roughness:.2,transparent:!0,opacity:1}));re=Li,ee=Lo;const yl=()=>{p=requestAnimationFrame(yl);const uu=N.camera,cu=N.scene,lh=N.renderer,Sm=N.controls;Sm&&Sm.update();const Jf=performance.now();if(we.frameCount++,Jf-we.lastFpsUpdateTime>1e3&&(we.fps=Math.round(we.frameCount*1e3/(Jf-we.lastFpsUpdateTime)),we.frameCount=0,we.lastFpsUpdateTime=Jf,window.performance&&performance.memory&&(we.memoryUsage=Math.round(performance.memory.usedJSHeapSize/(1024*1024)))),we.frameCount%4===0&&Gt(),cu&&uu&&lh)try{lh.render(cu,uu)}catch(Z0){console.error("渲染错误：",Z0)}};return yl(),console.log("场景初始化完成",{scene:$e,camera:dn,renderer:Hn,controls:dr}),!0}catch($e){return console.error("初始化Three.js错误:",$e),b.value=`初始化错误: ${$e.message}`,!1}};let Ve=null;try{Ve=new Worker(new URL("/my-website/assets/modelSimplifyWorker-Bv6YqN0d.js",import.meta.url),{type:"module"})}catch($e){console.error("无法初始化模型简化工作线程:",$e)}const et=new Ny().setPath("/"),Ee=new sT;Ee.setDecoderPath("./draco/"),et.setDRACOLoader(Ee);const Je=async($e="PrimaryIonDrive.glb")=>{if(!o.value){console.error("场景未初始化");return}try{console.log(`开始加载模型: ${$e}`),await Ur($e)}catch(je){if(console.error("模型加载失败:",je),b.value=`加载模型失败: ${je.message}`,$e!=="PrimaryIonDrive.glb"){console.log("尝试加载备用模型文件...");try{await Ur("PrimaryIonDrive.glb")}catch(zt){console.error("备用模型加载失败:",zt),b.value=`备用模型加载失败: ${zt.message}`}}}},Ue=$e=>{$e&&(console.log("开始提取部件信息..."),ie.value=[],$e.traverse(je=>{if(je instanceof Ru)try{const zt=je.name||`部件-${je.uuid.substring(0,8)}`,rt=je.userData.type||"模型部件",Ht=je.userData.volume||Yt(je.geometry);if(N.originalMaterials||(N.originalMaterials=new Map),je.material)if(Array.isArray(je.material)){const Pt=je.material.map(dn=>dn.clone());N.originalMaterials.set(je.uuid,Pt)}else N.originalMaterials.set(je.uuid,je.material.clone());ie.value.push({id:je.uuid,name:zt,type:rt,materialType:Xn(je.material),dimensions:mr(je),position:je.position.clone(),volume:Ht,description:je.userData.description||`${zt}是模型的一部分`,object:_r(je)}),je.userData.partId=je.uuid}catch(zt){console.error(`处理部件 ${je.name||je.uuid} 时出错:`,zt)}}),console.log(`部件提取完成，共找到 ${ie.value.length} 个部件`))},yt=()=>{h.value&&(T.value=new Fs().setFromObject(h.value),A.value&&T.value&&(E.value&&o.value.remove(E.value),E.value=new jae(T.value,16711680),o.value.add(E.value)))};let Ne=null;const dt=()=>{Ne=new k5e({targetFPS:30,criticalFPS:15,memoryWarningLevel:450,onFPSUpdate:$e=>{we.fps=$e},onMemoryUpdate:$e=>{we.memoryUsage=$e},onQualityChange:$e=>{console.log(`质量级别自动调整为: ${$e.toFixed(2)}`),Le($e)},onThresholdExceeded:($e,je)=>{console.warn(`性能警告 - FPS: ${$e}, 内存: ${je}MB`),$e<10&&ze()}}),Ne.start()},Le=$e=>{if(N.renderer)try{if(N.renderer.setPixelRatio(Math.min(window.devicePixelRatio,1+$e*.5)),$e<.4?N.renderer.shadowMap.enabled=!1:(N.renderer.shadowMap.enabled=!0,N.renderer.shadowMap.type=$e<.7?$ae:Vae),N.model&&N.model.traverse(je=>{je.isMesh&&je.material&&(Array.isArray(je.material)?je.material.forEach(zt=>{zt.isMeshStandardMaterial&&(zt.flatShading=$e<.5,zt.wireframe=showWireframe.value,zt.needsUpdate=!0)}):je.material.isMeshStandardMaterial&&(je.material.flatShading=$e<.5,je.material.wireframe=showWireframe.value,je.material.needsUpdate=!0))}),$e<.3&&N.modelManager){const je=N.modelManager;je.currentLODLevel==="HIGH"&&je.switchLOD("LOW").catch(zt=>console.warn(`无法切换到低LOD: ${zt.message}`))}}catch(je){console.error("调整渲染质量出错:",je)}},ze=()=>{try{console.warn("执行紧急质量降级!"),N.renderer&&(N.renderer.shadowMap.enabled=!1),N.renderer&&N.renderer.setPixelRatio(1),N.modelManager&&N.modelManager.switchLOD("LOW").catch($e=>console.warn(`紧急切换LOD失败: ${$e.message}`)),j.value=!1,kt(),H.value=!1,Ot(),Ne&&Ne.setQualityLevel(.1)}catch($e){console.error("紧急质量降级失败:",$e)}},ct=()=>{const $e=N.scene;if(!$e)return;const je=$e.getObjectByName("loadedModel");je&&(je.traverse(rt=>{if(rt.isMesh){if(N.originalMaterials.has(rt.uuid)&&N.originalMaterials.delete(rt.uuid),rt.userData.partId!==void 0){const Ht=ie.value.findIndex(Pt=>Pt.id===rt.userData.partId);Ht!==-1&&(ie.value[Ht].object=null)}rt.position_0=null,rt.decomposeDirection=null,rt.geometry&&(rt.geometry.dispose(),rt.geometry=null),rt.material&&(Array.isArray(rt.material)?(rt.material.forEach(Ht=>{Lt(Ht)}),rt.material.length=0):(Lt(rt.material),rt.material=null))}}),$e.remove(je));const zt=$e.getObjectByName("modelBoxHelper");zt&&$e.remove(zt),N.renderer&&N.camera&&N.renderer.render($e,N.camera),ie.value=[],N.originalMaterials.clear(),J.value=null,ue.value=null,N.intersectMeshes&&(N.intersectMeshes=null),je&&(console.log("已清理模型资源，等待垃圾回收"),window.gc&&window.gc())},Lt=$e=>{if(!$e)return;const je=zt=>{zt&&(zt.dispose(),zt.image&&zt.image.removeEventListener&&(zt.image.removeEventListener("load",null),zt.image.removeEventListener("error",null)))};$e.map&&je($e.map),$e.lightMap&&je($e.lightMap),$e.bumpMap&&je($e.bumpMap),$e.normalMap&&je($e.normalMap),$e.displacementMap&&je($e.displacementMap),$e.specularMap&&je($e.specularMap),$e.emissiveMap&&je($e.emissiveMap),$e.alphaMap&&je($e.alphaMap),$e.aoMap&&je($e.aoMap),$e.metalnessMap&&je($e.metalnessMap),$e.roughnessMap&&je($e.roughnessMap),$e.envMap&&je($e.envMap),$e.gradientMap&&je($e.gradientMap),$e.transmission&&je($e.transmissionMap),$e.thicknessMap&&je($e.thicknessMap),$e.sheenColorMap&&je($e.sheenColorMap),$e.sheenRoughnessMap&&je($e.sheenRoughnessMap),$e.clearcoatMap&&je($e.clearcoatMap),$e.clearcoatNormalMap&&je($e.clearcoatNormalMap),$e.clearcoatRoughnessMap&&je($e.clearcoatRoughnessMap),$e.dispose()},lt=()=>{try{p&&(cancelAnimationFrame(p),p=null);const $e=N.renderer,je=N.scene,zt=N.controls,rt=document.getElementById("model-viewer");if(rt&&(rt.removeEventListener("mousemove",On),rt.removeEventListener("click",mt)),ct(),$e){if($e.domElement){const Ht=$e.domElement;Ht.oncontextmenu=null,Ht.onfocus=null,Ht.onblur=null,Ht.onmousedown=null,Ht.onmouseup=null,Ht.onmousemove=null}$e.dispose(),rt&&rt.contains($e.domElement)&&rt.removeChild($e.domElement)}if(zt&&zt.dispose(),je){for(;je.children.length>0;){const Ht=je.children[0];je.remove(Ht),Ht.traverse&&Ht.traverse(Pt=>{Pt.geometry&&Pt.geometry.dispose(),Pt.material&&(Array.isArray(Pt.material)?Pt.material.forEach(Lt):Lt(Pt.material))})}je.clear()}Object.assign(N,{scene:null,camera:null,renderer:null,controls:null,model:null,raycaster:null,mouse:{x:0,y:0},originalMaterials:new Map,intersectMeshes:null,lastModelUpdate:null,modelManager:null}),ie.value=[],J.value=null,ue.value=null,_.value=!1,b.value=null,C.value=0,console.log("清理完成，等待垃圾回收")}catch($e){console.error("清理资源时出错:",$e)}},Ct=()=>{try{const $e=document.getElementById("model-viewer");if(!$e)return;const je=N.camera,zt=N.renderer;if(!je||!zt)return;je.aspect=$e.clientWidth/$e.clientHeight,je.updateProjectionMatrix(),zt.setSize($e.clientWidth,$e.clientHeight)}catch($e){console.error("窗口大小调整错误:",$e)}},_t=()=>{const $e=N.controls;$e&&($e.rotateLeft(Math.PI/12),$e.update())},It=()=>{const $e=N.controls;$e&&($e.rotateLeft(-Math.PI/12),$e.update())},Bt=()=>{const $e=N.controls;$e&&($e.dollyIn(1.2),$e.update())},Ft=()=>{const $e=N.controls;$e&&($e.dollyOut(1.2),$e.update())},cn=()=>{const $e=N.camera,je=N.controls;$e&&je&&($e.position.copy(v),$e.lookAt(0,0,0),je.target.set(0,0,0),je.update())},Ot=()=>{const $e=N.scene;if($e){const je=$e.getObjectByName("gridHelper");je&&(je.visible=H.value)}},kt=()=>{const $e=N.scene;if($e){const je=$e.getObjectByName("axesHelper");je&&(je.visible=j.value)}},fn=()=>{const $e=N.scene;if($e){const je=$e.getObjectByName("modelBoxHelper");je&&(je.visible=W.value)}},Rn=$e=>{let je=0,zt=0,rt=0;$e.traverse(dr=>{if(dr instanceof Ru){if(dr.geometry instanceof _f){const Cr=dr.geometry;je+=Cr.attributes.position?Cr.attributes.position.count:0,zt+=Cr.index?Cr.index.count/3:0}Array.isArray(dr.material)?rt+=dr.material.length:dr.material&&rt++}});const Ht=_r(new Fs().setFromObject($e)),Pt=_r(new lr);Ht.getSize(Pt),Object.assign(I,{vertices:je,faces:zt,materials:rt,dimensions:`${Pt.x.toFixed(2)} x ${Pt.y.toFixed(2)} x ${Pt.z.toFixed(2)}`});const dn=Math.max(Pt.x,Pt.y,Pt.z),Hn=N.camera;Hn&&(Hn.near=.01,Hn.far=Math.max(1e3,dn*20),Hn.updateProjectionMatrix())},On=$e=>{const je=document.getElementById("model-viewer");if(!je)return;const zt=je.getBoundingClientRect();N.mouse.x=($e.clientX-zt.left)/je.clientWidth*2-1,N.mouse.y=-(($e.clientY-zt.top)/je.clientHeight)*2+1},mt=()=>{ue.value?Zt(ue.value):Ze()},Gt=()=>{if(!N.raycaster||!N.model||!_.value)return;const $e=N.raycaster,je=N.mouse,zt=N.camera;$e.setFromCamera(je,zt);let rt=N.intersectMeshes;if((!rt||N.lastModelUpdate!==N.model.uuid)&&(rt=[],N.model.traverse(Pt=>{Pt.isMesh&&Pt.geometry&&rt.push(Pt)}),N.intersectMeshes=rt,N.lastModelUpdate=N.model.uuid),rt.length===0)return;const Ht=$e.intersectObjects(rt,!1);if(Ht.length>0){const Pt=Ht[0].object;if(!ue.value||ue.value.object!==Pt){if(ue.value&&ue.value.object&&ue.value.object.isMesh){const dn=ue.value.object;if(!J.value||J.value.object!==dn)try{Tn(dn)}catch(Hn){console.error("恢复材质错误:",Hn)}}try{const dn=Pt.name||`部件-${Pt.id}`,Hn=Pt.userData.type||"未知类型",dr=Pt.userData.volume||Yt(Pt.geometry);ue.value={id:Pt.uuid,name:dn,type:Hn,materialType:Xn(Pt.material),dimensions:mr(Pt),position:Pt.position.clone(),volume:dr,description:Pt.userData.description||"无相关描述",object:_r(Pt)},(!J.value||J.value.object!==Pt)&&applyHighlightMaterial(Pt)}catch(dn){console.error("设置悬停对象错误:",dn),ue.value=null}}}else if(ue.value){try{const Pt=ue.value.object;Pt&&Pt.isMesh&&(!J.value||J.value.object!==Pt)&&Tn(Pt)}catch(Pt){console.error("清除悬停效果错误:",Pt)}ue.value=null}},gn=($e,je)=>{$e&&$e.material&&($e.material=je)},xt=$e=>{if(!$e)return;if(J.value&&$e.userData.partId===J.value.id){gn($e,ee);return}const je=N.originalMaterials.get($e.uuid);je&&($e.material=je.clone(),$e.material.isMeshStandardMaterial&&($e.material.metalness=U.value,$e.material.roughness=Y.value))},Zt=$e=>{if(J.value&&J.value.id===$e.id){Ze();return}Ze(),J.value=$e,gn($e.object,ee),Fe($e,!0)},Ze=()=>{J.value&&J.value.object&&xt(J.value.object),J.value=null},Fe=($e,je=!1)=>{try{if(!$e||!$e.object)return;const zt=N.controls,rt=N.camera;if(!zt||!rt)return;const Ht=new lr;if($e.object.getWorldPosition(Ht),!isFinite(Ht.x)||!isFinite(Ht.y)||!isFinite(Ht.z)){console.warn("部件位置无效，无法聚焦",$e.name);return}const Pt=new Fs().setFromObject($e.object),dn=new lr;Pt.getSize(dn),dn.x===0&&dn.y===0&&dn.z===0&&(console.warn("部件尺寸为零，使用默认距离"),dn.set(1,1,1));const Hn=Math.max(dn.x,dn.y,dn.z),dr=Math.max(Hn*3,1);je?ve(Ht,dr):Oe(Ht,dr),(!J.value||J.value.id!==$e.id)&&Zt($e)}catch(zt){console.error("聚焦部件时出错:",zt)}},ve=($e,je)=>{try{const zt=N.controls,rt=N.camera;if(!zt||!rt)return;const Ht=rt.position.clone(),Pt=zt.target.clone(),dn=new lr().subVectors(rt.position,zt.target).normalize(),Hn=$e.clone().add(dn.multiplyScalar(je));if(!isFinite(Hn.x)||!isFinite(Hn.y)||!isFinite(Hn.z)){console.warn("计算的相机位置无效，使用直接设置"),Oe($e,je);return}const dr=1e3,Cr=Date.now(),ci=()=>{try{const Li=Date.now()-Cr,Lo=Math.min(Li/dr,1),yl=ke(Lo);rt.position.lerpVectors(Ht,Hn,yl),zt.target.lerpVectors(Pt,$e,yl),zt.update(),Lo<1&&requestAnimationFrame(ci)}catch(Li){console.error("相机动画过程中出错:",Li),Oe($e,je)}};ci()}catch(zt){console.error("设置相机动画时出错:",zt),Oe($e,je)}},ke=$e=>1-Math.pow(1-$e,3),Oe=($e,je)=>{try{const zt=N.controls,rt=N.camera;if(!zt||!rt)return;if(!isFinite($e.x)||!isFinite($e.y)||!isFinite($e.z)){console.warn("目标位置无效，无法设置相机");return}zt.target.copy($e);const Ht=new lr().subVectors(rt.position,zt.target).normalize();if(Ht.lengthSq()>.001){const Pt=$e.clone().add(Ht.multiplyScalar(je));isFinite(Pt.x)&&isFinite(Pt.y)&&isFinite(Pt.z)?rt.position.copy(Pt):(console.warn("计算的相机位置无效，使用默认位置"),rt.position.set($e.x,$e.y+je,$e.z))}else rt.position.set($e.x,$e.y+je,$e.z);zt.update()}catch(zt){console.error("设置相机位置时出错:",zt)}},Me=()=>{if(!N.model)return;q.value=!0;let $e=0;const je=20;ie.value.forEach(rt=>{if(rt.object){rt.object.position_0=rt.object.position.clone();const Ht=new lr;N.model.getWorldPosition(Ht);const Pt=new lr;rt.object.getWorldPosition(Pt);const dn=new lr().subVectors(Pt,Ht);dn.lengthSq()>1e-4?dn.normalize().multiplyScalar(.5):dn.set(0,1,0).multiplyScalar(.5),rt.object.decomposeDirection=dn}});const zt=()=>{$e<je&&(ie.value.forEach(rt=>{rt.object&&rt.object.decomposeDirection&&rt.object.position.add(rt.object.decomposeDirection)}),$e++,requestAnimationFrame(zt))};zt()},Ae=()=>{if(!N.model)return;q.value=!1;let $e=0;const je=20,zt=()=>{$e<je?(ie.value.forEach(rt=>{rt.object&&rt.object.position_0&&rt.object.position.lerp(rt.object.position_0,.1)}),$e++,requestAnimationFrame(zt)):ie.value.forEach(rt=>{rt.object&&rt.object.position_0&&rt.object.position.copy(rt.object.position_0)})};zt()},pt=$e=>{!$e||J.value&&J.value.id===$e.id||(ue.value=$e,$e.object&&gn($e.object,re))},Mt=$e=>{!$e||J.value&&J.value.id===$e.id||(ue.value=null,$e.object&&xt($e.object))},it=$e=>$e?`${$e.x.toFixed(2)}, ${$e.y.toFixed(2)}, ${$e.z.toFixed(2)}`:"0, 0, 0",Et=()=>{_.value=!1,N.model=null,h.value=null,bn(()=>{Je()})};Un(()=>{if(console.log("组件挂载，开始初始化"),!Dt())return;if(dt(),!Ce()){console.error("Three.js初始化失败，无法加载模型");return}Je(),window.addEventListener("resize",Ct);const je=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);je.addEventListener?je.addEventListener("change",Vt):je.addListener&&je.addListener(Vt),A.value&&(f.value=_r(new k1),document.body.appendChild(f.value.dom)),window.addEventListener("keydown",qr),console.log("组件挂载完成，已初始化Three.js场景和模型加载")}),ui(()=>{window.removeEventListener("resize",Ct);const $e=document.getElementById("model-viewer");$e&&($e.removeEventListener("mousemove",On),$e.removeEventListener("click",mt)),Ne&&(Ne.stop(),Ne=null),Ve&&(Ve.terminate(),Ve=null);const je=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);je.removeEventListener?je.removeEventListener("change",Vt):je.removeListener&&je.removeListener(Vt),lt()});const Vt=()=>{const $e=N.renderer;$e&&$e.setPixelRatio(Math.min(window.devicePixelRatio,1.5))},Dt=()=>{try{const $e=document.createElement("canvas"),je=$e.getContext("webgl")||$e.getContext("experimental-webgl");if(!je)return b.value="您的浏览器不支持WebGL，无法显示3D模型",console.error("浏览器不支持WebGL"),!1;const zt=je.getParameter(je.MAX_TEXTURE_SIZE);console.log("最大纹理尺寸:",zt);const rt=je.getParameter(je.MAX_VERTEX_ATTRIBS);return console.log("最大顶点属性:",rt),!0}catch($e){return console.error("WebGL兼容性检查错误:",$e),b.value="WebGL兼容性检查失败: "+$e.message,!1}},ln=()=>{console.log("重试加载模型"),C.value=0,b.value=null,_.value=!1;try{lt()}catch($e){console.warn("清理资源时出错:",$e)}if(window.gc)try{window.gc()}catch($e){console.warn("触发垃圾回收时出错:",$e)}setTimeout(()=>{try{oe.value||(oe.value=!0,be.value=.8,console.log("启用模型简化，设置简化率为:",be.value)),Ne&&Ne.setQualityLevel(.4),Ce(),setTimeout(()=>{Je()},500)}catch($e){console.error("重试加载模型时出错:",$e),b.value="重试加载失败: "+$e.message}},1e3)},kn=()=>{const $e=N.scene,je=N.camera,zt=N.controls;if(!$e||!je||!zt||!h.value){console.warn("无法重置视图：缺少必要的组件");return}try{console.log("正在重置视图...");const rt=new Fs().setFromObject(h.value);if(console.log("模型包围盒: ",rt),rt.isEmpty()||!isFinite(rt.min.x)||!isFinite(rt.min.y)||!isFinite(rt.min.z)||!isFinite(rt.max.x)||!isFinite(rt.max.y)||!isFinite(rt.max.z)){console.warn("模型边界盒无效");return}const Ht=new lr;rt.getCenter(Ht);const Pt=new lr;rt.getSize(Pt),console.log("模型中心点: ",Ht),console.log("模型尺寸: ",Pt);const dn=Math.max(Pt.x,Pt.y,Pt.z),dr=Math.max(dn,.01),Cr=je.fov*(Math.PI/180),Lo=dr/(2*Math.tan(Cr/2))*1.5;console.log("计算的相机距离: ",Lo),zt.target.copy(Ht);const yl=new lr(Lo,Lo,Lo);je.position.copy(Ht).add(yl),je.lookAt(Ht),zt.update(),console.log("视图已重置"),N.renderer&&N.renderer.render($e,je)}catch(rt){console.error("重置视图时出错:",rt)}},Tn=$e=>{try{if($e&&$e.isMesh){const zt=N.originalMaterials.get($e.uuid);if(zt){$e.material=zt,N.originalMaterials.delete($e.uuid);return}}const je=$e.isMesh?$e.material:$e;je&&je.userData&&je.userData.originalColor&&(je.emissive=new ra(0),je.emissiveIntensity=0,je.needsUpdate=!0)}catch(je){console.error("恢复原始材质错误:",je)}},Xn=$e=>$e?Array.isArray($e)?$e.length===0?"未知材质":Xn($e[0]):$e.isMeshStandardMaterial?"PBR标准材质":$e.isMeshPhysicalMaterial?"PBR物理材质":$e.isMeshPhongMaterial?"Phong材质":$e.isMeshLambertMaterial?"Lambert材质":$e.isMeshBasicMaterial?"基础材质":$e.isShaderMaterial?"着色器材质":"其他材质":"未知材质",mr=$e=>{if(!$e)return"未知尺寸";try{const je=new Fs().setFromObject($e),zt=new lr;return je.getSize(zt),`${zt.x.toFixed(2)} x ${zt.y.toFixed(2)} x ${zt.z.toFixed(2)}`}catch(je){return console.error("计算对象尺寸出错:",je),"计算错误"}},Yt=$e=>{if(!$e)return 0;try{if($e.isBufferGeometry){const je=$e.getAttribute("position");if(!je)return 0;const zt=$e.getIndex();let rt=0;if(zt){const Ht=zt.array,Pt=je.array;for(let dn=0;dn<Ht.length;dn+=3){const Hn=Ht[dn]*3,dr=Ht[dn+1]*3,Cr=Ht[dn+2]*3,ci=new lr(Pt[Hn],Pt[Hn+1],Pt[Hn+2]),Li=new lr(Pt[dr],Pt[dr+1],Pt[dr+2]),Lo=new lr(Pt[Cr],Pt[Cr+1],Pt[Cr+2]);rt+=rr(ci,Li,Lo)}}else{const Ht=je.array;for(let Pt=0;Pt<Ht.length;Pt+=9){const dn=new lr(Ht[Pt],Ht[Pt+1],Ht[Pt+2]),Hn=new lr(Ht[Pt+3],Ht[Pt+4],Ht[Pt+5]),dr=new lr(Ht[Pt+6],Ht[Pt+7],Ht[Pt+8]);rt+=rr(dn,Hn,dr)}}return Math.abs(rt)}return 0}catch(je){return console.error("计算几何体体积出错:",je),0}},rr=($e,je,zt)=>{const rt=new lr().subVectors(je,$e),Ht=new lr().subVectors(zt,$e),Pt=new lr().crossVectors(rt,Ht);return $e.dot(Pt)/6},zr=$e=>{if(!(!$e||!$e.isMesh))try{if(Array.isArray($e.material)){const je=[];$e.material.forEach((zt,rt)=>{if(zt||(console.log(`材质[${rt}]为空，创建默认材质`),zt=new z7({color:8421504})),zt.isMeshStandardMaterial)zt.metalness=U.value,zt.roughness=Y.value,je.push(zt);else{const Ht=new Dc({color:zt.color?zt.color.clone():new ra(13421772),map:zt.map,normalMap:zt.normalMap,aoMap:zt.aoMap,aoMapIntensity:zt.aoMapIntensity,emissive:zt.emissive?zt.emissive.clone():new ra(0),emissiveMap:zt.emissiveMap,emissiveIntensity:zt.emissiveIntensity||1,metalness:U.value,roughness:Y.value,transparent:zt.transparent,opacity:zt.opacity,side:zt.side||sf});showWireframe.value&&(Ht.wireframe=!0),je.push(Ht)}}),$e.material=je}else if($e.material){const je=$e.material;if(je.isMeshStandardMaterial)je.metalness=U.value,je.roughness=Y.value,je.side=sf;else{const zt=new Dc({color:je.color?je.color.clone():new ra(13421772),map:je.map,normalMap:je.normalMap,aoMap:je.aoMap,aoMapIntensity:je.aoMapIntensity,emissive:je.emissive?je.emissive.clone():new ra(0),emissiveMap:je.emissiveMap,emissiveIntensity:je.emissiveIntensity||1,metalness:U.value,roughness:Y.value,transparent:je.transparent,opacity:je.opacity,side:je.side||sf});$e.material=zt}}else $e.material=new Dc({color:13421772,metalness:U.value,roughness:Y.value,side:sf})}catch(je){console.error("升级材质时出错:",je)}},Ur=async $e=>{try{if(console.log(`=== 开始加载特定模型: ${$e} ===`),!$e){console.error("无效的模型路径"),b.value="无效的模型路径";return}a.setLoading("model",!0),C.value=0,b.value=null,ct(),console.log(`开始加载模型: ${$e}`);const je=Qt($e);console.log(`识别到的模型类型: ${je}`);const zt=new Hae;zt.onProgress=(Pt,dn,Hn)=>{C.value=Math.round(dn/Hn*100),console.log(`模型加载进度: ${C.value}%`)},zt.onError=Pt=>{console.error(`资源加载错误: ${Pt}`),b.value=`资源加载错误: ${Pt}`};let rt,Ht=$e;if(!Ht.startsWith("/")&&!Ht.startsWith("./")&&!Ht.startsWith("http")&&(Ht="./"+Ht),console.log(`使用URL: ${Ht} 加载模型`),je==="gltf"||je==="glb"){const Pt=new Ny(zt),dn=new sT(zt);dn.setDecoderPath("/draco/"),Pt.setDRACOLoader(dn),rt=Pt}else if(je==="fbx")rt=new uz(zt);else if(je==="obj")rt=new F3e(zt);else throw new Error(`不支持的模型类型: ${je}`);try{console.log(`=== 开始调用加载器加载模型: ${Ht} ===`);const Pt=await new Promise((Cr,ci)=>{rt.load(Ht,Li=>{console.log("=== 模型加载成功 ===",Li),Cr(Li)},Li=>{Li.lengthComputable&&(C.value=Math.round(Li.loaded/Li.total*100),console.log(`加载进度: ${C.value}%`))},Li=>{console.error("=== 模型加载错误 ===",Li),ci(Li)})});let dn;if(je==="gltf"||je==="glb"?(dn=Pt.scene,console.log("GLTF/GLB模型已加载",Pt)):(dn=Pt,console.log("其他类型模型已加载",Pt)),!dn)throw new Error("模型加载结果无效");let Hn=!1;if(dn.traverse(Cr=>{Cr instanceof Ru&&(Hn=!0)}),Hn||console.warn("模型中未找到网格对象"),h.value=_r(dn),N.model=h.value,h.value.name="loadedModel",!o.value)throw new Error("场景未初始化");o.value.add(h.value),console.log("模型已添加到场景");let dr=0;return h.value.traverse(Cr=>{if(Cr instanceof Ru){if(dr++,console.log(`处理第 ${dr} 个Mesh对象:`,Cr.name||Cr.uuid),!Cr.geometry){console.warn("网格缺少几何体:",Cr.name||Cr.uuid);return}Cr.visible=!0,Cr.castShadow=!0,Cr.receiveShadow=!0,Cr.material||(console.log("网格缺少材质，创建默认材质"),Cr.material=new Dc({color:8421504,metalness:U.value,roughness:Y.value})),Cr.material&&(Array.isArray(Cr.material)?Cr.material.forEach((ci,Li)=>{ci&&(ci.color||(ci.color=new ra(8421504)),ci.userData=ci.userData||{},ci.userData.originalColor=ci.color.clone(),console.log(`材质[${Li}]颜色:`,ci.color))}):Cr.material&&(Cr.material.color||(Cr.material.color=new ra(8421504)),Cr.material.userData=Cr.material.userData||{},Cr.material.userData.originalColor=Cr.material.color.clone(),console.log("材质颜色:",Cr.material.color))),zr(Cr)}}),console.log(`模型中共有 ${dr} 个网格对象`),je==="fbx"&&h.value&&h.value.scale&&(h.value.scale.set(.01,.01,.01),console.log("缩小FBX模型比例")),yt(),console.log("模型包围盒:",T.value),kn(),Rn(h.value),console.log("模型信息:",I),Ue(h.value),console.log("模型部件列表:",ie.value),_.value=!0,O.value=$e,console.log("模型加载和处理完成"),h.value}catch(Pt){throw console.error("=== 模型加载过程中出现错误 ===",Pt),new Error(`模型加载过程出错: ${Pt.message}`)}}catch(je){throw console.error("=== 模型加载完全失败 ===",je),b.value=`加载模型失败: ${je.message}`,_.value=!1,je}finally{console.log("=== 模型加载过程结束 ==="),a.setLoading("model",!1)}},Br=$e=>$e?($e.split("/").pop()||$e).replace(/\.[^/.]+$/,""):"Unknown Model",Qt=$e=>{if(!$e)return"unknown";const je=$e.split(".").pop().toLowerCase();return je==="gltf"||je==="glb"?"gltf":je==="obj"?"obj":je==="fbx"?"fbx":je==="stl"?"stl":je},St=le(!1),en=async()=>{try{if(!l.value||!_.value){console.error("无法截图：渲染器未初始化或模型未加载");return}a.setLoading("screenshot",!0);let $e=[];i.getSettings.captureUI||($e=document.querySelectorAll(".controls-panel, .parts-panel, .model-info-panel, .model-selector"),$e.forEach(Pt=>{Pt.style.display="none"})),N.renderer&&N.scene&&N.camera&&N.renderer.render(N.scene,N.camera);const je=l.value.domElement.toDataURL(i.getSettings.format==="png"?"image/png":"image/jpeg",i.getSettings.quality);$e.forEach(Pt=>{Pt.style.display=""});const zt=await gr(je),rt={name:Br(O.value),path:O.value,type:Qt(O.value),vertices:I.vertices,faces:I.faces,materials:I.materials,dimensions:I.dimensions},Ht=i.addScreenshot({imageData:je,thumbnailData:zt,resolution:i.getSettings.resolution,format:i.getSettings.format,modelInfo:rt,tags:["3D视图"],note:`${rt.name} 模型截图`,size:Tr(je)});St.value=!0,setTimeout(()=>{St.value=!1},3e3),console.log("截图保存成功，ID:",Ht)}catch($e){console.error("截图过程中出错:",$e)}finally{a.setLoading("screenshot",!1)}},gr=($e,je=256,zt=256)=>new Promise((rt,Ht)=>{const Pt=new Image;Pt.onload=()=>{try{const dn=document.createElement("canvas");let Hn=Pt.width,dr=Pt.height;if(Hn>je||dr>zt){const ci=Math.min(je/Hn,zt/dr);Hn*=ci,dr*=ci}dn.width=Hn,dn.height=dr,dn.getContext("2d").drawImage(Pt,0,0,Hn,dr),rt(dn.toDataURL("image/jpeg",.7))}catch(dn){Ht(dn)}},Pt.onerror=Ht,Pt.src=$e}),Tr=$e=>{const rt=$e.substring("data:image/png;base64,".length).length;return Math.floor((rt-rt/8*2)/4)*3},qr=$e=>{($e.key==="s"||$e.key==="S")&&!$e.ctrlKey&&!$e.metaKey&&en()},ar=()=>{h.value&&(n.getSelectedMaterial&&n.updateMaterial(n.getSelectedMaterial.id,{properties:{metalness:U.value,roughness:Y.value}}),h.value.traverse($e=>{$e instanceof Ru&&(Array.isArray($e.material)?$e.material.forEach(je=>{je&&je.isMeshStandardMaterial&&(je.metalness=U.value,je.roughness=Y.value,je.needsUpdate=!0)}):$e.material&&$e.material.isMeshStandardMaterial&&($e.material.metalness=U.value,$e.material.roughness=Y.value,$e.material.needsUpdate=!0))}))};return($e,je)=>(te(),me("div",E5e,[je[40]||(je[40]=V("div",{id:"model-viewer"},null,-1)),_.value?Ge("",!0):(te(),me("div",A5e,[je[9]||(je[9]=V("div",{class:"spinner"},null,-1)),V("span",null,"加载中... "+Xe(C.value)+"%",1),C.value===100&&!_.value?(te(),me("div",P5e,[je[8]||(je[8]=$t(" 模型加载完成，正在处理中... ")),V("button",{onClick:ln,class:"retry-button"},"重试加载")])):Ge("",!0)])),b.value?(te(),me("div",I5e,[V("div",null,Xe(b.value),1),V("button",{onClick:ln,class:"retry-button"},"重试加载")])):Ge("",!0),V("div",L5e,[(te(!0),me(hn,null,Kn(B,(zt,rt)=>(te(),me("div",{class:"model-category",key:rt},[V("h3",null,Xe(rt),1),V("div",D5e,[(te(!0),me(hn,null,Kn(zt,Ht=>(te(),me("button",{key:Ht.path,onClick:Pt=>Ur(Ht.path),class:se({active:O.value===Ht.path}),title:Ht.name},Xe(Ht.name),11,R5e))),128))])]))),128))]),V("div",O5e,[V("div",{class:"control-group"},[je[11]||(je[11]=V("h3",null,"视图控制",-1)),V("button",{onClick:_t},"← 左旋转"),V("button",{onClick:It},"右旋转 →"),V("button",{onClick:Bt},"放大 +"),V("button",{onClick:Ft},"缩小 -"),V("button",{onClick:cn},"重置视图"),V("button",{onClick:en,class:"screenshot-btn"},je[10]||(je[10]=[V("span",{class:"icon"},"📷",-1),$t(" 截图 ")]))]),V("div",z5e,[je[15]||(je[15]=V("h3",null,"显示选项",-1)),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":je[0]||(je[0]=zt=>H.value=zt),onChange:Ot},null,544),[[Fu,H.value]]),je[12]||(je[12]=$t(" 显示网格 "))]),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":je[1]||(je[1]=zt=>j.value=zt),onChange:kt},null,544),[[Fu,j.value]]),je[13]||(je[13]=$t(" 显示坐标轴 "))]),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":je[2]||(je[2]=zt=>W.value=zt),onChange:fn},null,544),[[Fu,W.value]]),je[14]||(je[14]=$t(" 显示包围盒 "))])]),V("div",B5e,[je[18]||(je[18]=V("h3",null,"材质控制",-1)),V("div",F5e,[je[16]||(je[16]=V("label",null,"金属度",-1)),In(V("input",{type:"range","onUpdate:modelValue":je[3]||(je[3]=zt=>U.value=zt),min:"0",max:"1",step:"0.01",onInput:ar},null,544),[[qo,U.value]]),V("span",null,Xe(U.value),1)]),V("div",N5e,[je[17]||(je[17]=V("label",null,"粗糙度",-1)),In(V("input",{type:"range","onUpdate:modelValue":je[4]||(je[4]=zt=>Y.value=zt),min:"0",max:"1",step:"0.01",onInput:ar},null,544),[[qo,Y.value]]),V("span",null,Xe(Y.value),1)])]),V("div",$5e,[je[21]||(je[21]=V("h3",null,"性能优化",-1)),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":je[5]||(je[5]=zt=>oe.value=zt)},null,512),[[Fu,oe.value]]),je[19]||(je[19]=$t(" 简化模型 "))]),oe.value?(te(),me("div",V5e,[je[20]||(je[20]=V("label",null,"简化率",-1)),In(V("input",{type:"range","onUpdate:modelValue":je[6]||(je[6]=zt=>be.value=zt),min:"0.1",max:"0.9",step:"0.1"},null,512),[[qo,be.value]]),V("span",null,Xe(be.value),1)])):Ge("",!0),V("button",{onClick:Et},"重新加载模型")]),V("div",H5e,[je[22]||(je[22]=V("h3",null,"模型操作",-1)),q.value?Ge("",!0):(te(),me("button",{key:0,onClick:Me},"拆解模型")),q.value?(te(),me("button",{key:1,onClick:Ae},"合并模型")):Ge("",!0)])]),_.value&&ie.value.length>0?(te(),me("div",j5e,[je[23]||(je[23]=V("h3",null,"部件列表",-1)),V("div",U5e,[In(V("input",{type:"text","onUpdate:modelValue":je[7]||(je[7]=zt=>ce.value=zt),placeholder:"搜索部件..."},null,512),[[qo,ce.value]])]),V("div",W5e,[(te(!0),me(hn,null,Kn(pe.value,zt=>(te(),me("div",{key:zt.id,class:se(["part-item",{active:J.value&&J.value.id===zt.id}]),onMouseenter:rt=>pt(zt),onMouseleave:rt=>Mt(zt),onClick:rt=>Zt(zt)},[V("span",K5e,Xe(zt.name),1)],42,G5e))),128)),pe.value.length===0?(te(),me("div",q5e," 没有找到匹配的部件 ")):Ge("",!0)])])):Ge("",!0),J.value?(te(),me("div",Z5e,[V("div",{class:"panel-header"},[je[24]||(je[24]=V("h3",null,"部件详情",-1)),V("button",{class:"close-btn",onClick:Ze},"×")]),V("div",Y5e,[V("div",X5e,[je[25]||(je[25]=V("span",null,"名称:",-1)),V("span",null,Xe(J.value.name),1)]),V("div",J5e,[je[26]||(je[26]=V("span",null,"类型:",-1)),V("span",null,Xe(J.value.type),1)]),V("div",Q5e,[je[27]||(je[27]=V("span",null,"材质:",-1)),V("span",null,Xe(J.value.materialType),1)]),V("div",eze,[je[28]||(je[28]=V("span",null,"尺寸:",-1)),V("span",null,Xe(J.value.dimensions),1)]),V("div",tze,[je[29]||(je[29]=V("span",null,"位置:",-1)),V("span",null,Xe(it(J.value.position)),1)]),V("div",nze,[je[30]||(je[30]=V("span",null,"体积:",-1)),V("span",null,Xe(J.value.volume||"未知")+" m³",1)]),V("div",rze,[je[31]||(je[31]=V("span",null,"描述:",-1)),V("span",null,Xe(J.value.description),1)])])])):Ge("",!0),ue.value&&(!J.value||ue.value.id!==J.value.id)?(te(),me("div",ize,Xe(ue.value.name),1)):Ge("",!0),_.value?(te(),me("div",aze,[je[38]||(je[38]=V("h3",null,"模型信息",-1)),V("div",oze,[je[32]||(je[32]=V("span",null,"顶点数量:",-1)),V("span",null,Xe(I.vertices),1)]),V("div",sze,[je[33]||(je[33]=V("span",null,"面片数量:",-1)),V("span",null,Xe(I.faces),1)]),V("div",lze,[je[34]||(je[34]=V("span",null,"材质数量:",-1)),V("span",null,Xe(I.materials),1)]),V("div",uze,[je[35]||(je[35]=V("span",null,"尺寸(m):",-1)),V("span",null,Xe(I.dimensions),1)]),V("div",cze,[V("div",dze,[je[36]||(je[36]=V("span",null,"FPS:",-1)),V("span",null,Xe(we.fps),1)]),we.memoryUsage?(te(),me("div",hze,[je[37]||(je[37]=V("span",null,"内存:",-1)),V("span",null,Xe(we.memoryUsage)+" MB",1)])):Ge("",!0)])])):Ge("",!0),St.value?(te(),me("div",fze,je[39]||(je[39]=[V("div",{class:"toast-content"},[V("span",{class:"icon"},"✓"),V("span",null,"截图已保存！")],-1)]))):Ge("",!0)]))}},vze=Ms(pze,[["__scopeId","data-v-c2706a73"]]),mze=Be({name:"Demo2",data(){return{scene:null,camera:null,renderer:null,controls:null,model:null,mixer:null,animationFrameId:null,clock:new ZO,initialCameraPosition:new lr(0,5,10),modelLoaded:!1,loadError:null,loadingProgress:0,nonReactiveObjects:{scene:null,camera:null,renderer:null,controls:null,model:null,mixer:null,composer:null},fitCameraToObject:null,currentModel:"阀门.fbx",showGrid:!0,showAxes:!0,showBoundingBox:!1,hasAnimations:!1,isPlaying:!1,animationSpeed:1,fps:0,memoryUsage:0,showPerformance:!0,lastTime:0,frameCount:0,modelCategories:{船舶模型:[{name:"阀门",path:"阀门.fbx"},{name:"船模型 (GLTF)",path:"6.gltf"},{name:"船模型1 (FBX)",path:"ship1.fbx"},{name:"备用模型 (GLTF)",path:"untitled.gltf"}],其他模型:[{name:"1号模型 (FBX)",path:"1.fbx"},{name:"2号模型 (FBX)",path:"2.fbx"},{name:"PrimaryIonDrive",path:"PrimaryIonDrive.glb"},{name:"UI模型",path:"ui.fbx"},{name:"机器模型",path:"machine.fbx"}]},modelInfo:{vertices:0,faces:0,materials:0,dimensions:"0 x 0 x 0"}}},mounted(){this.initThreeJS(),this.loadModel(),window.addEventListener("resize",this.onWindowResize),this.startPerformanceMonitoring()},beforeUnmount(){window.removeEventListener("resize",this.onWindowResize),this.cleanup()},methods:{initThreeJS(){try{const e=_r(new Kw);e.background=new ra(2236962);const t=_r(new _0(16777215,.4));e.add(t);const n=_r(new Uc(16777215,1));n.position.set(5,10,7.5),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,n.shadow.camera.near=.5,n.shadow.camera.far=500,n.shadow.bias=-1e-4,n.shadow.normalBias=.02,n.shadow.camera.left=-50,n.shadow.camera.right=50,n.shadow.camera.top=50,n.shadow.camera.bottom=-50,e.add(n);const r=_r(new Uc(16777215,.4));r.position.set(-5,5,-7.5),e.add(r);const i=_r(new R7(16777215,4473924,.4));i.position.set(0,20,0),e.add(i);const a=_r(new Uc(16777215,.2));a.position.set(0,-10,0),e.add(a),this.nonReactiveObjects.scene=e,this.scene=e;const o=document.getElementById("model-viewer");if(!o)throw new Error("找不到model-viewer容器元素");const s=_r(new y0(45,o.clientWidth/o.clientHeight,.1,1e3));s.position.copy(this.initialCameraPosition),s.lookAt(0,0,0),this.nonReactiveObjects.camera=s,this.camera=s;const l=_r(new qw({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0,powerPreference:"high-performance"}));l.setSize(o.clientWidth,o.clientHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.shadowMap.enabled=!0,l.shadowMap.type=UO,l.outputColorSpace=WO,l.toneMapping=GO,this.nonReactiveObjects.renderer=l,this.renderer=l,o.appendChild(l.domElement);const c=_r(new mx(s,l.domElement));c.enableDamping=!0,c.dampingFactor=.05,c.enablePan=!0,c.minDistance=2,c.maxDistance=50,c.maxPolarAngle=Math.PI/1.5,c.update(),this.nonReactiveObjects.controls=c,this.controls=c;const h=_r(new KO(20,20,5592405,3355443));h.name="gridHelper",e.add(h);const f=_r(new O7(5));f.name="axesHelper",e.add(f),this.fitCameraToObject=(v,_=1.5)=>{const b=this.nonReactiveObjects.camera,C=this.nonReactiveObjects.controls;if(!b)return;const T=new Fs().setFromObject(v),E=T.getSize(new lr),A=T.getCenter(new lr),I=Math.max(E.x,E.y,E.z),O=b.fov*(Math.PI/180);let B=Math.abs(I/2/Math.tan(O/2))*_;b.position.set(A.x,A.y,A.z+B),b.lookAt(A),b.updateProjectionMatrix(),C&&(C.target.copy(A),C.update())};const p=()=>{this.animationFrameId=requestAnimationFrame(p);const v=this.nonReactiveObjects.camera,_=this.nonReactiveObjects.scene,b=this.nonReactiveObjects.renderer,C=this.nonReactiveObjects.controls,T=this.nonReactiveObjects.mixer;if(C&&C.update(),T){const E=this.clock.getDelta();T.update(E*this.animationSpeed)}_&&v&&b&&b.render(_,v),this.updatePerformanceMetrics()};p()}catch(e){console.error("初始化Three.js错误:",e),this.loadError=`初始化错误: ${e.message}`}},loadModel(){this.loadSpecificModel(this.currentModel)},loadSpecificModel(e){this.currentModel=e,this.modelLoaded=!1,this.loadError=null,this.loadingProgress=0,console.log(`开始加载模型: ${e}`),this.cleanupModel();const t=e.split(".").pop().toLowerCase();t==="gltf"||t==="glb"?this.loadGLTFModel(e):t==="fbx"?this.loadFBXModel(e):(this.loadError=`不支持的文件格式: ${t}`,console.error(this.loadError))},loadGLTFModel(e){console.log(`开始加载GLTF模型: ${e}`);const t=new Ny,n=new sT;n.setDecoderPath("/node_modules/draco3d/"),n.setDecoderConfig({type:"js"}),t.setDRACOLoader(n),t.load(e,r=>{var i,a,o;try{if(console.log(`模型 ${e} 加载成功:`,{animations:((i=r.animations)==null?void 0:i.length)||0,scenes:((a=r.scenes)==null?void 0:a.length)||0,cameras:((o=r.cameras)==null?void 0:o.length)||0,assets:r.asset}),!r.scene)throw new Error("加载的模型没有场景数据");const s=_r(r.scene),l=r.animations?r.animations.map(c=>_r(c)):[];this.processModel(s),l&&l.length&&this.setupAnimations(s,l)}catch(s){console.error("模型处理错误:",s),this.loadError=`模型处理错误: ${s.message}`}},r=>{const i=r.loaded/r.total;this.loadingProgress=Math.round(i*100),console.log(`加载进度: ${this.loadingProgress}%`)},r=>{console.error(`模型 ${e} 加载错误:`,r),this.loadError=`模型加载错误: ${r.message||"未知错误"}`,r.message.includes("404")?this.loadError=`找不到模型文件: ${e}，请检查文件路径是否正确`:r.message.includes("Failed to load resource")?this.loadError=`加载资源失败: ${e}，请检查文件格式是否正确`:r.message.includes("Unexpected token")&&(this.loadError=`模型文件格式错误: ${e}，请确保文件未损坏`)})},loadFBXModel(e){new uz().load(e,n=>{try{console.log(`模型 ${e} 加载成功`);const r=_r(n),i=n.animations?n.animations.map(a=>_r(a)):[];this.processModel(r),i&&i.length&&this.setupAnimations(r,i)}catch(r){console.error("FBX模型处理错误:",r),this.loadError=`FBX模型处理错误: ${r.message}`}},n=>{this.loadingProgress=Math.round(n.loaded/n.total*100)},n=>{console.error(`FBX模型 ${e} 加载错误:`,n),this.loadError=`FBX模型加载错误: ${n.message||"未知错误"}`})},processModel(e){try{e=_r(e);const t=this.nonReactiveObjects.scene;if(!t)throw new Error("场景未初始化");const n=t.getObjectByName("loadedModel");n&&t.remove(n),e.name="loadedModel";const r=_r(new Fs().setFromObject(e)),i=_r(new lr),a=_r(new lr);r.getSize(i),r.getCenter(a);const o=Math.max(i.x,i.y,i.z),s=o>0?5/o:1;e.scale.setScalar(s),e.position.copy(a).multiplyScalar(-s),e.traverse(_=>{if(_.isMesh){if(_.geometry){_.geometry.computeVertexNormals(),_.geometry.attributes.uv||_.geometry.computeVertexNormals();try{_.geometry.attributes.position&&_.geometry.attributes.position.count>1e3&&(_.geometry=Xae(_.geometry))}catch(b){console.warn("合并顶点失败，跳过此步骤:",b)}}_.material||(_.material=new Dc({color:8421504,metalness:.5,roughness:.5,envMapIntensity:1})),_.material&&(Array.isArray(_.material)?_.material:[_.material]).forEach(C=>{C.side=sf,C.needsUpdate=!0,_.castShadow=!0,_.receiveShadow=!0,C instanceof Dc&&(C.envMapIntensity=1,C.roughness=Math.min(Math.max(C.roughness,.2),.8),C.metalness=Math.min(Math.max(C.metalness,.1),.9)),C.map&&(C.map.anisotropy=16,C.map.minFilter=Uae,C.map.magFilter=B7,C.map.needsUpdate=!0),C.normalMap&&(C.normalMap.anisotropy=16,C.normalScale.set(1,1)),C.aoMap&&(C.aoMap.anisotropy=16,C.aoMapIntensity=1)})}}),t.add(e);const l=_r(new Wae(e,16711680));l.name="modelBoxHelper",l.visible=this.showBoundingBox,t.add(l);const c=_r(new Gae(100,100)),h=_r(new Kae({opacity:.3})),f=_r(new Ru(c,h));f.rotation.x=-Math.PI/2,f.position.y=r.min.y,f.receiveShadow=!0,f.name="shadowGround",t.add(f),this.fitCameraToObject(e,1.5);const p=this.nonReactiveObjects.renderer,v=this.nonReactiveObjects.camera;p&&t&&v&&p.render(t,v),this.modelLoaded=!0,this.loadError=null,this.updateModelInfo(e)}catch(t){throw console.error("处理模型时出错:",t),this.loadError=`处理模型错误: ${t.message}`,t}},optimizeMaterial(e){e.transparent=!1,e.opacity=1,e.side=sf,e.needsUpdate=!0,e.aoMap&&(e.aoMapIntensity=1),e.normalMap&&e.normalScale.set(1,1)},setupAnimations(e,t){if(this.hasAnimations=t.length>0,this.hasAnimations){const n=_r(new F7(e));this.nonReactiveObjects.mixer=n,this.mixer=n,n.clipAction(t[0]).play(),this.isPlaying=!0}},toggleAnimation(){const e=this.nonReactiveObjects.mixer;if(e){if(this.isPlaying)e.stopAllAction();else{const t=e._actions;t.length>0&&t[0].play()}this.isPlaying=!this.isPlaying}},updateAnimationSpeed(){const e=this.nonReactiveObjects.mixer;e&&(e.timeScale=this.animationSpeed)},cleanupModel(){const e=this.nonReactiveObjects.scene;if(!e)return;const t=e.getObjectByName("loadedModel");t&&(e.remove(t),t.traverse(a=>{a.geometry&&a.geometry.dispose(),a.material&&(Array.isArray(a.material)?a.material.forEach(o=>{i(o)}):i(a.material))}));const n=e.getObjectByName("modelBoxHelper");n&&e.remove(n);const r=this.nonReactiveObjects.mixer;r&&(r.stopAllAction(),this.nonReactiveObjects.mixer=null,this.mixer=null);function i(a){a&&(a.map&&a.map.dispose(),a.lightMap&&a.lightMap.dispose(),a.bumpMap&&a.bumpMap.dispose(),a.normalMap&&a.normalMap.dispose(),a.displacementMap&&a.displacementMap.dispose(),a.specularMap&&a.specularMap.dispose(),a.emissiveMap&&a.emissiveMap.dispose(),a.alphaMap&&a.alphaMap.dispose(),a.aoMap&&a.aoMap.dispose(),a.metalnessMap&&a.metalnessMap.dispose(),a.roughnessMap&&a.roughnessMap.dispose(),a.envMap&&a.envMap.dispose(),a.dispose())}},cleanup(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null);const e=this.nonReactiveObjects.renderer,t=this.nonReactiveObjects.scene,n=this.nonReactiveObjects.controls;if(this.cleanupModel(),e){e.dispose();const r=document.getElementById("model-viewer");r&&r.contains(e.domElement)&&r.removeChild(e.domElement)}n&&n.dispose(),t&&t.clear(),this.nonReactiveObjects={scene:null,camera:null,renderer:null,controls:null,model:null,mixer:null,composer:null}},startPerformanceMonitoring(){this.lastTime=performance.now(),this.frameCount=0},updatePerformanceMetrics(){this.frameCount++;const e=performance.now();e-this.lastTime>=1e3&&(this.fps=Math.round(this.frameCount*1e3/(e-this.lastTime)),performance&&"memory"in performance?this.memoryUsage=Math.round(performance.memory.usedJSHeapSize/(1024*1024))||0:this.memoryUsage=0,this.frameCount=0,this.lastTime=e)},onWindowResize(){try{const e=document.getElementById("model-viewer");if(!e)return;const t=this.nonReactiveObjects.camera,n=this.nonReactiveObjects.renderer;if(!t||!n)return;t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix(),n.setSize(e.clientWidth,e.clientHeight)}catch(e){console.error("窗口大小调整错误:",e)}},rotateCameraLeft(){const e=this.nonReactiveObjects.controls;e&&(e.rotateLeft(Math.PI/12),e.update())},rotateCameraRight(){const e=this.nonReactiveObjects.controls;e&&(e.rotateLeft(-Math.PI/12),e.update())},zoomIn(){const e=this.nonReactiveObjects.controls;e&&(e.dollyIn(1.2),e.update())},zoomOut(){const e=this.nonReactiveObjects.controls;e&&(e.dollyOut(1.2),e.update())},resetCamera(){const e=this.nonReactiveObjects.camera,t=this.nonReactiveObjects.controls;e&&t&&(e.position.copy(this.initialCameraPosition),e.lookAt(0,0,0),t.target.set(0,0,0),t.update())},updateModelInfo(e){let t=0,n=0,r=0;e.traverse(o=>{if(o instanceof Ru){if(o.geometry instanceof _f){const s=o.geometry;t+=s.attributes.position?s.attributes.position.count:0,n+=s.index?s.index.count/3:0}Array.isArray(o.material)?r+=o.material.length:o.material&&r++}});const i=_r(new Fs().setFromObject(e)),a=_r(new lr);i.getSize(a),this.modelInfo={vertices:t,faces:n,materials:r,dimensions:`${a.x.toFixed(2)} x ${a.y.toFixed(2)} x ${a.z.toFixed(2)}`}},captureScreenshot(){try{const e=this.nonReactiveObjects.scene,t=this.nonReactiveObjects.camera,n=this.nonReactiveObjects.renderer;if(!n||!e||!t)throw new Error("渲染器未初始化");n.render(e,t);const i=n.domElement.toDataURL("image/png"),a=document.createElement("a");a.download=`model-screenshot-${new Date().getTime()}.png`,a.href=i,a.click(),console.log("截图已保存")}catch(e){console.error("截图错误:",e),this.loadError=`截图错误: ${e.message}`}},toggleGrid(){const e=this.nonReactiveObjects.scene;if(e){const t=e.getObjectByName("gridHelper");t&&(t.visible=this.showGrid)}},toggleAxes(){const e=this.nonReactiveObjects.scene;if(e){const t=e.getObjectByName("axesHelper");t&&(t.visible=this.showAxes)}},toggleBoundingBox(){const e=this.nonReactiveObjects.scene;if(e){const t=e.getObjectByName("modelBoxHelper");t&&(t.visible=this.showBoundingBox)}}}}),gze={class:"model-container"},yze={key:0,class:"loading-indicator"},_ze={key:1,class:"error-message"},bze={class:"model-selector"},wze={class:"model-buttons"},xze=["onClick","title"],Sze={class:"controls-panel"},Cze={class:"control-group"},Tze={key:0,class:"control-group"},Mze={class:"control-group"},kze={key:2,class:"performance-monitor"},Eze={key:3,class:"model-info-panel"},Aze={class:"info-item"},Pze={class:"info-item"},Ize={class:"info-item"},Lze={class:"info-item"};function Dze(e,t,n,r,i,a){return te(),me("div",gze,[t[22]||(t[22]=V("div",{id:"model-viewer"},null,-1)),e.modelLoaded?Ge("",!0):(te(),me("div",yze,[t[10]||(t[10]=V("div",{class:"spinner"},null,-1)),V("span",null,"加载中... "+Xe(e.loadingProgress)+"%",1)])),e.loadError?(te(),me("div",_ze,Xe(e.loadError),1)):Ge("",!0),V("div",bze,[(te(!0),me(hn,null,Kn(e.modelCategories,(o,s)=>(te(),me("div",{class:"model-category",key:s},[V("h3",null,Xe(s),1),V("div",wze,[(te(!0),me(hn,null,Kn(o,l=>(te(),me("button",{key:l.path,onClick:c=>e.loadSpecificModel(l.path),class:se({active:e.currentModel===l.path}),title:l.name},Xe(l.name),11,xze))),128))])]))),128))]),V("div",Sze,[V("div",Cze,[t[14]||(t[14]=V("h3",null,"显示选项",-1)),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=o=>e.showGrid=o),onChange:t[1]||(t[1]=(...o)=>e.toggleGrid&&e.toggleGrid(...o))},null,544),[[Fu,e.showGrid]]),t[11]||(t[11]=$t(" 显示网格 "))]),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=o=>e.showAxes=o),onChange:t[3]||(t[3]=(...o)=>e.toggleAxes&&e.toggleAxes(...o))},null,544),[[Fu,e.showAxes]]),t[12]||(t[12]=$t(" 显示坐标轴 "))]),V("label",null,[In(V("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=o=>e.showBoundingBox=o),onChange:t[5]||(t[5]=(...o)=>e.toggleBoundingBox&&e.toggleBoundingBox(...o))},null,544),[[Fu,e.showBoundingBox]]),t[13]||(t[13]=$t(" 显示包围盒 "))])]),e.hasAnimations?(te(),me("div",Tze,[t[15]||(t[15]=V("h3",null,"动画控制",-1)),V("button",{onClick:t[6]||(t[6]=(...o)=>e.toggleAnimation&&e.toggleAnimation(...o))},Xe(e.isPlaying?"暂停":"播放"),1),In(V("input",{type:"range","onUpdate:modelValue":t[7]||(t[7]=o=>e.animationSpeed=o),min:"0.1",max:"2",step:"0.1",onInput:t[8]||(t[8]=(...o)=>e.updateAnimationSpeed&&e.updateAnimationSpeed(...o))},null,544),[[qo,e.animationSpeed]]),V("span",null,"速度: "+Xe(e.animationSpeed)+"x",1)])):Ge("",!0),V("div",Mze,[t[16]||(t[16]=V("h3",null,"工具",-1)),V("button",{onClick:t[9]||(t[9]=(...o)=>e.captureScreenshot&&e.captureScreenshot(...o))},"截图")])]),e.showPerformance?(te(),me("div",kze,[V("div",null,"FPS: "+Xe(e.fps),1),V("div",null,"内存: "+Xe(e.memoryUsage)+" MB",1)])):Ge("",!0),e.modelLoaded?(te(),me("div",Eze,[t[21]||(t[21]=V("h3",null,"模型信息",-1)),V("div",Aze,[t[17]||(t[17]=V("span",null,"顶点数量:",-1)),V("span",null,Xe(e.modelInfo.vertices),1)]),V("div",Pze,[t[18]||(t[18]=V("span",null,"面片数量:",-1)),V("span",null,Xe(e.modelInfo.faces),1)]),V("div",Ize,[t[19]||(t[19]=V("span",null,"材质数量:",-1)),V("span",null,Xe(e.modelInfo.materials),1)]),V("div",Lze,[t[20]||(t[20]=V("span",null,"尺寸(m):",-1)),V("span",null,Xe(e.modelInfo.dimensions),1)])])):Ge("",!0)])}const Rze=Ms(mze,[["render",Dze],["__scopeId","data-v-a0ef695a"]]),Oze={id:"container"},zze={id:"gui"},Bze={key:0,style:{color:"#aaa","text-align":"center"}},Fze=["onMouseenter","onClick"],Nze={key:0,class:"info-panel"},$ze={class:"info-panel-header"},Vze={class:"info-panel-body"},Hze={key:0},jze={key:1},Uze={key:0,class:"info-panel-footer"},Wze={__name:"Demo",setup(e){const t=le(0),n=le(["1","2","3"]),r=le(null),i=le(!1),a=le(""),o=_i([]),s=le([]),l=le(null),c=le(null),h=le(!1),f=le(null),p={scene:new Kw,camera:null,orbitControls:null,meshNameList:["6.gltf","阀门.gltf","阀门红色材质.gltf","阀门2.gltf","K60发电机.gltf"],mesh:null,gltfLoader:new Ny,fBXLoader:new uz,box:new Fs,center:new lr,dis:0},v=X(()=>a.value?o.value.filter(J=>(J.name||"").toLowerCase().includes(a.value.toLowerCase())):o.value),_=new WeakMap,b=new z7({color:16746496});Un(()=>{const J=document.getElementById("container");p.scene.background=new ra(15658734);const q=J.clientWidth,ce=J.clientHeight,re=new _0(16777215,.7),ee=new Uc(16777215,.8);ee.position.set(10,20,10),p.scene.add(re,ee),p.camera=new y0(45,q/ce,.1,2e3),p.camera.position.set(10,10,10),p.camera.lookAt(0,0,0);const oe=new qw({antialias:!0,alpha:!0});oe.setSize(q,ce),oe.setPixelRatio(Math.min(window.devicePixelRatio,2)),J.appendChild(oe.domElement),p.orbitControls=new mx(p.camera,oe.domElement),p.orbitControls.enableDamping=!0,p.orbitControls.dampingFactor=.05,p.orbitControls.screenSpacePanning=!0,p.orbitControls.minDistance=5,p.orbitControls.maxDistance=50,p.orbitControls.maxPolarAngle=Math.PI/2,p.orbitControls.target.set(0,0,0);try{C()}catch(Ce){console.error("初始加载模型失败",Ce),r.value&&(r.value.innerHTML='<span style="color: #f22">初始加载失败，将显示默认模型</span>'),createDefaultMesh()}window.onresize=()=>{const Ce=J.clientWidth,Ve=J.clientHeight;p.camera.aspect=Ce/Ve,p.camera.updateProjectionMatrix(),oe.setSize(Ce,Ve)};const be=new qO,we=new na;oe.domElement.addEventListener("pointerdown",Ce=>{if(Ce.button!==0)return;we.x=Ce.offsetX/oe.domElement.clientWidth*2-1,we.y=-(Ce.offsetY/oe.domElement.clientHeight)*2+1,be.setFromCamera(we,p.camera);const Ve=be.intersectObjects(o.value,!1);if(Ve.length>0){const et=Ve[0].object;Ce.ctrlKey||Ce.shiftKey?s.value.includes(et)?(s.value=s.value.filter(Ee=>Ee!==et),H(et),_.has(et)&&(et.material=_.get(et))):(s.value.push(et),j(et)):(s.value.forEach(Ee=>{H(Ee),_.has(Ee)&&(Ee.material=_.get(Ee))}),s.value=[et],U(et))}});function pe(){requestAnimationFrame(pe),p.orbitControls.update(),oe.render(p.scene,p.camera)}pe()});function C(){if(i.value){console.warn("模型正在加载中，请稍后再试");return}if(t.value<0||t.value>=p.meshNameList.length){console.error("无效的模型索引:",t.value);return}let J=p.meshNameList[t.value];if(!J){console.error("模型名称为空");return}r.value&&(r.value.innerHTML="开始加载模型: "+J),i.value=!0;let q=`/${J}`;(J.endsWith(".fbx")?p.fBXLoader:p.gltfLoader).load(q,re=>{try{if(!re)throw new Error("加载结果为空");const ee=re.isObject3D?re:re.scene;if(!ee)throw new Error("无法获取有效的模型组");const oe=new Fs().setFromObject(ee),be=new lr,we=new lr;oe.getSize(be),oe.getCenter(we);const pe=Math.max(be.x,be.y,be.z),Ce=pe>0?10/pe:1;ee.scale.setScalar(Ce),ee.position.copy(we).multiplyScalar(-Ce),p.mesh&&(p.scene.remove(p.mesh),I(p.mesh)),p.mesh=ee,p.scene.add(ee),ee.position.sub(we),T(ee);const Ve=pe*2;p.camera.position.set(Ve,Ve,Ve),p.camera.lookAt(0,0,0),p.orbitControls.target.set(0,0,0),p.orbitControls.update(),r.value&&(r.value.innerHTML="模型加载完成: "+J),i.value=!1}catch(ee){console.error("处理模型时出错:",ee),i.value=!1,createDefaultMesh()}},re=>{if(!r.value)return;const ee=re.total?Math.floor(re.loaded/re.total*100):0;r.value.innerHTML=ee>=100?"处理模型中...":ee+"% 已加载"},re=>{console.error("模型加载失败",re),i.value=!1,createDefaultMesh()})}function T(J){const q=[];J.traverse(ce=>{ce.isMesh&&q.push(ce)}),o.value=q}function E(J){if(i.value){r.value&&(r.value.innerHTML='<span style="color: #f22">请等待当前模型加载完成</span>');return}t.value=J}function A(){W(),C()}function I(J){J.traverse(q=>{q.isMesh&&(q.geometry&&q.geometry.dispose(),q.material&&(Array.isArray(q.material)?q.material.forEach(ce=>ce.dispose()):q.material.dispose()))})}function O(J){c.value&&_.has(c.value)&&(c.value.material=_.get(c.value)),c.value=J,J&&J.isMesh&&(_.has(J)||_.set(J,J.material),J.material=b)}function B(J){if(!J)return;const q=new Fs().setFromObject(J),ce=new lr;q.getCenter(ce);const re=new lr;q.getSize(re);const be=Math.max(re.x,re.y,re.z)*1.5/Math.tan(p.camera.fov*Math.PI/360),we=p.camera.position.clone().sub(p.orbitControls.target).normalize(),pe=ce.clone().add(we.multiplyScalar(be)),Ce=p.camera.position.clone(),Ve=p.orbitControls.target.clone(),et=pe,Ee=ce;let Je=0;const Ue=.8,yt=()=>{Je+=1/60/Ue,Je>1&&(Je=1),p.camera.position.lerpVectors(Ce,et,Je),p.orbitControls.target.lerpVectors(Ve,Ee,Je),p.orbitControls.update(),Je<1&&requestAnimationFrame(yt)};yt()}function N(J){if(!J)return;J.position_0||(J.position_0=J.position.clone());const q=new Fs().setFromObject(J),ce=new lr;q.getCenter(ce);const re=new lr;p.box.setFromObject(p.mesh),p.box.getCenter(re);const oe=ce.clone().sub(re).normalize().multiplyScalar(2.5),be=J.position.clone(),we=J.position_0.clone().add(oe);let pe=0;const Ce=.6;function Ve(){pe+=1/60/Ce,pe>1&&(pe=1),J.position.lerpVectors(be,we,pe),pe<1?requestAnimationFrame(Ve):f.value=J}Ve()}function H(J){if(!J||!J.position_0)return;const q=J.position.clone(),ce=J.position_0.clone();let re=0;const ee=.6;function oe(){re+=1/60/ee,re>1&&(re=1),J.position.lerpVectors(q,ce,re),re<1?requestAnimationFrame(oe):f.value=null}oe()}function j(J){N(J),l.value=J,h.value=!0}function W(){s.value.forEach(J=>{H(J),_.has(J)&&(J.material=_.get(J))}),s.value=[],l.value=null,f.value=null,h.value=!1}function U(J){s.value.forEach(q=>{H(q),_.has(q)&&(q.material=_.get(q))}),s.value=[J],l.value=J,h.value=!0,B(J),N(J)}function Y(J,q){q&&(q.ctrlKey||q.shiftKey)?s.value.includes(J)?(s.value=s.value.filter(ce=>ce!==J),H(J),_.has(J)&&(J.material=_.get(J))):(s.value.push(J),j(J)):U(J)}function ie(J){if(!J.geometry)return{x:0,y:0,z:0};const q=new Fs().setFromObject(J),ce=new lr;return q.getSize(ce),ce}const ue=document.getElementById("container");return ue&&ue.addEventListener("mouseleave",()=>{c.value&&_.has(c.value)&&(c.value.material=_.get(c.value),c.value=null)}),(J,q)=>{var be;const ce=Xt("el-button"),re=Xt("el-collapse-item"),ee=Xt("el-input"),oe=Xt("el-collapse");return te(),me("div",Oze,[V("div",zze,[V("div",{ref_key:"info",ref:r},"加载模型中...",512),de(oe,{modelValue:n.value,"onUpdate:modelValue":q[3]||(q[3]=we=>n.value=we)},{default:ge(()=>[de(re,{title:"选择模型",name:"1"},{default:ge(()=>[de(ce,{disabled:i.value,onClick:q[0]||(q[0]=we=>E(0))},{default:ge(()=>q[6]||(q[6]=[$t("船体模型")])),_:1},8,["disabled"])]),_:1}),de(re,{title:"部件列表",name:"2"},{default:ge(()=>[de(ee,{modelValue:a.value,"onUpdate:modelValue":q[1]||(q[1]=we=>a.value=we),placeholder:"搜索部件名称...",size:"small",clearable:"",style:{"margin-bottom":"8px"}},null,8,["modelValue"]),de(ce,{size:"small",style:{"margin-bottom":"8px"},onClick:W,disabled:s.value.length===0},{default:ge(()=>q[7]||(q[7]=[$t("一键还原所有部件")])),_:1},8,["disabled"]),de(ce,{onClick:A,size:"small"},{default:ge(()=>q[8]||(q[8]=[$t("重置视角")])),_:1}),v.value.length===0?(te(),me("div",Bze," 暂无可用部件 ")):Ge("",!0),(te(!0),me(hn,null,Kn(v.value,we=>(te(),me("div",{key:we.uuid,class:se(["submesh-list-item",{active:s.value.includes(we),hovered:c.value===we}]),onMouseenter:pe=>O(we),onMouseleave:q[2]||(q[2]=pe=>O(null)),onClick:pe=>Y(we,pe)},[V("span",null,Xe(we.name||"未命名部件"),1)],42,Fze))),128))]),_:1})]),_:1},8,["modelValue"])]),h.value&&l.value?(te(),me("div",Nze,[V("div",$ze,[q[9]||(q[9]=V("span",null,"部件详情",-1)),de(ce,{icon:"el-icon-close",size:"mini",circle:"",onClick:q[4]||(q[4]=we=>h.value=!1),style:{float:"right"}})]),V("div",Vze,[V("p",null,[q[10]||(q[10]=V("b",null,"名称：",-1)),$t(Xe(l.value.name||"未命名部件"),1)]),V("p",null,[q[11]||(q[11]=V("b",null,"材质：",-1)),$t(Xe(((be=l.value.material)==null?void 0:be.type)||"未知"),1)]),V("p",null,[q[12]||(q[12]=V("b",null,"位置：",-1)),$t("X: "+Xe(l.value.position.x.toFixed(2))+" Y: "+Xe(l.value.position.y.toFixed(2))+" Z: "+Xe(l.value.position.z.toFixed(2)),1)]),V("p",null,[q[13]||(q[13]=V("b",null,"尺寸：",-1)),l.value.geometry?(te(),me("span",Hze,Xe(ie(l.value).x.toFixed(2))+" × "+Xe(ie(l.value).y.toFixed(2))+" × "+Xe(ie(l.value).z.toFixed(2)),1)):(te(),me("span",jze,"未知"))])]),f.value?(te(),me("div",Uze,[de(ce,{size:"small",onClick:q[5]||(q[5]=we=>H(f.value))},{default:ge(()=>q[14]||(q[14]=[$t("还原部件")])),_:1})])):Ge("",!0)])):Ge("",!0)])}}},Gze=Ms(Wze,[["__scopeId","data-v-214f28e0"]]),zX=x0("platform",()=>{const e=le(!0),t=le(5e3),n=le("normal"),r=le(null),i=le(!1),a=le("dark"),o=le("default"),s=le("zh-CN"),l=le([]),c=le({autoRefresh:!0,notificationSound:!0,animationEnabled:!0}),h=X(()=>{switch(n.value){case"normal":return"#10b981";case"warning":return"#f59e0b";case"error":return"#ef4444";default:return"#10b981"}}),f=X(()=>a.value==="dark");function p(){e.value=!e.value}function v(O){t.value=O}function _(O){n.value=O}function b(O){r.value=O}function C(){a.value=a.value==="dark"?"light":"dark"}function T(O){o.value=O}function E(O){l.value.push({...O,id:Date.now(),timestamp:new Date})}function A(){l.value=[]}function I(O){c.value={...c.value,...O}}return{isRealTime:e,refreshInterval:t,systemStatus:n,currentDevice:r,isLoading:i,theme:a,layout:o,language:s,notifications:l,userPreferences:c,statusColor:h,isDarkMode:f,toggleRealTime:p,setRefreshInterval:v,setSystemStatus:_,setCurrentDevice:b,toggleTheme:C,setLayout:T,addNotification:E,clearNotifications:A,updateUserPreferences:I}}),BX={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class R0{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Kze=new D7(-1,1,1,-1,0,1),cz=new _f;cz.setAttribute("position",new Rs([-1,3,0,-1,-1,0,3,-1,0],3));cz.setAttribute("uv",new Rs([0,2,0,0,2,0],2));class dz{constructor(t){this._mesh=new Ru(cz,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Kze)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class qze extends R0{constructor(t,n){super(),this.textureID=n!==void 0?n:"tDiffuse",t instanceof zc?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=l1.clone(t.uniforms),this.material=new zc({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new dz(this.material)}render(t,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class aV extends R0{constructor(t,n){super(),this.scene=t,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,n,r){const i=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);let o,s;this.inverse?(o=0,s=1):(o=1,s=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),a.buffers.stencil.setClear(s),a.buffers.stencil.setLocked(!0),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(i.EQUAL,1,4294967295),a.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.buffers.stencil.setLocked(!0)}}class Zze extends R0{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Yze{constructor(t,n){if(this.renderer=t,n===void 0){const r=t.getSize(new na);this._pixelRatio=t.getPixelRatio(),this._width=r.width,this._height=r.height,n=new Lc(this._width*this._pixelRatio,this._height*this._pixelRatio),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new qze(BX),this.clock=new ZO}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,n){this.passes.splice(n,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const n=this.passes.indexOf(t);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(t){for(let n=t+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;for(let i=0,a=this.passes.length;i<a;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),o.needsSwap){if(r){const s=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}aV!==void 0&&(o instanceof aV?r=!0:o instanceof Zze&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(t){if(t===void 0){const n=this.renderer.getSize(new na);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,n){this._width=t,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let a=0;a<this.passes.length;a++)this.passes[a].setSize(r,i)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Xze extends R0{constructor(t,n,r,i,a){super(),this.scene=t,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=a!==void 0?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ra}render(t,n,r){const i=t.autoClear;t.autoClear=!1;let a,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),a=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,a),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),t.autoClear=i}}class df extends R0{constructor(t,n,r,i){super(),this.renderScene=n,this.renderCamera=r,this.selectedObjects=i!==void 0?i:[],this.visibleEdgeColor=new ra(1,1,1),this.hiddenEdgeColor=new ra(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=t!==void 0?new na(t.x,t.y):new na(256,256);const a=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Lc(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new qae,this.depthMaterial.side=sf,this.depthMaterial.depthPacking=Zae,this.depthMaterial.blending=eN,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=sf,this.prepareMaskMaterial.fragmentShader=h(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Lc(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Lc(a,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Lc(a,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Lc(Math.round(a/2),Math.round(o/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Lc(a,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Lc(Math.round(a/2),Math.round(o/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const s=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(s),this.separableBlurMaterial1.uniforms.texSize.value.set(a,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(a/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial();const c=BX;this.copyUniforms=l1.clone(c.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new zc({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:eN,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ra,this.oldClearAlpha=1,this.fsQuad=new dz(null),this.tempPulseColor1=new ra,this.tempPulseColor2=new ra,this.textureMatrix=new Ta;function h(f,p){const v=p.isPerspectiveCamera?"perspective":"orthographic";return f.replace(/DEPTH_TO_VIEW_Z/g,v+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(t,n){this.renderTargetMaskBuffer.setSize(t,n),this.renderTargetDepthBuffer.setSize(t,n);let r=Math.round(t/this.downSampleRatio),i=Math.round(n/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,i),this.renderTargetBlurBuffer1.setSize(r,i),this.renderTargetEdgeBuffer1.setSize(r,i),this.separableBlurMaterial1.uniforms.texSize.value.set(r,i),r=Math.round(r/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(r,i),this.renderTargetEdgeBuffer2.setSize(r,i),this.separableBlurMaterial2.uniforms.texSize.value.set(r,i)}changeVisibilityOfSelectedObjects(t){const n=this._visibilityCache;function r(i){i.isMesh&&(t===!0?i.visible=n.get(i):(n.set(i,i.visible),i.visible=t))}for(let i=0;i<this.selectedObjects.length;i++)this.selectedObjects[i].traverse(r)}changeVisibilityOfNonSelectedObjects(t){const n=this._visibilityCache,r=[];function i(o){o.isMesh&&r.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(i);function a(o){if(o.isMesh||o.isSprite){let s=!1;for(let l=0;l<r.length;l++)if(r[l].id===o.id){s=!0;break}if(s===!1){const l=o.visible;(t===!1||n.get(o)===!0)&&(o.visible=t),n.set(o,l)}}else(o.isPoints||o.isLine)&&(t===!0?o.visible=n.get(o):(n.set(o,o.visible),o.visible=t))}this.renderScene.traverse(a)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(t,n,r,i,a){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const o=t.autoClear;t.autoClear=!1,a&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const s=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=s,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=df.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=df.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=df.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=df.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,a&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(r),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=r.texture,t.setRenderTarget(null),this.fsQuad.render(t))}getPrepareMaskMaterial(){return new zc({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new na(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new zc({uniforms:{maskTexture:{value:null},texSize:{value:new na(.5,.5)},visibleEdgeColor:{value:new lr(1,1,1)},hiddenEdgeColor:{value:new lr(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(t){return new zc({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new na(.5,.5)},direction:{value:new na(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new zc({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Yae,depthTest:!1,depthWrite:!1,transparent:!0})}}df.BlurDirectionX=new na(1,0);df.BlurDirectionY=new na(0,1);const y2={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new na(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},_2={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new na(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},LP={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new na(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};class Jze extends R0{constructor(t,n){super(),this.edgesRT=new Lc(t,n,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Lc(t,n,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const r=this,i=new Image;i.src=this.getAreaTexture(),i.onload=function(){r.areaTexture.needsUpdate=!0},this.areaTexture=new aT,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=i,this.areaTexture.minFilter=B7,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const a=new Image;a.src=this.getSearchTexture(),a.onload=function(){r.searchTexture.needsUpdate=!0},this.searchTexture=new aT,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=a,this.searchTexture.magFilter=tN,this.searchTexture.minFilter=tN,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=l1.clone(y2.uniforms),this.uniformsEdges.resolution.value.set(1/t,1/n),this.materialEdges=new zc({defines:Object.assign({},y2.defines),uniforms:this.uniformsEdges,vertexShader:y2.vertexShader,fragmentShader:y2.fragmentShader}),this.uniformsWeights=l1.clone(_2.uniforms),this.uniformsWeights.resolution.value.set(1/t,1/n),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new zc({defines:Object.assign({},_2.defines),uniforms:this.uniformsWeights,vertexShader:_2.vertexShader,fragmentShader:_2.fragmentShader}),this.uniformsBlend=l1.clone(LP.uniforms),this.uniformsBlend.resolution.value.set(1/t,1/n),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new zc({uniforms:this.uniformsBlend,vertexShader:LP.vertexShader,fragmentShader:LP.fragmentShader}),this.needsSwap=!1,this.fsQuad=new dz(null)}render(t,n,r){this.uniformsEdges.tDiffuse.value=r.texture,this.fsQuad.material=this.materialEdges,t.setRenderTarget(this.edgesRT),this.clear&&t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialWeights,t.setRenderTarget(this.weightsRT),this.clear&&t.clear(),this.fsQuad.render(t),this.uniformsBlend.tColor.value=r.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.clear&&t.clear(),this.fsQuad.render(t))}setSize(t,n){this.edgesRT.setSize(t,n),this.weightsRT.setSize(t,n),this.materialEdges.uniforms.resolution.value.set(1/t,1/n),this.materialWeights.uniforms.resolution.value.set(1/t,1/n),this.materialBlend.uniforms.resolution.value.set(1/t,1/n)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}const Qze={class:"digital-twin-monitor"},e4e={class:"model-viewer-container"},t4e={key:0,class:"loading-indicator"},n4e={key:1,class:"error-message"},r4e={class:"control-panel"},i4e={class:"panel-section"},a4e={class:"model-buttons"},o4e={class:"panel-section"},s4e={class:"button-group"},l4e={class:"panel-section"},u4e={class:"button-group"},c4e={class:"panel-section"},d4e={key:0,class:"part-info"},h4e={class:"part-detail"},f4e={class:"value"},p4e={class:"part-detail"},v4e={class:"part-detail"},m4e={class:"value"},g4e={class:"part-detail"},y4e={class:"value"},_4e={key:1,class:"no-part-selected"},b4e={__name:"DigitalTwinMonitor",setup(e){const t=le(!1),n=le(0),r=le(null),i=le(null),a=le("K60发电机.gltf"),o=le(!0),s=le(!1),l=le(0),c=le(null);let h,f,p,v,_=null,b,C,T,E,A,I=null,O=new Map,B=[];const N=[{name:"K60发电机",path:"K60发电机.gltf"},{name:"热交换器",path:"heatExchanger.fbx"},{name:"阀门",path:"阀门.gltf"}],H=()=>{if(!i.value)return;const pe=i.value;h=new Kw,h.background=new ra(1184274),f=new y0(45,pe.clientWidth/pe.clientHeight,.1,1e3),f.position.set(5,5,10),p=new qw({antialias:!0,alpha:!0}),p.setSize(pe.clientWidth,pe.clientHeight),p.setPixelRatio(Math.min(window.devicePixelRatio,2)),p.shadowMap.enabled=!0,p.shadowMap.type=UO,p.outputColorSpace=WO,p.toneMapping=GO,pe.appendChild(p.domElement),v=new mx(f,p.domElement),v.enableDamping=!0,v.dampingFactor=.05;const Ce=new _0(16777215,.4);h.add(Ce);const Ve=new Uc(16777215,1);Ve.position.set(5,10,7.5),Ve.castShadow=!0,Ve.shadow.mapSize.width=2048,Ve.shadow.mapSize.height=2048,h.add(Ve);const et=new Uc(16777215,.4);et.position.set(-5,5,-7.5),h.add(et),T=new KO(20,20,5592405,3355443),T.visible=o.value,h.add(T),b=new Yze(p);const Ee=new Xze(h,f);b.addPass(Ee),C=new df(new na(pe.clientWidth,pe.clientHeight),h,f),C.edgeStrength=3,C.edgeGlow=0,C.edgeThickness=1,C.pulsePeriod=0,C.visibleEdgeColor.set("#ffffff"),C.hiddenEdgeColor.set("#190a05"),b.addPass(C);const Je=new Jze(pe.clientWidth*p.getPixelRatio(),pe.clientHeight*p.getPixelRatio());b.addPass(Je),E=new qO,A=new na,pe.addEventListener("mousemove",ee),pe.addEventListener("click",oe),be()},j=async()=>{try{t.value=!0,r.value=null,n.value=0,_&&(h.remove(_),_=null);const pe=new sT;pe.setDecoderPath("/draco/");const Ce=new Ny;Ce.setDRACOLoader(pe),_=(await new Promise((et,Ee)=>{Ce.load(a.value,et,Je=>{n.value=Math.round(Je.loaded/Je.total*100)},Ee)})).scene,W(_),U(_),_.traverse(et=>{if(et.isMesh&&(et.castShadow=!0,et.receiveShadow=!0,!(et.material instanceof Dc))){const Ee=new Dc({color:et.material.color||8158332,metalness:.8,roughness:.4});et.material=Ee}}),h.add(_),ie(_),re(),t.value=!1}catch(pe){console.error("加载模型失败:",pe),r.value="加载模型失败: "+pe.message,t.value=!1}},W=pe=>{},U=pe=>{B=[],pe&&pe.traverse(Ce=>{if(Ce.isMesh){const Ve=Math.floor(Math.random()*40)+40,et=(Math.random()*4+1).toFixed(2);let Ee="normal",Je="正常";Ve>75?(Ee="warning",Je="警告"):Ve>85&&(Ee="error",Je="异常"),B.push({id:Ce.uuid,name:Ce.name||`部件${B.length+1}`,node:Ce,status:Ee,statusText:Je,temperature:Ve,vibration:et})}})},Y=pe=>{if(!pe){c.value=null,C.selectedObjects=[];return}c.value=pe,C.selectedObjects=[pe.node]},ie=pe=>{O.clear(),pe.traverse(Ce=>{Ce.isMesh&&O.set(Ce.uuid,Ce.position.clone())})},ue=()=>{_&&_.traverse(pe=>{if(pe.isMesh){const Ce=O.get(pe.uuid);if(Ce)if(s.value){const Ve=new lr(pe.position.x-_.position.x,pe.position.y-_.position.y,pe.position.z-_.position.z).normalize();pe.position.copy(Ce.clone().add(Ve.multiplyScalar(l.value)))}else pe.position.copy(Ce)}})},J=()=>{s.value=!s.value,s.value?l.value=1:l.value=0,ue()},q=pe=>{a.value=pe,j()},ce=()=>{o.value=!o.value,T&&(T.visible=o.value)},re=()=>{if(!f||!v||!_)return;const pe=new Fs().setFromObject(_),Ce=new lr,Ve=new lr;pe.getSize(Ce),pe.getCenter(Ve);const et=Math.max(Ce.x,Ce.y,Ce.z),Ee=f.fov*(Math.PI/180),Je=et/2/Math.tan(Ee/2)*1.5;f.position.set(Ve.x+Je,Ve.y+Je,Ve.z+Je),f.lookAt(Ve),f.updateProjectionMatrix(),v.target.copy(Ve),v.update()},ee=pe=>{const Ce=p.domElement.getBoundingClientRect();A.x=(pe.clientX-Ce.left)/Ce.width*2-1,A.y=-((pe.clientY-Ce.top)/Ce.height)*2+1},oe=()=>{if(!E||!h||!f)return;E.setFromCamera(A,f);const pe=E.intersectObjects(h.children,!0);if(pe.length>0)for(const Ce of pe){const Ve=B.find(et=>et.node===Ce.object);if(Ve){Y(Ve);return}}else Y(null)},be=()=>{I=requestAnimationFrame(be),v&&v.update(),b?b.render():p&&h&&f&&p.render(h,f)},we=()=>{if(!f||!p||!b||!i.value)return;const pe=i.value;f.aspect=pe.clientWidth/pe.clientHeight,f.updateProjectionMatrix(),p.setSize(pe.clientWidth,pe.clientHeight),b.setSize(pe.clientWidth,pe.clientHeight)};return Un(()=>{bn(()=>{H(),j(),window.addEventListener("resize",we)})}),ui(()=>{if(window.removeEventListener("resize",we),I&&cancelAnimationFrame(I),h&&h.traverse(pe=>{pe.geometry&&pe.geometry.dispose(),pe.material&&(Array.isArray(pe.material)?pe.material.forEach(Ce=>Ce.dispose()):pe.material.dispose())}),p){p.dispose();const pe=i.value;pe&&pe.contains(p.domElement)&&pe.removeChild(p.domElement)}v&&v.dispose()}),(pe,Ce)=>{const Ve=Xt("el-button"),et=Xt("el-slider");return te(),me("div",Qze,[V("div",e4e,[V("div",{id:"model-viewer",ref_key:"modelViewerRef",ref:i},null,512),t.value?(te(),me("div",t4e,[Ce[1]||(Ce[1]=V("div",{class:"spinner"},null,-1)),V("span",null,"加载中... "+Xe(n.value)+"%",1)])):Ge("",!0),r.value?(te(),me("div",n4e,[V("div",null,Xe(r.value),1),V("button",{onClick:j,class:"retry-button"},"重试加载")])):Ge("",!0)]),V("div",r4e,[V("div",i4e,[Ce[2]||(Ce[2]=V("h3",null,"模型选择",-1)),V("div",a4e,[(te(),me(hn,null,Kn(N,Ee=>de(Ve,{key:Ee.path,onClick:Je=>q(Ee.path),type:a.value===Ee.path?"primary":"",size:"small"},{default:ge(()=>[$t(Xe(Ee.name),1)]),_:2},1032,["onClick","type"])),64))])]),V("div",o4e,[Ce[4]||(Ce[4]=V("h3",null,"视图控制",-1)),V("div",s4e,[de(Ve,{onClick:re,size:"small"},{default:ge(()=>Ce[3]||(Ce[3]=[$t("重置视图")])),_:1}),de(Ve,{onClick:ce,size:"small"},{default:ge(()=>[$t(Xe(o.value?"隐藏网格":"显示网格"),1)]),_:1})])]),V("div",l4e,[Ce[5]||(Ce[5]=V("h3",null,"模型透视",-1)),V("div",u4e,[de(Ve,{onClick:J,size:"small"},{default:ge(()=>[$t(Xe(s.value?"合并模型":"拆解模型"),1)]),_:1}),s.value?(te(),ft(et,{key:0,modelValue:l.value,"onUpdate:modelValue":Ce[0]||(Ce[0]=Ee=>l.value=Ee),min:0,max:2,step:.1,onInput:ue},null,8,["modelValue"])):Ge("",!0)])]),V("div",c4e,[Ce[10]||(Ce[10]=V("h3",null,"部件信息",-1)),c.value?(te(),me("div",d4e,[V("div",h4e,[Ce[6]||(Ce[6]=V("span",{class:"label"},"名称:",-1)),V("span",f4e,Xe(c.value.name),1)]),V("div",p4e,[Ce[7]||(Ce[7]=V("span",{class:"label"},"状态:",-1)),V("span",{class:se(["value","status-"+c.value.status])},Xe(c.value.statusText),3)]),V("div",v4e,[Ce[8]||(Ce[8]=V("span",{class:"label"},"温度:",-1)),V("span",m4e,Xe(c.value.temperature)+"°C",1)]),V("div",g4e,[Ce[9]||(Ce[9]=V("span",{class:"label"},"振动:",-1)),V("span",y4e,Xe(c.value.vibration)+" Hz",1)])])):(te(),me("div",_4e," 点击模型部件查看详情 "))])])])}}},DP=Ms(b4e,[["__scopeId","data-v-3a8cfb5a"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oR=function(e,t){return oR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},oR(e,t)};function xn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oR(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var w4e=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),x4e=function(){function e(){this.browser=new w4e,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Ir=new x4e;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ir.wxa=!0,Ir.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ir.worker=!0:!Ir.hasGlobalWindow||"Deno"in window?(Ir.node=!0,Ir.svgSupported=!0):S4e(navigator.userAgent,Ir);function S4e(e,t){var n=t.browser,r=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),o&&(n.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}var hz=12,C4e="sans-serif",am=hz+"px "+C4e,T4e=20,M4e=100,k4e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function E4e(e){var t={};if(typeof JSON>"u")return t;for(var n=0;n<e.length;n++){var r=String.fromCharCode(n+32),i=(e.charCodeAt(n)-T4e)/M4e;t[r]=i}return t}var A4e=E4e(k4e),$f={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(n,r){if(!e){var i=$f.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==r&&(t=e.font=r||am),e.measureText(n);n=n||"",r=r||am;var a=/((?:\d+)?\.?\d*)px/.exec(r),o=a&&+a[1]||hz,s=0;if(r.indexOf("mono")>=0)s=o*n.length;else for(var l=0;l<n.length;l++){var c=A4e[n[l]];s+=c==null?o:c*o}return{width:s}}}(),loadImage:function(e,t,n){var r=new Image;return r.onload=t,r.onerror=n,r.src=e,r}},FX=Vf(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),NX=Vf(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),gx=Object.prototype.toString,_k=Array.prototype,P4e=_k.forEach,I4e=_k.filter,fz=_k.slice,L4e=_k.map,oV=(function(){}).constructor,b2=oV?oV.prototype:null,pz="__proto__",D4e=2311;function $X(){return D4e++}function vz(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function wr(e){if(e==null||typeof e!="object")return e;var t=e,n=gx.call(e);if(n==="[object Array]"){if(!A1(e)){t=[];for(var r=0,i=e.length;r<i;r++)t[r]=wr(e[r])}}else if(NX[n]){if(!A1(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var r=0,i=e.length;r<i;r++)t[r]=e[r]}}}else if(!FX[n]&&!A1(e)&&!s0(e)){t={};for(var o in e)e.hasOwnProperty(o)&&o!==pz&&(t[o]=wr(e[o]))}return t}function Kr(e,t,n){if(!fr(t)||!fr(e))return n?wr(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==pz){var i=e[r],a=t[r];fr(a)&&fr(i)&&!Vn(a)&&!Vn(i)&&!s0(a)&&!s0(i)&&!sV(a)&&!sV(i)&&!A1(a)&&!A1(i)?Kr(i,a,n):(n||!(r in e))&&(e[r]=wr(t[r]))}return e}function Pn(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&n!==pz&&(e[n]=t[n]);return e}function hi(e,t,n){for(var r=va(t),i=0,a=r.length;i<a;i++){var o=r[i];e[o]==null&&(e[o]=t[o])}return e}function pi(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1}function R4e(e,t){var n=e.prototype;function r(){}r.prototype=t.prototype,e.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);e.prototype.constructor=e,e.superClass=t}function ld(e,t,n){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&e[a]==null&&(e[a]=t[a])}else hi(e,t)}function qs(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function qe(e,t,n){if(e&&t)if(e.forEach&&e.forEach===P4e)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)}function Yn(e,t,n){if(!e)return[];if(!t)return mz(e);if(e.map&&e.map===L4e)return e.map(t,n);for(var r=[],i=0,a=e.length;i<a;i++)r.push(t.call(n,e[i],i,e));return r}function Vf(e,t,n,r){if(e&&t){for(var i=0,a=e.length;i<a;i++)n=t.call(r,n,e[i],i,e);return n}}function fo(e,t,n){if(!e)return[];if(!t)return mz(e);if(e.filter&&e.filter===I4e)return e.filter(t,n);for(var r=[],i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e)&&r.push(e[i]);return r}function va(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function O4e(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return e.apply(t,n.concat(fz.call(arguments)))}}var ur=b2&&Mr(b2.bind)?b2.call.bind(b2.bind):O4e;function bi(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(this,t.concat(fz.call(arguments)))}}function Vn(e){return Array.isArray?Array.isArray(e):gx.call(e)==="[object Array]"}function Mr(e){return typeof e=="function"}function Qn(e){return typeof e=="string"}function sR(e){return gx.call(e)==="[object String]"}function Wi(e){return typeof e=="number"}function fr(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function sV(e){return!!FX[gx.call(e)]}function Zs(e){return!!NX[gx.call(e)]}function s0(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function bk(e){return e.colorStops!=null}function z4e(e){return e.image!=null}function $T(e){return e!==e}function l0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)if(e[n]!=null)return e[n]}function Xr(e,t){return e??t}function E1(e,t,n){return e??t??n}function mz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return fz.apply(e,t)}function VX(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function ec(e,t){if(!e)throw new Error(t)}function Hc(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var HX="__ec_primitive__";function lR(e){e[HX]=!0}function A1(e){return e[HX]}var B4e=function(){function e(){this.data={}}return e.prototype.delete=function(t){var n=this.has(t);return n&&delete this.data[t],n},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,n){return this.data[t]=n,this},e.prototype.keys=function(){return va(this.data)},e.prototype.forEach=function(t){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)},e}(),jX=typeof Map=="function";function F4e(){return jX?new Map:new B4e}var N4e=function(){function e(t){var n=Vn(t);this.data=F4e();var r=this;t instanceof e?t.each(i):t&&qe(t,i);function i(a,o){n?r.set(a,o):r.set(o,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,n){return this.data.set(t,n),n},e.prototype.each=function(t,n){this.data.forEach(function(r,i){t.call(n,r,i)})},e.prototype.keys=function(){var t=this.data.keys();return jX?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function Dr(e){return new N4e(e)}function $4e(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];for(var i=e.length,r=0;r<t.length;r++)n[r+i]=t[r];return n}function wk(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&Pn(n,t),n}function UX(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function om(e,t){return e.hasOwnProperty(t)}function Jo(){}var V4e=180/Math.PI;function O0(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function H4e(e){return[e[0],e[1]]}function lV(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function j4e(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function U4e(e){return Math.sqrt(W4e(e))}function W4e(e){return e[0]*e[0]+e[1]*e[1]}function RP(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function G4e(e,t){var n=U4e(t);return n===0?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function uR(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var cR=uR;function K4e(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var ky=K4e;function OP(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function Ql(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function hy(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function fy(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Ig=function(){function e(t,n){this.target=t,this.topTarget=n&&n.topTarget}return e}(),q4e=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var n=t.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ig(n,t),"dragstart",t.event))},e.prototype._drag=function(t){var n=this._draggingTarget;if(n){var r=t.offsetX,i=t.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,n.drift(a,o,t),this.handler.dispatchToElement(new Ig(n,t),"drag",t.event);var s=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=s,n!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Ig(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Ig(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Ig(n,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ig(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),ou=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,n,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!t)return this;var o=this._$eventProcessor;n!=null&&o&&o.normalizeQuery&&(n=o.normalizeQuery(n)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=a[t].length-1,h=a[t][c];return h&&h.callAtLast?a[t].splice(c,0,l):a[t].push(l),this},e.prototype.isSilent=function(t){var n=this._$handlers;return!n||!n[t]||!n[t].length},e.prototype.off=function(t,n){var r=this._$handlers;if(!r)return this;if(!t)return this._$handlers={},this;if(n){if(r[t]){for(var i=[],a=0,o=r[t].length;a<o;a++)r[t][a].h!==n&&i.push(r[t][a]);r[t]=i}r[t]&&r[t].length===0&&delete r[t]}else delete r[t];return this},e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=n.length,s=i.length,l=0;l<s;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(t,c.query)))switch(o){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,n[0]);break;case 2:c.h.call(c.ctx,n[0],n[1]);break;default:c.h.apply(c.ctx,n);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=n.length,s=n[o-1],l=i.length,c=0;c<l;c++){var h=i[c];if(!(a&&a.filter&&h.query!=null&&!a.filter(t,h.query)))switch(o){case 0:h.h.call(s);break;case 1:h.h.call(s,n[0]);break;case 2:h.h.call(s,n[0],n[1]);break;default:h.h.apply(s,n.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}(),Z4e=Math.log(2);function dR(e,t,n,r,i,a){var o=r+"-"+i,s=e.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/Z4e);return e[n][l]}for(var c=r|1<<n,h=n+1;r&1<<h;)h++;for(var f=0,p=0,v=0;p<s;p++){var _=1<<p;_&i||(f+=(v%2?-1:1)*e[n][p]*dR(e,t-1,h,c,i|_,a),v++)}return a[o]=f,f}function uV(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},i=dR(n,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*dR(n,7,o===0?1:0,1<<o,1<<s,r)/i*t[o];return function(l,c,h){var f=c*a[6]+h*a[7]+1;l[0]=(c*a[0]+h*a[1]+a[2])/f,l[1]=(c*a[3]+h*a[4]+a[5])/f}}}var cV="___zrEVENTSAVED",zP=[];function Y4e(e,t,n,r,i){return hR(zP,t,r,i,!0)&&hR(e,n,zP[0],zP[1])}function hR(e,t,n,r,i){if(t.getBoundingClientRect&&Ir.domSupported&&!WX(t)){var a=t[cV]||(t[cV]={}),o=X4e(t,a),s=J4e(o,a,i);if(s)return s(e,n,r),!0}return!1}function X4e(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),e.appendChild(o),n.push(o)}return n}function J4e(e,t,n){for(var r=n?"invTrans":"trans",i=t[r],a=t.srcCoords,o=[],s=[],l=!0,c=0;c<4;c++){var h=e[c].getBoundingClientRect(),f=2*c,p=h.left,v=h.top;o.push(p,v),l=l&&a&&p===a[f]&&v===a[f+1],s.push(e[c].offsetLeft,e[c].offsetTop)}return l&&i?i:(t.srcCoords=o,t[r]=n?uV(s,o):uV(o,s))}function WX(e){return e.nodeName.toUpperCase()==="CANVAS"}var Q4e=/([&<>"'])/g,eBe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Os(e){return e==null?"":(e+"").replace(Q4e,function(t,n){return eBe[n]})}var tBe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,BP=[],nBe=Ir.browser.firefox&&+Ir.browser.version.split(".")[0]<39;function fR(e,t,n,r){return n=n||{},r?dV(e,t,n):nBe&&t.layerX!=null&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):t.offsetX!=null?(n.zrX=t.offsetX,n.zrY=t.offsetY):dV(e,t,n),n}function dV(e,t,n){if(Ir.domSupported&&e.getBoundingClientRect){var r=t.clientX,i=t.clientY;if(WX(e)){var a=e.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}else if(hR(BP,e,r,i)){n.zrX=BP[0],n.zrY=BP[1];return}}n.zrX=n.zrY=0}function gz(e){return e||window.event}function Ol(e,t,n){if(t=gz(t),t.zrX!=null)return t;var r=t.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&fR(e,o,t,n)}else{fR(e,t,t,n);var a=rBe(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&tBe.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function rBe(e){var t=e.wheelDelta;if(t)return t;var n=e.deltaX,r=e.deltaY;if(n==null||r==null)return t;var i=Math.abs(r!==0?r:n),a=r>0?-1:r<0?1:n>0?-1:1;return 3*i*a}function pR(e,t,n,r){e.addEventListener(t,n,r)}function iBe(e,t,n,r){e.removeEventListener(t,n,r)}var Jd=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function hV(e){return e.which===2||e.which===3}var aBe=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,n,r){return this._doTrack(t,n,r),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,n,r){var i=t.touches;if(i){for(var a={points:[],touches:[],target:n,event:t},o=0,s=i.length;o<s;o++){var l=i[o],c=fR(r,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},e.prototype._recognize=function(t){for(var n in FP)if(FP.hasOwnProperty(n)){var r=FP[n](this._track,t);if(r)return r}},e}();function fV(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}function oBe(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var FP={pinch:function(e,t){var n=e.length;if(n){var r=(e[n-1]||{}).points,i=(e[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=fV(r)/fV(i);!isFinite(a)&&(a=1),t.pinchScale=a;var o=oBe(r);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function Ey(){return[1,0,0,1,0,0]}function yz(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function sBe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ay(e,t,n){var r=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],a=t[0]*n[2]+t[2]*n[3],o=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e}function vR(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function _z(e,t,n,r){r===void 0&&(r=[0,0]);var i=t[0],a=t[2],o=t[4],s=t[1],l=t[3],c=t[5],h=Math.sin(n),f=Math.cos(n);return e[0]=i*f+s*h,e[1]=-i*h+s*f,e[2]=a*f+l*h,e[3]=-a*h+f*l,e[4]=f*(o-r[0])+h*(c-r[1])+r[0],e[5]=f*(c-r[1])-h*(o-r[0])+r[1],e}function lBe(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e}function bz(e,t){var n=t[0],r=t[2],i=t[4],a=t[1],o=t[3],s=t[5],l=n*o-a*r;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-o*i)*l,e[5]=(a*i-n*s)*l,e):null}var Or=function(){function e(t,n){this.x=t||0,this.y=n||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,n){return this.x=t,this.y=n,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,n){this.x+=t.x*n,this.y+=t.y*n},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)},e.prototype.distanceSquare=function(t){var n=this.x-t.x,r=this.y-t.y;return n*n+r*r},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var n=this.x,r=this.y;return this.x=t[0]*n+t[2]*r+t[4],this.y=t[1]*n+t[3]*r+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,n,r){t.x=n,t.y=r},e.copy=function(t,n){t.x=n.x,t.y=n.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,n){return t.x*n.x+t.y*n.y},e.add=function(t,n,r){t.x=n.x+r.x,t.y=n.y+r.y},e.sub=function(t,n,r){t.x=n.x-r.x,t.y=n.y-r.y},e.scale=function(t,n,r){t.x=n.x*r,t.y=n.y*r},e.scaleAndAdd=function(t,n,r,i){t.x=n.x+r.x*i,t.y=n.y+r.y*i},e.lerp=function(t,n,r,i){var a=1-i;t.x=a*n.x+i*r.x,t.y=a*n.y+i*r.y},e}(),w2=Math.min,x2=Math.max,Np=new Or,$p=new Or,Vp=new Or,Hp=new Or,Cb=new Or,Tb=new Or,Ti=function(){function e(t,n,r,i){r<0&&(t=t+r,r=-r),i<0&&(n=n+i,i=-i),this.x=t,this.y=n,this.width=r,this.height=i}return e.prototype.union=function(t){var n=w2(t.x,this.x),r=w2(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=x2(t.x+t.width,this.x+this.width)-n:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=x2(t.y+t.height,this.y+this.height)-r:this.height=t.height,this.x=n,this.y=r},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var n=this,r=t.width/n.width,i=t.height/n.height,a=Ey();return vR(a,a,[-n.x,-n.y]),lBe(a,a,[r,i]),vR(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,n){if(!t)return!1;t instanceof e||(t=e.create(t));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=t.x,c=t.x+t.width,h=t.y,f=t.y+t.height,p=!(a<l||c<i||s<h||f<o);if(n){var v=1/0,_=0,b=Math.abs(a-l),C=Math.abs(c-i),T=Math.abs(s-h),E=Math.abs(f-o),A=Math.min(b,C),I=Math.min(T,E);a<l||c<i?A>_&&(_=A,b<C?Or.set(Tb,-b,0):Or.set(Tb,C,0)):A<v&&(v=A,b<C?Or.set(Cb,b,0):Or.set(Cb,-C,0)),s<h||f<o?I>_&&(_=I,T<E?Or.set(Tb,0,-T):Or.set(Tb,0,E)):A<v&&(v=A,T<E?Or.set(Cb,0,T):Or.set(Cb,0,-E))}return n&&Or.copy(n,p?Cb:Tb),p},e.prototype.contain=function(t,n){var r=this;return t>=r.x&&t<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,n){t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height},e.applyTransform=function(t,n,r){if(!r){t!==n&&e.copy(t,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];t.x=n.x*i+o,t.y=n.y*a+s,t.width=n.width*i,t.height=n.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Np.x=Vp.x=n.x,Np.y=Hp.y=n.y,$p.x=Hp.x=n.x+n.width,$p.y=Vp.y=n.y+n.height,Np.transform(r),Hp.transform(r),$p.transform(r),Vp.transform(r),t.x=w2(Np.x,$p.x,Vp.x,Hp.x),t.y=w2(Np.y,$p.y,Vp.y,Hp.y);var l=x2(Np.x,$p.x,Vp.x,Hp.x),c=x2(Np.y,$p.y,Vp.y,Hp.y);t.width=l-t.x,t.height=c-t.y},e}(),GX="silent";function uBe(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:cBe}}function cBe(){Jd(this.event)}var dBe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handler=null,n}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(ou),Mb=function(){function e(t,n){this.x=t,this.y=n}return e}(),hBe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],NP=new Ti(0,0,0,0),KX=function(e){xn(t,e);function t(n,r,i,a,o){var s=e.call(this)||this;return s._hovered=new Mb(0,0),s.storage=n,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new dBe,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new q4e(s),s}return t.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(qe(hBe,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},t.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,a=qX(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Mb(r,i):this.findHover(r,i),c=l.target,h=this.proxy;h.setCursor&&h.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(o,"mouseout",n),this.dispatchToElement(l,"mousemove",n),c&&c!==s&&this.dispatchToElement(l,"mouseover",n)},t.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},t.prototype.resize=function(){this._hovered=new Mb(0,0)},t.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},t.prototype.dispatchToElement=function(n,r,i){n=n||{};var a=n.target;if(!(a&&a.silent)){for(var o="on"+r,s=uBe(r,n,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},t.prototype.findHover=function(n,r,i){var a=this.storage.getDisplayList(),o=new Mb(n,r);if(pV(a,o,n,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,c=l/2,h=new Ti(n-c,r-c,l,l),f=a.length-1;f>=0;f--){var p=a[f];p!==i&&!p.ignore&&!p.ignoreCoarsePointer&&(!p.parent||!p.parent.ignoreCoarsePointer)&&(NP.copy(p.getBoundingRect()),p.transform&&NP.applyTransform(p.transform),NP.intersect(h)&&s.push(p))}if(s.length)for(var v=4,_=Math.PI/12,b=Math.PI*2,C=0;C<c;C+=v)for(var T=0;T<b;T+=_){var E=n+C*Math.cos(T),A=r+C*Math.sin(T);if(pV(s,o,E,A,i),o.target)return o}}return o},t.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new aBe);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;n.gestureEvent=o;var s=new Mb;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(ou);qe(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){KX.prototype[e]=function(t){var n=t.zrX,r=t.zrY,i=qX(this,n,r),a,o;if((e!=="mouseup"||!i)&&(a=this.findHover(n,r),o=a.target),e==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(e==="mouseup")this._upEl=o;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||cR(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function fBe(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r=e,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(t,n))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?GX:!0}return!1}function pV(e,t,n,r,i){for(var a=e.length-1;a>=0;a--){var o=e[a],s=void 0;if(o!==i&&!o.ignore&&(s=fBe(o,n,r))&&(!t.topTarget&&(t.topTarget=o),s!==GX)){t.target=o;break}}}function qX(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}var ZX=32,kb=7;function pBe(e){for(var t=0;e>=ZX;)t|=e&1,e>>=1;return e+t}function vV(e,t,n,r){var i=t+1;if(i===n)return 1;if(r(e[i++],e[t])<0){for(;i<n&&r(e[i],e[i-1])<0;)i++;vBe(e,t,i)}else for(;i<n&&r(e[i],e[i-1])>=0;)i++;return i-t}function vBe(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}function mV(e,t,n,r,i){for(r===t&&r++;r<n;r++){for(var a=e[r],o=t,s=r,l;o<s;)l=o+s>>>1,i(a,e[l])<0?s=l:o=l+1;var c=r-o;switch(c){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;c>0;)e[o+c]=e[o+c-1],c--}e[o]=a}}function $P(e,t,n,r,i,a){var o=0,s=0,l=1;if(a(e,t[n+i])>0){for(s=r-i;l<s&&a(e,t[n+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(e,t[n+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}for(o++;o<l;){var h=o+(l-o>>>1);a(e,t[n+h])>0?o=h+1:l=h}return l}function VP(e,t,n,r,i,a){var o=0,s=0,l=1;if(a(e,t[n+i])<0){for(s=i+1;l<s&&a(e,t[n+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}else{for(s=r-i;l<s&&a(e,t[n+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var h=o+(l-o>>>1);a(e,t[n+h])<0?l=h:o=h+1}return l}function mBe(e,t){var n=kb,r,i,a=0,o=[];r=[],i=[];function s(v,_){r[a]=v,i[a]=_,a+=1}function l(){for(;a>1;){var v=a-2;if(v>=1&&i[v-1]<=i[v]+i[v+1]||v>=2&&i[v-2]<=i[v]+i[v-1])i[v-1]<i[v+1]&&v--;else if(i[v]>i[v+1])break;h(v)}}function c(){for(;a>1;){var v=a-2;v>0&&i[v-1]<i[v+1]&&v--,h(v)}}function h(v){var _=r[v],b=i[v],C=r[v+1],T=i[v+1];i[v]=b+T,v===a-3&&(r[v+1]=r[v+2],i[v+1]=i[v+2]),a--;var E=VP(e[C],e,_,b,0,t);_+=E,b-=E,b!==0&&(T=$P(e[_+b-1],e,C,T,T-1,t),T!==0&&(b<=T?f(_,b,C,T):p(_,b,C,T)))}function f(v,_,b,C){var T=0;for(T=0;T<_;T++)o[T]=e[v+T];var E=0,A=b,I=v;if(e[I++]=e[A++],--C===0){for(T=0;T<_;T++)e[I+T]=o[E+T];return}if(_===1){for(T=0;T<C;T++)e[I+T]=e[A+T];e[I+C]=o[E];return}for(var O=n,B,N,H;;){B=0,N=0,H=!1;do if(t(e[A],o[E])<0){if(e[I++]=e[A++],N++,B=0,--C===0){H=!0;break}}else if(e[I++]=o[E++],B++,N=0,--_===1){H=!0;break}while((B|N)<O);if(H)break;do{if(B=VP(e[A],o,E,_,0,t),B!==0){for(T=0;T<B;T++)e[I+T]=o[E+T];if(I+=B,E+=B,_-=B,_<=1){H=!0;break}}if(e[I++]=e[A++],--C===0){H=!0;break}if(N=$P(o[E],e,A,C,0,t),N!==0){for(T=0;T<N;T++)e[I+T]=e[A+T];if(I+=N,A+=N,C-=N,C===0){H=!0;break}}if(e[I++]=o[E++],--_===1){H=!0;break}O--}while(B>=kb||N>=kb);if(H)break;O<0&&(O=0),O+=2}if(n=O,n<1&&(n=1),_===1){for(T=0;T<C;T++)e[I+T]=e[A+T];e[I+C]=o[E]}else{if(_===0)throw new Error;for(T=0;T<_;T++)e[I+T]=o[E+T]}}function p(v,_,b,C){var T=0;for(T=0;T<C;T++)o[T]=e[b+T];var E=v+_-1,A=C-1,I=b+C-1,O=0,B=0;if(e[I--]=e[E--],--_===0){for(O=I-(C-1),T=0;T<C;T++)e[O+T]=o[T];return}if(C===1){for(I-=_,E-=_,B=I+1,O=E+1,T=_-1;T>=0;T--)e[B+T]=e[O+T];e[I]=o[A];return}for(var N=n;;){var H=0,j=0,W=!1;do if(t(o[A],e[E])<0){if(e[I--]=e[E--],H++,j=0,--_===0){W=!0;break}}else if(e[I--]=o[A--],j++,H=0,--C===1){W=!0;break}while((H|j)<N);if(W)break;do{if(H=_-VP(o[A],e,v,_,_-1,t),H!==0){for(I-=H,E-=H,_-=H,B=I+1,O=E+1,T=H-1;T>=0;T--)e[B+T]=e[O+T];if(_===0){W=!0;break}}if(e[I--]=o[A--],--C===1){W=!0;break}if(j=C-$P(e[E],o,0,C,C-1,t),j!==0){for(I-=j,A-=j,C-=j,B=I+1,O=A+1,T=0;T<j;T++)e[B+T]=o[O+T];if(C<=1){W=!0;break}}if(e[I--]=e[E--],--_===0){W=!0;break}N--}while(H>=kb||j>=kb);if(W)break;N<0&&(N=0),N+=2}if(n=N,n<1&&(n=1),C===1){for(I-=_,E-=_,B=I+1,O=E+1,T=_-1;T>=0;T--)e[B+T]=e[O+T];e[I]=o[A]}else{if(C===0)throw new Error;for(O=I-(C-1),T=0;T<C;T++)e[O+T]=o[T]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function BC(e,t,n,r){n||(n=0),r||(r=e.length);var i=r-n;if(!(i<2)){var a=0;if(i<ZX){a=vV(e,n,r,t),mV(e,n,r,n+a,t);return}var o=mBe(e,t),s=pBe(i);do{if(a=vV(e,n,r,t),a<s){var l=i;l>s&&(l=s),mV(e,n,n+l,n+a,t),a=l}o.pushRun(n,a),o.mergeRuns(),i-=a,n+=a}while(i!==0);o.forceMergeRuns()}}var dl=1,Qb=2,ty=4,gV=!1;function HP(){gV||(gV=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function yV(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var gBe=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=yV}return e.prototype.traverse=function(t,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(t,n)},e.prototype.getDisplayList=function(t,n){n=n||!1;var r=this._displayList;return(t||!r.length)&&this.updateDisplayList(n),r},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,a=n.length;i<a;i++)this._updateAndAddDisplayable(n[i],null,t);r.length=this._displayListLen,BC(r,yV)},e.prototype._updateAndAddDisplayable=function(t,n,r){if(!(t.ignore&&!r)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var a=i,o=t;a;)a.parent=o,a.updateTransform(),n.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var c=s[l];t.__dirty&&(c.__dirty|=dl),this._updateAndAddDisplayable(c,n,r)}t.__dirty=0}else{var h=t;n&&n.length?h.__clipPaths=n:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(HP(),h.z=0),isNaN(h.z2)&&(HP(),h.z2=0),isNaN(h.zlevel)&&(HP(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var p=t.getTextGuideLine();p&&this._updateAndAddDisplayable(p,n,r);var v=t.getTextContent();v&&this._updateAndAddDisplayable(v,n,r)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var n=0,r=t.length;n<r;n++)this.delRoot(t[n]);return}var i=pi(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),VT;VT=Ir.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var P1={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)))},elasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/r)+1)},elasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-P1.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?P1.bounceIn(e*2)*.5:P1.bounceOut(e*2-1)*.5+.5}},S2=Math.pow,Tf=Math.sqrt,HT=1e-8,YX=1e-4,_V=Tf(3),C2=1/3,Fc=O0(),Vl=O0(),Py=O0();function hf(e){return e>-HT&&e<HT}function XX(e){return e>HT||e<-HT}function Mo(e,t,n,r,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*r+3*a*n)}function bV(e,t,n,r,i){var a=1-i;return 3*(((t-e)*a+2*(n-t)*i)*a+(r-n)*i*i)}function jT(e,t,n,r,i,a){var o=r+3*(t-n)-e,s=3*(n-t*2+e),l=3*(t-e),c=e-i,h=s*s-3*o*l,f=s*l-9*o*c,p=l*l-3*s*c,v=0;if(hf(h)&&hf(f))if(hf(s))a[0]=0;else{var _=-l/s;_>=0&&_<=1&&(a[v++]=_)}else{var b=f*f-4*h*p;if(hf(b)){var C=f/h,_=-s/o+C,T=-C/2;_>=0&&_<=1&&(a[v++]=_),T>=0&&T<=1&&(a[v++]=T)}else if(b>0){var E=Tf(b),A=h*s+1.5*o*(-f+E),I=h*s+1.5*o*(-f-E);A<0?A=-S2(-A,C2):A=S2(A,C2),I<0?I=-S2(-I,C2):I=S2(I,C2);var _=(-s-(A+I))/(3*o);_>=0&&_<=1&&(a[v++]=_)}else{var O=(2*h*s-3*o*f)/(2*Tf(h*h*h)),B=Math.acos(O)/3,N=Tf(h),H=Math.cos(B),_=(-s-2*N*H)/(3*o),T=(-s+N*(H+_V*Math.sin(B)))/(3*o),j=(-s+N*(H-_V*Math.sin(B)))/(3*o);_>=0&&_<=1&&(a[v++]=_),T>=0&&T<=1&&(a[v++]=T),j>=0&&j<=1&&(a[v++]=j)}}return v}function JX(e,t,n,r,i){var a=6*n-12*t+6*e,o=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(hf(o)){if(XX(a)){var c=-s/a;c>=0&&c<=1&&(i[l++]=c)}}else{var h=a*a-4*o*s;if(hf(h))i[0]=-a/(2*o);else if(h>0){var f=Tf(h),c=(-a+f)/(2*o),p=(-a-f)/(2*o);c>=0&&c<=1&&(i[l++]=c),p>=0&&p<=1&&(i[l++]=p)}}return l}function UT(e,t,n,r,i,a){var o=(t-e)*i+e,s=(n-t)*i+t,l=(r-n)*i+n,c=(s-o)*i+o,h=(l-s)*i+s,f=(h-c)*i+c;a[0]=e,a[1]=o,a[2]=c,a[3]=f,a[4]=f,a[5]=h,a[6]=l,a[7]=r}function yBe(e,t,n,r,i,a,o,s,l,c,h){var f,p=.005,v=1/0,_,b,C,T;Fc[0]=l,Fc[1]=c;for(var E=0;E<1;E+=.05)Vl[0]=Mo(e,n,i,o,E),Vl[1]=Mo(t,r,a,s,E),C=ky(Fc,Vl),C<v&&(f=E,v=C);v=1/0;for(var A=0;A<32&&!(p<YX);A++)_=f-p,b=f+p,Vl[0]=Mo(e,n,i,o,_),Vl[1]=Mo(t,r,a,s,_),C=ky(Vl,Fc),_>=0&&C<v?(f=_,v=C):(Py[0]=Mo(e,n,i,o,b),Py[1]=Mo(t,r,a,s,b),T=ky(Py,Fc),b<=1&&T<v?(f=b,v=T):p*=.5);return Tf(v)}function _Be(e,t,n,r,i,a,o,s,l){for(var c=e,h=t,f=0,p=1/l,v=1;v<=l;v++){var _=v*p,b=Mo(e,n,i,o,_),C=Mo(t,r,a,s,_),T=b-c,E=C-h;f+=Math.sqrt(T*T+E*E),c=b,h=C}return f}function zs(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}function wV(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function bBe(e,t,n,r,i){var a=e-2*t+n,o=2*(t-e),s=e-r,l=0;if(hf(a)){if(XX(o)){var c=-s/o;c>=0&&c<=1&&(i[l++]=c)}}else{var h=o*o-4*a*s;if(hf(h)){var c=-o/(2*a);c>=0&&c<=1&&(i[l++]=c)}else if(h>0){var f=Tf(h),c=(-o+f)/(2*a),p=(-o-f)/(2*a);c>=0&&c<=1&&(i[l++]=c),p>=0&&p<=1&&(i[l++]=p)}}return l}function QX(e,t,n){var r=e+n-2*t;return r===0?.5:(e-t)/r}function WT(e,t,n,r,i){var a=(t-e)*r+e,o=(n-t)*r+t,s=(o-a)*r+a;i[0]=e,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function wBe(e,t,n,r,i,a,o,s,l){var c,h=.005,f=1/0;Fc[0]=o,Fc[1]=s;for(var p=0;p<1;p+=.05){Vl[0]=zs(e,n,i,p),Vl[1]=zs(t,r,a,p);var v=ky(Fc,Vl);v<f&&(c=p,f=v)}f=1/0;for(var _=0;_<32&&!(h<YX);_++){var b=c-h,C=c+h;Vl[0]=zs(e,n,i,b),Vl[1]=zs(t,r,a,b);var v=ky(Vl,Fc);if(b>=0&&v<f)c=b,f=v;else{Py[0]=zs(e,n,i,C),Py[1]=zs(t,r,a,C);var T=ky(Py,Fc);C<=1&&T<f?(c=C,f=T):h*=.5}}return Tf(f)}function xBe(e,t,n,r,i,a,o){for(var s=e,l=t,c=0,h=1/o,f=1;f<=o;f++){var p=f*h,v=zs(e,n,i,p),_=zs(t,r,a,p),b=v-s,C=_-l;c+=Math.sqrt(b*b+C*C),s=v,l=_}return c}var SBe=/cubic-bezier\(([0-9,\.e ]+)\)/;function eJ(e){var t=e&&SBe.exec(e);if(t){var n=t[1].split(","),r=+Hc(n[0]),i=+Hc(n[1]),a=+Hc(n[2]),o=+Hc(n[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:jT(0,r,a,1,l,s)&&Mo(0,i,o,1,s[0])}}}var CBe=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Jo,this.ondestroy=t.ondestroy||Jo,this.onrestart=t.onrestart||Jo,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,n){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=t-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Mr(t)?t:P1[t]||eJ(t)},e}(),tJ=function(){function e(t){this.value=t}return e}(),TBe=function(){function e(){this._len=0}return e.prototype.insert=function(t){var n=new tJ(t);return this.insertEntry(n),n},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var n=t.prev,r=t.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),yx=function(){function e(t){this._list=new TBe,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,n){var r=this._list,i=this._map,a=null;if(i[t]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=n:s=new tJ(n),s.key=t,r.insertEntry(s),i[t]=s}return a},e.prototype.get=function(t){var n=this._map[t],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),xV={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Uu(e){return e=Math.round(e),e<0?0:e>255?255:e}function MBe(e){return e=Math.round(e),e<0?0:e>360?360:e}function Sw(e){return e<0?0:e>1?1:e}function jP(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Uu(parseFloat(t)/100*255):Uu(parseInt(t,10))}function zv(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Sw(parseFloat(t)/100):Sw(parseFloat(t))}function UP(e,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function ff(e,t,n){return e+(t-e)*n}function Dl(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function mR(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var nJ=new yx(20),T2=null;function Lg(e,t){T2&&mR(T2,t),T2=nJ.put(e,T2||t.slice())}function eu(e,t){if(e){t=t||[];var n=nJ.get(e);if(n)return mR(t,n);e=e+"";var r=e.replace(/ /g,"").toLowerCase();if(r in xV)return mR(t,xV[r]),Lg(e,t),t;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Dl(t,0,0,0,1);return}return Dl(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Lg(e,t),t}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Dl(t,0,0,0,1);return}return Dl(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Lg(e,t),t}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),c=r.substr(o+1,s-(o+1)).split(","),h=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Dl(t,+c[0],+c[1],+c[2],1):Dl(t,0,0,0,1);h=zv(c.pop());case"rgb":if(c.length>=3)return Dl(t,jP(c[0]),jP(c[1]),jP(c[2]),c.length===3?h:zv(c[3])),Lg(e,t),t;Dl(t,0,0,0,1);return;case"hsla":if(c.length!==4){Dl(t,0,0,0,1);return}return c[3]=zv(c[3]),gR(c,t),Lg(e,t),t;case"hsl":if(c.length!==3){Dl(t,0,0,0,1);return}return gR(c,t),Lg(e,t),t;default:return}}Dl(t,0,0,0,1)}}function gR(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=zv(e[1]),i=zv(e[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return t=t||[],Dl(t,Uu(UP(o,a,n+1/3)*255),Uu(UP(o,a,n)*255),Uu(UP(o,a,n-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function kBe(e){if(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=a-i,s=(a+i)/2,l,c;if(o===0)l=0,c=0;else{s<.5?c=o/(a+i):c=o/(2-a-i);var h=((a-t)/6+o/2)/o,f=((a-n)/6+o/2)/o,p=((a-r)/6+o/2)/o;t===a?l=p-f:n===a?l=1/3+h-p:r===a&&(l=2/3+f-h),l<0&&(l+=1),l>1&&(l-=1)}var v=[l*360,c,s];return e[3]!=null&&v.push(e[3]),v}}function SV(e,t){var n=eu(e);if(n){for(var r=0;r<3;r++)n[r]=n[r]*(1-t)|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Wd(n,n.length===4?"rgba":"rgb")}}function WP(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){n=n||[];var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=t[i],s=t[a],l=r-i;return n[0]=Uu(ff(o[0],s[0],l)),n[1]=Uu(ff(o[1],s[1],l)),n[2]=Uu(ff(o[2],s[2],l)),n[3]=Sw(ff(o[3],s[3],l)),n}}function EBe(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=eu(t[i]),s=eu(t[a]),l=r-i,c=Wd([Uu(ff(o[0],s[0],l)),Uu(ff(o[1],s[1],l)),Uu(ff(o[2],s[2],l)),Sw(ff(o[3],s[3],l))],"rgba");return n?{color:c,leftIndex:i,rightIndex:a,value:r}:c}}function GP(e,t,n,r){var i=eu(e);if(e)return i=kBe(i),t!=null&&(i[0]=MBe(t)),n!=null&&(i[1]=zv(n)),r!=null&&(i[2]=zv(r)),Wd(gR(i),"rgba")}function ABe(e,t){var n=eu(e);if(n&&t!=null)return n[3]=Sw(t),Wd(n,"rgba")}function Wd(e,t){if(!(!e||!e.length)){var n=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(n+=","+e[3]),t+"("+n+")"}}function GT(e,t){var n=eu(e);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}var CV=new yx(100);function TV(e){if(Qn(e)){var t=CV.get(e);return t||(t=SV(e,-.1),CV.put(e,t)),t}else if(bk(e)){var n=Pn({},e);return n.colorStops=Yn(e.colorStops,function(r){return{offset:r.offset,color:SV(r.color,-.1)}}),n}return e}function PBe(e){return e.type==="linear"}function IBe(e){return e.type==="radial"}(function(){return Ir.hasGlobalWindow&&Mr(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var yR=Array.prototype.slice;function zd(e,t,n){return(t-e)*n+e}function KP(e,t,n,r){for(var i=t.length,a=0;a<i;a++)e[a]=zd(t[a],n[a],r);return e}function LBe(e,t,n,r){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=zd(t[o][s],n[o][s],r)}return e}function M2(e,t,n,r){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+n[a]*r;return e}function MV(e,t,n,r){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=t[o][s]+n[o][s]*r}return e}function DBe(e,t){for(var n=e.length,r=t.length,i=n>r?t:e,a=Math.min(n,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(n,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function RBe(e,t,n){var r=e,i=t;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(n===1?i[l]:yR.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var h=0;h<c;h++)isNaN(r[l][h])&&(r[l][h]=i[l][h])}}function FC(e){if(qs(e)){var t=e.length;if(qs(e[0])){for(var n=[],r=0;r<t;r++)n.push(yR.call(e[r]));return n}return yR.call(e)}return e}function NC(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function OBe(e){return qs(e&&e[0])?2:1}var k2=0,$C=1,rJ=2,e1=3,_R=4,bR=5,kV=6;function EV(e){return e===_R||e===bR}function E2(e){return e===$C||e===rJ}var Eb=[0,0,0,0],zBe=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,n,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=kV,l=n;if(qs(n)){var c=OBe(n);s=c,(c===1&&!Wi(n[0])||c===2&&!Wi(n[0][0]))&&(o=!0)}else if(Wi(n)&&!$T(n))s=k2;else if(Qn(n))if(!isNaN(+n))s=k2;else{var h=eu(n);h&&(l=h,s=e1)}else if(bk(n)){var f=Pn({},l);f.colorStops=Yn(n.colorStops,function(v){return{offset:v.offset,color:eu(v.color)}}),PBe(n)?s=_R:IBe(n)&&(s=bR),l=f}a===0?this.valType=s:(s!==this.valType||s===kV)&&(o=!0),this.discrete=this.discrete||o;var p={time:t,value:l,rawValue:n,percent:0};return r&&(p.easing=r,p.easingFunc=Mr(r)?r:P1[r]||eJ(r)),i.push(p),p},e.prototype.prepare=function(t,n){var r=this.keyframes;this._needsSort&&r.sort(function(b,C){return b.time-C.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=E2(i),c=EV(i),h=0;h<a;h++){var f=r[h],p=f.value,v=o.value;f.percent=f.time/t,s||(l&&h!==a-1?RBe(p,v,i):c&&DBe(p.colorStops,v.colorStops))}if(!s&&i!==bR&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var _=r[0].value,h=0;h<a;h++)i===k2?r[h].additiveValue=r[h].value-_:i===e1?r[h].additiveValue=M2([],r[h].value,_,-1):E2(i)&&(r[h].additiveValue=i===$C?M2([],r[h].value,_,-1):MV([],r[h].value,_,-1))}},e.prototype.step=function(t,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,c=a===e1,h,f=this._lastFr,p=Math.min,v,_;if(s===1)v=_=o[0];else{if(n<0)h=0;else if(n<this._lastFrP){var b=p(f+1,s-1);for(h=b;h>=0&&!(o[h].percent<=n);h--);h=p(h,s-2)}else{for(h=f;h<s&&!(o[h].percent>n);h++);h=p(h-1,s-2)}_=o[h+1],v=o[h]}if(v&&_){this._lastFr=h,this._lastFrP=n;var C=_.percent-v.percent,T=C===0?1:p((n-v.percent)/C,1);_.easingFunc&&(T=_.easingFunc(T));var E=r?this._additiveValue:c?Eb:t[l];if((E2(a)||c)&&!E&&(E=this._additiveValue=[]),this.discrete)t[l]=T<1?v.rawValue:_.rawValue;else if(E2(a))a===$C?KP(E,v[i],_[i],T):LBe(E,v[i],_[i],T);else if(EV(a)){var A=v[i],I=_[i],O=a===_R;t[l]={type:O?"linear":"radial",x:zd(A.x,I.x,T),y:zd(A.y,I.y,T),colorStops:Yn(A.colorStops,function(N,H){var j=I.colorStops[H];return{offset:zd(N.offset,j.offset,T),color:NC(KP([],N.color,j.color,T))}}),global:I.global},O?(t[l].x2=zd(A.x2,I.x2,T),t[l].y2=zd(A.y2,I.y2,T)):t[l].r=zd(A.r,I.r,T)}else if(c)KP(E,v[i],_[i],T),r||(t[l]=NC(E));else{var B=zd(v[i],_[i],T);r?this._additiveValue=B:t[l]=B}r&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var n=this.valType,r=this.propName,i=this._additiveValue;n===k2?t[r]=t[r]+i:n===e1?(eu(t[r],Eb),M2(Eb,Eb,i,1),t[r]=NC(Eb)):n===$C?M2(t[r],t[r],i,1):n===rJ&&MV(t[r],t[r],i,1)},e}(),wz=function(){function e(t,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=n,n&&i){vz("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,n,r){return this.whenWithKeys(t,n,va(n),r)},e.prototype.whenWithKeys=function(t,n,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new zBe(s);var c=void 0,h=this._getAdditiveTrack(s);if(h){var f=h.keyframes,p=f[f.length-1];c=p&&p.value,h.valType===e1&&c&&(c=NC(c))}else c=this._target[s];if(c==null)continue;t>0&&l.addKeyframe(0,FC(c),i),this._trackKeys.push(s)}l.addKeyframe(t,FC(n[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var n=t.length,r=0;r<n;r++)t[r].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,n=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)t[n[r]].setFinished()},e.prototype._getAdditiveTrack=function(t){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(t);a&&(n=a)}return n},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes,h=c.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=c[h-1];f&&(n._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var p=new CBe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(v){n._started=2;var _=n._additiveAnimators;if(_){for(var b=!1,C=0;C<_.length;C++)if(_[C]._clip){b=!0;break}b||(n._additiveAnimators=null)}for(var C=0;C<r.length;C++)r[C].step(n._target,v);var T=n._onframeCbs;if(T)for(var C=0;C<T.length;C++)T[C](n._target,v)},ondestroy:function(){n._doneCallback()}});this._clip=p,this.animation&&this.animation.addClip(p),t&&p.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var n=this._clip;t&&n.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Yn(this._trackKeys,function(n){return t._tracks[n]})},e.prototype.stopTracks=function(t,n){if(!t.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var o=r[t[a]];o&&!o.isFinished()&&(n?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,n,r){if(t){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var a=n[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(t[a]=FC(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,n){n=n||va(t);for(var r=0;r<n.length;r++){var i=n[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();function py(){return new Date().getTime()}var BBe=function(e){xn(t,e);function t(n){var r=e.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return t.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},t.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},t.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},t.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},t.prototype.update=function(n){for(var r=py()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(VT(r),!n._paused&&n.update())}VT(r)},t.prototype.start=function(){this._running||(this._time=py(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=py(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=py()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(n,r){r=r||{},this.start();var i=new wz(n,r.loop);return this.addAnimator(i),i},t}(ou),FBe=300,qP=Ir.domSupported,ZP=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Yn(e,function(i){var a=i.replace("mouse","pointer");return n.hasOwnProperty(a)?a:i});return{mouse:e,touch:t,pointer:r}}(),AV={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},PV=!1;function wR(e){var t=e.pointerType;return t==="pen"||t==="touch"}function NBe(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function YP(e){e&&(e.zrByTouch=!0)}function $Be(e,t){return Ol(e.dom,new VBe(e,t),!0)}function iJ(e,t){for(var n=t,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}var VBe=function(){function e(t,n){this.stopPropagation=Jo,this.stopImmediatePropagation=Jo,this.preventDefault=Jo,this.type=n.type,this.target=this.currentTarget=t.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return e}(),Pu={mousedown:function(e){e=Ol(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ol(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ol(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ol(this.dom,e);var t=e.toElement||e.relatedTarget;iJ(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){PV=!0,e=Ol(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){PV||(e=Ol(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Ol(this.dom,e),YP(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Pu.mousemove.call(this,e),Pu.mousedown.call(this,e)},touchmove:function(e){e=Ol(this.dom,e),YP(e),this.handler.processGesture(e,"change"),Pu.mousemove.call(this,e)},touchend:function(e){e=Ol(this.dom,e),YP(e),this.handler.processGesture(e,"end"),Pu.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<FBe&&Pu.click.call(this,e)},pointerdown:function(e){Pu.mousedown.call(this,e)},pointermove:function(e){wR(e)||Pu.mousemove.call(this,e)},pointerup:function(e){Pu.mouseup.call(this,e)},pointerout:function(e){wR(e)||Pu.mouseout.call(this,e)}};qe(["click","dblclick","contextmenu"],function(e){Pu[e]=function(t){t=Ol(this.dom,t),this.trigger(e,t)}});var xR={pointermove:function(e){wR(e)||xR.mousemove.call(this,e)},pointerup:function(e){xR.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function HBe(e,t){var n=t.domHandlers;Ir.pointerEventsSupported?qe(ZP.pointer,function(r){VC(t,r,function(i){n[r].call(e,i)})}):(Ir.touchEventsSupported&&qe(ZP.touch,function(r){VC(t,r,function(i){n[r].call(e,i),NBe(t)})}),qe(ZP.mouse,function(r){VC(t,r,function(i){i=gz(i),t.touching||n[r].call(e,i)})}))}function jBe(e,t){Ir.pointerEventsSupported?qe(AV.pointer,n):Ir.touchEventsSupported||qe(AV.mouse,n);function n(r){function i(a){a=gz(a),iJ(e,a.target)||(a=$Be(e,a),t.domHandlers[r].call(e,a))}VC(t,r,i,{capture:!0})}}function VC(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,pR(e.domTarget,t,n,r)}function XP(e){var t=e.mounted;for(var n in t)t.hasOwnProperty(n)&&iBe(e.domTarget,n,t[n],e.listenerOpts[n]);e.mounted={}}var IV=function(){function e(t,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=n}return e}(),UBe=function(e){xn(t,e);function t(n,r){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new IV(n,Pu),qP&&(i._globalHandlerScope=new IV(document,xR)),HBe(i,i._localHandlerScope),i}return t.prototype.dispose=function(){XP(this._localHandlerScope),qP&&XP(this._globalHandlerScope)},t.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},t.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,qP&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?jBe(this,r):XP(r)}},t}(ou),aJ=1;Ir.hasGlobalWindow&&(aJ=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var KT=aJ,SR=.4,CR="#333",TR="#ccc",WBe="#eee",LV=yz,DV=5e-5;function jp(e){return e>DV||e<-DV}var Up=[],Dg=[],JP=Ey(),QP=Math.abs,GBe=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return jp(this.rotation)||jp(this.x)||jp(this.y)||jp(this.scaleX-1)||jp(this.scaleY-1)||jp(this.skewX)||jp(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||t)){r&&(LV(r),this.invTransform=null);return}r=r||Ey(),n?this.getLocalTransform(r):LV(r),t&&(n?Ay(r,t,r):sBe(r,t)),this.transform=r,this._resolveGlobalScaleRatio(r)},e.prototype._resolveGlobalScaleRatio=function(t){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(Up);var r=Up[0]<0?-1:1,i=Up[1]<0?-1:1,a=((Up[0]-r)*n+r)/Up[0]||0,o=((Up[1]-i)*n+i)/Up[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||Ey(),bz(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,n=[];t;)n.push(t),t=t.parent;for(;t=n.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var n=t[0]*t[0]+t[1]*t[1],r=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);r=Math.sqrt(r)*Math.cos(a),n=Math.sqrt(n),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,n=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||Ey(),Ay(Dg,t.invTransform,n),n=Dg);var r=this.originX,i=this.originY;(r||i)&&(JP[4]=r,JP[5]=i,Ay(Dg,n,JP),Dg[4]-=r,Dg[5]-=i,n=Dg),this.setLocalTransform(n)}},e.prototype.getGlobalScale=function(t){var n=this.transform;return t=t||[],n?(t[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),t[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(t[0]=-t[0]),n[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,n){var r=[t,n],i=this.invTransform;return i&&Ql(r,r,i),r},e.prototype.transformCoordToGlobal=function(t,n){var r=[t,n],i=this.transform;return i&&Ql(r,r,i),r},e.prototype.getLineScale=function(){var t=this.transform;return t&&QP(t[0]-1)>1e-10&&QP(t[3]-1)>1e-10?Math.sqrt(QP(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){KBe(this,t)},e.getLocalTransform=function(t,n){n=n||[];var r=t.originX||0,i=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,c=t.rotation||0,h=t.x,f=t.y,p=t.skewX?Math.tan(t.skewX):0,v=t.skewY?Math.tan(-t.skewY):0;if(r||i||s||l){var _=r+s,b=i+l;n[4]=-_*a-p*b*o,n[5]=-b*o-v*_*a}else n[4]=n[5]=0;return n[0]=a,n[3]=o,n[1]=v*a,n[2]=p*o,c&&_z(n,n,c),n[4]+=r+h,n[5]+=i+f,n},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Cw=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function KBe(e,t){for(var n=0;n<Cw.length;n++){var r=Cw[n];e[r]=t[r]}}const xz=GBe;var RV={};function gl(e,t){t=t||am;var n=RV[t];n||(n=RV[t]=new yx(500));var r=n.get(e);return r==null&&(r=$f.measureText(e,t).width,n.put(e,r)),r}function OV(e,t,n,r){var i=gl(e,t),a=Sz(t),o=t1(0,i,n),s=ny(0,a,r),l=new Ti(o,s,i,a);return l}function xk(e,t,n,r){var i=((e||"")+"").split(`
`),a=i.length;if(a===1)return OV(i[0],t,n,r);for(var o=new Ti(0,0,0,0),s=0;s<i.length;s++){var l=OV(i[s],t,n,r);s===0?o.copy(l):o.union(l)}return o}function t1(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function ny(e,t,n){return n==="middle"?e-=t/2:n==="bottom"&&(e-=t),e}function Sz(e){return gl("国",e)}function ed(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function qT(e,t,n){var r=t.position||"inside",i=t.distance!=null?t.distance:5,a=n.height,o=n.width,s=a/2,l=n.x,c=n.y,h="left",f="top";if(r instanceof Array)l+=ed(r[0],n.width),c+=ed(r[1],n.height),h=null,f=null;else switch(r){case"left":l-=i,c+=s,h="right",f="middle";break;case"right":l+=i+o,c+=s,f="middle";break;case"top":l+=o/2,c-=i,h="center",f="bottom";break;case"bottom":l+=o/2,c+=a+i,h="center";break;case"inside":l+=o/2,c+=s,h="center",f="middle";break;case"insideLeft":l+=i,c+=s,f="middle";break;case"insideRight":l+=o-i,c+=s,h="right",f="middle";break;case"insideTop":l+=o/2,c+=i,h="center";break;case"insideBottom":l+=o/2,c+=a-i,h="center",f="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=o-i,c+=i,h="right";break;case"insideBottomLeft":l+=i,c+=a-i,f="bottom";break;case"insideBottomRight":l+=o-i,c+=a-i,h="right",f="bottom";break}return e=e||{},e.x=l,e.y=c,e.align=h,e.verticalAlign=f,e}var eI="__zr_normal__",tI=Cw.concat(["ignore"]),qBe=Vf(Cw,function(e,t){return e[t]=!0,e},{ignore:!1}),Rg={},ZBe=new Ti(0,0,0,0),Sk=function(){function e(t){this.id=$X(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=n,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var n=this._textContent;if(n&&(!n.ignore||t)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=n.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var c=!1;if(a.copyTransform(n),r.position!=null){var h=ZBe;r.layoutRect?h.copy(r.layoutRect):h.copy(this.getBoundingRect()),i||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Rg,r,h):qT(Rg,r,h),a.x=Rg.x,a.y=Rg.y,o=Rg.align,s=Rg.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var p=void 0,v=void 0;f==="center"?(p=h.width*.5,v=h.height*.5):(p=ed(f[0],h.width),v=ed(f[1],h.height)),c=!0,a.originX=-a.x+p+(i?0:h.x),a.originY=-a.y+v+(i?0:h.y)}}r.rotation!=null&&(a.rotation=r.rotation);var _=r.offset;_&&(a.x+=_[0],a.y+=_[1],c||(a.originX=-_[0],a.originY=-_[1]));var b=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,C=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),T=void 0,E=void 0,A=void 0;b&&this.canBeInsideText()?(T=r.insideFill,E=r.insideStroke,(T==null||T==="auto")&&(T=this.getInsideTextFill()),(E==null||E==="auto")&&(E=this.getInsideTextStroke(T),A=!0)):(T=r.outsideFill,E=r.outsideStroke,(T==null||T==="auto")&&(T=this.getOutsideFill()),(E==null||E==="auto")&&(E=this.getOutsideStroke(T),A=!0)),T=T||"#000",(T!==C.fill||E!==C.stroke||A!==C.autoStroke||o!==C.align||s!==C.verticalAlign)&&(l=!0,C.fill=T,C.stroke=E,C.autoStroke=A,C.align=o,C.verticalAlign=s,n.setDefaultTextStyle(C)),n.__dirty|=dl,l&&n.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?TR:CR},e.prototype.getOutsideStroke=function(t){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&eu(n);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,Wd(r,"rgba")},e.prototype.traverse=function(t,n){},e.prototype.attrKV=function(t,n){t==="textConfig"?this.setTextConfig(n):t==="textContent"?this.setTextContent(n):t==="clipPath"?this.setClipPath(n):t==="extra"?(this.extra=this.extra||{},Pn(this.extra,n)):this[t]=n},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,n){if(typeof t=="string")this.attrKV(t,n);else if(fr(t))for(var r=t,i=va(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,t[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==eI)){var o=i.targetName,s=o?n[o]:n;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var n=this._normalState;n||(n=this._normalState={}),t.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(t,n,tI)},e.prototype._savePrimaryToNormal=function(t,n,r){for(var i=0;i<r.length;i++){var a=r[i];t[a]!=null&&!(a in n)&&(n[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var n=this.states;return n[t]||(n[t]={}),n[t]},e.prototype.clearStates=function(t){this.useState(eI,!1,t)},e.prototype.useState=function(t,n,r,i){var a=t===eI,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(pi(s,t)>=0&&(n||s.length===1))){var c;if(this.stateProxy&&!a&&(c=this.stateProxy(t)),c||(c=this.states&&this.states[t]),!c&&!a){vz("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(c);var h=!!(c&&c.hoverLayer||i);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,c,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,p=this._textGuide;return f&&f.useState(t,n,r,h),p&&p.useState(t,n,r,h),a?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~dl),c}}},e.prototype.useStates=function(t,n,r){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(t[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var c=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(c,t)),h||(h=this.states[c]),h&&i.push(h)}var f=i[o-1],p=!!(f&&f.hoverLayer||r);p&&this._toggleHoverLayerFlag(!0);var v=this._mergeStates(i),_=this.stateTransition;this.saveCurrentToNormalState(v),this._applyStateObj(t.join(","),v,this._normalState,!1,!n&&!this.__inHover&&_&&_.duration>0,_);var b=this._textContent,C=this._textGuide;b&&b.useStates(t,n,p),C&&C.useStates(t,n,p),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~dl)}},e.prototype.isSilent=function(){for(var t=this.silent,n=this.parent;!t&&n;){if(n.silent){t=!0;break}n=n.parent}return t},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var n=this.animators[t];n.targetName&&n.changeTarget(this[n.targetName])}},e.prototype.removeState=function(t){var n=pi(this.currentStates,t);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},e.prototype.replaceState=function(t,n,r){var i=this.currentStates.slice(),a=pi(i,t),o=pi(i,n)>=0;a>=0?o?i.splice(a,1):i[a]=n:r&&!o&&i.push(n),this.useStates(i)},e.prototype.toggleState=function(t,n){n?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var n={},r,i=0;i<t.length;i++){var a=t[i];Pn(n,a),a.textConfig&&(r=r||{},Pn(r,a.textConfig))}return r&&(n.textConfig=r),n},e.prototype._applyStateObj=function(t,n,r,i,a,o){var s=!(n&&i);n&&n.textConfig?(this.textConfig=Pn({},i?this.textConfig:r.textConfig),Pn(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,h=0;h<tI.length;h++){var f=tI[h],p=a&&qBe[f];n&&n[f]!=null?p?(c=!0,l[f]=n[f]):this[f]=n[f]:s&&r[f]!=null&&(p?(c=!0,l[f]=r[f]):this[f]=r[f])}if(!a)for(var h=0;h<this.animators.length;h++){var v=this.animators[h],_=v.targetName;v.getLoop()||v.__changeFinalValue(_?(n||r)[_]:n||r)}c&&this._transitionState(t,l,o)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var n=this.__zr;n&&t.addSelfToZr(n),t.__zr=n,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var n=this._textContent;n!==t&&(n&&n!==t&&this.removeTextContent(),t.innerTransformable=new xz,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Pn(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=dl;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=t),r&&(r.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var n=this.animators;if(n)for(var r=0;r<n.length;r++)t.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)t.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,n,r){var i=t?this[t]:this,a=new wz(i,n,r);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,n){var r=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(n)}).done(function(){var a=i.animators,o=pi(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),r&&r.animation.addAnimator(t),r&&r.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,n){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!t||t===s.scope?s.stop(n):a.push(s)}return this.animators=a,this},e.prototype.animateTo=function(t,n,r){nI(this,t,n,r)},e.prototype.animateFrom=function(t,n,r){nI(this,t,n,r,!0)},e.prototype._transitionState=function(t,n,r,i){for(var a=nI(this,n,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=dl;function n(r,i,a,o){Object.defineProperty(t,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,c){Object.defineProperty(c,0,{get:function(){return l[a]},set:function(h){l[a]=h}}),Object.defineProperty(c,1,{get:function(){return l[o]},set:function(h){l[o]=h}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();ld(Sk,ou);ld(Sk,xz);function nI(e,t,n,r,i){n=n||{};var a=[];oJ(e,"",e,t,n,r,a,i);var o=a.length,s=!1,l=n.done,c=n.aborted,h=function(){s=!0,o--,o<=0&&(s?l&&l():c&&c())},f=function(){o--,o<=0&&(s?l&&l():c&&c())};o||l&&l(),a.length>0&&n.during&&a[0].during(function(_,b){n.during(b)});for(var p=0;p<a.length;p++){var v=a[p];h&&v.done(h),f&&v.aborted(f),n.force&&v.duration(n.duration),v.start(n.easing)}return a}function rI(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function YBe(e){return qs(e[0])}function XBe(e,t,n){if(qs(t[n]))if(qs(e[n])||(e[n]=[]),Zs(t[n])){var r=t[n].length;e[n].length!==r&&(e[n]=new t[n].constructor(r),rI(e[n],t[n],r))}else{var i=t[n],a=e[n],o=i.length;if(YBe(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?rI(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else rI(a,i,o);a.length=i.length}else e[n]=t[n]}function JBe(e,t){return e===t||qs(e)&&qs(t)&&QBe(e,t)}function QBe(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function oJ(e,t,n,r,i,a,o,s){for(var l=va(r),c=i.duration,h=i.delay,f=i.additive,p=i.setToFinal,v=!fr(a),_=e.animators,b=[],C=0;C<l.length;C++){var T=l[C],E=r[T];if(E!=null&&n[T]!=null&&(v||a[T]))if(fr(E)&&!qs(E)&&!bk(E)){if(t){s||(n[T]=E,e.updateDuringAnimation(t));continue}oJ(e,T,n[T],E,i,a&&a[T],o,s)}else b.push(T);else s||(n[T]=E,e.updateDuringAnimation(t),b.push(T))}var A=b.length;if(!f&&A)for(var I=0;I<_.length;I++){var O=_[I];if(O.targetName===t){var B=O.stopTracks(b);if(B){var N=pi(_,O);_.splice(N,1)}}}if(i.force||(b=fo(b,function(U){return!JBe(r[U],n[U])}),A=b.length),A>0||i.force&&!o.length){var H=void 0,j=void 0,W=void 0;if(s){j={},p&&(H={});for(var I=0;I<A;I++){var T=b[I];j[T]=n[T],p?H[T]=r[T]:n[T]=r[T]}}else if(p){W={};for(var I=0;I<A;I++){var T=b[I];W[T]=FC(n[T]),XBe(n,r,T)}}var O=new wz(n,!1,!1,f?fo(_,function(Y){return Y.targetName===t}):null);O.targetName=t,i.scope&&(O.scope=i.scope),p&&H&&O.whenWithKeys(0,H,b),W&&O.whenWithKeys(0,W,b),O.whenWithKeys(c??500,s?j:r,b).delay(h||0),e.addAnimator(O,t),o.push(O)}}var Bi=function(e){xn(t,e);function t(n){var r=e.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(n){return this._children[n]},t.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},t.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,n),this._doAdd(n))}return this},t.prototype.replace=function(n,r){var i=pi(this._children,n);return i>=0&&this.replaceAt(r,i),this},t.prototype.replaceAt=function(n,r){var i=this._children,a=i[r];if(n&&n!==this&&n.parent!==this&&n!==a){i[r]=n,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(n)}return this},t.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},t.prototype.remove=function(n){var r=this.__zr,i=this._children,a=pi(i,n);return a<0?this:(i.splice(a,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},t.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var a=n[i];r&&a.removeSelfFromZr(r),a.parent=null}return n.length=0,this},t.prototype.eachChild=function(n,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];n.call(r,o,a)}return this},t.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=n.call(r,a);a.isGroup&&!o&&a.traverse(n,r)}return this},t.prototype.addSelfToZr=function(n){e.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){e.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},t.prototype.getBoundingRect=function(n){for(var r=new Ti(0,0,0,0),i=n||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),h=l.getLocalTransform(a);h?(Ti.applyTransform(r,c,h),o=o||r.clone(),o.union(r)):(o=o||c.clone(),o.union(c))}}return o||r},t}(Sk);Bi.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var HC={},sJ={};function eFe(e){delete sJ[e]}function tFe(e){if(!e)return!1;if(typeof e=="string")return GT(e,1)<SR;if(e.colorStops){for(var t=e.colorStops,n=0,r=t.length,i=0;i<r;i++)n+=GT(t[i].color,1);return n/=r,n<SR}return!1}var nFe=function(){function e(t,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=t;var a=new gBe,o=r.renderer||"canvas";HC[o]||(o=va(HC)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new HC[o](n,a,r,t),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var c=!Ir.node&&!Ir.worker&&!l?new UBe(s.getViewportRoot(),s.root):null,h=r.useCoarsePointer,f=h==null||h==="auto"?Ir.touchEventsSupported:!!h,p=44,v;f&&(v=Xr(r.pointerSize,p)),this.handler=new KX(a,s,c,s.root,v),this.animation=new BBe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,n),this.refresh())},e.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=tFe(t))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(t){var n,r=py();this._needsRefresh&&(n=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=py();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},e.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,n){if(!this._disposed)return this.handler.findHover(t,n)},e.prototype.on=function(t,n,r){return this._disposed||this.handler.on(t,n,r),this},e.prototype.off=function(t,n){this._disposed||this.handler.off(t,n)},e.prototype.trigger=function(t,n){this._disposed||this.handler.trigger(t,n)},e.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),n=0;n<t.length;n++)t[n]instanceof Bi&&t[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,eFe(this.id))},e}();function zV(e,t){var n=new nFe($X(),e,t);return sJ[n.id]=n,n}function rFe(e,t){HC[e]=t}var BV=1e-4,lJ=20;function iFe(e){return e.replace(/^\s+|\s+$/g,"")}function Ai(e,t,n,r){var i=t[0],a=t[1],o=n[0],s=n[1],l=a-i,c=s-o;if(l===0)return c===0?o:(o+s)/2;if(r)if(l>0){if(e<=i)return o;if(e>=a)return s}else{if(e>=i)return o;if(e<=a)return s}else{if(e===i)return o;if(e===a)return s}return(e-i)/l*c+o}function Fr(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Qn(e)?iFe(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function za(e,t,n){return t==null&&(t=10),t=Math.min(Math.max(0,t),lJ),e=(+e).toFixed(t),n?e:+e}function Sv(e){return e.sort(function(t,n){return t-n}),e}function Vd(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(e*t)/t===e)return n}return aFe(e)}function aFe(e){var t=e.toString().toLowerCase(),n=t.indexOf("e"),r=n>0?+t.slice(n+1):0,i=n>0?n:t.length,a=t.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function uJ(e,t){var n=Math.log,r=Math.LN10,i=Math.floor(n(e[1]-e[0])/r),a=Math.round(n(Math.abs(t[1]-t[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function oFe(e,t){var n=Vf(e,function(v,_){return v+(isNaN(_)?0:_)},0);if(n===0)return[];for(var r=Math.pow(10,t),i=Yn(e,function(v){return(isNaN(v)?0:v)/n*r*100}),a=r*100,o=Yn(i,function(v){return Math.floor(v)}),s=Vf(o,function(v,_){return v+_},0),l=Yn(i,function(v,_){return v-o[_]});s<a;){for(var c=Number.NEGATIVE_INFINITY,h=null,f=0,p=l.length;f<p;++f)l[f]>c&&(c=l[f],h=f);++o[h],l[h]=0,++s}return Yn(o,function(v){return v/r})}function sFe(e,t){var n=Math.max(Vd(e),Vd(t)),r=e+t;return n>lJ?r:za(r,n)}function cJ(e){var t=Math.PI*2;return(e%t+t)%t}function ZT(e){return e>-BV&&e<BV}var lFe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function td(e){if(e instanceof Date)return e;if(Qn(e)){var t=lFe.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function uFe(e){return Math.pow(10,Cz(e))}function Cz(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function dJ(e,t){var n=Cz(e),r=Math.pow(10,n),i=e/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,e=a*r,n>=-20?+e.toFixed(n<0?-n:0):e}function FV(e){e.sort(function(l,c){return s(l,c,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var i=e[r].interval,a=e[r].close,o=0;o<2;o++)i[o]<=t&&(i[o]=t,a[o]=o?1:1-n),t=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!==1?e.splice(r,1):r++}return e;function s(l,c,h){return l.interval[h]<c.interval[h]||l.interval[h]===c.interval[h]&&(l.close[h]-c.close[h]===(h?-1:1)||!h&&s(l,c,1))}}function YT(e){var t=parseFloat(e);return t==e&&(t!==0||!Qn(e)||e.indexOf("x")<=0)?t:NaN}function cFe(e){return!isNaN(YT(e))}function hJ(){return Math.round(Math.random()*9)}function fJ(e,t){return t===0?e:fJ(t,e%t)}function NV(e,t){return e==null?t:t==null?e:e*t/fJ(e,t)}function Bs(e){throw new Error(e)}function $V(e,t,n){return(t-e)*n+e}var pJ="series\0",vJ="\0_ec_\0";function Ao(e){return e instanceof Array?e:e==null?[]:[e]}function MR(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var VV=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function _x(e){return fr(e)&&!Vn(e)&&!(e instanceof Date)?e.value:e}function dFe(e){return fr(e)&&!(e instanceof Array)}function hFe(e,t,n){var r=n==="normalMerge",i=n==="replaceMerge",a=n==="replaceAll";e=e||[],t=(t||[]).slice();var o=Dr();qe(t,function(l,c){if(!fr(l)){t[c]=null;return}});var s=fFe(e,o,n);return(r||i)&&pFe(s,e,o,t),r&&vFe(s,t),r||i?mFe(s,t,i):a&&gFe(s,t),yFe(s),s}function fFe(e,t,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<e.length;i++){var a=e[i];a&&a.id!=null&&t.set(a.id,i),r.push({existing:n==="replaceMerge"||Tw(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function pFe(e,t,n,r){qe(r,function(i,a){if(!(!i||i.id==null)){var o=I1(i.id),s=n.get(o);if(s!=null){var l=e[s];ec(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=t[s],r[a]=null}}})}function vFe(e,t){qe(t,function(n,r){if(!(!n||n.name==null))for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(a.id==null||n.id==null)&&!Tw(n)&&!Tw(a)&&mJ("name",a,n)){e[i].newOption=n,t[r]=null;return}}})}function mFe(e,t,n){qe(t,function(r){if(r){for(var i,a=0;(i=e[a])&&(i.newOption||Tw(i.existing)||i.existing&&r.id!=null&&!mJ("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=n):e.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),a++}})}function gFe(e,t){qe(t,function(n){e.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function yFe(e){var t=Dr();qe(e,function(n){var r=n.existing;r&&t.set(r.id,n)}),qe(e,function(n){var r=n.newOption;ec(!r||r.id==null||!t.get(r.id)||t.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&t.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),qe(e,function(n,r){var i=n.existing,a=n.newOption,o=n.keyInfo;if(fr(a)){if(o.name=a.name!=null?I1(a.name):i?i.name:pJ+r,i)o.id=I1(i.id);else if(a.id!=null)o.id=I1(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,n)}})}function mJ(e,t,n){var r=Wu(t[e],null),i=Wu(n[e],null);return r!=null&&i!=null&&r===i}function I1(e){return Wu(e,"")}function Wu(e,t){return e==null?t:Qn(e)?e:Wi(e)||sR(e)?e+"":t}function Tz(e){var t=e.name;return!!(t&&t.indexOf(pJ))}function Tw(e){return e&&e.id!=null&&I1(e.id).indexOf(vJ)===0}function _Fe(e){return vJ+e}function bFe(e,t,n){qe(e,function(r){var i=r.newOption;fr(i)&&(r.keyInfo.mainType=t,r.keyInfo.subType=wFe(t,i,r.existing,n))})}function wFe(e,t,n,r){var i=t.type?t.type:n?n.subType:r.determineSubType(e,t);return i}function xFe(e,t){var n={},r={};return i(e||[],n),i(t||[],r,n),[a(n),a(r)];function i(o,s,l){for(var c=0,h=o.length;c<h;c++){var f=Wu(o[c].seriesId,null);if(f==null)return;for(var p=Ao(o[c].dataIndex),v=l&&l[f],_=0,b=p.length;_<b;_++){var C=p[_];v&&v[C]?v[C]=null:(s[f]||(s[f]={}))[C]=1}}}function a(o,s){var l=[];for(var c in o)if(o.hasOwnProperty(c)&&o[c]!=null)if(s)l.push(+c);else{var h=a(o[c],!0);h.length&&l.push({seriesId:c,dataIndex:h})}return l}}function sm(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Vn(t.dataIndex)?Yn(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Vn(t.name)?Yn(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name)}function Sa(){var e="__ec_inner_"+SFe++;return function(t){return t[e]||(t[e]={})}}var SFe=hJ();function L1(e,t,n){var r=Mz(t,n),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=n?n.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(c,h){var f=bx(e,h,c,{useDefault:l===h,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[h+"Models"]=f.models,s[h+"Model"]=f.models[0]}),s}function Mz(e,t){var n;if(Qn(e)){var r={};r[e+"Index"]=0,n=r}else n=e;var i=Dr(),a={},o=!1;return qe(n,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=c[1],f=(c[2]||"").toLowerCase();if(!(!h||!f||t&&t.includeMainTypes&&pi(t.includeMainTypes,h)<0)){o=o||!!h;var p=i.get(h)||i.set(h,{});p[f]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var gs={useDefault:!0,enableAll:!1,enableNone:!1},CFe={useDefault:!1,enableAll:!0,enableNone:!0};function bx(e,t,n,r){r=r||gs;var i=n.index,a=n.id,o=n.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(ec(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(ec(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=e.queryComponents({mainType:t,index:i,id:a,name:o}),s)}function gJ(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function TFe(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function MFe(e){return e==="auto"?Ir.domSupported?"html":"richText":e||"html"}function yJ(e,t,n,r,i){var a=t==null||t==="auto";if(r==null)return r;if(Wi(r)){var o=$V(n||0,r,i);return za(o,a?Math.max(Vd(n||0),Vd(r)):t)}else{if(Qn(r))return i<1?n:r;for(var s=[],l=n,c=r,h=Math.max(l?l.length:0,c.length),f=0;f<h;++f){var p=e.getDimensionInfo(f);if(p&&p.type==="ordinal")s[f]=(i<1&&l?l:c)[f];else{var v=l&&l[f]?l[f]:0,_=c[f],o=$V(v,_,i);s[f]=za(o,a?Math.max(Vd(v),Vd(_)):t)}}return s}}var kFe=".",Wp="___EC__COMPONENT__CONTAINER___",_J="___EC__EXTENDED_CLASS___";function jc(e){var t={main:"",sub:""};if(e){var n=e.split(kFe);t.main=n[0]||"",t.sub=n[1]||""}return t}function EFe(e){ec(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function AFe(e){return!!(e&&e[_J])}function kz(e,t){e.$constructor=e,e.extend=function(n){var r=this,i;return PFe(r)?i=function(a){xn(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},R4e(i,this)),Pn(i.prototype,n),i[_J]=!0,i.extend=this.extend,i.superCall=DFe,i.superApply=RFe,i.superClass=r,i}}function PFe(e){return Mr(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function bJ(e,t){e.extend=t.extend}var IFe=Math.round(Math.random()*10);function LFe(e){var t=["__\0is_clz",IFe++].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!!(n&&n[t])}}function DFe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,n)}function RFe(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Ck(e){var t={};e.registerClass=function(r){var i=r.type||r.prototype.type;if(i){EFe(i),r.prototype.type=i;var a=jc(i);if(!a.sub)t[a.main]=r;else if(a.sub!==Wp){var o=n(a);o[a.sub]=r}}return r},e.getClass=function(r,i,a){var o=t[r];if(o&&o[Wp]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},e.getClassesByMainType=function(r){var i=jc(r),a=[],o=t[i.main];return o&&o[Wp]?qe(o,function(s,l){l!==Wp&&a.push(s)}):a.push(o),a},e.hasClass=function(r){var i=jc(r);return!!t[i.main]},e.getAllClassMainTypes=function(){var r=[];return qe(t,function(i,a){r.push(a)}),r},e.hasSubTypes=function(r){var i=jc(r),a=t[i.main];return a&&a[Wp]};function n(r){var i=t[r.main];return(!i||!i[Wp])&&(i=t[r.main]={},i[Wp]=!0),i}}function Mw(e,t){for(var n=0;n<e.length;n++)e[n][1]||(e[n][1]=e[n][0]);return t=t||!1,function(r,i,a){for(var o={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&pi(i,l)>=0||a&&pi(a,l)<0)){var c=r.getShallow(l,t);c!=null&&(o[e[s][0]]=c)}}return o}}var OFe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],zFe=Mw(OFe),BFe=function(){function e(){}return e.prototype.getAreaStyle=function(t,n){return zFe(this,t,n)},e}(),kR=new yx(50);function FFe(e){if(typeof e=="string"){var t=kR.get(e);return t&&t.image}else return e}function wJ(e,t,n,r,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!n)return t;var a=kR.get(e),o={hostEl:n,cb:r,cbPayload:i};return a?(t=a.image,!Tk(t)&&a.pending.push(o)):(t=$f.loadImage(e,HV,HV),t.__zrImageSrc=e,kR.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}else return e;else return t}function HV(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function Tk(e){return e&&e.width&&e.height}var iI=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function NFe(e,t,n,r,i,a){if(!n){e.text="",e.isTruncated=!1;return}var o=(t+"").split(`
`);a=xJ(n,r,i,a);for(var s=!1,l={},c=0,h=o.length;c<h;c++)SJ(l,o[c],a),o[c]=l.textLine,s=s||l.isTruncated;e.text=o.join(`
`),e.isTruncated=s}function xJ(e,t,n,r){r=r||{};var i=Pn({},r);i.font=t,n=Xr(n,"..."),i.maxIterations=Xr(r.maxIterations,2);var a=i.minChar=Xr(r.minChar,0);i.cnCharWidth=gl("国",t);var o=i.ascCharWidth=gl("a",t);i.placeholder=Xr(r.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<a&&s>=o;l++)s-=o;var c=gl(n,t);return c>s&&(n="",c=0),s=e-c,i.ellipsis=n,i.ellipsisWidth=c,i.contentWidth=s,i.containerWidth=e,i}function SJ(e,t,n){var r=n.containerWidth,i=n.font,a=n.contentWidth;if(!r){e.textLine="",e.isTruncated=!1;return}var o=gl(t,i);if(o<=r){e.textLine=t,e.isTruncated=!1;return}for(var s=0;;s++){if(o<=a||s>=n.maxIterations){t+=n.ellipsis;break}var l=s===0?$Fe(t,a,n.ascCharWidth,n.cnCharWidth):o>0?Math.floor(t.length*a/o):0;t=t.substr(0,l),o=gl(t,i)}t===""&&(t=n.placeholder),e.textLine=t,e.isTruncated=!0}function $Fe(e,t,n,r){for(var i=0,a=0,o=e.length;a<o&&i<t;a++){var s=e.charCodeAt(a);i+=0<=s&&s<=127?n:r}return a}function VFe(e,t){e!=null&&(e+="");var n=t.overflow,r=t.padding,i=t.font,a=n==="truncate",o=Sz(i),s=Xr(t.lineHeight,o),l=!!t.backgroundColor,c=t.lineOverflow==="truncate",h=!1,f=t.width,p;f!=null&&(n==="break"||n==="breakAll")?p=e?CJ(e,t.font,f,n==="breakAll",0).lines:[]:p=e?e.split(`
`):[];var v=p.length*s,_=Xr(t.height,v);if(v>_&&c){var b=Math.floor(_/s);h=h||p.length>b,p=p.slice(0,b)}if(e&&a&&f!=null)for(var C=xJ(f,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),T={},E=0;E<p.length;E++)SJ(T,p[E],C),p[E]=T.textLine,h=h||T.isTruncated;for(var A=_,I=0,E=0;E<p.length;E++)I=Math.max(gl(p[E],i),I);f==null&&(f=I);var O=I;return r&&(A+=r[0]+r[2],O+=r[1]+r[3],f+=r[1]+r[3]),l&&(O=f),{lines:p,height:_,outerWidth:O,outerHeight:A,lineHeight:s,calculatedLineHeight:o,contentWidth:I,contentHeight:v,width:f,isTruncated:h}}var HFe=function(){function e(){}return e}(),jV=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),jFe=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return e}();function UFe(e,t){var n=new jFe;if(e!=null&&(e+=""),!e)return n;for(var r=t.width,i=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=iI.lastIndex=0,l;(l=iI.exec(e))!=null;){var c=l.index;c>s&&aI(n,e.substring(s,c),t,o),aI(n,l[2],t,o,l[1]),s=iI.lastIndex}s<e.length&&aI(n,e.substring(s,e.length),t,o);var h=[],f=0,p=0,v=t.padding,_=a==="truncate",b=t.lineOverflow==="truncate",C={};function T(oe,be,we){oe.width=be,oe.lineHeight=we,f+=we,p=Math.max(p,be)}e:for(var E=0;E<n.lines.length;E++){for(var A=n.lines[E],I=0,O=0,B=0;B<A.tokens.length;B++){var N=A.tokens[B],H=N.styleName&&t.rich[N.styleName]||{},j=N.textPadding=H.padding,W=j?j[1]+j[3]:0,U=N.font=H.font||t.font;N.contentHeight=Sz(U);var Y=Xr(H.height,N.contentHeight);if(N.innerHeight=Y,j&&(Y+=j[0]+j[2]),N.height=Y,N.lineHeight=E1(H.lineHeight,t.lineHeight,Y),N.align=H&&H.align||t.align,N.verticalAlign=H&&H.verticalAlign||"middle",b&&i!=null&&f+N.lineHeight>i){var ie=n.lines.length;B>0?(A.tokens=A.tokens.slice(0,B),T(A,O,I),n.lines=n.lines.slice(0,E+1)):n.lines=n.lines.slice(0,E),n.isTruncated=n.isTruncated||n.lines.length<ie;break e}var ue=H.width,J=ue==null||ue==="auto";if(typeof ue=="string"&&ue.charAt(ue.length-1)==="%")N.percentWidth=ue,h.push(N),N.contentWidth=gl(N.text,U);else{if(J){var q=H.backgroundColor,ce=q&&q.image;ce&&(ce=FFe(ce),Tk(ce)&&(N.width=Math.max(N.width,ce.width*Y/ce.height)))}var re=_&&r!=null?r-O:null;re!=null&&re<N.width?!J||re<W?(N.text="",N.width=N.contentWidth=0):(NFe(C,N.text,re-W,U,t.ellipsis,{minChar:t.truncateMinChar}),N.text=C.text,n.isTruncated=n.isTruncated||C.isTruncated,N.width=N.contentWidth=gl(N.text,U)):N.contentWidth=gl(N.text,U)}N.width+=W,O+=N.width,H&&(I=Math.max(I,N.lineHeight))}T(A,O,I)}n.outerWidth=n.width=Xr(r,p),n.outerHeight=n.height=Xr(i,f),n.contentHeight=f,n.contentWidth=p,v&&(n.outerWidth+=v[1]+v[3],n.outerHeight+=v[0]+v[2]);for(var E=0;E<h.length;E++){var N=h[E],ee=N.percentWidth;N.width=parseInt(ee,10)/100*n.width}return n}function aI(e,t,n,r,i){var a=t==="",o=i&&n.rich[i]||{},s=e.lines,l=o.font||n.font,c=!1,h,f;if(r){var p=o.padding,v=p?p[1]+p[3]:0;if(o.width!=null&&o.width!=="auto"){var _=ed(o.width,r.width)+v;s.length>0&&_+r.accumWidth>r.width&&(h=t.split(`
`),c=!0),r.accumWidth=_}else{var b=CJ(t,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=b.accumWidth+v,f=b.linesWidths,h=b.lines}}else h=t.split(`
`);for(var C=0;C<h.length;C++){var T=h[C],E=new HFe;if(E.styleName=i,E.text=T,E.isLineHolder=!T&&!a,typeof o.width=="number"?E.width=o.width:E.width=f?f[C]:gl(T,l),!C&&!c){var A=(s[s.length-1]||(s[0]=new jV)).tokens,I=A.length;I===1&&A[0].isLineHolder?A[0]=E:(T||!I||a)&&A.push(E)}else s.push(new jV([E]))}}function WFe(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var GFe=Vf(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function KFe(e){return WFe(e)?!!GFe[e]:!0}function CJ(e,t,n,r,i){for(var a=[],o=[],s="",l="",c=0,h=0,f=0;f<e.length;f++){var p=e.charAt(f);if(p===`
`){l&&(s+=l,h+=c),a.push(s),o.push(h),s="",l="",c=0,h=0;continue}var v=gl(p,t),_=r?!1:!KFe(p);if(a.length?h+v>n:i+h+v>n){h?(s||l)&&(_?(s||(s=l,l="",c=0,h=c),a.push(s),o.push(h-c),l+=p,c+=v,s="",h=c):(l&&(s+=l,l="",c=0),a.push(s),o.push(h),s=p,h=v)):_?(a.push(l),o.push(c),l=p,c=v):(a.push(p),o.push(v));continue}h+=v,_?(l+=p,c+=v):(l&&(s+=l,l="",c=0),s+=p)}return!a.length&&!s&&(s=e,l="",c=0),l&&(s+=l),s&&(a.push(s),o.push(h)),a.length===1&&(h+=i),{accumWidth:h,lines:a,linesWidths:o}}var ER="__zr_style_"+Math.round(Math.random()*10),Bv={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Mk={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Bv[ER]=!0;var UV=["z","z2","invisible"],qFe=["invisible"],ZFe=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype._init=function(n){for(var r=va(n),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(n[a]):e.prototype.attrKV.call(this,a,n[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(n,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&YFe(this,n,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(n,r){return this.rectContain(n,r)},t.prototype.traverse=function(n,r){n.call(r,this)},t.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Ti(0,0,0,0)),r?Ti.applyTransform(n,i,r):n.copy(i),(o||s||l)&&(n.width+=o*2+Math.abs(s),n.height+=o*2+Math.abs(l),n.x=Math.min(n.x,n.x+s-o),n.y=Math.min(n.y,n.y+l-o));var c=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-c),n.y=Math.floor(n.y-c),n.width=Math.ceil(n.width+1+c*2),n.height=Math.ceil(n.height+1+c*2))}return n},t.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Ti(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(n){return this.animate("style",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(n,r){n!=="style"?e.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},t.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:Pn(this.style,n),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=Qb,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Qb)},t.prototype.styleUpdated=function(){this.__dirty&=~Qb},t.prototype.createStyle=function(n){return wk(Bv,n)},t.prototype.useStyle=function(n){n[ER]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},t.prototype.isStyleObject=function(n){return n[ER]},t.prototype._innerSaveToNormal=function(n){e.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,UV)},t.prototype._applyStateObj=function(n,r,i,a,o,s){e.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.style?o?a?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(o){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var f=va(h),p=0;p<f.length;p++){var v=f[p];v in c&&(c[v]=c[v],this.style[v]=h[v])}for(var _=va(c),p=0;p<_.length;p++){var v=_[p];this.style[v]=this.style[v]}this._transitionState(n,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var b=this.__inHover?qFe:UV,p=0;p<b.length;p++){var v=b[p];r&&r[v]!=null?this[v]=r[v]:l&&i[v]!=null&&(this[v]=i[v])}},t.prototype._mergeStates=function(n){for(var r=e.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},t.prototype._mergeStyle=function(n,r){return Pn(n,r),n},t.prototype.getAnimationStyleProps=function(){return Mk},t.initDefaultProps=function(){var n=t.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=dl|Qb}(),t}(Sk),oI=new Ti(0,0,0,0),sI=new Ti(0,0,0,0);function YFe(e,t,n){return oI.copy(e.getBoundingRect()),e.transform&&oI.applyTransform(e.transform),sI.width=t,sI.height=n,!oI.intersect(sI)}const xx=ZFe;var Hl=Math.min,jl=Math.max,lI=Math.sin,uI=Math.cos,Gp=Math.PI*2,A2=O0(),P2=O0(),I2=O0();function WV(e,t,n,r,i,a){i[0]=Hl(e,n),i[1]=Hl(t,r),a[0]=jl(e,n),a[1]=jl(t,r)}var GV=[],KV=[];function XFe(e,t,n,r,i,a,o,s,l,c){var h=JX,f=Mo,p=h(e,n,i,o,GV);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var v=0;v<p;v++){var _=f(e,n,i,o,GV[v]);l[0]=Hl(_,l[0]),c[0]=jl(_,c[0])}p=h(t,r,a,s,KV);for(var v=0;v<p;v++){var b=f(t,r,a,s,KV[v]);l[1]=Hl(b,l[1]),c[1]=jl(b,c[1])}l[0]=Hl(e,l[0]),c[0]=jl(e,c[0]),l[0]=Hl(o,l[0]),c[0]=jl(o,c[0]),l[1]=Hl(t,l[1]),c[1]=jl(t,c[1]),l[1]=Hl(s,l[1]),c[1]=jl(s,c[1])}function JFe(e,t,n,r,i,a,o,s){var l=QX,c=zs,h=jl(Hl(l(e,n,i),1),0),f=jl(Hl(l(t,r,a),1),0),p=c(e,n,i,h),v=c(t,r,a,f);o[0]=Hl(e,i,p),o[1]=Hl(t,a,v),s[0]=jl(e,i,p),s[1]=jl(t,a,v)}function QFe(e,t,n,r,i,a,o,s,l){var c=hy,h=fy,f=Math.abs(i-a);if(f%Gp<1e-4&&f>1e-4){s[0]=e-n,s[1]=t-r,l[0]=e+n,l[1]=t+r;return}if(A2[0]=uI(i)*n+e,A2[1]=lI(i)*r+t,P2[0]=uI(a)*n+e,P2[1]=lI(a)*r+t,c(s,A2,P2),h(l,A2,P2),i=i%Gp,i<0&&(i=i+Gp),a=a%Gp,a<0&&(a=a+Gp),i>a&&!o?a+=Gp:i<a&&o&&(i+=Gp),o){var p=a;a=i,i=p}for(var v=0;v<a;v+=Math.PI/2)v>i&&(I2[0]=uI(v)*n+e,I2[1]=lI(v)*r+t,c(s,I2,s),h(l,I2,l))}var Di={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Kp=[],qp=[],Sc=[],Bh=[],Cc=[],Tc=[],cI=Math.min,dI=Math.max,Zp=Math.cos,Yp=Math.sin,Ld=Math.abs,AR=Math.PI,Xh=AR*2,hI=typeof Float32Array<"u",Ab=[];function fI(e){var t=Math.round(e/AR*1e8)/1e8;return t%2*AR}function Ez(e,t){var n=fI(e[0]);n<0&&(n+=Xh);var r=n-e[0],i=e[1];i+=r,!t&&i-n>=Xh?i=n+Xh:t&&n-i>=Xh?i=n-Xh:!t&&n>i?i=n+(Xh-fI(n-i)):t&&n<i&&(i=n-(Xh-fI(i-n))),e[0]=n,e[1]=i}var lm=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,n,r){r=r||0,r>0&&(this._ux=Ld(r/KT/t)||0,this._uy=Ld(r/KT/n)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,n){return this._drawPendingPt(),this.addData(Di.M,t,n),this._ctx&&this._ctx.moveTo(t,n),this._x0=t,this._y0=n,this._xi=t,this._yi=n,this},e.prototype.lineTo=function(t,n){var r=Ld(t-this._xi),i=Ld(n-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Di.L,t,n),this._ctx&&a&&this._ctx.lineTo(t,n),a)this._xi=t,this._yi=n,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=n,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,n,r,i,a,o){return this._drawPendingPt(),this.addData(Di.C,t,n,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(t,n,r,i,a,o),this._xi=a,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,n,r,i){return this._drawPendingPt(),this.addData(Di.Q,t,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(t,n,r,i),this._xi=r,this._yi=i,this},e.prototype.arc=function(t,n,r,i,a,o){this._drawPendingPt(),Ab[0]=i,Ab[1]=a,Ez(Ab,o),i=Ab[0],a=Ab[1];var s=a-i;return this.addData(Di.A,t,n,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(t,n,r,i,a,o),this._xi=Zp(a)*r+t,this._yi=Yp(a)*r+n,this},e.prototype.arcTo=function(t,n,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,n,r,i,a),this},e.prototype.rect=function(t,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,n,r,i),this.addData(Di.R,t,n,r,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Di.Z);var t=this._ctx,n=this._x0,r=this._y0;return t&&t.closePath(),this._xi=n,this._yi=r,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var n=t.length;!(this.data&&this.data.length===n)&&hI&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=t[r];this._len=n},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var n=t.length,r=0,i=this._len,a=0;a<n;a++)r+=t[a].len();hI&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<n;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},e.prototype.addData=function(t,n,r,i,a,o,s,l,c){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var f=0;f<arguments.length;f++)h[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],n=0;n<this._len;n++)t[n]=this.data[n];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,hI&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Sc[0]=Sc[1]=Cc[0]=Cc[1]=Number.MAX_VALUE,Bh[0]=Bh[1]=Tc[0]=Tc[1]=-Number.MAX_VALUE;var t=this.data,n=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],l=o===1;switch(l&&(n=t[o],r=t[o+1],i=n,a=r),s){case Di.M:n=i=t[o++],r=a=t[o++],Cc[0]=i,Cc[1]=a,Tc[0]=i,Tc[1]=a;break;case Di.L:WV(n,r,t[o],t[o+1],Cc,Tc),n=t[o++],r=t[o++];break;case Di.C:XFe(n,r,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],Cc,Tc),n=t[o++],r=t[o++];break;case Di.Q:JFe(n,r,t[o++],t[o++],t[o],t[o+1],Cc,Tc),n=t[o++],r=t[o++];break;case Di.A:var c=t[o++],h=t[o++],f=t[o++],p=t[o++],v=t[o++],_=t[o++]+v;o+=1;var b=!t[o++];l&&(i=Zp(v)*f+c,a=Yp(v)*p+h),QFe(c,h,f,p,v,_,b,Cc,Tc),n=Zp(_)*f+c,r=Yp(_)*p+h;break;case Di.R:i=n=t[o++],a=r=t[o++];var C=t[o++],T=t[o++];WV(i,a,i+C,a+T,Cc,Tc);break;case Di.Z:n=i,r=a;break}hy(Sc,Sc,Cc),fy(Bh,Bh,Tc)}return o===0&&(Sc[0]=Sc[1]=Bh[0]=Bh[1]=0),new Ti(Sc[0],Sc[1],Bh[0]-Sc[0],Bh[1]-Sc[1])},e.prototype._calculateLength=function(){var t=this.data,n=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,h=0,f=0,p=0;p<n;){var v=t[p++],_=p===1;_&&(a=t[p],o=t[p+1],s=a,l=o);var b=-1;switch(v){case Di.M:a=s=t[p++],o=l=t[p++];break;case Di.L:{var C=t[p++],T=t[p++],E=C-a,A=T-o;(Ld(E)>r||Ld(A)>i||p===n-1)&&(b=Math.sqrt(E*E+A*A),a=C,o=T);break}case Di.C:{var I=t[p++],O=t[p++],C=t[p++],T=t[p++],B=t[p++],N=t[p++];b=_Be(a,o,I,O,C,T,B,N,10),a=B,o=N;break}case Di.Q:{var I=t[p++],O=t[p++],C=t[p++],T=t[p++];b=xBe(a,o,I,O,C,T,10),a=C,o=T;break}case Di.A:var H=t[p++],j=t[p++],W=t[p++],U=t[p++],Y=t[p++],ie=t[p++],ue=ie+Y;p+=1,_&&(s=Zp(Y)*W+H,l=Yp(Y)*U+j),b=dI(W,U)*cI(Xh,Math.abs(ie)),a=Zp(ue)*W+H,o=Yp(ue)*U+j;break;case Di.R:{s=a=t[p++],l=o=t[p++];var J=t[p++],q=t[p++];b=J*2+q*2;break}case Di.Z:{var E=s-a,A=l-o;b=Math.sqrt(E*E+A*A),a=s,o=l;break}}b>=0&&(c[f++]=b,h+=b)}return this._pathLen=h,h},e.prototype.rebuildPath=function(t,n){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,c,h,f,p,v=n<1,_,b,C=0,T=0,E,A=0,I,O;if(!(v&&(this._pathSegLen||this._calculateLength(),_=this._pathSegLen,b=this._pathLen,E=n*b,!E)))e:for(var B=0;B<o;){var N=r[B++],H=B===1;switch(H&&(c=r[B],h=r[B+1],s=c,l=h),N!==Di.L&&A>0&&(t.lineTo(I,O),A=0),N){case Di.M:s=c=r[B++],l=h=r[B++],t.moveTo(c,h);break;case Di.L:{f=r[B++],p=r[B++];var j=Ld(f-c),W=Ld(p-h);if(j>i||W>a){if(v){var U=_[T++];if(C+U>E){var Y=(E-C)/U;t.lineTo(c*(1-Y)+f*Y,h*(1-Y)+p*Y);break e}C+=U}t.lineTo(f,p),c=f,h=p,A=0}else{var ie=j*j+W*W;ie>A&&(I=f,O=p,A=ie)}break}case Di.C:{var ue=r[B++],J=r[B++],q=r[B++],ce=r[B++],re=r[B++],ee=r[B++];if(v){var U=_[T++];if(C+U>E){var Y=(E-C)/U;UT(c,ue,q,re,Y,Kp),UT(h,J,ce,ee,Y,qp),t.bezierCurveTo(Kp[1],qp[1],Kp[2],qp[2],Kp[3],qp[3]);break e}C+=U}t.bezierCurveTo(ue,J,q,ce,re,ee),c=re,h=ee;break}case Di.Q:{var ue=r[B++],J=r[B++],q=r[B++],ce=r[B++];if(v){var U=_[T++];if(C+U>E){var Y=(E-C)/U;WT(c,ue,q,Y,Kp),WT(h,J,ce,Y,qp),t.quadraticCurveTo(Kp[1],qp[1],Kp[2],qp[2]);break e}C+=U}t.quadraticCurveTo(ue,J,q,ce),c=q,h=ce;break}case Di.A:var oe=r[B++],be=r[B++],we=r[B++],pe=r[B++],Ce=r[B++],Ve=r[B++],et=r[B++],Ee=!r[B++],Je=we>pe?we:pe,Ue=Ld(we-pe)>.001,yt=Ce+Ve,Ne=!1;if(v){var U=_[T++];C+U>E&&(yt=Ce+Ve*(E-C)/U,Ne=!0),C+=U}if(Ue&&t.ellipse?t.ellipse(oe,be,we,pe,et,Ce,yt,Ee):t.arc(oe,be,Je,Ce,yt,Ee),Ne)break e;H&&(s=Zp(Ce)*we+oe,l=Yp(Ce)*pe+be),c=Zp(yt)*we+oe,h=Yp(yt)*pe+be;break;case Di.R:s=c=r[B],l=h=r[B+1],f=r[B++],p=r[B++];var dt=r[B++],Le=r[B++];if(v){var U=_[T++];if(C+U>E){var ze=E-C;t.moveTo(f,p),t.lineTo(f+cI(ze,dt),p),ze-=dt,ze>0&&t.lineTo(f+dt,p+cI(ze,Le)),ze-=Le,ze>0&&t.lineTo(f+dI(dt-ze,0),p+Le),ze-=dt,ze>0&&t.lineTo(f,p+dI(Le-ze,0));break e}C+=U}t.rect(f,p,dt,Le);break;case Di.Z:if(v){var U=_[T++];if(C+U>E){var Y=(E-C)/U;t.lineTo(c*(1-Y)+s*Y,h*(1-Y)+l*Y);break e}C+=U}t.closePath(),c=s,h=l}}},e.prototype.clone=function(){var t=new e,n=this.data;return t.data=n.slice?n.slice():Array.prototype.slice.call(n),t._len=this._len,t},e.CMD=Di,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function Og(e,t,n,r,i,a,o){if(i===0)return!1;var s=i,l=0,c=e;if(o>t+s&&o>r+s||o<t-s&&o<r-s||a>e+s&&a>n+s||a<e-s&&a<n-s)return!1;if(e!==n)l=(t-r)/(e-n),c=(e*r-n*t)/(e-n);else return Math.abs(a-e)<=s/2;var h=l*a-o+c,f=h*h/(l*l+1);return f<=s/2*s/2}function eNe(e,t,n,r,i,a,o,s,l,c,h){if(l===0)return!1;var f=l;if(h>t+f&&h>r+f&&h>a+f&&h>s+f||h<t-f&&h<r-f&&h<a-f&&h<s-f||c>e+f&&c>n+f&&c>i+f&&c>o+f||c<e-f&&c<n-f&&c<i-f&&c<o-f)return!1;var p=yBe(e,t,n,r,i,a,o,s,c,h);return p<=f/2}function tNe(e,t,n,r,i,a,o,s,l){if(o===0)return!1;var c=o;if(l>t+c&&l>r+c&&l>a+c||l<t-c&&l<r-c&&l<a-c||s>e+c&&s>n+c&&s>i+c||s<e-c&&s<n-c&&s<i-c)return!1;var h=wBe(e,t,n,r,i,a,s,l);return h<=c/2}var qV=Math.PI*2;function L2(e){return e%=qV,e<0&&(e+=qV),e}var Pb=Math.PI*2;function nNe(e,t,n,r,i,a,o,s,l){if(o===0)return!1;var c=o;s-=e,l-=t;var h=Math.sqrt(s*s+l*l);if(h-c>n||h+c<n)return!1;if(Math.abs(r-i)%Pb<1e-4)return!0;if(a){var f=r;r=L2(i),i=L2(f)}else r=L2(r),i=L2(i);r>i&&(i+=Pb);var p=Math.atan2(l,s);return p<0&&(p+=Pb),p>=r&&p<=i||p+Pb>=r&&p+Pb<=i}function Xp(e,t,n,r,i,a){if(a>t&&a>r||a<t&&a<r||r===t)return 0;var o=(a-t)/(r-t),s=r<t?1:-1;(o===1||o===0)&&(s=r<t?.5:-.5);var l=o*(n-e)+e;return l===i?1/0:l>i?s:0}var Fh=lm.CMD,Jp=Math.PI*2,rNe=1e-4;function iNe(e,t){return Math.abs(e-t)<rNe}var hs=[-1,-1,-1],Nl=[-1,-1];function aNe(){var e=Nl[0];Nl[0]=Nl[1],Nl[1]=e}function oNe(e,t,n,r,i,a,o,s,l,c){if(c>t&&c>r&&c>a&&c>s||c<t&&c<r&&c<a&&c<s)return 0;var h=jT(t,r,a,s,c,hs);if(h===0)return 0;for(var f=0,p=-1,v=void 0,_=void 0,b=0;b<h;b++){var C=hs[b],T=C===0||C===1?.5:1,E=Mo(e,n,i,o,C);E<l||(p<0&&(p=JX(t,r,a,s,Nl),Nl[1]<Nl[0]&&p>1&&aNe(),v=Mo(t,r,a,s,Nl[0]),p>1&&(_=Mo(t,r,a,s,Nl[1]))),p===2?C<Nl[0]?f+=v<t?T:-T:C<Nl[1]?f+=_<v?T:-T:f+=s<_?T:-T:C<Nl[0]?f+=v<t?T:-T:f+=s<v?T:-T)}return f}function sNe(e,t,n,r,i,a,o,s){if(s>t&&s>r&&s>a||s<t&&s<r&&s<a)return 0;var l=bBe(t,r,a,s,hs);if(l===0)return 0;var c=QX(t,r,a);if(c>=0&&c<=1){for(var h=0,f=zs(t,r,a,c),p=0;p<l;p++){var v=hs[p]===0||hs[p]===1?.5:1,_=zs(e,n,i,hs[p]);_<o||(hs[p]<c?h+=f<t?v:-v:h+=a<f?v:-v)}return h}else{var v=hs[0]===0||hs[0]===1?.5:1,_=zs(e,n,i,hs[0]);return _<o?0:a<t?v:-v}}function lNe(e,t,n,r,i,a,o,s){if(s-=t,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);hs[0]=-l,hs[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=Jp-1e-4){r=0,i=Jp;var h=a?1:-1;return o>=hs[0]+e&&o<=hs[1]+e?h:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=Jp,i+=Jp);for(var p=0,v=0;v<2;v++){var _=hs[v];if(_+e>o){var b=Math.atan2(s,_),h=a?1:-1;b<0&&(b=Jp+b),(b>=r&&b<=i||b+Jp>=r&&b+Jp<=i)&&(b>Math.PI/2&&b<Math.PI*1.5&&(h=-h),p+=h)}}return p}function TJ(e,t,n,r,i){for(var a=e.data,o=e.len(),s=0,l=0,c=0,h=0,f=0,p,v,_=0;_<o;){var b=a[_++],C=_===1;switch(b===Fh.M&&_>1&&(n||(s+=Xp(l,c,h,f,r,i))),C&&(l=a[_],c=a[_+1],h=l,f=c),b){case Fh.M:h=a[_++],f=a[_++],l=h,c=f;break;case Fh.L:if(n){if(Og(l,c,a[_],a[_+1],t,r,i))return!0}else s+=Xp(l,c,a[_],a[_+1],r,i)||0;l=a[_++],c=a[_++];break;case Fh.C:if(n){if(eNe(l,c,a[_++],a[_++],a[_++],a[_++],a[_],a[_+1],t,r,i))return!0}else s+=oNe(l,c,a[_++],a[_++],a[_++],a[_++],a[_],a[_+1],r,i)||0;l=a[_++],c=a[_++];break;case Fh.Q:if(n){if(tNe(l,c,a[_++],a[_++],a[_],a[_+1],t,r,i))return!0}else s+=sNe(l,c,a[_++],a[_++],a[_],a[_+1],r,i)||0;l=a[_++],c=a[_++];break;case Fh.A:var T=a[_++],E=a[_++],A=a[_++],I=a[_++],O=a[_++],B=a[_++];_+=1;var N=!!(1-a[_++]);p=Math.cos(O)*A+T,v=Math.sin(O)*I+E,C?(h=p,f=v):s+=Xp(l,c,p,v,r,i);var H=(r-T)*I/A+T;if(n){if(nNe(T,E,I,O,O+B,N,t,H,i))return!0}else s+=lNe(T,E,I,O,O+B,N,H,i);l=Math.cos(O+B)*A+T,c=Math.sin(O+B)*I+E;break;case Fh.R:h=l=a[_++],f=c=a[_++];var j=a[_++],W=a[_++];if(p=h+j,v=f+W,n){if(Og(h,f,p,f,t,r,i)||Og(p,f,p,v,t,r,i)||Og(p,v,h,v,t,r,i)||Og(h,v,h,f,t,r,i))return!0}else s+=Xp(p,f,p,v,r,i),s+=Xp(h,v,h,f,r,i);break;case Fh.Z:if(n){if(Og(l,c,h,f,t,r,i))return!0}else s+=Xp(l,c,h,f,r,i);l=h,c=f;break}}return!n&&!iNe(c,f)&&(s+=Xp(l,c,h,f,r,i)||0),s!==0}function uNe(e,t,n){return TJ(e,0,!1,t,n)}function cNe(e,t,n,r){return TJ(e,t,!0,n,r)}var MJ=hi({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Bv),dNe={style:hi({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Mk.style)},pI=Cw.concat(["invisible","culling","z","z2","zlevel","parent"]),Ii=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.update=function(){var n=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<pI.length;++s)i[pI[s]]=this[pI[s]];i.__dirty|=dl}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(n){var r=va(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=n[o];o==="style"?this.style?Pn(this.style,s):this.useStyle(s):o==="shape"?Pn(this.shape,s):e.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(Qn(n)){var r=GT(n,0);return r>.5?CR:r>.2?WBe:TR}else if(n)return TR}return CR},t.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(Qn(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=GT(n,0)<SR;if(a===o)return r}},t.prototype.buildPath=function(n,r,i){},t.prototype.pathUpdated=function(){this.__dirty&=~ty},t.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},t.prototype.createPathProxy=function(){this.path=new lm(!1)},t.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},t.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},t.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&ty)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),n=o.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;c=Math.max(c,h??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return n},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect(),o=this.style;if(n=i[0],r=i[1],a.contain(n,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),cNe(s,l/c,n,r)))return!0}if(this.hasFill())return uNe(s,n,r)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=ty,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(n){return this.animate("shape",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):e.prototype.attrKV.call(this,n,r)},t.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:Pn(i,n),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&ty)},t.prototype.createStyle=function(n){return wk(MJ,n)},t.prototype._innerSaveToNormal=function(n){e.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=Pn({},this.shape))},t.prototype._applyStateObj=function(n,r,i,a,o,s){e.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.shape?o?a?c=r.shape:(c=Pn({},i.shape),Pn(c,r.shape)):(c=Pn({},a?this.shape:i.shape),Pn(c,r.shape)):l&&(c=i.shape),c)if(o){this.shape=Pn({},this.shape);for(var h={},f=va(c),p=0;p<f.length;p++){var v=f[p];typeof c[v]=="object"?this.shape[v]=c[v]:h[v]=c[v]}this._transitionState(n,{shape:h},s)}else this.shape=c,this.dirtyShape()},t.prototype._mergeStates=function(n){for(var r=e.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},t.prototype.getAnimationStyleProps=function(){return dNe},t.prototype.isZeroArea=function(){return!1},t.extend=function(n){var r=function(a){xn(o,a);function o(s){var l=a.call(this,s)||this;return n.init&&n.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return wr(n.style)},o.prototype.getDefaultShape=function(){return wr(n.shape)},o}(t);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},t.initDefaultProps=function(){var n=t.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=dl|Qb|ty}(),t}(xx),hNe=hi({strokeFirst:!0,font:am,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},MJ),XT=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},t.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},t.prototype.createStyle=function(n){return wk(hNe,n)},t.prototype.setBoundingRect=function(n){this._rect=n},t.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=xk(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var a=n.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var n=t.prototype;n.dirtyRectTolerance=10}(),t}(xx);XT.prototype.type="tspan";var fNe=hi({x:0,y:0},Bv),pNe={style:hi({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Mk.style)};function vNe(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var sc=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(n){return wk(fNe,n)},t.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var a=vNe(r.image)?r.image:this.__image;if(!a)return 0;var o=n==="width"?"height":"width",s=r[o];return s==null?a[n]:a[n]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return pNe},t.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Ti(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},t}(xx);sc.prototype.type="image";function mNe(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=t.r,s,l,c,h;i<0&&(n=n+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=c=h=o:o instanceof Array?o.length===1?s=l=c=h=o[0]:o.length===2?(s=c=o[0],l=h=o[1]):o.length===3?(s=o[0],l=h=o[1],c=o[2]):(s=o[0],l=o[1],c=o[2],h=o[3]):s=l=c=h=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),c+h>i&&(f=c+h,c*=i/f,h*=i/f),l+c>a&&(f=l+c,l*=a/f,c*=a/f),s+h>a&&(f=s+h,s*=a/f,h*=a/f),e.moveTo(n+s,r),e.lineTo(n+i-l,r),l!==0&&e.arc(n+i-l,r+l,l,-Math.PI/2,0),e.lineTo(n+i,r+a-c),c!==0&&e.arc(n+i-c,r+a-c,c,0,Math.PI/2),e.lineTo(n+h,r+a),h!==0&&e.arc(n+h,r+a-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+s),s!==0&&e.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var vy=Math.round;function kJ(e,t,n){if(t){var r=t.x1,i=t.x2,a=t.y1,o=t.y2;e.x1=r,e.x2=i,e.y1=a,e.y2=o;var s=n&&n.lineWidth;return s&&(vy(r*2)===vy(i*2)&&(e.x1=e.x2=Cv(r,s,!0)),vy(a*2)===vy(o*2)&&(e.y1=e.y2=Cv(a,s,!0))),e}}function EJ(e,t,n){if(t){var r=t.x,i=t.y,a=t.width,o=t.height;e.x=r,e.y=i,e.width=a,e.height=o;var s=n&&n.lineWidth;return s&&(e.x=Cv(r,s,!0),e.y=Cv(i,s,!0),e.width=Math.max(Cv(r+a,s,!1)-e.x,a===0?0:1),e.height=Math.max(Cv(i+o,s,!1)-e.y,o===0?0:1)),e}}function Cv(e,t,n){if(!t)return e;var r=vy(e*2);return(r+vy(t))%2===0?r/2:(r+(n?1:-1))/2}var gNe=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),yNe={},Pi=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new gNe},t.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=EJ(yNe,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?mNe(n,r):n.rect(i,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Ii);Pi.prototype.type="rect";var ZV={fill:"#000"},YV=2,_Ne={style:hi({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Mk.style)},Mi=function(e){xn(t,e);function t(n){var r=e.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=ZV,r.attr(n),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},t.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):e.prototype.getLocalTransform.call(this,n)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,CNe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(n){e.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},t.prototype.removeSelfFromZr=function(n){e.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Ti(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(n.copy(l),n.applyTransform(c),a=a||n.clone(),a.union(n)):(a=a||l.clone(),a.union(l))}this._rect=a||n}return this._rect},t.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||ZV},t.prototype.setTextContent=function(n){},t.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,a=n.rich||i&&{};return Pn(n,r),i&&a?(this._mergeRich(a,i),n.rich=a):a&&(n.rich=a),n},t.prototype._mergeRich=function(n,r){for(var i=va(r),a=0;a<i.length;a++){var o=i[a];n[o]=n[o]||{},Pn(n[o],r[o])}},t.prototype.getAnimationStyleProps=function(){return _Ne},t.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},t.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||am,i=n.padding,a=rH(n),o=VFe(a,n),s=vI(n),l=!!n.backgroundColor,c=o.outerHeight,h=o.outerWidth,f=o.contentWidth,p=o.lines,v=o.lineHeight,_=this._defaultStyle;this.isTruncated=!!o.isTruncated;var b=n.x||0,C=n.y||0,T=n.align||_.align||"left",E=n.verticalAlign||_.verticalAlign||"top",A=b,I=ny(C,o.contentHeight,E);if(s||i){var O=t1(b,h,T),B=ny(C,c,E);s&&this._renderBackground(n,n,O,B,h,c)}I+=v/2,i&&(A=nH(b,T,i),E==="top"?I+=i[0]:E==="bottom"&&(I-=i[2]));for(var N=0,H=!1,j=tH("fill"in n?n.fill:(H=!0,_.fill)),W=eH("stroke"in n?n.stroke:!l&&(!_.autoStroke||H)?(N=YV,_.stroke):null),U=n.textShadowBlur>0,Y=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),ie=o.calculatedLineHeight,ue=0;ue<p.length;ue++){var J=this._getOrCreateChild(XT),q=J.createStyle();J.useStyle(q),q.text=p[ue],q.x=A,q.y=I,T&&(q.textAlign=T),q.textBaseline="middle",q.opacity=n.opacity,q.strokeFirst=!0,U&&(q.shadowBlur=n.textShadowBlur||0,q.shadowColor=n.textShadowColor||"transparent",q.shadowOffsetX=n.textShadowOffsetX||0,q.shadowOffsetY=n.textShadowOffsetY||0),q.stroke=W,q.fill=j,W&&(q.lineWidth=n.lineWidth||N,q.lineDash=n.lineDash,q.lineDashOffset=n.lineDashOffset||0),q.font=r,JV(q,n),I+=v,Y&&J.setBoundingRect(new Ti(t1(q.x,f,q.textAlign),ny(q.y,ie,q.textBaseline),f,ie))}},t.prototype._updateRichTexts=function(){var n=this.style,r=rH(n),i=UFe(r,n),a=i.width,o=i.outerWidth,s=i.outerHeight,l=n.padding,c=n.x||0,h=n.y||0,f=this._defaultStyle,p=n.align||f.align,v=n.verticalAlign||f.verticalAlign;this.isTruncated=!!i.isTruncated;var _=t1(c,o,p),b=ny(h,s,v),C=_,T=b;l&&(C+=l[3],T+=l[0]);var E=C+a;vI(n)&&this._renderBackground(n,n,_,b,o,s);for(var A=!!n.backgroundColor,I=0;I<i.lines.length;I++){for(var O=i.lines[I],B=O.tokens,N=B.length,H=O.lineHeight,j=O.width,W=0,U=C,Y=E,ie=N-1,ue=void 0;W<N&&(ue=B[W],!ue.align||ue.align==="left");)this._placeToken(ue,n,H,T,U,"left",A),j-=ue.width,U+=ue.width,W++;for(;ie>=0&&(ue=B[ie],ue.align==="right");)this._placeToken(ue,n,H,T,Y,"right",A),j-=ue.width,Y-=ue.width,ie--;for(U+=(a-(U-C)-(E-Y)-j)/2;W<=ie;)ue=B[W],this._placeToken(ue,n,H,T,U+ue.width/2,"center",A),U+=ue.width,W++;T+=H}},t.prototype._placeToken=function(n,r,i,a,o,s,l){var c=r.rich[n.styleName]||{};c.text=n.text;var h=n.verticalAlign,f=a+i/2;h==="top"?f=a+n.height/2:h==="bottom"&&(f=a+i-n.height/2);var p=!n.isLineHolder&&vI(c);p&&this._renderBackground(c,r,s==="right"?o-n.width:s==="center"?o-n.width/2:o,f-n.height/2,n.width,n.height);var v=!!c.backgroundColor,_=n.textPadding;_&&(o=nH(o,s,_),f-=n.height/2-_[0]-n.innerHeight/2);var b=this._getOrCreateChild(XT),C=b.createStyle();b.useStyle(C);var T=this._defaultStyle,E=!1,A=0,I=tH("fill"in c?c.fill:"fill"in r?r.fill:(E=!0,T.fill)),O=eH("stroke"in c?c.stroke:"stroke"in r?r.stroke:!v&&!l&&(!T.autoStroke||E)?(A=YV,T.stroke):null),B=c.textShadowBlur>0||r.textShadowBlur>0;C.text=n.text,C.x=o,C.y=f,B&&(C.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,C.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",C.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,C.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),C.textAlign=s,C.textBaseline="middle",C.font=n.font||am,C.opacity=E1(c.opacity,r.opacity,1),JV(C,c),O&&(C.lineWidth=E1(c.lineWidth,r.lineWidth,A),C.lineDash=Xr(c.lineDash,r.lineDash),C.lineDashOffset=r.lineDashOffset||0,C.stroke=O),I&&(C.fill=I);var N=n.contentWidth,H=n.contentHeight;b.setBoundingRect(new Ti(t1(C.x,N,C.textAlign),ny(C.y,H,C.textBaseline),N,H))},t.prototype._renderBackground=function(n,r,i,a,o,s){var l=n.backgroundColor,c=n.borderWidth,h=n.borderColor,f=l&&l.image,p=l&&!f,v=n.borderRadius,_=this,b,C;if(p||n.lineHeight||c&&h){b=this._getOrCreateChild(Pi),b.useStyle(b.createStyle()),b.style.fill=null;var T=b.shape;T.x=i,T.y=a,T.width=o,T.height=s,T.r=v,b.dirtyShape()}if(p){var E=b.style;E.fill=l||null,E.fillOpacity=Xr(n.fillOpacity,1)}else if(f){C=this._getOrCreateChild(sc),C.onload=function(){_.dirtyStyle()};var A=C.style;A.image=l.image,A.x=i,A.y=a,A.width=o,A.height=s}if(c&&h){var E=b.style;E.lineWidth=c,E.stroke=h,E.strokeOpacity=Xr(n.strokeOpacity,1),E.lineDash=n.borderDash,E.lineDashOffset=n.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(E.strokeFirst=!0,E.lineWidth*=2)}var I=(b||C).style;I.shadowBlur=n.shadowBlur||0,I.shadowColor=n.shadowColor||"transparent",I.shadowOffsetX=n.shadowOffsetX||0,I.shadowOffsetY=n.shadowOffsetY||0,I.opacity=E1(n.opacity,r.opacity,1)},t.makeFont=function(n){var r="";return SNe(n)&&(r=[n.fontStyle,n.fontWeight,xNe(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&Hc(r)||n.textFont||n.font},t}(xx),bNe={left:!0,right:1,center:1},wNe={top:1,bottom:1,middle:1},XV=["fontStyle","fontWeight","fontSize","fontFamily"];function xNe(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?hz+"px":e+"px"}function JV(e,t){for(var n=0;n<XV.length;n++){var r=XV[n],i=t[r];i!=null&&(e[r]=i)}}function SNe(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function CNe(e){return QV(e),qe(e.rich,QV),e}function QV(e){if(e){e.font=Mi.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||bNe[t]?t:"left";var n=e.verticalAlign;n==="center"&&(n="middle"),e.verticalAlign=n==null||wNe[n]?n:"top";var r=e.padding;r&&(e.padding=VX(e.padding))}}function eH(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function tH(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function nH(e,t,n){return t==="right"?e-n[1]:t==="center"?e+n[3]/2-n[1]/2:e+n[3]}function rH(e){var t=e.text;return t!=null&&(t+=""),t}function vI(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var yi=Sa(),PR=function(e,t,n,r){if(r){var i=yi(r);i.dataIndex=n,i.dataType=t,i.seriesIndex=e,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=yi(a);o.seriesIndex=e,o.dataIndex=n,o.dataType=t,o.ssrType="chart"})}},iH=1,aH={},AJ=Sa(),Az=Sa(),Pz=0,kk=1,Ek=2,au=["emphasis","blur","select"],JT=["normal","emphasis","blur","select"],TNe=10,MNe=9,Fv="highlight",jC="downplay",D1="select",UC="unselect",R1="toggleSelect";function zg(e){return e!=null&&e!=="none"}function Ak(e,t,n){e.onHoverStateChange&&(e.hoverState||0)!==n&&e.onHoverStateChange(t),e.hoverState=n}function PJ(e){Ak(e,"emphasis",Ek)}function IJ(e){e.hoverState===Ek&&Ak(e,"normal",Pz)}function Iz(e){Ak(e,"blur",kk)}function LJ(e){e.hoverState===kk&&Ak(e,"normal",Pz)}function kNe(e){e.selected=!0}function ENe(e){e.selected=!1}function oH(e,t,n){t(e,n)}function sh(e,t,n){oH(e,t,n),e.isGroup&&e.traverse(function(r){oH(r,t,n)})}function sH(e,t){switch(t){case"emphasis":e.hoverState=Ek;break;case"normal":e.hoverState=Pz;break;case"blur":e.hoverState=kk;break;case"select":e.selected=!0}}function ANe(e,t,n,r){for(var i=e.style,a={},o=0;o<t.length;o++){var s=t[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<e.animators.length;o++){var c=e.animators[o];c.__fromStateTransition&&c.__fromStateTransition.indexOf(n)<0&&c.targetName==="style"&&c.saveTo(a,t)}return a}function PNe(e,t,n,r){var i=n&&pi(n,"select")>=0,a=!1;if(e instanceof Ii){var o=AJ(e),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(zg(s)||zg(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(a=!0,r=Pn({},r),c=Pn({},c),c.fill=s):!zg(c.fill)&&zg(s)?(a=!0,r=Pn({},r),c=Pn({},c),c.fill=TV(s)):!zg(c.stroke)&&zg(l)&&(a||(r=Pn({},r),c=Pn({},c)),c.stroke=TV(l)),r.style=c}}if(r&&r.z2==null){a||(r=Pn({},r));var h=e.z2EmphasisLift;r.z2=e.z2+(h??TNe)}return r}function INe(e,t,n){if(n&&n.z2==null){n=Pn({},n);var r=e.z2SelectLift;n.z2=e.z2+(r??MNe)}return n}function LNe(e,t,n){var r=pi(e.currentStates,t)>=0,i=e.style.opacity,a=r?null:ANe(e,["opacity"],t,{opacity:1});n=n||{};var o=n.style||{};return o.opacity==null&&(n=Pn({},n),o=Pn({opacity:r?i:a.opacity*.1},o),n.style=o),n}function mI(e,t){var n=this.states[e];if(this.style){if(e==="emphasis")return PNe(this,e,t,n);if(e==="blur")return LNe(this,e,n);if(e==="select")return INe(this,e,n)}return n}function DNe(e){e.stateProxy=mI;var t=e.getTextContent(),n=e.getTextGuideLine();t&&(t.stateProxy=mI),n&&(n.stateProxy=mI)}function lH(e,t){!zJ(e,t)&&!e.__highByOuter&&sh(e,PJ)}function uH(e,t){!zJ(e,t)&&!e.__highByOuter&&sh(e,IJ)}function u0(e,t){e.__highByOuter|=1<<(t||0),sh(e,PJ)}function c0(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&sh(e,IJ)}function RNe(e){sh(e,Iz)}function DJ(e){sh(e,LJ)}function RJ(e){sh(e,kNe)}function OJ(e){sh(e,ENe)}function zJ(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function BJ(e){var t=e.getModel(),n=[],r=[];t.eachComponent(function(i,a){var o=Az(a),s=i==="series",l=s?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(c){LJ(c)}),s&&n.push(a)),o.isBlured=!1}),qe(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,t)})}function IR(e,t,n,r){var i=r.getModel();n=n||"coordinateSystem";function a(c,h){for(var f=0;f<h.length;f++){var p=c.getItemGraphicEl(h[f]);p&&DJ(p)}}if(e!=null&&!(!t||t==="none")){var o=i.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(c){var h=o===c,f=c.coordinateSystem;f&&f.master&&(f=f.master);var p=f&&s?f===s:h;if(!(n==="series"&&!h||n==="coordinateSystem"&&!p||t==="series"&&h)){var v=r.getViewOfSeriesModel(c);if(v.group.traverse(function(C){C.__highByOuter&&h&&t==="self"||Iz(C)}),qs(t))a(c.getData(),t);else if(fr(t))for(var _=va(t),b=0;b<_.length;b++)a(c.getData(_[b]),t[_[b]]);l.push(c),Az(c).isBlured=!0}}),i.eachComponent(function(c,h){if(c!=="series"){var f=r.getViewOfComponentModel(h);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function LR(e,t,n){if(!(e==null||t==null)){var r=n.getModel().getComponent(e,t);if(r){Az(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){Iz(a)})}}}function ONe(e,t,n){var r=e.seriesIndex,i=e.getData(t.dataType);if(i){var a=sm(i,t);a=(Vn(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var c=yi(o);IR(r,c.focus,c.blurScope,n)}else{var h=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);h!=null&&IR(r,h,f,n)}}}function Lz(e,t,n,r){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||n==null)return i;var a=r.getModel().getComponent(e,t);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(n),l,c=0;c<s.length;c++)if(yi(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function zNe(e,t,n){var r=yi(e),i=Lz(r.componentMainType,r.componentIndex,r.componentHighDownName,n),a=i.dispatchers,o=i.focusSelf;a?(o&&LR(r.componentMainType,r.componentIndex,n),qe(a,function(s){return lH(s,t)})):(IR(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&LR(r.componentMainType,r.componentIndex,n),lH(e,t))}function BNe(e,t,n){BJ(n);var r=yi(e),i=Lz(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?qe(i,function(a){return uH(a,t)}):uH(e,t)}function FNe(e,t,n){if(RR(t)){var r=t.dataType,i=e.getData(r),a=sm(i,t);Vn(a)||(a=[a]),e[t.type===R1?"toggleSelect":t.type===D1?"select":"unselect"](a,r)}}function cH(e){var t=e.getAllData();qe(t,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(a,o){e.isSelected(o,i)?RJ(a):OJ(a)})})}function NNe(e){var t=[];return e.eachSeries(function(n){var r=n.getAllData();qe(r,function(i){i.data;var a=i.type,o=n.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:n.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function QT(e,t,n){Dz(e,!0),sh(e,DNe),VNe(e,t,n)}function $Ne(e){Dz(e,!1)}function Hf(e,t,n,r){r?$Ne(e):QT(e,t,n)}function VNe(e,t,n){var r=yi(e);t!=null?(r.focus=t,r.blurScope=n):r.focus&&(r.focus=null)}var dH=["emphasis","blur","select"],HNe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function d0(e,t,n,r){n=n||"itemStyle";for(var i=0;i<dH.length;i++){var a=dH[i],o=t.getModel([a,n]),s=e.ensureState(a);s.style=o[HNe[n]]()}}function Dz(e,t){var n=t===!1,r=e;e.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function DR(e){return!!(e&&e.__highDownDispatcher)}function jNe(e){var t=aH[e];return t==null&&iH<=32&&(t=aH[e]=iH++),t}function RR(e){var t=e.type;return t===D1||t===UC||t===R1}function hH(e){var t=e.type;return t===Fv||t===jC}function UNe(e){var t=AJ(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var n=e.states.select||{};t.selectFill=n.style&&n.style.fill||null,t.selectStroke=n.style&&n.style.stroke||null}var Bg=lm.CMD,WNe=[[],[],[]],fH=Math.sqrt,GNe=Math.atan2;function KNe(e,t){if(t){var n=e.data,r=e.len(),i,a,o,s,l,c,h=Bg.M,f=Bg.C,p=Bg.L,v=Bg.R,_=Bg.A,b=Bg.Q;for(o=0,s=0;o<r;){switch(i=n[o++],s=o,a=0,i){case h:a=1;break;case p:a=1;break;case f:a=3;break;case b:a=2;break;case _:var C=t[4],T=t[5],E=fH(t[0]*t[0]+t[1]*t[1]),A=fH(t[2]*t[2]+t[3]*t[3]),I=GNe(-t[1]/A,t[0]/E);n[o]*=E,n[o++]+=C,n[o]*=A,n[o++]+=T,n[o++]*=E,n[o++]*=A,n[o++]+=I,n[o++]+=I,o+=2,s=o;break;case v:c[0]=n[o++],c[1]=n[o++],Ql(c,c,t),n[s++]=c[0],n[s++]=c[1],c[0]+=n[o++],c[1]+=n[o++],Ql(c,c,t),n[s++]=c[0],n[s++]=c[1]}for(l=0;l<a;l++){var O=WNe[l];O[0]=n[o++],O[1]=n[o++],Ql(O,O,t),n[s++]=O[0],n[s++]=O[1]}}e.increaseVersion()}}var gI=Math.sqrt,D2=Math.sin,R2=Math.cos,Ib=Math.PI;function pH(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function OR(e,t){return(e[0]*t[0]+e[1]*t[1])/(pH(e)*pH(t))}function vH(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(OR(e,t))}function mH(e,t,n,r,i,a,o,s,l,c,h){var f=l*(Ib/180),p=R2(f)*(e-n)/2+D2(f)*(t-r)/2,v=-1*D2(f)*(e-n)/2+R2(f)*(t-r)/2,_=p*p/(o*o)+v*v/(s*s);_>1&&(o*=gI(_),s*=gI(_));var b=(i===a?-1:1)*gI((o*o*(s*s)-o*o*(v*v)-s*s*(p*p))/(o*o*(v*v)+s*s*(p*p)))||0,C=b*o*v/s,T=b*-s*p/o,E=(e+n)/2+R2(f)*C-D2(f)*T,A=(t+r)/2+D2(f)*C+R2(f)*T,I=vH([1,0],[(p-C)/o,(v-T)/s]),O=[(p-C)/o,(v-T)/s],B=[(-1*p-C)/o,(-1*v-T)/s],N=vH(O,B);if(OR(O,B)<=-1&&(N=Ib),OR(O,B)>=1&&(N=0),N<0){var H=Math.round(N/Ib*1e6)/1e6;N=Ib*2+H%2*Ib}h.addData(c,E,A,o,s,I,N,f,a)}var qNe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,ZNe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function YNe(e){var t=new lm;if(!e)return t;var n=0,r=0,i=n,a=r,o,s=lm.CMD,l=e.match(qNe);if(!l)return t;for(var c=0;c<l.length;c++){for(var h=l[c],f=h.charAt(0),p=void 0,v=h.match(ZNe)||[],_=v.length,b=0;b<_;b++)v[b]=parseFloat(v[b]);for(var C=0;C<_;){var T=void 0,E=void 0,A=void 0,I=void 0,O=void 0,B=void 0,N=void 0,H=n,j=r,W=void 0,U=void 0;switch(f){case"l":n+=v[C++],r+=v[C++],p=s.L,t.addData(p,n,r);break;case"L":n=v[C++],r=v[C++],p=s.L,t.addData(p,n,r);break;case"m":n+=v[C++],r+=v[C++],p=s.M,t.addData(p,n,r),i=n,a=r,f="l";break;case"M":n=v[C++],r=v[C++],p=s.M,t.addData(p,n,r),i=n,a=r,f="L";break;case"h":n+=v[C++],p=s.L,t.addData(p,n,r);break;case"H":n=v[C++],p=s.L,t.addData(p,n,r);break;case"v":r+=v[C++],p=s.L,t.addData(p,n,r);break;case"V":r=v[C++],p=s.L,t.addData(p,n,r);break;case"C":p=s.C,t.addData(p,v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]),n=v[C-2],r=v[C-1];break;case"c":p=s.C,t.addData(p,v[C++]+n,v[C++]+r,v[C++]+n,v[C++]+r,v[C++]+n,v[C++]+r),n+=v[C-2],r+=v[C-1];break;case"S":T=n,E=r,W=t.len(),U=t.data,o===s.C&&(T+=n-U[W-4],E+=r-U[W-3]),p=s.C,H=v[C++],j=v[C++],n=v[C++],r=v[C++],t.addData(p,T,E,H,j,n,r);break;case"s":T=n,E=r,W=t.len(),U=t.data,o===s.C&&(T+=n-U[W-4],E+=r-U[W-3]),p=s.C,H=n+v[C++],j=r+v[C++],n+=v[C++],r+=v[C++],t.addData(p,T,E,H,j,n,r);break;case"Q":H=v[C++],j=v[C++],n=v[C++],r=v[C++],p=s.Q,t.addData(p,H,j,n,r);break;case"q":H=v[C++]+n,j=v[C++]+r,n+=v[C++],r+=v[C++],p=s.Q,t.addData(p,H,j,n,r);break;case"T":T=n,E=r,W=t.len(),U=t.data,o===s.Q&&(T+=n-U[W-4],E+=r-U[W-3]),n=v[C++],r=v[C++],p=s.Q,t.addData(p,T,E,n,r);break;case"t":T=n,E=r,W=t.len(),U=t.data,o===s.Q&&(T+=n-U[W-4],E+=r-U[W-3]),n+=v[C++],r+=v[C++],p=s.Q,t.addData(p,T,E,n,r);break;case"A":A=v[C++],I=v[C++],O=v[C++],B=v[C++],N=v[C++],H=n,j=r,n=v[C++],r=v[C++],p=s.A,mH(H,j,n,r,B,N,A,I,O,p,t);break;case"a":A=v[C++],I=v[C++],O=v[C++],B=v[C++],N=v[C++],H=n,j=r,n+=v[C++],r+=v[C++],p=s.A,mH(H,j,n,r,B,N,A,I,O,p,t);break}}(f==="z"||f==="Z")&&(p=s.Z,t.addData(p),n=i,r=a),o=p}return t.toStatic(),t}var FJ=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(n){},t}(Ii);function NJ(e){return e.setData!=null}function $J(e,t){var n=YNe(e),r=Pn({},t);return r.buildPath=function(i){if(NJ(i)){i.setData(n.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;n.rebuildPath(a,1)}},r.applyTransform=function(i){KNe(n,i),this.dirtyShape()},r}function XNe(e,t){return new FJ($J(e,t))}function JNe(e,t){var n=$J(e,t),r=function(i){xn(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return a}(FJ);return r}function QNe(e,t){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i];n.push(a.getUpdatedPathProxy(!0))}var o=new Ii(t);return o.createPathProxy(),o.buildPath=function(s){if(NJ(s)){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}var e8e=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),Pk=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new e8e},t.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},t}(Ii);Pk.prototype.type="circle";var t8e=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Rz=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new t8e},t.prototype.buildPath=function(n,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,c=s*i,h=l*i;n.moveTo(a-s,o),n.bezierCurveTo(a-s,o-h,a-c,o-l,a,o-l),n.bezierCurveTo(a+c,o-l,a+s,o-h,a+s,o),n.bezierCurveTo(a+s,o+h,a+c,o+l,a,o+l),n.bezierCurveTo(a-c,o+l,a-s,o+h,a-s,o),n.closePath()},t}(Ii);Rz.prototype.type="ellipse";var VJ=Math.PI,yI=VJ*2,Qp=Math.sin,Fg=Math.cos,n8e=Math.acos,Fo=Math.atan2,gH=Math.abs,O1=Math.sqrt,n1=Math.max,Mc=Math.min,Au=1e-4;function r8e(e,t,n,r,i,a,o,s){var l=n-e,c=r-t,h=o-i,f=s-a,p=f*l-h*c;if(!(p*p<Au))return p=(h*(t-a)-f*(e-i))/p,[e+p*l,t+p*c]}function O2(e,t,n,r,i,a,o){var s=e-n,l=t-r,c=(o?a:-a)/O1(s*s+l*l),h=c*l,f=-c*s,p=e+h,v=t+f,_=n+h,b=r+f,C=(p+_)/2,T=(v+b)/2,E=_-p,A=b-v,I=E*E+A*A,O=i-a,B=p*b-_*v,N=(A<0?-1:1)*O1(n1(0,O*O*I-B*B)),H=(B*A-E*N)/I,j=(-B*E-A*N)/I,W=(B*A+E*N)/I,U=(-B*E+A*N)/I,Y=H-C,ie=j-T,ue=W-C,J=U-T;return Y*Y+ie*ie>ue*ue+J*J&&(H=W,j=U),{cx:H,cy:j,x0:-h,y0:-f,x1:H*(i/O-1),y1:j*(i/O-1)}}function i8e(e){var t;if(Vn(e)){var n=e.length;if(!n)return e;n===1?t=[e[0],e[0],0,0]:n===2?t=[e[0],e[0],e[1],e[1]]:n===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function a8e(e,t){var n,r=n1(t.r,0),i=n1(t.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=t.startAngle,c=t.endAngle;if(!(isNaN(l)||isNaN(c))){var h=t.cx,f=t.cy,p=!!t.clockwise,v=gH(c-l),_=v>yI&&v%yI;if(_>Au&&(v=_),!(r>Au))e.moveTo(h,f);else if(v>yI-Au)e.moveTo(h+r*Fg(l),f+r*Qp(l)),e.arc(h,f,r,l,c,!p),i>Au&&(e.moveTo(h+i*Fg(c),f+i*Qp(c)),e.arc(h,f,i,c,l,p));else{var b=void 0,C=void 0,T=void 0,E=void 0,A=void 0,I=void 0,O=void 0,B=void 0,N=void 0,H=void 0,j=void 0,W=void 0,U=void 0,Y=void 0,ie=void 0,ue=void 0,J=r*Fg(l),q=r*Qp(l),ce=i*Fg(c),re=i*Qp(c),ee=v>Au;if(ee){var oe=t.cornerRadius;oe&&(n=i8e(oe),b=n[0],C=n[1],T=n[2],E=n[3]);var be=gH(r-i)/2;if(A=Mc(be,T),I=Mc(be,E),O=Mc(be,b),B=Mc(be,C),j=N=n1(A,I),W=H=n1(O,B),(N>Au||H>Au)&&(U=r*Fg(c),Y=r*Qp(c),ie=i*Fg(l),ue=i*Qp(l),v<VJ)){var we=r8e(J,q,ie,ue,U,Y,ce,re);if(we){var pe=J-we[0],Ce=q-we[1],Ve=U-we[0],et=Y-we[1],Ee=1/Qp(n8e((pe*Ve+Ce*et)/(O1(pe*pe+Ce*Ce)*O1(Ve*Ve+et*et)))/2),Je=O1(we[0]*we[0]+we[1]*we[1]);j=Mc(N,(r-Je)/(Ee+1)),W=Mc(H,(i-Je)/(Ee-1))}}}if(!ee)e.moveTo(h+J,f+q);else if(j>Au){var Ue=Mc(T,j),yt=Mc(E,j),Ne=O2(ie,ue,J,q,r,Ue,p),dt=O2(U,Y,ce,re,r,yt,p);e.moveTo(h+Ne.cx+Ne.x0,f+Ne.cy+Ne.y0),j<N&&Ue===yt?e.arc(h+Ne.cx,f+Ne.cy,j,Fo(Ne.y0,Ne.x0),Fo(dt.y0,dt.x0),!p):(Ue>0&&e.arc(h+Ne.cx,f+Ne.cy,Ue,Fo(Ne.y0,Ne.x0),Fo(Ne.y1,Ne.x1),!p),e.arc(h,f,r,Fo(Ne.cy+Ne.y1,Ne.cx+Ne.x1),Fo(dt.cy+dt.y1,dt.cx+dt.x1),!p),yt>0&&e.arc(h+dt.cx,f+dt.cy,yt,Fo(dt.y1,dt.x1),Fo(dt.y0,dt.x0),!p))}else e.moveTo(h+J,f+q),e.arc(h,f,r,l,c,!p);if(!(i>Au)||!ee)e.lineTo(h+ce,f+re);else if(W>Au){var Ue=Mc(b,W),yt=Mc(C,W),Ne=O2(ce,re,U,Y,i,-yt,p),dt=O2(J,q,ie,ue,i,-Ue,p);e.lineTo(h+Ne.cx+Ne.x0,f+Ne.cy+Ne.y0),W<H&&Ue===yt?e.arc(h+Ne.cx,f+Ne.cy,W,Fo(Ne.y0,Ne.x0),Fo(dt.y0,dt.x0),!p):(yt>0&&e.arc(h+Ne.cx,f+Ne.cy,yt,Fo(Ne.y0,Ne.x0),Fo(Ne.y1,Ne.x1),!p),e.arc(h,f,i,Fo(Ne.cy+Ne.y1,Ne.cx+Ne.x1),Fo(dt.cy+dt.y1,dt.cx+dt.x1),p),Ue>0&&e.arc(h+dt.cx,f+dt.cy,Ue,Fo(dt.y1,dt.x1),Fo(dt.y0,dt.x0),!p))}else e.lineTo(h+ce,f+re),e.arc(h,f,i,c,l,p)}e.closePath()}}}var o8e=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),nd=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new o8e},t.prototype.buildPath=function(n,r){a8e(n,r)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Ii);nd.prototype.type="sector";var s8e=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),Oz=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new s8e},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.PI*2;n.moveTo(i+r.r,a),n.arc(i,a,r.r,0,o,!1),n.moveTo(i+r.r0,a),n.arc(i,a,r.r0,0,o,!0)},t}(Ii);Oz.prototype.type="ring";function l8e(e,t,n,r){var i=[],a=[],o=[],s=[],l,c,h,f;if(r){h=[1/0,1/0],f=[-1/0,-1/0];for(var p=0,v=e.length;p<v;p++)hy(h,h,e[p]),fy(f,f,e[p]);hy(h,h,r[0]),fy(f,f,r[1])}for(var p=0,v=e.length;p<v;p++){var _=e[p];if(n)l=e[p?p-1:v-1],c=e[(p+1)%v];else if(p===0||p===v-1){i.push(H4e(e[p]));continue}else l=e[p-1],c=e[p+1];j4e(a,c,l),RP(a,a,t);var b=uR(_,l),C=uR(_,c),T=b+C;T!==0&&(b/=T,C/=T),RP(o,a,-b),RP(s,a,C);var E=lV([],_,o),A=lV([],_,s);r&&(fy(E,E,h),hy(E,E,f),fy(A,A,h),hy(A,A,f)),i.push(E),i.push(A)}return n&&i.push(i.shift()),i}function HJ(e,t,n){var r=t.smooth,i=t.points;if(i&&i.length>=2){if(r){var a=l8e(i,r,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[s*2],c=a[s*2+1],h=i[(s+1)%o];e.bezierCurveTo(l[0],l[1],c[0],c[1],h[0],h[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}var u8e=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),z0=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new u8e},t.prototype.buildPath=function(n,r){HJ(n,r,!0)},t}(Ii);z0.prototype.type="polygon";var c8e=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),Yf=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new c8e},t.prototype.buildPath=function(n,r){HJ(n,r,!1)},t}(Ii);Yf.prototype.type="polyline";var d8e={},h8e=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),rd=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new h8e},t.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=kJ(d8e,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var c=r.percent;c!==0&&(n.moveTo(i,a),c<1&&(o=i*(1-c)+o*c,s=a*(1-c)+s*c),n.lineTo(o,s))},t.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},t}(Ii);rd.prototype.type="line";var Is=[],f8e=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function yH(e,t,n){var r=e.cpx2,i=e.cpy2;return r!=null||i!=null?[(n?bV:Mo)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?bV:Mo)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?wV:zs)(e.x1,e.cpx1,e.x2,t),(n?wV:zs)(e.y1,e.cpy1,e.y2,t)]}var zz=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new f8e},t.prototype.buildPath=function(n,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,h=r.cpx2,f=r.cpy2,p=r.percent;p!==0&&(n.moveTo(i,a),h==null||f==null?(p<1&&(WT(i,l,o,p,Is),l=Is[1],o=Is[2],WT(a,c,s,p,Is),c=Is[1],s=Is[2]),n.quadraticCurveTo(l,c,o,s)):(p<1&&(UT(i,l,h,o,p,Is),l=Is[1],h=Is[2],o=Is[3],UT(a,c,f,s,p,Is),c=Is[1],f=Is[2],s=Is[3]),n.bezierCurveTo(l,c,h,f,o,s)))},t.prototype.pointAt=function(n){return yH(this.shape,n,!1)},t.prototype.tangentAt=function(n){var r=yH(this.shape,n,!0);return G4e(r,r)},t}(Ii);zz.prototype.type="bezier-curve";var p8e=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Ik=function(e){xn(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new p8e},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,h=Math.cos(s),f=Math.sin(s);n.moveTo(h*o+i,f*o+a),n.arc(i,a,o,s,l,!c)},t}(Ii);Ik.prototype.type="arc";var v8e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="compound",n}return t.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(n,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(n,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ii.prototype.getBoundingRect.call(this)},t}(Ii);const m8e=v8e;var jJ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,n){this.colorStops.push({offset:t,color:n})},e}(),Bz=function(e){xn(t,e);function t(n,r,i,a,o,s){var l=e.call(this,o)||this;return l.x=n??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return t}(jJ),g8e=function(e){xn(t,e);function t(n,r,i,a,o){var s=e.call(this,a)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return t}(jJ);const y8e=g8e;var ev=[0,0],tv=[0,0],z2=new Or,B2=new Or,_8e=function(){function e(t,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Or;for(var r=0;r<2;r++)this._axes[r]=new Or;t&&this.fromBoundingRect(t,n)}return e.prototype.fromBoundingRect=function(t,n){var r=this._corners,i=this._axes,a=t.x,o=t.y,s=a+t.width,l=o+t.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),n)for(var c=0;c<4;c++)r[c].transform(n);Or.sub(i[0],r[1],r[0]),Or.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},e.prototype.intersect=function(t,n){var r=!0,i=!n;return z2.set(1/0,1/0),B2.set(0,0),!this._intersectCheckOneSide(this,t,z2,B2,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(t,this,z2,B2,i,-1)&&(r=!1,i)||i||Or.copy(n,r?z2:B2),r},e.prototype._intersectCheckOneSide=function(t,n,r,i,a,o){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,ev),this._getProjMinMaxOnAxis(l,n._corners,tv),ev[1]<tv[0]||ev[0]>tv[1]){if(s=!1,a)return s;var h=Math.abs(tv[0]-ev[1]),f=Math.abs(ev[0]-tv[1]);Math.min(h,f)>i.len()&&(h<f?Or.scale(i,c,-h*o):Or.scale(i,c,f*o))}else if(r){var h=Math.abs(tv[0]-ev[1]),f=Math.abs(ev[0]-tv[1]);Math.min(h,f)<r.len()&&(h<f?Or.scale(r,c,h*o):Or.scale(r,c,-f*o))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,n,r){for(var i=this._axes[t],a=this._origin,o=n[0].dot(i)+a[t],s=o,l=o,c=1;c<n.length;c++){var h=n[c].dot(i)+a[t];s=Math.min(h,s),l=Math.max(h,l)}r[0]=s,r[1]=l},e}();const eM=_8e;var b8e=[],w8e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return t.prototype.traverse=function(n,r){n.call(r,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},t.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},t.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Ti(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(b8e)),n.union(a)}this._rect=n}return this._rect},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(n,r))return!0}return!1},t}(xx);const x8e=w8e;var S8e=Sa();function C8e(e,t,n,r,i){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var c=void 0,h=void 0,f=void 0;r?(c=Xr(r.duration,200),h=Xr(r.easing,"cubicOut"),f=0):(c=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(c=a.duration),a.easing!=null&&(h=a.easing),a.delay!=null&&(f=a.delay)),Mr(f)&&(f=f(n,i)),Mr(c)&&(c=c(n));var p={duration:c||0,delay:f,easing:h};return p}else return null}function Fz(e,t,n,r,i,a,o){var s=!1,l;Mr(i)?(o=a,a=i,i=null):fr(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=e==="leave";c||t.stopAnimation("leave");var h=C8e(e,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,i):null);if(h&&h.duration>0){var f=h.duration,p=h.delay,v=h.easing,_={duration:f,delay:p||0,easing:v,done:a,force:!!a||!!o,setToFinal:!c,scope:e,during:o};s?t.animateFrom(n,_):t.animateTo(n,_)}else t.stopAnimation(),!s&&t.attr(n),o&&o(1),a&&a()}function go(e,t,n,r,i,a){Fz("update",e,t,n,r,i,a)}function bs(e,t,n,r,i,a){Fz("enter",e,t,n,r,i,a)}function z1(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var n=e.animators[t];if(n.scope==="leave")return!0}return!1}function tM(e,t,n,r,i,a){z1(e)||Fz("leave",e,t,n,r,i,a)}function _H(e,t,n,r){e.removeTextContent(),e.removeTextGuideLine(),tM(e,{style:{opacity:0}},t,n,r)}function nM(e,t,n){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||_H(i,t,n,r)}):_H(e,t,n,r)}function Nz(e){S8e(e).oldStyle=e.style}var rM=Math.max,iM=Math.min,zR={};function T8e(e){return Ii.extend(e)}var M8e=JNe;function k8e(e,t){return M8e(e,t)}function lc(e,t){zR[e]=t}function E8e(e){if(zR.hasOwnProperty(e))return zR[e]}function $z(e,t,n,r){var i=XNe(e,t);return n&&(r==="center"&&(n=WJ(n,i.getBoundingRect())),GJ(i,n)),i}function UJ(e,t,n){var r=new sc({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(n==="center"){var a={width:i.width,height:i.height};r.setStyle(WJ(t,a))}}});return r}function WJ(e,t){var n=t.width/t.height,r=e.height*n,i;r<=e.width?i=e.height:(r=e.width,i=r/n);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var A8e=QNe;function GJ(e,t){if(e.applyTransform){var n=e.getBoundingRect(),r=n.calculateTransform(t);e.applyTransform(r)}}function kw(e,t){return kJ(e,e,{lineWidth:t}),e}function P8e(e){return EJ(e.shape,e.shape,e.style),e}var I8e=Cv;function Nv(e,t){for(var n=yz([]);e&&e!==t;)Ay(n,e.getLocalTransform(),n),e=e.parent;return n}function Mf(e,t,n){return t&&!qs(t)&&(t=xz.getLocalTransform(t)),n&&(t=bz([],t)),Ql([],e,t)}function Lk(e,t,n){var r=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-r:e==="right"?r:0,e==="top"?-i:e==="bottom"?i:0];return a=Mf(a,t,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function bH(e){return!e.isGroup}function L8e(e){return e.shape!=null}function KJ(e,t,n){if(!e||!t)return;function r(o){var s={};return o.traverse(function(l){bH(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return L8e(o)&&(s.shape=Pn({},o.shape)),s}var a=r(e);t.traverse(function(o){if(bH(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),go(o,l,n,yi(o).dataIndex)}}})}function qJ(e,t){return Yn(e,function(n){var r=n[0];r=rM(r,t.x),r=iM(r,t.x+t.width);var i=n[1];return i=rM(i,t.y),i=iM(i,t.y+t.height),[r,i]})}function D8e(e,t){var n=rM(e.x,t.x),r=iM(e.x+e.width,t.x+t.width),i=rM(e.y,t.y),a=iM(e.y+e.height,t.y+t.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function Dk(e,t,n){var r=Pn({rectHover:!0},t),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),hi(i,n),new sc(r)):$z(e.replace("path://",""),r,n,"center")}function R8e(e,t,n,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(ZJ(e,t,n,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function ZJ(e,t,n,r,i,a,o,s){var l=n-e,c=r-t,h=o-i,f=s-a,p=_I(h,f,l,c);if(O8e(p))return!1;var v=e-i,_=t-a,b=_I(v,_,l,c)/p;if(b<0||b>1)return!1;var C=_I(v,_,h,f)/p;return!(C<0||C>1)}function _I(e,t,n,r){return e*r-n*t}function O8e(e){return e<=1e-6&&e>=-1e-6}function Sx(e){var t=e.itemTooltipOption,n=e.componentModel,r=e.itemName,i=Qn(t)?{formatter:t}:t,a=n.mainType,o=n.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=e.formatterParamsExtra;l&&qe(va(l),function(h){om(s,h)||(s[h]=l[h],s.$vars.push(h))});var c=yi(e.el);c.componentMainType=a,c.componentIndex=o,c.tooltipConfig={name:r,option:hi({content:r,encodeHTMLContent:!0,formatterParams:s},i)}}function wH(e,t){var n;e.isGroup&&(n=t(e)),n||e.traverse(t)}function Cx(e,t){if(e)if(Vn(e))for(var n=0;n<e.length;n++)wH(e[n],t);else wH(e,t)}lc("circle",Pk);lc("ellipse",Rz);lc("sector",nd);lc("ring",Oz);lc("polygon",z0);lc("polyline",Yf);lc("rect",Pi);lc("line",rd);lc("bezierCurve",zz);lc("arc",Ik);const z8e=Object.freeze(Object.defineProperty({__proto__:null,Arc:Ik,BezierCurve:zz,BoundingRect:Ti,Circle:Pk,CompoundPath:m8e,Ellipse:Rz,Group:Bi,Image:sc,IncrementalDisplayable:x8e,Line:rd,LinearGradient:Bz,OrientedBoundingRect:eM,Path:Ii,Point:Or,Polygon:z0,Polyline:Yf,RadialGradient:y8e,Rect:Pi,Ring:Oz,Sector:nd,Text:Mi,applyTransform:Mf,clipPointsByRect:qJ,clipRectByRect:D8e,createIcon:Dk,extendPath:k8e,extendShape:T8e,getShapeClass:E8e,getTransform:Nv,groupTransition:KJ,initProps:bs,isElementRemoved:z1,lineLineIntersect:ZJ,linePolygonIntersect:R8e,makeImage:UJ,makePath:$z,mergePath:A8e,registerShape:lc,removeElement:tM,removeElementWithFadeOut:nM,resizePath:GJ,setTooltipConfig:Sx,subPixelOptimize:I8e,subPixelOptimizeLine:kw,subPixelOptimizeRect:P8e,transformDirection:Lk,traverseElements:Cx,updateProps:go},Symbol.toStringTag,{value:"Module"}));var Rk={};function YJ(e,t){for(var n=0;n<au.length;n++){var r=au[n],i=t[r],a=e.ensureState(r);a.style=a.style||{},a.style.text=i}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function BR(e,t,n){var r=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,o=t.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=Mr(e.defaultText)?e.defaultText(i,e,n):e.defaultText);for(var l={normal:s},c=0;c<au.length;c++){var h=au[c],f=t[h];l[h]=Xr(r?r.getFormattedLabel(i,h,null,a,f&&f.get("formatter")):null,s)}return l}function B0(e,t,n,r){n=n||Rk;for(var i=e instanceof Mi,a=!1,o=0;o<JT.length;o++){var s=t[JT[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?e:e.getTextContent();if(a){i||(l||(l=new Mi,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var c=BR(n,t),h=t.normal,f=!!h.getShallow("show"),p=Ga(h,r&&r.normal,n,!1,!i);p.text=c.normal,i||e.setTextConfig(xH(h,n,!1));for(var o=0;o<au.length;o++){var v=au[o],s=t[v];if(s){var _=l.ensureState(v),b=!!Xr(s.getShallow("show"),f);if(b!==f&&(_.ignore=!b),_.style=Ga(s,r&&r[v],n,!0,!i),_.style.text=c[v],!i){var C=e.ensureState(v);C.textConfig=xH(s,n,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(p.x=l.style.x),l.style.y!=null&&(p.y=l.style.y),l.ignore=!f,l.useStyle(p),l.dirty(),n.enableTextSetter&&(Tx(l).setLabelText=function(T){var E=BR(n,t,T);YJ(l,E)})}else l&&(l.ignore=!0);e.dirty()}function um(e,t){t=t||"label";for(var n={normal:e.getModel(t)},r=0;r<au.length;r++){var i=au[r];n[i]=e.getModel([i,t])}return n}function Ga(e,t,n,r,i){var a={};return B8e(a,e,n,r,i),t&&Pn(a,t),a}function xH(e,t,n){t=t||{};var r={},i,a=e.getShallow("rotate"),o=Xr(e.getShallow("distance"),n?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",r}function B8e(e,t,n,r,i){n=n||Rk;var a=t.ecModel,o=a&&a.option.textStyle,s=F8e(t),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var h=t.getModel(["rich",c]);MH(l[c]={},h,o,n,r,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var p=t.get("minMargin");p!=null&&(e.margin=p),MH(e,t,o,n,r,i,!0,!1)}function F8e(e){for(var t;e&&e!==e.ecModel;){var n=(e.option||Rk).rich;if(n){t=t||{};for(var r=va(n),i=0;i<r.length;i++){var a=r[i];t[a]=1}}e=e.parentModel}return t}var SH=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],CH=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TH=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function MH(e,t,n,r,i,a,o,s){n=!i&&n||Rk;var l=r&&r.inheritColor,c=t.getShallow("color"),h=t.getShallow("textBorderColor"),f=Xr(t.getShallow("opacity"),n.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),a||(c=c||n.color,h=h||n.textBorderColor),c!=null&&(e.fill=c),h!=null&&(e.stroke=h);var p=Xr(t.getShallow("textBorderWidth"),n.textBorderWidth);p!=null&&(e.lineWidth=p);var v=Xr(t.getShallow("textBorderType"),n.textBorderType);v!=null&&(e.lineDash=v);var _=Xr(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);_!=null&&(e.lineDashOffset=_),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(e.opacity=f),!i&&!a&&e.fill==null&&r.inheritColor&&(e.fill=r.inheritColor);for(var b=0;b<SH.length;b++){var C=SH[b],T=Xr(t.getShallow(C),n[C]);T!=null&&(e[C]=T)}for(var b=0;b<CH.length;b++){var C=CH[b],T=t.getShallow(C);T!=null&&(e[C]=T)}if(e.verticalAlign==null){var E=t.getShallow("baseline");E!=null&&(e.verticalAlign=E)}if(!o||!r.disableBox){for(var b=0;b<TH.length;b++){var C=TH[b],T=t.getShallow(C);T!=null&&(e[C]=T)}var A=t.getShallow("borderType");A!=null&&(e.borderDash=A),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function XJ(e,t){var n=t&&t.getModel("textStyle");return Hc([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var Tx=Sa();function JJ(e,t,n,r){if(e){var i=Tx(e);i.prevValue=i.value,i.value=n;var a=t.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=t)}}function N8e(e,t,n,r,i){var a=Tx(e);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Xr(a.interpolatedValue,a.prevValue),l=a.value;function c(h){var f=yJ(n,a.precision,s,l,h);a.interpolatedValue=h===1?null:f;var p=BR({labelDataIndex:t,labelFetcher:i,defaultText:o?o(f):f+""},a.statesModels,f);YJ(e,p)}e.percent=0,(a.prevValue==null?bs:go)(e,{percent:1},r,t,null,c)}var $8e=["textStyle","color"],bI=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],wI=new Mi,V8e=function(){function e(){}return e.prototype.getTextColor=function(t){var n=this.ecModel;return this.getShallow("color")||(!t&&n?n.get($8e):null)},e.prototype.getFont=function(){return XJ({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var n={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<bI.length;r++)n[bI[r]]=this.getShallow(bI[r]);return wI.useStyle(n),wI.update(),wI.getBoundingRect()},e}(),QJ=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],H8e=Mw(QJ),j8e=function(){function e(){}return e.prototype.getLineStyle=function(t){return H8e(this,t)},e}(),eQ=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],U8e=Mw(eQ),W8e=function(){function e(){}return e.prototype.getItemStyle=function(t,n){return U8e(this,t,n)},e}(),xa=function(){function e(t,n,r){this.parentModel=n,this.ecModel=r,this.option=t}return e.prototype.init=function(t,n,r){},e.prototype.mergeOption=function(t,n){Kr(this.option,t,!0)},e.prototype.get=function(t,n){return t==null?this.option:this._doGet(this.parsePath(t),!n&&this.parentModel)},e.prototype.getShallow=function(t,n){var r=this.option,i=r==null?r:r[t];if(i==null&&!n){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},e.prototype.getModel=function(t,n){var r=t!=null,i=r?this.parsePath(t):null,a=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(a,n,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(wr(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Ir.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,n){var r=this.option;if(!t)return r;for(var i=0;i<t.length&&!(t[i]&&(r=r&&typeof r=="object"?r[t[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(t),n.parentModel)),r},e}();kz(xa);LFe(xa);ld(xa,j8e);ld(xa,W8e);ld(xa,BFe);ld(xa,V8e);var G8e=Math.round(Math.random()*10);function Mx(e){return[e||"",G8e++].join("_")}function K8e(e){var t={};e.registerSubTypeDefaulter=function(n,r){var i=jc(n);t[i.main]=r},e.determineSubType=function(n,r){var i=r.type;if(!i){var a=jc(n).main;e.hasSubTypes(n)&&t[a]&&(i=t[a](r))}return i}}function q8e(e,t){e.topologicalTravel=function(a,o,s,l){if(!a.length)return;var c=n(o),h=c.graph,f=c.noEntryList,p={};for(qe(a,function(E){p[E]=!0});f.length;){var v=f.pop(),_=h[v],b=!!p[v];b&&(s.call(l,v,_.originalDeps.slice()),delete p[v]),qe(_.successor,b?T:C)}qe(p,function(){var E="";throw new Error(E)});function C(E){h[E].entryCount--,h[E].entryCount===0&&f.push(E)}function T(E){p[E]=!0,C(E)}};function n(a){var o={},s=[];return qe(a,function(l){var c=r(o,l),h=c.originalDeps=t(l),f=i(h,a);c.entryCount=f.length,c.entryCount===0&&s.push(l),qe(f,function(p){pi(c.predecessor,p)<0&&c.predecessor.push(p);var v=r(o,p);pi(v.successor,p)<0&&v.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return qe(a,function(l){pi(o,l)>=0&&s.push(l)}),s}}function F0(e,t){return Kr(Kr({},e,!0),t,!0)}const Z8e={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Y8e={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var aM="ZH",Vz="EN",Iy=Vz,WC={},Hz={},tQ=Ir.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Iy).toUpperCase();return e.indexOf(aM)>-1?aM:Iy}():Iy;function nQ(e,t){e=e.toUpperCase(),Hz[e]=new xa(t),WC[e]=t}function X8e(e){if(Qn(e)){var t=WC[e.toUpperCase()]||{};return e===aM||e===Vz?wr(t):Kr(wr(t),wr(WC[Iy]),!1)}else return Kr(wr(e),wr(WC[Iy]),!1)}function FR(e){return Hz[e]}function J8e(){return Hz[Iy]}nQ(Vz,Z8e);nQ(aM,Y8e);var jz=1e3,Uz=jz*60,B1=Uz*60,Gl=B1*24,kH=Gl*365,r1={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},F2="{yyyy}-{MM}-{dd}",EH={year:"{yyyy}",month:"{yyyy}-{MM}",day:F2,hour:F2+" "+r1.hour,minute:F2+" "+r1.minute,second:F2+" "+r1.second,millisecond:r1.none},xI=["year","month","day","hour","minute","second","millisecond"],rQ=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Nh(e,t){return e+="","0000".substr(0,t-e.length)+e}function Ly(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Q8e(e){return e===Ly(e)}function e6e(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Ok(e,t,n,r){var i=td(e),a=i[Wz(n)](),o=i[Dy(n)]()+1,s=Math.floor((o-1)/3)+1,l=i[zk(n)](),c=i["get"+(n?"UTC":"")+"Day"](),h=i[Ew(n)](),f=(h-1)%12+1,p=i[Bk(n)](),v=i[Fk(n)](),_=i[Nk(n)](),b=h>=12?"pm":"am",C=b.toUpperCase(),T=r instanceof xa?r:FR(r||tQ)||J8e(),E=T.getModel("time"),A=E.get("month"),I=E.get("monthAbbr"),O=E.get("dayOfWeek"),B=E.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,b+"").replace(/{A}/g,C+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Nh(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,A[o-1]).replace(/{MMM}/g,I[o-1]).replace(/{MM}/g,Nh(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Nh(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,O[c]).replace(/{ee}/g,B[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Nh(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,Nh(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Nh(p,2)).replace(/{m}/g,p+"").replace(/{ss}/g,Nh(v,2)).replace(/{s}/g,v+"").replace(/{SSS}/g,Nh(_,3)).replace(/{S}/g,_+"")}function t6e(e,t,n,r,i){var a=null;if(Qn(n))a=n;else if(Mr(n))a=n(e.value,t,{level:e.level});else{var o=Pn({},r1);if(e.level>0)for(var s=0;s<xI.length;++s)o[xI[s]]="{primary|"+o[xI[s]]+"}";var l=n?n.inherit===!1?n:hi(n,o):o,c=iQ(e.value,i);if(l[c])a=l[c];else if(l.inherit){for(var h=rQ.indexOf(c),s=h-1;s>=0;--s)if(l[c]){a=l[c];break}a=a||o.none}if(Vn(a)){var f=e.level==null?0:e.level>=0?e.level:a.length+e.level;f=Math.min(f,a.length-1),a=a[f]}}return Ok(new Date(e.value),a,i,r)}function iQ(e,t){var n=td(e),r=n[Dy(t)]()+1,i=n[zk(t)](),a=n[Ew(t)](),o=n[Bk(t)](),s=n[Fk(t)](),l=n[Nk(t)](),c=l===0,h=c&&s===0,f=h&&o===0,p=f&&a===0,v=p&&i===1,_=v&&r===1;return _?"year":v?"month":p?"day":f?"hour":h?"minute":c?"second":"millisecond"}function AH(e,t,n){var r=Wi(e)?td(e):e;switch(t=t||iQ(e,n),t){case"year":return r[Wz(n)]();case"half-year":return r[Dy(n)]()>=6?1:0;case"quarter":return Math.floor((r[Dy(n)]()+1)/4);case"month":return r[Dy(n)]();case"day":return r[zk(n)]();case"half-day":return r[Ew(n)]()/24;case"hour":return r[Ew(n)]();case"minute":return r[Bk(n)]();case"second":return r[Fk(n)]();case"millisecond":return r[Nk(n)]()}}function Wz(e){return e?"getUTCFullYear":"getFullYear"}function Dy(e){return e?"getUTCMonth":"getMonth"}function zk(e){return e?"getUTCDate":"getDate"}function Ew(e){return e?"getUTCHours":"getHours"}function Bk(e){return e?"getUTCMinutes":"getMinutes"}function Fk(e){return e?"getUTCSeconds":"getSeconds"}function Nk(e){return e?"getUTCMilliseconds":"getMilliseconds"}function n6e(e){return e?"setUTCFullYear":"setFullYear"}function aQ(e){return e?"setUTCMonth":"setMonth"}function oQ(e){return e?"setUTCDate":"setDate"}function sQ(e){return e?"setUTCHours":"setHours"}function lQ(e){return e?"setUTCMinutes":"setMinutes"}function uQ(e){return e?"setUTCSeconds":"setSeconds"}function cQ(e){return e?"setUTCMilliseconds":"setMilliseconds"}function dQ(e){if(!cFe(e))return Qn(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function hQ(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var kx=VX;function NR(e,t,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(h){return h&&Hc(h)?h:"-"}function a(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var o=t==="time",s=e instanceof Date;if(o||s){var l=o?td(e):e;if(isNaN(+l)){if(s)return"-"}else return Ok(l,r,n)}if(t==="ordinal")return sR(e)?i(e):Wi(e)&&a(e)?e+"":"-";var c=YT(e);return a(c)?dQ(c):sR(e)?i(e):typeof e=="boolean"?e+"":"-"}var PH=["a","b","c","d","e","f","g"],SI=function(e,t){return"{"+e+(t??"")+"}"};function fQ(e,t,n){Vn(t)||(t=[t]);var r=t.length;if(!r)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var o=PH[a];e=e.replace(SI(o),SI(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var c=t[s][i[l]];e=e.replace(SI(PH[l],s),n?Os(c):c)}return e}function r6e(e,t,n){return qe(t,function(r,i){e=e.replace("{"+i+"}",r)}),e}function i6e(e,t){var n=Qn(e)?{color:e,extraCssText:t}:e||{},r=n.color,i=n.type;t=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Os(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Os(r)+";"+(t||"")+'"></span>';var o=n.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function cm(e,t){return t=t||"transparent",Qn(e)?e:fr(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function IH(e,t){if(t==="_blank"||t==="blank"){var n=window.open();n.opener=null,n.location.href=e}else window.open(e,t)}var GC=qe,a6e=["left","right","top","bottom","width","height"],Tv=[["width","left","right"],["height","top","bottom"]];function Gz(e,t,n,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,c){var h=l.getBoundingRect(),f=t.childAt(c+1),p=f&&f.getBoundingRect(),v,_;if(e==="horizontal"){var b=h.width+(p?-p.x+h.x:0);v=a+b,v>r||l.newline?(a=0,v=b,o+=s+n,s=h.height):s=Math.max(s,h.height)}else{var C=h.height+(p?-p.y+h.y:0);_=o+C,_>i||l.newline?(a+=s+n,o=0,_=C,s=h.width):s=Math.max(s,h.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),e==="horizontal"?a=v+n:o=_+n)})}var $v=Gz;bi(Gz,"vertical");bi(Gz,"horizontal");function tc(e,t,n){n=kx(n||0);var r=t.width,i=t.height,a=Fr(e.left,r),o=Fr(e.top,i),s=Fr(e.right,r),l=Fr(e.bottom,i),c=Fr(e.width,r),h=Fr(e.height,i),f=n[2]+n[0],p=n[1]+n[3],v=e.aspect;switch(isNaN(c)&&(c=r-s-p-a),isNaN(h)&&(h=i-l-f-o),v!=null&&(isNaN(c)&&isNaN(h)&&(v>r/i?c=r*.8:h=i*.8),isNaN(c)&&(c=v*h),isNaN(h)&&(h=c/v)),isNaN(a)&&(a=r-s-c-p),isNaN(o)&&(o=i-l-h-f),e.left||e.right){case"center":a=r/2-c/2-n[3];break;case"right":a=r-c-p;break}switch(e.top||e.bottom){case"middle":case"center":o=i/2-h/2-n[0];break;case"bottom":o=i-h-f;break}a=a||0,o=o||0,isNaN(c)&&(c=r-p-a-(s||0)),isNaN(h)&&(h=i-f-o-(l||0));var _=new Ti(a+n[3],o+n[0],c,h);return _.margin=n,_}function pQ(e,t,n,r,i,a){a=a||e,a.x=e.x,a.y=e.y;var o;if(o=e.getBoundingRect(),e.needLocalTransform()){var s=e.getLocalTransform();o=o.clone(),o.applyTransform(s)}var l=tc(hi({width:o.width,height:o.height},t),n,r),c=l.x-o.x,h=l.y-o.y;return a.x+=c,a.y+=h,a===e&&e.markRedraw(),!0}function o6e(e,t){return e[Tv[t][0]]!=null||e[Tv[t][1]]!=null&&e[Tv[t][2]]!=null}function Aw(e){var t=e.layoutMode||e.constructor.layoutMode;return fr(t)?t:t?{type:t}:null}function dm(e,t,n){var r=n&&n.ignoreSize;!Vn(r)&&(r=[r,r]);var i=o(Tv[0],0),a=o(Tv[1],1);c(Tv[0],e,i),c(Tv[1],e,a);function o(h,f){var p={},v=0,_={},b=0,C=2;if(GC(h,function(A){_[A]=e[A]}),GC(h,function(A){s(t,A)&&(p[A]=_[A]=t[A]),l(p,A)&&v++,l(_,A)&&b++}),r[f])return l(t,h[1])?_[h[2]]=null:l(t,h[2])&&(_[h[1]]=null),_;if(b===C||!v)return _;if(v>=C)return p;for(var T=0;T<h.length;T++){var E=h[T];if(!s(p,E)&&s(e,E)){p[E]=e[E];break}}return p}function s(h,f){return h.hasOwnProperty(f)}function l(h,f){return h[f]!=null&&h[f]!=="auto"}function c(h,f,p){GC(h,function(v){f[v]=p[v]})}}function N0(e){return s6e({},e)}function s6e(e,t){return t&&e&&GC(a6e,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var l6e=Sa(),xi=function(e){xn(t,e);function t(n,r,i){var a=e.call(this,n,r,i)||this;return a.uid=Mx("ec_cpt_model"),a}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},t.prototype.mergeDefaultAndTheme=function(n,r){var i=Aw(this),a=i?N0(n):{},o=r.getTheme();Kr(n,o.get(this.mainType)),Kr(n,this.getDefaultOption()),i&&dm(n,a,i)},t.prototype.mergeOption=function(n,r){Kr(this.option,n,!0);var i=Aw(this);i&&dm(this.option,n,i)},t.prototype.optionUpdated=function(n,r){},t.prototype.getDefaultOption=function(){var n=this.constructor;if(!AFe(n))return n.defaultOption;var r=l6e(this);if(!r.defaultOption){for(var i=[],a=n;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=Kr(s,i[l],!0);r.defaultOption=s}return r.defaultOption},t.prototype.getReferringComponents=function(n,r){var i=n+"Index",a=n+"Id";return bx(this.ecModel,n,{index:this.get(i,!0),id:this.get(a,!0)},r)},t.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(n){this.option.zlevel=n},t.protoInitialize=function(){var n=t.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),t}(xa);bJ(xi,xa);Ck(xi);K8e(xi);q8e(xi,u6e);function u6e(e){var t=[];return qe(xi.getClassesByMainType(e),function(n){t=t.concat(n.dependencies||n.prototype.dependencies||[])}),t=Yn(t,function(n){return jc(n).main}),e!=="dataset"&&pi(t,"dataset")<=0&&t.unshift("dataset"),t}var vQ="";typeof navigator<"u"&&(vQ=navigator.platform||"");var Ng="rgba(0, 0, 0, 0.2)";const c6e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Ng,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Ng,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Ng,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Ng,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Ng,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Ng,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:vQ.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var mQ=Dr(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),su="original",Ys="arrayRows",uc="objectRows",ud="keyedColumns",kf="typedArray",gQ="unknown",Gd="column",$0="row",So={Must:1,Might:2,Not:3},yQ=Sa();function d6e(e){yQ(e).datasetMap=Dr()}function h6e(e,t,n){var r={},i=Kz(t);if(!i||!e)return r;var a=[],o=[],s=t.ecModel,l=yQ(s).datasetMap,c=i.uid+"_"+n.seriesLayoutBy,h,f;e=e.slice(),qe(e,function(b,C){var T=fr(b)?b:e[C]={name:b};T.type==="ordinal"&&h==null&&(h=C,f=_(T)),r[T.name]=[]});var p=l.get(c)||l.set(c,{categoryWayDim:f,valueWayDim:0});qe(e,function(b,C){var T=b.name,E=_(b);if(h==null){var A=p.valueWayDim;v(r[T],A,E),v(o,A,E),p.valueWayDim+=E}else if(h===C)v(r[T],0,E),v(a,0,E);else{var A=p.categoryWayDim;v(r[T],A,E),v(o,A,E),p.categoryWayDim+=E}});function v(b,C,T){for(var E=0;E<T;E++)b.push(C+E)}function _(b){var C=b.dimsDef;return C?C.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function f6e(e,t,n){var r={},i=Kz(e);if(!i)return r;var a=t.sourceFormat,o=t.dimensionsDefine,s;(a===uc||a===ud)&&qe(o,function(h,f){(fr(h)?h.name:h)==="name"&&(s=f)});var l=function(){for(var h={},f={},p=[],v=0,_=Math.min(5,n);v<_;v++){var b=bQ(t.data,a,t.seriesLayoutBy,o,t.startIndex,v);p.push(b);var C=b===So.Not;if(C&&h.v==null&&v!==s&&(h.v=v),(h.n==null||h.n===h.v||!C&&p[h.n]===So.Not)&&(h.n=v),T(h)&&p[h.n]!==So.Not)return h;C||(b===So.Might&&f.v==null&&v!==s&&(f.v=v),(f.n==null||f.n===f.v)&&(f.n=v))}function T(E){return E.v!=null&&E.n!=null}return T(h)?h:T(f)?f:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function Kz(e){var t=e.get("data",!0);if(!t)return bx(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},gs).models[0]}function p6e(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:bx(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},gs).models}function _Q(e,t){return bQ(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function bQ(e,t,n,r,i,a){var o,s=5;if(Zs(e))return So.Not;var l,c;if(r){var h=r[a];fr(h)?(l=h.name,c=h.type):Qn(h)&&(l=h)}if(c!=null)return c==="ordinal"?So.Must:So.Not;if(t===Ys){var f=e;if(n===$0){for(var p=f[a],v=0;v<(p||[]).length&&v<s;v++)if((o=I(p[i+v]))!=null)return o}else for(var v=0;v<f.length&&v<s;v++){var _=f[i+v];if(_&&(o=I(_[a]))!=null)return o}}else if(t===uc){var b=e;if(!l)return So.Not;for(var v=0;v<b.length&&v<s;v++){var C=b[v];if(C&&(o=I(C[l]))!=null)return o}}else if(t===ud){var T=e;if(!l)return So.Not;var p=T[l];if(!p||Zs(p))return So.Not;for(var v=0;v<p.length&&v<s;v++)if((o=I(p[v]))!=null)return o}else if(t===su)for(var E=e,v=0;v<E.length&&v<s;v++){var C=E[v],A=_x(C);if(!Vn(A))return So.Not;if((o=I(A[a]))!=null)return o}function I(O){var B=Qn(O);if(O!=null&&Number.isFinite(Number(O))&&O!=="")return B?So.Might:So.Not;if(B&&O!=="-")return So.Must}return So.Not}var $R=Dr();function v6e(e,t){ec($R.get(e)==null&&t),$R.set(e,t)}function m6e(e,t,n){var r=$R.get(t);if(!r)return n;var i=r(e);return i?n.concat(i):n}var LH=Sa();Sa();var qz=function(){function e(){}return e.prototype.getColorFromPalette=function(t,n,r){var i=Ao(this.get("color",!0)),a=this.get("colorLayer",!0);return y6e(this,LH,i,a,t,n,r)},e.prototype.clearColorPalette=function(){_6e(this,LH)},e}();function g6e(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].length>t)return e[r];return e[n-1]}function y6e(e,t,n,r,i,a,o){a=a||e;var s=t(a),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var h=o==null||!r?n:g6e(r,o);if(h=h||n,!(!h||!h.length)){var f=h[l];return i&&(c[i]=f),s.paletteIdx=(l+1)%h.length,f}}function _6e(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var N2,Lb,DH,RH="\0_ec_inner",b6e=1,Zz=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(n,r,i,a,o,s){a=a||{},this.option=null,this._theme=new xa(a),this._locale=new xa(o),this._optionManager=s},t.prototype.setOption=function(n,r,i){var a=BH(r);this._optionManager.setOption(n,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(n,r){return this._resetOption(n,BH(r))},t.prototype._resetOption=function(n,r){var i=!1,a=this._optionManager;if(!n||n==="recreate"){var o=a.mountOption(n==="recreate");!this.option||n==="recreate"?DH(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var l=a.getMediaOption(this);l.length&&qe(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},t.prototype.mergeOption=function(n){this._mergeOption(n,null)},t.prototype._mergeOption=function(n,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=Dr(),c=r&&r.replaceMergeMainTypeMap;d6e(this),qe(n,function(f,p){f!=null&&(xi.hasClass(p)?p&&(s.push(p),l.set(p,!0)):i[p]=i[p]==null?wr(f):Kr(i[p],f,!0))}),c&&c.each(function(f,p){xi.hasClass(p)&&!l.get(p)&&(s.push(p),l.set(p,!0))}),xi.topologicalTravel(s,xi.getAllClassMainTypes(),h,this);function h(f){var p=m6e(this,f,Ao(n[f])),v=a.get(f),_=v?c&&c.get(f)?"replaceMerge":"normalMerge":"replaceAll",b=hFe(v,p,_);bFe(b,f,xi),i[f]=null,a.set(f,null),o.set(f,0);var C=[],T=[],E=0,A;qe(b,function(I,O){var B=I.existing,N=I.newOption;if(!N)B&&(B.mergeOption({},this),B.optionUpdated({},!1));else{var H=f==="series",j=xi.getClass(f,I.keyInfo.subType,!H);if(!j)return;if(f==="tooltip"){if(A)return;A=!0}if(B&&B.constructor===j)B.name=I.keyInfo.name,B.mergeOption(N,this),B.optionUpdated(N,!1);else{var W=Pn({componentIndex:O},I.keyInfo);B=new j(N,this,this,W),Pn(B,W),I.brandNew&&(B.__requireNewView=!0),B.init(N,this,this),B.optionUpdated(null,!0)}}B?(C.push(B.option),T.push(B),E++):(C.push(void 0),T.push(void 0))},this),i[f]=C,a.set(f,T),o.set(f,E),f==="series"&&N2(this)}this._seriesIndices||N2(this)},t.prototype.getOption=function(){var n=wr(this.option);return qe(n,function(r,i){if(xi.hasClass(i)){for(var a=Ao(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Tw(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,n[i]=a}}),delete n[RH],n},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(n){this._payload=n},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},t.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,a=n.id,o=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],qe(Ao(i),function(c){s[c]&&l.push(s[c])})):a!=null?l=OH("id",a,s):o!=null?l=OH("name",o,s):l=fo(s,function(c){return!!c}),zH(l,n)},t.prototype.findComponents=function(n){var r=n.query,i=n.mainType,a=s(r),o=a?this.queryComponents(a):fo(this._componentsMap.get(i),function(c){return!!c});return l(zH(o,n));function s(c){var h=i+"Index",f=i+"Id",p=i+"Name";return c&&(c[h]!=null||c[f]!=null||c[p]!=null)?{mainType:i,index:c[h],id:c[f],name:c[p]}:null}function l(c){return n.filter?fo(c,n.filter):c}},t.prototype.eachComponent=function(n,r,i){var a=this._componentsMap;if(Mr(n)){var o=r,s=n;a.each(function(f,p){for(var v=0;f&&v<f.length;v++){var _=f[v];_&&s.call(o,p,_,_.componentIndex)}})}else for(var l=Qn(n)?a.get(n):fr(n)?this.findComponents(n):null,c=0;l&&c<l.length;c++){var h=l[c];h&&r.call(i,h,h.componentIndex)}},t.prototype.getSeriesByName=function(n){var r=Wu(n,null);return fo(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},t.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},t.prototype.getSeriesByType=function(n){return fo(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},t.prototype.getSeries=function(){return fo(this._componentsMap.get("series"),function(n){return!!n})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(n,r){Lb(this),qe(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)},this)},t.prototype.eachRawSeries=function(n,r){qe(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(n,r,i){Lb(this),qe(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===n&&r.call(i,o,a)},this)},t.prototype.eachRawSeriesByType=function(n,r,i){return qe(this.getSeriesByType(n),r,i)},t.prototype.isSeriesFiltered=function(n){return Lb(this),this._seriesIndicesMap.get(n.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(n,r){Lb(this);var i=[];qe(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];n.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Dr(i)},t.prototype.restoreData=function(n){N2(this);var r=this._componentsMap,i=[];r.each(function(a,o){xi.hasClass(o)&&i.push(o)}),xi.topologicalTravel(i,xi.getAllClassMainTypes(),function(a){qe(r.get(a),function(o){o&&(a!=="series"||!w6e(o,n))&&o.restoreData()})})},t.internalField=function(){N2=function(n){var r=n._seriesIndices=[];qe(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=Dr(r)},Lb=function(n){},DH=function(n,r){n.option={},n.option[RH]=b6e,n._componentsMap=Dr({series:[]}),n._componentsCount=Dr();var i=r.aria;fr(i)&&i.enabled==null&&(i.enabled=!0),x6e(r,n._theme.option),Kr(r,c6e,!1),n._mergeOption(r,null)}}(),t}(xa);function w6e(e,t){if(t){var n=t.seriesIndex,r=t.seriesId,i=t.seriesName;return n!=null&&e.componentIndex!==n||r!=null&&e.id!==r||i!=null&&e.name!==i}}function x6e(e,t){var n=e.color&&!e.colorLayer;qe(t,function(r,i){i==="colorLayer"&&n||xi.hasClass(i)||(typeof r=="object"?e[i]=e[i]?Kr(e[i],r,!1):wr(r):e[i]==null&&(e[i]=r))})}function OH(e,t,n){if(Vn(t)){var r=Dr();return qe(t,function(a){if(a!=null){var o=Wu(a,null);o!=null&&r.set(a,!0)}}),fo(n,function(a){return a&&r.get(a[e])})}else{var i=Wu(t,null);return fo(n,function(a){return a&&i!=null&&a[e]===i})}}function zH(e,t){return t.hasOwnProperty("subType")?fo(e,function(n){return n&&n.subType===t.subType}):e}function BH(e){var t=Dr();return e&&qe(Ao(e.replaceMerge),function(n){t.set(n,!0)}),{replaceMergeMainTypeMap:t}}ld(Zz,qz);var S6e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],wQ=function(){function e(t){qe(S6e,function(n){this[n]=ur(t[n],t)},this)}return e}(),CI={},$k=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,n){var r=[];qe(CI,function(i,a){var o=i.create(t,n);r=r.concat(o||[])}),this._coordinateSystems=r},e.prototype.update=function(t,n){qe(this._coordinateSystems,function(r){r.update&&r.update(t,n)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,n){CI[t]=n},e.get=function(t){return CI[t]},e}(),C6e=/^(min|max)?(.+)$/,T6e=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,n,r){t&&(qe(Ao(t.series),function(o){o&&o.data&&Zs(o.data)&&lR(o.data)}),qe(Ao(t.dataset),function(o){o&&o.source&&Zs(o.source)&&lR(o.source)})),t=wr(t);var i=this._optionBackup,a=M6e(t,n,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],wr(t?n.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var n,r=this._timelineOptions;if(r.length){var i=t.getComponent("timeline");i&&(n=wr(r[i.getCurrentIndex()]))}return n},e.prototype.getMediaOption=function(t){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,c=i.length;l<c;l++)k6e(i[l].query,n,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!A6e(o,this._currentMediaIndices)&&(s=Yn(o,function(h){return wr(h===-1?a.option:i[h].option)})),this._currentMediaIndices=o,s},e}();function M6e(e,t,n){var r=[],i,a,o=e.baseOption,s=e.timeline,l=e.options,c=e.media,h=!!e.media,f=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((f||h)&&(e.options=e.media=null),a=e),h&&Vn(c)&&qe(c,function(v){v&&v.option&&(v.query?r.push(v):i||(i=v))}),p(a),qe(l,function(v){return p(v)}),qe(r,function(v){return p(v.option)});function p(v){qe(t,function(_){_(v,n)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function k6e(e,t,n){var r={width:t,height:n,aspectratio:t/n},i=!0;return qe(e,function(a,o){var s=o.match(C6e);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();E6e(r[c],a,l)||(i=!1)}}),i}function E6e(e,t,n){return n==="min"?e>=t:n==="max"?e<=t:e===t}function A6e(e,t){return e.join(",")===t.join(",")}var Mu=qe,Pw=fr,FH=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function TI(e){var t=e&&e.itemStyle;if(t)for(var n=0,r=FH.length;n<r;n++){var i=FH[n],a=t.normal,o=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?Kr(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),o&&o[i]&&(e[i]=e[i]||{},e[i].emphasis?Kr(e[i].emphasis,o[i]):e[i].emphasis=o[i],o[i]=null)}}function Ho(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,i=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,hi(e[t],r)):e[t]=r),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function i1(e){Ho(e,"itemStyle"),Ho(e,"lineStyle"),Ho(e,"areaStyle"),Ho(e,"label"),Ho(e,"labelLine"),Ho(e,"upperLabel"),Ho(e,"edgeLabel")}function Ra(e,t){var n=Pw(e)&&e[t],r=Pw(n)&&n.textStyle;if(r)for(var i=0,a=VV.length;i<a;i++){var o=VV[i];r.hasOwnProperty(o)&&(n[o]=r[o])}}function zl(e){e&&(i1(e),Ra(e,"label"),e.emphasis&&Ra(e.emphasis,"label"))}function P6e(e){if(Pw(e)){TI(e),i1(e),Ra(e,"label"),Ra(e,"upperLabel"),Ra(e,"edgeLabel"),e.emphasis&&(Ra(e.emphasis,"label"),Ra(e.emphasis,"upperLabel"),Ra(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(TI(t),zl(t));var n=e.markLine;n&&(TI(n),zl(n));var r=e.markArea;r&&zl(r);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var a=e.links||e.edges;if(a&&!Zs(a))for(var o=0;o<a.length;o++)zl(a[o]);qe(e.categories,function(c){i1(c)})}if(i&&!Zs(i))for(var o=0;o<i.length;o++)zl(i[o]);if(t=e.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)zl(s[o]);if(n=e.markLine,n&&n.data)for(var l=n.data,o=0;o<l.length;o++)Vn(l[o])?(zl(l[o][0]),zl(l[o][1])):zl(l[o]);e.type==="gauge"?(Ra(e,"axisLabel"),Ra(e,"title"),Ra(e,"detail")):e.type==="treemap"?(Ho(e.breadcrumb,"itemStyle"),qe(e.levels,function(c){i1(c)})):e.type==="tree"&&i1(e.leaves)}}function Dd(e){return Vn(e)?e:e?[e]:[]}function NH(e){return(Vn(e)?e[0]:e)||{}}function I6e(e,t){Mu(Dd(e.series),function(r){Pw(r)&&P6e(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Mu(n,function(r){Mu(Dd(e[r]),function(i){i&&(Ra(i,"axisLabel"),Ra(i.axisPointer,"label"))})}),Mu(Dd(e.parallel),function(r){var i=r&&r.parallelAxisDefault;Ra(i,"axisLabel"),Ra(i&&i.axisPointer,"label")}),Mu(Dd(e.calendar),function(r){Ho(r,"itemStyle"),Ra(r,"dayLabel"),Ra(r,"monthLabel"),Ra(r,"yearLabel")}),Mu(Dd(e.radar),function(r){Ra(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Mu(Dd(e.geo),function(r){Pw(r)&&(zl(r),Mu(Dd(r.regions),function(i){zl(i)}))}),Mu(Dd(e.timeline),function(r){zl(r),Ho(r,"label"),Ho(r,"itemStyle"),Ho(r,"controlStyle",!0);var i=r.data;Vn(i)&&qe(i,function(a){fr(a)&&(Ho(a,"label"),Ho(a,"itemStyle"))})}),Mu(Dd(e.toolbox),function(r){Ho(r,"iconStyle"),Mu(r.feature,function(i){Ho(i,"iconStyle")})}),Ra(NH(e.axisPointer),"label"),Ra(NH(e.tooltip).axisPointer,"label")}function L6e(e,t){for(var n=t.split(","),r=e,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function D6e(e,t,n,r){for(var i=t.split(","),a=e,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=n)}function $H(e){e&&qe(R6e,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var R6e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],O6e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],MI=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Db(e){var t=e&&e.itemStyle;if(t)for(var n=0;n<MI.length;n++){var r=MI[n][1],i=MI[n][0];t[r]!=null&&(t[i]=t[r])}}function VH(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function HH(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function z6e(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function xQ(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n]),e[n]&&xQ(e[n].children,t)}function SQ(e,t){I6e(e,t),e.series=Ao(e.series),qe(e.series,function(n){if(fr(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),VH(n.label);var i=n.data;if(i&&!Zs(i))for(var a=0;a<i.length;a++)VH(i[a]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var o=L6e(n,"pointer.color");o!=null&&D6e(n,"itemStyle.color",o)}else if(r==="bar"){Db(n),Db(n.backgroundStyle),Db(n.emphasis);var i=n.data;if(i&&!Zs(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Db(i[a]),Db(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),HH(n),xQ(n.data,HH)}else r==="graph"||r==="sankey"?z6e(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&hi(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),$H(n)}}),e.dataRange&&(e.visualMap=e.dataRange),qe(O6e,function(n){var r=e[n];r&&(Vn(r)||(r=[r]),qe(r,function(i){$H(i)}))})}function B6e(e){var t=Dr();e.eachSeries(function(n){var r=n.get("stack");if(r){var i=t.get(r)||t.set(r,[]),a=n.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),t.each(F6e)}function F6e(e){qe(e,function(t,n){var r=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(c,h,f){var p=o.get(t.stackedDimension,f);if(isNaN(p))return i;var v,_;s?_=o.getRawIndex(f):v=o.get(t.stackedByDimension,f);for(var b=NaN,C=n-1;C>=0;C--){var T=e[C];if(s||(_=T.data.rawIndexOf(T.stackedByDimension,v)),_>=0){var E=T.data.getByRawIndex(T.stackResultDimension,_);if(l==="all"||l==="positive"&&E>0||l==="negative"&&E<0||l==="samesign"&&p>=0&&E>0||l==="samesign"&&p<=0&&E<0){p=sFe(p,E),b=E;break}}}return r[0]=p,r[1]=b,r})})}var Vk=function(){function e(t){this.data=t.data||(t.sourceFormat===ud?{}:[]),this.sourceFormat=t.sourceFormat||gQ,this.seriesLayoutBy=t.seriesLayoutBy||Gd,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var n=this.dimensionsDefine=t.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&_Q(this,r)===So.Must&&(i.type="ordinal")}}return e}();function Yz(e){return e instanceof Vk}function VR(e,t,n){n=n||TQ(e);var r=t.seriesLayoutBy,i=$6e(e,n,r,t.sourceHeader,t.dimensions),a=new Vk({data:e,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:wr(t)});return a}function CQ(e){return new Vk({data:e,sourceFormat:Zs(e)?kf:su})}function N6e(e){return new Vk({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:wr(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function TQ(e){var t=gQ;if(Zs(e))t=kf;else if(Vn(e)){e.length===0&&(t=Ys);for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i!=null){if(Vn(i)||Zs(i)){t=Ys;break}else if(fr(i)){t=uc;break}}}}else if(fr(e)){for(var a in e)if(om(e,a)&&qs(e[a])){t=ud;break}}return t}function $6e(e,t,n,r,i){var a,o;if(!e)return{dimensionsDefine:jH(i),startIndex:o,dimensionsDetectedCount:a};if(t===Ys){var s=e;r==="auto"||r==null?UH(function(c){c!=null&&c!=="-"&&(Qn(c)?o==null&&(o=1):o=0)},n,s,10):o=Wi(r)?r:r?1:0,!i&&o===1&&(i=[],UH(function(c,h){i[h]=c!=null?c+"":""},n,s,1/0)),a=i?i.length:n===$0?s.length:s[0]?s[0].length:null}else if(t===uc)i||(i=V6e(e));else if(t===ud)i||(i=[],qe(e,function(c,h){i.push(h)}));else if(t===su){var l=_x(e[0]);a=Vn(l)&&l.length||1}return{startIndex:o,dimensionsDefine:jH(i),dimensionsDetectedCount:a}}function V6e(e){for(var t=0,n;t<e.length&&!(n=e[t++]););if(n)return va(n)}function jH(e){if(e){var t=Dr();return Yn(e,function(n,r){n=fr(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function UH(e,t,n,r){if(t===$0)for(var i=0;i<n.length&&i<r;i++)e(n[i]?n[i][0]:null,i);else for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)e(a[i],i)}function MQ(e){var t=e.sourceFormat;return t===uc||t===ud}var nv,rv,iv,WH,GH,kQ=function(){function e(t,n){var r=Yz(t)?t:CQ(t);this._source=r;var i=this._data=r.data;r.sourceFormat===kf&&(this._offset=0,this._dimSize=n,this._data=i),GH(this,i,r)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,n){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;GH=function(o,s,l){var c=l.sourceFormat,h=l.seriesLayoutBy,f=l.startIndex,p=l.dimensionsDefine,v=WH[Xz(c,h)];if(Pn(o,v),c===kf)o.getItem=n,o.count=i,o.fillStorage=r;else{var _=EQ(c,h);o.getItem=ur(_,null,s,f,p);var b=AQ(c,h);o.count=ur(b,null,s,f,p)}};var n=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,h=c*o,f=0;f<c;f++)s[f]=l[h+f];return s},r=function(o,s,l,c){for(var h=this._data,f=this._dimSize,p=0;p<f;p++){for(var v=c[p],_=v[0]==null?1/0:v[0],b=v[1]==null?-1/0:v[1],C=s-o,T=l[p],E=0;E<C;E++){var A=h[E*f+p];T[o+E]=A,A<_&&(_=A),A>b&&(b=A)}v[0]=_,v[1]=b}},i=function(){return this._data?this._data.length/this._dimSize:0};WH=(t={},t[Ys+"_"+Gd]={pure:!0,appendData:a},t[Ys+"_"+$0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[uc]={pure:!0,appendData:a},t[ud]={pure:!0,appendData:function(o){var s=this._data;qe(o,function(l,c){for(var h=s[c]||(s[c]=[]),f=0;f<(l||[]).length;f++)h.push(l[f])})}},t[su]={appendData:a},t[kf]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),e}(),KH=function(e,t,n,r){return e[r]},H6e=(nv={},nv[Ys+"_"+Gd]=function(e,t,n,r){return e[r+t]},nv[Ys+"_"+$0]=function(e,t,n,r,i){r+=t;for(var a=i||[],o=e,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},nv[uc]=KH,nv[ud]=function(e,t,n,r,i){for(var a=i||[],o=0;o<n.length;o++){var s=n[o].name,l=e[s];a[o]=l?l[r]:null}return a},nv[su]=KH,nv);function EQ(e,t){var n=H6e[Xz(e,t)];return n}var qH=function(e,t,n){return e.length},j6e=(rv={},rv[Ys+"_"+Gd]=function(e,t,n){return Math.max(0,e.length-t)},rv[Ys+"_"+$0]=function(e,t,n){var r=e[0];return r?Math.max(0,r.length-t):0},rv[uc]=qH,rv[ud]=function(e,t,n){var r=n[0].name,i=e[r];return i?i.length:0},rv[su]=qH,rv);function AQ(e,t){var n=j6e[Xz(e,t)];return n}var kI=function(e,t,n){return e[t]},U6e=(iv={},iv[Ys]=kI,iv[uc]=function(e,t,n){return e[n]},iv[ud]=kI,iv[su]=function(e,t,n){var r=_x(e);return r instanceof Array?r[t]:r},iv[kf]=kI,iv);function PQ(e){var t=U6e[e];return t}function Xz(e,t){return e===Ys?e+"_"+t:e}function h0(e,t,n){if(e){var r=e.getRawDataItem(t);if(r!=null){var i=e.getStore(),a=i.getSource().sourceFormat;if(n!=null){var o=e.getDimensionIndex(n),s=i.getDimensionProperty(o);return PQ(a)(r,o,s)}else{var l=r;return a===su&&(l=_x(r)),l}}}}var W6e=/\{@(.+?)\}/g,G6e=function(){function e(){}return e.prototype.getDataParams=function(t,n){var r=this.getData(n),i=this.getRawValue(t,n),a=r.getRawIndex(t),o=r.getName(t),s=r.getRawDataItem(t),l=r.getItemVisual(t,"style"),c=l&&l[r.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,f=this.mainType,p=f==="series",v=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:p?this.subType:null,seriesIndex:this.seriesIndex,seriesId:p?this.id:null,seriesName:p?this.name:null,name:o,dataIndex:a,data:s,dataType:n,value:i,color:c,borderColor:h,dimensionNames:v?v.fullDimensions:null,encode:v?v.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,n,r,i,a,o){n=n||"normal";var s=this.getData(r),l=this.getDataParams(t,r);if(o&&(l.value=o.interpolatedValue),i!=null&&Vn(l.value)&&(l.value=l.value[i]),!a){var c=s.getItemModel(t);a=c.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(Mr(a))return l.status=n,l.dimensionIndex=i,a(l);if(Qn(a)){var h=fQ(a,l);return h.replace(W6e,function(f,p){var v=p.length,_=p;_.charAt(0)==="["&&_.charAt(v-1)==="]"&&(_=+_.slice(1,v-1));var b=h0(s,t,_);if(o&&Vn(o.interpolatedValue)){var C=s.getDimensionIndex(_);C>=0&&(b=o.interpolatedValue[C])}return b!=null?b+"":""})}},e.prototype.getRawValue=function(t,n){return h0(this.getData(n),t)},e.prototype.formatTooltip=function(t,n,r){},e}();function ZH(e){var t,n;return fr(e)?e.type&&(n=e):t=e,{text:t,frag:n}}function F1(e){return new K6e(e)}var K6e=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var n=this._upstream,r=t&&t.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=h(this._modBy),s=this._modDataCount||0,l=h(t&&t.modBy),c=t&&t.modDataCount||0;(o!==l||s!==c)&&(a="reset");function h(E){return!(E>=1)&&(E=1),E}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=c;var p=t&&t.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var v=this._dueIndex,_=Math.min(p!=null?this._dueIndex+p:1/0,this._dueEnd);if(!r&&(f||v<_)){var b=this._progress;if(Vn(b))for(var C=0;C<b.length;C++)this._doProgress(b[C],v,_,l,c);else this._doProgress(b,v,_,l,c)}this._dueIndex=_;var T=this._settedOutputEnd!=null?this._settedOutputEnd:_;this._outputDueEnd=T}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,n,r,i,a){YH.reset(n,r,i,a),this._callingProgress=t,this._callingProgress({start:n,end:r,count:r-n,next:YH.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!t&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),Vn(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),YH=function(){var e,t,n,r,i,a={reset:function(l,c,h,f){t=l,e=c,n=h,r=f,i=Math.ceil(r/n),a.next=n>1&&r>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var l=t%i*n+Math.ceil(t/i),c=t>=e?null:l<r?l:t;return t++,c}}();function KC(e,t){var n=t&&t.type;return n==="ordinal"?e:(n==="time"&&!Wi(e)&&e!=null&&e!=="-"&&(e=+td(e)),e==null||e===""?NaN:Number(e))}Dr({number:function(e){return parseFloat(e)},time:function(e){return+td(e)},trim:function(e){return Qn(e)?Hc(e):e}});var q6e=function(){function e(t,n){var r=t==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,n){var r=Wi(t)?t:YT(t),i=Wi(n)?n:YT(n),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=Qn(t),l=Qn(n);s&&(r=l?t:0),l&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},e}(),Z6e=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,n){},e.prototype.retrieveValueFromItem=function(t,n){},e.prototype.convertValue=function(t,n){return KC(t,n)},e}();function Y6e(e,t){var n=new Z6e,r=e.data,i=n.sourceFormat=e.sourceFormat,a=e.startIndex,o="";e.seriesLayoutBy!==Gd&&Bs(o);var s=[],l={},c=e.dimensionsDefine;if(c)qe(c,function(b,C){var T=b.name,E={index:C,name:T,displayName:b.displayName};if(s.push(E),T!=null){var A="";om(l,T)&&Bs(A),l[T]=E}});else for(var h=0;h<e.dimensionsDetectedCount;h++)s.push({index:h});var f=EQ(i,Gd);t.__isBuiltIn&&(n.getRawDataItem=function(b){return f(r,a,s,b)},n.getRawData=ur(X6e,null,e)),n.cloneRawData=ur(J6e,null,e);var p=AQ(i,Gd);n.count=ur(p,null,r,a,s);var v=PQ(i);n.retrieveValue=function(b,C){var T=f(r,a,s,b);return _(T,C)};var _=n.retrieveValueFromItem=function(b,C){if(b!=null){var T=s[C];if(T)return v(b,C,T.name)}};return n.getDimensionInfo=ur(Q6e,null,s,l),n.cloneAllDimensionInfo=ur(e$e,null,s),n}function X6e(e){var t=e.sourceFormat;if(!Jz(t)){var n="";Bs(n)}return e.data}function J6e(e){var t=e.sourceFormat,n=e.data;if(!Jz(t)){var r="";Bs(r)}if(t===Ys){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].slice());return i}else if(t===uc){for(var i=[],a=0,o=n.length;a<o;a++)i.push(Pn({},n[a]));return i}}function Q6e(e,t,n){if(n!=null){if(Wi(n)||!isNaN(n)&&!om(t,n))return e[n];if(om(t,n))return t[n]}}function e$e(e){return wr(e)}var IQ=Dr();function t$e(e){e=wr(e);var t=e.type,n="";t||Bs(n);var r=t.split(":");r.length!==2&&Bs(n);var i=!1;r[0]==="echarts"&&(t=r[1],i=!0),e.__isBuiltIn=i,IQ.set(t,e)}function n$e(e,t,n){var r=Ao(e),i=r.length,a="";i||Bs(a);for(var o=0,s=i;o<s;o++){var l=r[o];t=r$e(l,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function r$e(e,t,n,r){var i="";t.length||Bs(i),fr(e)||Bs(i);var a=e.type,o=IQ.get(a);o||Bs(i);var s=Yn(t,function(c){return Y6e(c,o)}),l=Ao(o.transform({upstream:s[0],upstreamList:s,config:wr(e.config)}));return Yn(l,function(c,h){var f="";fr(c)||Bs(f),c.data||Bs(f);var p=TQ(c.data);Jz(p)||Bs(f);var v,_=t[0];if(_&&h===0&&!c.dimensions){var b=_.startIndex;b&&(c.data=_.data.slice(0,b).concat(c.data)),v={seriesLayoutBy:Gd,sourceHeader:b,dimensions:_.metaRawOption.dimensions}}else v={seriesLayoutBy:Gd,sourceHeader:0,dimensions:c.dimensions};return VR(c.data,v,null)})}function Jz(e){return e===Ys||e===uc}var Hk="undefined",i$e=typeof Uint32Array===Hk?Array:Uint32Array,a$e=typeof Uint16Array===Hk?Array:Uint16Array,LQ=typeof Int32Array===Hk?Array:Int32Array,XH=typeof Float64Array===Hk?Array:Float64Array,DQ={float:XH,int:LQ,ordinal:Array,number:Array,time:XH},EI;function $g(e){return e>65535?i$e:a$e}function Vg(){return[1/0,-1/0]}function o$e(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function JH(e,t,n,r,i){var a=DQ[n||"float"];if(i){var o=e[t],s=o&&o.length;if(s!==r){for(var l=new a(r),c=0;c<s;c++)l[c]=o[c];e[t]=l}}else e[t]=new a(r)}var HR=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Dr()}return e.prototype.initData=function(t,n,r){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=EI[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],MQ(i),this._dimensions=Yn(n,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,n){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(t);if(a!=null){if(i[a].type===n)return a}else a=i.length;return i[a]={type:n},r.set(t,a),this._chunks[a]=new DQ[n||"float"](this._rawCount),this._rawExtent[a]=Vg(),a},e.prototype.collectOrdinalMeta=function(t,n){var r=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[t]=Vg());for(var l=a[t],c=o;c<s;c++){var h=r[c]=n.parseAndCollect(r[c]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var n=this._dimensions[t],r=n.ordinalMeta;return r},e.prototype.getDimensionProperty=function(t){var n=this._dimensions[t];return n&&n.property},e.prototype.appendData=function(t){var n=this._provider,r=this.count();n.appendData(t);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},e.prototype.appendValues=function(t,n){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,n||0),c=0;c<a;c++){var h=i[c];JH(r,c,h.type,l,!0)}for(var f=[],p=s;p<l;p++)for(var v=p-s,_=0;_<a;_++){var h=i[_],b=EI.arrayRows.call(this,t[v]||f,h.property,v,_);r[_][p]=b;var C=o[_];b<C[0]&&(C[0]=b),b>C[1]&&(C[1]=b)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,n,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=Yn(o,function(E){return E.property}),h=0;h<s;h++){var f=o[h];l[h]||(l[h]=Vg()),JH(a,h,f.type,n,r)}if(i.fillStorage)i.fillStorage(t,n,a,l);else for(var p=[],v=t;v<n;v++){p=i.getItem(v,p);for(var _=0;_<s;_++){var b=a[_],C=this._dimValueGetter(p,c[_],v,_);b[v]=C;var T=l[_];C<T[0]&&(T[0]=C),C>T[1]&&(T[1]=C)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[t];return r?r[this.getRawIndex(n)]:NaN},e.prototype.getValues=function(t,n){var r=[],i=[];if(n==null){n=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],n));return r},e.prototype.getByRawIndex=function(t,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[t];return r?r[n]:NaN},e.prototype.getSum=function(t){var n=this._chunks[t],r=0;if(n)for(var i=0,a=this.count();i<a;i++){var o=this.get(t,i);isNaN(o)||(r+=o)}return r},e.prototype.getMedian=function(t){var n=[];this.each([t],function(a){isNaN(a)||n.push(a)});var r=n.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var n=this._indices,r=n[t];if(r!=null&&r<this._count&&r===t)return t;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(n[o]<t)i=o+1;else if(n[o]>t)a=o-1;else return o}return-1},e.prototype.indicesOfNearest=function(t,n,r){var i=this._chunks,a=i[t],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,h=0,f=this.count();h<f;h++){var p=this.getRawIndex(h),v=n-a[p],_=Math.abs(v);_<=r&&((_<s||_===s&&v>=0&&l<0)&&(s=_,l=v,c=0),v===l&&(o[c++]=h))}return o.length=c,o},e.prototype.getIndices=function(){var t,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){t=new r(i);for(var a=0;a<i;a++)t[a]=n[a]}else t=new r(n.buffer,0,i)}else{var r=$g(this._rawCount);t=new r(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=$g(r._rawCount),o=new a(i),s=[],l=t.length,c=0,h=t[0],f=r._chunks,p=0;p<i;p++){var v=void 0,_=r.getRawIndex(p);if(l===0)v=n(p);else if(l===1){var b=f[h][_];v=n(b,p)}else{for(var C=0;C<l;C++)s[C]=f[t[C]][_];s[C]=p,v=n.apply(null,s)}v&&(o[c++]=_)}return c<i&&(r._indices=o),r._count=c,r._extent=[],r._updateGetRawIdx(),r},e.prototype.selectRange=function(t){var n=this.clone(),r=n._count;if(!r)return this;var i=va(t),a=i.length;if(!a)return this;var o=n.count(),s=$g(n._rawCount),l=new s(o),c=0,h=i[0],f=t[h][0],p=t[h][1],v=n._chunks,_=!1;if(!n._indices){var b=0;if(a===1){for(var C=v[i[0]],T=0;T<r;T++){var E=C[T];(E>=f&&E<=p||isNaN(E))&&(l[c++]=b),b++}_=!0}else if(a===2){for(var C=v[i[0]],A=v[i[1]],I=t[i[1]][0],O=t[i[1]][1],T=0;T<r;T++){var E=C[T],B=A[T];(E>=f&&E<=p||isNaN(E))&&(B>=I&&B<=O||isNaN(B))&&(l[c++]=b),b++}_=!0}}if(!_)if(a===1)for(var T=0;T<o;T++){var N=n.getRawIndex(T),E=v[i[0]][N];(E>=f&&E<=p||isNaN(E))&&(l[c++]=N)}else for(var T=0;T<o;T++){for(var H=!0,N=n.getRawIndex(T),j=0;j<a;j++){var W=i[j],E=v[W][N];(E<t[W][0]||E>t[W][1])&&(H=!1)}H&&(l[c++]=n.getRawIndex(T))}return c<o&&(n._indices=l),n._count=c,n._extent=[],n._updateGetRawIdx(),n},e.prototype.map=function(t,n){var r=this.clone(t);return this._updateDims(r,t,n),r},e.prototype.modify=function(t,n){this._updateDims(this,t,n)},e.prototype._updateDims=function(t,n,r){for(var i=t._chunks,a=[],o=n.length,s=t.count(),l=[],c=t._rawExtent,h=0;h<n.length;h++)c[n[h]]=Vg();for(var f=0;f<s;f++){for(var p=t.getRawIndex(f),v=0;v<o;v++)l[v]=i[n[v]][p];l[o]=f;var _=r&&r.apply(null,l);if(_!=null){typeof _!="object"&&(a[0]=_,_=a);for(var h=0;h<_.length;h++){var b=n[h],C=_[h],T=c[b],E=i[b];E&&(E[p]=C),C<T[0]&&(T[0]=C),C>T[1]&&(T[1]=C)}}}},e.prototype.lttbDownSample=function(t,n){var r=this.clone([t],!0),i=r._chunks,a=i[t],o=this.count(),s=0,l=Math.floor(1/n),c=this.getRawIndex(0),h,f,p,v=new($g(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));v[s++]=c;for(var _=1;_<o-1;_+=l){for(var b=Math.min(_+l,o-1),C=Math.min(_+l*2,o),T=(C+b)/2,E=0,A=b;A<C;A++){var I=this.getRawIndex(A),O=a[I];isNaN(O)||(E+=O)}E/=C-b;var B=_,N=Math.min(_+l,o),H=_-1,j=a[c];h=-1,p=B;for(var W=-1,U=0,A=B;A<N;A++){var I=this.getRawIndex(A),O=a[I];if(isNaN(O)){U++,W<0&&(W=I);continue}f=Math.abs((H-T)*(O-j)-(H-A)*(E-j)),f>h&&(h=f,p=I)}U>0&&U<N-B&&(v[s++]=Math.min(W,p),p=Math.max(W,p)),v[s++]=p,c=p}return v[s++]=this.getRawIndex(o-1),r._count=s,r._indices=v,r.getRawIndex=this._getRawIdx,r},e.prototype.minmaxDownSample=function(t,n){for(var r=this.clone([t],!0),i=r._chunks,a=Math.floor(1/n),o=i[t],s=this.count(),l=new($g(this._rawCount))(Math.ceil(s/a)*2),c=0,h=0;h<s;h+=a){var f=h,p=o[this.getRawIndex(f)],v=h,_=o[this.getRawIndex(v)],b=a;h+a>s&&(b=s-h);for(var C=0;C<b;C++){var T=this.getRawIndex(h+C),E=o[T];E<p&&(p=E,f=h+C),E>_&&(_=E,v=h+C)}var A=this.getRawIndex(f),I=this.getRawIndex(v);f<v?(l[c++]=A,l[c++]=I):(l[c++]=I,l[c++]=A)}return r._count=c,r._indices=l,r._updateGetRawIdx(),r},e.prototype.downSample=function(t,n,r,i){for(var a=this.clone([t],!0),o=a._chunks,s=[],l=Math.floor(1/n),c=o[t],h=this.count(),f=a._rawExtent[t]=Vg(),p=new($g(this._rawCount))(Math.ceil(h/l)),v=0,_=0;_<h;_+=l){l>h-_&&(l=h-_,s.length=l);for(var b=0;b<l;b++){var C=this.getRawIndex(_+b);s[b]=c[C]}var T=r(s),E=this.getRawIndex(Math.min(_+i(s,T)||0,h-1));c[E]=T,T<f[0]&&(f[0]=T),T>f[1]&&(f[1]=T),p[v++]=E}return a._count=v,a._indices=p,a._updateGetRawIdx(),a},e.prototype.each=function(t,n){if(this._count)for(var r=t.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:n(a);break;case 1:n(i[t[0]][s],a);break;case 2:n(i[t[0]][s],i[t[1]][s],a);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[t[l]][s];c[l]=a,n.apply(null,c)}}},e.prototype.getDataExtent=function(t){var n=this._chunks[t],r=Vg();if(!n)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=r;for(var s=o[0],l=o[1],c=0;c<i;c++){var h=this.getRawIndex(c),f=n[h];f<s&&(s=f),f>l&&(l=f)}return o=[s,l],this._extent[t]=o,o},e.prototype.getRawDataItem=function(t){var n=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][n]);return r},e.prototype.clone=function(t,n){var r=new e,i=this._chunks,a=t&&Vf(t,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?o$e(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=wr(this._extent),t._rawExtent=wr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,n=void 0;if(t===Array){var r=this._indices.length;n=new t(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new t(this._indices);return n}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(n,r,i,a){return KC(n[a],this._dimensions[a])}EI={arrayRows:t,objectRows:function(n,r,i,a){return KC(n[r],this._dimensions[a])},keyedColumns:t,original:function(n,r,i,a){var o=n&&(n.value==null?n:n.value);return KC(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(n,r,i,a){return n[a]}}}(),e}(),s$e=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,n){this._sourceList=t,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,a;if($2(t)){var o=t,s=void 0,l=void 0,c=void 0;if(r){var h=n[0];h.prepareSource(),c=h.getSource(),s=c.data,l=c.sourceFormat,a=[h._getVersionSign()]}else s=o.get("data",!0),l=Zs(s)?kf:su,a=[];var f=this._getSourceMetaRawOption()||{},p=c&&c.metaRawOption||{},v=Xr(f.seriesLayoutBy,p.seriesLayoutBy)||null,_=Xr(f.sourceHeader,p.sourceHeader),b=Xr(f.dimensions,p.dimensions),C=v!==p.seriesLayoutBy||!!_!=!!p.sourceHeader||b;i=C?[VR(s,{seriesLayoutBy:v,sourceHeader:_,dimensions:b},l)]:[]}else{var T=t;if(r){var E=this._applyTransform(n);i=E.sourceList,a=E.upstreamSignList}else{var A=T.get("source",!0);i=[VR(A,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},e.prototype._applyTransform=function(t){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&QH(a)}var o,s=[],l=[];return qe(t,function(c){c.prepareSource();var h=c.getSource(i||0),f="";i!=null&&!h&&QH(f),s.push(h),l.push(c._getVersionSign())}),r?o=n$e(r,s,{datasetIndex:n.componentIndex}):i!=null&&(o=[N6e(s[0])]),{sourceList:o,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),n=0;n<t.length;n++){var r=t[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var n=this._sourceList[t];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(t)}return n},e.prototype.getSharedDataStore=function(t){var n=t.makeStoreSchema();return this._innerGetDataStore(n.dimensions,t.source,n.hash)},e.prototype._innerGetDataStore=function(t,n,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];$2(this._sourceHost)&&l?s=l._innerGetDataStore(t,n,r):(s=new HR,s.initData(new kQ(n,t.length),t)),o[r]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if($2(t)){var n=Kz(t);return n?[n.getSourceManager()]:[]}else return Yn(p6e(t),function(r){return r.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,n,r,i;if($2(t))n=t.get("seriesLayoutBy",!0),r=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;n=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},e}();function $2(e){return e.mainType==="series"}function QH(e){throw new Error(e)}var l$e="line-height:1";function RQ(e){var t=e.lineHeight;return t==null?l$e:"line-height:"+Os(t+"")+"px"}function OQ(e,t){var n=e.color||"#6e7079",r=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Os(r+"")+"px;color:"+Os(n)+";font-weight:"+Os(i+""),valueStyle:"font-size:"+Os(o+"")+"px;color:"+Os(a)+";font-weight:"+Os(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var u$e=[0,10,20,30],c$e=["",`
`,`

`,`


`];function Iw(e,t){return t.type=e,t}function jR(e){return e.type==="section"}function zQ(e){return jR(e)?d$e:h$e}function BQ(e){if(jR(e)){var t=0,n=e.blocks.length,r=n>1||n>0&&!e.noHeader;return qe(e.blocks,function(i){var a=BQ(i);a>=t&&(t=a+ +(r&&(!a||jR(i)&&!i.noHeader)))}),t}return 0}function d$e(e,t,n,r){var i=t.noHeader,a=f$e(BQ(t)),o=[],s=t.blocks||[];ec(!s||Vn(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(om(c,l)){var h=new q6e(c[l],null);s.sort(function(b,C){return h.evaluate(b.sortParam,C.sortParam)})}else l==="seriesDesc"&&s.reverse()}qe(s,function(b,C){var T=t.valueFormatter,E=zQ(b)(T?Pn(Pn({},e),{valueFormatter:T}):e,b,C>0?a.html:0,r);E!=null&&o.push(E)});var f=e.renderMode==="richText"?o.join(a.richText):UR(r,o.join(""),i?n:a.html);if(i)return f;var p=NR(t.header,"ordinal",e.useUTC),v=OQ(r,e.renderMode).nameStyle,_=RQ(r);return e.renderMode==="richText"?FQ(e,p,v)+a.richText+f:UR(r,'<div style="'+v+";"+_+';">'+Os(p)+"</div>"+f,n)}function h$e(e,t,n,r){var i=e.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,l=t.name,c=e.useUTC,h=t.valueFormatter||e.valueFormatter||function(I){return I=Vn(I)?I:[I],Yn(I,function(O,B){return NR(O,Vn(v)?v[B]:v,c)})};if(!(a&&o)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),p=a?"":NR(l,"ordinal",c),v=t.valueType,_=o?[]:h(t.value,t.dataIndex),b=!s||!a,C=!s&&a,T=OQ(r,i),E=T.nameStyle,A=T.valueStyle;return i==="richText"?(s?"":f)+(a?"":FQ(e,p,E))+(o?"":m$e(e,_,b,C,A)):UR(r,(s?"":f)+(a?"":p$e(p,!s,E))+(o?"":v$e(_,b,C,A)),n)}}function ej(e,t,n,r,i,a){if(e){var o=zQ(e),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter};return o(s,e,0,a)}}function f$e(e){return{html:u$e[e],richText:c$e[e]}}function UR(e,t,n){var r='<div style="clear:both"></div>',i="margin: "+n+"px 0 0",a=RQ(e);return'<div style="'+i+";"+a+';">'+t+r+"</div>"}function p$e(e,t,n){var r=t?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Os(e)+"</span>"}function v$e(e,t,n,r){var i=n?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return e=Vn(e)?e:[e],'<span style="'+a+";"+r+'">'+Yn(e,function(o){return Os(o)}).join("&nbsp;&nbsp;")+"</span>"}function FQ(e,t,n){return e.markupStyleCreator.wrapRichTextStyle(t,n)}function m$e(e,t,n,r,i){var a=[i],o=r?10:20;return n&&a.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Vn(t)?t.join("  "):t,a)}function g$e(e,t){var n=e.getData().getItemVisual(t,"style"),r=n[e.visualDrawType];return cm(r)}function NQ(e,t){var n=e.get("padding");return n??(t==="richText"?[8,10]:10)}var AI=function(){function e(){this.richTextStyles={},this._nextStyleNameId=hJ()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,n,r){var i=r==="richText"?this._generateStyleName():null,a=i6e({color:n,type:t,renderMode:r,markerId:i});return Qn(a)?a:(this.richTextStyles[i]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,n){var r={};Vn(n)?qe(n,function(a){return Pn(r,a)}):Pn(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+t+"}"},e}();function y$e(e){var t=e.series,n=e.dataIndex,r=e.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(n),l=Vn(s),c=g$e(t,n),h,f,p,v;if(o>1||l&&!o){var _=_$e(s,t,n,a,c);h=_.inlineValues,f=_.inlineValueTypes,p=_.blocks,v=_.inlineValues[0]}else if(o){var b=i.getDimensionInfo(a[0]);v=h=h0(i,n,a[0]),f=b.type}else v=h=l?s[0]:s;var C=Tz(t),T=C&&t.name||"",E=i.getName(n),A=r?T:E;return Iw("section",{header:T,noHeader:r||!C,sortParam:v,blocks:[Iw("nameValue",{markerType:"item",markerColor:c,name:A,noName:!Hc(A),value:h,valueType:f,dataIndex:n})].concat(p||[])})}function _$e(e,t,n,r,i){var a=t.getData(),o=Vf(e,function(f,p,v){var _=a.getDimensionInfo(v);return f=f||_&&_.tooltip!==!1&&_.displayName!=null},!1),s=[],l=[],c=[];r.length?qe(r,function(f){h(h0(a,n,f),f)}):qe(e,h);function h(f,p){var v=a.getDimensionInfo(p);!v||v.otherDims.tooltip===!1||(o?c.push(Iw("nameValue",{markerType:"subItem",markerColor:i,name:v.displayName,value:f,valueType:v.type})):(s.push(f),l.push(v.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var $h=Sa();function V2(e,t){return e.getName(t)||e.getId(t)}var b$e="__universalTransitionEnabled",Xs=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return t.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=F1({count:x$e,reset:S$e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var a=$h(this).sourceManager=new s$e(this);a.prepareSource();var o=this.getInitialData(n,i);nj(o,this),this.dataTask.context.data=o,$h(this).dataBeforeProcessed=o,tj(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(n,r){var i=Aw(this),a=i?N0(n):{},o=this.subType;xi.hasClass(o)&&(o+="Series"),Kr(n,r.getTheme().get(this.subType)),Kr(n,this.getDefaultOption()),MR(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&dm(n,a,i)},t.prototype.mergeOption=function(n,r){n=Kr(this.option,n,!0),this.fillDataTextStyle(n.data);var i=Aw(this);i&&dm(this.option,n,i);var a=$h(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(n,r);nj(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,$h(this).dataBeforeProcessed=o,tj(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(n){if(n&&!Zs(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&MR(n[i],"label",r)},t.prototype.getInitialData=function(n,r){},t.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},t.prototype.getData=function(n){var r=WR(this);if(r){var i=r.context.data;return n==null||!i.getLinkedData?i:i.getLinkedData(n)}else return $h(this).data},t.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},t.prototype.setData=function(n){var r=WR(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}$h(this).data=n},t.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return Dr(n)},t.prototype.getSourceManager=function(){return $h(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return $h(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},t.prototype.formatTooltip=function(n,r,i){return y$e({series:this,dataIndex:n,multipleSeries:r})},t.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(Ir.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(n,r,i){var a=this.ecModel,o=qz.prototype.getColorFromPalette.call(this,n,r,i);return o||(o=a.getColorFromPalette(n,r,i)),o},t.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},t.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var l=n[s],c=V2(o,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},t.prototype.toggleSelect=function(n,r){for(var i=[],a=0;a<n.length;a++)i[0]=n[a],this.isSelected(n[a],r)?this.unselect(i,r):this.select(i,r)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=va(n),i=[],a=0;a<r.length;a++){var o=n[r[a]];o>=0&&i.push(o)}return i},t.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[V2(a,n)])&&!a.getItemModel(n).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[b$e])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},t.prototype._innerSelect=function(n,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){fr(o.selectedMap)||(o.selectedMap={});for(var c=o.selectedMap,h=0;h<l;h++){var f=r[h],p=V2(n,f);c[p]=!0,this._selectedDataIndicesMap[p]=n.getRawIndex(f)}}else if(s==="single"||s===!0){var v=r[l-1],p=V2(n,v);o.selectedMap=(i={},i[p]=!0,i),this._selectedDataIndicesMap=(a={},a[p]=n.getRawIndex(v),a)}}},t.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var a=n.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},t.registerClass=function(n){return xi.registerClass(n)},t.protoInitialize=function(){var n=t.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),t}(xi);ld(Xs,G6e);ld(Xs,qz);bJ(Xs,xi);function tj(e){var t=e.name;Tz(e)||(e.name=w$e(e)||t)}function w$e(e){var t=e.getRawData(),n=t.mapDimensionsAll("seriesName"),r=[];return qe(n,function(i){var a=t.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function x$e(e){return e.model.getRawData().count()}function S$e(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),C$e}function C$e(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function nj(e,t){qe($4e(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(n){e.wrapMethod(n,bi(T$e,t))})}function T$e(e,t){var n=WR(e);return n&&n.setOutputEnd((t||this).count()),t}function WR(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(e.uid))}return r}}var Cs=function(){function e(){this.group=new Bi,this.uid=Mx("viewComponent")}return e.prototype.init=function(t,n){},e.prototype.render=function(t,n,r,i){},e.prototype.dispose=function(t,n){},e.prototype.updateView=function(t,n,r,i){},e.prototype.updateLayout=function(t,n,r,i){},e.prototype.updateVisual=function(t,n,r,i){},e.prototype.toggleBlurSeries=function(t,n,r){},e.prototype.eachRendered=function(t){var n=this.group;n&&n.traverse(t)},e}();kz(Cs);Ck(Cs);function Qz(){var e=Sa();return function(t){var n=e(t),r=t.pipelineContext,i=!!n.large,a=!!n.progressiveRender,o=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var $Q=Sa(),M$e=Qz(),ws=function(){function e(){this.group=new Bi,this.uid=Mx("viewChart"),this.renderTask=F1({plan:k$e,reset:E$e}),this.renderTask.context={view:this}}return e.prototype.init=function(t,n){},e.prototype.render=function(t,n,r,i){},e.prototype.highlight=function(t,n,r,i){var a=t.getData(i&&i.dataType);a&&ij(a,i,"emphasis")},e.prototype.downplay=function(t,n,r,i){var a=t.getData(i&&i.dataType);a&&ij(a,i,"normal")},e.prototype.remove=function(t,n){this.group.removeAll()},e.prototype.dispose=function(t,n){},e.prototype.updateView=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.updateLayout=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.updateVisual=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.eachRendered=function(t){Cx(this.group,t)},e.markUpdateMethod=function(t,n){$Q(t).updateMethod=n},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function rj(e,t,n){e&&DR(e)&&(t==="emphasis"?u0:c0)(e,n)}function ij(e,t,n){var r=sm(e,t),i=t&&t.highlightKey!=null?jNe(t.highlightKey):null;r!=null?qe(Ao(r),function(a){rj(e.getItemGraphicEl(a),n,i)}):e.eachItemGraphicEl(function(a){rj(a,n,i)})}kz(ws);Ck(ws);function k$e(e){return M$e(e.model)}function E$e(e){var t=e.model,n=e.ecModel,r=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=i&&$Q(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](t,n,r,i),A$e[l]}var A$e={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},oM="\0__throttleOriginMethod",aj="\0__throttleRate",oj="\0__throttleType";function e4(e,t,n){var r,i=0,a=0,o=null,s,l,c,h;t=t||0;function f(){a=new Date().getTime(),o=null,e.apply(l,c||[])}var p=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];r=new Date().getTime(),l=this,c=v;var b=h||t,C=h||n;h=null,s=r-(C?i:a)-b,clearTimeout(o),C?o=setTimeout(f,b):s>=0?f():o=setTimeout(f,-s),i=r};return p.clear=function(){o&&(clearTimeout(o),o=null)},p.debounceNextCall=function(v){h=v},p}function jk(e,t,n,r){var i=e[t];if(i){var a=i[oM]||i,o=i[oj],s=i[aj];if(s!==n||o!==r){if(n==null||!r)return e[t]=a;i=e[t]=e4(a,n,r==="debounce"),i[oM]=a,i[oj]=r,i[aj]=n}return i}}function sM(e,t){var n=e[t];n&&n[oM]&&(n.clear&&n.clear(),e[t]=n[oM])}var sj=Sa(),lj={itemStyle:Mw(eQ,!0),lineStyle:Mw(QJ,!0)},P$e={lineStyle:"stroke",itemStyle:"fill"};function VQ(e,t){var n=e.visualStyleMapper||lj[t];return n||(console.warn("Unknown style type '"+t+"'."),lj.itemStyle)}function HQ(e,t){var n=e.visualDrawType||P$e[t];return n||(console.warn("Unknown style type '"+t+"'."),"fill")}var I$e={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=e.getModel(r),a=VQ(e,r),o=a(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var l=HQ(e,r),c=o[l],h=Mr(c)?c:null,f=o.fill==="auto"||o.stroke==="auto";if(!o[l]||h||f){var p=e.getColorFromPalette(e.name,null,t.getSeriesCount());o[l]||(o[l]=p,n.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Mr(o.fill)?p:o.fill,o.stroke=o.stroke==="auto"||Mr(o.stroke)?p:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",l),!t.isSeriesFiltered(e)&&h)return n.setVisual("colorFromPalette",!1),{dataEach:function(v,_){var b=e.getDataParams(_),C=Pn({},o);C[l]=h(b),v.setItemVisual(_,"style",C)}}}},Rb=new xa,L$e={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=VQ(e,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){Rb.option=l[r];var c=i(Rb),h=o.ensureUniqueItemVisual(s,"style");Pn(h,c),Rb.option.decal&&(o.setItemVisual(s,"decal",Rb.option.decal),Rb.option.decal.dirty=!0),a in c&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},D$e={performRawSeries:!0,overallReset:function(e){var t=Dr();e.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,a=t.get(i);a||(a={},t.set(i,a)),sj(n).scope=a}}),e.eachSeries(function(n){if(!(n.isColorBySeries()||e.isSeriesFiltered(n))){var r=n.getRawData(),i={},a=n.getData(),o=sj(n).scope,s=n.visualStyleAccessPath||"itemStyle",l=HQ(n,s);a.each(function(c){var h=a.getRawIndex(c);i[h]=c}),r.each(function(c){var h=i[c],f=a.getItemVisual(h,"colorFromPalette");if(f){var p=a.ensureUniqueItemVisual(h,"style"),v=r.getName(c)||c+"",_=r.count();p[l]=n.getColorFromPalette(v,o,_)}})}})}},H2=Math.PI;function R$e(e,t){t=t||{},hi(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Bi,r=new Pi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(r);var i=new Mi({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new Pi({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});n.add(a);var o;return t.showSpinner&&(o=new Ik({shape:{startAngle:-H2/2,endAngle:-H2/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:H2*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:H2*3/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,c=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),h=e.getHeight()/2;t.showSpinner&&o.setShape({cx:c,cy:h}),a.setShape({x:c-l,y:h-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}var jQ=function(){function e(t,n,r,i){this._stageTaskMap=Dr(),this.ecInstance=t,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return e.prototype.restoreData=function(t,n){t.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,n){if(t.__pipeline){var r=this._pipelineMap.get(t.__pipeline.id),i=r.context,a=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,n){var r=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),o=r.progressiveEnabled&&n.incrementalPrepareRender&&a>=r.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var n=this,r=n._pipelineMap=Dr();t.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),n._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,n=this.api.getModel(),r=this.api;qe(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),o="";ec(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,n,r),i.overallReset&&this._createOverallStageTask(i,a,n,r)},this)},e.prototype.prepareView=function(t,n,r,i){var a=t.renderTask,o=a.context;o.model=n,o.ecModel=r,o.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(n,a)},e.prototype.performDataProcessorTasks=function(t,n){this._performStageTasks(this._dataProcessorHandlers,t,n,{block:!0})},e.prototype.performVisualTasks=function(t,n,r){this._performStageTasks(this._visualHandlers,t,n,r)},e.prototype._performStageTasks=function(t,n,r,i){i=i||{};var a=!1,o=this;qe(t,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var h=o._stageTaskMap.get(l.uid),f=h.seriesTaskMap,p=h.overallTask;if(p){var v,_=p.agentStubMap;_.each(function(C){s(i,C)&&(C.dirty(),v=!0)}),v&&p.dirty(),o.updatePayload(p,r);var b=o.getPerformArgs(p,i.block);_.each(function(C){C.perform(b)}),p.perform(b)&&(a=!0)}else f&&f.each(function(C,T){s(i,C)&&C.dirty();var E=o.getPerformArgs(C,i.block);E.skip=!l.performRawSeries&&n.isSeriesFiltered(C.context.model),o.updatePayload(C,r),C.perform(E)&&(a=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var n;t.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var n=t.tail;do{if(n.__block){t.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},e.prototype.updatePayload=function(t,n){n!=="remain"&&(t.context.payload=n)},e.prototype._createSeriesStageTask=function(t,n,r,i){var a=this,o=n.seriesTaskMap,s=n.seriesTaskMap=Dr(),l=t.seriesType,c=t.getTargetSeries;t.createOnAllSeries?r.eachRawSeries(h):l?r.eachRawSeriesByType(l,h):c&&c(r,i).each(h);function h(f){var p=f.uid,v=s.set(p,o&&o.get(p)||F1({plan:N$e,reset:$$e,count:H$e}));v.context={model:f,ecModel:r,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(f,v)}},e.prototype._createOverallStageTask=function(t,n,r,i){var a=this,o=n.overallTask=n.overallTask||F1({reset:O$e});o.context={ecModel:r,api:i,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=Dr(),c=t.seriesType,h=t.getTargetSeries,f=!0,p=!1,v="";ec(!t.createOnAllSeries,v),c?r.eachRawSeriesByType(c,_):h?h(r,i).each(_):(f=!1,qe(r.getSeries(),_));function _(b){var C=b.uid,T=l.set(C,s&&s.get(C)||(p=!0,F1({reset:z$e,onDirty:F$e})));T.context={model:b,overallProgress:f},T.agent=o,T.__block=f,a._pipe(b,T)}p&&o.dirty()},e.prototype._pipe=function(t,n){var r=t.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},e.wrapStageHandler=function(t,n){return Mr(t)&&(t={overallReset:t,seriesType:j$e(t)}),t.uid=Mx("stageHandler"),n&&(t.visualType=n),t},e}();function O$e(e){e.overallReset(e.ecModel,e.api,e.payload)}function z$e(e){return e.overallProgress&&B$e}function B$e(){this.agent.dirty(),this.getDownstream().dirty()}function F$e(){this.agent&&this.agent.dirty()}function N$e(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function $$e(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ao(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Yn(t,function(n,r){return UQ(r)}):V$e}var V$e=UQ(0);function UQ(e){return function(t,n){var r=n.data,i=n.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(t,r)}}function H$e(e){return e.data.count()}function j$e(e){lM=null;try{e(Lw,WQ)}catch{}return lM}var Lw={},WQ={},lM;GQ(Lw,Zz);GQ(WQ,wQ);Lw.eachSeriesByType=Lw.eachRawSeriesByType=function(e){lM=e};Lw.eachComponent=function(e){e.mainType==="series"&&e.subType&&(lM=e.subType)};function GQ(e,t){for(var n in t.prototype)e[n]=Jo}var uj=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const U$e={color:uj,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],uj]};var Vo="#B9B8CE",cj="#100C2A",j2=function(){return{axisLine:{lineStyle:{color:Vo}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},dj=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],KQ={darkMode:!0,color:dj,backgroundColor:cj,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Vo},pageTextStyle:{color:Vo}},textStyle:{color:Vo},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Vo}},dataZoom:{borderColor:"#71708A",textStyle:{color:Vo},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Vo}},timeline:{lineStyle:{color:Vo},label:{color:Vo},controlStyle:{color:Vo,borderColor:Vo}},calendar:{itemStyle:{color:cj},dayLabel:{color:Vo},monthLabel:{color:Vo},yearLabel:{color:Vo}},timeAxis:j2(),logAxis:j2(),valueAxis:j2(),categoryAxis:j2(),line:{symbol:"circle"},graph:{color:dj},gauge:{title:{color:Vo},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Vo},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};KQ.categoryAxis.splitLine.show=!1;var W$e=function(){function e(){}return e.prototype.normalizeQuery=function(t){var n={},r={},i={};if(Qn(t)){var a=jc(t);n.mainType=a.main||null,n.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};qe(t,function(l,c){for(var h=!1,f=0;f<o.length;f++){var p=o[f],v=c.lastIndexOf(p);if(v>0&&v===c.length-p.length){var _=c.slice(0,v);_!=="data"&&(n.mainType=_,n[p.toLowerCase()]=l,h=!0)}}s.hasOwnProperty(c)&&(r[c]=l,h=!0),h||(i[c]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},e.prototype.filter=function(t,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=n.cptQuery,c=n.dataQuery;return h(l,o,"mainType")&&h(l,o,"subType")&&h(l,o,"index","componentIndex")&&h(l,o,"name")&&h(l,o,"id")&&h(c,a,"name")&&h(c,a,"dataIndex")&&h(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,n.otherQuery,i,a));function h(f,p,v,_){return f[v]==null||p[_||v]===f[v]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),GR=["symbol","symbolSize","symbolRotate","symbolOffset"],hj=GR.concat(["symbolKeepAspect"]),G$e={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData();if(e.legendIcon&&n.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<GR.length;o++){var s=GR[o],l=e.get(s);Mr(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||e.defaultSymbol,n.setVisual(Pn({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),t.isSeriesFiltered(e))return;var c=va(i);function h(f,p){for(var v=e.getRawValue(p),_=e.getDataParams(p),b=0;b<c.length;b++){var C=c[b];f.setItemVisual(p,C,i[C](v,_))}}return{dataEach:a?h:null}}},K$e={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var n=e.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<hj.length;s++){var l=hj[s],c=o.getShallow(l,!0);c!=null&&i.setItemVisual(a,l,c)}}return{dataEach:n.hasItemOption?r:null}}};function qQ(e,t,n){switch(n){case"color":var r=e.getItemVisual(t,"style");return r[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,n)}}function ZQ(e,t){switch(t){case"color":var n=e.getVisual("style");return n[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function q$e(e,t,n,r){switch(n){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=r,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,n,r);break}}function Z$e(e,t){function n(r,i){var a=[];return r.eachComponent({mainType:"series",subType:e,query:i},function(o){a.push(o.seriesIndex)}),a}qe([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(r){t(r[0],function(i,a,o){i=Pn({},i),o.dispatchAction(Pn(i,{type:r[1],seriesIndex:n(a,i)}))})})}function Hg(e,t,n,r,i){var a=e+t;n.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,c=i.selected,h=0;h<c.length;h++)if(c[h].seriesIndex===s){var f=o.getData(),p=sm(f,i.fromActionPayload);n.trigger(a,{type:a,seriesId:o.id,name:Vn(p)?f.getName(p[0]):f.getName(p),selected:Qn(l)?l:Pn({},l)})}})}function Y$e(e,t,n){e.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(Hg("map","selectchanged",t,i,r),Hg("pie","selectchanged",t,i,r)):r.fromAction==="select"?(Hg("map","selected",t,i,r),Hg("pie","selected",t,i,r)):r.fromAction==="unselect"&&(Hg("map","unselected",t,i,r),Hg("pie","unselected",t,i,r))})}function my(e,t,n){for(var r;e&&!(t(e)&&(r=e,n));)e=e.__hostTarget||e.parent;return r}var X$e=Math.round(Math.random()*9),J$e=typeof Object.defineProperty=="function",Q$e=function(){function e(){this._id="__ec_inner_"+X$e++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,n){var r=this._guard(t);return J$e?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),eVe=Ii.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r+a),e.lineTo(n-i,r+a),e.closePath()}}),tVe=Ii.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r),e.lineTo(n,r+a),e.lineTo(n-i,r),e.closePath()}}),nVe=Ii.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,i=t.width/5*3,a=Math.max(i,t.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,c=Math.asin(s/o),h=Math.cos(c)*o,f=Math.sin(c),p=Math.cos(c),v=o*.6,_=o*.7;e.moveTo(n-h,l+s),e.arc(n,l,o,Math.PI-c,Math.PI*2+c),e.bezierCurveTo(n+h-f*v,l+s+p*v,n,r-_,n,r),e.bezierCurveTo(n,r-_,n-h+f*v,l+s+p*v,n-h,l+s),e.closePath()}}),rVe=Ii.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.width,i=t.x,a=t.y,o=r/3*2;e.moveTo(i,a),e.lineTo(i+o,a+n),e.lineTo(i,a+n/4*3),e.lineTo(i-o,a+n),e.lineTo(i,a),e.closePath()}}),iVe={line:rd,rect:Pi,roundRect:Pi,square:Pi,circle:Pk,diamond:tVe,pin:nVe,arrow:rVe,triangle:eVe},aVe={line:function(e,t,n,r,i){i.x1=e,i.y1=t+r/2,i.x2=e+n,i.y2=t+r/2},rect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r},roundRect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(e,t,n,r,i){var a=Math.min(n,r);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.r=Math.min(n,r)/2},diamond:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r},pin:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},arrow:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},triangle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r}},uM={};qe(iVe,function(e,t){uM[t]=new e});var oVe=Ii.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=qT(e,t,n),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(e,t,n){var r=t.symbolType;if(r!=="none"){var i=uM[r];i||(r="rect",i=uM[r]),aVe[r](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,n)}}});function sVe(e,t){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=e:n.fill=e,this.markRedraw()}}function Js(e,t,n,r,i,a,o){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=UJ(e.slice(8),new Ti(t,n,r,i),o?"center":"cover"):e.indexOf("path://")===0?l=$z(e.slice(7),{},new Ti(t,n,r,i),o?"center":"cover"):l=new oVe({shape:{symbolType:e,x:t,y:n,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=sVe,a&&l.setColor(a),l}function lVe(e){return Vn(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function YQ(e,t){if(e!=null)return Vn(e)||(e=[e,e]),[Fr(e[0],t[0])||0,Fr(Xr(e[1],e[0]),t[1])||0]}function Mv(e){return isFinite(e)}function uVe(e,t,n){var r=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),r=Mv(r)?r:0,i=Mv(i)?i:1,a=Mv(a)?a:0,o=Mv(o)?o:0;var s=e.createLinearGradient(r,a,i,o);return s}function cVe(e,t,n){var r=n.width,i=n.height,a=Math.min(r,i),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(o=o*r+n.x,s=s*i+n.y,l=l*a),o=Mv(o)?o:.5,s=Mv(s)?s:.5,l=l>=0&&Mv(l)?l:.5;var c=e.createRadialGradient(o,s,0,o,s,l);return c}function KR(e,t,n){for(var r=t.type==="radial"?cVe(e,t,n):uVe(e,t,n),i=t.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function dVe(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}function U2(e){return parseInt(e,10)}function W2(e,t,n){var r=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(e);return(e[i]||U2(s[r])||U2(e.style[r]))-(U2(s[a])||0)-(U2(s[o])||0)|0}function hVe(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Wi(e)?[e]:Vn(e)?e:null}function XQ(e){var t=e.style,n=t.lineDash&&t.lineWidth>0&&hVe(t.lineDash,t.lineWidth),r=t.lineDashOffset;if(n){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(n=Yn(n,function(a){return a/i}),r/=i)}return[n,r]}var fVe=new lm(!0);function cM(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function fj(e){return typeof e=="string"&&e!=="none"}function dM(e){var t=e.fill;return t!=null&&t!=="none"}function pj(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var n=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=n}else e.fill()}function vj(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var n=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=n}else e.stroke()}function qR(e,t,n){var r=wJ(t.image,t.__image,n);if(Tk(r)){var i=e.createPattern(r,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*V4e),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function pVe(e,t,n,r){var i,a=cM(n),o=dM(n),s=n.strokePercent,l=s<1,c=!t.path;(!t.silent||l)&&c&&t.createPathProxy();var h=t.path||fVe,f=t.__dirty;if(!r){var p=n.fill,v=n.stroke,_=o&&!!p.colorStops,b=a&&!!v.colorStops,C=o&&!!p.image,T=a&&!!v.image,E=void 0,A=void 0,I=void 0,O=void 0,B=void 0;(_||b)&&(B=t.getBoundingRect()),_&&(E=f?KR(e,p,B):t.__canvasFillGradient,t.__canvasFillGradient=E),b&&(A=f?KR(e,v,B):t.__canvasStrokeGradient,t.__canvasStrokeGradient=A),C&&(I=f||!t.__canvasFillPattern?qR(e,p,t):t.__canvasFillPattern,t.__canvasFillPattern=I),T&&(O=f||!t.__canvasStrokePattern?qR(e,v,t):t.__canvasStrokePattern,t.__canvasStrokePattern=I),_?e.fillStyle=E:C&&(I?e.fillStyle=I:o=!1),b?e.strokeStyle=A:T&&(O?e.strokeStyle=O:a=!1)}var N=t.getGlobalScale();h.setScale(N[0],N[1],t.segmentIgnoreThreshold);var H,j;e.setLineDash&&n.lineDash&&(i=XQ(t),H=i[0],j=i[1]);var W=!0;(c||f&ty)&&(h.setDPR(e.dpr),l?h.setContext(null):(h.setContext(e),W=!1),h.reset(),t.buildPath(h,t.shape,r),h.toStatic(),t.pathUpdated()),W&&h.rebuildPath(e,l?s:1),H&&(e.setLineDash(H),e.lineDashOffset=j),r||(n.strokeFirst?(a&&vj(e,n),o&&pj(e,n)):(o&&pj(e,n),a&&vj(e,n))),H&&e.setLineDash([])}function vVe(e,t,n){var r=t.__image=wJ(n.image,t.__image,t,t.onload);if(!(!r||!Tk(r))){var i=n.x||0,a=n.y||0,o=t.getWidth(),s=t.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),n.sWidth&&n.sHeight){var c=n.sx||0,h=n.sy||0;e.drawImage(r,c,h,n.sWidth,n.sHeight,i,a,o,s)}else if(n.sx&&n.sy){var c=n.sx,h=n.sy,f=o-c,p=s-h;e.drawImage(r,c,h,f,p,i,a,o,s)}else e.drawImage(r,i,a,o,s)}}function mVe(e,t,n){var r,i=n.text;if(i!=null&&(i+=""),i){e.font=n.font||am,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline;var a=void 0,o=void 0;e.setLineDash&&n.lineDash&&(r=XQ(t),a=r[0],o=r[1]),a&&(e.setLineDash(a),e.lineDashOffset=o),n.strokeFirst?(cM(n)&&e.strokeText(i,n.x,n.y),dM(n)&&e.fillText(i,n.x,n.y)):(dM(n)&&e.fillText(i,n.x,n.y),cM(n)&&e.strokeText(i,n.x,n.y)),a&&e.setLineDash([])}}var mj=["shadowBlur","shadowOffsetX","shadowOffsetY"],gj=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function JQ(e,t,n,r,i){var a=!1;if(!r&&(n=n||{},t===n))return!1;if(r||t.opacity!==n.opacity){Ns(e,i),a=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?Bv.opacity:o}(r||t.blend!==n.blend)&&(a||(Ns(e,i),a=!0),e.globalCompositeOperation=t.blend||Bv.blend);for(var s=0;s<mj.length;s++){var l=mj[s];(r||t[l]!==n[l])&&(a||(Ns(e,i),a=!0),e[l]=e.dpr*(t[l]||0))}return(r||t.shadowColor!==n.shadowColor)&&(a||(Ns(e,i),a=!0),e.shadowColor=t.shadowColor||Bv.shadowColor),a}function yj(e,t,n,r,i){var a=Dw(t,i.inHover),o=r?null:n&&Dw(n,i.inHover)||{};if(a===o)return!1;var s=JQ(e,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(Ns(e,i),s=!0),fj(a.fill)&&(e.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(Ns(e,i),s=!0),fj(a.stroke)&&(e.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(Ns(e,i),s=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var l=a.lineWidth,c=l/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==c&&(s||(Ns(e,i),s=!0),e.lineWidth=c)}for(var h=0;h<gj.length;h++){var f=gj[h],p=f[0];(r||a[p]!==o[p])&&(s||(Ns(e,i),s=!0),e[p]=a[p]||f[1])}return s}function gVe(e,t,n,r,i){return JQ(e,Dw(t,i.inHover),n&&Dw(n,i.inHover),r,i)}function QQ(e,t){var n=t.transform,r=e.dpr||1;n?e.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):e.setTransform(r,0,0,r,0,0)}function yVe(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];r=r||a.isZeroArea(),QQ(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}n.allClipped=r}function _Ve(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var _j=1,bj=2,wj=3,xj=4;function bVe(e){var t=dM(e),n=cM(e);return!(e.lineDash||!(+t^+n)||t&&typeof e.fill!="string"||n&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function Ns(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Dw(e,t){return t&&e.__hoverStyle||e.style}function eee(e,t){kv(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function kv(e,t,n,r){var i=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){t.__dirty&=~dl,t.__isRendered=!1;return}var a=t.__clipPaths,o=n.prevElClipPaths,s=!1,l=!1;if((!o||dVe(a,o))&&(o&&o.length&&(Ns(e,n),e.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),a&&a.length&&(Ns(e,n),e.save(),yVe(a,e,n),s=!0),n.prevElClipPaths=a),n.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var c=n.prevEl;c||(l=s=!0);var h=t instanceof Ii&&t.autoBatch&&bVe(t.style);s||_Ve(i,c.transform)?(Ns(e,n),QQ(e,t)):h||Ns(e,n);var f=Dw(t,n.inHover);t instanceof Ii?(n.lastDrawType!==_j&&(l=!0,n.lastDrawType=_j),yj(e,t,c,l,n),(!h||!n.batchFill&&!n.batchStroke)&&e.beginPath(),pVe(e,t,f,h),h&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):t instanceof XT?(n.lastDrawType!==wj&&(l=!0,n.lastDrawType=wj),yj(e,t,c,l,n),mVe(e,t,f)):t instanceof sc?(n.lastDrawType!==bj&&(l=!0,n.lastDrawType=bj),gVe(e,t,c,l,n),vVe(e,t,f)):t.getTemporalDisplayables&&(n.lastDrawType!==xj&&(l=!0,n.lastDrawType=xj),wVe(e,t,n)),h&&r&&Ns(e,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}function wVe(e,t,n){var r=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},o,s;for(o=t.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),kv(e,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var c=0,h=i.length;c<h;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),kv(e,l,a,c===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var PI=new Q$e,Sj=new yx(100),Cj=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function ZR(e,t){if(e==="none")return null;var n=t.getDevicePixelRatio(),r=t.getZr(),i=r.painter.type==="svg";e.dirty&&PI.delete(e);var a=PI.get(e);if(a)return a;var o=hi(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/n,PI.set(e,s),e.dirty=!1,s;function l(c){for(var h=[n],f=!0,p=0;p<Cj.length;++p){var v=o[Cj[p]];if(v!=null&&!Vn(v)&&!Qn(v)&&!Wi(v)&&typeof v!="boolean"){f=!1;break}h.push(v)}var _;if(f){_=h.join(",")+(i?"-svg":"");var b=Sj.get(_);b&&(i?c.svgElement=b:c.image=b)}var C=nee(o.dashArrayX),T=xVe(o.dashArrayY),E=tee(o.symbol),A=SVe(C),I=ree(T),O=!i&&$f.createCanvas(),B=i&&{tag:"g",attrs:{},key:"dcl",children:[]},N=j(),H;O&&(O.width=N.width*n,O.height=N.height*n,H=O.getContext("2d")),W(),f&&Sj.put(_,O||B),c.image=O,c.svgElement=B,c.svgWidth=N.width,c.svgHeight=N.height;function j(){for(var U=1,Y=0,ie=A.length;Y<ie;++Y)U=NV(U,A[Y]);for(var ue=1,Y=0,ie=E.length;Y<ie;++Y)ue=NV(ue,E[Y].length);U*=ue;var J=I*A.length*E.length;return{width:Math.max(1,Math.min(U,o.maxTileWidth)),height:Math.max(1,Math.min(J,o.maxTileHeight))}}function W(){H&&(H.clearRect(0,0,O.width,O.height),o.backgroundColor&&(H.fillStyle=o.backgroundColor,H.fillRect(0,0,O.width,O.height)));for(var U=0,Y=0;Y<T.length;++Y)U+=T[Y];if(U<=0)return;for(var ie=-I,ue=0,J=0,q=0;ie<N.height;){if(ue%2===0){for(var ce=J/2%E.length,re=0,ee=0,oe=0;re<N.width*2;){for(var be=0,Y=0;Y<C[q].length;++Y)be+=C[q][Y];if(be<=0)break;if(ee%2===0){var we=(1-o.symbolSize)*.5,pe=re+C[q][ee]*we,Ce=ie+T[ue]*we,Ve=C[q][ee]*o.symbolSize,et=T[ue]*o.symbolSize,Ee=oe/2%E[ce].length;Je(pe,Ce,Ve,et,E[ce][Ee])}re+=C[q][ee],++oe,++ee,ee===C[q].length&&(ee=0)}++q,q===C.length&&(q=0)}ie+=T[ue],++J,++ue,ue===T.length&&(ue=0)}function Je(Ue,yt,Ne,dt,Le){var ze=i?1:n,ct=Js(Le,Ue*ze,yt*ze,Ne*ze,dt*ze,o.color,o.symbolKeepAspect);if(i){var Lt=r.painter.renderOneToVNode(ct);Lt&&B.children.push(Lt)}else eee(H,ct)}}}}function tee(e){if(!e||e.length===0)return[["rect"]];if(Qn(e))return[[e]];for(var t=!0,n=0;n<e.length;++n)if(!Qn(e[n])){t=!1;break}if(t)return tee([e]);for(var r=[],n=0;n<e.length;++n)Qn(e[n])?r.push([e[n]]):r.push(e[n]);return r}function nee(e){if(!e||e.length===0)return[[0,0]];if(Wi(e)){var t=Math.ceil(e);return[[t,t]]}for(var n=!0,r=0;r<e.length;++r)if(!Wi(e[r])){n=!1;break}if(n)return nee([e]);for(var i=[],r=0;r<e.length;++r)if(Wi(e[r])){var t=Math.ceil(e[r]);i.push([t,t])}else{var t=Yn(e[r],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function xVe(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Wi(e)){var t=Math.ceil(e);return[t,t]}var n=Yn(e,function(r){return Math.ceil(r)});return e.length%2?n.concat(n):n}function SVe(e){return Yn(e,function(t){return ree(t)})}function ree(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return e.length%2===1?t*2:t}function CVe(e,t){e.eachRawSeries(function(n){if(!e.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=ZR(s,t)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=ZR(i,t)}}})}var Iu=new ou,iee={};function TVe(e,t){iee[e]=t}function MVe(e){return iee[e]}var kVe=1,EVe=800,AVe=900,PVe=1e3,IVe=2e3,LVe=5e3,aee=1e3,DVe=1100,t4=2e3,oee=3e3,RVe=4e3,Uk=4500,OVe=4600,zVe=5e3,BVe=6e3,see=7e3,FVe={PROCESSOR:{FILTER:PVe,SERIES_FILTER:EVe,STATISTIC:LVe},VISUAL:{LAYOUT:aee,PROGRESSIVE_LAYOUT:DVe,GLOBAL:t4,CHART:oee,POST_CHART_LAYOUT:OVe,COMPONENT:RVe,BRUSH:zVe,CHART_ITEM:Uk,ARIA:BVe,DECAL:see}},No="__flagInMainProcess",Ls="__pendingUpdate",II="__needsUpdateStatus",Tj=/^[a-zA-Z0-9_]+$/,LI="__connectUpdateStatus",Mj=0,NVe=1,$Ve=2;function lee(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.isDisposed()){this.id;return}return cee(this,e,t)}}function uee(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return cee(this,e,t)}}function cee(e,t,n){return n[0]=n[0]&&n[0].toLowerCase(),ou.prototype[t].apply(e,n)}var dee=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ou),hee=dee.prototype;hee.on=uee("on");hee.off=uee("off");var jg,DI,G2,Vh,RI,OI,zI,Ob,zb,kj,Ej,BI,Aj,K2,Pj,fee,Pl,Ij,pee=function(e){xn(t,e);function t(n,r,i){var a=e.call(this,new W$e)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Qn(r)&&(r=vee[r]),a._dom=n;var o="canvas",s="auto",l=!1;i.ssr;var c=a._zr=zV(n,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Xr(i.useDirtyRect,l),useCoarsePointer:Xr(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=e4(ur(c.flush,c),17),r=wr(r),r&&SQ(r,!0),a._theme=r,a._locale=X8e(i.locale||tQ),a._coordSysMgr=new $k;var h=a._api=Pj(a);function f(p,v){return p.__prio-v.__prio}return BC(fM,f),BC(YR,f),a._scheduler=new jQ(a,h,YR,fM),a._messageCenter=new dee,a._initEvents(),a.resize=ur(a.resize,a),c.animation.on("frame",a._onframe,a),kj(c,a),Ej(c,a),lR(a),a}return t.prototype._onframe=function(){if(!this._disposed){Ij(this);var n=this._scheduler;if(this[Ls]){var r=this[Ls].silent;this[No]=!0;try{jg(this),Vh.update.call(this,null,this[Ls].updateParams)}catch(l){throw this[No]=!1,this[Ls]=null,l}this._zr.flush(),this[No]=!1,this[Ls]=null,Ob.call(this,r),zb.call(this,r)}else if(n.unfinished){var i=kVe,a=this._model,o=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(a),n.performDataProcessorTasks(a),OI(this,a),n.performVisualTasks(a),K2(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(n,r,i){if(!this[No]){if(this._disposed){this.id;return}var a,o,s;if(fr(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[No]=!0,!this._model||r){var l=new T6e(this._api),c=this._theme,h=this._model=new Zz;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,c,this._locale,l)}this._model.setOption(n,{replaceMerge:o},XR);var f={seriesTransition:s,optionChanged:!0};if(i)this[Ls]={silent:a,updateParams:f},this[No]=!1,this.getZr().wakeUp();else{try{jg(this),Vh.update.call(this,null,f)}catch(p){throw this[Ls]=null,this[No]=!1,p}this._ssr||this._zr.flush(),this[Ls]=null,this[No]=!1,Ob.call(this,a),zb.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ir.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},t.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},t.prototype.getSvgDataURL=function(){if(Ir.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return qe(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},t.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,a=[],o=this;qe(r,function(l){i.eachComponent({mainType:l},function(c){var h=o._componentsMap[c.__viewId];h.group.ignore||(a.push(h),h.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return qe(a,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(Lj[i]){var l=s,c=s,h=-s,f=-s,p=[],v=n&&n.pixelRatio||this.getDevicePixelRatio();qe($1,function(A,I){if(A.group===i){var O=r?A.getZr().painter.getSvgDom().innerHTML:A.renderToCanvas(wr(n)),B=A.getDom().getBoundingClientRect();l=a(B.left,l),c=a(B.top,c),h=o(B.right,h),f=o(B.bottom,f),p.push({dom:O,left:B.left,top:B.top})}}),l*=v,c*=v,h*=v,f*=v;var _=h-l,b=f-c,C=$f.createCanvas(),T=zV(C,{renderer:r?"svg":"canvas"});if(T.resize({width:_,height:b}),r){var E="";return qe(p,function(A){var I=A.left-l,O=A.top-c;E+='<g transform="translate('+I+","+O+')">'+A.dom+"</g>"}),T.painter.getSvgRoot().innerHTML=E,n.connectedBackgroundColor&&T.painter.setBackgroundColor(n.connectedBackgroundColor),T.refreshImmediately(),T.painter.toDataURL()}else return n.connectedBackgroundColor&&T.add(new Pi({shape:{x:0,y:0,width:_,height:b},style:{fill:n.connectedBackgroundColor}})),qe(p,function(A){var I=new sc({style:{x:A.left*v-l,y:A.top*v-c,image:A.dom}});T.add(I)}),T.refreshImmediately(),C.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},t.prototype.convertToPixel=function(n,r){return RI(this,"convertToPixel",n,r)},t.prototype.convertFromPixel=function(n,r){return RI(this,"convertFromPixel",n,r)},t.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,a,o=L1(i,n);return qe(o,function(s,l){l.indexOf("Models")>=0&&qe(s,function(c){var h=c.coordinateSystem;if(h&&h.containPoint)a=a||!!h.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[c.__viewId];f&&f.containPoint&&(a=a||f.containPoint(r,c))}},this)},this),!!a},t.prototype.getVisual=function(n,r){var i=this._model,a=L1(i,n,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?qQ(s,l,r):ZQ(s,r)},t.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},t.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},t.prototype._initEvents=function(){var n=this;qe(VVe,function(r){var i=function(a){var o=n.getModel(),s=a.target,l,c=r==="globalout";if(c?l={}:s&&my(s,function(_){var b=yi(_);if(b&&b.dataIndex!=null){var C=b.dataModel||o.getSeriesByIndex(b.seriesIndex);return l=C&&C.getDataParams(b.dataIndex,b.dataType,s)||{},!0}else if(b.eventData)return l=Pn({},b.eventData),!0},!0),l){var h=l.componentType,f=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",f=l.seriesIndex);var p=h&&f!=null&&o.getComponent(h,f),v=p&&n[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];l.event=a,l.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:p,view:v},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),qe(N1,function(r,i){n._messageCenter.on(i,function(a){this.trigger(i,a)},n)}),qe(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),Y$e(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&gJ(this.getDom(),r4,"");var r=this,i=r._api,a=r._model;qe(r._componentsViews,function(o){o.dispose(a,i)}),qe(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete $1[r.id]},t.prototype.resize=function(n){if(!this[No]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=n&&n.silent;this[Ls]&&(a==null&&(a=this[Ls].silent),i=!0,this[Ls]=null),this[No]=!0;try{i&&jg(this),Vh.update.call(this,{type:"resize",animation:Pn({duration:0},n&&n.animation)})}catch(o){throw this[No]=!1,o}this[No]=!1,Ob.call(this,a),zb.call(this,a)}}},t.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(fr(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!JR[n]){var i=JR[n](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(n){var r=Pn({},n);return r.type=N1[n.type],r},t.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(fr(r)||(r={silent:!!r}),!!hM[n.type]&&this._model){if(this[No]){this._pendingActions.push(n);return}var i=r.silent;zI.call(this,n,i);var a=r.flush;a?this._zr.flush():a!==!1&&Ir.browser.weChat&&this._throttledZrFlush(),Ob.call(this,i),zb.call(this,i)}},t.prototype.updateLabelLayout=function(){Iu.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){jg=function(f){var p=f._scheduler;p.restorePipelines(f._model),p.prepareStageTasks(),DI(f,!0),DI(f,!1),p.plan()},DI=function(f,p){for(var v=f._model,_=f._scheduler,b=p?f._componentsViews:f._chartsViews,C=p?f._componentsMap:f._chartsMap,T=f._zr,E=f._api,A=0;A<b.length;A++)b[A].__alive=!1;p?v.eachComponent(function(B,N){B!=="series"&&I(N)}):v.eachSeries(I);function I(B){var N=B.__requireNewView;B.__requireNewView=!1;var H="_ec_"+B.id+"_"+B.type,j=!N&&C[H];if(!j){var W=jc(B.type),U=p?Cs.getClass(W.main,W.sub):ws.getClass(W.sub);j=new U,j.init(v,E),C[H]=j,b.push(j),T.add(j.group)}B.__viewId=j.__id=H,j.__alive=!0,j.__model=B,j.group.__ecComponentInfo={mainType:B.mainType,index:B.componentIndex},!p&&_.prepareView(j,B,v,E)}for(var A=0;A<b.length;){var O=b[A];O.__alive?A++:(!p&&O.renderTask.dispose(),T.remove(O.group),O.dispose(v,E),b.splice(A,1),C[O.__id]===O&&delete C[O.__id],O.__id=O.group.__ecComponentInfo=null)}},G2=function(f,p,v,_,b){var C=f._model;if(C.setUpdatePayload(v),!_){qe([].concat(f._componentsViews).concat(f._chartsViews),O);return}var T={};T[_+"Id"]=v[_+"Id"],T[_+"Index"]=v[_+"Index"],T[_+"Name"]=v[_+"Name"];var E={mainType:_,query:T};b&&(E.subType=b);var A=v.excludeSeriesId,I;A!=null&&(I=Dr(),qe(Ao(A),function(B){var N=Wu(B,null);N!=null&&I.set(N,!0)})),C&&C.eachComponent(E,function(B){var N=I&&I.get(B.id)!=null;if(!N)if(hH(v))if(B instanceof Xs)v.type===Fv&&!v.notBlur&&!B.get(["emphasis","disabled"])&&ONe(B,v,f._api);else{var H=Lz(B.mainType,B.componentIndex,v.name,f._api),j=H.focusSelf,W=H.dispatchers;v.type===Fv&&j&&!v.notBlur&&LR(B.mainType,B.componentIndex,f._api),W&&qe(W,function(U){v.type===Fv?u0(U):c0(U)})}else RR(v)&&B instanceof Xs&&(FNe(B,v,f._api),cH(B),Pl(f))},f),C&&C.eachComponent(E,function(B){var N=I&&I.get(B.id)!=null;N||O(f[_==="series"?"_chartsMap":"_componentsMap"][B.__viewId])},f);function O(B){B&&B.__alive&&B[p]&&B[p](B.__model,C,f._api,v)}},Vh={prepareAndUpdate:function(f){jg(this),Vh.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,p){var v=this._model,_=this._api,b=this._zr,C=this._coordSysMgr,T=this._scheduler;if(v){v.setUpdatePayload(f),T.restoreData(v,f),T.performSeriesTasks(v),C.create(v,_),T.performDataProcessorTasks(v,f),OI(this,v),C.update(v,_),n(v),T.performVisualTasks(v,f),BI(this,v,_,f,p);var E=v.get("backgroundColor")||"transparent",A=v.get("darkMode");b.setBackgroundColor(E),A!=null&&A!=="auto"&&b.setDarkMode(A),Iu.trigger("afterupdate",v,_)}},updateTransform:function(f){var p=this,v=this._model,_=this._api;if(v){v.setUpdatePayload(f);var b=[];v.eachComponent(function(T,E){if(T!=="series"){var A=p.getViewOfComponentModel(E);if(A&&A.__alive)if(A.updateTransform){var I=A.updateTransform(E,v,_,f);I&&I.update&&b.push(A)}else b.push(A)}});var C=Dr();v.eachSeries(function(T){var E=p._chartsMap[T.__viewId];if(E.updateTransform){var A=E.updateTransform(T,v,_,f);A&&A.update&&C.set(T.uid,1)}else C.set(T.uid,1)}),n(v),this._scheduler.performVisualTasks(v,f,{setDirty:!0,dirtyMap:C}),K2(this,v,_,f,{},C),Iu.trigger("afterupdate",v,_)}},updateView:function(f){var p=this._model;p&&(p.setUpdatePayload(f),ws.markUpdateMethod(f,"updateView"),n(p),this._scheduler.performVisualTasks(p,f,{setDirty:!0}),BI(this,p,this._api,f,{}),Iu.trigger("afterupdate",p,this._api))},updateVisual:function(f){var p=this,v=this._model;v&&(v.setUpdatePayload(f),v.eachSeries(function(_){_.getData().clearAllVisual()}),ws.markUpdateMethod(f,"updateVisual"),n(v),this._scheduler.performVisualTasks(v,f,{visualType:"visual",setDirty:!0}),v.eachComponent(function(_,b){if(_!=="series"){var C=p.getViewOfComponentModel(b);C&&C.__alive&&C.updateVisual(b,v,p._api,f)}}),v.eachSeries(function(_){var b=p._chartsMap[_.__viewId];b.updateVisual(_,v,p._api,f)}),Iu.trigger("afterupdate",v,this._api))},updateLayout:function(f){Vh.update.call(this,f)}},RI=function(f,p,v,_){if(f._disposed){f.id;return}for(var b=f._model,C=f._coordSysMgr.getCoordinateSystems(),T,E=L1(b,v),A=0;A<C.length;A++){var I=C[A];if(I[p]&&(T=I[p](b,E,_))!=null)return T}},OI=function(f,p){var v=f._chartsMap,_=f._scheduler;p.eachSeries(function(b){_.updateStreamModes(b,v[b.__viewId])})},zI=function(f,p){var v=this,_=this.getModel(),b=f.type,C=f.escapeConnect,T=hM[b],E=T.actionInfo,A=(E.update||"update").split(":"),I=A.pop(),O=A[0]!=null&&jc(A[0]);this[No]=!0;var B=[f],N=!1;f.batch&&(N=!0,B=Yn(f.batch,function(ue){return ue=hi(Pn({},ue),f),ue.batch=null,ue}));var H=[],j,W=RR(f),U=hH(f);if(U&&BJ(this._api),qe(B,function(ue){if(j=T.action(ue,v._model,v._api),j=j||Pn({},ue),j.type=E.event||j.type,H.push(j),U){var J=Mz(f),q=J.queryOptionMap,ce=J.mainTypeSpecified,re=ce?q.keys()[0]:"series";G2(v,I,ue,re),Pl(v)}else W?(G2(v,I,ue,"series"),Pl(v)):O&&G2(v,I,ue,O.main,O.sub)}),I!=="none"&&!U&&!W&&!O)try{this[Ls]?(jg(this),Vh.update.call(this,f),this[Ls]=null):Vh[I].call(this,f)}catch(ue){throw this[No]=!1,ue}if(N?j={type:E.event||b,escapeConnect:C,batch:H}:j=H[0],this[No]=!1,!p){var Y=this._messageCenter;if(Y.trigger(j.type,j),W){var ie={type:"selectchanged",escapeConnect:C,selected:NNe(_),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};Y.trigger(ie.type,ie)}}},Ob=function(f){for(var p=this._pendingActions;p.length;){var v=p.shift();zI.call(this,v,f)}},zb=function(f){!f&&this.trigger("updated")},kj=function(f,p){f.on("rendered",function(v){p.trigger("rendered",v),f.animation.isFinished()&&!p[Ls]&&!p._scheduler.unfinished&&!p._pendingActions.length&&p.trigger("finished")})},Ej=function(f,p){f.on("mouseover",function(v){var _=v.target,b=my(_,DR);b&&(zNe(b,v,p._api),Pl(p))}).on("mouseout",function(v){var _=v.target,b=my(_,DR);b&&(BNe(b,v,p._api),Pl(p))}).on("click",function(v){var _=v.target,b=my(_,function(E){return yi(E).dataIndex!=null},!0);if(b){var C=b.selected?"unselect":"select",T=yi(b);p._api.dispatchAction({type:C,dataType:T.dataType,dataIndexInside:T.dataIndex,seriesIndex:T.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(p){p.clearColorPalette()})}function r(f){var p=[],v=[],_=!1;if(f.eachComponent(function(E,A){var I=A.get("zlevel")||0,O=A.get("z")||0,B=A.getZLevelKey();_=_||!!B,(E==="series"?v:p).push({zlevel:I,z:O,idx:A.componentIndex,type:E,key:B})}),_){var b=p.concat(v),C,T;BC(b,function(E,A){return E.zlevel===A.zlevel?E.z-A.z:E.zlevel-A.zlevel}),qe(b,function(E){var A=f.getComponent(E.type,E.idx),I=E.zlevel,O=E.key;C!=null&&(I=Math.max(C,I)),O?(I===C&&O!==T&&I++,T=O):T&&(I===C&&I++,T=""),C=I,A.setZLevel(I)})}}BI=function(f,p,v,_,b){r(p),Aj(f,p,v,_,b),qe(f._chartsViews,function(C){C.__alive=!1}),K2(f,p,v,_,b),qe(f._chartsViews,function(C){C.__alive||C.remove(p,v)})},Aj=function(f,p,v,_,b,C){qe(C||f._componentsViews,function(T){var E=T.__model;c(E,T),T.render(E,p,v,_),s(E,T),h(E,T)})},K2=function(f,p,v,_,b,C){var T=f._scheduler;b=Pn(b||{},{updatedSeries:p.getSeries()}),Iu.trigger("series:beforeupdate",p,v,b);var E=!1;p.eachSeries(function(A){var I=f._chartsMap[A.__viewId];I.__alive=!0;var O=I.renderTask;T.updatePayload(O,_),c(A,I),C&&C.get(A.uid)&&O.dirty(),O.perform(T.getPerformArgs(O))&&(E=!0),I.group.silent=!!A.get("silent"),o(A,I),cH(A)}),T.unfinished=E||T.unfinished,Iu.trigger("series:layoutlabels",p,v,b),Iu.trigger("series:transition",p,v,b),p.eachSeries(function(A){var I=f._chartsMap[A.__viewId];s(A,I),h(A,I)}),a(f,p),Iu.trigger("series:afterupdate",p,v,b)},Pl=function(f){f[II]=!0,f.getZr().wakeUp()},Ij=function(f){f[II]&&(f.getZr().storage.traverse(function(p){z1(p)||i(p)}),f[II]=!1)};function i(f){for(var p=[],v=f.currentStates,_=0;_<v.length;_++){var b=v[_];b==="emphasis"||b==="blur"||b==="select"||p.push(b)}f.selected&&f.states.select&&p.push("select"),f.hoverState===Ek&&f.states.emphasis?p.push("emphasis"):f.hoverState===kk&&f.states.blur&&p.push("blur"),f.useStates(p)}function a(f,p){var v=f._zr,_=v.storage,b=0;_.traverse(function(C){C.isGroup||b++}),b>p.get("hoverLayerThreshold")&&!Ir.node&&!Ir.worker&&p.eachSeries(function(C){if(!C.preventUsingHoverLayer){var T=f._chartsMap[C.__viewId];T.__alive&&T.eachRendered(function(E){E.states.emphasis&&(E.states.emphasis.hoverLayer=!0)})}})}function o(f,p){var v=f.get("blendMode")||null;p.eachRendered(function(_){_.isGroup||(_.style.blend=v)})}function s(f,p){if(!f.preventAutoZ){var v=f.get("z")||0,_=f.get("zlevel")||0;p.eachRendered(function(b){return l(b,v,_,-1/0),!0})}}function l(f,p,v,_){var b=f.getTextContent(),C=f.getTextGuideLine(),T=f.isGroup;if(T)for(var E=f.childrenRef(),A=0;A<E.length;A++)_=Math.max(l(E[A],p,v,_),_);else f.z=p,f.zlevel=v,_=Math.max(f.z2,_);if(b&&(b.z=p,b.zlevel=v,isFinite(_)&&(b.z2=_+2)),C){var I=f.textGuideLineConfig;C.z=p,C.zlevel=v,isFinite(_)&&(C.z2=_+(I&&I.showAbove?1:-1))}return _}function c(f,p){p.eachRendered(function(v){if(!z1(v)){var _=v.getTextContent(),b=v.getTextGuideLine();v.stateTransition&&(v.stateTransition=null),_&&_.stateTransition&&(_.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),v.hasState()?(v.prevStates=v.currentStates,v.clearStates()):v.prevStates&&(v.prevStates=null)}})}function h(f,p){var v=f.getModel("stateAnimation"),_=f.isAnimationEnabled(),b=v.get("duration"),C=b>0?{duration:b,delay:v.get("delay"),easing:v.get("easing")}:null;p.eachRendered(function(T){if(T.states&&T.states.emphasis){if(z1(T))return;if(T instanceof Ii&&UNe(T),T.__dirty){var E=T.prevStates;E&&T.useStates(E)}if(_){T.stateTransition=C;var A=T.getTextContent(),I=T.getTextGuideLine();A&&(A.stateTransition=C),I&&(I.stateTransition=C)}T.__dirty&&i(T)}})}Pj=function(f){return new(function(p){xn(v,p);function v(){return p!==null&&p.apply(this,arguments)||this}return v.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},v.prototype.getComponentByElement=function(_){for(;_;){var b=_.__ecComponentInfo;if(b!=null)return f._model.getComponent(b.mainType,b.index);_=_.parent}},v.prototype.enterEmphasis=function(_,b){u0(_,b),Pl(f)},v.prototype.leaveEmphasis=function(_,b){c0(_,b),Pl(f)},v.prototype.enterBlur=function(_){RNe(_),Pl(f)},v.prototype.leaveBlur=function(_){DJ(_),Pl(f)},v.prototype.enterSelect=function(_){RJ(_),Pl(f)},v.prototype.leaveSelect=function(_){OJ(_),Pl(f)},v.prototype.getModel=function(){return f.getModel()},v.prototype.getViewOfComponentModel=function(_){return f.getViewOfComponentModel(_)},v.prototype.getViewOfSeriesModel=function(_){return f.getViewOfSeriesModel(_)},v}(wQ))(f)},fee=function(f){function p(v,_){for(var b=0;b<v.length;b++){var C=v[b];C[LI]=_}}qe(N1,function(v,_){f._messageCenter.on(_,function(b){if(Lj[f.group]&&f[LI]!==Mj){if(b&&b.escapeConnect)return;var C=f.makeActionFromEvent(b),T=[];qe($1,function(E){E!==f&&E.group===f.group&&T.push(E)}),p(T,Mj),qe(T,function(E){E[LI]!==NVe&&E.dispatchAction(C)}),p(T,$Ve)}})})}}(),t}(ou),n4=pee.prototype;n4.on=lee("on");n4.off=lee("off");n4.one=function(e,t,n){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),r.off(e,i)}this.on.call(this,e,i,n)};var VVe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var hM={},N1={},YR=[],XR=[],fM=[],vee={},JR={},$1={},Lj={},HVe=+new Date-0,r4="_echarts_instance_";function Ef(e,t,n){{var r=mee(e);if(r)return r}var i=new pee(e,t,n);return i.id="ec_"+HVe++,$1[i.id]=i,gJ(e,r4,i.id),fee(i),Iu.trigger("afterinit",i),i}function mee(e){return $1[TFe(e,r4)]}function gee(e,t){vee[e]=t}function yee(e){pi(XR,e)<0&&XR.push(e)}function _ee(e,t){a4(YR,e,t,IVe)}function jVe(e){i4("afterinit",e)}function UVe(e){i4("afterupdate",e)}function i4(e,t){Iu.on(e,t)}function cd(e,t,n){Mr(t)&&(n=t,t="");var r=fr(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,!N1[t]&&(ec(Tj.test(r)&&Tj.test(t)),hM[r]||(hM[r]={action:n,actionInfo:e}),N1[t]=r)}function WVe(e,t){$k.register(e,t)}function GVe(e,t){a4(fM,e,t,aee,"layout")}function xm(e,t){a4(fM,e,t,oee,"visual")}var Dj=[];function a4(e,t,n,r,i){if((Mr(t)||fr(t))&&(n=t,t=r),!(pi(Dj,n)>=0)){Dj.push(n);var a=jQ.wrapStageHandler(n,i);a.__prio=t,a.__raw=n,e.push(a)}}function bee(e,t){JR[e]=t}function KVe(e,t,n){var r=MVe("registerMap");r&&r(e,t,n)}var qVe=t$e;xm(t4,I$e);xm(Uk,L$e);xm(Uk,D$e);xm(t4,G$e);xm(Uk,K$e);xm(see,CVe);yee(SQ);_ee(AVe,B6e);bee("default",R$e);cd({type:Fv,event:Fv,update:Fv},Jo);cd({type:jC,event:jC,update:jC},Jo);cd({type:D1,event:D1,update:D1},Jo);cd({type:UC,event:UC,update:UC},Jo);cd({type:R1,event:R1,update:R1},Jo);gee("light",U$e);gee("dark",KQ);function Bb(e){return e==null?0:e.length||1}function Rj(e){return e}var o4=function(){function e(t,n,r,i,a,o){this._old=t,this._new=n,this._oldKeyGetter=r||Rj,this._newKeyGetter=i||Rj,this.context=a,this._diffModeMultiple=o==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,n=this._new,r={},i=new Array(t.length),a=new Array(n.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],l=r[s],c=Bb(l);if(c>1){var h=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(h,o)}else c===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},e.prototype._executeMultiple=function(){var t=this._old,n=this._new,r={},i={},a=[],o=[];this._initIndexMap(t,r,a,"_oldKeyGetter"),this._initIndexMap(n,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],c=r[l],h=i[l],f=Bb(c),p=Bb(h);if(f>1&&p===1)this._updateManyToOne&&this._updateManyToOne(h,c),i[l]=null;else if(f===1&&p>1)this._updateOneToMany&&this._updateOneToMany(h,c),i[l]=null;else if(f===1&&p===1)this._update&&this._update(h,c),i[l]=null;else if(f>1&&p>1)this._updateManyToMany&&this._updateManyToMany(h,c),i[l]=null;else if(f>1)for(var v=0;v<f;v++)this._remove&&this._remove(c[v]);else this._remove&&this._remove(c)}this._performRestAdd(o,i)},e.prototype._performRestAdd=function(t,n){for(var r=0;r<t.length;r++){var i=t[r],a=n[i],o=Bb(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);n[i]=null}},e.prototype._initIndexMap=function(t,n,r,i){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(a||(r[o]=s),!!n){var l=n[s],c=Bb(l);c===0?(n[s]=o,a&&r.push(s)):c===1?n[s]=[l,o]:l.push(o)}}},e}(),ZVe=function(){function e(t,n){this._encode=t,this._schema=n}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function YVe(e,t){var n={},r=n.encode={},i=Dr(),a=[],o=[],s={};qe(e.dimensions,function(p){var v=e.getDimensionInfo(p),_=v.coordDim;if(_){var b=v.coordDimIndex;FI(r,_)[b]=p,v.isExtraCoord||(i.set(_,1),JVe(v.type)&&(a[0]=p),FI(s,_)[b]=e.getDimensionIndex(v.name)),v.defaultTooltip&&o.push(p)}mQ.each(function(C,T){var E=FI(r,T),A=v.otherDims[T];A!=null&&A!==!1&&(E[A]=v.name)})});var l=[],c={};i.each(function(p,v){var _=r[v];c[v]=_[0],l=l.concat(_)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=Yn(l,function(p){return e.getDimensionInfo(p).storeDimIndex}),n.encodeFirstDimNotExtra=c;var h=r.label;h&&h.length&&(a=h.slice());var f=r.tooltip;return f&&f.length?o=f.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,n.userOutput=new ZVe(s,t),n}function FI(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function XVe(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function JVe(e){return!(e==="ordinal"||e==="time")}var qC=function(){function e(t){this.otherDims={},t!=null&&Pn(this,t)}return e}(),QVe=Sa(),eHe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},wee=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=Cee(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Xr(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var n=this.source.dimensionsDefine;if(n)return n[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,n=MQ(this.source),r=!Tee(t),i="",a=[],o=0,s=0;o<t;o++){var l=void 0,c=void 0,h=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===o)l=n?f.name:null,c=f.type,h=f.ordinalMeta,s++;else{var p=this.getSourceDimension(o);p&&(l=n?p.name:null,c=p.type)}a.push({property:l,type:c,ordinalMeta:h}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=eHe[c]||"f",h&&(i+=h.uid),i+="$"}var v=this.source,_=[v.seriesLayoutBy,v.startIndex,i].join("$$");return{dimensions:a,hash:_}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===n)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(n);o&&(i=o.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function xee(e){return e instanceof wee}function See(e){for(var t=Dr(),n=0;n<(e||[]).length;n++){var r=e[n],i=fr(r)?r.name:r;i!=null&&t.get(i)==null&&t.set(i,n)}return t}function Cee(e){var t=QVe(e);return t.dimNameMap||(t.dimNameMap=See(e.dimensionsDefine))}function Tee(e){return e>30}var Fb=fr,Hh=Yn,tHe=typeof Int32Array>"u"?Array:Int32Array,nHe="e\0\0",Oj=-1,rHe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],iHe=["_approximateExtent"],zj,q2,Nb,$b,NI,Vb,$I,Mee=function(){function e(t,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;xee(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,r=t),r=r||["x","y"];for(var a={},o=[],s={},l=!1,c={},h=0;h<r.length;h++){var f=r[h],p=Qn(f)?new qC({name:f}):f instanceof qC?f:new qC(f),v=p.name;p.type=p.type||"float",p.coordDim||(p.coordDim=v,p.coordDimIndex=0);var _=p.otherDims=p.otherDims||{};o.push(v),a[v]=p,c[v]!=null&&(l=!0),p.createInvertedIndices&&(s[v]=[]),_.itemName===0&&(this._nameDimIdx=h),_.itemId===0&&(this._idDimIdx=h),i&&(p.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var b=this._dimIdxToName=Dr();qe(o,function(C){b.set(a[C].storeDimIndex,C)})}}return e.prototype.getDimension=function(t){var n=this._recognizeDimIndex(t);if(n==null)return t;if(n=t,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var n=this._recognizeDimIndex(t);if(n!=null)return n;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Wi(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var n=this.getDimensionIndex(t);return n},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var n=this._dimInfos;this._getDimInfo=t?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[t];var i=r.encode[t];return i?i[n]:null},e.prototype.mapDimensionsAll=function(t){var n=this._dimSummary,r=n.encode[t];return(r||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,n,r){var i=this,a;if(t instanceof HR&&(a=t),!a){var o=this.dimensions,s=Yz(t)||qs(t)?new kQ(t,o.length):t;a=new HR;var l=Hh(o,function(c){return{type:i._dimInfos[c].type,property:c}});a.initData(s,l,r)}this._store=a,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=YVe(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var n=this._store.appendData(t);this._doInit(n[0],n[1])},e.prototype.appendValues=function(t,n){var r=this._store.appendValues(t,n&&n.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=n[l],o&&$I(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==kf&&!t.fillStorage},e.prototype._doInit=function(t,n){if(!(t>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===su;if(l&&!i.pure)for(var c=[],h=t;h<n;h++){var f=i.getItem(h,c);if(!this.hasItemOption&&dFe(f)&&(this.hasItemOption=!0),f){var p=f.name;a[h]==null&&p!=null&&(a[h]=Wu(p,null));var v=f.id;o[h]==null&&v!=null&&(o[h]=Wu(v,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<n;h++)$I(this,h);zj(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,n){n=this.getDimension(n),this._approximateExtent[n]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,n){Fb(t)?Pn(this._calculationInfo,t):this._calculationInfo[t]=n},e.prototype.getName=function(t){var n=this.getRawIndex(t),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=Nb(this,this._nameDimIdx,n)),r==null&&(r=""),r},e.prototype._getCategory=function(t,n){var r=this._store.get(t,n),i=this._store.getOrdinalMeta(t);return i?i.categories[r]:r},e.prototype.getId=function(t){return q2(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,n){var r=this._store,i=this._dimInfos[t];if(i)return r.get(i.storeDimIndex,n)},e.prototype.getByRawIndex=function(t,n){var r=this._store,i=this._dimInfos[t];if(i)return r.getByRawIndex(i.storeDimIndex,n)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,n){var r=this,i=this._store;return Vn(t)?i.getValues(Hh(t,function(a){return r._getStoreDimIndex(a)}),n):i.getValues(t)},e.prototype.hasValue=function(t){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===t)return n;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,n){var r=t&&this._invertedIndicesMap[t],i=r&&r[n];return i==null||isNaN(i)?Oj:i},e.prototype.indicesOfNearest=function(t,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),n,r)},e.prototype.each=function(t,n,r){Mr(t)&&(r=n,n=t,t=[]);var i=r||this,a=Hh($b(t),this._getStoreDimIndex,this);this._store.each(a,i?ur(n,i):n)},e.prototype.filterSelf=function(t,n,r){Mr(t)&&(r=n,n=t,t=[]);var i=r||this,a=Hh($b(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?ur(n,i):n),this},e.prototype.selectRange=function(t){var n=this,r={},i=va(t);return qe(i,function(a){var o=n._getStoreDimIndex(a);r[o]=t[a]}),this._store=this._store.selectRange(r),this},e.prototype.mapArray=function(t,n,r){Mr(t)&&(r=n,n=t,t=[]),r=r||this;var i=[];return this.each(t,function(){i.push(n&&n.apply(this,arguments))},r),i},e.prototype.map=function(t,n,r,i){var a=r||i||this,o=Hh($b(t),this._getStoreDimIndex,this),s=Vb(this);return s._store=this._store.map(o,a?ur(n,a):n),s},e.prototype.modify=function(t,n,r,i){var a=r||i||this,o=Hh($b(t),this._getStoreDimIndex,this);this._store.modify(o,a?ur(n,a):n)},e.prototype.downSample=function(t,n,r,i){var a=Vb(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),n,r,i),a},e.prototype.minmaxDownSample=function(t,n){var r=Vb(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),n),r},e.prototype.lttbDownSample=function(t,n){var r=Vb(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),n),r},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var n=this.hostModel,r=this.getRawDataItem(t);return new xa(r,n,n&&n.ecModel)},e.prototype.diff=function(t){var n=this;return new o4(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return q2(t,r)},function(r){return q2(n,r)})},e.prototype.getVisual=function(t){var n=this._visual;return n&&n[t]},e.prototype.setVisual=function(t,n){this._visual=this._visual||{},Fb(t)?Pn(this._visual,t):this._visual[t]=n},e.prototype.getItemVisual=function(t,n){var r=this._itemVisuals[t],i=r&&r[n];return i??this.getVisual(n)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,n){var r=this._itemVisuals,i=r[t];i||(i=r[t]={});var a=i[n];return a==null&&(a=this.getVisual(n),Vn(a)?a=a.slice():Fb(a)&&(a=Pn({},a)),i[n]=a),a},e.prototype.setItemVisual=function(t,n,r){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Fb(n)?Pn(i,n):i[n]=r},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,n){Fb(t)?Pn(this._layout,t):this._layout[t]=n},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,n,r){this._itemLayouts[t]=r?Pn(this._itemLayouts[t]||{},n):n},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,n){var r=this.hostModel&&this.hostModel.seriesIndex;PR(r,this.dataType,t,n),this._graphicEls[t]=n},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,n){qe(this._graphicEls,function(r,i){r&&t&&t.call(n,r,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Hh(this.dimensions,this._getDimInfo,this),this.hostModel)),NI(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,n){var r=this[t];Mr(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(mz(arguments)))})},e.internalField=function(){zj=function(t){var n=t._invertedIndicesMap;qe(n,function(r,i){var a=t._dimInfos[i],o=a.ordinalMeta,s=t._store;if(o){r=n[i]=new tHe(o.categories.length);for(var l=0;l<r.length;l++)r[l]=Oj;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},Nb=function(t,n,r){return Wu(t._getCategory(n,r),null)},q2=function(t,n){var r=t._idList[n];return r==null&&t._idDimIdx!=null&&(r=Nb(t,t._idDimIdx,n)),r==null&&(r=nHe+n),r},$b=function(t){return Vn(t)||(t=t!=null?[t]:[]),t},Vb=function(t){var n=new e(t._schema?t._schema:Hh(t.dimensions,t._getDimInfo,t),t.hostModel);return NI(n,t),n},NI=function(t,n){qe(rHe.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(t[r]=n[r])}),t.__wrappedMethods=n.__wrappedMethods,qe(iHe,function(r){t[r]=wr(n[r])}),t._calculationInfo=Pn({},n._calculationInfo)},$I=function(t,n){var r=t._nameList,i=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=r[n],l=i[n];if(s==null&&a!=null&&(r[n]=s=Nb(t,a,n)),l==null&&o!=null&&(i[n]=l=Nb(t,o,n)),l==null&&s!=null){var c=t._nameRepeatCount,h=c[s]=(c[s]||0)+1;l=s,h>1&&(l+="__ec__"+h),i[n]=l}}}(),e}();function kee(e,t){Yz(e)||(e=CQ(e)),t=t||{};var n=t.coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],i=Dr(),a=[],o=oHe(e,n,r,t.dimensionsCount),s=t.canOmitUnusedDimensions&&Tee(o),l=r===e.dimensionsDefine,c=l?Cee(e):See(r),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(e,o));for(var f=Dr(h),p=new LQ(o),v=0;v<p.length;v++)p[v]=-1;function _(j){var W=p[j];if(W<0){var U=r[j],Y=fr(U)?U:{name:U},ie=new qC,ue=Y.name;ue!=null&&c.get(ue)!=null&&(ie.name=ie.displayName=ue),Y.type!=null&&(ie.type=Y.type),Y.displayName!=null&&(ie.displayName=Y.displayName);var J=a.length;return p[j]=J,ie.storeDimIndex=j,a.push(ie),ie}return a[W]}if(!s)for(var v=0;v<o;v++)_(v);f.each(function(j,W){var U=Ao(j).slice();if(U.length===1&&!Qn(U[0])&&U[0]<0){f.set(W,!1);return}var Y=f.set(W,[]);qe(U,function(ie,ue){var J=Qn(ie)?c.get(ie):ie;J!=null&&J<o&&(Y[ue]=J,C(_(J),W,ue))})});var b=0;qe(n,function(j){var W,U,Y,ie;if(Qn(j))W=j,ie={};else{ie=j,W=ie.name;var ue=ie.ordinalMeta;ie.ordinalMeta=null,ie=Pn({},ie),ie.ordinalMeta=ue,U=ie.dimsDef,Y=ie.otherDims,ie.name=ie.coordDim=ie.coordDimIndex=ie.dimsDef=ie.otherDims=null}var J=f.get(W);if(J!==!1){if(J=Ao(J),!J.length)for(var q=0;q<(U&&U.length||1);q++){for(;b<o&&_(b).coordDim!=null;)b++;b<o&&J.push(b++)}qe(J,function(ce,re){var ee=_(ce);if(l&&ie.type!=null&&(ee.type=ie.type),C(hi(ee,ie),W,re),ee.name==null&&U){var oe=U[re];!fr(oe)&&(oe={name:oe}),ee.name=ee.displayName=oe.name,ee.defaultTooltip=oe.defaultTooltip}Y&&hi(ee.otherDims,Y)})}});function C(j,W,U){mQ.get(W)!=null?j.otherDims[W]=U:(j.coordDim=W,j.coordDimIndex=U,i.set(W,!0))}var T=t.generateCoord,E=t.generateCoordCount,A=E!=null;E=T?E||1:0;var I=T||"value";function O(j){j.name==null&&(j.name=j.coordDim)}if(s)qe(a,function(j){O(j)}),a.sort(function(j,W){return j.storeDimIndex-W.storeDimIndex});else for(var B=0;B<o;B++){var N=_(B),H=N.coordDim;H==null&&(N.coordDim=sHe(I,i,A),N.coordDimIndex=0,(!T||E<=0)&&(N.isExtraCoord=!0),E--),O(N),N.type==null&&(_Q(e,B)===So.Must||N.isExtraCoord&&(N.otherDims.itemName!=null||N.otherDims.seriesName!=null))&&(N.type="ordinal")}return aHe(a),new wee({source:e,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function aHe(e){for(var t=Dr(),n=0;n<e.length;n++){var r=e[n],i=r.name,a=t.get(i)||0;a>0&&(r.name=i+(a-1)),a++,t.set(i,a)}}function oHe(e,t,n,r){var i=Math.max(e.dimensionsDetectedCount||1,t.length,n.length,r||0);return qe(t,function(a){var o;fr(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function sHe(e,t,n){if(n||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}var lHe=function(){function e(t){this.coordSysDims=[],this.axisMap=Dr(),this.categoryAxisMap=Dr(),this.coordSysName=t}return e}();function uHe(e){var t=e.get("coordinateSystem"),n=new lHe(t),r=cHe[t];if(r)return r(e,n,n.axisMap,n.categoryAxisMap),n}var cHe={cartesian2d:function(e,t,n,r){var i=e.getReferringComponents("xAxis",gs).models[0],a=e.getReferringComponents("yAxis",gs).models[0];t.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),Ug(i)&&(r.set("x",i),t.firstCategoryDimIndex=0),Ug(a)&&(r.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,n,r){var i=e.getReferringComponents("singleAxis",gs).models[0];t.coordSysDims=["single"],n.set("single",i),Ug(i)&&(r.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,n,r){var i=e.getReferringComponents("polar",gs).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Ug(a)&&(r.set("radius",a),t.firstCategoryDimIndex=0),Ug(o)&&(r.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();qe(a.parallelAxisIndex,function(s,l){var c=i.getComponent("parallelAxis",s),h=o[l];n.set(h,c),Ug(c)&&(r.set(h,c),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Ug(e){return e.get("type")==="category"}function dHe(e,t,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,a,o,s;hHe(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(e&&e.get("stack")),c,h,f,p;if(qe(a,function(E,A){Qn(E)&&(a[A]=E={name:E}),l&&!E.isExtraCoord&&(!r&&!c&&E.ordinalMeta&&(c=E),!h&&E.type!=="ordinal"&&E.type!=="time"&&(!i||i===E.coordDim)&&(h=E))}),h&&!r&&!c&&(r=!0),h){f="__\0ecstackresult_"+e.id,p="__\0ecstackedover_"+e.id,c&&(c.createInvertedIndices=!0);var v=h.coordDim,_=h.type,b=0;qe(a,function(E){E.coordDim===v&&b++});var C={name:f,coordDim:v,coordDimIndex:b,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},T={name:p,coordDim:p,coordDimIndex:b+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(C.storeDimIndex=s.ensureCalculationDimension(p,_),T.storeDimIndex=s.ensureCalculationDimension(f,_)),o.appendCalculationDimension(C),o.appendCalculationDimension(T)):(a.push(C),a.push(T))}return{stackedDimension:h&&h.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:p,stackResultDimension:f}}function hHe(e){return!xee(e.schema)}function f0(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function fHe(e,t){return f0(e,t)?e.getCalculationInfo("stackResultDimension"):t}function pHe(e,t){var n=e.get("coordinateSystem"),r=$k.get(n),i;return t&&t.coordSysDims&&(i=Yn(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=XVe(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function vHe(e,t,n){var r,i;return n&&qe(e,function(a,o){var s=a.coordDim,l=n.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(e[r].otherDims.itemName=0),r}function Ex(e,t,n){n=n||{};var r=t.getSourceManager(),i,a=!1;i=r.getSource(),a=i.sourceFormat===su;var o=uHe(t),s=pHe(t,o),l=n.useEncodeDefaulter,c=Mr(l)?l:l?bi(h6e,s,t):null,h={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!a},f=kee(i,h),p=vHe(f.dimensions,n.createInvertedIndices,o),v=a?null:r.getSharedDataStore(f),_=dHe(t,{schema:f,store:v}),b=new Mee(f,t);b.setCalculationInfo(_);var C=p!=null&&mHe(i)?function(T,E,A,I){return I===p?A:this.defaultDimValueGetter(T,E,A,I)}:null;return b.hasItemOption=!1,b.initData(a?i:v,null,C),b}function mHe(e){if(e.sourceFormat===su){var t=gHe(e.data||[]);return!Vn(_x(t))}}function gHe(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var dd=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var n=this._extent;t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,n){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(n)||(r[1]=n)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Ck(dd);var yHe=0,QR=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++yHe}return e.createByAxisModel=function(t){var n=t.option,r=n.data,i=r&&Yn(r,_He);return new e({categories:i,needCollect:!i,deduplication:n.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var n,r=this._needCollect;if(!Qn(t)&&!r)return t;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=t,n;var i=this._getOrCreateMap();return n=i.get(t),n==null&&(r?(n=this.categories.length,this.categories[n]=t,i.set(t,n)):n=NaN),n},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Dr(this.categories))},e}();function _He(e){return fr(e)&&e.value!=null?e.value:e+""}function eO(e){return e.type==="interval"||e.type==="log"}function bHe(e,t,n,r){var i={},a=e[1]-e[0],o=i.interval=dJ(a/t);n!=null&&o<n&&(o=i.interval=n),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=Eee(o),l=i.niceTickExtent=[za(Math.ceil(e[0]/o)*o,s),za(Math.floor(e[1]/o)*o,s)];return wHe(l,e),i}function VI(e){var t=Math.pow(10,Cz(e)),n=e/t;return n?n===2?n=3:n===3?n=5:n*=2:n=1,za(n*t)}function Eee(e){return Vd(e)+2}function Bj(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function wHe(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),Bj(e,0,t),Bj(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function Wk(e,t){return e>=t[0]&&e<=t[1]}function Gk(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Kk(e,t){return e*(t[1]-t[0])+t[0]}var s4=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new QR({})),Vn(i)&&(i=new QR({categories:Yn(i,function(a){return fr(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return t.prototype.parse=function(n){return n==null?NaN:Qn(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},t.prototype.contain=function(n){return n=this.parse(n),Wk(n,this._extent)&&this._ordinalMeta.categories[n]!=null},t.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),Gk(n,this._extent)},t.prototype.scale=function(n){return n=Math.round(Kk(n,this._extent)),this.getRawOrdinalNumber(n)},t.prototype.getTicks=function(){for(var n=[],r=this._extent,i=r[0];i<=r[1];)n.push({value:i}),i++;return n},t.prototype.getMinorTicks=function(n){},t.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var c=r[o];i[o]=c,a[c]=o}for(var h=0;o<s;++o){for(;a[h]!=null;)h++;i.push(h),a[h]=o}},t.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},t.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},t.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},t.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(dd);dd.registerClass(s4);var av=za,V0=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return Wk(n,this._extent)},t.prototype.normalize=function(n){return Gk(n,this._extent)},t.prototype.scale=function(n){return Kk(n,this._extent)},t.prototype.setExtent=function(n,r){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n)),isNaN(r)||(i[1]=parseFloat(r))},t.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=Eee(n)},t.prototype.getTicks=function(n){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(n?s.push({value:av(a[0]-r,o)}):s.push({value:i[0]}));for(var c=a[0];c<=a[1]&&(s.push({value:c}),c=av(c+r,o),c!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:a[1];return i[1]>h&&(n?s.push({value:av(h+r,o)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],c=0,h=[],f=s.value-l.value,p=f/n;c<n-1;){var v=av(l.value+(c+1)*p);v>a[0]&&v<a[1]&&h.push(v),c++}i.push(h)}return i},t.prototype.getLabel=function(n,r){if(n==null)return"";var i=r&&r.precision;i==null?i=Vd(n.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=av(n.value,i,!0);return dQ(a)},t.prototype.calcNiceTicks=function(n,r,i){n=n||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=bHe(a,n,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);n.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var o=this._interval;n.fixMin||(r[0]=av(Math.floor(r[0]/o)*o)),n.fixMax||(r[1]=av(Math.ceil(r[1]/o)*o))},t.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},t.type="interval",t}(dd);dd.registerClass(V0);var Aee=typeof Float32Array<"u",xHe=Aee?Float32Array:Array;function Hd(e){return Vn(e)?Aee?new Float32Array(e):e:new xHe(e)}var SHe="__ec_stack_";function l4(e){return e.get("stack")||SHe+e.seriesIndex}function u4(e){return e.dim+e.index}function Pee(e,t){var n=[];return t.eachSeriesByType(e,function(r){Lee(r)&&n.push(r)}),n}function CHe(e){var t={};qe(e,function(l){var c=l.coordinateSystem,h=c.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var f=l.getData(),p=h.dim+"_"+h.index,v=f.getDimensionIndex(f.mapDimension(h.dim)),_=f.getStore(),b=0,C=_.count();b<C;++b){var T=_.get(v,b);t[p]?t[p].push(T):t[p]=[T]}});var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(i){i.sort(function(l,c){return l-c});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}n[r]=a}}return n}function Iee(e){var t=CHe(e),n=[];return qe(e,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,c=t[l],h=Math.abs(o[1]-o[0]),f=a.scale.getExtent(),p=Math.abs(f[1]-f[0]);s=c?h/p*c:h}else{var v=r.getData();s=Math.abs(o[1]-o[0])/v.count()}var _=Fr(r.get("barWidth"),s),b=Fr(r.get("barMaxWidth"),s),C=Fr(r.get("barMinWidth")||(Dee(r)?.5:1),s),T=r.get("barGap"),E=r.get("barCategoryGap");n.push({bandWidth:s,barWidth:_,barMaxWidth:b,barMinWidth:C,barGap:T,barCategoryGap:E,axisKey:u4(a),stackId:l4(r)})}),THe(n)}function THe(e){var t={};qe(e,function(r,i){var a=r.axisKey,o=r.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var c=r.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var h=r.barWidth;h&&!l[c].width&&(l[c].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var f=r.barMaxWidth;f&&(l[c].maxWidth=f);var p=r.barMinWidth;p&&(l[c].minWidth=p);var v=r.barGap;v!=null&&(s.gap=v);var _=r.barCategoryGap;_!=null&&(s.categoryGap=_)});var n={};return qe(t,function(r,i){n[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=va(a).length;s=Math.max(35-l*4,15)+"%"}var c=Fr(s,o),h=Fr(r.gap,1),f=r.remainedWidth,p=r.autoWidthCount,v=(f-c)/(p+(p-1)*h);v=Math.max(v,0),qe(a,function(T){var E=T.maxWidth,A=T.minWidth;if(T.width){var I=T.width;E&&(I=Math.min(I,E)),A&&(I=Math.max(I,A)),T.width=I,f-=I+h*I,p--}else{var I=v;E&&E<I&&(I=Math.min(E,f)),A&&A>I&&(I=A),I!==v&&(T.width=I,f-=I+h*I,p--)}}),v=(f-c)/(p+(p-1)*h),v=Math.max(v,0);var _=0,b;qe(a,function(T,E){T.width||(T.width=v),b=T,_+=T.width*(1+h)}),b&&(_-=b.width*h);var C=-_/2;qe(a,function(T,E){n[i][E]=n[i][E]||{bandWidth:o,offset:C,width:T.width},C+=T.width*(1+h)})}),n}function MHe(e,t,n){if(e&&t){var r=e[u4(t)];return r!=null&&n!=null?r[l4(n)]:r}}function kHe(e,t){var n=Pee(e,t),r=Iee(n);qe(n,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=l4(i),c=r[u4(s)][l],h=c.offset,f=c.width;a.setLayout({bandWidth:c.bandWidth,offset:h,size:f})})}function EHe(e){return{seriesType:e,plan:Qz(),reset:function(t){if(Lee(t)){var n=t.getData(),r=t.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=n.getDimensionIndex(n.mapDimension(a.dim)),s=n.getDimensionIndex(n.mapDimension(i.dim)),l=t.get("showBackground",!0),c=n.mapDimension(a.dim),h=n.getCalculationInfo("stackResultDimension"),f=f0(n,c)&&!!n.getCalculationInfo("stackedOnSeries"),p=a.isHorizontal(),v=AHe(i,a),_=Dee(t),b=t.get("barMinHeight")||0,C=h&&n.getDimensionIndex(h),T=n.getLayout("size"),E=n.getLayout("offset");return{progress:function(A,I){for(var O=A.count,B=_&&Hd(O*3),N=_&&l&&Hd(O*3),H=_&&Hd(O),j=r.master.getRect(),W=p?j.width:j.height,U,Y=I.getStore(),ie=0;(U=A.next())!=null;){var ue=Y.get(f?C:o,U),J=Y.get(s,U),q=v,ce=void 0;f&&(ce=+ue-Y.get(o,U));var re=void 0,ee=void 0,oe=void 0,be=void 0;if(p){var we=r.dataToPoint([ue,J]);if(f){var pe=r.dataToPoint([ce,J]);q=pe[0]}re=q,ee=we[1]+E,oe=we[0]-q,be=T,Math.abs(oe)<b&&(oe=(oe<0?-1:1)*b)}else{var we=r.dataToPoint([J,ue]);if(f){var pe=r.dataToPoint([J,ce]);q=pe[1]}re=we[0]+E,ee=q,oe=T,be=we[1]-q,Math.abs(be)<b&&(be=(be<=0?-1:1)*b)}_?(B[ie]=re,B[ie+1]=ee,B[ie+2]=p?oe:be,N&&(N[ie]=p?j.x:re,N[ie+1]=p?ee:j.y,N[ie+2]=W),H[U]=U):I.setItemLayout(U,{x:re,y:ee,width:oe,height:be}),ie+=3}_&&I.setLayout({largePoints:B,largeDataIndices:H,largeBackgroundPoints:N,valueAxisHorizontal:p})}}}}}}function Lee(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function Dee(e){return e.pipelineContext&&e.pipelineContext.large}function AHe(e,t){var n=t.model.get("startValue");return n||(n=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?n>0?n:1:n))}var PHe=function(e,t,n,r){for(;n<r;){var i=n+r>>>1;e[i][1]<t?n=i+1:r=i}return n},Ree=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="time",r}return t.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return Ok(n.value,EH[e6e(Ly(this._minLevelUnit))]||EH.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(n,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return t6e(n,r,i,o,a)},t.prototype.getTicks=function(){var n=this._interval,r=this._extent,i=[];if(!n)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=BHe(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},t.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Gl,r[1]+=Gl),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Gl}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},t.prototype.calcNiceTicks=function(n,r,i){n=n||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Z2.length,l=Math.min(PHe(Z2,this._approxInterval,0,s),s-1);this._interval=Z2[l][1],this._minLevelUnit=Z2[Math.max(l-1,0)][0]},t.prototype.parse=function(n){return Wi(n)?n:+td(n)},t.prototype.contain=function(n){return Wk(this.parse(n),this._extent)},t.prototype.normalize=function(n){return Gk(this.parse(n),this._extent)},t.prototype.scale=function(n){return Kk(n,this._extent)},t.type="time",t}(V0),Z2=[["second",jz],["minute",Uz],["hour",B1],["quarter-day",B1*6],["half-day",B1*12],["day",Gl*1.2],["half-week",Gl*3.5],["week",Gl*7],["month",Gl*31],["quarter",Gl*95],["half-year",kH/2],["year",kH]];function IHe(e,t,n,r){var i=td(t),a=td(n),o=function(_){return AH(i,_,r)===AH(a,_,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},c=function(){return l()&&o("day")},h=function(){return c()&&o("hour")},f=function(){return h()&&o("minute")},p=function(){return f()&&o("second")},v=function(){return p()&&o("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return c();case"hour":return h();case"minute":return f();case"second":return p();case"millisecond":return v()}}function LHe(e,t){return e/=Gl,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function DHe(e){var t=30*Gl;return e/=t,e>6?6:e>3?3:e>2?2:1}function RHe(e){return e/=B1,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function Fj(e,t){return e/=t?Uz:jz,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function OHe(e){return dJ(e)}function zHe(e,t,n){var r=new Date(e);switch(Ly(t)){case"year":case"month":r[aQ(n)](0);case"day":r[oQ(n)](1);case"hour":r[sQ(n)](0);case"minute":r[lQ(n)](0);case"second":r[uQ(n)](0),r[cQ(n)](0)}return r.getTime()}function BHe(e,t,n,r){var i=1e4,a=rQ,o=0;function s(W,U,Y,ie,ue,J,q){for(var ce=new Date(U),re=U,ee=ce[ie]();re<Y&&re<=r[1];)q.push({value:re}),ee+=W,ce[ue](ee),re=ce.getTime();q.push({value:re,notAdd:!0})}function l(W,U,Y){var ie=[],ue=!U.length;if(!IHe(Ly(W),r[0],r[1],n)){ue&&(U=[{value:zHe(new Date(r[0]),W,n)},{value:r[1]}]);for(var J=0;J<U.length-1;J++){var q=U[J].value,ce=U[J+1].value;if(q!==ce){var re=void 0,ee=void 0,oe=void 0,be=!1;switch(W){case"year":re=Math.max(1,Math.round(t/Gl/365)),ee=Wz(n),oe=n6e(n);break;case"half-year":case"quarter":case"month":re=DHe(t),ee=Dy(n),oe=aQ(n);break;case"week":case"half-week":case"day":re=LHe(t),ee=zk(n),oe=oQ(n),be=!0;break;case"half-day":case"quarter-day":case"hour":re=RHe(t),ee=Ew(n),oe=sQ(n);break;case"minute":re=Fj(t,!0),ee=Bk(n),oe=lQ(n);break;case"second":re=Fj(t,!1),ee=Fk(n),oe=uQ(n);break;case"millisecond":re=OHe(t),ee=Nk(n),oe=cQ(n);break}s(re,q,ce,ee,oe,be,ie),W==="year"&&Y.length>1&&J===0&&Y.unshift({value:Y[0].value-re})}}for(var J=0;J<ie.length;J++)Y.push(ie[J]);return ie}}for(var c=[],h=[],f=0,p=0,v=0;v<a.length&&o++<i;++v){var _=Ly(a[v]);if(Q8e(a[v])){l(a[v],c[c.length-1]||[],h);var b=a[v+1]?Ly(a[v+1]):null;if(_!==b){if(h.length){p=f,h.sort(function(W,U){return W.value-U.value});for(var C=[],T=0;T<h.length;++T){var E=h[T].value;(T===0||h[T-1].value!==E)&&(C.push(h[T]),E>=r[0]&&E<=r[1]&&f++)}var A=(r[1]-r[0])/t;if(f>A*1.5&&p>A/1.5||(c.push(C),f>A||e===a[v]))break}h=[]}}}for(var I=fo(Yn(c,function(W){return fo(W,function(U){return U.value>=r[0]&&U.value<=r[1]&&!U.notAdd})}),function(W){return W.length>0}),O=[],B=I.length-1,v=0;v<I.length;++v)for(var N=I[v],H=0;H<N.length;++H)O.push({value:N[H].value,level:B-v});O.sort(function(W,U){return W.value-U.value});for(var j=[],v=0;v<O.length;++v)(v===0||O[v].value!==O[v-1].value)&&j.push(O[v]);return j}dd.registerClass(Ree);var Nj=dd.prototype,V1=V0.prototype,FHe=za,NHe=Math.floor,$He=Math.ceil,Y2=Math.pow,ku=Math.log,c4=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new V0,n._interval=0,n}return t.prototype.getTicks=function(n){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=V1.getTicks.call(this,n);return Yn(o,function(s){var l=s.value,c=za(Y2(this.base,l));return c=l===i[0]&&this._fixMin?X2(c,a[0]):c,c=l===i[1]&&this._fixMax?X2(c,a[1]):c,{value:c}},this)},t.prototype.setExtent=function(n,r){var i=ku(this.base);n=ku(Math.max(0,n))/i,r=ku(Math.max(0,r))/i,V1.setExtent.call(this,n,r)},t.prototype.getExtent=function(){var n=this.base,r=Nj.getExtent.call(this);r[0]=Y2(n,r[0]),r[1]=Y2(n,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=X2(r[0],a[0])),this._fixMax&&(r[1]=X2(r[1],a[1])),r},t.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=ku(n[0])/ku(r),n[1]=ku(n[1])/ku(r),Nj.unionExtent.call(this,n)},t.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=uFe(i),o=n/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[za($He(r[0]/a)*a),za(NHe(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(n){V1.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return n=ku(n)/ku(this.base),Wk(n,this._extent)},t.prototype.normalize=function(n){return n=ku(n)/ku(this.base),Gk(n,this._extent)},t.prototype.scale=function(n){return n=Kk(n,this._extent),Y2(this.base,n)},t.type="log",t}(dd),Oee=c4.prototype;Oee.getMinorTicks=V1.getMinorTicks;Oee.getLabel=V1.getLabel;function X2(e,t){return FHe(e,Vd(t))}dd.registerClass(c4);var VHe=function(){function e(t,n,r){this._prepareParams(t,n,r)}return e.prototype._prepareParams=function(t,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var a=n.get("min",!0);a==null&&(a=n.get("startValue",!0));var o=this._modelMinRaw=a;Mr(o)?this._modelMinNum=J2(t,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=J2(t,o));var s=this._modelMaxRaw=n.get("max",!0);if(Mr(s)?this._modelMaxNum=J2(t,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=J2(t,s)),i)this._axisDataLen=n.getCategories().length;else{var l=n.get("boundaryGap"),c=Vn(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ed(c[0],1),ed(c[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,n=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=t?null:r-n||Math.abs(n),s=this._modelMinRaw==="dataMin"?n:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,c=s!=null,h=l!=null;s==null&&(s=t?i?0:NaN:n-a[0]*o),l==null&&(l=t?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=$T(s)||$T(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!h&&(l=0));var p=this._determinedMin,v=this._determinedMax;return p!=null&&(s=p,c=!0),v!=null&&(l=v,h=!0),{min:s,max:l,minFixed:c,maxFixed:h,isBlank:f}},e.prototype.modifyDataMinMax=function(t,n){this[jHe[t]]=n},e.prototype.setDeterminedMinMax=function(t,n){var r=HHe[t];this[r]=n},e.prototype.freeze=function(){this.frozen=!0},e}(),HHe={min:"_determinedMin",max:"_determinedMax"},jHe={min:"_dataMin",max:"_dataMax"};function zee(e,t,n){var r=e.rawExtentInfo;return r||(r=new VHe(e,t,n),e.rawExtentInfo=r,r)}function J2(e,t){return t==null?null:$T(t)?NaN:e.parse(t)}function Bee(e,t){var n=e.type,r=zee(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var i=r.min,a=r.max,o=t.ecModel;if(o&&n==="time"){var s=Pee("bar",o),l=!1;if(qe(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var c=Iee(s),h=UHe(i,a,t,c);i=h.min,a=h.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function UHe(e,t,n,r){var i=n.axis.getExtent(),a=Math.abs(i[1]-i[0]),o=MHe(r,n.axis);if(o===void 0)return{min:e,max:t};var s=1/0;qe(o,function(v){s=Math.min(v.offset,s)});var l=-1/0;qe(o,function(v){l=Math.max(v.offset+v.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,h=t-e,f=1-(s+l)/a,p=h/f-h;return t+=p*(l/c),e-=p*(s/c),{min:e,max:t}}function $j(e,t){var n=t,r=Bee(e,n),i=r.extent,a=n.get("splitNumber");e instanceof c4&&(e.base=n.get("logBase"));var o=e.type,s=n.get("interval"),l=o==="interval"||o==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function WHe(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new s4({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Ree({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(dd.getClass(t)||V0)}}function GHe(e){var t=e.scale.getExtent(),n=t[0],r=t[1];return!(n>0&&r>0||n<0&&r<0)}function H0(e){var t=e.getLabelModel().get("formatter"),n=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(r){return function(i,a){return e.scale.getFormattedLabel(i,a,r)}}(t):Qn(t)?function(r){return function(i){var a=e.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(t):Mr(t)?function(r){return function(i,a){return n!=null&&(a=i.value-n),r(d4(e,i),a,i.level!=null?{level:i.level}:null)}}(t):function(r){return e.scale.getLabel(r)}}function d4(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function KHe(e){var t=e.model,n=e.scale;if(!(!t.get(["axisLabel","show"])||n.isBlank())){var r,i,a=n.getExtent();n instanceof s4?i=n.count():(r=n.getTicks(),i=r.length);var o=e.getLabelModel(),s=H0(e),l,c=1;i>40&&(c=Math.ceil(i/40));for(var h=0;h<i;h+=c){var f=r?r[h]:{value:a[0]+h},p=s(f,h),v=o.getTextRect(p),_=qHe(v,o.get("rotate")||0);l?l.union(_):l=_}return l}}function qHe(e,t){var n=t*Math.PI/180,r=e.width,i=e.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),o=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n)),s=new Ti(e.x,e.y,a,o);return s}function h4(e){var t=e.get("interval");return t??"auto"}function Fee(e){return e.type==="category"&&h4(e.getLabelModel())===0}function Nee(e,t){var n={};return qe(e.mapDimensionsAll(t),function(r){n[fHe(e,r)]=!0}),va(n)}function ZHe(e,t,n){t&&qe(Nee(t,n),function(r){var i=t.getApproximateExtent(r);i[0]<e[0]&&(e[0]=i[0]),i[1]>e[1]&&(e[1]=i[1])})}var YHe=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),Vj=[],XHe={registerPreprocessor:yee,registerProcessor:_ee,registerPostInit:jVe,registerPostUpdate:UVe,registerUpdateLifecycle:i4,registerAction:cd,registerCoordinateSystem:WVe,registerLayout:GVe,registerVisual:xm,registerTransform:qVe,registerLoading:bee,registerMap:KVe,registerImpl:TVe,PRIORITY:FVe,ComponentModel:xi,ComponentView:Cs,SeriesModel:Xs,ChartView:ws,registerComponentModel:function(e){xi.registerClass(e)},registerComponentView:function(e){Cs.registerClass(e)},registerSeriesModel:function(e){Xs.registerClass(e)},registerChartView:function(e){ws.registerClass(e)},registerSubTypeDefaulter:function(e,t){xi.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){rFe(e,t)}};function Io(e){if(Vn(e)){qe(e,function(t){Io(t)});return}pi(Vj,e)>=0||(Vj.push(e),Mr(e)&&(e={install:e}),e.install(XHe))}var Rw=Sa();function $ee(e,t){var n=Yn(t,function(r){return e.scale.parse(r)});return e.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function JHe(e){var t=e.getLabelModel().get("customValues");if(t){var n=H0(e),r=e.scale.getExtent(),i=$ee(e,t),a=fo(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:Yn(a,function(o){var s={value:o};return{formattedLabel:n(s),rawLabel:e.scale.getLabel(s),tickValue:o}})}}return e.type==="category"?eje(e):nje(e)}function QHe(e,t){var n=e.getTickModel().get("customValues");if(n){var r=e.scale.getExtent(),i=$ee(e,n);return{ticks:fo(i,function(a){return a>=r[0]&&a<=r[1]})}}return e.type==="category"?tje(e,t):{ticks:Yn(e.scale.getTicks(),function(a){return a.value})}}function eje(e){var t=e.getLabelModel(),n=Vee(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function Vee(e,t){var n=Hee(e,"labels"),r=h4(t),i=jee(n,r);if(i)return i;var a,o;return Mr(r)?a=Gee(e,r):(o=r==="auto"?rje(e):r,a=Wee(e,o)),Uee(n,r,{labels:a,labelCategoryInterval:o})}function tje(e,t){var n=Hee(e,"ticks"),r=h4(t),i=jee(n,r);if(i)return i;var a,o;if((!t.get("show")||e.scale.isBlank())&&(a=[]),Mr(r))a=Gee(e,r,!0);else if(r==="auto"){var s=Vee(e,e.getLabelModel());o=s.labelCategoryInterval,a=Yn(s.labels,function(l){return l.tickValue})}else o=r,a=Wee(e,o,!0);return Uee(n,r,{ticks:a,tickCategoryInterval:o})}function nje(e){var t=e.scale.getTicks(),n=H0(e);return{labels:Yn(t,function(r,i){return{level:r.level,formattedLabel:n(r,i),rawLabel:e.scale.getLabel(r),tickValue:r.value}})}}function Hee(e,t){return Rw(e)[t]||(Rw(e)[t]=[])}function jee(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function Uee(e,t,n){return e.push({key:t,value:n}),n}function rje(e){var t=Rw(e).autoInterval;return t??(Rw(e).autoInterval=e.calculateCategoryInterval())}function ije(e){var t=aje(e),n=H0(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=e.dataToCoord(l+1)-e.dataToCoord(l),h=Math.abs(c*Math.cos(r)),f=Math.abs(c*Math.sin(r)),p=0,v=0;l<=a[1];l+=s){var _=0,b=0,C=xk(n({value:l}),t.font,"center","top");_=C.width*1.3,b=C.height*1.3,p=Math.max(p,_,7),v=Math.max(v,b,7)}var T=p/h,E=v/f;isNaN(T)&&(T=1/0),isNaN(E)&&(E=1/0);var A=Math.max(0,Math.floor(Math.min(T,E))),I=Rw(e.model),O=e.getExtent(),B=I.lastAutoInterval,N=I.lastTickCount;return B!=null&&N!=null&&Math.abs(B-A)<=1&&Math.abs(N-o)<=1&&B>A&&I.axisExtent0===O[0]&&I.axisExtent1===O[1]?A=B:(I.lastTickCount=o,I.lastAutoInterval=A,I.axisExtent0=O[0],I.axisExtent1=O[1]),A}function aje(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function Wee(e,t,n){var r=H0(e),i=e.scale,a=i.getExtent(),o=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),c=a[0],h=i.count();c!==0&&l>1&&h/l>2&&(c=Math.round(Math.ceil(c/l)*l));var f=Fee(e),p=o.get("showMinLabel")||f,v=o.get("showMaxLabel")||f;p&&c!==a[0]&&b(a[0]);for(var _=c;_<=a[1];_+=l)b(_);v&&_-l!==a[1]&&b(a[1]);function b(C){var T={value:C};s.push(n?C:{formattedLabel:r(T),rawLabel:i.getLabel(T),tickValue:C})}return s}function Gee(e,t,n){var r=e.scale,i=H0(e),a=[];return qe(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;t(o.value,s)&&a.push(n?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var Hj=[0,1],oje=function(){function e(t,n,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=n,this._extent=r||[0,0]}return e.prototype.contain=function(t){var n=this._extent,r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return t>=r&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return uJ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,n){var r=this._extent;r[0]=t,r[1]=n},e.prototype.dataToCoord=function(t,n){var r=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(r=r.slice(),jj(r,i.count())),Ai(t,Hj,r,n)},e.prototype.coordToData=function(t,n){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),jj(r,i.count()));var a=Ai(t,r,Hj,n);return this.scale.scale(a)},e.prototype.pointToData=function(t,n){},e.prototype.getTicksCoords=function(t){t=t||{};var n=t.tickModel||this.getTickModel(),r=QHe(this,n),i=r.ticks,a=Yn(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=n.get("alignWithLabel");return sje(this,a,o,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),n=t.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),i=Yn(r,function(a){return Yn(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},e.prototype.getViewLabels=function(){return JHe(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/r},e.prototype.calculateCategoryInterval=function(){return ije(this)},e}();function jj(e,t){var n=e[1]-e[0],r=t,i=n/r/2;e[0]+=i,e[1]-=i}function sje(e,t,n,r){var i=t.length;if(!e.onBand||n||!i)return;var a=e.getExtent(),o,s;if(i===1)t[0].coord=a[0],o=t[1]={coord:a[1],tickValue:t[0].tickValue};else{var l=t[i-1].tickValue-t[0].tickValue,c=(t[i-1].coord-t[0].coord)/l;qe(t,function(v){v.coord-=c/2});var h=e.scale.getExtent();s=1+h[1]-t[i-1].tickValue,o={coord:t[i-1].coord+c*s,tickValue:h[1]+1},t.push(o)}var f=a[0]>a[1];p(t[0].coord,a[0])&&(r?t[0].coord=a[0]:t.shift()),r&&p(a[0],t[0].coord)&&t.unshift({coord:a[0]}),p(a[1],o.coord)&&(r?o.coord=a[1]:t.pop()),r&&p(o.coord,a[1])&&t.push({coord:a[1]});function p(v,_){return v=za(v),_=za(_),f?v>_:v<_}}function Kee(e,t,n,r,i,a,o,s){var l=i-e,c=a-t,h=n-e,f=r-t,p=Math.sqrt(h*h+f*f);h/=p,f/=p;var v=l*h+c*f,_=v/p;_*=p;var b=o[0]=e+_*h,C=o[1]=t+_*f;return Math.sqrt((b-i)*(b-i)+(C-a)*(C-a))}var pf=new Or,Ma=new Or,Co=new Or,vf=new Or,Nc=new Or,pM=[],fs=new Or;function lje(e,t){if(t<=180&&t>0){t=t/180*Math.PI,pf.fromArray(e[0]),Ma.fromArray(e[1]),Co.fromArray(e[2]),Or.sub(vf,pf,Ma),Or.sub(Nc,Co,Ma);var n=vf.len(),r=Nc.len();if(!(n<.001||r<.001)){vf.scale(1/n),Nc.scale(1/r);var i=vf.dot(Nc),a=Math.cos(t);if(a<i){var o=Kee(Ma.x,Ma.y,Co.x,Co.y,pf.x,pf.y,pM);fs.fromArray(pM),fs.scaleAndAdd(Nc,o/Math.tan(Math.PI-t));var s=Co.x!==Ma.x?(fs.x-Ma.x)/(Co.x-Ma.x):(fs.y-Ma.y)/(Co.y-Ma.y);if(isNaN(s))return;s<0?Or.copy(fs,Ma):s>1&&Or.copy(fs,Co),fs.toArray(e[1])}}}}function uje(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,pf.fromArray(e[0]),Ma.fromArray(e[1]),Co.fromArray(e[2]),Or.sub(vf,Ma,pf),Or.sub(Nc,Co,Ma);var r=vf.len(),i=Nc.len();if(!(r<.001||i<.001)){vf.scale(1/r),Nc.scale(1/i);var a=vf.dot(t),o=Math.cos(n);if(a<o){var s=Kee(Ma.x,Ma.y,Co.x,Co.y,pf.x,pf.y,pM);fs.fromArray(pM);var l=Math.PI/2,c=Math.acos(Nc.dot(t)),h=l+c-n;if(h>=l)Or.copy(fs,Co);else{fs.scaleAndAdd(Nc,s/Math.tan(Math.PI/2-h));var f=Co.x!==Ma.x?(fs.x-Ma.x)/(Co.x-Ma.x):(fs.y-Ma.y)/(Co.y-Ma.y);if(isNaN(f))return;f<0?Or.copy(fs,Ma):f>1&&Or.copy(fs,Co)}fs.toArray(e[1])}}}}function HI(e,t,n,r){var i=n==="normal",a=i?e:e.ensureState(n);a.ignore=t;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?e.useStyle(s):a.style=s}function cje(e,t){var n=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=cR(r[0],r[1]),a=cR(r[1],r[2]);if(!i||!a){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=OP([],r[1],r[0],o/i),l=OP([],r[1],r[2],o/a),c=OP([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var h=1;h<r.length;h++)e.lineTo(r[h][0],r[h][1])}function dje(e,t,n){var r=e.getTextGuideLine(),i=e.getTextContent();if(!i){r&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get("show"),s=i.ignore,l=0;l<JT.length;l++){var c=JT[l],h=t[c],f=c==="normal";if(h){var p=h.get("show"),v=f?s:Xr(i.states[c]&&i.states[c].ignore,s);if(v||!Xr(p,o)){var _=f?r:r&&r.states[c];_&&(_.ignore=!0),r&&HI(r,!0,c,h);continue}r||(r=new Yf,e.setTextGuideLine(r),!f&&(s||!o)&&HI(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),HI(r,!1,c,h)}}if(r){hi(r.style,n),r.style.fill=null;var b=a.get("showAbove"),C=e.textGuideLineConfig=e.textGuideLineConfig||{};C.showAbove=b||!1,r.buildPath=cje}}function hje(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},r=0;r<au.length;r++){var i=au[r];n[i]=e.getModel([i,t])}return n}function fje(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,c=o.clone();c.applyTransform(a),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var h=s?new eM(o,a):null;t.push({label:i,labelLine:r.labelLine,rect:c,localRect:o,obb:h,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return t}function pje(e,t,n,r,i,a){var o=e.length;if(o<2)return;e.sort(function(H,j){return H.rect[t]-j.rect[t]});for(var s=0,l,c=!1,h=0,f=0;f<o;f++){var p=e[f],v=p.rect;l=v[t]-s,l<0&&(v[t]-=l,p.label[t]-=l,c=!0);var _=Math.max(-l,0);h+=_,s=v[t]+v[n]}h>0&&a&&O(-h/o,0,o);var b=e[0],C=e[o-1],T,E;A(),T<0&&B(-T,.8),E<0&&B(E,.8),A(),I(T,E,1),I(E,T,-1),A(),T<0&&N(-T),E<0&&N(E);function A(){T=b.rect[t]-r,E=i-C.rect[t]-C.rect[n]}function I(H,j,W){if(H<0){var U=Math.min(j,-H);if(U>0){O(U*W,0,o);var Y=U+H;Y<0&&B(-Y*W,1)}else B(-H*W,1)}}function O(H,j,W){H!==0&&(c=!0);for(var U=j;U<W;U++){var Y=e[U],ie=Y.rect;ie[t]+=H,Y.label[t]+=H}}function B(H,j){for(var W=[],U=0,Y=1;Y<o;Y++){var ie=e[Y-1].rect,ue=Math.max(e[Y].rect[t]-ie[t]-ie[n],0);W.push(ue),U+=ue}if(U){var J=Math.min(Math.abs(H)/U,j);if(H>0)for(var Y=0;Y<o-1;Y++){var q=W[Y]*J;O(q,0,Y+1)}else for(var Y=o-1;Y>0;Y--){var q=W[Y-1]*J;O(-q,Y,o)}}}function N(H){var j=H<0?-1:1;H=Math.abs(H);for(var W=Math.ceil(H/(o-1)),U=0;U<o-1;U++)if(j>0?O(W,0,U+1):O(-W,o-U-1,o),H-=W,H<=0)return}return c}function vje(e,t,n,r){return pje(e,"y","height",t,n,r)}function mje(e){var t=[];e.sort(function(b,C){return C.priority-b.priority});var n=new Ti(0,0,0,0);function r(b){if(!b.ignore){var C=b.ensureState("emphasis");C.ignore==null&&(C.ignore=!1)}b.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],o=a.axisAligned,s=a.localRect,l=a.transform,c=a.label,h=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=a.obb,p=!1,v=0;v<t.length;v++){var _=t[v];if(n.intersect(_.rect)){if(o&&_.axisAligned){p=!0;break}if(_.obb||(_.obb=new eM(_.localRect,_.transform)),f||(f=new eM(s,l)),f.intersect(_.obb)){p=!0;break}}}p?(r(c),h&&r(h)):(c.attr("ignore",a.defaultAttr.ignore),h&&h.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var gje=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n){return Ex(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(n){var r=new Bi,i=Js("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(i),i.setStyle(n.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=n.itemHeight*.8,c=Js(s,(n.itemWidth-l)/2,(n.itemHeight-l)/2,l,l,n.itemStyle.fill);r.add(c),c.setStyle(n.itemStyle);var h=n.iconRotate==="inherit"?o:n.iconRotate||0;return c.rotation=h*Math.PI/180,c.setOrigin([n.itemWidth/2,n.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Xs);function f4(e,t){var n=e.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var i=h0(e,t,n[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<n.length;o++)a.push(h0(e,t,n[o]));return a.join(" ")}}function qee(e,t){var n=e.mapDimensionsAll("defaultedLabel");if(!Vn(t))return t+"";for(var r=[],i=0;i<n.length;i++){var a=e.getDimensionIndex(n[i]);a>=0&&r.push(t[a])}return r.join(" ")}var p4=function(e){xn(t,e);function t(n,r,i,a){var o=e.call(this)||this;return o.updateData(n,r,i,a),o}return t.prototype._createSymbol=function(n,r,i,a,o){this.removeAll();var s=Js(n,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=yje,this._symbolType=n,this.add(s)},t.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){u0(this.childAt(0))},t.prototype.downplay=function(){c0(this.childAt(0))},t.prototype.setZ=function(n,r){var i=this.childAt(0);i.zlevel=n,i.z=r},t.prototype.setDraggable=function(n,r){var i=this.childAt(0);i.draggable=n,i.cursor=!r&&n?"move":i.cursor},t.prototype.updateData=function(n,r,i,a){this.silent=!1;var o=n.getItemVisual(r,"symbol")||"circle",s=n.hostModel,l=t.getSymbolSize(n,r),c=o!==this._symbolType,h=a&&a.disableAnimation;if(c){var f=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,n,r,l,f)}else{var p=this.childAt(0);p.silent=!1;var v={scaleX:l[0]/2,scaleY:l[1]/2};h?p.attr(v):go(p,v,s,r),Nz(p)}if(this._updateCommon(n,r,l,i,a),c){var p=this.childAt(0);if(!h){var v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,bs(p,v,s,r)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(n,r,i,a,o){var s=this.childAt(0),l=n.hostModel,c,h,f,p,v,_,b,C,T;if(a&&(c=a.emphasisItemStyle,h=a.blurItemStyle,f=a.selectItemStyle,p=a.focus,v=a.blurScope,b=a.labelStatesModels,C=a.hoverScale,T=a.cursorStyle,_=a.emphasisDisabled),!a||n.hasItemOption){var E=a&&a.itemModel?a.itemModel:n.getItemModel(r),A=E.getModel("emphasis");c=A.getModel("itemStyle").getItemStyle(),f=E.getModel(["select","itemStyle"]).getItemStyle(),h=E.getModel(["blur","itemStyle"]).getItemStyle(),p=A.get("focus"),v=A.get("blurScope"),_=A.get("disabled"),b=um(E),C=A.getShallow("scale"),T=E.getShallow("cursor")}var I=n.getItemVisual(r,"symbolRotate");s.attr("rotation",(I||0)*Math.PI/180||0);var O=YQ(n.getItemVisual(r,"symbolOffset"),i);O&&(s.x=O[0],s.y=O[1]),T&&s.attr("cursor",T);var B=n.getItemVisual(r,"style"),N=B.fill;if(s instanceof sc){var H=s.style;s.useStyle(Pn({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},B))}else s.__isEmptyBrush?s.useStyle(Pn({},B)):s.useStyle(B),s.style.decal=null,s.setColor(N,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var j=n.getItemVisual(r,"liftZ"),W=this._z2;j!=null?W==null&&(this._z2=s.z2,s.z2+=j):W!=null&&(s.z2=W,this._z2=null);var U=o&&o.useNameLabel;B0(s,b,{labelFetcher:l,labelDataIndex:r,defaultText:Y,inheritColor:N,defaultOpacity:B.opacity});function Y(J){return U?n.getName(J):f4(n,J)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var ie=s.ensureState("emphasis");ie.style=c,s.ensureState("select").style=f,s.ensureState("blur").style=h;var ue=C==null||C===!0?Math.max(1.1,3/this._sizeY):isFinite(C)&&C>0?+C:1;ie.scaleX=this._sizeX*ue,ie.scaleY=this._sizeY*ue,this.setSymbolScale(1),Hf(this,p,v,_)},t.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},t.prototype.fadeOut=function(n,r,i){var a=this.childAt(0),o=yi(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&tM(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();tM(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:n,removeOpt:s})},t.getSymbolSize=function(n,r){return lVe(n.getItemVisual(r,"symbolSize"))},t}(Bi);function yje(e,t){this.parent.drift(e,t)}function jI(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&e.getItemVisual(n,"symbol")!=="none"}function Uj(e){return e!=null&&!fr(e)&&(e={isIgnore:e}),e||{}}function Wj(e){var t=e.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:um(t),cursorStyle:t.get("cursor")}}var Zee=function(){function e(t){this.group=new Bi,this._SymbolCtor=t||p4}return e.prototype.updateData=function(t,n){this._progressiveEls=null,n=Uj(n);var r=this.group,i=t.hostModel,a=this._data,o=this._SymbolCtor,s=n.disableAnimation,l=Wj(t),c={disableAnimation:s},h=n.getSymbolPoint||function(f){return t.getItemLayout(f)};a||r.removeAll(),t.diff(a).add(function(f){var p=h(f);if(jI(t,p,f,n)){var v=new o(t,f,l,c);v.setPosition(p),t.setItemGraphicEl(f,v),r.add(v)}}).update(function(f,p){var v=a.getItemGraphicEl(p),_=h(f);if(!jI(t,_,f,n)){r.remove(v);return}var b=t.getItemVisual(f,"symbol")||"circle",C=v&&v.getSymbolType&&v.getSymbolType();if(!v||C&&C!==b)r.remove(v),v=new o(t,f,l,c),v.setPosition(_);else{v.updateData(t,f,l,c);var T={x:_[0],y:_[1]};s?v.attr(T):go(v,T,i)}r.add(v),t.setItemGraphicEl(f,v)}).remove(function(f){var p=a.getItemGraphicEl(f);p&&p.fadeOut(function(){r.remove(p)},i)}).execute(),this._getSymbolPoint=h,this._data=t},e.prototype.updateLayout=function(){var t=this,n=this._data;n&&n.eachItemGraphicEl(function(r,i){var a=t._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Wj(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,n,r){this._progressiveEls=[],r=Uj(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=n.getItemLayout(a);if(jI(n,o,a,r)){var s=new this._SymbolCtor(n,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),n.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){Cx(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var n=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(i){i.fadeOut(function(){n.remove(i)},r.hostModel)}):n.removeAll()},e}();function Yee(e,t,n){var r=e.getBaseAxis(),i=e.getOtherAxis(r),a=_je(i,n),o=r.dim,s=i.dim,l=t.mapDimension(s),c=t.mapDimension(o),h=s==="x"||s==="radius"?1:0,f=Yn(e.dimensions,function(_){return t.mapDimension(_)}),p=!1,v=t.getCalculationInfo("stackResultDimension");return f0(t,f[0])&&(p=!0,f[0]=v),f0(t,f[1])&&(p=!0,f[1]=v),{dataDimsForPoint:f,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!p,valueDim:l,baseDim:c,baseDataOffset:h,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function _je(e,t){var n=0,r=e.scale.getExtent();return t==="start"?n=r[0]:t==="end"?n=r[1]:Wi(t)&&!isNaN(t)?n=t:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function Xee(e,t,n,r){var i=NaN;e.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=n.get(e.baseDim,r),o[1-a]=i,t.dataToPoint(o)}function bje(e,t){var n=[];return t.diff(e).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,i){n.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function wje(e,t,n,r,i,a,o,s){for(var l=bje(e,t),c=[],h=[],f=[],p=[],v=[],_=[],b=[],C=Yee(i,t,o),T=e.getLayout("points")||[],E=t.getLayout("points")||[],A=0;A<l.length;A++){var I=l[A],O=!0,B=void 0,N=void 0;switch(I.cmd){case"=":B=I.idx*2,N=I.idx1*2;var H=T[B],j=T[B+1],W=E[N],U=E[N+1];(isNaN(H)||isNaN(j))&&(H=W,j=U),c.push(H,j),h.push(W,U),f.push(n[B],n[B+1]),p.push(r[N],r[N+1]),b.push(t.getRawIndex(I.idx1));break;case"+":var Y=I.idx,ie=C.dataDimsForPoint,ue=i.dataToPoint([t.get(ie[0],Y),t.get(ie[1],Y)]);N=Y*2,c.push(ue[0],ue[1]),h.push(E[N],E[N+1]);var J=Xee(C,i,t,Y);f.push(J[0],J[1]),p.push(r[N],r[N+1]),b.push(t.getRawIndex(Y));break;case"-":O=!1}O&&(v.push(I),_.push(_.length))}_.sort(function(Ve,et){return b[Ve]-b[et]});for(var q=c.length,ce=Hd(q),re=Hd(q),ee=Hd(q),oe=Hd(q),be=[],A=0;A<_.length;A++){var we=_[A],pe=A*2,Ce=we*2;ce[pe]=c[Ce],ce[pe+1]=c[Ce+1],re[pe]=h[Ce],re[pe+1]=h[Ce+1],ee[pe]=f[Ce],ee[pe+1]=f[Ce+1],oe[pe]=p[Ce],oe[pe+1]=p[Ce+1],be[A]=v[we]}return{current:ce,next:re,stackedOnCurrent:ee,stackedOnNext:oe,status:be}}var jh=Math.min,Uh=Math.max;function Vv(e,t){return isNaN(e)||isNaN(t)}function tO(e,t,n,r,i,a,o,s,l){for(var c,h,f,p,v,_,b=n,C=0;C<r;C++){var T=t[b*2],E=t[b*2+1];if(b>=i||b<0)break;if(Vv(T,E)){if(l){b+=a;continue}break}if(b===n)e[a>0?"moveTo":"lineTo"](T,E),f=T,p=E;else{var A=T-c,I=E-h;if(A*A+I*I<.5){b+=a;continue}if(o>0){for(var O=b+a,B=t[O*2],N=t[O*2+1];B===T&&N===E&&C<r;)C++,O+=a,b+=a,B=t[O*2],N=t[O*2+1],T=t[b*2],E=t[b*2+1],A=T-c,I=E-h;var H=C+1;if(l)for(;Vv(B,N)&&H<r;)H++,O+=a,B=t[O*2],N=t[O*2+1];var j=.5,W=0,U=0,Y=void 0,ie=void 0;if(H>=r||Vv(B,N))v=T,_=E;else{W=B-c,U=N-h;var ue=T-c,J=B-T,q=E-h,ce=N-E,re=void 0,ee=void 0;if(s==="x"){re=Math.abs(ue),ee=Math.abs(J);var oe=W>0?1:-1;v=T-oe*re*o,_=E,Y=T+oe*ee*o,ie=E}else if(s==="y"){re=Math.abs(q),ee=Math.abs(ce);var be=U>0?1:-1;v=T,_=E-be*re*o,Y=T,ie=E+be*ee*o}else re=Math.sqrt(ue*ue+q*q),ee=Math.sqrt(J*J+ce*ce),j=ee/(ee+re),v=T-W*o*(1-j),_=E-U*o*(1-j),Y=T+W*o*j,ie=E+U*o*j,Y=jh(Y,Uh(B,T)),ie=jh(ie,Uh(N,E)),Y=Uh(Y,jh(B,T)),ie=Uh(ie,jh(N,E)),W=Y-T,U=ie-E,v=T-W*re/ee,_=E-U*re/ee,v=jh(v,Uh(c,T)),_=jh(_,Uh(h,E)),v=Uh(v,jh(c,T)),_=Uh(_,jh(h,E)),W=T-v,U=E-_,Y=T+W*ee/re,ie=E+U*ee/re}e.bezierCurveTo(f,p,v,_,T,E),f=Y,p=ie}else e.lineTo(T,E)}c=T,h=E,b+=a}return C}var Jee=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),xje=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="ec-polyline",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Jee},t.prototype.buildPath=function(n,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&Vv(i[o*2-2],i[o*2-1]);o--);for(;a<o&&Vv(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=tO(n,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=lm.CMD,s,l,c=r==="x",h=[],f=0;f<a.length;){var p=a[f++],v=void 0,_=void 0,b=void 0,C=void 0,T=void 0,E=void 0,A=void 0;switch(p){case o.M:s=a[f++],l=a[f++];break;case o.L:if(v=a[f++],_=a[f++],A=c?(n-s)/(v-s):(n-l)/(_-l),A<=1&&A>=0){var I=c?(_-l)*A+l:(v-s)*A+s;return c?[n,I]:[I,n]}s=v,l=_;break;case o.C:v=a[f++],_=a[f++],b=a[f++],C=a[f++],T=a[f++],E=a[f++];var O=c?jT(s,v,b,T,n,h):jT(l,_,C,E,n,h);if(O>0)for(var B=0;B<O;B++){var N=h[B];if(N<=1&&N>=0){var I=c?Mo(l,_,C,E,N):Mo(s,v,b,T,N);return c?[n,I]:[I,n]}}s=T,l=E;break}}},t}(Ii),Sje=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Jee),Cje=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="ec-polygon",r}return t.prototype.getDefaultShape=function(){return new Sje},t.prototype.buildPath=function(n,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Vv(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Vv(i[o*2],i[o*2+1]);o++);}for(;o<s;){var c=tO(n,i,o,s,s,1,r.smooth,l,r.connectNulls);tO(n,a,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,n.closePath()}},t}(Ii);function Qee(e,t,n,r,i){var a=e.getArea(),o=a.x,s=a.y,l=a.width,c=a.height,h=n.get(["lineStyle","width"])||0;o-=h/2,s-=h/2,l+=h,c+=h,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var f=new Pi({shape:{x:o,y:s,width:l,height:c}});if(t){var p=e.getBaseAxis(),v=p.isHorizontal(),_=p.inverse;v?(_&&(f.shape.x+=l),f.shape.width=0):(_||(f.shape.y+=c),f.shape.height=0);var b=Mr(i)?function(C){i(C,f)}:null;bs(f,{shape:{width:l,height:c,x:o,y:s}},n,null,r,b)}return f}function ete(e,t,n){var r=e.getArea(),i=za(r.r0,1),a=za(r.r,1),o=new nd({shape:{cx:za(e.cx,1),cy:za(e.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,bs(o,{shape:{endAngle:r.endAngle,r:a}},n)}return o}function Tje(e,t,n,r,i){if(e){if(e.type==="polar")return ete(e,t,n);if(e.type==="cartesian2d")return Qee(e,t,n,r,i)}else return null;return null}function qk(e,t){return e.type===t}function Gj(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function Kj(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<e.length;){var o=e[a++],s=e[a++];isNaN(o)||(t=Math.min(o,t),r=Math.max(o,r)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[t,n],[r,i]]}function qj(e,t){var n=Kj(e),r=n[0],i=n[1],a=Kj(t),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function Zj(e){return Wi(e)?e:e?.5:0}function Mje(e,t,n){if(!n.valueDim)return[];for(var r=t.count(),i=Hd(r*2),a=0;a<r;a++){var o=Xee(n,e,t,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Wh(e,t,n,r,i){var a=n.getBaseAxis(),o=a.dim==="x"||a.dim==="radius"?0:1,s=[],l=0,c=[],h=[],f=[],p=[];if(i){for(l=0;l<e.length;l+=2){var v=t||e;!isNaN(v[l])&&!isNaN(v[l+1])&&p.push(e[l],e[l+1])}e=p}for(l=0;l<e.length-2;l+=2)switch(f[0]=e[l+2],f[1]=e[l+3],h[0]=e[l],h[1]=e[l+1],s.push(h[0],h[1]),r){case"end":c[o]=f[o],c[1-o]=h[1-o],s.push(c[0],c[1]);break;case"middle":var _=(h[o]+f[o])/2,b=[];c[o]=b[o]=_,c[1-o]=h[1-o],b[1-o]=f[1-o],s.push(c[0],c[1]),s.push(b[0],b[1]);break;default:c[o]=h[o],c[1-o]=f[1-o],s.push(c[0],c[1])}return s.push(e[l++],e[l++]),s}function kje(e,t){var n=[],r=e.length,i,a;function o(h,f,p){var v=h.coord,_=(p-v)/(f.coord-v),b=EBe(_,[h.color,f.color]);return{coord:p,color:b}}for(var s=0;s<r;s++){var l=e[s],c=l.coord;if(c<0)i=l;else if(c>t){a?n.push(o(a,l,t)):i&&n.push(o(i,l,0),o(i,l,t));break}else i&&(n.push(o(i,l,0)),i=null),n.push(l),a=l}return n}function Eje(e,t,n){var r=e.getVisual("visualMeta");if(!(!r||!r.length||!e.count())&&t.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=e.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=t.getAxis(i),c=Yn(a.stops,function(A){return{coord:l.toGlobalCoord(l.dataToCoord(A.value)),color:A.color}}),h=c.length,f=a.outerColors.slice();h&&c[0].coord>c[h-1].coord&&(c.reverse(),f.reverse());var p=kje(c,i==="x"?n.getWidth():n.getHeight()),v=p.length;if(!v&&h)return c[0].coord<0?f[1]?f[1]:c[h-1].color:f[0]?f[0]:c[0].color;var _=10,b=p[0].coord-_,C=p[v-1].coord+_,T=C-b;if(T<.001)return"transparent";qe(p,function(A){A.offset=(A.coord-b)/T}),p.push({offset:v?p[v-1].offset:.5,color:f[1]||"transparent"}),p.unshift({offset:v?p[0].offset:.5,color:f[0]||"transparent"});var E=new Bz(0,0,0,0,p,!0);return E[i]=b,E[i+"2"]=C,E}}}function Aje(e,t,n){var r=e.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=n.getAxesByScale("ordinal")[0];if(a&&!(i&&Pje(a,t))){var o=t.mapDimension(a.dim),s={};return qe(a.getViewLabels(),function(l){var c=a.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function Pje(e,t){var n=e.getExtent(),r=Math.abs(n[1]-n[0])/e.scale.count();isNaN(r)&&(r=0);for(var i=t.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(p4.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Ije(e,t){return isNaN(e)||isNaN(t)}function Lje(e){for(var t=e.length/2;t>0&&Ije(e[t*2-2],e[t*2-1]);t--);return t-1}function Yj(e,t){return[e[t*2],e[t*2+1]]}function Dje(e,t,n){for(var r=e.length/2,i=n==="x"?0:1,a,o,s=0,l=-1,c=0;c<r;c++)if(o=e[c*2+i],!(isNaN(o)||isNaN(e[c*2+1-i]))){if(c===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){l=c;break}s=c,a=o}return{range:[s,l],t:(t-a)/(o-a)}}function tte(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<au.length;t++)if(e.get([au[t],"endLabel","show"]))return!0;return!1}function UI(e,t,n,r){if(qk(t,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=tte(r)?function(v,_){e._endLabelOnDuring(v,_,o,s,a,i,t)}:null,c=t.getBaseAxis().isHorizontal(),h=Qee(t,n,r,function(){var v=e._endLabel;v&&n&&s.originalX!=null&&v.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var f=h.shape,p=Math.max(f.width,f.height);c?(f.y-=p,f.height+=p*2):(f.x-=p,f.width+=p*2)}return l&&l(1,h),h}else return ete(t,n,r)}function Rje(e,t){var n=t.getBaseAxis(),r=n.isHorizontal(),i=n.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||o}}}var Oje=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var n=new Bi,r=new Zee;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n,this._changePolyState=ur(this._changePolyState,this)},t.prototype.render=function(n,r,i){var a=n.coordinateSystem,o=this.group,s=n.getData(),l=n.getModel("lineStyle"),c=n.getModel("areaStyle"),h=s.getLayout("points")||[],f=a.type==="polar",p=this._coordSys,v=this._symbolDraw,_=this._polyline,b=this._polygon,C=this._lineGroup,T=!r.ssr&&n.get("animation"),E=!c.isEmpty(),A=c.get("origin"),I=Yee(a,s,A),O=E&&Mje(a,s,I),B=n.get("showSymbol"),N=n.get("connectNulls"),H=B&&!f&&Aje(n,s,a),j=this._data;j&&j.eachItemGraphicEl(function(Ve,et){Ve.__temp&&(o.remove(Ve),j.setItemGraphicEl(et,null))}),B||v.remove(),o.add(C);var W=f?!1:n.get("step"),U;a&&a.getArea&&n.get("clip",!0)&&(U=a.getArea(),U.width!=null?(U.x-=.1,U.y-=.1,U.width+=.2,U.height+=.2):U.r0&&(U.r0-=.5,U.r+=.5)),this._clipShapeForSymbol=U;var Y=Eje(s,a,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(_&&p.type===a.type&&W===this._step))B&&v.updateData(s,{isIgnore:H,clipShape:U,disableAnimation:!0,getSymbolPoint:function(Ve){return[h[Ve*2],h[Ve*2+1]]}}),T&&this._initSymbolLabelAnimation(s,a,U),W&&(O&&(O=Wh(O,h,a,W,N)),h=Wh(h,null,a,W,N)),_=this._newPolyline(h),E?b=this._newPolygon(h,O):b&&(C.remove(b),b=this._polygon=null),f||this._initOrUpdateEndLabel(n,a,cm(Y)),C.setClipPath(UI(this,a,!0,n));else{E&&!b?b=this._newPolygon(h,O):b&&!E&&(C.remove(b),b=this._polygon=null),f||this._initOrUpdateEndLabel(n,a,cm(Y));var ie=C.getClipPath();if(ie){var ue=UI(this,a,!1,n);bs(ie,{shape:ue.shape},n)}else C.setClipPath(UI(this,a,!0,n));B&&v.updateData(s,{isIgnore:H,clipShape:U,disableAnimation:!0,getSymbolPoint:function(Ve){return[h[Ve*2],h[Ve*2+1]]}}),(!Gj(this._stackedOnPoints,O)||!Gj(this._points,h))&&(T?this._doUpdateAnimation(s,O,a,i,W,A,N):(W&&(O&&(O=Wh(O,h,a,W,N)),h=Wh(h,null,a,W,N)),_.setShape({points:h}),b&&b.setShape({points:h,stackedOnPoints:O})))}var J=n.getModel("emphasis"),q=J.get("focus"),ce=J.get("blurScope"),re=J.get("disabled");if(_.useStyle(hi(l.getLineStyle(),{fill:"none",stroke:Y,lineJoin:"bevel"})),d0(_,n,"lineStyle"),_.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var ee=_.getState("emphasis").style;ee.lineWidth=+_.style.lineWidth+1}yi(_).seriesIndex=n.seriesIndex,Hf(_,q,ce,re);var oe=Zj(n.get("smooth")),be=n.get("smoothMonotone");if(_.setShape({smooth:oe,smoothMonotone:be,connectNulls:N}),b){var we=s.getCalculationInfo("stackedOnSeries"),pe=0;b.useStyle(hi(c.getAreaStyle(),{fill:Y,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),we&&(pe=Zj(we.get("smooth"))),b.setShape({smooth:oe,stackedOnSmooth:pe,smoothMonotone:be,connectNulls:N}),d0(b,n,"areaStyle"),yi(b).seriesIndex=n.seriesIndex,Hf(b,q,ce,re)}var Ce=this._changePolyState;s.eachItemGraphicEl(function(Ve){Ve&&(Ve.onHoverStateChange=Ce)}),this._polyline.onHoverStateChange=Ce,this._data=s,this._coordSys=a,this._stackedOnPoints=O,this._points=h,this._step=W,this._valueOrigin=A,n.get("triggerLineEvent")&&(this.packEventData(n,_),b&&this.packEventData(n,b))},t.prototype.packEventData=function(n,r){yi(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},t.prototype.highlight=function(n,r,i,a){var o=n.getData(),s=sm(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var h=l[s*2],f=l[s*2+1];if(isNaN(h)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,f))return;var p=n.get("zlevel")||0,v=n.get("z")||0;c=new p4(o,s),c.x=h,c.y=f,c.setZ(p,v);var _=c.getSymbolPath().getTextContent();_&&(_.zlevel=p,_.z=v,_.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else ws.prototype.highlight.call(this,n,r,i,a)},t.prototype.downplay=function(n,r,i,a){var o=n.getData(),s=sm(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ws.prototype.downplay.call(this,n,r,i,a)},t.prototype._changePolyState=function(n){var r=this._polygon;sH(this._polyline,n),r&&sH(r,n)},t.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new xje({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(n,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Cje({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(n,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var c=n.hostModel,h=c.get("animationDuration");Mr(h)&&(h=h(null));var f=c.get("animationDelay")||0,p=Mr(f)?f(null):f;n.eachItemGraphicEl(function(v,_){var b=v;if(b){var C=[v.x,v.y],T=void 0,E=void 0,A=void 0;if(i)if(o){var I=i,O=r.pointToCoord(C);a?(T=I.startAngle,E=I.endAngle,A=-O[1]/180*Math.PI):(T=I.r0,E=I.r,A=O[0])}else{var B=i;a?(T=B.x,E=B.x+B.width,A=v.x):(T=B.y+B.height,E=B.y,A=v.y)}var N=E===T?0:(A-T)/(E-T);l&&(N=1-N);var H=Mr(f)?f(_):h*N+p,j=b.getSymbolPath(),W=j.getTextContent();b.attr({scaleX:0,scaleY:0}),b.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:H}),W&&W.animateFrom({style:{opacity:0}},{duration:300,delay:H}),j.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(n,r,i){var a=n.getModel("endLabel");if(tte(n)){var o=n.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Mi({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var h=Lje(l);h>=0&&(B0(s,um(n,"endLabel"),{inheritColor:i,labelFetcher:n,labelDataIndex:h,defaultText:function(f,p,v){return v!=null?qee(o,v):f4(o,f)},enableTextSetter:!0},Rje(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(n,r,i,a,o,s,l){var c=this._endLabel,h=this._polyline;if(c){n<1&&a.originalX==null&&(a.originalX=c.x,a.originalY=c.y);var f=i.getLayout("points"),p=i.hostModel,v=p.get("connectNulls"),_=s.get("precision"),b=s.get("distance")||0,C=l.getBaseAxis(),T=C.isHorizontal(),E=C.inverse,A=r.shape,I=E?T?A.x:A.y+A.height:T?A.x+A.width:A.y,O=(T?b:0)*(E?-1:1),B=(T?0:-b)*(E?-1:1),N=T?"x":"y",H=Dje(f,I,N),j=H.range,W=j[1]-j[0],U=void 0;if(W>=1){if(W>1&&!v){var Y=Yj(f,j[0]);c.attr({x:Y[0]+O,y:Y[1]+B}),o&&(U=p.getRawValue(j[0]))}else{var Y=h.getPointOn(I,N);Y&&c.attr({x:Y[0]+O,y:Y[1]+B});var ie=p.getRawValue(j[0]),ue=p.getRawValue(j[1]);o&&(U=yJ(i,_,ie,ue,H.t))}a.lastFrameIndex=j[0]}else{var J=n===1||a.lastFrameIndex>0?j[0]:0,Y=Yj(f,J);o&&(U=p.getRawValue(J)),c.attr({x:Y[0]+O,y:Y[1]+B})}if(o){var q=Tx(c);typeof q.setLabelText=="function"&&q.setLabelText(U)}}},t.prototype._doUpdateAnimation=function(n,r,i,a,o,s,l){var c=this._polyline,h=this._polygon,f=n.hostModel,p=wje(this._data,n,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),v=p.current,_=p.stackedOnCurrent,b=p.next,C=p.stackedOnNext;if(o&&(_=Wh(p.stackedOnCurrent,p.current,i,o,l),v=Wh(p.current,null,i,o,l),C=Wh(p.stackedOnNext,p.next,i,o,l),b=Wh(p.next,null,i,o,l)),qj(v,b)>3e3||h&&qj(_,C)>3e3){c.stopAnimation(),c.setShape({points:b}),h&&(h.stopAnimation(),h.setShape({points:b,stackedOnPoints:C}));return}c.shape.__points=p.current,c.shape.points=v;var T={shape:{points:b}};p.current!==v&&(T.shape.__points=p.next),c.stopAnimation(),go(c,T,f),h&&(h.setShape({points:v,stackedOnPoints:_}),h.stopAnimation(),go(h,{shape:{stackedOnPoints:C}},f),c.shape.points!==h.shape.points&&(h.shape.points=c.shape.points));for(var E=[],A=p.status,I=0;I<A.length;I++){var O=A[I].cmd;if(O==="="){var B=n.getItemGraphicEl(A[I].idx1);B&&E.push({el:B,ptIdx:I})}}c.animators&&c.animators.length&&c.animators[0].during(function(){h&&h.dirtyShape();for(var N=c.shape.__points,H=0;H<E.length;H++){var j=E[H].el,W=E[H].ptIdx*2;j.x=N[W],j.y=N[W+1],j.markRedraw()}})},t.prototype.remove=function(n){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ws);function v4(e,t){return{seriesType:e,plan:Qz(),reset:function(n){var r=n.getData(),i=n.coordinateSystem,a=n.pipelineContext,o=t||a.large;if(i){var s=Yn(i.dimensions,function(v){return r.mapDimension(v)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");f0(r,s[0])&&(s[0]=c),f0(r,s[1])&&(s[1]=c);var h=r.getStore(),f=r.getDimensionIndex(s[0]),p=r.getDimensionIndex(s[1]);return l&&{progress:function(v,_){for(var b=v.end-v.start,C=o&&Hd(b*l),T=[],E=[],A=v.start,I=0;A<v.end;A++){var O=void 0;if(l===1){var B=h.get(f,A);O=i.dataToPoint(B,null,E)}else T[0]=h.get(f,A),T[1]=h.get(p,A),O=i.dataToPoint(T,null,E);o?(C[I++]=O[0],C[I++]=O[1]):_.setItemLayout(A,O.slice())}o&&_.setLayout("points",C)}}}}}}var zje={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return n===0?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Bje=function(e){return Math.round(e.length/2)};function nte(e){return{seriesType:e,reset:function(t,n,r){var i=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),c=o.getOtherAxis(l),h=l.getExtent(),f=r.getDevicePixelRatio(),p=Math.abs(h[1]-h[0])*(f||1),v=Math.round(s/p);if(isFinite(v)&&v>1){a==="lttb"?t.setData(i.lttbDownSample(i.mapDimension(c.dim),1/v)):a==="minmax"&&t.setData(i.minmaxDownSample(i.mapDimension(c.dim),1/v));var _=void 0;Qn(a)?_=zje[a]:Mr(a)&&(_=a),_&&t.setData(i.downSample(i.mapDimension(c.dim),1/v,_,Bje))}}}}}function m4(e){e.registerChartView(Oje),e.registerSeriesModel(gje),e.registerLayout(v4("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var n=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,nte("line"))}var nO=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,r){return Ex(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(n),s=a.dataToPoint(o);if(i)qe(a.getAxes(),function(p,v){if(p.type==="category"&&r!=null){var _=p.getTicksCoords(),b=p.getTickModel().get("alignWithLabel"),C=o[v],T=r[v]==="x1"||r[v]==="y1";if(T&&!b&&(C+=1),_.length<2)return;if(_.length===2){s[v]=p.toGlobalCoord(p.getExtent()[T?1:0]);return}for(var E=void 0,A=void 0,I=1,O=0;O<_.length;O++){var B=_[O].coord,N=O===_.length-1?_[O-1].tickValue+I:_[O].tickValue;if(N===C){A=B;break}else if(N<C)E=B;else if(E!=null&&N>C){A=(B+E)/2;break}O===1&&(I=N-_[0].tickValue)}A==null&&(E?E&&(A=_[_.length-1].coord):A=_[0].coord),s[v]=p.toGlobalCoord(A)}});else{var l=this.getData(),c=l.getLayout("offset"),h=l.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;s[f]+=c+h/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Xs);Xs.registerClass(nO);var Fje=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(){return Ex(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},t.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=F0(nO.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(nO),Nje=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),vM=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new Nje},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,h=r.startAngle,f=r.endAngle,p=r.clockwise,v=Math.PI*2,_=p?f-h<v:h-f<v;_||(h=f-(p?v:-v));var b=Math.cos(h),C=Math.sin(h),T=Math.cos(f),E=Math.sin(f);_?(n.moveTo(b*o+i,C*o+a),n.arc(b*c+i,C*c+a,l,-Math.PI+h,h,!p)):n.moveTo(b*s+i,C*s+a),n.arc(i,a,s,h,f,!p),n.arc(T*c+i,E*c+a,l,f-Math.PI*2,f-Math.PI,!p),o!==0&&n.arc(i,a,o,f,h,p)},t}(Ii);function $je(e,t){t=t||{};var n=t.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return qT(r,i,a);var s=e(o),l=i.distance!=null?i.distance:5,c=this.shape,h=c.cx,f=c.cy,p=c.r,v=c.r0,_=(p+v)/2,b=c.startAngle,C=c.endAngle,T=(b+C)/2,E=n?Math.abs(p-v)/2:0,A=Math.cos,I=Math.sin,O=h+p*A(b),B=f+p*I(b),N="left",H="top";switch(s){case"startArc":O=h+(v-l)*A(T),B=f+(v-l)*I(T),N="center",H="top";break;case"insideStartArc":O=h+(v+l)*A(T),B=f+(v+l)*I(T),N="center",H="bottom";break;case"startAngle":O=h+_*A(b)+Q2(b,l+E,!1),B=f+_*I(b)+eC(b,l+E,!1),N="right",H="middle";break;case"insideStartAngle":O=h+_*A(b)+Q2(b,-l+E,!1),B=f+_*I(b)+eC(b,-l+E,!1),N="left",H="middle";break;case"middle":O=h+_*A(T),B=f+_*I(T),N="center",H="middle";break;case"endArc":O=h+(p+l)*A(T),B=f+(p+l)*I(T),N="center",H="bottom";break;case"insideEndArc":O=h+(p-l)*A(T),B=f+(p-l)*I(T),N="center",H="top";break;case"endAngle":O=h+_*A(C)+Q2(C,l+E,!0),B=f+_*I(C)+eC(C,l+E,!0),N="left",H="middle";break;case"insideEndAngle":O=h+_*A(C)+Q2(C,-l+E,!0),B=f+_*I(C)+eC(C,-l+E,!0),N="right",H="middle";break;default:return qT(r,i,a)}return r=r||{},r.x=O,r.y=B,r.align=N,r.verticalAlign=H,r}}function Vje(e,t,n,r){if(Wi(r)){e.setTextConfig({rotation:r});return}else if(Vn(t)){e.setTextConfig({rotation:0});return}var i=e.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,c=n(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:e.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;c==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),e.setTextConfig({rotation:h})}function Q2(e,t,n){return t*Math.sin(e)*(n?-1:1)}function eC(e,t,n){return t*Math.cos(e)*(n?1:-1)}function a1(e,t,n){var r=e.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;Vn(r)||(r=[r,r,r,r]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:Yn(r,function(a){return ed(a,i)})}}var WI=Math.max,GI=Math.min;function Hje(e,t){var n=e.getArea&&e.getArea();if(qk(e,"cartesian2d")){var r=e.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var jje=function(e){xn(t,e);function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return t.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var o=n.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},t.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},t.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},t.prototype.eachRendered=function(n){Cx(this._progressiveEls||this.group,n)},t.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(n,r,i,a){var o=this.group,s=n.getData(),l=this._data,c=n.coordinateSystem,h=c.getBaseAxis(),f;c.type==="cartesian2d"?f=h.isHorizontal():c.type==="polar"&&(f=h.dim==="angle");var p=n.isAnimationEnabled()?n:null,v=Uje(n,c);v&&this._enableRealtimeSort(v,s,i);var _=n.get("clip",!0)||v,b=Hje(c,s);o.removeClipPath();var C=n.get("roundCap",!0),T=n.get("showBackground",!0),E=n.getModel("backgroundStyle"),A=E.get("borderRadius")||0,I=[],O=this._backgroundEls,B=a&&a.isInitSort,N=a&&a.type==="changeAxisOrder";function H(U){var Y=tC[c.type](s,U),ie=Xje(c,f,Y);return ie.useStyle(E.getItemStyle()),c.type==="cartesian2d"?ie.setShape("r",A):ie.setShape("cornerRadius",A),I[U]=ie,ie}s.diff(l).add(function(U){var Y=s.getItemModel(U),ie=tC[c.type](s,U,Y);if(T&&H(U),!(!s.hasValue(U)||!tU[c.type](ie))){var ue=!1;_&&(ue=Xj[c.type](b,ie));var J=Jj[c.type](n,s,U,ie,f,p,h.model,!1,C);v&&(J.forceLabelAnimation=!0),nU(J,s,U,Y,ie,n,f,c.type==="polar"),B?J.attr({shape:ie}):v?Qj(v,p,J,ie,U,f,!1,!1):bs(J,{shape:ie},n,U),s.setItemGraphicEl(U,J),o.add(J),J.ignore=ue}}).update(function(U,Y){var ie=s.getItemModel(U),ue=tC[c.type](s,U,ie);if(T){var J=void 0;O.length===0?J=H(Y):(J=O[Y],J.useStyle(E.getItemStyle()),c.type==="cartesian2d"?J.setShape("r",A):J.setShape("cornerRadius",A),I[U]=J);var q=tC[c.type](s,U),ce=ite(f,q,c);go(J,{shape:ce},p,U)}var re=l.getItemGraphicEl(Y);if(!s.hasValue(U)||!tU[c.type](ue)){o.remove(re);return}var ee=!1;if(_&&(ee=Xj[c.type](b,ue),ee&&o.remove(re)),re?Nz(re):re=Jj[c.type](n,s,U,ue,f,p,h.model,!!re,C),v&&(re.forceLabelAnimation=!0),N){var oe=re.getTextContent();if(oe){var be=Tx(oe);be.prevValue!=null&&(be.prevValue=be.value)}}else nU(re,s,U,ie,ue,n,f,c.type==="polar");B?re.attr({shape:ue}):v?Qj(v,p,re,ue,U,f,!0,N):go(re,{shape:ue},n,U,null),s.setItemGraphicEl(U,re),re.ignore=ee,o.add(re)}).remove(function(U){var Y=l.getItemGraphicEl(U);Y&&nM(Y,n,U)}).execute();var j=this._backgroundGroup||(this._backgroundGroup=new Bi);j.removeAll();for(var W=0;W<I.length;++W)j.add(I[W]);o.add(j),this._backgroundEls=I,this._data=s},t.prototype._renderLarge=function(n,r,i){this._clear(),iU(n,this.group),this._updateLargeClip(n)},t.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),iU(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&Tje(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},t.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var o=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),h=c&&c.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Yn(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,o=n.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,c=a.getOrdinalMeta().categories.length;l<c;++l){var h=n.rawIndexOf(o,a.getRawOrdinalNumber(l)),f=h<0?Number.MIN_VALUE:r(n.indexOfRawIndex(h));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(n.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var o=this._dataSort(n,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,o=this._dataSort(n,a,function(s){return n.get(n.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){nM(a,n,yi(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ws),Xj={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,a=e.y+e.height,o=WI(t.x,e.x),s=GI(t.x+t.width,i),l=WI(t.y,e.y),c=GI(t.y+t.height,a),h=s<o,f=c<l;return t.x=h&&o>i?s:o,t.y=f&&l>a?c:l,t.width=h?0:s-o,t.height=f?0:c-l,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),h||f},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var i=GI(t.r,e.r),a=WI(t.r0,e.r0);t.r=i,t.r0=a;var o=i-a<0;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}return o}},Jj={cartesian2d:function(e,t,n,r,i,a,o,s,l){var c=new Pi({shape:Pn({},r),z2:1});if(c.__dataIndex=n,c.name="item",a){var h=c.shape,f=i?"height":"width";h[f]=0}return c},polar:function(e,t,n,r,i,a,o,s,l){var c=!i&&l?vM:nd,h=new c({shape:r,z2:1});h.name="item";var f=rte(i);if(h.calculateTextPosition=$je(f,{isRoundCap:c===vM}),a){var p=h.shape,v=i?"r":"endAngle",_={};p[v]=i?r.r0:r.startAngle,_[v]=r[v],(s?go:bs)(h,{shape:_},a)}return h}};function Uje(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function Qj(e,t,n,r,i,a,o,s){var l,c;a?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?go:bs)(n,{shape:l},t,i,null);var h=t?e.baseAxis.model:null;(o?go:bs)(n,{shape:c},h,i)}function eU(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var Wje=["x","y","width","height"],Gje=["cx","cy","r","startAngle","endAngle"],tU={cartesian2d:function(e){return!eU(e,Wje)},polar:function(e){return!eU(e,Gje)}},tC={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),i=n?qje(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Kje(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function rte(e){return function(t){var n=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(e)}function nU(e,t,n,r,i,a,o,s){var l=t.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var h=e.shape,f=a1(r.getModel("itemStyle"),h,!0);Pn(h,f),e.setShape(h)}}else{var c=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var p=r.getShallow("cursor");p&&e.attr("cursor",p);var v=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",_=um(r);B0(e,_,{labelFetcher:a,labelDataIndex:n,defaultText:f4(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:v});var b=e.getTextContent();if(s&&b){var C=r.get(["label","position"]);e.textConfig.inside=C==="middle"?!0:null,Vje(e,C==="outside"?v:C,rte(o),r.get(["label","rotate"]))}JJ(b,_,a.getRawValue(n),function(E){return qee(t,E)});var T=r.getModel(["emphasis"]);Hf(e,T.get("focus"),T.get("blurScope"),T.get("disabled")),d0(e,r),Kje(i)&&(e.style.fill="none",e.style.stroke="none",qe(e.states,function(E){E.style&&(E.style.fill=E.style.stroke="none")}))}function qje(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,i,a)}var Zje=function(){function e(){}return e}(),rU=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new Zje},t.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,h=0;h<i.length;h+=3)l[a]=c,l[o]=i[h+2],s[a]=i[h+a],s[o]=i[h+o],n.rect(s[0],s[1],l[0],l[1])},t}(Ii);function iU(e,t,n,r){var i=e.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),c=i.getLayout("largeBackgroundPoints");if(c){var h=new rU({shape:{points:c},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),t.add(h),n&&n.push(h)}var f=new rU({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),f.style.stroke=null,yi(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",aU),f.on("mousemove",aU)),n&&n.push(f)}var aU=e4(function(e){var t=this,n=Yje(t,e.offsetX,e.offsetY);yi(t).dataIndex=n>=0?n:null},30,!1);function Yje(e,t,n){for(var r=e.baseDimIdx,i=1-r,a=e.shape.points,o=e.largeDataIndices,s=[],l=[],c=e.barWidth,h=0,f=a.length/3;h<f;h++){var p=h*3;if(l[r]=c,l[i]=a[p+2],s[r]=a[p+r],s[i]=a[p+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[h]}return-1}function ite(e,t,n){if(qk(n,"cartesian2d")){var r=t,i=n.getArea();return{x:e?r.x:i.x,y:e?i.y:r.y,width:e?r.width:i.width,height:e?i.height:r.height}}else{var i=n.getArea(),a=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:a.r0,r:e?i.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:Math.PI*2}}}function Xje(e,t,n){var r=e.type==="polar"?nd:Pi;return new r({shape:ite(t,n,e),silent:!0,z2:0})}function g4(e){e.registerChartView(jje),e.registerSeriesModel(Fje),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,bi(kHe,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,EHe("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,nte("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,n){var r=t.componentType||"series";n.eachComponent({mainType:r,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var oU=Math.PI*2,nC=Math.PI/180;function ate(e,t){return tc(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function ote(e,t){var n=ate(e,t),r=e.get("center"),i=e.get("radius");Vn(i)||(i=[0,i]);var a=Fr(n.width,t.getWidth()),o=Fr(n.height,t.getHeight()),s=Math.min(a,o),l=Fr(i[0],s/2),c=Fr(i[1],s/2),h,f,p=e.coordinateSystem;if(p){var v=p.dataToPoint(r);h=v[0]||0,f=v[1]||0}else Vn(r)||(r=[r,r]),h=Fr(r[0],a)+n.x,f=Fr(r[1],o)+n.y;return{cx:h,cy:f,r0:l,r:c}}function Jje(e,t,n){t.eachSeriesByType(e,function(r){var i=r.getData(),a=i.mapDimension("value"),o=ate(r,n),s=ote(r,n),l=s.cx,c=s.cy,h=s.r,f=s.r0,p=-r.get("startAngle")*nC,v=r.get("endAngle"),_=r.get("padAngle")*nC;v=v==="auto"?p-oU:-v*nC;var b=r.get("minAngle")*nC,C=b+_,T=0;i.each(a,function(ce){!isNaN(ce)&&T++});var E=i.getSum(a),A=Math.PI/(E||T)*2,I=r.get("clockwise"),O=r.get("roseType"),B=r.get("stillShowZeroSum"),N=i.getDataExtent(a);N[0]=0;var H=I?1:-1,j=[p,v],W=H*_/2;Ez(j,!I),p=j[0],v=j[1];var U=ste(r);U.startAngle=p,U.endAngle=v,U.clockwise=I;var Y=Math.abs(v-p),ie=Y,ue=0,J=p;if(i.setLayout({viewRect:o,r:h}),i.each(a,function(ce,re){var ee;if(isNaN(ce)){i.setItemLayout(re,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:I,cx:l,cy:c,r0:f,r:O?NaN:h});return}O!=="area"?ee=E===0&&B?A:ce*A:ee=Y/T,ee<C?(ee=C,ie-=C):ue+=ce;var oe=J+H*ee,be=0,we=0;_>ee?(be=J+H*ee/2,we=be):(be=J+W,we=oe-W),i.setItemLayout(re,{angle:ee,startAngle:be,endAngle:we,clockwise:I,cx:l,cy:c,r0:f,r:O?Ai(ce,N,[f,h]):h}),J=oe}),ie<oU&&T)if(ie<=.001){var q=Y/T;i.each(a,function(ce,re){if(!isNaN(ce)){var ee=i.getItemLayout(re);ee.angle=q;var oe=0,be=0;q<_?(oe=p+H*(re+1/2)*q,be=oe):(oe=p+H*re*q+W,be=p+H*(re+1)*q-W),ee.startAngle=oe,ee.endAngle=be}})}else A=ie/ue,J=p,i.each(a,function(ce,re){if(!isNaN(ce)){var ee=i.getItemLayout(re),oe=ee.angle===C?C:ce*A,be=0,we=0;oe<_?(be=J+H*oe/2,we=be):(be=J+W,we=J+H*oe-W),ee.startAngle=be,ee.endAngle=we,J+=H*oe}})})}var ste=Sa();function Qje(e){return{seriesType:e,reset:function(t,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=t.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var eUe=Math.PI/180;function sU(e,t,n,r,i,a,o,s,l,c){if(e.length<2)return;function h(b){for(var C=b.rB,T=C*C,E=0;E<b.list.length;E++){var A=b.list[E],I=Math.abs(A.label.y-n),O=r+A.len,B=O*O,N=Math.sqrt(Math.abs((1-I*I/T)*B)),H=t+(N+A.len2)*i,j=H-A.label.x,W=A.targetTextWidth-j*i;lte(A,W,!0),A.label.x=H}}function f(b){for(var C={list:[],maxY:0},T={list:[],maxY:0},E=0;E<b.length;E++)if(b[E].labelAlignTo==="none"){var A=b[E],I=A.label.y>n?T:C,O=Math.abs(A.label.y-n);if(O>=I.maxY){var B=A.label.x-t-A.len2*i,N=r+A.len,H=Math.abs(B)<N?Math.sqrt(O*O/(1-B*B/N/N)):N;I.rB=H,I.maxY=O}I.list.push(A)}h(C),h(T)}for(var p=e.length,v=0;v<p;v++)if(e[v].position==="outer"&&e[v].labelAlignTo==="labelLine"){var _=e[v].label.x-c;e[v].linePoints[1][0]+=_,e[v].label.x=c}vje(e,l,l+o)&&f(e)}function tUe(e,t,n,r,i,a,o,s){for(var l=[],c=[],h=Number.MAX_VALUE,f=-Number.MAX_VALUE,p=0;p<e.length;p++){var v=e[p].label;KI(e[p])||(v.x<t?(h=Math.min(h,v.x),l.push(e[p])):(f=Math.max(f,v.x),c.push(e[p])))}for(var p=0;p<e.length;p++){var _=e[p];if(!KI(_)&&_.linePoints){if(_.labelStyleWidth!=null)continue;var v=_.label,b=_.linePoints,C=void 0;_.labelAlignTo==="edge"?v.x<t?C=b[2][0]-_.labelDistance-o-_.edgeDistance:C=o+i-_.edgeDistance-b[2][0]-_.labelDistance:_.labelAlignTo==="labelLine"?v.x<t?C=h-o-_.bleedMargin:C=o+i-f-_.bleedMargin:v.x<t?C=v.x-o-_.bleedMargin:C=o+i-v.x-_.bleedMargin,_.targetTextWidth=C,lte(_,C)}}sU(c,t,n,r,1,i,a,o,s,f),sU(l,t,n,r,-1,i,a,o,s,h);for(var p=0;p<e.length;p++){var _=e[p];if(!KI(_)&&_.linePoints){var v=_.label,b=_.linePoints,T=_.labelAlignTo==="edge",E=v.style.padding,A=E?E[1]+E[3]:0,I=v.style.backgroundColor?0:A,O=_.rect.width+I,B=b[1][0]-b[2][0];T?v.x<t?b[2][0]=o+_.edgeDistance+O+_.labelDistance:b[2][0]=o+i-_.edgeDistance-O-_.labelDistance:(v.x<t?b[2][0]=v.x+_.labelDistance:b[2][0]=v.x-_.labelDistance,b[1][0]=b[2][0]+B),b[1][1]=b[2][1]=v.y}}}function lte(e,t,n){if(n===void 0&&(n=!1),e.labelStyleWidth==null){var r=e.label,i=r.style,a=e.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,c=i.overflow,h=a.width+(o?0:l);if(t<h||n){var f=a.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var p=r.getBoundingRect();r.setStyle("width",Math.ceil(p.width)),r.setStyle("backgroundColor",o)}else{var v=t-l,_=t<h?v:n?v>e.unconstrainedWidth?null:v:null;r.setStyle("width",_)}var b=r.getBoundingRect();a.width=b.width;var C=(r.style.margin||0)+2.1;a.height=b.height+C,a.y-=(a.height-f)/2}}}function KI(e){return e.position==="center"}function nUe(e){var t=e.getData(),n=[],r,i,a=!1,o=(e.get("minShowLabelAngle")||0)*eUe,s=t.getLayout("viewRect"),l=t.getLayout("r"),c=s.width,h=s.x,f=s.y,p=s.height;function v(B){B.ignore=!0}function _(B){if(!B.ignore)return!0;for(var N in B.states)if(B.states[N].ignore===!1)return!0;return!1}t.each(function(B){var N=t.getItemGraphicEl(B),H=N.shape,j=N.getTextContent(),W=N.getTextGuideLine(),U=t.getItemModel(B),Y=U.getModel("label"),ie=Y.get("position")||U.get(["emphasis","label","position"]),ue=Y.get("distanceToLabelLine"),J=Y.get("alignTo"),q=Fr(Y.get("edgeDistance"),c),ce=Y.get("bleedMargin"),re=U.getModel("labelLine"),ee=re.get("length");ee=Fr(ee,c);var oe=re.get("length2");if(oe=Fr(oe,c),Math.abs(H.endAngle-H.startAngle)<o){qe(j.states,v),j.ignore=!0,W&&(qe(W.states,v),W.ignore=!0);return}if(_(j)){var be=(H.startAngle+H.endAngle)/2,we=Math.cos(be),pe=Math.sin(be),Ce,Ve,et,Ee;r=H.cx,i=H.cy;var Je=ie==="inside"||ie==="inner";if(ie==="center")Ce=H.cx,Ve=H.cy,Ee="center";else{var Ue=(Je?(H.r+H.r0)/2*we:H.r*we)+r,yt=(Je?(H.r+H.r0)/2*pe:H.r*pe)+i;if(Ce=Ue+we*3,Ve=yt+pe*3,!Je){var Ne=Ue+we*(ee+l-H.r),dt=yt+pe*(ee+l-H.r),Le=Ne+(we<0?-1:1)*oe,ze=dt;J==="edge"?Ce=we<0?h+q:h+c-q:Ce=Le+(we<0?-ue:ue),Ve=ze,et=[[Ue,yt],[Ne,dt],[Le,ze]]}Ee=Je?"center":J==="edge"?we>0?"right":"left":we>0?"left":"right"}var ct=Math.PI,Lt=0,lt=Y.get("rotate");if(Wi(lt))Lt=lt*(ct/180);else if(ie==="center")Lt=0;else if(lt==="radial"||lt===!0){var Ct=we<0?-be+ct:-be;Lt=Ct}else if(lt==="tangential"&&ie!=="outside"&&ie!=="outer"){var _t=Math.atan2(we,pe);_t<0&&(_t=ct*2+_t);var It=pe>0;It&&(_t=ct+_t),Lt=_t-ct}if(a=!!Lt,j.x=Ce,j.y=Ve,j.rotation=Lt,j.setStyle({verticalAlign:"middle"}),Je){j.setStyle({align:Ee});var cn=j.states.select;cn&&(cn.x+=j.x,cn.y+=j.y)}else{var Bt=j.getBoundingRect().clone();Bt.applyTransform(j.getComputedTransform());var Ft=(j.style.margin||0)+2.1;Bt.y-=Ft/2,Bt.height+=Ft,n.push({label:j,labelLine:W,position:ie,len:ee,len2:oe,minTurnAngle:re.get("minTurnAngle"),maxSurfaceAngle:re.get("maxSurfaceAngle"),surfaceNormal:new Or(we,pe),linePoints:et,textAlign:Ee,labelDistance:ue,labelAlignTo:J,edgeDistance:q,bleedMargin:ce,rect:Bt,unconstrainedWidth:Bt.width,labelStyleWidth:j.style.width})}N.setTextConfig({inside:Je})}}),!a&&e.get("avoidLabelOverlap")&&tUe(n,r,i,l,c,p,h,f);for(var b=0;b<n.length;b++){var C=n[b],T=C.label,E=C.labelLine,A=isNaN(T.x)||isNaN(T.y);if(T){T.setStyle({align:C.textAlign}),A&&(qe(T.states,v),T.ignore=!0);var I=T.states.select;I&&(I.x+=T.x,I.y+=T.y)}if(E){var O=C.linePoints;A||!O?(qe(E.states,v),E.ignore=!0):(lje(O,C.minTurnAngle),uje(O,C.surfaceNormal,C.maxSurfaceAngle),E.setShape({points:O}),T.__hostTarget.textGuideLineConfig={anchor:new Or(O[0][0],O[0][1])})}}}var rUe=function(e){xn(t,e);function t(n,r,i){var a=e.call(this)||this;a.z2=2;var o=new Mi;return a.setTextContent(o),a.updateData(n,r,i,!0),a}return t.prototype.updateData=function(n,r,i,a){var o=this,s=n.hostModel,l=n.getItemModel(r),c=l.getModel("emphasis"),h=n.getItemLayout(r),f=Pn(a1(l.getModel("itemStyle"),h,!0),h);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var p=s.getShallow("animationType");s.ecModel.ssr?(bs(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):p==="scale"?(o.shape.r=h.r0,bs(o,{shape:{r:h.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),bs(o,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},s,r)):(o.shape.endAngle=h.startAngle,go(o,{shape:{endAngle:h.endAngle}},s,r))}else Nz(o),go(o,{shape:f},s,r);o.useStyle(n.getItemVisual(r,"style")),d0(o,l);var v=(h.startAngle+h.endAngle)/2,_=s.get("selectedOffset"),b=Math.cos(v)*_,C=Math.sin(v)*_,T=l.getShallow("cursor");T&&o.attr("cursor",T),this._updateLabel(s,n,r),o.ensureState("emphasis").shape=Pn({r:h.r+(c.get("scale")&&c.get("scaleSize")||0)},a1(c.getModel("itemStyle"),h)),Pn(o.ensureState("select"),{x:b,y:C,shape:a1(l.getModel(["select","itemStyle"]),h)}),Pn(o.ensureState("blur"),{shape:a1(l.getModel(["blur","itemStyle"]),h)});var E=o.getTextGuideLine(),A=o.getTextContent();E&&Pn(E.ensureState("select"),{x:b,y:C}),Pn(A.ensureState("select"),{x:b,y:C}),Hf(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(n,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,h=l&&l.opacity;B0(a,um(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:h,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var p=n.get(["label","position"]);if(p!=="outside"&&p!=="outer")a.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Yf,this.setTextGuideLine(v)),dje(this,hje(o),{stroke:c,opacity:E1(s.get(["lineStyle","opacity"]),h,1)})}},t}(nd),iUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,r,i,a){var o=n.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var h=o.getItemLayout(0),f=1;isNaN(h&&h.startAngle)&&f<o.count();++f)h=o.getItemLayout(f);h&&(c=h.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&n.get("showEmptyCircle")){var p=ste(n),v=new nd({shape:Pn(ote(n,i),p)});v.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,l.add(v)}o.diff(s).add(function(_){var b=new rUe(o,_,c);o.setItemGraphicEl(_,b),l.add(b)}).update(function(_,b){var C=s.getItemGraphicEl(b);C.updateData(o,_,c),C.off("click"),l.add(C),o.setItemGraphicEl(_,C)}).remove(function(_){var b=s.getItemGraphicEl(_);nM(b,n,_)}).execute(),nUe(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="pie",t}(ws);function ute(e,t,n){t=Vn(t)&&{coordDimensions:t}||Pn({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=kee(r,t).dimensions,a=new Mee(i,e);return a.initData(r,n),a}var aUe=function(){function e(t,n){this._getDataWithEncodedVisual=t,this._getRawData=n}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var n=this._getRawData();return n.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var n=this._getDataWithEncodedVisual();return n.indexOfName(t)},e.prototype.getItemVisual=function(t,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(t,n)},e}(),oUe=Sa(),sUe=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new aUe(ur(this.getData,this),ur(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return ute(this,{coordDimensions:["value"],encodeDefaulter:bi(f6e,this)})},t.prototype.getDataParams=function(n){var r=this.getData(),i=oUe(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=oFe(o,r.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,n);return s.percent=a[n]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(n){MR(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Xs);function lUe(e){return{seriesType:e,reset:function(t,n){var r=t.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(Wi(o)&&!isNaN(o)&&o<0)})}}}function cte(e){e.registerChartView(iUe),e.registerSeriesModel(sUe),Z$e("pie",e.registerAction),e.registerLayout(bi(Jje,"pie")),e.registerProcessor(Qje("pie")),e.registerProcessor(lUe("pie"))}var uUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n,r){return Ex(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Xs),dte=4,cUe=function(){function e(){}return e}(),dUe=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.getDefaultShape=function(){return new cUe},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(n,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=n.getContext?n.getContext():n,c=l&&a[0]<dte,h=this.softClipShape,f;if(c){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var p=i[f++],v=i[f++];isNaN(p)||isNaN(v)||h&&!h.contain(p,v)||(s.x=p-a[0]/2,s.y=v-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(n,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||a.fillRect(l-i[0]/2,c-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=a.length/2-1;c>=0;c--){var h=c*2,f=a[h]-s/2,p=a[h+1]-l/2;if(n>=f&&r>=p&&n<=f+s&&r<=p+l)return c}return-1},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,c=1/0,h=-1/0,f=-1/0,p=0;p<i.length;){var v=i[p++],_=i[p++];l=Math.min(v,l),h=Math.max(v,h),c=Math.min(_,c),f=Math.max(_,f)}n=this._rect=new Ti(l-o/2,c-s/2,h-l+o,f-c+s)}return n},t}(Ii),hUe=function(){function e(){this.group=new Bi}return e.prototype.updateData=function(t,n){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,n)},e.prototype.updateLayout=function(t){var n=t.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,n,r){var i=this._newAdded[0],a=n.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=t.start,c.endIndex=t.end,c.incremental=!0,c.setShape({points:a}),this._setCommon(c,n,r)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new dUe({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=r.clipShape||null,t.symbolProxy=Js(n.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<dte;t.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=n.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var c=yi(t);c.seriesIndex=i.seriesIndex,t.on("mousemove",function(h){c.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(c.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),fUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},t.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=v4("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},t.prototype._getClipShape=function(n){if(n.get("clip",!0)){var r=n.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},t.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new hUe:new Zee,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ws),pUe=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(xi),rO=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",gs).models[0]},t.type="cartesian2dAxis",t}(xi);ld(rO,YHe);var hte={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},vUe=Kr({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},hte),y4=Kr({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},hte),mUe=Kr({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},y4),gUe=hi({logBase:10},y4);const yUe={category:vUe,value:y4,time:mUe,log:gUe};var _Ue={value:1,category:1,time:1,log:1};function lU(e,t,n,r){qe(_Ue,function(i,a){var o=Kr(Kr({},yUe[a],!0),r,!0),s=function(l){xn(c,l);function c(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+a,h}return c.prototype.mergeDefaultAndTheme=function(h,f){var p=Aw(this),v=p?N0(h):{},_=f.getTheme();Kr(h,_.get(a+"Axis")),Kr(h,this.getDefaultOption()),h.type=uU(h),p&&dm(h,v,p)},c.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=QR.createByAxisModel(this))},c.prototype.getCategories=function(h){var f=this.option;if(f.type==="category")return h?f.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=t+"Axis."+a,c.defaultOption=o,c}(n);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",uU)}function uU(e){return e.type||(e.data?"category":"value")}var bUe=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Yn(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),fo(this.getAxes(),function(n){return n.scale.type===t})},e.prototype.addAxis=function(t){var n=t.dim;this._axes[n]=t,this._dimList.push(n)},e}(),iO=["x","y"];function cU(e){return e.type==="interval"||e.type==="time"}var wUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=iO,n}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!cU(n)||!cU(r))){var i=n.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],c=a[1]-a[0];if(!(!l||!c)){var h=(s[0]-o[0])/l,f=(s[1]-o[1])/c,p=o[0]-i[0]*h,v=o[1]-a[0]*f,_=this._transform=[h,0,0,f,p,v];this._invTransform=bz([],_)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(n){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},t.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},t.prototype.containZone=function(n,r){var i=this.dataToPoint(n),a=this.dataToPoint(r),o=this.getArea(),s=new Ti(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},t.prototype.dataToPoint=function(n,r,i){i=i||[];var a=n[0],o=n[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Ql(i,n,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},t.prototype.clampData=function(n,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(n[0]),c=a.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},t.prototype.pointToData=function(n,r){var i=[];if(this._invTransform)return Ql(i,n,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(n[0]),r),i[1]=o.coordToData(o.toLocalCoord(n[1]),r),i},t.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},t.prototype.getArea=function(n){n=n||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-n,o=Math.min(i[0],i[1])-n,s=Math.max(r[0],r[1])-a+n,l=Math.max(i[0],i[1])-o+n;return new Ti(a,o,s,l)},t}(bUe),xUe=function(e){xn(t,e);function t(n,r,i,a,o){var s=e.call(this,n,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},t.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},t.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},t}(oje);function aO(e,t,n){n=n||{};var r=e.coordinateSystem,i=t.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,c=i.dim,h=r.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],p={left:0,right:1,top:0,bottom:1,onZero:2},v=t.get("offset")||0,_=c==="x"?[f[2]-v,f[3]+v]:[f[0]-v,f[1]+v];if(o){var b=o.toGlobalCoord(o.dataToCoord(0));_[p.onZero]=Math.max(Math.min(b,_[1]),_[0])}a.position=[c==="y"?_[p[l]]:f[0],c==="x"?_[p[l]]:f[3]],a.rotation=Math.PI/2*(c==="x"?0:1);var C={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=C[s],a.labelOffset=o?_[p[s]]-_[p.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),l0(n.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var T=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-T:T,a.z2=1,a}function dU(e){return e.get("coordinateSystem")==="cartesian2d"}function hU(e){var t={xAxisModel:null,yAxisModel:null};return qe(t,function(n,r){var i=r.replace(/Model$/,""),a=e.getReferringComponents(i,gs).models[0];t[r]=a}),t}var qI=Math.log;function SUe(e,t,n){var r=V0.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),o=i.length-1,s=r.getInterval.call(n),l=Bee(e,t),c=l.extent,h=l.fixMin,f=l.fixMax;if(e.type==="log"){var p=qI(e.base);c=[qI(c[0])/p,qI(c[1])/p]}e.setExtent(c[0],c[1]),e.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:f});var v=r.getExtent.call(e);h&&(c[0]=v[0]),f&&(c[1]=v[1]);var _=r.getInterval.call(e),b=c[0],C=c[1];if(h&&f)_=(C-b)/o;else if(h)for(C=c[0]+_*o;C<c[1]&&isFinite(C)&&isFinite(c[1]);)_=VI(_),C=c[0]+_*o;else if(f)for(b=c[1]-_*o;b>c[0]&&isFinite(b)&&isFinite(c[0]);)_=VI(_),b=c[1]-_*o;else{var T=e.getTicks().length-1;T>o&&(_=VI(_));var E=_*o;C=Math.ceil(c[1]/_)*_,b=za(C-E),b<0&&c[0]>=0?(b=0,C=za(E)):C>0&&c[1]<=0&&(C=0,b=-za(E))}var A=(i[0].value-a[0].value)/s,I=(i[o].value-a[o].value)/s;r.setExtent.call(e,b+_*A,C+_*I),r.setInterval.call(e,_),(A||I)&&r.setNiceExtent.call(e,b+_,C-_)}var CUe=function(){function e(t,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=iO,this._initCartesian(t,n,r),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,n){var r=this._axesMap;this._updateScale(t,this.model);function i(o){var s,l=va(o),c=l.length;if(c){for(var h=[],f=c-1;f>=0;f--){var p=+l[f],v=o[p],_=v.model,b=v.scale;eO(b)&&_.get("alignTicks")&&_.get("interval")==null?h.push(v):($j(b,_),eO(b)&&(s=v))}h.length&&(s||(s=h.pop(),$j(s.scale,s.model)),qe(h,function(C){SUe(C.scale,C.model,s.scale)}))}}i(r.x),i(r.y);var a={};qe(r.x,function(o){fU(r,"y",o,a)}),qe(r.y,function(o){fU(r,"x",o,a)}),this.resize(this.model,n)},e.prototype.resize=function(t,n,r){var i=t.getBoxLayoutParams(),a=!r&&t.get("containLabel"),o=tc(i,{width:n.getWidth(),height:n.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(qe(s,function(c){if(!c.model.get(["axisLabel","inside"])){var h=KHe(c);if(h){var f=c.isHorizontal()?"height":"width",p=c.model.get(["axisLabel","margin"]);o[f]-=h[f]+p,c.position==="top"?o.y+=h.height+p:c.position==="left"&&(o.x+=h.width+p)}}}),l()),qe(this._coordsList,function(c){c.calcAffineTransform()});function l(){qe(s,function(c){var h=c.isHorizontal(),f=h?[0,o.width]:[0,o.height],p=c.inverse?1:0;c.setExtent(f[p],f[1-p]),TUe(c,h?o.x:o.y)})}},e.prototype.getAxis=function(t,n){var r=this._axesMap[t];if(r!=null)return r[n||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,n){if(t!=null&&n!=null){var r="x"+t+"y"+n;return this._coordsMap[r]}fr(t)&&(n=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===n)return a[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},e.prototype.convertFromPixel=function(t,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},e.prototype._findConvertTarget=function(t){var n=t.seriesModel,r=t.xAxisModel||n&&n.getReferringComponents("xAxis",gs).models[0],i=t.yAxisModel||n&&n.getReferringComponents("yAxis",gs).models[0],a=t.gridModel,o=this._coordsList,s,l;if(n)s=n.coordinateSystem,pi(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var c=a.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var n=this._coordsList[0];if(n)return n.containPoint(t)},e.prototype._initCartesian=function(t,n,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(n.eachComponent("xAxis",c("x"),this),n.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,qe(s.x,function(h,f){qe(s.y,function(p,v){var _="x"+f+"y"+v,b=new wUe(_);b.master=i,b.model=t,i._coordsMap[_]=b,i._coordsList.push(b),b.addAxis(h),b.addAxis(p)})});function c(h){return function(f,p){if(ZI(f,t)){var v=f.get("position");h==="x"?v!=="top"&&v!=="bottom"&&(v=o.bottom?"top":"bottom"):v!=="left"&&v!=="right"&&(v=o.left?"right":"left"),o[v]=!0;var _=new xUe(h,WHe(f),[0,0],f.get("type"),v),b=_.type==="category";_.onBand=b&&f.get("boundaryGap"),_.inverse=f.get("inverse"),f.axis=_,_.model=f,_.grid=a,_.index=p,a._axesList.push(_),s[h][p]=_,l[h]++}}}},e.prototype._updateScale=function(t,n){qe(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(dU(i)){var a=hU(i),o=a.xAxisModel,s=a.yAxisModel;if(!ZI(o,n)||!ZI(s,n))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=i.getData(),h=l.getAxis("x"),f=l.getAxis("y");r(c,h),r(c,f)}},this);function r(i,a){qe(Nee(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},e.prototype.getTooltipAxes=function(t){var n=[],r=[];return qe(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(a);pi(n,a)<0&&n.push(a),pi(r,o)<0&&r.push(o)}),{baseAxes:n,otherAxes:r}},e.create=function(t,n){var r=[];return t.eachComponent("grid",function(i,a){var o=new e(i,t,n);o.name="grid_"+a,o.resize(i,n,!0),i.coordinateSystem=o,r.push(o)}),t.eachSeries(function(i){if(dU(i)){var a=hU(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;i.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},e.dimensions=iO,e}();function ZI(e,t){return e.getCoordSysModel()===t}function fU(e,t,n,r){n.getAxesOnZeroOf=function(){return a?[a]:[]};var i=e[t],a,o=n.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)pU(i[l])&&(a=i[l]);else for(var c in i)if(i.hasOwnProperty(c)&&pU(i[c])&&!r[h(i[c])]){a=i[c];break}a&&(r[h(a)]=!0);function h(f){return f.dim+"_"+f.index}}function pU(e){return e&&e.type!=="category"&&e.type!=="time"&&GHe(e)}function TUe(e,t){var n=e.getExtent(),r=n[0]+n[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return r-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return r-i+t}}var mf=Math.PI,Af=function(){function e(t,n){this.group=new Bi,this.opt=n,this.axisModel=t,hi(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Bi({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return e.prototype.hasBuilder=function(t){return!!vU[t]},e.prototype.add=function(t){vU[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,n,r){var i=cJ(n-t),a,o;return ZT(i)?(o=r>0?"top":"bottom",a="center"):ZT(i-mf)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<mf?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var n={componentType:t.mainType,componentIndex:t.componentIndex};return n[t.mainType+"Index"]=t.componentIndex,n},e.isLabelSilent=function(t){var n=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||n&&n.show)},e}(),vU={axisLine:function(e,t,n,r){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],c=s[0]>l[0];o&&(Ql(s,s,o),Ql(l,l,o));var h=Pn({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new rd({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});kw(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var p=t.get(["axisLine","symbol"]);if(p!=null){var v=t.get(["axisLine","symbolSize"]);Qn(p)&&(p=[p,p]),(Qn(v)||Wi(v))&&(v=[v,v]);var _=YQ(t.get(["axisLine","symbolOffset"])||0,v),b=v[0],C=v[1];qe([{rotate:e.rotation+Math.PI/2,offset:_[0],r:0},{rotate:e.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(T,E){if(p[E]!=="none"&&p[E]!=null){var A=Js(p[E],-b/2,-C/2,b,C,h.stroke,!0),I=T.r+T.offset,O=c?l:s;A.attr({rotation:T.rotate,x:O[0]+I*Math.cos(e.rotation),y:O[1]-I*Math.sin(e.rotation),silent:!0,z2:11}),n.add(A)}})}}},axisTickLabel:function(e,t,n,r){var i=EUe(n,r,t,e),a=PUe(n,r,t,e);if(kUe(t,a,i),AUe(n,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=fje(Yn(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));mje(o)}},axisName:function(e,t,n,r){var i=l0(e.axisName,t.get("name"));if(i){var a=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,c=t.axis.getExtent(),h=c[0]>c[1]?-1:1,f=[a==="start"?c[0]-h*l:a==="end"?c[1]+h*l:(c[0]+c[1])/2,gU(a)?e.labelOffset+o*l:0],p,v=t.get("nameRotate");v!=null&&(v=v*mf/180);var _;gU(a)?p=Af.innerTextLayout(e.rotation,v??e.rotation,o):(p=MUe(e.rotation,a,v||0,c),_=e.axisNameAvailableWidth,_!=null&&(_=Math.abs(_/Math.sin(p.rotation)),!isFinite(_)&&(_=null)));var b=s.getFont(),C=t.get("nameTruncate",!0)||{},T=C.ellipsis,E=l0(e.nameTruncateMaxWidth,C.maxWidth,_),A=new Mi({x:f[0],y:f[1],rotation:p.rotation,silent:Af.isLabelSilent(t),style:Ga(s,{text:i,font:b,overflow:"truncate",width:E,ellipsis:T,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||p.textAlign,verticalAlign:s.get("verticalAlign")||p.textVerticalAlign}),z2:1});if(Sx({el:A,componentModel:t,itemName:i}),A.__fullText=i,A.anid="name",t.get("triggerEvent")){var I=Af.makeAxisEventDataBase(t);I.targetType="axisName",I.name=i,yi(A).eventData=I}r.add(A),A.updateTransform(),n.add(A),A.decomposeTransform()}}};function MUe(e,t,n,r){var i=cJ(n-e),a,o,s=r[0]>r[1],l=t==="start"&&!s||t!=="start"&&s;return ZT(i-mf/2)?(o=l?"bottom":"top",a="center"):ZT(i-mf*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<mf*1.5&&i>mf/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function kUe(e,t,n){if(!Fee(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],n=n||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],c=n[0],h=n[1],f=n[n.length-1],p=n[n.length-2];r===!1?(Il(a),Il(c)):mU(a,o)&&(r?(Il(o),Il(h)):(Il(a),Il(c))),i===!1?(Il(s),Il(f)):mU(l,s)&&(i?(Il(l),Il(p)):(Il(s),Il(f)))}}function Il(e){e&&(e.ignore=!0)}function mU(e,t){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!(!n||!r)){var i=yz([]);return _z(i,i,-e.rotation),n.applyTransform(Ay([],i,e.getLocalTransform())),r.applyTransform(Ay([],i,t.getLocalTransform())),n.intersect(r)}}function gU(e){return e==="middle"||e==="center"}function fte(e,t,n,r,i){for(var a=[],o=[],s=[],l=0;l<e.length;l++){var c=e[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=n,t&&(Ql(o,o,t),Ql(s,s,t));var h=new rd({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});kw(h.shape,h.style.lineWidth),h.anid=i+"_"+e[l].tickValue,a.push(h)}return a}function EUe(e,t,n,r){var i=n.axis,a=n.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),c=i.getTicksCoords(),h=fte(c,t.transform,l,hi(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<h.length;f++)e.add(h[f]);return h}}function AUe(e,t,n,r){var i=n.axis,a=n.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),c=hi(s.getLineStyle(),hi(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var f=fte(o[h],t.transform,l,c,"minorticks_"+h),p=0;p<f.length;p++)e.add(f[p])}}function PUe(e,t,n,r){var i=n.axis,a=l0(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=n.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),c=(l0(r.labelRotate,o.get("rotate"))||0)*mf/180,h=Af.innerTextLayout(r.rotation,c,r.labelDirection),f=n.getCategories&&n.getCategories(!0),p=[],v=Af.isLabelSilent(n),_=n.get("triggerEvent");return qe(l,function(b,C){var T=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(b.tickValue):b.tickValue,E=b.formattedLabel,A=b.rawLabel,I=o;if(f&&f[T]){var O=f[T];fr(O)&&O.textStyle&&(I=new xa(O.textStyle,o,n.ecModel))}var B=I.getTextColor()||n.get(["axisLine","lineStyle","color"]),N=i.dataToCoord(T),H=I.getShallow("align",!0)||h.textAlign,j=Xr(I.getShallow("alignMinLabel",!0),H),W=Xr(I.getShallow("alignMaxLabel",!0),H),U=I.getShallow("verticalAlign",!0)||I.getShallow("baseline",!0)||h.textVerticalAlign,Y=Xr(I.getShallow("verticalAlignMinLabel",!0),U),ie=Xr(I.getShallow("verticalAlignMaxLabel",!0),U),ue=new Mi({x:N,y:r.labelOffset+r.labelDirection*s,rotation:h.rotation,silent:v,z2:10+(b.level||0),style:Ga(I,{text:E,align:C===0?j:C===l.length-1?W:H,verticalAlign:C===0?Y:C===l.length-1?ie:U,fill:Mr(B)?B(i.type==="category"?A:i.type==="value"?T+"":T,C):B})});if(ue.anid="label_"+T,Sx({el:ue,componentModel:n,itemName:E,formatterParamsExtra:{isTruncated:function(){return ue.isTruncated},value:A,tickIndex:C}}),_){var J=Af.makeAxisEventDataBase(n);J.targetType="axisLabel",J.value=A,J.tickIndex=C,i.type==="category"&&(J.dataIndex=T),yi(ue).eventData=J}t.add(ue),ue.updateTransform(),p.push(ue),e.add(ue),ue.decomposeTransform()}),p}}function IUe(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return LUe(n,e,t),n.seriesInvolved&&RUe(n,e),n}function LUe(e,t,n){var r=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];qe(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Ow(s.model),c=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var h=s.model,f=h.getModel("tooltip",r);if(qe(s.getAxes(),bi(b,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var p=f.get("trigger")==="axis",v=f.get(["axisPointer","type"])==="cross",_=s.getTooltipAxes(f.get(["axisPointer","axis"]));(p||v)&&qe(_.baseAxes,bi(b,v?"cross":!0,p)),v&&qe(_.otherAxes,bi(b,"cross",!1))}function b(C,T,E){var A=E.model.getModel("axisPointer",i),I=A.get("show");if(!(!I||I==="auto"&&!C&&!oO(A))){T==null&&(T=A.get("triggerTooltip")),A=C?DUe(E,f,i,t,C,T):A;var O=A.get("snap"),B=A.get("triggerEmphasis"),N=Ow(E.model),H=T||O||E.type==="category",j=e.axesInfo[N]={key:N,axis:E,coordSys:s,axisPointerModel:A,triggerTooltip:T,triggerEmphasis:B,involveSeries:H,snap:O,useHandle:oO(A),seriesModels:[],linkGroup:null};c[N]=j,e.seriesInvolved=e.seriesInvolved||H;var W=OUe(a,E);if(W!=null){var U=o[W]||(o[W]={axesInfo:{}});U.axesInfo[N]=j,U.mapper=a[W].mapper,j.linkGroup=U}}}})}function DUe(e,t,n,r,i,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};qe(s,function(p){l[p]=wr(o.get(p))}),l.snap=e.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var h=o.get(["label","show"]);if(c.show=h??!0,!a){var f=l.lineStyle=o.get("crossStyle");f&&hi(c,f.textStyle)}}return e.model.getModel("axisPointer",new xa(l,n,r))}function RUe(e,t){t.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),a=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||n.get(["axisPointer","show"],!0)===!1||qe(e.coordSysAxesInfo[Ow(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(n),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=n.getData().count())})})}function OUe(e,t){for(var n=t.model,r=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(YI(a[r+"AxisId"],n.id)||YI(a[r+"AxisIndex"],n.componentIndex)||YI(a[r+"AxisName"],n.name))return i}}function YI(e,t){return e==="all"||Vn(e)&&pi(e,t)>=0||e===t}function zUe(e){var t=_4(e);if(t){var n=t.axisPointerModel,r=t.axis.scale,i=n.option,a=n.get("status"),o=n.get("value");o!=null&&(o=r.parse(o));var s=oO(n);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function _4(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ow(e)]}function BUe(e){var t=_4(e);return t&&t.axisPointerModel}function oO(e){return!!e.get(["handle","show"])}function Ow(e){return e.type+"||"+e.id}var yU={},pte=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){this.axisPointerClass&&zUe(n),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},t.prototype.updateAxisPointer=function(n,r,i,a){this._doUpdateAxisPointerClass(n,i,!1)},t.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},t.prototype.dispose=function(n,r){this._disposeAxisPointer(r),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(n,r,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=BUe(n);o?(this._axisPointer||(this._axisPointer=new a)).render(n,o,r,i):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},t.registerAxisPointerClass=function(n,r){yU[n]=r},t.getAxisPointerClass=function(n){return n&&yU[n]},t.type="axis",t}(Cs),sO=Sa();function FUe(e,t,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var h=s.length,f=sO(e).splitAreaColors,p=Dr(),v=0;if(f)for(var _=0;_<c.length;_++){var b=f.get(c[_].tickValue);if(b!=null){v=(b+(h-1)*_)%h;break}}var C=i.toGlobalCoord(c[0].coord),T=o.getAreaStyle();s=Vn(s)?s:[s];for(var _=1;_<c.length;_++){var E=i.toGlobalCoord(c[_].coord),A=void 0,I=void 0,O=void 0,B=void 0;i.isHorizontal()?(A=C,I=l.y,O=E-A,B=l.height,C=A+O):(A=l.x,I=C,O=l.width,B=E-I,C=I+B);var N=c[_-1].tickValue;N!=null&&p.set(N,v),t.add(new Pi({anid:N!=null?"area_"+N:null,shape:{x:A,y:I,width:O,height:B},style:hi({fill:s[v]},T),autoBatch:!0,silent:!0})),v=(v+1)%h}sO(e).splitAreaColors=p}}}function NUe(e){sO(e).splitAreaColors=null}var $Ue=["axisLine","axisTickLabel","axisName"],VUe=["splitArea","splitLine","minorSplitLine"],vte=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return t.prototype.render=function(n,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Bi,this.group.add(this._axisGroup),!!n.get("show")){var s=n.getCoordSysModel(),l=aO(s,n),c=new Af(n,Pn({handleAutoShown:function(f){for(var p=s.coordinateSystem.getCartesians(),v=0;v<p.length;v++)if(eO(p[v].getOtherAxis(n.axis).scale))return!0;return!1}},l));qe($Ue,c.add,c),this._axisGroup.add(c.getGroup()),qe(VUe,function(f){n.get([f,"show"])&&HUe[f](this,this._axisGroup,n,s)},this);var h=a&&a.type==="changeAxisOrder"&&a.isInitSort;h||KJ(o,this._axisGroup,n),e.prototype.render.call(this,n,r,i,a)}},t.prototype.remove=function(){NUe(this)},t.type="cartesianAxis",t}(pte),HUe={splitLine:function(e,t,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=a.get("showMinLine")!==!1,c=a.get("showMaxLine")!==!1;s=Vn(s)?s:[s];for(var h=r.coordinateSystem.getRect(),f=i.isHorizontal(),p=0,v=i.getTicksCoords({tickModel:a}),_=[],b=[],C=o.getLineStyle(),T=0;T<v.length;T++){var E=i.toGlobalCoord(v[T].coord);if(!(T===0&&!l||T===v.length-1&&!c)){var A=v[T].tickValue;f?(_[0]=E,_[1]=h.y,b[0]=E,b[1]=h.y+h.height):(_[0]=h.x,_[1]=E,b[0]=h.x+h.width,b[1]=E);var I=p++%s.length,O=new rd({anid:A!=null?"line_"+A:null,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:b[0],y2:b[1]},style:hi({stroke:s[I]},C),silent:!0});kw(O.shape,C.lineWidth),t.add(O)}}}},minorSplitLine:function(e,t,n,r){var i=n.axis,a=n.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var h=[],f=[],p=o.getLineStyle(),v=0;v<c.length;v++)for(var _=0;_<c[v].length;_++){var b=i.toGlobalCoord(c[v][_].coord);l?(h[0]=b,h[1]=s.y,f[0]=b,f[1]=s.y+s.height):(h[0]=s.x,h[1]=b,f[0]=s.x+s.width,f[1]=b);var C=new rd({anid:"minor_line_"+c[v][_].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:p,silent:!0});kw(C.shape,p.lineWidth),t.add(C)}},splitArea:function(e,t,n,r){FUe(e,t,n,r)}},mte=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="xAxis",t}(vte),jUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=mte.type,n}return t.type="yAxis",t}(vte),UUe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="grid",n}return t.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new Pi({shape:n.coordinateSystem.getRect(),style:hi({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Cs),_U={offset:0};function gte(e){e.registerComponentView(UUe),e.registerComponentModel(pUe),e.registerCoordinateSystem("cartesian2d",CUe),lU(e,"x",rO,_U),lU(e,"y",rO,_U),e.registerComponentView(mte),e.registerComponentView(jUe),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function WUe(e){Io(gte),e.registerSeriesModel(uUe),e.registerChartView(fUe),e.registerLayout(v4("scatter"))}var bU="\0_ec_interaction_mutex";function GUe(e,t,n){var r=b4(e);r[t]=n}function KUe(e,t,n){var r=b4(e),i=r[t];i===n&&(r[t]=null)}function wU(e,t){return!!b4(e)[t]}function b4(e){return e[bU]||(e[bU]={})}cd({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Jo);var qUe=function(e){xn(t,e);function t(n){var r=e.call(this)||this;r._zr=n;var i=ur(r._mousedownHandler,r),a=ur(r._mousemoveHandler,r),o=ur(r._mouseupHandler,r),s=ur(r._mousewheelHandler,r),l=ur(r._pinchHandler,r);return r.enable=function(c,h){this.disable(),this._opt=hi(wr(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(n.on("mousewheel",s),n.on("pinch",l))},r.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",o),n.off("mousewheel",s),n.off("pinch",l)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(n){this.pointerChecker=n},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(n){if(!hV(n)){for(var r=n.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!ZC("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||wU(this._zr,"globalPan"))){var r=n.offsetX,i=n.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&Jd(n.event),yte(this,"pan","moveOnMouseMove",n,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(n){hV(n)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(n){var r=ZC("zoomOnMouseWheel",n,this._opt),i=ZC("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,o=Math.abs(a),s=n.offsetX,l=n.offsetY;if(!(a===0||!r&&!i)){if(r){var c=o>3?1.4:o>1?1.2:1.1,h=a>0?c:1/c;XI(this,"zoom","zoomOnMouseWheel",n,{scale:h,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(a),p=(a>0?1:-1)*(f>3?.4:f>1?.15:.05);XI(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:p,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(n){if(!wU(this._zr,"globalPan")){var r=n.pinchScale>1?1.1:1/1.1;XI(this,"zoom",null,n,{scale:r,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},t}(ou);function XI(e,t,n,r,i){e.pointerChecker&&e.pointerChecker(r,i.originX,i.originY)&&(Jd(r.event),yte(e,t,n,r,i))}function yte(e,t,n,r,i){i.isAvailableBehavior=ur(ZC,null,n,r),e.trigger(t,i)}function ZC(e,t,n){var r=n[e];return!e||r&&(!Qn(r)||t.event[r+"Key"])}var ZUe={axisPointer:1,tooltip:1,brush:1};function YUe(e,t,n){var r=t.getComponentByElement(e.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!ZUe.hasOwnProperty(r.mainType)&&i&&i.model!==n}var zw=qe,XUe=fr,mM=-1,Qo=function(){function e(t){var n=t.mappingMethod,r=t.type,i=this.option=wr(t);this.type=r,this.mappingMethod=n,this._normalizeData=e9e[n];var a=e.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],n==="piecewise"?(JI(i),JUe(i)):n==="category"?i.categories?QUe(i):JI(i,!0):(ec(n!=="linear"||i.dataExtent),JI(i))}return e.prototype.mapValueToVisual=function(t){var n=this._normalizeData(t);return this._normalizedToVisual(n,t)},e.prototype.getNormalizer=function(){return ur(this._normalizeData,this)},e.listVisualTypes=function(){return va(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,n,r){fr(t)?qe(t,n,r):n.call(r,t)},e.mapVisual=function(t,n,r){var i,a=Vn(t)?[]:fr(t)?{}:(i=!0,null);return e.eachVisual(t,function(o,s){var l=n.call(r,o,s);i?a=l:a[s]=l}),a},e.retrieveVisuals=function(t){var n={},r;return t&&zw(e.visualHandlers,function(i,a){t.hasOwnProperty(a)&&(n[a]=t[a],r=!0)}),r?n:null},e.prepareVisualTypes=function(t){if(Vn(t))t=t.slice();else if(XUe(t)){var n=[];zw(t,function(r,i){n.push(i)}),t=n}else return[];return t.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,n){return n==="color"?!!(t&&t.indexOf(n)===0):t===n},e.findPieceIndex=function(t,n,r){for(var i,a=1/0,o=0,s=n.length;o<s;o++){var l=n[o].value;if(l!=null){if(l===t||Qn(l)&&l===t+"")return o;r&&p(l,o)}}for(var o=0,s=n.length;o<s;o++){var c=n[o],h=c.interval,f=c.close;if(h){if(h[0]===-1/0){if(iC(f[1],t,h[1]))return o}else if(h[1]===1/0){if(iC(f[0],h[0],t))return o}else if(iC(f[0],h[0],t)&&iC(f[1],t,h[1]))return o;r&&p(h[0],o),r&&p(h[1],o)}}if(r)return t===1/0?n.length-1:t===-1/0?0:i;function p(v,_){var b=Math.abs(v-t);b<a&&(a=b,i=_)}},e.visualHandlers={color:{applyVisual:Hb("color"),getColorMapper:function(){var t=this.option;return ur(t.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),o1.call(this,n)}:function(n,r,i){var a=!!i;return!r&&(n=this._normalizeData(n)),i=WP(n,t.parsedVisual,i),a?i:Wd(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Wd(WP(t,this.option.parsedVisual),"rgba")},category:o1,piecewise:function(t,n){var r=uO.call(this,n);return r==null&&(r=Wd(WP(t,this.option.parsedVisual),"rgba")),r},fixed:cv}},colorHue:rC(function(t,n){return GP(t,n)}),colorSaturation:rC(function(t,n){return GP(t,null,n)}),colorLightness:rC(function(t,n){return GP(t,null,null,n)}),colorAlpha:rC(function(t,n){return ABe(t,n)}),decal:{applyVisual:Hb("decal"),_normalizedToVisual:{linear:null,category:o1,piecewise:null,fixed:null}},opacity:{applyVisual:Hb("opacity"),_normalizedToVisual:lO([0,1])},liftZ:{applyVisual:Hb("liftZ"),_normalizedToVisual:{linear:cv,category:cv,piecewise:cv,fixed:cv}},symbol:{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("symbol",i)},_normalizedToVisual:{linear:xU,category:o1,piecewise:function(t,n){var r=uO.call(this,n);return r==null&&(r=xU.call(this,t)),r},fixed:cv}},symbolSize:{applyVisual:Hb("symbolSize"),_normalizedToVisual:lO([0,1])}},e}();function JUe(e){var t=e.pieceList;e.hasSpecialVisual=!1,qe(t,function(n,r){n.originIndex=r,n.visual!=null&&(e.hasSpecialVisual=!0)})}function QUe(e){var t=e.categories,n=e.categoryMap={},r=e.visual;if(zw(t,function(o,s){n[o]=s}),!Vn(r)){var i=[];fr(r)?zw(r,function(o,s){var l=n[s];i[l??mM]=o}):i[mM]=r,r=_te(e,i)}for(var a=t.length-1;a>=0;a--)r[a]==null&&(delete n[t[a]],t.pop())}function JI(e,t){var n=e.visual,r=[];fr(n)?zw(n,function(a){r.push(a)}):n!=null&&r.push(n);var i={color:1,symbol:1};!t&&r.length===1&&!i.hasOwnProperty(e.type)&&(r[1]=r[0]),_te(e,r)}function rC(e){return{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("color",e(n("color"),i))},_normalizedToVisual:lO([0,1])}}function xU(e){var t=this.option.visual;return t[Math.round(Ai(e,[0,1],[0,t.length-1],!0))]||{}}function Hb(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function o1(e){var t=this.option.visual;return t[this.option.loop&&e!==mM?e%t.length:e]}function cv(){return this.option.visual[0]}function lO(e){return{linear:function(t){return Ai(t,e,this.option.visual,!0)},category:o1,piecewise:function(t,n){var r=uO.call(this,n);return r==null&&(r=Ai(t,e,this.option.visual,!0)),r},fixed:cv}}function uO(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=Qo.findPieceIndex(e,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function _te(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Yn(t,function(n){var r=eu(n);return r||[0,0,0,1]})),t}var e9e={linear:function(e){return Ai(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Qo.findPieceIndex(e,t,!0);if(n!=null)return Ai(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??mM},fixed:Jo};function iC(e,t,n){return e?t<=n:t<n}var t9e=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),n9e=function(e){xn(t,e);function t(n){var r=e.call(this,n)||this;return r.type="pointer",r}return t.prototype.getDefaultShape=function(){return new t9e},t.prototype.buildPath=function(n,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-i(l)*s*(s>=o/3?1:2),h=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,n.moveTo(c,h),n.lineTo(r.x+i(l)*s,r.y+a(l)*s),n.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),n.lineTo(r.x-i(l)*s,r.y-a(l)*s),n.lineTo(c,h)},t}(Ii);function r9e(e,t){var n=e.get("center"),r=t.getWidth(),i=t.getHeight(),a=Math.min(r,i),o=Fr(n[0],t.getWidth()),s=Fr(n[1],t.getHeight()),l=Fr(e.get("radius"),a/2);return{cx:o,cy:s,r:l}}function aC(e,t){var n=e==null?"":e+"";return t&&(Qn(t)?n=t.replace("{value}",n):Mr(t)&&(n=t(e))),n}var i9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){this.group.removeAll();var a=n.get(["axisLine","lineStyle","color"]),o=r9e(n,i);this._renderMain(n,r,i,a,o),this._data=n.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(n,r,i,a,o){var s=this.group,l=n.get("clockwise"),c=-n.get("startAngle")/180*Math.PI,h=-n.get("endAngle")/180*Math.PI,f=n.getModel("axisLine"),p=f.get("roundCap"),v=p?vM:nd,_=f.get("show"),b=f.getModel("lineStyle"),C=b.get("width"),T=[c,h];Ez(T,!l),c=T[0],h=T[1];for(var E=h-c,A=c,I=[],O=0;_&&O<a.length;O++){var B=Math.min(Math.max(a[O][0],0),1);h=c+E*B;var N=new v({shape:{startAngle:A,endAngle:h,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-C,r:o.r},silent:!0});N.setStyle({fill:a[O][1]}),N.setStyle(b.getLineStyle(["color","width"])),I.push(N),A=h}I.reverse(),qe(I,function(j){return s.add(j)});var H=function(j){if(j<=0)return a[0][1];var W;for(W=0;W<a.length;W++)if(a[W][0]>=j&&(W===0?0:a[W-1][0])<j)return a[W][1];return a[W-1][1]};this._renderTicks(n,r,i,H,o,c,h,l,C),this._renderTitleAndDetail(n,r,i,H,o),this._renderAnchor(n,o),this._renderPointer(n,r,i,H,o,c,h,l,C)},t.prototype._renderTicks=function(n,r,i,a,o,s,l,c,h){for(var f=this.group,p=o.cx,v=o.cy,_=o.r,b=+n.get("min"),C=+n.get("max"),T=n.getModel("splitLine"),E=n.getModel("axisTick"),A=n.getModel("axisLabel"),I=n.get("splitNumber"),O=E.get("splitNumber"),B=Fr(T.get("length"),_),N=Fr(E.get("length"),_),H=s,j=(l-s)/I,W=j/O,U=T.getModel("lineStyle").getLineStyle(),Y=E.getModel("lineStyle").getLineStyle(),ie=T.get("distance"),ue,J,q=0;q<=I;q++){if(ue=Math.cos(H),J=Math.sin(H),T.get("show")){var ce=ie?ie+h:h,re=new rd({shape:{x1:ue*(_-ce)+p,y1:J*(_-ce)+v,x2:ue*(_-B-ce)+p,y2:J*(_-B-ce)+v},style:U,silent:!0});U.stroke==="auto"&&re.setStyle({stroke:a(q/I)}),f.add(re)}if(A.get("show")){var ce=A.get("distance")+ie,ee=aC(za(q/I*(C-b)+b),A.get("formatter")),oe=a(q/I),be=ue*(_-B-ce)+p,we=J*(_-B-ce)+v,pe=A.get("rotate"),Ce=0;pe==="radial"?(Ce=-H+2*Math.PI,Ce>Math.PI/2&&(Ce+=Math.PI)):pe==="tangential"?Ce=-H-Math.PI/2:Wi(pe)&&(Ce=pe*Math.PI/180),Ce===0?f.add(new Mi({style:Ga(A,{text:ee,x:be,y:we,verticalAlign:J<-.8?"top":J>.8?"bottom":"middle",align:ue<-.4?"left":ue>.4?"right":"center"},{inheritColor:oe}),silent:!0})):f.add(new Mi({style:Ga(A,{text:ee,x:be,y:we,verticalAlign:"middle",align:"center"},{inheritColor:oe}),silent:!0,originX:be,originY:we,rotation:Ce}))}if(E.get("show")&&q!==I){var ce=E.get("distance");ce=ce?ce+h:h;for(var Ve=0;Ve<=O;Ve++){ue=Math.cos(H),J=Math.sin(H);var et=new rd({shape:{x1:ue*(_-ce)+p,y1:J*(_-ce)+v,x2:ue*(_-N-ce)+p,y2:J*(_-N-ce)+v},silent:!0,style:Y});Y.stroke==="auto"&&et.setStyle({stroke:a((q+Ve/O)/I)}),f.add(et),H+=W}H-=W}else H+=j}},t.prototype._renderPointer=function(n,r,i,a,o,s,l,c,h){var f=this.group,p=this._data,v=this._progressEls,_=[],b=n.get(["pointer","show"]),C=n.getModel("progress"),T=C.get("show"),E=n.getData(),A=E.mapDimension("value"),I=+n.get("min"),O=+n.get("max"),B=[I,O],N=[s,l];function H(W,U){var Y=E.getItemModel(W),ie=Y.getModel("pointer"),ue=Fr(ie.get("width"),o.r),J=Fr(ie.get("length"),o.r),q=n.get(["pointer","icon"]),ce=ie.get("offsetCenter"),re=Fr(ce[0],o.r),ee=Fr(ce[1],o.r),oe=ie.get("keepAspect"),be;return q?be=Js(q,re-ue/2,ee-J,ue,J,null,oe):be=new n9e({shape:{angle:-Math.PI/2,width:ue,r:J,x:re,y:ee}}),be.rotation=-(U+Math.PI/2),be.x=o.cx,be.y=o.cy,be}function j(W,U){var Y=C.get("roundCap"),ie=Y?vM:nd,ue=C.get("overlap"),J=ue?C.get("width"):h/E.count(),q=ue?o.r-J:o.r-(W+1)*J,ce=ue?o.r:o.r-W*J,re=new ie({shape:{startAngle:s,endAngle:U,cx:o.cx,cy:o.cy,clockwise:c,r0:q,r:ce}});return ue&&(re.z2=Ai(E.get(A,W),[I,O],[100,0],!0)),re}(T||b)&&(E.diff(p).add(function(W){var U=E.get(A,W);if(b){var Y=H(W,s);bs(Y,{rotation:-((isNaN(+U)?N[0]:Ai(U,B,N,!0))+Math.PI/2)},n),f.add(Y),E.setItemGraphicEl(W,Y)}if(T){var ie=j(W,s),ue=C.get("clip");bs(ie,{shape:{endAngle:Ai(U,B,N,ue)}},n),f.add(ie),PR(n.seriesIndex,E.dataType,W,ie),_[W]=ie}}).update(function(W,U){var Y=E.get(A,W);if(b){var ie=p.getItemGraphicEl(U),ue=ie?ie.rotation:s,J=H(W,ue);J.rotation=ue,go(J,{rotation:-((isNaN(+Y)?N[0]:Ai(Y,B,N,!0))+Math.PI/2)},n),f.add(J),E.setItemGraphicEl(W,J)}if(T){var q=v[U],ce=q?q.shape.endAngle:s,re=j(W,ce),ee=C.get("clip");go(re,{shape:{endAngle:Ai(Y,B,N,ee)}},n),f.add(re),PR(n.seriesIndex,E.dataType,W,re),_[W]=re}}).execute(),E.each(function(W){var U=E.getItemModel(W),Y=U.getModel("emphasis"),ie=Y.get("focus"),ue=Y.get("blurScope"),J=Y.get("disabled");if(b){var q=E.getItemGraphicEl(W),ce=E.getItemVisual(W,"style"),re=ce.fill;if(q instanceof sc){var ee=q.style;q.useStyle(Pn({image:ee.image,x:ee.x,y:ee.y,width:ee.width,height:ee.height},ce))}else q.useStyle(ce),q.type!=="pointer"&&q.setColor(re);q.setStyle(U.getModel(["pointer","itemStyle"]).getItemStyle()),q.style.fill==="auto"&&q.setStyle("fill",a(Ai(E.get(A,W),B,[0,1],!0))),q.z2EmphasisLift=0,d0(q,U),Hf(q,ie,ue,J)}if(T){var oe=_[W];oe.useStyle(E.getItemVisual(W,"style")),oe.setStyle(U.getModel(["progress","itemStyle"]).getItemStyle()),oe.z2EmphasisLift=0,d0(oe,U),Hf(oe,ie,ue,J)}}),this._progressEls=_)},t.prototype._renderAnchor=function(n,r){var i=n.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),c=i.get("keepAspect"),h=Js(s,r.cx-o/2+Fr(l[0],r.r),r.cy-o/2+Fr(l[1],r.r),o,o,null,c);h.z2=i.get("showAbove")?1:0,h.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(n,r,i,a,o){var s=this,l=n.getData(),c=l.mapDimension("value"),h=+n.get("min"),f=+n.get("max"),p=new Bi,v=[],_=[],b=n.isAnimationEnabled(),C=n.get(["pointer","showAbove"]);l.diff(this._data).add(function(T){v[T]=new Mi({silent:!0}),_[T]=new Mi({silent:!0})}).update(function(T,E){v[T]=s._titleEls[E],_[T]=s._detailEls[E]}).execute(),l.each(function(T){var E=l.getItemModel(T),A=l.get(c,T),I=new Bi,O=a(Ai(A,[h,f],[0,1],!0)),B=E.getModel("title");if(B.get("show")){var N=B.get("offsetCenter"),H=o.cx+Fr(N[0],o.r),j=o.cy+Fr(N[1],o.r),W=v[T];W.attr({z2:C?0:2,style:Ga(B,{x:H,y:j,text:l.getName(T),align:"center",verticalAlign:"middle"},{inheritColor:O})}),I.add(W)}var U=E.getModel("detail");if(U.get("show")){var Y=U.get("offsetCenter"),ie=o.cx+Fr(Y[0],o.r),ue=o.cy+Fr(Y[1],o.r),J=Fr(U.get("width"),o.r),q=Fr(U.get("height"),o.r),ce=n.get(["progress","show"])?l.getItemVisual(T,"style").fill:O,W=_[T],re=U.get("formatter");W.attr({z2:C?0:2,style:Ga(U,{x:ie,y:ue,text:aC(A,re),width:isNaN(J)?null:J,height:isNaN(q)?null:q,align:"center",verticalAlign:"middle"},{inheritColor:ce})}),JJ(W,{normal:U},A,function(oe){return aC(oe,re)}),b&&N8e(W,T,l,n,{getFormattedLabel:function(oe,be,we,pe,Ce,Ve){return aC(Ve?Ve.interpolatedValue:A,re)}}),I.add(W)}p.add(I)}),this.group.add(p),this._titleEls=v,this._detailEls=_},t.type="gauge",t}(ws),a9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}return t.prototype.getInitialData=function(n,r){return ute(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Xs);function o9e(e){e.registerChartView(i9e),e.registerSeriesModel(a9e)}function j0(e,t,n,r,i,a){e=e||0;var o=n[1]-n[0];if(i!=null&&(i=Wg(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=Wg(s,[0,o]),i=a=Wg(s,[i,a]),r=0}t[0]=Wg(t[0],n),t[1]=Wg(t[1],n);var l=QI(t,r);t[r]+=e;var c=i||0,h=n.slice();l.sign<0?h[0]+=c:h[1]-=c,t[r]=Wg(t[r],h);var f;return f=QI(t,r),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-r]=t[r]+l.sign*i),f=QI(t,r),a!=null&&f.span>a&&(t[1-r]=t[r]+f.sign*a),t}function QI(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Wg(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var hm=!0,Bw=Math.min,p0=Math.max,s9e=Math.pow,l9e=1e4,u9e=6,c9e=6,SU="globalPan",d9e={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},h9e={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},CU={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},f9e=0,p9e=function(e){xn(t,e);function t(n){var r=e.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new Bi,r._uid="brushController_"+f9e++,qe(w9e,function(i,a){this._handlers[a]=ur(i,this)},r),r}return t.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},t.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||GUe(r,SU,this._uid),qe(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=Kr(wr(CU),n,!0)},t.prototype._doDisableBrush=function(){var n=this._zr;KUe(n,SU,this._uid),qe(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};qe(n,function(i){r[i.panelId]=wr(i)})}else this._panels=null;return this},t.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(n){n=Yn(n,function(p){return Kr(wr(CU),p,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new o4(i,n,c,l).add(h).update(h).remove(f).execute(),this;function l(p,v){return(p.id!=null?p.id:r+v)+"-"+p.brushType}function c(p,v){return l(p.__brushOption,v)}function h(p,v){var _=n[p];if(v!=null&&i[v]===s)a[p]=i[v];else{var b=a[p]=v!=null?(i[v].__brushOption=_,i[v]):wte(o,bte(o,_));w4(o,b)}}function f(p){i[p]!==s&&o.group.remove(i[p])}},t.prototype.unmount=function(){return this.enableBrush(!1),cO(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(ou);function bte(e,t){var n=Zk[t.brushType].createCover(e,t);return n.__brushOption=t,Ste(n,t),e.group.add(n),n}function wte(e,t){var n=x4(t);return n.endCreating&&(n.endCreating(e,t),Ste(t,t.__brushOption)),t}function xte(e,t){var n=t.__brushOption;x4(t).updateCoverShape(e,t,n.range,n)}function Ste(e,t){var n=t.z;n==null&&(n=l9e),e.traverse(function(r){r.z=n,r.z2=n})}function w4(e,t){x4(t).updateCommon(e,t),xte(e,t)}function x4(e){return Zk[e.__brushOption.brushType]}function S4(e,t,n){var r=e._panels;if(!r)return hm;var i,a=e._transform;return qe(r,function(o){o.isTargetByCursor(t,n,a)&&(i=o)}),i}function Cte(e,t){var n=e._panels;if(!n)return hm;var r=t.__brushOption.panelId;return r!=null?n[r]:hm}function cO(e){var t=e._covers,n=t.length;return qe(t,function(r){e.group.remove(r)},e),t.length=0,!!n}function fm(e,t){var n=Yn(e._covers,function(r){var i=r.__brushOption,a=wr(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function v9e(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],i=n[0]-r[0],a=n[1]-r[1],o=s9e(i*i+a*a,.5);return o>u9e}function Tte(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Mte(e,t,n,r){var i=new Bi;return i.add(new Pi({name:"main",style:C4(n),silent:!0,draggable:!0,cursor:"move",drift:bi(TU,e,t,i,["n","s","w","e"]),ondragend:bi(fm,t,{isEnd:!0})})),qe(r,function(a){i.add(new Pi({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:bi(TU,e,t,i,a),ondragend:bi(fm,t,{isEnd:!0})}))}),i}function kte(e,t,n,r){var i=r.brushStyle.lineWidth||0,a=p0(i,c9e),o=n[0][0],s=n[1][0],l=o-i/2,c=s-i/2,h=n[0][1],f=n[1][1],p=h-a+i/2,v=f-a+i/2,_=h-o,b=f-s,C=_+i,T=b+i;Rd(e,t,"main",o,s,_,b),r.transformable&&(Rd(e,t,"w",l,c,a,T),Rd(e,t,"e",p,c,a,T),Rd(e,t,"n",l,c,C,a),Rd(e,t,"s",l,v,C,a),Rd(e,t,"nw",l,c,a,a),Rd(e,t,"ne",p,c,a,a),Rd(e,t,"sw",l,v,a,a),Rd(e,t,"se",p,v,a,a))}function dO(e,t){var n=t.__brushOption,r=n.transformable,i=t.childAt(0);i.useStyle(C4(n)),i.attr({silent:!r,cursor:r?"move":"default"}),qe([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?hO(e,a[0]):g9e(e,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?h9e[s]+"-resize":null})})}function Rd(e,t,n,r,i,a,o){var s=t.childOfName(n);s&&s.setShape(_9e(T4(e,t,[[r,i],[r+a,i+o]])))}function C4(e){return hi({strokeNoScale:!0},e.brushStyle)}function Ete(e,t,n,r){var i=[Bw(e,n),Bw(t,r)],a=[p0(e,n),p0(t,r)];return[[i[0],a[0]],[i[1],a[1]]]}function m9e(e){return Nv(e.group)}function hO(e,t){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Lk(n[t],m9e(e));return r[i]}function g9e(e,t){var n=[hO(e,t[0]),hO(e,t[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function TU(e,t,n,r,i,a){var o=n.__brushOption,s=e.toRectRange(o.range),l=Ate(t,i,a);qe(r,function(c){var h=d9e[c];s[h[0]][h[1]]+=l[h[0]]}),o.range=e.fromRectRange(Ete(s[0][0],s[1][0],s[0][1],s[1][1])),w4(t,n),fm(t,{isEnd:!1})}function y9e(e,t,n,r){var i=t.__brushOption.range,a=Ate(e,n,r);qe(i,function(o){o[0]+=a[0],o[1]+=a[1]}),w4(e,t),fm(e,{isEnd:!1})}function Ate(e,t,n){var r=e.group,i=r.transformCoordToLocal(t,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function T4(e,t,n){var r=Cte(e,t);return r&&r!==hm?r.clipPath(n,e._transform):wr(n)}function _9e(e){var t=Bw(e[0][0],e[1][0]),n=Bw(e[0][1],e[1][1]),r=p0(e[0][0],e[1][0]),i=p0(e[0][1],e[1][1]);return{x:t,y:n,width:r-t,height:i-n}}function b9e(e,t,n){if(!(!e._brushType||x9e(e,t.offsetX,t.offsetY))){var r=e._zr,i=e._covers,a=S4(e,t,n);if(!e._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===hm||s.panelId===a.panelId)&&Zk[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function fO(e){var t=e.event;t.preventDefault&&t.preventDefault()}function pO(e,t,n){return e.childOfName("main").contain(t,n)}function Pte(e,t,n,r){var i=e._creatingCover,a=e._creatingPanel,o=e._brushOption,s;if(e._track.push(n.slice()),v9e(e)||i){if(a&&!i){o.brushMode==="single"&&cO(e);var l=wr(o);l.brushType=MU(l.brushType,a),l.panelId=a===hm?null:a.panelId,i=e._creatingCover=bte(e,l),e._covers.push(i)}if(i){var c=Zk[MU(e._brushType,a)],h=i.__brushOption;h.range=c.getCreatingRange(T4(e,i,e._track)),r&&(wte(e,i),c.updateCommon(e,i)),xte(e,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&S4(e,t,n)&&cO(e)&&(s={isEnd:r,removeOnClick:!0});return s}function MU(e,t){return e==="auto"?t.defaultBrushType:e}var w9e={mousedown:function(e){if(this._dragging)kU(this,e);else if(!e.target||!e.target.draggable){fO(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var n=this._creatingPanel=S4(this,e,t);n&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(b9e(this,e,r),this._dragging){fO(e);var i=Pte(this,e,r,!1);i&&fm(this,i)}},mouseup:function(e){kU(this,e)}};function kU(e,t){if(e._dragging){fO(t);var n=t.offsetX,r=t.offsetY,i=e.group.transformCoordToLocal(n,r),a=Pte(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&fm(e,a)}}function x9e(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}var Zk={lineX:EU(0),lineY:EU(1),rect:{createCover:function(e,t){function n(r){return r}return Mte({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=Tte(e);return Ete(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){kte(e,t,n,r)},updateCommon:dO,contain:pO},polygon:{createCover:function(e,t){var n=new Bi;return n.add(new Yf({name:"main",style:C4(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new z0({name:"main",draggable:!0,drift:bi(y9e,e,t),ondragend:bi(fm,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:T4(e,t,n)})},updateCommon:dO,contain:pO}};function EU(e){return{createCover:function(t,n){return Mte({toRectRange:function(r){var i=[r,[0,100]];return e&&i.reverse(),i},fromRectRange:function(r){return r[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=Tte(t),r=Bw(n[0][e],n[1][e]),i=p0(n[0][e],n[1][e]);return[r,i]},updateCoverShape:function(t,n,r,i){var a,o=Cte(t,n);if(o!==hm&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,a];e&&l.reverse(),kte(t,n,l,i)},updateCommon:dO,contain:pO}}function S9e(e){return e=M4(e),function(t){return qJ(t,e)}}function C9e(e,t){return e=M4(e),function(n){var r=t??n,i=r?e.width:e.height,a=r?e.x:e.y;return[a,a+(i||0)]}}function T9e(e,t,n){var r=M4(e);return function(i,a){return r.contain(a[0],a[1])&&!YUe(i,t,n)}}function M4(e){return Ti.create(e)}var M9e=256,k9e=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=$f.createCanvas();this.canvas=t}return e.prototype.update=function(t,n,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),h=this.pointSize+this.blurSize,f=this.canvas,p=f.getContext("2d"),v=t.length;f.width=n,f.height=r;for(var _=0;_<v;++_){var b=t[_],C=b[0],T=b[1],E=b[2],A=i(E);p.globalAlpha=A,p.drawImage(s,C-h,T-h)}if(!f.width||!f.height)return f;for(var I=p.getImageData(0,0,f.width,f.height),O=I.data,B=0,N=O.length,H=this.minOpacity,j=this.maxOpacity,W=j-H;B<N;){var A=O[B+3]/256,U=Math.floor(A*(M9e-1))*4;if(A>0){var Y=o(A)?l:c;A>0&&(A=A*W+H),O[B++]=Y[U],O[B++]=Y[U+1],O[B++]=Y[U+2],O[B++]=Y[U+3]*A*256}else B+=4}return p.putImageData(I,0,0),f},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=$f.createCanvas()),n=this.pointSize+this.blurSize,r=n*2;t.width=r,t.height=r;var i=t.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-n,n,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),t},e.prototype._getGradient=function(t,n){for(var r=this._gradientPixels,i=r[n]||(r[n]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)t[n](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},e}();function E9e(e,t,n){var r=e[1]-e[0];t=Yn(t,function(o){return{interval:[(o.interval[0]-e[0])/r,(o.interval[1]-e[0])/r]}});var i=t.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&n[s]}}function A9e(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(r){return r>=t[0]&&r<=t[1]}}function AU(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var P9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===n&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=n.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(n,i,0,n.getData().count()):AU(o)&&this._renderOnGeo(o,n,a,i)},t.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll()},t.prototype.incrementalRender=function(n,r,i,a){var o=r.coordinateSystem;o&&(AU(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,n.start,n.end,!0)))},t.prototype.eachRendered=function(n){Cx(this._progressiveEls||this.group,n)},t.prototype._renderOnCartesianAndCalendar=function(n,r,i,a,o){var s=n.coordinateSystem,l=qk(s,"cartesian2d"),c,h,f,p;if(l){var v=s.getAxis("x"),_=s.getAxis("y");c=v.getBandWidth()+.5,h=_.getBandWidth()+.5,f=v.scale.getExtent(),p=_.scale.getExtent()}for(var b=this.group,C=n.getData(),T=n.getModel(["emphasis","itemStyle"]).getItemStyle(),E=n.getModel(["blur","itemStyle"]).getItemStyle(),A=n.getModel(["select","itemStyle"]).getItemStyle(),I=n.get(["itemStyle","borderRadius"]),O=um(n),B=n.getModel("emphasis"),N=B.get("focus"),H=B.get("blurScope"),j=B.get("disabled"),W=l?[C.mapDimension("x"),C.mapDimension("y"),C.mapDimension("value")]:[C.mapDimension("time"),C.mapDimension("value")],U=i;U<a;U++){var Y=void 0,ie=C.getItemVisual(U,"style");if(l){var ue=C.get(W[0],U),J=C.get(W[1],U);if(isNaN(C.get(W[2],U))||isNaN(ue)||isNaN(J)||ue<f[0]||ue>f[1]||J<p[0]||J>p[1])continue;var q=s.dataToPoint([ue,J]);Y=new Pi({shape:{x:q[0]-c/2,y:q[1]-h/2,width:c,height:h},style:ie})}else{if(isNaN(C.get(W[1],U)))continue;Y=new Pi({z2:1,shape:s.dataToRect([C.get(W[0],U)]).contentShape,style:ie})}if(C.hasItemOption){var ce=C.getItemModel(U),re=ce.getModel("emphasis");T=re.getModel("itemStyle").getItemStyle(),E=ce.getModel(["blur","itemStyle"]).getItemStyle(),A=ce.getModel(["select","itemStyle"]).getItemStyle(),I=ce.get(["itemStyle","borderRadius"]),N=re.get("focus"),H=re.get("blurScope"),j=re.get("disabled"),O=um(ce)}Y.shape.r=I;var ee=n.getRawValue(U),oe="-";ee&&ee[2]!=null&&(oe=ee[2]+""),B0(Y,O,{labelFetcher:n,labelDataIndex:U,defaultOpacity:ie.opacity,defaultText:oe}),Y.ensureState("emphasis").style=T,Y.ensureState("blur").style=E,Y.ensureState("select").style=A,Hf(Y,N,H,j),Y.incremental=o,o&&(Y.states.emphasis.hoverLayer=!0),b.add(Y),C.setItemGraphicEl(U,Y),this._progressiveEls&&this._progressiveEls.push(Y)}},t.prototype._renderOnGeo=function(n,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new k9e;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var h=n.getViewRect().clone(),f=n.getRoamTransform();h.applyTransform(f);var p=Math.max(h.x,0),v=Math.max(h.y,0),_=Math.min(h.width+h.x,a.getWidth()),b=Math.min(h.height+h.y,a.getHeight()),C=_-p,T=b-v,E=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],A=l.mapArray(E,function(N,H,j){var W=n.dataToPoint([N,H]);return W[0]-=p,W[1]-=v,W.push(j),W}),I=i.getExtent(),O=i.type==="visualMap.continuous"?A9e(I,i.option.range):E9e(I,i.getPieceList(),i.option.selected);c.update(A,C,T,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},O);var B=new sc({style:{width:C,height:T,x:p,y:v,image:c.canvas},silent:!0});this.group.add(B)},t.type="heatmap",t}(ws),I9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,r){return Ex(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var n=$k.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Xs);function L9e(e){e.registerChartView(P9e),e.registerSeriesModel(I9e)}var mv=Sa(),PU=wr,eL=ur,D9e=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,n,r,i){var a=n.get("value"),o=n.get("status");if(this._axisModel=t,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,a,t,n,r);var h=c.graphicKey;h!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=h;var f=this._moveAnimation=this.determineAnimation(t,n);if(!s)s=this._group=new Bi,this.createPointerEl(s,c,t,n),this.createLabelEl(s,c,t,n),r.getZr().add(s);else{var p=bi(IU,n,f);this.updatePointerEl(s,c,p),this.updateLabelEl(s,c,p,n)}DU(s,n,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,n){var r=n.get("animation"),i=t.axis,a=i.type==="category",o=n.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=_4(t).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},e.prototype.makeElOption=function(t,n,r,i,a){},e.prototype.createPointerEl=function(t,n,r,i){var a=n.pointer;if(a){var o=mv(t).pointerEl=new z8e[a.type](PU(n.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,n,r,i){if(n.label){var a=mv(t).labelEl=new Mi(PU(n.label));t.add(a),LU(a,i)}},e.prototype.updatePointerEl=function(t,n,r){var i=mv(t).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},e.prototype.updateLabelEl=function(t,n,r,i){var a=mv(t).labelEl;a&&(a.setStyle(n.label.style),r(a,{x:n.label.x,y:n.label.y}),LU(a,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=Dk(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Jd(c.event)},onmousedown:eL(this._onHandleDragMove,this,0,0),drift:eL(this._onHandleDragMove,this),ondragend:eL(this._onHandleDragEnd,this)}),r.add(i)),DU(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Vn(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,jk(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,n){IU(this._axisPointerModel,!n&&this._moveAnimation,this._handle,tL(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(tL(r),[t,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(tL(i)),mv(r).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var n=t.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),sM(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,n,r){return r=r||0,{x:t[r],y:t[1-r],width:n[r],height:n[1-r]}},e}();function IU(e,t,n,r){Ite(mv(n).lastProp,r)||(mv(n).lastProp=r,t?go(n,r,e):(n.stopAnimation(),n.attr(r)))}function Ite(e,t){if(fr(e)&&fr(t)){var n=!0;return qe(t,function(r,i){n=n&&Ite(e[i],r)}),!!n}else return e===t}function LU(e,t){e[t.get(["label","show"])?"show":"hide"]()}function tL(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function DU(e,t,n){var r=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=n)})}function R9e(e){var t=e.get("type"),n=e.getModel(t+"Style"),r;return t==="line"?(r=n.getLineStyle(),r.fill=null):t==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function O9e(e,t,n,r,i){var a=n.get("value"),o=Lte(a,t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=kx(s.get("padding")||0),c=s.getFont(),h=xk(o,c),f=i.position,p=h.width+l[1]+l[3],v=h.height+l[0]+l[2],_=i.align;_==="right"&&(f[0]-=p),_==="center"&&(f[0]-=p/2);var b=i.verticalAlign;b==="bottom"&&(f[1]-=v),b==="middle"&&(f[1]-=v/2),z9e(f,p,v,r);var C=s.get("backgroundColor");(!C||C==="auto")&&(C=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:Ga(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:C}),z2:10}}function z9e(e,t,n,r){var i=r.getWidth(),a=r.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+n,a)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Lte(e,t,n,r,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),o=i.formatter;if(o){var s={value:d4(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};qe(r,function(l){var c=n.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,f=c&&c.getDataParams(h);f&&s.seriesData.push(f)}),Qn(o)?a=o.replace("{value}",a):Mr(o)&&(a=o(s))}return a}function Dte(e,t,n){var r=Ey();return _z(r,r,n.rotation),vR(r,r,n.position),Mf([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function B9e(e,t,n,r,i,a){var o=Af.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),O9e(t,r,i,a,{position:Dte(r.axis,e,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function F9e(e,t,n){return n=n||0,{x1:e[n],y1:e[1-n],x2:t[n],y2:t[1-n]}}function N9e(e,t,n){return n=n||0,{x:e[n],y:e[1-n],width:t[n],height:t[1-n]}}var $9e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis,l=s.grid,c=a.get("type"),h=RU(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var p=R9e(a),v=V9e[c](s,f,h);v.style=p,n.graphicKey=v.type,n.pointer=v}var _=aO(l.model,i);B9e(r,n,_,i,a,o)},t.prototype.getHandleTransform=function(n,r,i){var a=aO(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=Dte(r.axis,n,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(n,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),c=RU(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,f=[n.x,n.y];f[h]+=r[h],f[h]=Math.min(l[1],f[h]),f[h]=Math.max(l[0],f[h]);var p=(c[1]+c[0])/2,v=[p,p];v[h]=f[h];var _=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:v,tooltipOption:_[h]}},t}(D9e);function RU(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var V9e={line:function(e,t,n){var r=F9e([t,n[0]],[t,n[1]],OU(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:N9e([t-r/2,n[0]],[r,i],OU(e))}}};function OU(e){return e.dim==="x"?0:1}var H9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(xi),jd=Sa(),j9e=qe;function Rte(e,t,n){if(!Ir.node){var r=t.getZr();jd(r).records||(jd(r).records={}),U9e(r,t);var i=jd(r).records[e]||(jd(r).records[e]={});i.handler=n}}function U9e(e,t){if(jd(e).initialized)return;jd(e).initialized=!0,n("click",bi(zU,"click")),n("mousemove",bi(zU,"mousemove")),n("globalout",G9e);function n(r,i){e.on(r,function(a){var o=K9e(t);j9e(jd(e).records,function(s){s&&i(s,a,o.dispatchAction)}),W9e(o.pendings,t)})}}function W9e(e,t){var n=e.showTip.length,r=e.hideTip.length,i;n?i=e.showTip[n-1]:r&&(i=e.hideTip[r-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function G9e(e,t,n){e.handler("leave",null,n)}function zU(e,t,n,r){t.handler(e,n,r)}function K9e(e){var t={showTip:[],hideTip:[]},n=function(r){var i=t[r.type];i?i.push(r):(r.dispatchAction=n,e.dispatchAction(r))};return{dispatchAction:n,pendings:t}}function vO(e,t){if(!Ir.node){var n=t.getZr(),r=(jd(n).records||{})[e];r&&(jd(n).records[e]=null)}}var q9e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=r.getComponent("tooltip"),o=n.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Rte("axisPointer",i,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(n,r){vO("axisPointer",r)},t.prototype.dispose=function(n,r){vO("axisPointer",r)},t.type="axisPointer",t}(Cs);function Ote(e,t){var n=[],r=e.seriesIndex,i;if(r==null||!(i=t.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=sm(a,e);if(o==null||o<0||Vn(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var c=l.getBaseAxis(),h=l.getOtherAxis(c),f=h.dim,p=c.dim,v=f==="x"||f==="radius"?1:0,_=a.mapDimension(p),b=[];b[v]=a.get(_,o),b[1-v]=a.get(a.getCalculationInfo("stackResultDimension"),o),n=l.dataToPoint(b)||[]}else n=l.dataToPoint(a.getValues(Yn(l.dimensions,function(T){return a.mapDimension(T)}),o))||[];else if(s){var C=s.getBoundingRect().clone();C.applyTransform(s.transform),n=[C.x+C.width/2,C.y+C.height/2]}return{point:n,el:s}}var BU=Sa();function Z9e(e,t,n){var r=e.currTrigger,i=[e.x,e.y],a=e,o=e.dispatchAction||ur(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){YC(i)&&(i=Ote({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=YC(i),c=a.axesInfo,h=s.axesInfo,f=r==="leave"||YC(i),p={},v={},_={list:[],map:{}},b={showPointer:bi(X9e,v),showTooltip:bi(J9e,_)};qe(s.coordSysMap,function(T,E){var A=l||T.containPoint(i);qe(s.coordSysAxesInfo[E],function(I,O){var B=I.axis,N=n7e(c,I);if(!f&&A&&(!c||N)){var H=N&&N.value;H==null&&!l&&(H=B.pointToData(i)),H!=null&&FU(I,H,b,!1,p)}})});var C={};return qe(h,function(T,E){var A=T.linkGroup;A&&!v[E]&&qe(A.axesInfo,function(I,O){var B=v[O];if(I!==T&&B){var N=B.value;A.mapper&&(N=T.axis.scale.parse(A.mapper(N,NU(I),NU(T)))),C[T.key]=N}})}),qe(C,function(T,E){FU(h[E],T,b,!0,p)}),Q9e(v,h,p),e7e(_,i,e,o),t7e(h,o,n),p}}function FU(e,t,n,r,i){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){n.showPointer(e,t);return}var o=Y9e(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&Pn(i,s[0]),!r&&e.snap&&a.containData(l)&&l!=null&&(t=l),n.showPointer(e,t,s),n.showTooltip(e,o,l)}}function Y9e(e,t){var n=t.axis,r=n.dim,i=e,a=[],o=Number.MAX_VALUE,s=-1;return qe(t.seriesModels,function(l,c){var h=l.getData().mapDimensionsAll(r),f,p;if(l.getAxisTooltipData){var v=l.getAxisTooltipData(h,e,n);p=v.dataIndices,f=v.nestestValue}else{if(p=l.getData().indicesOfNearest(h[0],e,n.type==="category"?.5:null),!p.length)return;f=l.getData().get(h[0],p[0])}if(!(f==null||!isFinite(f))){var _=e-f,b=Math.abs(_);b<=o&&((b<o||_>=0&&s<0)&&(o=b,s=_,i=f,a.length=0),qe(p,function(C){a.push({seriesIndex:l.seriesIndex,dataIndexInside:C,dataIndex:l.getData().getRawIndex(C)})}))}}),{payloadBatch:a,snapToValue:i}}function X9e(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function J9e(e,t,n,r){var i=n.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,c=Ow(l),h=e.map[c];h||(h=e.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Q9e(e,t,n){var r=n.axesInfo=[];qe(t,function(i,a){var o=i.axisPointerModel.option,s=e[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function e7e(e,t,n,r){if(YC(t)||!e.list.length){r({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function t7e(e,t,n){var r=n.getZr(),i="axisPointerLastHighlights",a=BU(r)[i]||{},o=BU(r)[i]={};qe(e,function(c,h){var f=c.axisPointerModel.option;f.status==="show"&&c.triggerEmphasis&&qe(f.seriesDataIndices,function(p){var v=p.seriesIndex+" | "+p.dataIndex;o[v]=p})});var s=[],l=[];qe(a,function(c,h){!o[h]&&l.push(c)}),qe(o,function(c,h){!a[h]&&s.push(c)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function n7e(e,t){for(var n=0;n<(e||[]).length;n++){var r=e[n];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}function NU(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function YC(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function zte(e){pte.registerAxisPointerClass("CartesianAxisPointer",$9e),e.registerComponentModel(H9e),e.registerComponentView(q9e),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var n=t.axisPointer.link;n&&!Vn(n)&&(t.axisPointer.link=[n])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,n){t.getComponent("axisPointer").coordSysAxesInfo=IUe(t,n)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Z9e)}function k4(e){Io(gte),Io(zte)}var r7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r,i){var a=N0(n);e.prototype.init.apply(this,arguments),$U(n,a)},t.prototype.mergeOption=function(n){e.prototype.mergeOption.apply(this,arguments),$U(this.option,n)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(xi);function $U(e,t){var n=e.cellSize,r;Vn(n)?r=n:r=e.cellSize=[n,n],r.length===1&&(r[1]=r[0]);var i=Yn([0,1],function(a){return o6e(t,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});dm(e,t,{type:"box",ignoreSize:i})}var i7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=this.group;a.removeAll();var o=n.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(n,s,a),this._renderLines(n,s,l,a),this._renderYearText(n,s,l,a),this._renderMonthText(n,c,l,a),this._renderWeekText(n,c,s,l,a)},t.prototype._renderDayRect=function(n,r,i){for(var a=n.coordinateSystem,o=n.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=r.start.time;c<=r.end.time;c=a.getNextNDay(c,1).time){var h=a.dataToRect([c],!1).tl,f=new Pi({shape:{x:h[0],y:h[1],width:s,height:l},cursor:"default",style:o});i.add(f)}},t.prototype._renderLines=function(n,r,i,a){var o=this,s=n.coordinateSystem,l=n.getModel(["splitLine","lineStyle"]).getLineStyle(),c=n.get(["splitLine","show"]),h=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=r.start,p=0;f.time<=r.end.time;p++){_(f.formatedDate),p===0&&(f=s.getDateInfo(r.start.y+"-"+r.start.m));var v=f.date;v.setMonth(v.getMonth()+1),f=s.getDateInfo(v)}_(s.getNextNDay(r.end.time,1).formatedDate);function _(b){o._firstDayOfMonth.push(s.getDateInfo(b)),o._firstDayPoints.push(s.dataToRect([b],!1).tl);var C=o._getLinePointsOfOneWeek(n,b,i);o._tlpoints.push(C[0]),o._blpoints.push(C[C.length-1]),c&&o._drawSplitline(C,l,a)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,h,i),l,a),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,h,i),l,a)},t.prototype._getEdgesPoints=function(n,r,i){var a=[n[0].slice(),n[n.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},t.prototype._drawSplitline=function(n,r,i){var a=new Yf({z2:20,shape:{points:n},style:r});i.add(a)},t.prototype._getLinePointsOfOneWeek=function(n,r,i){for(var a=n.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var c=a.getNextNDay(o.time,l),h=a.dataToRect([c.time],!1);s[2*c.day]=h.tl,s[2*c.day+1]=h[i==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(n,r){return Qn(n)&&n?r6e(n,r):Mr(n)?n(r):r.nameMap},t.prototype._yearTextPositionControl=function(n,r,i,a,o){var s=r[0],l=r[1],c=["center","bottom"];a==="bottom"?(l+=o,c=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,c=["center","top"]):l-=o;var h=0;return(a==="left"||a==="right")&&(h=Math.PI/2),{rotation:h,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},t.prototype._renderYearText=function(n,r,i,a){var o=n.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(c[0][0]+c[1][0])/2,f=(c[0][1]+c[1][1])/2,p=i==="horizontal"?0:1,v={top:[h,c[p][1]],bottom:[h,c[1-p][1]],left:[c[1-p][0],f],right:[c[p][0],f]},_=r.start.y;+r.end.y>+r.start.y&&(_=_+"-"+r.end.y);var b=o.get("formatter"),C={start:r.start.y,end:r.end.y,nameMap:_},T=this._formatterLabel(b,C),E=new Mi({z2:30,style:Ga(o,{text:T}),silent:o.get("silent")});E.attr(this._yearTextPositionControl(E,v[l],i,l,s)),a.add(E)}},t.prototype._monthTextPositionControl=function(n,r,i,a,o){var s="left",l="top",c=n[0],h=n[1];return i==="horizontal"?(h=h+o,r&&(s="center"),a==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),a==="start"&&(s="right")),{x:c,y:h,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(n,r,i,a){var o=n.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),h=o.get("align"),f=[this._tlpoints,this._blpoints];(!s||Qn(s))&&(s&&(r=FR(s)||r),s=r.get(["time","monthAbbr"])||[]);var p=c==="start"?0:1,v=i==="horizontal"?0:1;l=c==="start"?-l:l;for(var _=h==="center",b=o.get("silent"),C=0;C<f[p].length-1;C++){var T=f[p][C].slice(),E=this._firstDayOfMonth[C];if(_){var A=this._firstDayPoints[C];T[v]=(A[v]+f[0][C+1][v])/2}var I=o.get("formatter"),O=s[+E.m-1],B={yyyy:E.y,yy:(E.y+"").slice(2),MM:E.m,M:+E.m,nameMap:O},N=this._formatterLabel(I,B),H=new Mi({z2:30,style:Pn(Ga(o,{text:N}),this._monthTextPositionControl(T,_,i,c,l)),silent:b});a.add(H)}}},t.prototype._weekTextPositionControl=function(n,r,i,a,o){var s="center",l="middle",c=n[0],h=n[1],f=i==="start";return r==="horizontal"?(c=c+a+(f?1:-1)*o[0]/2,s=f?"right":"left"):(h=h+a+(f?1:-1)*o[1]/2,l=f?"bottom":"top"),{x:c,y:h,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(n,r,i,a,o){var s=n.getModel("dayLabel");if(s.get("show")){var l=n.coordinateSystem,c=s.get("position"),h=s.get("nameMap"),f=s.get("margin"),p=l.getFirstDayOfWeek();if(!h||Qn(h)){h&&(r=FR(h)||r);var v=r.get(["time","dayOfWeekShort"]);h=v||Yn(r.get(["time","dayOfWeekAbbr"]),function(B){return B[0]})}var _=l.getNextNDay(i.end.time,7-i.lweek).time,b=[l.getCellWidth(),l.getCellHeight()];f=Fr(f,Math.min(b[1],b[0])),c==="start"&&(_=l.getNextNDay(i.start.time,-(7+i.fweek)).time,f=-f);for(var C=s.get("silent"),T=0;T<7;T++){var E=l.getNextNDay(_,T),A=l.dataToRect([E.time],!1).center,I=T;I=Math.abs((T+p)%7);var O=new Mi({z2:30,style:Pn(Ga(s,{text:h[I]}),this._weekTextPositionControl(A,a,c,f,b)),silent:C});o.add(O)}}},t.type="calendar",t}(Cs),nL=864e5,a7e=function(){function e(t,n,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=td(t);var n=t.getFullYear(),r=t.getMonth()+1,i=r<10?"0"+r:""+r,a=t.getDate(),o=a<10?"0"+a:""+a,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:n+"",m:i,d:o,day:s,time:t.getTime(),formatedDate:n+"-"+i+"-"+o,date:t}},e.prototype.getNextNDay=function(t,n){return n=n||0,n===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+n),this.getDateInfo(t))},e.prototype.update=function(t,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];qe([0,1],function(f){h(a,f)&&(o[i[f]]=a[f]*s[f])});var l={width:n.getWidth(),height:n.getHeight()},c=this._rect=tc(o,l);qe([0,1],function(f){h(a,f)||(a[f]=c[i[f]]/s[f])});function h(f,p){return f[p]!=null&&f[p]!=="auto"}this._sw=a[0],this._sh=a[1]},e.prototype.dataToPoint=function(t,n){Vn(t)&&(t=t[0]),n==null&&(n=!0);var r=this.getDateInfo(t),i=this._rangeInfo,a=r.formatedDate;if(n&&!(r.time>=i.start.time&&r.time<i.end.time+nL))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var n=this.pointToDate(t);return n&&n.time},e.prototype.dataToRect=function(t,n){var r=this.dataToPoint(t,n);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var n=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,n-1,i):this._getDateByWeeksAndDay(n,r-1,i)},e.prototype.convertToPixel=function(t,n,r){var i=VU(n);return i===this?i.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,n,r){var i=VU(n);return i===this?i.pointToData(r):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),n;if(Vn(t)&&t.length===1&&(t=t[0]),Vn(t))n=t;else{var r=t.toString();if(/^\d{4}$/.test(r)&&(n=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);n=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(n=[r,r])}if(!n)return t;var s=this._getRangeInfo(n);return s.start.time>s.end.time&&n.reverse(),n},e.prototype._getRangeInfo=function(t){var n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],r;n[0].time>n[1].time&&(r=!0,n.reverse());var i=Math.floor(n[1].time/nL)-Math.floor(n[0].time/nL)+1,a=new Date(n[0].time),o=a.getDate(),s=n[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-n[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-n[1].time)*c>0;)i-=c,a.setDate(l-c);var h=Math.floor((i+n[0].day+6)/7),f=r?-h+1:h-1;return r&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:h,nthWeek:f,fweek:n[0].day,lweek:n[1].day}},e.prototype._getDateByWeeksAndDay=function(t,n,r){var i=this._getRangeInfo(r);if(t>i.weeks||t===0&&n<i.fweek||t===i.weeks&&n>i.lweek)return null;var a=(t-1)*7-i.fweek+n,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},e.create=function(t,n){var r=[];return t.eachComponent("calendar",function(i){var a=new e(i);r.push(a),i.coordinateSystem=a}),t.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function VU(e){var t=e.calendarModel,n=e.seriesModel,r=t?t.coordinateSystem:n?n.coordinateSystem:null;return r}function o7e(e){e.registerComponentModel(r7e),e.registerComponentView(i7e),e.registerCoordinateSystem("calendar",a7e)}var HU=["x","y","radius","angle","single"],s7e=["cartesian2d","polar","singleAxis"];function l7e(e){var t=e.get("coordinateSystem");return pi(s7e,t)>=0}function gf(e){return e+"Axis"}function u7e(e,t){var n=Dr(),r=[],i=Dr();e.eachComponent({mainType:"dataZoom",query:t},function(h){i.get(h.uid)||s(h)});var a;do a=!1,e.eachComponent("dataZoom",o);while(a);function o(h){!i.get(h.uid)&&l(h)&&(s(h),a=!0)}function s(h){i.set(h.uid,!0),r.push(h),c(h)}function l(h){var f=!1;return h.eachTargetAxis(function(p,v){var _=n.get(p);_&&_[v]&&(f=!0)}),f}function c(h){h.eachTargetAxis(function(f,p){(n.get(f)||n.set(f,[]))[p]=!0})}return r}function Bte(e){var t=e.ecModel,n={infoList:[],infoMap:Dr()};return e.eachTargetAxis(function(r,i){var a=t.getComponent(gf(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=n.infoMap.get(s);l||(l={model:o,axisModels:[]},n.infoList.push(l),n.infoMap.set(s,l)),l.axisModels.push(a)}}}),n}var rL=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Fw=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return t.prototype.init=function(n,r,i){var a=jU(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},t.prototype.mergeOption=function(n){var r=jU(n);Kr(this.option,n,!0),Kr(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;qe([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=Dr(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return qe(HU,function(i){var a=this.getReferringComponents(gf(i),CFe);if(a.specified){r=!0;var o=new rL;qe(a.models,function(s){o.add(s.componentIndex)}),n.set(i,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===r}});l(s,"single")}function l(c,h){var f=c[0];if(f){var p=new rL;if(p.add(f.componentIndex),n.set(h,p),a=!1,h==="x"||h==="y"){var v=f.getReferringComponents("grid",gs).models[0];v&&qe(c,function(_){f.componentIndex!==_.componentIndex&&v===_.getReferringComponents("grid",gs).models[0]&&p.add(_.componentIndex)})}}}a&&qe(HU,function(c){if(a){var h=i.findComponents({mainType:gf(c),filter:function(p){return p.get("type",!0)==="category"}});if(h[0]){var f=new rL;f.add(h[0].componentIndex),n.set(c,f),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");qe([["start","startValue"],["end","endValue"]],function(a,o){var s=n[a[0]]!=null,l=n[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(gf(r),i))},this),n},t.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){qe(i.indexList,function(o){n.call(r,a,o)})})},t.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(gf(n),r)},t.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;qe([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},t.prototype.setCalculatedRange=function(n){var r=this.option;qe(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},t.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},t.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(xi);function jU(e){var t={};return qe(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var c7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(Fw),E4=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},t.type="dataZoom",t}(Cs),d7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(E4),ry=qe,UU=Sv,h7e=function(){function e(t,n,r,i){this._dimName=t,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(n){if(l7e(n)){var r=gf(this._dimName),i=n.getReferringComponents(r,gs).models[0];i&&this._axisIndex===i.componentIndex&&t.push(n)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return wr(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;ry(["start","end"],function(p,v){var _=t[p],b=t[p+"Value"];a[v]==="percent"?(_==null&&(_=o[v]),b=i.parse(Ai(_,o,n))):(c=!0,b=b==null?n[v]:i.parse(b),_=Ai(b,n,o)),l[v]=b==null||isNaN(b)?n[v]:b,s[v]=_==null||isNaN(_)?o[v]:_}),UU(l),UU(s);var h=this._minMaxSpan;c?f(l,s,n,o,!1):f(s,l,o,n,!0);function f(p,v,_,b,C){var T=C?"Span":"ValueSpan";j0(0,p,_,"all",h["min"+T],h["max"+T]);for(var E=0;E<2;E++)v[E]=Ai(p[E],_,b,!0),C&&(v[E]=i.parse(v[E]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=f7e(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,n){if(t!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;ry(i,function(l){var c=l.getData(),h=c.mapDimensionsAll(r);if(h.length){if(a==="weakFilter"){var f=c.getStore(),p=Yn(h,function(v){return c.getDimensionIndex(v)},c);c.filterSelf(function(v){for(var _,b,C,T=0;T<h.length;T++){var E=f.get(p[T],v),A=!isNaN(E),I=E<o[0],O=E>o[1];if(A&&!I&&!O)return!0;A&&(C=!0),I&&(_=!0),O&&(b=!0)}return C&&_&&b})}else ry(h,function(v){if(a==="empty")l.setData(c=c.map(v,function(b){return s(b)?b:NaN}));else{var _={};_[v]=o,c.selectRange(_)}});ry(h,function(v){c.setApproximateExtent(o,v)})}});function s(l){return l>=o[0]&&l<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;ry(["min","max"],function(i){var a=n.get(i+"Span"),o=n.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Ai(r[0]+o,r,[0,100],!0):a!=null&&(o=Ai(a,[0,100],r,!0)-r[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=uJ(r,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},e}();function f7e(e,t,n){var r=[1/0,-1/0];ry(n,function(o){ZHe(r,o.getData(),t)});var i=e.getAxisModel(),a=zee(i.axis.scale,i,r).calculate();return[a.min,a.max]}var p7e={getTargetSeries:function(e){function t(i){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=e.getComponent(gf(o),s);i(o,s,l,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var n=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new h7e(i,a,s,e),n.push(o.__dzAxisProxy))});var r=Dr();return qe(n,function(i){qe(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,t)})}),e.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function v7e(e){e.registerAction("dataZoom",function(t,n){var r=u7e(n,t);qe(r,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var WU=!1;function A4(e){WU||(WU=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,p7e),v7e(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function m7e(e){e.registerComponentModel(c7e),e.registerComponentView(d7e),A4(e)}var Du=function(){function e(){}return e}(),Fte={};function jb(e,t){Fte[e]=t}function Nte(e){return Fte[e]}var g7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;qe(this.option.feature,function(r,i){var a=Nte(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),Kr(r,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(xi);function y7e(e,t,n){var r=t.getBoxLayoutParams(),i=t.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=tc(r,a,i);$v(t.get("orient"),e,t.get("itemGap"),o.width,o.height),pQ(e,r,a,i)}function $te(e,t){var n=kx(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new Pi({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),e}var _7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r,i,a){var o=this.group;if(o.removeAll(),!n.get("show"))return;var s=+n.get("itemSize"),l=n.get("orient")==="vertical",c=n.get("feature")||{},h=this._features||(this._features={}),f=[];qe(c,function(_,b){f.push(b)}),new o4(this._featureNames||[],f).add(p).update(p).remove(bi(p,null)).execute(),this._featureNames=f;function p(_,b){var C=f[_],T=f[b],E=c[C],A=new xa(E,n,n.ecModel),I;if(a&&a.newTitle!=null&&a.featureName===C&&(E.title=a.newTitle),C&&!T){if(b7e(C))I={onclick:A.option.onclick,featureName:C};else{var O=Nte(C);if(!O)return;I=new O}h[C]=I}else if(I=h[T],!I)return;I.uid=Mx("toolbox-feature"),I.model=A,I.ecModel=r,I.api=i;var B=I instanceof Du;if(!C&&T){B&&I.dispose&&I.dispose(r,i);return}if(!A.get("show")||B&&I.unusable){B&&I.remove&&I.remove(r,i);return}v(A,I,C),A.setIconStatus=function(N,H){var j=this.option,W=this.iconPaths;j.iconStatus=j.iconStatus||{},j.iconStatus[N]=H,W[N]&&(H==="emphasis"?u0:c0)(W[N])},I instanceof Du&&I.render&&I.render(A,r,i,a)}function v(_,b,C){var T=_.getModel("iconStyle"),E=_.getModel(["emphasis","iconStyle"]),A=b instanceof Du&&b.getIcons?b.getIcons():_.get("icon"),I=_.get("title")||{},O,B;Qn(A)?(O={},O[C]=A):O=A,Qn(I)?(B={},B[C]=I):B=I;var N=_.iconPaths={};qe(O,function(H,j){var W=Dk(H,{},{x:-s/2,y:-s/2,width:s,height:s});W.setStyle(T.getItemStyle());var U=W.ensureState("emphasis");U.style=E.getItemStyle();var Y=new Mi({style:{text:B[j],align:E.get("textAlign"),borderRadius:E.get("textBorderRadius"),padding:E.get("textPadding"),fill:null,font:XJ({fontStyle:E.get("textFontStyle"),fontFamily:E.get("textFontFamily"),fontSize:E.get("textFontSize"),fontWeight:E.get("textFontWeight")},r)},ignore:!0});W.setTextContent(Y),Sx({el:W,componentModel:n,itemName:j,formatterParamsExtra:{title:B[j]}}),W.__title=B[j],W.on("mouseover",function(){var ie=E.getItemStyle(),ue=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";Y.setStyle({fill:E.get("textFill")||ie.fill||ie.stroke||"#000",backgroundColor:E.get("textBackgroundColor")}),W.setTextConfig({position:E.get("textPosition")||ue}),Y.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){_.get(["iconStatus",j])!=="emphasis"&&i.leaveEmphasis(this),Y.hide()}),(_.get(["iconStatus",j])==="emphasis"?u0:c0)(W),o.add(W),W.on("click",ur(b.onclick,b,r,i,j)),N[j]=W})}y7e(o,n,i),o.add($te(o.getBoundingRect(),n)),l||o.eachChild(function(_){var b=_.__title,C=_.ensureState("emphasis"),T=C.textConfig||(C.textConfig={}),E=_.getTextContent(),A=E&&E.ensureState("emphasis");if(A&&!Mr(A)&&b){var I=A.style||(A.style={}),O=xk(b,Mi.makeFont(I)),B=_.x+o.x,N=_.y+o.y+s,H=!1;N+O.height>i.getHeight()&&(T.position="top",H=!0);var j=H?-5-O.height:s+10;B+O.width/2>i.getWidth()?(T.position=["100%",j],I.align="right"):B-O.width/2<0&&(T.position=[0,j],I.align="left")}})},t.prototype.updateView=function(n,r,i,a){qe(this._features,function(o){o instanceof Du&&o.updateView&&o.updateView(o.model,r,i,a)})},t.prototype.remove=function(n,r){qe(this._features,function(i){i instanceof Du&&i.remove&&i.remove(n,r)}),this.group.removeAll()},t.prototype.dispose=function(n,r){qe(this._features,function(i){i instanceof Du&&i.dispose&&i.dispose(n,r)})},t.type="toolbox",t}(Cs);function b7e(e){return e.indexOf("my")===0}var w7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),c=Ir.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var h=document.createElement("a");h.download=a+"."+s,h.target="_blank",h.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var p=l.split(","),v=p[0].indexOf("base64")>-1,_=o?decodeURIComponent(p[1]):p[1];v&&(_=window.atob(_));var b=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var C=_.length,T=new Uint8Array(C);C--;)T[C]=_.charCodeAt(C);var E=new Blob([T]);window.navigator.msSaveOrOpenBlob(E,b)}else{var A=document.createElement("iframe");document.body.appendChild(A);var I=A.contentWindow,O=I.document;O.open("image/svg+xml","replace"),O.write(_),O.close(),I.focus(),O.execCommand("SaveAs",!0,b),document.body.removeChild(A)}}else{var B=i.get("lang"),N='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(B&&B[0]||"")+'" /></body>',H=window.open();H.document.write(N),H.document.title=a}},t.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(Du),GU="__ec_magicType_stack__",x7e=[["line","bar"],["stack"]],S7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return qe(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},t.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(n,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(KU[i]){var s={series:[]},l=function(f){var p=f.subType,v=f.id,_=KU[i](p,v,f,a);_&&(hi(_,f.option),s.series.push(_));var b=f.coordinateSystem;if(b&&b.type==="cartesian2d"&&(i==="line"||i==="bar")){var C=b.getAxesByScale("ordinal")[0];if(C){var T=C.dim,E=T+"Axis",A=f.getReferringComponents(E,gs).models[0],I=A.componentIndex;s[E]=s[E]||[];for(var O=0;O<=I;O++)s[E][I]=s[E][I]||{};s[E][I].boundaryGap=i==="bar"}}};qe(x7e,function(f){pi(f,i)>=0&&qe(f,function(p){a.setIconStatus(p,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,h=i;i==="stack"&&(c=Kr({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(h="tiled")),r.dispatchAction({type:"changeMagicType",currentType:h,newOption:s,newTitle:c,featureName:"magicType"})}},t}(Du),KU={line:function(e,t,n,r){if(e==="bar")return Kr({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,n,r){if(e==="line")return Kr({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,n,r){var i=n.get("stack")===GU;if(e==="line"||e==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),Kr({id:t,stack:i?"":GU},r.get(["option","stack"])||{},!0)}};cd({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var Yk=new Array(60).join("-"),v0="	";function C7e(e){var t={},n=[],r=[];return e.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:t,other:n,meta:r}}function T7e(e){var t=[];return qe(e,function(n,r){var i=n.categoryAxis,a=n.valueAxis,o=a.dim,s=[" "].concat(Yn(n.series,function(v){return v.name})),l=[i.model.getCategories()];qe(n.series,function(v){var _=v.getRawData();l.push(v.getRawData().mapArray(_.mapDimension(o),function(b){return b}))});for(var c=[s.join(v0)],h=0;h<l[0].length;h++){for(var f=[],p=0;p<l.length;p++)f.push(l[p][h]);c.push(f.join(v0))}t.push(c.join(`
`))}),t.join(`

`+Yk+`

`)}function M7e(e){return Yn(e,function(t){var n=t.getRawData(),r=[t.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=n.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+v0:"")+i.join(v0))}),r.join(`
`)}).join(`

`+Yk+`

`)}function k7e(e){var t=C7e(e);return{value:fo([T7e(t.seriesGroupByCategoryAxis),M7e(t.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+Yk+`

`),meta:t.meta}}function gM(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function E7e(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(v0)>=0)return!0}var mO=new RegExp("["+v0+"]+","g");function A7e(e){for(var t=e.split(/\n+/g),n=gM(t.shift()).split(mO),r=[],i=Yn(n,function(l){return{name:l,data:[]}}),a=0;a<t.length;a++){var o=gM(t[a]).split(mO);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function P7e(e){for(var t=e.split(/\n+/g),n=gM(t.shift()),r=[],i=0;i<t.length;i++){var a=gM(t[i]);if(a){var o=a.split(mO),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var h=0;h<o.length;h++)l.push(+o[h]);l.length===1&&(c?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}function I7e(e,t){var n=e.split(new RegExp(`
*`+Yk+`
*`,"g")),r={series:[]};return qe(n,function(i,a){if(E7e(i)){var o=A7e(i),s=t[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=P7e(i);r.series.push(o)}}),r}var L7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),h=document.createElement("textarea");c.style.cssText="overflow:auto";var f=a.get("optionToContent"),p=a.get("contentToOption"),v=k7e(n);if(Mr(f)){var _=f(r.getOption());Qn(_)?c.innerHTML=_:s0(_)&&c.appendChild(_)}else{h.readOnly=a.get("readOnly");var b=h.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=a.get("textColor"),b.borderColor=a.get("textareaBorderColor"),b.backgroundColor=a.get("textareaColor"),h.value=v.value,c.appendChild(h)}var C=v.meta,T=document.createElement("div");T.style.cssText="position:absolute;bottom:5px;left:0;right:0";var E="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",A=document.createElement("div"),I=document.createElement("div");E+=";background-color:"+a.get("buttonColor"),E+=";color:"+a.get("buttonTextColor");var O=this;function B(){i.removeChild(o),O._dom=null}pR(A,"click",B),pR(I,"click",function(){if(p==null&&f!=null||p!=null&&f==null){B();return}var N;try{Mr(p)?N=p(c,r.getOption()):N=I7e(h.value,C)}catch(H){throw B(),new Error("Data view format error "+H)}N&&r.dispatchAction({type:"changeDataView",newOption:N}),B()}),A.innerHTML=l[1],I.innerHTML=l[2],I.style.cssText=A.style.cssText=E,!a.get("readOnly")&&T.appendChild(I),T.appendChild(A),o.appendChild(s),o.appendChild(c),o.appendChild(T),c.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},t.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(n,r){this.remove(n,r)},t.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(Du);function D7e(e,t){return Yn(e,function(n,r){var i=t&&t[r];if(fr(i)&&!Vn(i)){var a=fr(n)&&!Vn(n);a||(n={value:n});var o=i.name!=null&&n.name==null;return n=hi(n,i),o&&delete n.name,n}else return n})}cd({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];qe(e.newOption.series,function(r){var i=t.getSeriesByName(r.name)[0];if(!i)n.push(Pn({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:D7e(r.data,a)})}}),t.mergeOption(hi({series:n},e.newOption))});var Vte=qe,Hte=Sa();function R7e(e,t){var n=P4(e);Vte(t,function(r,i){for(var a=n.length-1;a>=0;a--){var o=n[a];if(o[i])break}if(a<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();n[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),n.push(t)}function O7e(e){var t=P4(e),n=t[t.length-1];t.length>1&&t.pop();var r={};return Vte(n,function(i,a){for(var o=t.length-1;o>=0;o--)if(i=t[o][a],i){r[a]=i;break}}),r}function z7e(e){Hte(e).snapshots=null}function B7e(e){return P4(e).length}function P4(e){var t=Hte(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var F7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){z7e(n),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(Du);cd({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var N7e=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],jte=function(){function e(t,n,r){var i=this;this._targetInfoList=[];var a=qU(n,t);qe($7e,function(o,s){(!r||!r.include||pi(r.include,s)>=0)&&o(a,i._targetInfoList)})}return e.prototype.setOutputRanges=function(t,n){return this.matchOutputRanges(t,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=iL[r.brushType](0,a,i);r.__rangeOffset={offset:JU[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,n,r){qe(t,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&qe(a.coordSyses,function(o){var s=iL[i.brushType](1,o,i.range,!0);r(i,s.values,o,n)})},this)},e.prototype.setInputRanges=function(t,n){qe(t,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=iL[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?JU[r.brushType](a.values,o.offset,V7e(a.xyMinMax,o.xyMinMax)):a.values}},this)},e.prototype.makePanelOpts=function(t,n){return Yn(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:S9e(i),isTargetByCursor:T9e(i,t,r.coordSysModel),getLinearBrushOtherExtent:C9e(i)}})},e.prototype.controlSeries=function(t,n,r){var i=this.findTargetInfo(t,r);return i===!0||i&&pi(i.coordSyses,n.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,n){for(var r=this._targetInfoList,i=qU(n,t),a=0;a<r.length;a++){var o=r[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<ZU.length;l++)if(ZU[l](i,o))return o}return!0},e}();function gO(e){return e[0]>e[1]&&e.reverse(),e}function qU(e,t){return L1(e,t,{includeMainTypes:N7e})}var $7e={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,i=e.gridModels,a=Dr(),o={},s={};!n&&!r&&!i||(qe(n,function(l){var c=l.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),qe(r,function(l){var c=l.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),qe(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var c=l.coordinateSystem,h=[];qe(c.getCartesians(),function(f,p){(pi(n,f.getAxis("x").model)>=0||pi(r,f.getAxis("y").model)>=0)&&h.push(f)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:h[0],coordSyses:h,getPanelRect:YU.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){qe(e.geoModels,function(n){var r=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:YU.geo})})}},ZU=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],YU={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Nv(e)),t}},iL={lineX:bi(XU,0),lineY:bi(XU,1),rect:function(e,t,n,r){var i=e?t.pointToData([n[0][0],n[1][0]],r):t.dataToPoint([n[0][0],n[1][0]],r),a=e?t.pointToData([n[0][1],n[1][1]],r):t.dataToPoint([n[0][1],n[1][1]],r),o=[gO([i[0],a[0]]),gO([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=Yn(n,function(o){var s=e?t.pointToData(o,r):t.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function XU(e,t,n,r){var i=n.getAxis(["x","y"][e]),a=gO(Yn([0,1],function(s){return t?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[e]=a,o[1-e]=[NaN,NaN],{values:a,xyMinMax:o}}var JU={lineX:bi(QU,0),lineY:bi(QU,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Yn(e,function(r,i){return[r[0]-n[0]*t[i][0],r[1]-n[1]*t[i][1]]})}};function QU(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function V7e(e,t){var n=e9(e),r=e9(t),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function e9(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var yO=qe,H7e=_Fe("toolbox-dataZoom_"),j7e=function(e){xn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new p9e(i.getZr()),this._brushController.on("brush",ur(this._onBrush,this)).mount()),G7e(n,r,this,a,i),W7e(n,r)},t.prototype.onclick=function(n,r,i){U7e[i].call(this)},t.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new jte(I4(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,h,f){if(f.type==="cartesian2d"){var p=c.brushType;p==="rect"?(s("x",f,h[0]),s("y",f,h[1])):s({lineX:"x",lineY:"y"}[p],f,h)}}),R7e(a,i),this._dispatchZoomAction(i);function s(c,h,f){var p=h.getAxis(c),v=p.model,_=l(c,v,a),b=_.findRepresentativeAxisProxy(v).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(f=j0(0,f.slice(),p.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),_&&(i[_.id]={dataZoomId:_.id,startValue:f[0],endValue:f[1]})}function l(c,h,f){var p;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(v){var _=v.getAxisModel(c,h.componentIndex);_&&(p=v)}),p}},t.prototype._dispatchZoomAction=function(n){var r=[];yO(n,function(i,a){r.push(wr(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(Du),U7e={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(O7e(this.ecModel))}};function I4(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function W7e(e,t){e.setIconStatus("back",B7e(t)>1?"emphasis":"normal")}function G7e(e,t,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var o=new jte(I4(e),t,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}v6e("dataZoom",function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(!t||t.get(n)==null)return;var r=t.getModel(n),i=[],a=I4(r),o=L1(e,a);yO(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),yO(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,h){var f=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:H7e+c+f};p[h]=f,i.push(p)}return i});function K7e(e){e.registerComponentModel(g7e),e.registerComponentView(_7e),jb("saveAsImage",w7e),jb("magicType",S7e),jb("dataView",L7e),jb("dataZoom",j7e),jb("restore",F7e),Io(m7e)}var q7e=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(xi);function Ute(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Wte(e){if(Ir.domSupported){for(var t=document.documentElement.style,n=0,r=e.length;n<r;n++)if(e[n]in t)return e[n]}}var Gte=Wte(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Z7e=Wte(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Kte(e,t){if(!e)return t;t=hQ(t,!0);var n=e.indexOf(t);return e=n===-1?t:"-"+e.slice(0,n)+"-"+t,e.toLowerCase()}function Y7e(e,t){var n=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return n?n[t]:null}var X7e=Kte(Z7e,"transition"),L4=Kte(Gte,"transform"),J7e="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ir.transform3dSupported?"will-change:transform;":"");function Q7e(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function eWe(e,t,n){if(!Qn(n)||n==="inside")return"";var r=e.get("backgroundColor"),i=e.get("borderWidth");t=cm(t);var a=Q7e(n),o=Math.max(Math.round(i)*1.5,6),s="",l=L4+":",c;pi(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=a==="top"?225:45)+"deg)");var h=c*Math.PI/180,f=o+i,p=f*Math.abs(Math.cos(h))+f*Math.abs(Math.sin(h)),v=Math.round(((p-Math.SQRT2*i)/2+Math.SQRT2*i-(p-f)/2)*100)/100;s+=";"+a+":-"+v+"px";var _=t+" solid "+i+"px;",b=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+_,"border-right:"+_,"background-color:"+r+";"];return'<div style="'+b.join("")+'"></div>'}function tWe(e,t){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+n,i="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+n,i+=Ir.transformSupported?","+L4+r:",left"+r+",top"+r),X7e+":"+i}function t9(e,t,n){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Ir.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Ir.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+L4+":"+o+";":[["top",0],["left",0],[Gte,o]]}function nWe(e){var t=[],n=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont());var i=Xr(e.get("lineHeight"),Math.round(n*3/2));n&&t.push("line-height:"+i+"px");var a=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return a&&o&&t.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),qe(["decoration","align"],function(c){var h=e.get(c);h&&t.push("text-"+c+":"+h)}),t.join(";")}function rWe(e,t,n){var r=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),c=e.get("shadowOffsetY"),h=e.getModel("textStyle"),f=NQ(e,"html"),p=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+p),t&&i&&r.push(tWe(i,n)),a&&r.push("background-color:"+a),qe(["width","color","radius"],function(v){var _="border-"+v,b=hQ(_),C=e.get(b);C!=null&&r.push(_+":"+C+(v==="color"?"":"px"))}),r.push(nWe(h)),f!=null&&r.push("padding:"+kx(f).join("px ")+"px"),r.join(";")+";"}function n9(e,t,n,r,i){var a=t&&t.painter;if(n){var o=a&&a.getViewportRoot();o&&Y4e(e,o,n,r,i)}else{e[0]=r,e[1]=i;var s=a&&a.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var iWe=function(){function e(t,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Ir.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=t.getZr(),a=n.appendTo,o=a&&(Qn(a)?document.querySelector(a):s0(a)?a:Mr(a)&&a(t.getDom()));n9(this._styleCoord,i,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(r),this._api=t,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=i.handler,h=i.painter.getViewportRoot();Ol(h,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var n=this._api.getDom(),r=Y7e(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},e.prototype.show=function(t,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=J7e+rWe(t,!this._firstShow,this._longHide)+t9(a[0],a[1],!0)+("border-color:"+cm(n)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,n,r,i,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(Qn(a)&&r.get("trigger")==="item"&&!Ute(r)&&(s=eWe(r,i,a)),Qn(t))o.innerHTML=t+s;else if(t){o.innerHTML="",Vn(t)||(t=[t]);for(var l=0;l<t.length;l++)s0(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},e.prototype.moveTo=function(t,n){if(this.el){var r=this._styleCoord;if(n9(r,this._zr,this._container,t,n),r[0]!=null&&r[1]!=null){var i=this.el.style,a=t9(r[0],r[1]);qe(a,function(o){i[o[0]]=o[1]})}}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},e.prototype.hide=function(){var t=this,n=this.el.style;n.visibility="hidden",n.opacity="0",Ir.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ur(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),aWe=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),i9(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var n=t.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,n,r,i,a){var o=this;fr(t)&&Bs(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Mi({style:{rich:n.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:NQ(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),qe(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),qe(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,n=this.el.getBoundingRect(),r=r9(t.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},e.prototype.moveTo=function(t,n){var r=this.el;if(r){var i=this._styleCoord;i9(i,this._zr,t,n),t=i[0],n=i[1];var a=r.style,o=Jh(a.borderWidth||0),s=r9(a);r.x=t+o+s.left,r.y=n+o+s.top,r.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ur(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function Jh(e){return Math.max(0,e)}function r9(e){var t=Jh(e.shadowBlur||0),n=Jh(e.shadowOffsetX||0),r=Jh(e.shadowOffsetY||0);return{left:Jh(t-n),right:Jh(t+n),top:Jh(t-r),bottom:Jh(t+r)}}function i9(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var oWe=new Pi({shape:{x:-1,y:-1,width:2,height:2}}),sWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){if(!(Ir.node||!r.getDom())){var i=n.getComponent("tooltip"),a=this._renderMode=MFe(i.get("renderMode"));this._tooltipContent=a==="richText"?new aWe(r):new iWe(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},t.prototype.render=function(n,r,i){if(!(Ir.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(n),a.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?jk(this,"_updatePosition",50,"fixRate"):sM(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");Rte("itemTooltip",this._api,ur(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,a=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(n,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(n,r,i,a){if(!(a.from===this.uid||Ir.node||!i.getDom())){var o=a9(a,i);this._ticket="";var s=a.dataByCoordSys,l=dWe(a,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var h=oWe;h.x=a.x,h.y=a.y,h.update(),yi(h).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:h},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,a))return;var f=Ote(a,r),p=f.point[0],v=f.point[1];p!=null&&v!=null&&this._tryShow({offsetX:p,offsetY:v,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(n,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(a9(a,i))},t.prototype._manuallyAxisShowTip=function(n,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var h=c.getData(),f=Ub([h.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(n,r){var i=n.target,a=this._tooltipModel;if(a){this._lastX=n.offsetX,this._lastY=n.offsetY;var o=n.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,n);else if(i){var s=yi(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;my(i,function(h){if(yi(h).dataIndex!=null)return l=h,!0;if(yi(h).tooltipConfig!=null)return c=h,!0},!0),l?this._showSeriesItemTooltip(n,l,r):c?this._showComponentItemTooltip(n,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=ur(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},t.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Ub([r.tooltipOption],a),l=this._renderMode,c=[],h=Iw("section",{blocks:[],noHeader:!0}),f=[],p=new AI;qe(n,function(E){qe(E.dataByAxis,function(A){var I=i.getComponent(A.axisDim+"Axis",A.axisIndex),O=A.value;if(!(!I||O==null)){var B=Lte(O,I.axis,i,A.seriesDataIndices,A.valueLabelOpt),N=Iw("section",{header:B,noHeader:!Hc(B),sortBlocks:!0,blocks:[]});h.blocks.push(N),qe(A.seriesDataIndices,function(H){var j=i.getSeriesByIndex(H.seriesIndex),W=H.dataIndexInside,U=j.getDataParams(W);if(!(U.dataIndex<0)){U.axisDim=A.axisDim,U.axisIndex=A.axisIndex,U.axisType=A.axisType,U.axisId=A.axisId,U.axisValue=d4(I.axis,{value:O}),U.axisValueLabel=B,U.marker=p.makeTooltipMarker("item",cm(U.color),l);var Y=ZH(j.formatTooltip(W,!0,null)),ie=Y.frag;if(ie){var ue=Ub([j],a).get("valueFormatter");N.blocks.push(ue?Pn({valueFormatter:ue},ie):ie)}Y.text&&f.push(Y.text),c.push(U)}})}})}),h.blocks.reverse(),f.reverse();var v=r.position,_=s.get("order"),b=ej(h,p,l,_,i.get("useUTC"),s.get("textStyle"));b&&f.unshift(b);var C=l==="richText"?`

`:"<br/>",T=f.join(C);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,c)?this._updatePosition(s,v,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,T,c,Math.random()+"",o[0],o[1],v,null,p)})},t.prototype._showSeriesItemTooltip=function(n,r,i){var a=this._ecModel,o=yi(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),c=o.dataModel||l,h=o.dataIndex,f=o.dataType,p=c.getData(f),v=this._renderMode,_=n.positionDefault,b=Ub([p.getItemModel(h),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),C=b.get("trigger");if(!(C!=null&&C!=="item")){var T=c.getDataParams(h,f),E=new AI;T.marker=E.makeTooltipMarker("item",cm(T.color),v);var A=ZH(c.formatTooltip(h,!1,f)),I=b.get("order"),O=b.get("valueFormatter"),B=A.frag,N=B?ej(O?Pn({valueFormatter:O},B):B,E,v,I,a.get("useUTC"),b.get("textStyle")):A.text,H="item_"+c.name+"_"+h;this._showOrMove(b,function(){this._showTooltipContent(b,N,T,H,n.offsetX,n.offsetY,n.position,n.target,E)}),i({type:"showTip",dataIndexInside:h,dataIndex:p.getRawIndex(h),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(n,r,i){var a=this._renderMode==="html",o=yi(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(Qn(l)){var h=l;l={content:h,formatter:h},c=!0}c&&a&&l.content&&(l=wr(l),l.content=Os(l.content));var f=[l],p=this._ecModel.getComponent(o.componentMainType,o.componentIndex);p&&f.push(p),f.push({formatter:l.content});var v=n.positionDefault,_=Ub(f,this._tooltipModel,v?{position:v}:null),b=_.get("content"),C=Math.random()+"",T=new AI;this._showOrMove(_,function(){var E=wr(_.get("formatterParams")||{});this._showTooltipContent(_,b,E,C,n.offsetX,n.offsetY,n.position,r,T)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(n,r,i,a,o,s,l,c,h){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var p=n.get("formatter");l=l||n.get("position");var v=r,_=this._getNearestPoint([o,s],i,n.get("trigger"),n.get("borderColor")),b=_.color;if(p)if(Qn(p)){var C=n.ecModel.get("useUTC"),T=Vn(i)?i[0]:i,E=T&&T.axisType&&T.axisType.indexOf("time")>=0;v=p,E&&(v=Ok(T.axisValue,v,C)),v=fQ(v,i,!0)}else if(Mr(p)){var A=ur(function(I,O){I===this._ticket&&(f.setContent(O,h,n,b,l),this._updatePosition(n,l,o,s,f,i,c))},this);this._ticket=a,v=p(i,a,A)}else v=p;f.setContent(v,h,n,b,l),f.show(n,b),this._updatePosition(n,l,o,s,f,i,c)}},t.prototype._getNearestPoint=function(n,r,i,a){if(i==="axis"||Vn(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Vn(r))return{color:a||r.color||r.borderColor}},t.prototype._updatePosition=function(n,r,i,a,o,s,l){var c=this._api.getWidth(),h=this._api.getHeight();r=r||n.get("position");var f=o.getSize(),p=n.get("align"),v=n.get("verticalAlign"),_=l&&l.getBoundingRect().clone();if(l&&_.applyTransform(l.transform),Mr(r)&&(r=r([i,a],s,o.el,_,{viewSize:[c,h],contentSize:f.slice()})),Vn(r))i=Fr(r[0],c),a=Fr(r[1],h);else if(fr(r)){var b=r;b.width=f[0],b.height=f[1];var C=tc(b,{width:c,height:h});i=C.x,a=C.y,p=null,v=null}else if(Qn(r)&&l){var T=cWe(r,_,f,n.get("borderWidth"));i=T[0],a=T[1]}else{var T=lWe(i,a,o,c,h,p?null:20,v?null:20);i=T[0],a=T[1]}if(p&&(i-=o9(p)?f[0]/2:p==="right"?f[0]:0),v&&(a-=o9(v)?f[1]/2:v==="bottom"?f[1]:0),Ute(n)){var T=uWe(i,a,o,c,h);i=T[0],a=T[1]}o.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===n.length;return o&&qe(i,function(s,l){var c=s.dataByAxis||[],h=n[l]||{},f=h.dataByAxis||[];o=o&&c.length===f.length,o&&qe(c,function(p,v){var _=f[v]||{},b=p.seriesDataIndices||[],C=_.seriesDataIndices||[];o=o&&p.value===_.value&&p.axisType===_.axisType&&p.axisId===_.axisId&&b.length===C.length,o&&qe(b,function(T,E){var A=C[E];o=o&&T.seriesIndex===A.seriesIndex&&T.dataIndex===A.dataIndex}),a&&qe(p.seriesDataIndices,function(T){var E=T.seriesIndex,A=r[E],I=a[E];A&&I&&I.data!==A.data&&(o=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!o},t.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},t.prototype.dispose=function(n,r){Ir.node||!r.getDom()||(sM(this,"_updatePosition"),this._tooltipContent.dispose(),vO("itemTooltip",r))},t.type="tooltip",t}(Cs);function Ub(e,t,n){var r=t.ecModel,i;n?(i=new xa(n,r,r),i=new xa(t.option,i,r)):i=t;for(var a=e.length-1;a>=0;a--){var o=e[a];o&&(o instanceof xa&&(o=o.get("tooltip",!0)),Qn(o)&&(o={formatter:o}),o&&(i=new xa(o,i,r)))}return i}function a9(e,t){return e.dispatchAction||ur(t.dispatchAction,t)}function lWe(e,t,n,r,i,a,o){var s=n.getSize(),l=s[0],c=s[1];return a!=null&&(e+l+a+2>r?e-=l+a:e+=a),o!=null&&(t+c+o>i?t-=c+o:t+=o),[e,t]}function uWe(e,t,n,r,i){var a=n.getSize(),o=a[0],s=a[1];return e=Math.min(e+o,r)-o,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function cWe(e,t,n,r){var i=n[0],a=n[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=t.width,h=t.height;switch(e){case"inside":s=t.x+c/2-i/2,l=t.y+h/2-a/2;break;case"top":s=t.x+c/2-i/2,l=t.y-a-o;break;case"bottom":s=t.x+c/2-i/2,l=t.y+h+o;break;case"left":s=t.x-i-o,l=t.y+h/2-a/2;break;case"right":s=t.x+c+o,l=t.y+h/2-a/2}return[s,l]}function o9(e){return e==="center"||e==="middle"}function dWe(e,t,n){var r=Mz(e).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=bx(t,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=n.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var h=yi(c).tooltipConfig;if(h&&h.name===e.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function Xk(e){Io(zte),e.registerComponentModel(q7e),e.registerComponentView(sWe),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Jo),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Jo)}var s9=qe;function l9(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function u9(e,t,n){var r={};return s9(t,function(a){var o=r[a]=i();s9(e[a],function(s,l){if(Qo.isValidType(l)){var c={type:l,visual:s};n&&n(c,a),o[l]=new Qo(c),l==="opacity"&&(c=wr(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new Qo(c))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function hWe(e,t,n){var r;qe(n,function(i){t.hasOwnProperty(i)&&l9(t[i])&&(r=!0)}),r&&qe(n,function(i){t.hasOwnProperty(i)&&l9(t[i])?e[i]=wr(t[i]):delete e[i]})}function fWe(e,t,n,r){var i={};return qe(e,function(a){var o=Qo.prepareVisualTypes(t[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(O){return qQ(s,f,O)}function h(O,B){q$e(s,f,O,B)}for(var f,p=s.getStore();(f=o.next())!=null;){var v=s.getRawDataItem(f);if(!(v&&v.visualMap===!1))for(var _=r!=null?p.get(l,f):f,b=n(_),C=t[b],T=i[b],E=0,A=T.length;E<A;E++){var I=T[E];C[I]&&C[I].applyVisual(_,c,h)}}}}}var pWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(xi),vWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var a=this.group,o=n.getModel("textStyle"),s=n.getModel("subtextStyle"),l=n.get("textAlign"),c=Xr(n.get("textBaseline"),n.get("textVerticalAlign")),h=new Mi({style:Ga(o,{text:n.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=h.getBoundingRect(),p=n.get("subtext"),v=new Mi({style:Ga(s,{text:p,fill:s.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=n.get("link"),b=n.get("sublink"),C=n.get("triggerEvent",!0);h.silent=!_&&!C,v.silent=!b&&!C,_&&h.on("click",function(){IH(_,"_"+n.get("target"))}),b&&v.on("click",function(){IH(b,"_"+n.get("subtarget"))}),yi(h).eventData=yi(v).eventData=C?{componentType:"title",componentIndex:n.componentIndex}:null,a.add(h),p&&a.add(v);var T=a.getBoundingRect(),E=n.getBoxLayoutParams();E.width=T.width,E.height=T.height;var A=tc(E,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?A.x+=A.width:l==="center"&&(A.x+=A.width/2)),c||(c=n.get("top")||n.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?A.y+=A.height:c==="middle"&&(A.y+=A.height/2),c=c||"top"),a.x=A.x,a.y=A.y,a.markRedraw();var I={align:l,verticalAlign:c};h.setStyle(I),v.setStyle(I),T=a.getBoundingRect();var O=A.margin,B=n.getItemStyle(["color","opacity"]);B.fill=n.get("backgroundColor");var N=new Pi({shape:{x:T.x-O[3],y:T.y-O[0],width:T.width+O[1]+O[3],height:T.height+O[0]+O[2],r:n.get("borderRadius")},style:B,subPixelOptimize:!0,silent:!0});a.add(N)}},t.type="title",t}(Cs);function Jk(e){e.registerComponentModel(pWe),e.registerComponentView(vWe)}var mWe=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},_O=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},t.prototype.mergeOption=function(n,r){e.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},t.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),Vn(r)&&qe(r,function(a,o){Qn(a)&&(a={type:a}),r[o]=Kr(a,mWe(i,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},t.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var c=l.name;i.push(c);var h;if(l.legendVisualProvider){var f=l.legendVisualProvider,p=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(p)),p.length?r=r.concat(p):h=!0}else h=!0;h&&Tz(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=Dr(),s=Yn(a,function(l){return(Qn(l)||Wi(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new xa(l,this,this.ecModel))},this);this._data=fo(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;qe(a,function(o){r[o.get("name")]=!1})}r[n]=!0},t.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},t.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},t.prototype.allSelect=function(){var n=this._data,r=this.option.selected;qe(n,function(i){r[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;qe(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},t.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&pi(this._availableNames,n)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(xi),Gg=bi,bO=qe,oC=Bi,qte=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return t.prototype.init=function(){this.group.add(this._contentGroup=new oC),this.group.add(this._selectorGroup=new oC),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var o=n.get("align"),s=n.get("orient");(!o||o==="auto")&&(o=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),c=n.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,n,r,i,l,s,c);var h=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},p=n.get("padding"),v=tc(h,f,p),_=this.layoutInner(n,o,v,a,l,c),b=tc(hi({width:_.width,height:_.height},h),f,p);this.group.x=b.x-_.x,this.group.y=b.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$te(_,n))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(n,r,i,a,o,s,l){var c=this.getContentGroup(),h=Dr(),f=r.get("selectedMode"),p=[];i.eachRawSeries(function(v){!v.get("legendHoverLink")&&p.push(v.id)}),bO(r.getData(),function(v,_){var b=v.get("name");if(!this.newlineDisabled&&(b===""||b===`
`)){var C=new oC;C.newline=!0,c.add(C);return}var T=i.getSeriesByName(b)[0];if(!h.get(b))if(T){var E=T.getData(),A=E.getVisual("legendLineStyle")||{},I=E.getVisual("legendIcon"),O=E.getVisual("style"),B=this._createItem(T,b,_,v,r,n,A,O,I,f,a);B.on("click",Gg(c9,b,null,a,p)).on("mouseover",Gg(wO,T.name,null,a,p)).on("mouseout",Gg(xO,T.name,null,a,p)),i.ssr&&B.eachChild(function(N){var H=yi(N);H.seriesIndex=T.seriesIndex,H.dataIndex=_,H.ssrType="legend"}),h.set(b,!0)}else i.eachRawSeries(function(N){if(!h.get(b)&&N.legendVisualProvider){var H=N.legendVisualProvider;if(!H.containName(b))return;var j=H.indexOfName(b),W=H.getItemVisual(j,"style"),U=H.getItemVisual(j,"legendIcon"),Y=eu(W.fill);Y&&Y[3]===0&&(Y[3]=.2,W=Pn(Pn({},W),{fill:Wd(Y,"rgba")}));var ie=this._createItem(N,b,_,v,r,n,{},W,U,f,a);ie.on("click",Gg(c9,null,b,a,p)).on("mouseover",Gg(wO,null,b,a,p)).on("mouseout",Gg(xO,null,b,a,p)),i.ssr&&ie.eachChild(function(ue){var J=yi(ue);J.seriesIndex=N.seriesIndex,J.dataIndex=_,J.ssrType="legend"}),h.set(b,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},t.prototype._createSelector=function(n,r,i,a,o){var s=this.getSelectorGroup();bO(n,function(c){var h=c.type,f=new Mi({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(f);var p=r.getModel("selectorLabel"),v=r.getModel(["emphasis","selectorLabel"]);B0(f,{normal:p,emphasis:v},{defaultText:c.title}),QT(f)})},t.prototype._createItem=function(n,r,i,a,o,s,l,c,h,f,p){var v=n.visualDrawType,_=o.get("itemWidth"),b=o.get("itemHeight"),C=o.isSelected(r),T=a.get("symbolRotate"),E=a.get("symbolKeepAspect"),A=a.get("icon");h=A||h||"roundRect";var I=gWe(h,a,l,c,v,C,p),O=new oC,B=a.getModel("textStyle");if(Mr(n.getLegendIcon)&&(!A||A==="inherit"))O.add(n.getLegendIcon({itemWidth:_,itemHeight:b,icon:h,iconRotate:T,itemStyle:I.itemStyle,lineStyle:I.lineStyle,symbolKeepAspect:E}));else{var N=A==="inherit"&&n.getData().getVisual("symbol")?T==="inherit"?n.getData().getVisual("symbolRotate"):T:0;O.add(yWe({itemWidth:_,itemHeight:b,icon:h,iconRotate:N,itemStyle:I.itemStyle,lineStyle:I.lineStyle,symbolKeepAspect:E}))}var H=s==="left"?_+5:-5,j=s,W=o.get("formatter"),U=r;Qn(W)&&W?U=W.replace("{name}",r??""):Mr(W)&&(U=W(r));var Y=C?B.getTextColor():a.get("inactiveColor");O.add(new Mi({style:Ga(B,{text:U,x:H,y:b/2,fill:Y,align:j,verticalAlign:"middle"},{inheritColor:Y})}));var ie=new Pi({shape:O.getBoundingRect(),style:{fill:"transparent"}}),ue=a.getModel("tooltip");return ue.get("show")&&Sx({el:ie,componentModel:o,itemName:r,itemTooltipOption:ue.option}),O.add(ie),O.eachChild(function(J){J.silent=!0}),ie.silent=!f,this.getContentGroup().add(O),QT(O),O.__legendDataIndex=i,O},t.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();$v(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var h=l.getBoundingRect(),f=[-h.x,-h.y];if(c.markRedraw(),l.markRedraw(),o){$v("horizontal",c,n.get("selectorItemGap",!0));var p=c.getBoundingRect(),v=[-p.x,-p.y],_=n.get("selectorButtonGap",!0),b=n.getOrient().index,C=b===0?"width":"height",T=b===0?"height":"width",E=b===0?"y":"x";s==="end"?v[b]+=h[C]+_:f[b]+=p[C]+_,v[1-b]+=h[T]/2-p[T]/2,c.x=v[0],c.y=v[1],l.x=f[0],l.y=f[1];var A={x:0,y:0};return A[C]=h[C]+_+p[C],A[T]=Math.max(h[T],p[T]),A[E]=Math.min(0,p[E]+v[1-b]),A}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Cs);function gWe(e,t,n,r,i,a,o){function s(C,T){C.lineWidth==="auto"&&(C.lineWidth=T.lineWidth>0?2:0),bO(C,function(E,A){C[A]==="inherit"&&(C[A]=T[A])})}var l=t.getModel("itemStyle"),c=l.getItemStyle(),h=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");c.decal=!f||f==="inherit"?r.decal:ZR(f,o),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[h]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:n).opacity),s(c,r);var p=t.getModel("lineStyle"),v=p.getLineStyle();if(s(v,n),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),v.stroke==="auto"&&(v.stroke=r.fill),!a){var _=t.get("inactiveBorderWidth"),b=c[h];c.lineWidth=_==="auto"?r.lineWidth>0&&b?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),v.stroke=p.get("inactiveColor"),v.lineWidth=p.get("inactiveWidth")}return{itemStyle:c,lineStyle:v}}function yWe(e){var t=e.icon||"roundRect",n=Js(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function c9(e,t,n,r){xO(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:e??t}),wO(e,t,n,r)}function Zte(e){for(var t=e.getZr().storage.getDisplayList(),n,r=0,i=t.length;r<i&&!(n=t[r].states.emphasis);)r++;return n&&n.hoverLayer}function wO(e,t,n,r){Zte(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function xO(e,t,n,r){Zte(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function _We(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var r=0;r<t.length;r++)if(!t[r].isSelected(n.name))return!1;return!0})}function Wb(e,t,n){var r=e==="allSelect"||e==="inverseSelect",i={},a=[];n.eachComponent({mainType:"legend",query:t},function(s){r?s[e]():s[e](t.name),d9(s,i),a.push(s.componentIndex)});var o={};return n.eachComponent("legend",function(s){qe(i,function(l,c){s[l?"select":"unSelect"](c)}),d9(s,o)}),r?{selected:o,legendIndex:a}:{name:t.name,selected:o}}function d9(e,t){var n=t||{};return qe(e.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=e.isSelected(i);om(n,i)?n[i]=n[i]&&a:n[i]=a}}),n}function bWe(e){e.registerAction("legendToggleSelect","legendselectchanged",bi(Wb,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",bi(Wb,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",bi(Wb,"inverseSelect")),e.registerAction("legendSelect","legendselected",bi(Wb,"select")),e.registerAction("legendUnSelect","legendunselected",bi(Wb,"unSelect"))}function Yte(e){e.registerComponentModel(_O),e.registerComponentView(qte),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,_We),e.registerSubTypeDefaulter("legend",function(){return"plain"}),bWe(e)}var wWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},t.prototype.init=function(n,r,i){var a=N0(n);e.prototype.init.call(this,n,r,i),h9(this,n,a)},t.prototype.mergeOption=function(n,r){e.prototype.mergeOption.call(this,n,r),h9(this,this.option,n)},t.type="legend.scroll",t.defaultOption=F0(_O.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(_O);function h9(e,t,n){var r=e.getOrient(),i=[1,1];i[r.index]=0,dm(t,n,{type:"box",ignoreSize:!!i})}var f9=Bi,aL=["width","height"],oL=["x","y"],xWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new f9),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new f9)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(n,r,i,a,o,s,l){var c=this;e.prototype.renderInner.call(this,n,r,i,a,o,s,l);var h=this._controllerGroup,f=r.get("pageIconSize",!0),p=Vn(f)?f:[f,f];_("pagePrev",0);var v=r.getModel("pageTextStyle");h.add(new Mi({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1);function _(b,C){var T=b+"DataIndex",E=Dk(r.get("pageIcons",!0)[r.getOrient().name][C],{onclick:ur(c._pageGo,c,T,r,a)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});E.name=b,h.add(E)}},t.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getSelectorGroup(),c=n.getOrient().index,h=aL[c],f=oL[c],p=aL[1-c],v=oL[1-c];o&&$v("horizontal",l,n.get("selectorItemGap",!0));var _=n.get("selectorButtonGap",!0),b=l.getBoundingRect(),C=[-b.x,-b.y],T=wr(i);o&&(T[h]=i[h]-b[h]-_);var E=this._layoutContentAndController(n,a,T,c,h,p,v,f);if(o){if(s==="end")C[c]+=E[h]+_;else{var A=b[h]+_;C[c]-=A,E[f]-=A}E[h]+=b[h]+_,C[1-c]+=E[v]+E[p]/2-b[p]/2,E[p]=Math.max(E[p],b[p]),E[v]=Math.min(E[v],b[v]+C[1-c]),l.x=C[0],l.y=C[1],l.markRedraw()}return E},t.prototype._layoutContentAndController=function(n,r,i,a,o,s,l,c){var h=this.getContentGroup(),f=this._containerGroup,p=this._controllerGroup;$v(n.get("orient"),h,n.get("itemGap"),a?i.width:null,a?null:i.height),$v("horizontal",p,n.get("pageButtonItemGap",!0));var v=h.getBoundingRect(),_=p.getBoundingRect(),b=this._showController=v[o]>i[o],C=[-v.x,-v.y];r||(C[a]=h[c]);var T=[0,0],E=[-_.x,-_.y],A=Xr(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(b){var I=n.get("pageButtonPosition",!0);I==="end"?E[a]+=i[o]-_[o]:T[a]+=_[o]+A}E[1-a]+=v[s]/2-_[s]/2,h.setPosition(C),f.setPosition(T),p.setPosition(E);var O={x:0,y:0};if(O[o]=b?i[o]:v[o],O[s]=Math.max(v[s],_[s]),O[l]=Math.min(0,_[l]+E[1-a]),f.__rectSize=i[o],b){var B={x:0,y:0};B[o]=Math.max(i[o]-_[o]-A,0),B[s]=O[s],f.setClipPath(new Pi({shape:B})),f.__rectSize=B[o]}else p.eachChild(function(H){H.attr({invisible:!0,silent:!0})});var N=this._getPageInfo(n);return N.pageIndex!=null&&go(h,{x:N.contentPosition[0],y:N.contentPosition[1]},b?n:null),this._updatePageInfoView(n,N),O},t.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},t.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;qe(["pagePrev","pageNext"],function(h){var f=h+"DataIndex",p=r[f]!=null,v=i.childOfName(h);v&&(v.setStyle("fill",p?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),v.cursor=p?"pointer":"default")});var a=i.childOfName("pageText"),o=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;a&&o&&a.setStyle("text",Qn(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},t.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=n.getOrient().index,s=aL[o],l=oL[o],c=this._findTargetItemIndex(r),h=i.children(),f=h[c],p=h.length,v=p?1:0,_={contentPosition:[i.x,i.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return _;var b=I(f);_.contentPosition[o]=-b.s;for(var C=c+1,T=b,E=b,A=null;C<=p;++C)A=I(h[C]),(!A&&E.e>T.s+a||A&&!O(A,T.s))&&(E.i>T.i?T=E:T=A,T&&(_.pageNextDataIndex==null&&(_.pageNextDataIndex=T.i),++_.pageCount)),E=A;for(var C=c-1,T=b,E=b,A=null;C>=-1;--C)A=I(h[C]),(!A||!O(E,A.s))&&T.i<E.i&&(E=T,_.pagePrevDataIndex==null&&(_.pagePrevDataIndex=T.i),++_.pageCount,++_.pageIndex),T=A;return _;function I(B){if(B){var N=B.getBoundingRect(),H=N[l]+B[l];return{s:H,e:H+N[s],i:B.__legendDataIndex}}}function O(B,N){return B.e>=N&&B.s<=N+a}},t.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===n&&(r=s)}),r??a},t.type="legend.scroll",t}(qte);function SWe(e){e.registerAction("legendScroll","legendscroll",function(t,n){var r=t.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(r)})})}function CWe(e){Io(Yte),e.registerComponentModel(wWe),e.registerComponentView(xWe),SWe(e)}function Qk(e){Io(Yte),Io(CWe)}var TWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.inside",t.defaultOption=F0(Fw.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(Fw),D4=Sa();function MWe(e,t,n){D4(e).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)})}function kWe(e,t){for(var n=D4(e).coordSysRecordMap,r=n.keys(),i=0;i<r.length;i++){var a=r[i],o=n.get(a),s=o.dataZoomInfoMap;if(s){var l=t.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||Xte(n,o))}}}function Xte(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function EWe(e,t){var n={model:t,containsPoint:bi(PWe,t),dispatchAction:bi(AWe,e),dataZoomInfoMap:null,controller:null},r=n.controller=new qUe(e.getZr());return qe(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];n.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],c=l&&l(s.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&n.dispatchAction(o)})}),n}function AWe(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function PWe(e,t,n,r){return e.coordinateSystem.containPoint([n,r])}function IWe(e){var t,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[n+s]>r[n+t]&&(t=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function LWe(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,n){var r=D4(n),i=r.coordSysRecordMap||(r.coordSysRecordMap=Dr());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=Bte(a);qe(o.infoList,function(s){var l=s.model.uid,c=i.get(l)||i.set(l,EWe(n,s.model)),h=c.dataZoomInfoMap||(c.dataZoomInfoMap=Dr());h.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){Xte(i,a);return}var h=IWe(l);o.enable(h.controlType,h.opt),o.setPointerChecker(a.containsPoint),jk(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var DWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return t.prototype.render=function(n,r,i){if(e.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),MWe(i,n,{pan:ur(sL.pan,this),zoom:ur(sL.zoom,this),scrollMove:ur(sL.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){kWe(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(E4),sL={zoom:function(e,t,n,r){var i=this.range,a=i.slice(),o=e.axisModels[0];if(o){var s=lL[t](null,[r.originX,r.originY],o,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/r.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(j0(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:p9(function(e,t,n,r,i,a){var o=lL[r]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:p9(function(e,t,n,r,i,a){var o=lL[r]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n);return o.signal*(e[1]-e[0])*a.scrollDelta})};function p9(e){return function(t,n,r,i){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var l=e(o,s,t,n,r,i);if(j0(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var lL={grid:function(e,t,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),n.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,n,r,i){var a=n.axis,o=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function RWe(e){A4(e),e.registerComponentModel(TWe),e.registerComponentView(DWe),LWe(e)}var OWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=F0(Fw.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(Fw),Gb=Pi,v9=7,zWe=1,uL=30,BWe=7,Kb="horizontal",m9="vertical",FWe=5,NWe=["line","bar","candlestick","scatter"],$We={easing:"cubicOut",duration:100,delay:0},VWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return t.prototype.init=function(n,r){this.api=r,this._onBrush=ur(this._onBrush,this),this._onBrushEnd=ur(this._onBrushEnd,this)},t.prototype.render=function(n,r,i,a){if(e.prototype.render.apply(this,arguments),jk(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){sM(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Bi;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var n=this.dataZoomModel,r=this.api,i=n.get("brushSelect"),a=i?BWe:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===Kb?{right:s.width-o.x-o.width,top:s.height-uL-v9-a,width:o.width,height:uL}:{right:v9,top:o.y,width:uL,height:o.height},c=N0(n.option);qe(["right","top","width","height"],function(f){c[f]==="ph"&&(c[f]=l[f])});var h=tc(c,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===m9&&this._size.reverse()},t.prototype._positionGroup=function(){var n=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===Kb&&!o?{scaleY:l?1:-1,scaleX:1}:i===Kb&&o?{scaleY:l?1:-1,scaleX:-1}:i===m9&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=n.getBoundingRect([s]);n.x=r.x-c.x,n.y=r.y-c.y,n.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var n=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new Gb({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var o=new Gb({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:ur(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},t.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var r=this._size,i=this._shadowSize||[],a=n.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():n.otherDim;if(l==null)return;var c=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var f=o.getDataExtent(l),p=(f[1]-f[0])*.3;f=[f[0]-p,f[1]+p];var v=[0,r[1]],_=[0,r[0]],b=[[r[0],0],[0,0]],C=[],T=_[1]/(o.count()-1),E=0,A=Math.round(o.count()/r[0]),I;o.each([l],function(j,W){if(A>0&&W%A){E+=T;return}var U=j==null||isNaN(j)||j==="",Y=U?0:Ai(j,f,v,!0);U&&!I&&W?(b.push([b[b.length-1][0],0]),C.push([C[C.length-1][0],0])):!U&&I&&(b.push([E,0]),C.push([E,0])),b.push([E,Y]),C.push([E,Y]),E+=T,I=U}),c=this._shadowPolygonPts=b,h=this._shadowPolylinePts=C}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var O=this.dataZoomModel;function B(j){var W=O.getModel(j?"selectedDataBackground":"dataBackground"),U=new Bi,Y=new z0({shape:{points:c},segmentIgnoreThreshold:1,style:W.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ie=new Yf({shape:{points:h},segmentIgnoreThreshold:1,style:W.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return U.add(Y),U.add(ie),U}for(var N=0;N<3;N++){var H=B(N===1);this._displayables.sliderGroup.add(H),this._displayables.dataShadowSegs.push(H)}},t.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,r=n.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(o,s){var l=n.getAxisProxy(o,s).getTargetSeriesModels();qe(l,function(c){if(!i&&!(r!==!0&&pi(NWe,c.get("type"))<0)){var h=a.getComponent(gf(o),s).axis,f=HWe(o),p,v=c.coordinateSystem;f!=null&&v.getOtherAxis&&(p=v.getOtherAxis(h).inverse),f=c.getData().mapDimension(f),i={thisAxis:h,series:c,thisDim:o,otherDim:f,otherAxisInverse:p}}},this)},this),i}},t.prototype._renderHandle=function(){var n=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,h=l.get("borderRadius")||0,f=l.get("brushSelect"),p=r.filler=new Gb({silent:f,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(p),o.add(new Gb({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:zWe,fill:"rgba(0,0,0,0)"}})),qe([0,1],function(A){var I=l.get("handleIcon");!uM[I]&&I.indexOf("path://")<0&&I.indexOf("image://")<0&&(I="path://"+I);var O=Js(I,-1,0,2,2,null,!0);O.attr({cursor:g9(this._orient),draggable:!0,drift:ur(this._onDragMove,this,A),ondragend:ur(this._onDragEnd,this),onmouseover:ur(this._showDataInfo,this,!0),onmouseout:ur(this._showDataInfo,this,!1),z2:5});var B=O.getBoundingRect(),N=l.get("handleSize");this._handleHeight=Fr(N,this._size[1]),this._handleWidth=B.width/B.height*this._handleHeight,O.setStyle(l.getModel("handleStyle").getItemStyle()),O.style.strokeNoScale=!0,O.rectHover=!0,O.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),QT(O);var H=l.get("handleColor");H!=null&&(O.style.fill=H),o.add(i[A]=O);var j=l.getModel("textStyle"),W=l.get("handleLabel")||{},U=W.show||!1;n.add(a[A]=new Mi({silent:!0,invisible:!U,style:Ga(j,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:j.getTextColor(),font:j.getFont()}),z2:10}))},this);var v=p;if(f){var _=Fr(l.get("moveHandleSize"),s[1]),b=r.moveHandle=new Pi({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:_}}),C=_*.8,T=r.moveHandleIcon=Js(l.get("moveHandleIcon"),-C/2,-C/2,C,C,"#fff",!0);T.silent=!0,T.y=s[1]+_/2-.5,b.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var E=Math.min(s[1]/2,Math.max(_,10));v=r.moveZone=new Pi({invisible:!0,shape:{y:s[1]-E,height:_+E}}),v.on("mouseover",function(){c.enterEmphasis(b)}).on("mouseout",function(){c.leaveEmphasis(b)}),o.add(b),o.add(T),o.add(v)}v.attr({draggable:!0,cursor:g9(this._orient),drift:ur(this._onDragMove,this,"all"),ondragstart:ur(this._showDataInfo,this,!0),ondragend:ur(this._onDragEnd,this),onmouseover:ur(this._showDataInfo,this,!0),onmouseout:ur(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Ai(n[0],[0,100],r,!0),Ai(n[1],[0,100],r,!0)]},t.prototype._updateInterval=function(n,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];j0(r,a,o,i.get("zoomLock")?"all":n,s.minSpan!=null?Ai(s.minSpan,l,o,!0):null,s.maxSpan!=null?Ai(s.maxSpan,l,o,!0):null);var c=this._range,h=this._range=Sv([Ai(a[0],o,l,!0),Ai(a[1],o,l,!0)]);return!c||c[0]!==h[0]||c[1]!==h[1]},t.prototype._updateView=function(n){var r=this._displayables,i=this._handleEnds,a=Sv(i.slice()),o=this._size;qe([0,1],function(v){var _=r.handles[v],b=this._handleHeight;_.attr({scaleX:b/2,scaleY:b/2,x:i[v]+(v?-1:1),y:o[1]/2-b/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,a[0],a[1],o[0]],h=0;h<l.length;h++){var f=l[h],p=f.getClipPath();p||(p=new Pi,f.setClipPath(p)),p.setShape({x:c[h],y:0,width:c[h+1]-c[h],height:o[1]})}this._updateDataInfo(n)},t.prototype._updateDataInfo=function(n){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,h=this._range,f=n?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(f[0],c),this._formatLabel(f[1],c)]}}var p=Sv(this._handleEnds.slice());v.call(this,0),v.call(this,1);function v(_){var b=Nv(i.handles[_].parent,this.group),C=Lk(_===0?"right":"left",b),T=this._handleWidth/2+FWe,E=Mf([p[_]+(_===0?-T:T),this._size[1]/2],b);a[_].setStyle({x:E[0],y:E[1],verticalAlign:o===Kb?"middle":C,align:o===Kb?C:"center",text:s[_]})}},t.prototype._formatLabel=function(n,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=n==null||isNaN(n)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(o,20));return Mr(a)?a(n,s):Qn(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(n){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=n||this._dragging?o:i,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},t.prototype._onDragMove=function(n,r,i,a){this._dragging=!0,Jd(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Mf([r,i],o,!0),l=this._updateInterval(n,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(n){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(n){var r=n.offsetX,i=n.offsetY;this._brushStart=new Or(r,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(n){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Sv([Ai(i.x,o,s,!0),Ai(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(n){this._brushing&&(Jd(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},t.prototype._updateBrushRect=function(n,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new Gb({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(n,r),h=l.transformCoordToLocal(s.x,s.y),f=this._size;c[0]=Math.max(Math.min(f[0],c[0]),0),o.setShape({x:h[0],y:0,width:c[0]-h[0],height:f[1]})},t.prototype._dispatchZoomAction=function(n){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?$We:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var n,r=Bte(this.dataZoomModel).infoList;if(!n&&r.length){var i=r[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),o=this.api.getHeight();n={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return n},t.type="dataZoom.slider",t}(E4);function HWe(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function g9(e){return e==="vertical"?"ns-resize":"ew-resize"}function jWe(e){e.registerComponentModel(OWe),e.registerComponentView(VWe),A4(e)}function Jte(e){Io(RWe),Io(jWe)}var Qte={get:function(e,t,n){var r=wr((UWe[e]||{})[t]);return n&&Vn(r)?r[r.length-1]:r}},UWe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},y9=Qo.mapVisual,WWe=Qo.eachVisual,GWe=Vn,_9=qe,KWe=Sv,qWe=Ai,yM=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},t.prototype.optionUpdated=function(n,r){var i=this.option;!r&&hWe(i,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(n){var r=this.stateList;n=ur(n,this),this.controllerVisuals=u9(this.option.controller,r,n),this.targetVisuals=u9(this.option.target,r,n)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,r=[];return n==null||n==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Ao(n),r},t.prototype.eachTargetSeries=function(n,r){qe(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&n.call(r,a)},this)},t.prototype.isTargetSeries=function(n){var r=!1;return this.eachTargetSeries(function(i){i===n&&(r=!0)}),r},t.prototype.formatValueText=function(n,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,c;i=i||["<",">"],Vn(n)&&(n=n.slice(),c=!0);var h=r?n:c?[f(n[0]),f(n[1])]:f(n);if(Qn(l))return l.replace("{value}",c?h[0]:h).replace("{value2}",c?h[1]:h);if(Mr(l))return c?l(n[0],n[1]):l(n);if(c)return n[0]===s[0]?i[0]+" "+h[1]:n[1]===s[1]?i[1]+" "+h[0]:h[0]+" - "+h[1];return h;function f(p){return p===s[0]?"min":p===s[1]?"max":(+p).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var n=this.option,r=KWe([n.min,n.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(n){var r=this.option.dimension;if(r!=null)return n.getDimensionIndex(r);for(var i=n.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=n.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var n=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});Kr(a,i),Kr(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),c.call(this,a,"inRange","outOfRange"),h.call(this,o);function l(f){GWe(r.color)&&!f.inRange&&(f.inRange={color:r.color.slice().reverse()}),f.inRange=f.inRange||{color:n.get("gradientColor")}}function c(f,p,v){var _=f[p],b=f[v];_&&!b&&(b=f[v]={},_9(_,function(C,T){if(Qo.isValidType(T)){var E=Qte.get(T,"inactive",s);E!=null&&(b[T]=E,T==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function h(f){var p=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,v=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,_=this.get("inactiveColor"),b=this.getItemSymbol(),C=b||"roundRect";_9(this.stateList,function(T){var E=this.itemSize,A=f[T];A||(A=f[T]={color:s?_:[_]}),A.symbol==null&&(A.symbol=p&&wr(p)||(s?C:[C])),A.symbolSize==null&&(A.symbolSize=v&&wr(v)||(s?E[0]:[E[0],E[0]])),A.symbol=y9(A.symbol,function(B){return B==="none"?C:B});var I=A.symbolSize;if(I!=null){var O=-1/0;WWe(I,function(B){B>O&&(O=B)}),A.symbolSize=y9(I,function(B){return qWe(B,[0,O],[0,E[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(n){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(n){return null},t.prototype.getVisualMeta=function(n){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(xi),b9=[20,140],ZWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(n,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=b9[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=b9[1])},t.prototype._resetRange=function(){var n=this.getExtent(),r=this.option.range;!r||r.auto?(n.auto=1,this.option.range=n):Vn(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],n[0]),r[1]=Math.min(r[1],n[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),qe(this.stateList,function(n){var r=this.option.controller[n].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},t.prototype.getSelected=function(){var n=this.getExtent(),r=Sv((this.get("range")||[]).slice());return r[0]>n[1]&&(r[0]=n[1]),r[1]>n[1]&&(r[1]=n[1]),r[0]<n[0]&&(r[0]=n[0]),r[1]<n[0]&&(r[1]=n[0]),r},t.prototype.getValueState=function(n){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=n)&&(r[1]>=i[1]||n<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){n[0]<=s&&s<=n[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},t.prototype.getVisualMeta=function(n){var r=w9(this,"outOfRange",this.getExtent()),i=w9(this,"inRange",this.option.range.slice()),a=[];function o(v,_){a.push({value:v,color:n(v,_)})}for(var s=0,l=0,c=i.length,h=r.length;l<h&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var f=1;s<c;s++,f=0)f&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var f=1;l<h;l++)(!i.length||i[i.length-1]<r[l])&&(f&&(a.length&&o(a[a.length-1].value,"outOfRange"),f=0),o(r[l],"outOfRange"));var p=a.length;return{stops:a,outerColors:[p?a[0].color:"transparent",p?a[p-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=F0(yM.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(yM);function w9(e,t,n){if(n[0]===n[1])return n.slice();for(var r=200,i=(n[1]-n[0])/r,a=n[0],o=[],s=0;s<=r&&a<n[1];s++)o.push(a),a+=i;return o.push(n[1]),o}var ene=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return t.prototype.init=function(n,r){this.ecModel=n,this.api=r},t.prototype.render=function(n,r,i,a){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,r,i,a)},t.prototype.renderBackground=function(n){var r=this.visualMapModel,i=kx(r.get("padding")||0),a=n.getBoundingRect();n.add(new Pi({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(n,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(v){return s[v]}function h(v,_){s[v]=_}var f=o.controllerVisuals[a||o.getValueState(n)],p=Qo.prepareVisualTypes(f);return qe(p,function(v){var _=f[v];i.convertOpacityToAlpha&&v==="opacity"&&(v="colorAlpha",_=f.__alphaForOpacity),Qo.dependsOn(v,r)&&_&&_.applyVisual(n,c,h)}),s[r]},t.prototype.positionGroup=function(n){var r=this.visualMapModel,i=this.api;pQ(n,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(n,r,i,a){},t.type="visualMap",t}(Cs),x9=[["left","right","width"],["top","bottom","height"]];function tne(e,t,n){var r=e.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:t.getWidth(),height:t.getHeight()},o=r.orient==="horizontal"?1:0,s=x9[o],l=[0,null,10],c={},h=0;h<3;h++)c[x9[1-o][h]]=l[h],c[s[h]]=h===2?n[0]:r[s[h]];var f=[["x","width",3],["y","height",0]][o],p=tc(c,a,r.padding);return s[(p.margin[f[2]]||0)+p[f[0]]+p[f[1]]*.5<a[f[1]]*.5?0:1]}function XC(e,t){return qe(e||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var Ac=Ai,YWe=qe,S9=Math.min,cL=Math.max,XWe=12,JWe=6,QWe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return t.prototype.init=function(n,r){e.prototype.init.call(this,n,r),this._hoverLinkFromSeriesMouseOver=ur(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ur(this._hideIndicator,this)},t.prototype.doRender=function(n,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,r=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(r);var i=n.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(n,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,h=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],c),f=this._applyTransform(i===0?"bottom":"top",c),p=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new Mi({style:Ga(v,{x:h[0],y:h[1],verticalAlign:p==="horizontal"?"middle":f,align:p==="horizontal"?f:"center",text:a})}))}},t.prototype._renderBar=function(n){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=tne(r,this.api,a),c=i.mainGroup=this._createBarGroup(l),h=new Bi;c.add(h),h.add(i.outOfRange=C9()),h.add(i.inRange=C9(null,s?M9(this._orient):null,ur(this._dragHandle,this,"all",!1),ur(this._dragHandle,this,"all",!0))),h.setClipPath(new Pi({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var f=r.textStyleModel.getTextRect("国"),p=cL(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,c,0,a,p,o),this._createHandle(r,c,1,a,p,o)),this._createIndicator(r,c,a,p,o),n.add(c)},t.prototype._createHandle=function(n,r,i,a,o,s){var l=ur(this._dragHandle,this,i,!1),c=ur(this._dragHandle,this,i,!0),h=ed(n.get("handleSize"),a[0]),f=Js(n.get("handleIcon"),-h/2,-h/2,h,h,null,!0),p=M9(this._orient);f.attr({cursor:p,draggable:!0,drift:l,ondragend:c,onmousemove:function(T){Jd(T.event)}}),f.x=a[0]/2,f.useStyle(n.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),Dz(f,!0),r.add(f);var v=this.visualMapModel.textStyleModel,_=new Mi({cursor:p,draggable:!0,drift:l,onmousemove:function(T){Jd(T.event)},ondragend:c,style:Ga(v,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var b=[h,0],C=this._shapes;C.handleThumbs[i]=f,C.handleLabelPoints[i]=b,C.handleLabels[i]=_},t.prototype._createIndicator=function(n,r,i,a,o){var s=ed(n.get("indicatorSize"),i[0]),l=Js(n.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var c=n.getModel("indicatorStyle").getItemStyle();if(l instanceof sc){var h=l.style;l.useStyle(Pn({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},c))}else l.useStyle(c);r.add(l);var f=this.visualMapModel.textStyleModel,p=new Mi({silent:!0,invisible:!0,style:Ga(f,{x:0,y:0,text:""})});this.group.add(p);var v=[(o==="horizontal"?a/2:JWe)+i[0]/2,0],_=this._shapes;_.indicator=l,_.indicatorLabel=p,_.indicatorLabelPoint=v,this._firstShowIndicator=!0},t.prototype._dragHandle=function(n,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(n,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():T9(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},t.prototype._resetInterval=function(){var n=this.visualMapModel,r=this._dataInterval=n.getSelected(),i=n.getExtent(),a=[0,n.itemSize[1]];this._handleEnds=[Ac(r[0],i,a,!0),Ac(r[1],i,a,!0)]},t.prototype._updateInterval=function(n,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];j0(r,a,o,n,0);var s=i.getExtent();this._dataInterval=[Ac(a[0],o,s,!0),Ac(a[1],o,s,!0)]},t.prototype._updateView=function(n){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=n?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),c=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(n,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(n,o),l=[this.getControllerVisual(n[0],"symbolSize",o),this.getControllerVisual(n[1],"symbolSize",o)],c=this._createBarPoints(i,l);return{barColor:new Bz(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(n,r){var i=100,a=[],o=(n[1]-n[0])/i;a.push({color:this.getControllerVisual(n[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=n[0]+o*s;if(l>n[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(n[1],"color",r),offset:1}),a},t.prototype._createBarPoints=function(n,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],n[0]],[i[0],n[0]],[i[0],n[1]],[i[0]-r[1],n[1]]]},t.prototype._createBarGroup=function(n){var r=this._orient,i=this.visualMapModel.get("inverse");return new Bi(r==="horizontal"&&!i?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},t.prototype._updateHandle=function(n,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,c=a.getExtent(),h=this._applyTransform("left",i.mainGroup);YWe([0,1],function(f){var p=o[f];p.setStyle("fill",r.handlesColor[f]),p.y=n[f];var v=Ac(n[f],[0,l[1]],c,!0),_=this.getControllerVisual(v,"symbolSize");p.scaleX=p.scaleY=_/l[0],p.x=l[0]-_/2;var b=Mf(i.handleLabelPoints[f],Nv(p,this.group));if(this._orient==="horizontal"){var C=h==="left"||h==="top"?(l[0]-_)/2:(l[0]-_)/-2;b[1]+=C}s[f].setStyle({x:b[0],y:b[1],text:a.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(n,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],h=this._shapes,f=h.indicator;if(f){f.attr("invisible",!1);var p={convertOpacityToAlpha:!0},v=this.getControllerVisual(n,"color",p),_=this.getControllerVisual(n,"symbolSize"),b=Ac(n,s,c,!0),C=l[0]-_/2,T={x:f.x,y:f.y};f.y=b,f.x=C;var E=Mf(h.indicatorLabelPoint,Nv(f,this.group)),A=h.indicatorLabel;A.attr("invisible",!1);var I=this._applyTransform("left",h.mainGroup),O=this._orient,B=O==="horizontal";A.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:B?I:"middle",align:B?"center":I});var N={x:C,y:b,style:{fill:v}},H={style:{x:E[0],y:E[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var j={duration:100,easing:"cubicInOut",additive:!0};f.x=T.x,f.y=T.y,f.animateTo(N,j),A.animateTo(H,j)}else f.attr(N),A.attr(H);this._firstShowIndicator=!1;var W=this._shapes.handleLabels;if(W)for(var U=0;U<W.length;U++)this.api.enterBlur(W[U])}},t.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(r){if(n._hovering=!0,!n._dragging){var i=n.visualMapModel.itemSize,a=n._applyTransform([r.offsetX,r.offsetY],n._shapes.mainGroup,!0,!0);a[1]=S9(cL(0,a[1]),i[1]),n._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(n,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();n=S9(cL(o[0],n),o[1]);var l=eGe(i,s,o),c=[n-l,n+l],h=Ac(n,o,s,!0),f=[Ac(c[0],o,s,!0),Ac(c[1],o,s,!0)];c[0]<o[0]&&(f[0]=-1/0),c[1]>o[1]&&(f[1]=1/0),r&&(f[0]===-1/0?this._showIndicator(h,f[1],"< ",l):f[1]===1/0?this._showIndicator(h,f[0],"> ",l):this._showIndicator(h,h,"≈ ",l));var p=this._hoverLinkDataIndices,v=[];(r||T9(i))&&(v=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var _=xFe(p,v);this._dispatchHighDown("downplay",XC(_[0],i)),this._dispatchHighDown("highlight",XC(_[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(n){var r;if(my(n.target,function(l){var c=yi(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",XC(n,this.visualMapModel)),n.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(n,r,i,a){var o=Nv(r,a?null:this.group);return Vn(n)?Mf(n,o,i):Lk(n,o,i)},t.prototype._dispatchHighDown=function(n,r){r&&r.length&&this.api.dispatchAction({type:n,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(ene);function C9(e,t,n,r){return new z0({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(i){Jd(i.event)},ondragend:r})}function eGe(e,t,n){var r=XWe/2,i=e.get("hoverLinkDataSize");return i&&(r=Ac(i,t,n,!0)/2),r}function T9(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function M9(e){return e==="vertical"?"ns-resize":"ew-resize"}var tGe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},nGe=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})},rGe=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(r){var i=e.pipelineContext;!r.isTargetSeries(e)||i&&i.large||n.push(fWe(r.stateList,r.targetVisuals,ur(r.getValueState,r),r.getDataDimensionIndex(e.getData())))}),n}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var a=i.getVisualMeta(ur(iGe,null,e,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(n);o>=0&&(a.dimension=o,r.push(a))}}),e.getData().setVisual("visualMeta",r)}}];function iGe(e,t,n,r){for(var i=t.targetVisuals[r],a=Qo.prepareVisualTypes(i),o={color:ZQ(e.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],h=i[c==="opacity"?"__alphaForOpacity":c];h&&h.applyVisual(n,f,p)}return o.color;function f(v){return o[v]}function p(v,_){o[v]=_}}var k9=qe;function aGe(e){var t=e&&e.visualMap;Vn(t)||(t=t?[t]:[]),k9(t,function(n){if(n){Kg(n,"splitList")&&!Kg(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&Vn(r)&&k9(r,function(i){fr(i)&&(Kg(i,"start")&&!Kg(i,"min")&&(i.min=i.start),Kg(i,"end")&&!Kg(i,"max")&&(i.max=i.end))})}})}function Kg(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var E9=!1;function nne(e){E9||(E9=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(tGe,nGe),qe(rGe,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(aGe))}function oGe(e){e.registerComponentModel(ZWe),e.registerComponentView(QWe),nne(e)}var sGe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return t.prototype.optionUpdated=function(n,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],lGe[this._mode].call(this,this._pieceList),this._resetSelected(n,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=wr(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Yn(this._pieceList,function(l){return l=wr(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var n=this.option,r={},i=Qo.listVisualTypes(),a=this.isCategory();qe(n.pieces,function(s){qe(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),qe(r,function(s,l){var c=!1;qe(this.stateList,function(h){c=c||o(n,h,l)||o(n.target,h,l)},this),!c&&qe(this.stateList,function(h){(n[h]||(n[h]={}))[l]=Qte.get(l,h==="inRange"?"active":"inactive",a)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(n,r){var i=this.option,a=this._pieceList,o=(r?i:n).selected||{};if(i.selected=o,qe(a,function(l,c){var h=this.getSelectedMapKey(l);o.hasOwnProperty(h)||(o[h]=!0)},this),i.selectedMode==="single"){var s=!1;qe(a,function(l,c){var h=this.getSelectedMapKey(l);o[h]&&(s?o[h]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(n){this.option.selected=wr(n)},t.prototype.getValueState=function(n){var r=Qo.findPieceIndex(n,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var h=Qo.findPieceIndex(l,i);h===n&&o.push(c)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},t.prototype.getRepresentValue=function(n){var r;if(this.isCategory())r=n.value;else if(n.value!=null)r=n.value;else{var i=n.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},t.prototype.getVisualMeta=function(n){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(h,f){var p=a.getRepresentValue({interval:h});f||(f=a.getValueState(p));var v=n(p,f);h[0]===-1/0?i[0]=v:h[1]===1/0?i[1]=v:r.push({value:h[0],color:v},{value:h[1],color:v})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return qe(s,function(h){var f=h.interval;f&&(f[0]>c&&o([c,f[0]],"outOfRange"),o(f.slice()),c=f[1])},this),{stops:r,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=F0(yM.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(yM),lGe={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),r=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),FV(e),qe(e,function(c,h){c.index=h,c.text=this.formatValueText(c.interval)},this)},categories:function(e){var t=this.option;qe(t.categories,function(n){e.push({text:this.formatValueText(n,!0),value:n})},this),A9(t,e)},pieces:function(e){var t=this.option;qe(t.pieces,function(n,r){fr(n)||(n={value:n});var i={text:"",index:r};if(n.label!=null&&(i.text=n.label),n.hasOwnProperty("value")){var a=i.value=n.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],c=[-1/0,1/0],h=[],f=0;f<2;f++){for(var p=[["gte","gt","min"],["lte","lt","max"]][f],v=0;v<3&&o[f]==null;v++)o[f]=n[p[v]],s[f]=l[v],h[f]=v===2;o[f]==null&&(o[f]=c[f])}h[0]&&o[1]===1/0&&(s[0]=0),h[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=Qo.retrieveVisuals(n),e.push(i)},this),A9(t,e),FV(e),qe(e,function(n){var r=n.close,i=[["<","≤"][r[1]],[">","≥"][r[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,i)},this)}};function A9(e,t){var n=e.inverse;(e.orient==="vertical"?!n:n)&&t.reverse()}var uGe=function(e){xn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.doRender=function(){var n=this.group;n.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=r.itemSize,h=this._getViewData(),f=h.endsText,p=l0(r.get("showLabel",!0),!f),v=!r.get("selectedMode");f&&this._renderEndsText(n,f[0],c,p,l),qe(h.viewPieceList,function(_){var b=_.piece,C=new Bi;C.onclick=ur(this._onItemClick,this,b),this._enableHoverLink(C,_.indexInModelPieceList);var T=r.getRepresentValue(b);if(this._createItemSymbol(C,T,[0,0,c[0],c[1]],v),p){var E=this.visualMapModel.getValueState(T);C.add(new Mi({style:{x:l==="right"?-i:c[0]+i,y:c[1]/2,text:b.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:E==="outOfRange"?.5:1},silent:v}))}n.add(C)},this),f&&this._renderEndsText(n,f[1],c,p,l),$v(r.get("orient"),n,r.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},t.prototype._enableHoverLink=function(n,r){var i=this;n.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:XC(s.findTargetDataIndices(r),s)})}},t.prototype._getItemAlign=function(){var n=this.visualMapModel,r=n.option;if(r.orient==="vertical")return tne(n,this.api,n.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(n,r,i,a,o){if(r){var s=new Bi,l=this.visualMapModel.textStyleModel;s.add(new Mi({style:Ga(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),n.add(s)}},t.prototype._getViewData=function(){var n=this.visualMapModel,r=Yn(n.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=n.get("text"),a=n.get("orient"),o=n.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},t.prototype._createItemSymbol=function(n,r,i,a){var o=Js(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));o.silent=a,n.add(o)},t.prototype._onItemClick=function(n){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=wr(i.selected),s=r.getSelectedMapKey(n);a==="single"||a===!0?(o[s]=!0,qe(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(ene);function cGe(e){e.registerComponentModel(sGe),e.registerComponentView(uGe),nne(e)}function dGe(e){Io(oGe),Io(cGe)}function P9(e,t,n){var r=$f.createCanvas(),i=t.getWidth(),a=t.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",e)),r.width=i*n,r.height=a*n,r}var dL=function(e){xn(t,e);function t(n,r,i){var a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||KT,typeof n=="string"?o=P9(n,r,i):fr(n)&&(o=n,n=o.id),a.id=n,a.dom=o;var s=o.style;return s&&(UX(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=P9("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},t.prototype.createRepaintRects=function(n,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new Ti(0,0,0,0);function h(E){if(!(!E.isFinite()||E.isZero()))if(o.length===0){var A=new Ti(0,0,0,0);A.copy(E),o.push(A)}else{for(var I=!1,O=1/0,B=0,N=0;N<o.length;++N){var H=o[N];if(H.intersect(E)){var j=new Ti(0,0,0,0);j.copy(H),j.union(E),o[N]=j,I=!0;break}else if(l){c.copy(E),c.union(H);var W=E.width*E.height,U=H.width*H.height,Y=c.width*c.height,ie=Y-W-U;ie<O&&(O=ie,B=N)}}if(l&&(o[B].union(E),I=!0),!I){var A=new Ti(0,0,0,0);A.copy(E),o.push(A)}l||(l=o.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var p=n[f];if(p){var v=p.shouldBePainted(i,a,!0,!0),_=p.__isRendered&&(p.__dirty&dl||!v)?p.getPrevPaintRect():null;_&&h(_);var b=v&&(p.__dirty&dl||!p.__isRendered)?p.getPaintRect():null;b&&h(b)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var p=r[f],v=p&&p.shouldBePainted(i,a,!0,!0);if(p&&(!v||!p.__zr)&&p.__isRendered){var _=p.getPrevPaintRect();_&&h(_)}}var C;do{C=!1;for(var f=0;f<o.length;){if(o[f].isZero()){o.splice(f,1);continue}for(var T=f+1;T<o.length;)o[f].intersect(o[T])?(C=!0,o[f].union(o[T]),o.splice(T,1)):T++;f++}}while(C);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(n,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=n+"px",o.height=r+"px"),a.width=n*i,a.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(n,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var c=this.motionBlur&&!n,h=this.lastFrameAlpha,f=this.dpr,p=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/f,l/f));var v=this.domBack;function _(b,C,T,E){if(o.clearRect(b,C,T,E),r&&r!=="transparent"){var A=void 0;if(bk(r)){var I=r.global||r.__width===T&&r.__height===E;A=I&&r.__canvasGradient||KR(o,r,{x:0,y:0,width:T,height:E}),r.__canvasGradient=A,r.__width=T,r.__height=E}else z4e(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,A=qR(o,r,{dirty:function(){p.setUnpainted(),p.painter.refresh()}}));o.save(),o.fillStyle=A||r,o.fillRect(b,C,T,E),o.restore()}c&&(o.save(),o.globalAlpha=h,o.drawImage(v,b,C,T,E),o.restore())}!i||c?_(0,0,s,l):i.length&&qe(i,function(b){_(b.x*f,b.y*f,b.width*f,b.height*f)})},t}(ou),I9=1e5,ov=314159,sC=.01,hGe=.001;function fGe(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function pGe(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var vGe=function(){function e(t,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=Pn({},r||{}),this.dpr=r.devicePixelRatio||KT,this._singleCanvas=a,this.root=t;var o=t.style;o&&(UX(t),t.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var h=t,f=h.width,p=h.height;r.width!=null&&(f=r.width),r.height!=null&&(p=r.height),this.dpr=r.devicePixelRatio||1,h.width=f*this.dpr,h.height=p*this.dpr,this._width=f,this._height=p;var v=new dL(h,this,this.dpr);v.__builtin__=!0,v.initContext(),l[ov]=v,v.zlevel=ov,s.push(ov),this._domRoot=t}else{this._width=W2(t,0,r),this._height=W2(t,1,r);var c=this._domRoot=pGe(this._width,this._height);t.appendChild(c)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,t,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var n=t.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<n;o++){var s=t[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(I9)),a||(a=r.ctx,a.save()),kv(a,s,i,o===n-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(I9)},e.prototype.paintOne=function(t,n){eee(t,n)},e.prototype._paintList=function(t,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,n,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;VT(function(){l._paintList(t,n,r,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(ov).ctx,n=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,n,r)})},e.prototype._doPaintList=function(t,n,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&a.push(c)}for(var h=!0,f=!1,p=function(b){var C=a[b],T=C.ctx,E=o&&C.createRepaintRects(t,n,v._width,v._height),A=r?C.__startIndex:C.__drawIndex,I=!r&&C.incremental&&Date.now,O=I&&Date.now(),B=C.zlevel===v._zlevelList[0]?v._backgroundColor:null;if(C.__startIndex===C.__endIndex)C.clear(!1,B,E);else if(A===C.__startIndex){var N=t[A];(!N.incremental||!N.notClear||r)&&C.clear(!1,B,E)}A===-1&&(console.error("For some unknown reason. drawIndex is -1"),A=C.__startIndex);var H,j=function(ie){var ue={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(H=A;H<C.__endIndex;H++){var J=t[H];if(J.__inHover&&(f=!0),i._doPaintEl(J,C,o,ie,ue,H===C.__endIndex-1),I){var q=Date.now()-O;if(q>15)break}}ue.prevElClipPaths&&T.restore()};if(E)if(E.length===0)H=C.__endIndex;else for(var W=v.dpr,U=0;U<E.length;++U){var Y=E[U];T.save(),T.beginPath(),T.rect(Y.x*W,Y.y*W,Y.width*W,Y.height*W),T.clip(),j(Y),T.restore()}else T.save(),j(),T.restore();C.__drawIndex=H,C.__drawIndex<C.__endIndex&&(h=!1)},v=this,_=0;_<a.length;_++)p(_);return Ir.wxa&&qe(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:h,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,n,r,i,a,o){var s=n.ctx;if(r){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(kv(s,t,a,o),t.setPrevPaintRect(l))}else kv(s,t,a,o)},e.prototype.getLayer=function(t,n){this._singleCanvas&&!this._needsManuallyCompositing&&(t=ov);var r=this._layers[t];return r||(r=new dL("zr_"+t,this,this.dpr),r.zlevel=t,r.__builtin__=!0,this._layerConfig[t]?Kr(r,this._layerConfig[t],!0):this._layerConfig[t-sC]&&Kr(r,this._layerConfig[t-sC],!0),n&&(r.virtual=n),this.insertLayer(t,r),r.initContext()),r},e.prototype.insertLayer=function(t,n){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[t]&&fGe(n)){if(a>0&&t>i[0]){for(l=0;l<a-1&&!(i[l]<t&&i[l+1]>t);l++);s=r[i[l]]}if(i.splice(l+1,0,t),r[t]=n,!n.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(n.dom,c.nextSibling):o.appendChild(n.dom)}else o.firstChild?o.insertBefore(n.dom,o.firstChild):o.appendChild(n.dom);n.painter||(n.painter=this)}},e.prototype.eachLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];t.call(n,this._layers[a],a)}},e.prototype.eachBuiltinLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&t.call(n,o,a)}},e.prototype.eachOtherLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||t.call(n,o,a)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,p){f.__dirty=f.__used=!1});function n(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<t.length;r++){var i=t[r];if(i.zlevel!==t[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var i=t[l],c=i.zlevel,h=void 0;s!==c&&(s=c,o=0),i.incremental?(h=this.getLayer(c+hGe,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(c+(o>0?sC:0),this._needsManuallyCompositing),h.__builtin__||vz("ZLevel "+c+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,n(l),a=h),i.__dirty&dl&&!i.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,p){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,qe(this._layers,function(n){n.setUnpainted()})},e.prototype.configLayer=function(t,n){if(n){var r=this._layerConfig;r[t]?Kr(r[t],n,!0):r[t]=n;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+sC){var o=this._layers[a];Kr(o,r[t],!0)}}}},e.prototype.delLayer=function(t){var n=this._layers,r=this._zlevelList,i=n[t];i&&(i.dom.parentNode.removeChild(i.dom),delete n[t],r.splice(pi(r,t),1))},e.prototype.resize=function(t,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(t!=null&&(i.width=t),n!=null&&(i.height=n),t=W2(a,0,i),n=W2(a,1,i),r.style.display="",this._width!==t||n!==this._height){r.style.width=t+"px",r.style.height=n+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,n);this.refresh(!0)}this._width=t,this._height=n}else{if(t==null||n==null)return;this._width=t,this._height=n,this.getLayer(ov).resize(t,n)}return this},e.prototype.clearLayer=function(t){var n=this._layers[t];n&&n.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[ov].dom;var n=new dL("image",this,t.pixelRatio||this.dpr);n.initContext(),n.clear(!1,t.backgroundColor||this._backgroundColor);var r=n.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,a=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var h=s[l];kv(r,h,o,l===c-1)}return n.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function eE(e){e.registerPainter("canvas",vGe)}const mGe={class:"digital-twin-overview"},gGe={class:"dashboard-header"},yGe={class:"time-selector"},_Ge={class:"status-cards"},bGe={class:"card-content"},wGe={class:"card-info"},xGe={class:"card-content"},SGe={class:"card-info"},CGe={class:"card-value"},TGe={class:"card-content"},MGe={class:"card-info"},kGe={class:"card-content"},EGe={class:"card-info"},AGe={class:"card-value"},PGe={class:"charts-container"},IGe={class:"card-header"},LGe={class:"health-score-wrapper"},DGe={class:"card-header"},RGe={__name:"DigitalTwinOverview",setup(e){Io([cte,m4,g4,Jk,Xk,Qk,k4,eE]);const t=le("day"),n=le("正常运行中"),r=le("text-success"),i=le(128),a=le(3),o=le(92),s=le(null),l=le(null),c=le([{name:"K60发电机-001",location:"机房A区",healthScore:96,status:"正常",lastMaintenance:"2023-10-15"},{name:"热交换器-103",location:"机房B区",healthScore:87,status:"良好",lastMaintenance:"2023-09-28"},{name:"阀门系统-205",location:"管道区域",healthScore:64,status:"需要关注",lastMaintenance:"2023-08-12"},{name:"液压泵-054",location:"主甲板",healthScore:78,status:"良好",lastMaintenance:"2023-10-05"},{name:"舵机系统-A12",location:"船尾区域",healthScore:91,status:"正常",lastMaintenance:"2023-09-20"}]),h=le([{id:1,time:"2023-10-25 08:32:15",device:"阀门系统-205",level:"警告",message:"压力波动超出正常范围"},{id:2,time:"2023-10-25 06:15:22",device:"热交换器-103",level:"注意",message:"温度上升速率异常"},{id:3,time:"2023-10-24 23:45:18",device:"K60发电机-001",level:"严重",message:"轴承温度过高"}]),f=()=>{c.value=c.value.map(O=>({...O,healthScore:Math.min(100,Math.max(50,O.healthScore+Math.floor(Math.random()*11)-5))}))},p=O=>{console.log("查看设备详情:",O.name)},v=()=>{console.log("查看所有告警")},_=O=>{console.log("处理告警:",O.id)},b=O=>{console.log("忽略告警:",O.id),h.value=h.value.filter(B=>B.id!==O.id),a.value=Math.max(0,a.value-1)},C=O=>O>=90?"#67c23a":O>=70?"#e6a23c":"#f56c6c",T=O=>{switch(O){case"正常":return"success";case"良好":return"success";case"需要关注":return"warning";case"异常":return"danger";default:return"info"}},E=O=>{switch(O){case"严重":return"danger";case"警告":return"warning";case"注意":return"info";default:return""}},A=()=>{if(!s.value)return;const O=Ef(s.value),B={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",textStyle:{color:"#e2e8f0"}},color:["#67c23a","#e6a23c","#f56c6c"],series:[{name:"设备健康状态",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:85,name:"健康"},{value:12,name:"需要关注"},{value:3,name:"异常"}]}]};O.setOption(B),window.addEventListener("resize",()=>{O.resize()})},I=()=>{if(!l.value)return;const O=Ef(l.value),B=new Date,N=Array.from({length:7},(j,W)=>{const U=new Date(B);return U.setDate(U.getDate()-6+W),`${U.getMonth()+1}/${U.getDate()}`}),H={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["严重","警告","注意"],textStyle:{color:"#e2e8f0"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:N,axisLine:{lineStyle:{color:"#e2e8f0"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#e2e8f0"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.1)"}}},color:["#f56c6c","#e6a23c","#909399"],series:[{name:"严重",type:"bar",stack:"total",emphasis:{focus:"series"},data:[0,1,0,2,0,1,1]},{name:"警告",type:"bar",stack:"total",emphasis:{focus:"series"},data:[2,1,3,1,2,3,1]},{name:"注意",type:"bar",stack:"total",emphasis:{focus:"series"},data:[3,4,2,3,4,2,1]}]};O.setOption(H),window.addEventListener("resize",()=>{O.resize()})};return At(t,O=>{console.log("时间范围切换:",O)}),Un(()=>{A(),I()}),(O,B)=>{const N=Xt("el-radio-button"),H=Xt("el-radio-group"),j=Xt("el-card"),W=Xt("el-button"),U=Xt("el-table-column"),Y=Xt("el-progress"),ie=Xt("el-tag"),ue=Xt("el-table");return te(),me("div",mGe,[V("div",gGe,[B[4]||(B[4]=V("h2",null,"系统概览",-1)),V("div",yGe,[de(H,{modelValue:t.value,"onUpdate:modelValue":B[0]||(B[0]=J=>t.value=J),size:"small"},{default:ge(()=>[de(N,{label:"day"},{default:ge(()=>B[1]||(B[1]=[$t("今日")])),_:1}),de(N,{label:"week"},{default:ge(()=>B[2]||(B[2]=[$t("本周")])),_:1}),de(N,{label:"month"},{default:ge(()=>B[3]||(B[3]=[$t("本月")])),_:1})]),_:1},8,["modelValue"])])]),V("div",_Ge,[de(j,{class:"status-card"},{default:ge(()=>[V("div",bGe,[B[6]||(B[6]=V("div",{class:"card-icon system-status"},[V("i",{class:"icon-status"})],-1)),V("div",wGe,[B[5]||(B[5]=V("div",{class:"card-title"},"系统状态",-1)),V("div",{class:se(["card-value",r.value])},Xe(n.value),3)])])]),_:1}),de(j,{class:"status-card"},{default:ge(()=>[V("div",xGe,[B[8]||(B[8]=V("div",{class:"card-icon device-count"},[V("i",{class:"icon-device"})],-1)),V("div",SGe,[B[7]||(B[7]=V("div",{class:"card-title"},"设备总数",-1)),V("div",CGe,Xe(i.value),1)])])]),_:1}),de(j,{class:"status-card"},{default:ge(()=>[V("div",TGe,[B[10]||(B[10]=V("div",{class:"card-icon alarm-count"},[V("i",{class:"icon-alarm"})],-1)),V("div",MGe,[B[9]||(B[9]=V("div",{class:"card-title"},"当前告警",-1)),V("div",{class:se(["card-value",{"text-danger":a.value>0}])},Xe(a.value),3)])])]),_:1}),de(j,{class:"status-card"},{default:ge(()=>[V("div",kGe,[B[12]||(B[12]=V("div",{class:"card-icon efficiency"},[V("i",{class:"icon-efficiency"})],-1)),V("div",EGe,[B[11]||(B[11]=V("div",{class:"card-title"},"运行效率",-1)),V("div",AGe,Xe(o.value)+"%",1)])])]),_:1})]),V("div",PGe,[de(j,{class:"chart-card"},{header:ge(()=>B[13]||(B[13]=[V("div",{class:"chart-header"},[V("span",null,"设备健康状态分布")],-1)])),default:ge(()=>[V("div",{class:"chart-wrapper",ref_key:"healthDistributionChart",ref:s},null,512)]),_:1}),de(j,{class:"chart-card"},{header:ge(()=>B[14]||(B[14]=[V("div",{class:"chart-header"},[V("span",null,"告警趋势分析")],-1)])),default:ge(()=>[V("div",{class:"chart-wrapper",ref_key:"alarmTrendChart",ref:l},null,512)]),_:1})]),de(j,{class:"device-health-card"},{header:ge(()=>[V("div",IGe,[B[16]||(B[16]=V("span",null,"关键设备健康状态",-1)),de(W,{type:"text",onClick:f},{default:ge(()=>B[15]||(B[15]=[$t("刷新")])),_:1})])]),default:ge(()=>[de(ue,{data:c.value,style:{width:"100%"}},{default:ge(()=>[de(U,{prop:"name",label:"设备名称",width:"180"}),de(U,{prop:"location",label:"位置",width:"150"}),de(U,{prop:"healthScore",label:"健康评分"},{default:ge(J=>[V("div",LGe,[de(Y,{percentage:J.row.healthScore,color:C(J.row.healthScore)},null,8,["percentage","color"])])]),_:1}),de(U,{prop:"status",label:"状态"},{default:ge(J=>[de(ie,{type:T(J.row.status)},{default:ge(()=>[$t(Xe(J.row.status),1)]),_:2},1032,["type"])]),_:1}),de(U,{prop:"lastMaintenance",label:"上次维护"}),de(U,{label:"操作",width:"100"},{default:ge(J=>[de(W,{onClick:q=>p(J.row),type:"text",size:"small"},{default:ge(()=>B[17]||(B[17]=[$t(" 查看 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),de(j,{class:"recent-alarms-card"},{header:ge(()=>[V("div",DGe,[B[19]||(B[19]=V("span",null,"最近告警",-1)),de(W,{type:"text",onClick:v},{default:ge(()=>B[18]||(B[18]=[$t("查看全部")])),_:1})])]),default:ge(()=>[de(ue,{data:h.value,style:{width:"100%"}},{default:ge(()=>[de(U,{prop:"time",label:"时间",width:"180"}),de(U,{prop:"device",label:"设备",width:"150"}),de(U,{prop:"level",label:"等级"},{default:ge(J=>[de(ie,{type:E(J.row.level)},{default:ge(()=>[$t(Xe(J.row.level),1)]),_:2},1032,["type"])]),_:1}),de(U,{prop:"message",label:"告警信息"}),de(U,{label:"操作",width:"150"},{default:ge(J=>[de(W,{onClick:q=>_(J.row),type:"text",size:"small"},{default:ge(()=>B[20]||(B[20]=[$t(" 处理 ")])),_:2},1032,["onClick"]),de(W,{onClick:q=>b(J.row),type:"text",size:"small"},{default:ge(()=>B[21]||(B[21]=[$t(" 忽略 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},OGe=Ms(RGe,[["__scopeId","data-v-61701e7d"]]),zGe={class:"digital-twin-data"},BGe={class:"page-header"},FGe={class:"time-controls"},NGe={class:"card-header"},$Ge={class:"parameter-form"},VGe={class:"form-item"},HGe={class:"form-item"},jGe={class:"form-item"},UGe={class:"form-item"},WGe={class:"form-buttons"},GGe={class:"card-header"},KGe={class:"chart-controls"},qGe={class:"card-header"},ZGe={class:"table-controls"},YGe={class:"pagination-container"},XGe={__name:"DigitalTwinData",setup(e){Io([m4,g4,WUe,L9e,Jk,Xk,Qk,k4,K7e,Jte,eE]);const t=le([new Date(Date.now()-7*24*60*60*1e3),new Date]),n=le("device-001"),r=le(["temperature","pressure"]),i=le("hour"),a=le("raw"),o=le("line"),s=le(""),l=le(1),c=le(20),h=le(100),f=le(null),p=le(null),v=[{text:"最近一周",value:()=>{const J=new Date,q=new Date;return q.setTime(q.getTime()-3600*1e3*24*7),[q,J]}},{text:"最近一个月",value:()=>{const J=new Date,q=new Date;return q.setTime(q.getTime()-3600*1e3*24*30),[q,J]}},{text:"最近三个月",value:()=>{const J=new Date,q=new Date;return q.setTime(q.getTime()-3600*1e3*24*90),[q,J]}}],_=[{value:"device-001",label:"K60发电机-001"},{value:"device-002",label:"热交换器-103"},{value:"device-003",label:"阀门系统-205"},{value:"device-004",label:"液压泵-054"},{value:"device-005",label:"舵机系统-A12"}],b=[{value:"temperature",label:"温度 (°C)"},{value:"pressure",label:"压力 (MPa)"},{value:"vibration",label:"振动 (Hz)"},{value:"flow",label:"流量 (L/min)"},{value:"rotation",label:"转速 (rpm)"},{value:"voltage",label:"电压 (V)"},{value:"current",label:"电流 (A)"},{value:"oil-level",label:"油位 (%)"}],C=le([]),T=()=>{C.value=[];const J=t.value[0],q=t.value[1];let ce;switch(i.value){case"minute":ce=60*1e3;break;case"hour":ce=60*60*1e3;break;case"day":ce=24*60*60*1e3;break}for(let re=J.getTime();re<=q.getTime();re+=ce){const ee={timestamp:new Date(re).toLocaleString(),temperature:Math.round((Math.random()*10+65)*10)/10,pressure:Math.round((Math.random()*.5+1.8)*100)/100,vibration:Math.round((Math.random()*2+1)*100)/100,flow:Math.round(Math.random()*50+150),rotation:Math.round(Math.random()*200+1800),voltage:Math.round(Math.random()*5+220),current:Math.round((Math.random()*2+10)*10)/10,"oil-level":Math.round(Math.random()*20+80)};n.value==="device-001"&&Math.random()>.9&&(ee.temperature+=15,ee.vibration+=2),C.value.push(ee)}h.value=C.value.length},E=X(()=>{let J=C.value;s.value&&(J=J.filter(ce=>Object.values(ce).some(re=>re.toString().toLowerCase().includes(s.value.toLowerCase()))));const q=(l.value-1)*c.value;return J.slice(q,q+c.value)}),A=J=>{const q=b.find(ce=>ce.value===J);return q?q.label:J},I=()=>{r.value=["temperature","pressure"],i.value="hour",a.value="raw"},O=()=>{T(),l.value=1},B=()=>{if(!f.value)return;const J=Ef(f.value),q=C.value.map(ee=>ee.timestamp),ce=r.value.map(ee=>({name:A(ee),type:o.value,data:C.value.map(oe=>oe[ee]),itemStyle:{color:function(oe){let be=oe.value,we;switch(ee){case"temperature":we=75;break;case"vibration":we=2.5;break;case"pressure":we=2.2;break;default:return}return be>we?"#f56c6c":void 0}}})),re={title:{text:`${_.find(ee=>ee.value===n.value).label} 参数趋势图`,left:"center",textStyle:{color:"#e2e8f0"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:r.value.map(A),bottom:10,textStyle:{color:"#e2e8f0"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"10%",containLabel:!0},toolbox:{feature:{saveAsImage:{title:"保存图片"},dataZoom:{title:"数据缩放"},restore:{title:"还原"}},iconStyle:{borderColor:"#e2e8f0"}},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}],xAxis:{type:"category",boundaryGap:o.value==="bar",data:q,axisLine:{lineStyle:{color:"#e2e8f0"}}},yAxis:r.value.map((ee,oe)=>{var we;return{type:"value",name:((we=A(ee).match(/\((.*?)\)/))==null?void 0:we[1])||"",position:oe%2===0?"left":"right",offset:oe>1?80:0,axisLine:{lineStyle:{color:"#e2e8f0"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.1)"}}}}),series:ce};J.setOption(re),window.addEventListener("resize",()=>{J.resize()}),r.value.length>1&&N()},N=()=>{if(!p.value)return;const J=Ef(p.value),q=r.value.map(A),ce=[];for(let ee=0;ee<r.value.length;ee++)for(let oe=0;oe<r.value.length;oe++){const be=r.value[ee],we=r.value[oe],pe=H(C.value.map(Ce=>Ce[be]),C.value.map(Ce=>Ce[we]));ce.push([ee,oe,pe.toFixed(2)])}const re={title:{text:"参数相关性热力图",left:"center",textStyle:{color:"#e2e8f0"}},tooltip:{position:"top",formatter:function(ee){return`${q[ee.data[0]]} 与 ${q[ee.data[1]]} 相关性: ${ee.data[2]}`}},grid:{left:"3%",right:"7%",bottom:"10%",top:"18%",containLabel:!0},xAxis:{type:"category",data:q,splitArea:{show:!0},axisLabel:{color:"#e2e8f0",interval:0,rotate:30}},yAxis:{type:"category",data:q,splitArea:{show:!0},axisLabel:{color:"#e2e8f0"}},visualMap:{min:-1,max:1,calculable:!0,orient:"horizontal",left:"center",bottom:"0%",inRange:{color:["#f56c6c","#ffffff","#67c23a"]},textStyle:{color:"#e2e8f0"}},series:[{name:"相关性",type:"heatmap",data:ce,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};J.setOption(re),window.addEventListener("resize",()=>{J.resize()})},H=(J,q)=>{if(J.length!==q.length)return 0;const ce=J.length,re=J.reduce((pe,Ce)=>pe+Ce,0)/ce,ee=q.reduce((pe,Ce)=>pe+Ce,0)/ce;let oe=0,be=0,we=0;for(let pe=0;pe<ce;pe++)oe+=(J[pe]-re)*(q[pe]-ee),be+=Math.pow(J[pe]-re,2),we+=Math.pow(q[pe]-ee,2);return oe/(Math.sqrt(be)*Math.sqrt(we))},j=J=>{o.value=J,B()},W=()=>{if(!f.value)return;const J=mee(f.value);if(J){const q=J.getDataURL(),ce=document.createElement("a");ce.href=q,ce.download=`${n.value}_data_chart.png`,ce.click()}},U=()=>{console.log("导出数据:",{device:n.value,parameters:r.value,timeRange:t.value,accuracy:i.value,dataType:a.value})},Y=()=>{console.log("导出表格数据",C.value)},ie=J=>{c.value=J},ue=J=>{l.value=J};return At([n,t,i],()=>{O()}),Un(()=>{O(),setTimeout(()=>{B()},100)}),(J,q)=>{const ce=Xt("el-date-picker"),re=Xt("el-button"),ee=Xt("el-option"),oe=Xt("el-select"),be=Xt("el-radio-button"),we=Xt("el-radio-group"),pe=Xt("el-card"),Ce=Xt("el-button-group"),Ve=Xt("el-input"),et=Xt("el-table-column"),Ee=Xt("el-table"),Je=Xt("el-pagination");return te(),me("div",zGe,[V("div",BGe,[q[9]||(q[9]=V("h2",null,"数据分析",-1)),V("div",FGe,[de(ce,{modelValue:t.value,"onUpdate:modelValue":q[0]||(q[0]=Ue=>t.value=Ue),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:v,size:"small"},null,8,["modelValue"]),de(re,{type:"primary",size:"small",onClick:O},{default:ge(()=>q[8]||(q[8]=[$t("查询")])),_:1})])]),de(pe,{class:"parameter-selector-card"},{header:ge(()=>[V("div",NGe,[q[11]||(q[11]=V("span",null,"参数选择",-1)),de(re,{type:"text",onClick:I},{default:ge(()=>q[10]||(q[10]=[$t("重置")])),_:1})])]),default:ge(()=>[V("div",$Ge,[V("div",VGe,[q[12]||(q[12]=V("span",{class:"label"},"设备：",-1)),de(oe,{modelValue:n.value,"onUpdate:modelValue":q[1]||(q[1]=Ue=>n.value=Ue),placeholder:"选择设备",size:"small"},{default:ge(()=>[(te(),me(hn,null,Kn(_,Ue=>de(ee,{key:Ue.value,label:Ue.label,value:Ue.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),V("div",HGe,[q[13]||(q[13]=V("span",{class:"label"},"参数：",-1)),de(oe,{modelValue:r.value,"onUpdate:modelValue":q[2]||(q[2]=Ue=>r.value=Ue),multiple:"","collapse-tags":"",placeholder:"选择参数",size:"small"},{default:ge(()=>[(te(),me(hn,null,Kn(b,Ue=>de(ee,{key:Ue.value,label:Ue.label,value:Ue.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),V("div",jGe,[q[17]||(q[17]=V("span",{class:"label"},"时间精度：",-1)),de(we,{modelValue:i.value,"onUpdate:modelValue":q[3]||(q[3]=Ue=>i.value=Ue),size:"small"},{default:ge(()=>[de(be,{label:"minute"},{default:ge(()=>q[14]||(q[14]=[$t("分钟")])),_:1}),de(be,{label:"hour"},{default:ge(()=>q[15]||(q[15]=[$t("小时")])),_:1}),de(be,{label:"day"},{default:ge(()=>q[16]||(q[16]=[$t("天")])),_:1})]),_:1},8,["modelValue"])]),V("div",UGe,[q[21]||(q[21]=V("span",{class:"label"},"数据类型：",-1)),de(we,{modelValue:a.value,"onUpdate:modelValue":q[4]||(q[4]=Ue=>a.value=Ue),size:"small"},{default:ge(()=>[de(be,{label:"raw"},{default:ge(()=>q[18]||(q[18]=[$t("原始数据")])),_:1}),de(be,{label:"avg"},{default:ge(()=>q[19]||(q[19]=[$t("平均值")])),_:1}),de(be,{label:"min-max"},{default:ge(()=>q[20]||(q[20]=[$t("最大/最小值")])),_:1})]),_:1},8,["modelValue"])]),V("div",WGe,[de(re,{type:"primary",onClick:B},{default:ge(()=>q[22]||(q[22]=[$t("生成图表")])),_:1}),de(re,{onClick:U},{default:ge(()=>q[23]||(q[23]=[$t("导出数据")])),_:1})])])]),_:1}),de(pe,{class:"data-chart-card"},{header:ge(()=>[V("div",GGe,[q[27]||(q[27]=V("span",null,"数据趋势图",-1)),V("div",KGe,[de(Ce,{size:"small"},{default:ge(()=>[de(re,{type:o.value==="line"?"primary":"",onClick:q[5]||(q[5]=Ue=>j("line")),icon:"el-icon-line-chart"},{default:ge(()=>q[24]||(q[24]=[$t("线图")])),_:1},8,["type"]),de(re,{type:o.value==="bar"?"primary":"",onClick:q[6]||(q[6]=Ue=>j("bar")),icon:"el-icon-bar-chart"},{default:ge(()=>q[25]||(q[25]=[$t("柱图")])),_:1},8,["type"])]),_:1}),de(re,{size:"small",icon:"el-icon-download",onClick:W},{default:ge(()=>q[26]||(q[26]=[$t("保存图表")])),_:1})])])]),default:ge(()=>[V("div",{class:"chart-wrapper",ref_key:"dataChart",ref:f},null,512)]),_:1}),r.value.length>1?(te(),ft(pe,{key:0,class:"correlation-card"},{header:ge(()=>q[28]||(q[28]=[V("div",{class:"card-header"},[V("span",null,"参数相关性分析")],-1)])),default:ge(()=>[V("div",{class:"correlation-wrapper",ref_key:"correlationChart",ref:p},null,512)]),_:1})):Ge("",!0),de(pe,{class:"data-table-card"},{header:ge(()=>[V("div",qGe,[q[30]||(q[30]=V("span",null,"数据明细",-1)),V("div",ZGe,[de(Ve,{modelValue:s.value,"onUpdate:modelValue":q[7]||(q[7]=Ue=>s.value=Ue),placeholder:"搜索",size:"small",clearable:"",style:{width:"200px"}},null,8,["modelValue"]),de(re,{size:"small",type:"success",icon:"el-icon-download",onClick:Y},{default:ge(()=>q[29]||(q[29]=[$t("导出表格")])),_:1})])])]),default:ge(()=>[de(Ee,{data:E.value,stripe:"",border:"",style:{width:"100%"},height:"350"},{default:ge(()=>[de(et,{type:"index",width:"50"}),de(et,{prop:"timestamp",label:"时间",width:"180"}),(te(!0),me(hn,null,Kn(r.value,Ue=>(te(),ft(et,{key:Ue,prop:Ue,label:A(Ue)},null,8,["prop","label"]))),128))]),_:1},8,["data"]),V("div",YGe,[de(Je,{onSizeChange:ie,onCurrentChange:ue,"current-page":l.value,"page-sizes":[10,20,50,100],"page-size":c.value,layout:"total, sizes, prev, pager, next, jumper",total:h.value},null,8,["current-page","page-size","total"])])]),_:1})])}}},JGe=Ms(XGe,[["__scopeId","data-v-196d6761"]]),QGe={class:"digital-twin-alarm"},eKe={class:"page-header"},tKe={class:"action-buttons"},nKe={class:"alarm-stats"},rKe={class:"stat-content"},iKe={class:"stat-value error"},aKe={class:"stat-content"},oKe={class:"stat-value warning"},sKe={class:"stat-content"},lKe={class:"stat-value notice"},uKe={class:"stat-content"},cKe={class:"stat-value"},dKe={class:"filter-form"},hKe={class:"card-header"},fKe={class:"table-controls"},pKe={class:"alarm-detail"},vKe={class:"detail-item"},mKe={class:"detail-value"},gKe={class:"detail-item"},yKe={class:"detail-value"},_Ke={class:"detail-item"},bKe={class:"detail-value"},wKe={key:0,class:"detail-item"},xKe={class:"detail-value"},SKe={class:"detail-buttons"},CKe={class:"pagination-container"},TKe={class:"dialog-footer"},MKe={__name:"DigitalTwinAlarm",setup(e){const t=le({critical:5,warning:12,notice:8}),n=[{value:"device-001",label:"K60发电机-001"},{value:"device-002",label:"热交换器-103"},{value:"device-003",label:"阀门系统-205"},{value:"device-004",label:"液压泵-054"},{value:"device-005",label:"舵机系统-A12"}],r=[{value:"restart",label:"重启设备"},{value:"replace",label:"更换部件"},{value:"adjust",label:"调整参数"},{value:"maintenance",label:"安排维护"},{value:"monitor",label:"持续监控"},{value:"other",label:"其他方案"}],i=X(()=>t.value.critical+t.value.warning+t.value.notice),a=le([]),o=le([]),s=le(1),l=le(10),c=le(""),h=le({device:"",level:"",status:"",timeRange:null}),f=le(!1),p=le({solution:"",comment:""}),v=le(null),_=X(()=>o.value.length>0),b=X(()=>{let pe=a.value;if(c.value){const et=c.value.toLowerCase();pe=pe.filter(Ee=>Ee.message.toLowerCase().includes(et)||Ee.device.toLowerCase().includes(et)||Ee.level.toLowerCase().includes(et))}if(h.value.device&&(pe=pe.filter(et=>et.device===h.value.device)),h.value.level&&(pe=pe.filter(et=>et.level===h.value.level)),h.value.status&&(pe=pe.filter(et=>et.status===h.value.status)),h.value.timeRange&&h.value.timeRange.length===2){const et=h.value.timeRange[0].getTime(),Ee=h.value.timeRange[1].getTime();pe=pe.filter(Je=>{const Ue=new Date(Je.timestamp).getTime();return Ue>=et&&Ue<=Ee})}const Ce=(s.value-1)*l.value,Ve=Ce+l.value;return pe.slice(Ce,Ve)}),C=X(()=>a.value.length),T=pe=>{const Ce=n.find(Ve=>Ve.value===pe);return Ce?`${Ce.label} (ID: ${pe})`:pe},E=pe=>{switch(pe){case"critical":return"danger";case"warning":return"warning";case"notice":return"info";default:return""}},A=pe=>{switch(pe){case"unhandled":return"danger";case"processing":return"warning";case"resolved":return"success";case"ignored":return"info";default:return""}},I=pe=>{switch(pe){case"unhandled":return"未处理";case"processing":return"处理中";case"resolved":return"已解决";case"ignored":return"已忽略";default:return pe}},O=()=>{B()},B=()=>{const pe=[],Ce=["critical","warning","notice"],Ve=["unhandled","processing","resolved","ignored"],et=["温度过高","压力异常","振动超标","油位过低","电压波动","数据通信中断","传感器故障","控制系统异常","冷却系统效率下降","运行参数偏离正常范围"];for(let Ee=0;Ee<50;Ee++){const Je=Math.floor(Math.random()*n.length),Ue=Math.floor(Math.random()*Ce.length),yt=Math.floor(Math.random()*Ve.length),Ne=Math.floor(Math.random()*et.length),dt=new Date;dt.setDate(dt.getDate()-Math.floor(Math.random()*30)),pe.push({id:`alarm-${Ee+1}`,device:n[Je].value,level:Ce[Ue],status:Ve[yt],message:`${n[Je].label}: ${et[Ne]}`,timestamp:dt.toLocaleString(),description:`详细描述: ${n[Je].label}设备${et[Ne]}，可能导致设备性能下降或安全隐患。`,recommendation:"建议立即检查设备，排查故障原因，必要时联系技术支持。",solution:Ve[yt]==="resolved"?"已重启设备并调整参数，设备恢复正常运行。":""})}a.value=pe,N()},N=()=>{const pe={critical:0,warning:0,notice:0};a.value.forEach(Ce=>{Ce.status!=="resolved"&&Ce.status!=="ignored"&&pe[Ce.level]++}),t.value=pe},H=()=>{console.log("导出告警记录")},j=()=>{s.value=1},W=()=>{h.value={device:"",level:"",status:"",timeRange:null},s.value=1},U=pe=>{o.value=pe},Y=pe=>{v.value=pe,p.value={solution:"",comment:""},f.value=!0},ie=()=>{if(!v.value)return;const pe=a.value.find(Ce=>Ce.id===v.value.id);pe&&(pe.status="processing",N()),f.value=!1},ue=pe=>{const Ce=a.value.find(Ve=>Ve.id===pe.id);Ce&&(Ce.status="resolved",Ce.solution="已确认解决，设备恢复正常运行。",N())},J=pe=>{const Ce=a.value.find(Ve=>Ve.id===pe.id);Ce&&(Ce.status="ignored",N())},q=pe=>{a.value=a.value.filter(Ce=>Ce.id!==pe.id),N()},ce=()=>{o.value.forEach(pe=>{const Ce=a.value.find(Ve=>Ve.id===pe.id);Ce&&Ce.status==="unhandled"&&(Ce.status="processing")}),N()},re=()=>{o.value.forEach(pe=>{const Ce=a.value.find(Ve=>Ve.id===pe.id);Ce&&["unhandled","processing"].includes(Ce.status)&&(Ce.status="ignored")}),N()},ee=pe=>{console.log("查看设备详情:",pe)},oe=pe=>{console.log("查看历史告警:",pe)},be=pe=>{l.value=pe},we=pe=>{s.value=pe};return Un(()=>{B()}),(pe,Ce)=>{const Ve=Xt("el-button"),et=Xt("el-card"),Ee=Xt("el-option"),Je=Xt("el-select"),Ue=Xt("el-form-item"),yt=Xt("el-date-picker"),Ne=Xt("el-form"),dt=Xt("el-input"),Le=Xt("el-button-group"),ze=Xt("el-table-column"),ct=Xt("el-tag"),Lt=Xt("el-table"),lt=Xt("el-pagination"),Ct=Xt("el-dialog");return te(),me("div",QGe,[V("div",eKe,[Ce[11]||(Ce[11]=V("h2",null,"告警管理",-1)),V("div",tKe,[de(Ve,{type:"primary",size:"small",onClick:O},{default:ge(()=>Ce[9]||(Ce[9]=[$t("刷新数据")])),_:1}),de(Ve,{type:"success",size:"small",onClick:H},{default:ge(()=>Ce[10]||(Ce[10]=[$t("导出记录")])),_:1})])]),V("div",nKe,[de(et,{class:"stat-card"},{default:ge(()=>[V("div",rKe,[Ce[12]||(Ce[12]=V("span",{class:"stat-label"},"严重告警",-1)),V("span",iKe,Xe(t.value.critical),1)])]),_:1}),de(et,{class:"stat-card"},{default:ge(()=>[V("div",aKe,[Ce[13]||(Ce[13]=V("span",{class:"stat-label"},"警告告警",-1)),V("span",oKe,Xe(t.value.warning),1)])]),_:1}),de(et,{class:"stat-card"},{default:ge(()=>[V("div",sKe,[Ce[14]||(Ce[14]=V("span",{class:"stat-label"},"注意告警",-1)),V("span",lKe,Xe(t.value.notice),1)])]),_:1}),de(et,{class:"stat-card"},{default:ge(()=>[V("div",uKe,[Ce[15]||(Ce[15]=V("span",{class:"stat-label"},"总告警数",-1)),V("span",cKe,Xe(i.value),1)])]),_:1})]),de(et,{class:"filter-card"},{default:ge(()=>[V("div",dKe,[de(Ne,{inline:!0,model:h.value,size:"small"},{default:ge(()=>[de(Ue,{label:"设备"},{default:ge(()=>[de(Je,{modelValue:h.value.device,"onUpdate:modelValue":Ce[0]||(Ce[0]=_t=>h.value.device=_t),placeholder:"选择设备",clearable:""},{default:ge(()=>[(te(),me(hn,null,Kn(n,_t=>de(Ee,{key:_t.value,label:_t.label,value:_t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),de(Ue,{label:"告警级别"},{default:ge(()=>[de(Je,{modelValue:h.value.level,"onUpdate:modelValue":Ce[1]||(Ce[1]=_t=>h.value.level=_t),placeholder:"选择级别",clearable:""},{default:ge(()=>[de(Ee,{label:"严重",value:"critical"}),de(Ee,{label:"警告",value:"warning"}),de(Ee,{label:"注意",value:"notice"})]),_:1},8,["modelValue"])]),_:1}),de(Ue,{label:"状态"},{default:ge(()=>[de(Je,{modelValue:h.value.status,"onUpdate:modelValue":Ce[2]||(Ce[2]=_t=>h.value.status=_t),placeholder:"选择状态",clearable:""},{default:ge(()=>[de(Ee,{label:"未处理",value:"unhandled"}),de(Ee,{label:"处理中",value:"processing"}),de(Ee,{label:"已解决",value:"resolved"}),de(Ee,{label:"已忽略",value:"ignored"})]),_:1},8,["modelValue"])]),_:1}),de(Ue,{label:"时间范围"},{default:ge(()=>[de(yt,{modelValue:h.value.timeRange,"onUpdate:modelValue":Ce[3]||(Ce[3]=_t=>h.value.timeRange=_t),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),de(Ue,null,{default:ge(()=>[de(Ve,{type:"primary",onClick:j},{default:ge(()=>Ce[16]||(Ce[16]=[$t("应用筛选")])),_:1}),de(Ve,{onClick:W},{default:ge(()=>Ce[17]||(Ce[17]=[$t("重置")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),de(et,{class:"alarm-table-card"},{header:ge(()=>[V("div",hKe,[Ce[20]||(Ce[20]=V("span",null,"告警列表",-1)),V("div",fKe,[de(dt,{modelValue:c.value,"onUpdate:modelValue":Ce[4]||(Ce[4]=_t=>c.value=_t),placeholder:"搜索告警信息","prefix-icon":"el-icon-search",clearable:"",size:"small",style:{width:"220px"}},null,8,["modelValue"]),de(Le,null,{default:ge(()=>[de(Ve,{size:"small",type:"primary",onClick:ce,disabled:!_.value},{default:ge(()=>Ce[18]||(Ce[18]=[$t("批量处理")])),_:1},8,["disabled"]),de(Ve,{size:"small",type:"danger",onClick:re,disabled:!_.value},{default:ge(()=>Ce[19]||(Ce[19]=[$t("批量忽略")])),_:1},8,["disabled"])]),_:1})])])]),default:ge(()=>[de(Lt,{ref:"alarmTable",data:b.value,style:{width:"100%"},onSelectionChange:U,border:""},{default:ge(()=>[de(ze,{type:"selection",width:"55"}),de(ze,{type:"expand"},{default:ge(_t=>[V("div",pKe,[V("div",vKe,[Ce[21]||(Ce[21]=V("span",{class:"detail-label"},"设备信息:",-1)),V("span",mKe,Xe(T(_t.row.device)),1)]),V("div",gKe,[Ce[22]||(Ce[22]=V("span",{class:"detail-label"},"详细描述:",-1)),V("span",yKe,Xe(_t.row.description),1)]),V("div",_Ke,[Ce[23]||(Ce[23]=V("span",{class:"detail-label"},"推荐操作:",-1)),V("span",bKe,Xe(_t.row.recommendation),1)]),_t.row.solution?(te(),me("div",wKe,[Ce[24]||(Ce[24]=V("span",{class:"detail-label"},"解决方案:",-1)),V("span",xKe,Xe(_t.row.solution),1)])):Ge("",!0),V("div",SKe,[de(Ve,{type:"primary",size:"small",onClick:It=>ee(_t.row.device)},{default:ge(()=>Ce[25]||(Ce[25]=[$t("查看设备")])),_:2},1032,["onClick"]),de(Ve,{type:"success",size:"small",onClick:It=>oe(_t.row.device)},{default:ge(()=>Ce[26]||(Ce[26]=[$t("历史告警")])),_:2},1032,["onClick"])])])]),_:1}),de(ze,{prop:"timestamp",label:"时间",width:"180"}),de(ze,{prop:"device",label:"设备",width:"150"}),de(ze,{prop:"level",label:"级别",width:"100"},{default:ge(_t=>[de(ct,{type:E(_t.row.level),effect:"dark"},{default:ge(()=>[$t(Xe(_t.row.level),1)]),_:2},1032,["type"])]),_:1}),de(ze,{prop:"message",label:"告警信息"}),de(ze,{prop:"status",label:"状态",width:"100"},{default:ge(_t=>[de(ct,{type:A(_t.row.status)},{default:ge(()=>[$t(Xe(I(_t.row.status)),1)]),_:2},1032,["type"])]),_:1}),de(ze,{label:"操作",width:"200"},{default:ge(_t=>[_t.row.status==="unhandled"?(te(),ft(Ve,{key:0,type:"primary",size:"mini",onClick:It=>Y(_t.row)},{default:ge(()=>Ce[27]||(Ce[27]=[$t("处理")])),_:2},1032,["onClick"])):Ge("",!0),_t.row.status==="processing"?(te(),ft(Ve,{key:1,type:"success",size:"mini",onClick:It=>ue(_t.row)},{default:ge(()=>Ce[28]||(Ce[28]=[$t("解决")])),_:2},1032,["onClick"])):Ge("",!0),["unhandled","processing"].includes(_t.row.status)?(te(),ft(Ve,{key:2,type:"info",size:"mini",onClick:It=>J(_t.row)},{default:ge(()=>Ce[29]||(Ce[29]=[$t("忽略")])),_:2},1032,["onClick"])):Ge("",!0),de(Ve,{type:"danger",size:"mini",onClick:It=>q(_t.row)},{default:ge(()=>Ce[30]||(Ce[30]=[$t("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",CKe,[de(lt,{onSizeChange:be,onCurrentChange:we,"current-page":s.value,"page-sizes":[10,20,50,100],"page-size":l.value,layout:"total, sizes, prev, pager, next, jumper",total:C.value},null,8,["current-page","page-size","total"])])]),_:1}),de(Ct,{title:"处理告警",modelValue:f.value,"onUpdate:modelValue":Ce[8]||(Ce[8]=_t=>f.value=_t),width:"500px"},{footer:ge(()=>[V("span",TKe,[de(Ve,{onClick:Ce[7]||(Ce[7]=_t=>f.value=!1)},{default:ge(()=>Ce[31]||(Ce[31]=[$t("取消")])),_:1}),de(Ve,{type:"primary",onClick:ie},{default:ge(()=>Ce[32]||(Ce[32]=[$t("确定")])),_:1})])]),default:ge(()=>[de(Ne,{model:p.value,"label-width":"100px"},{default:ge(()=>[de(Ue,{label:"告警信息"},{default:ge(()=>[V("span",null,Xe(v.value?v.value.message:""),1)]),_:1}),de(Ue,{label:"处理方案"},{default:ge(()=>[de(Je,{modelValue:p.value.solution,"onUpdate:modelValue":Ce[5]||(Ce[5]=_t=>p.value.solution=_t),placeholder:"选择解决方案"},{default:ge(()=>[(te(),me(hn,null,Kn(r,_t=>de(Ee,{key:_t.value,label:_t.label,value:_t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),de(Ue,{label:"处理备注"},{default:ge(()=>[de(dt,{type:"textarea",modelValue:p.value.comment,"onUpdate:modelValue":Ce[6]||(Ce[6]=_t=>p.value.comment=_t),rows:3,placeholder:"请输入处理备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},kKe=Ms(MKe,[["__scopeId","data-v-52c0ca93"]]),EKe={class:"digital-twin-maintenance"},AKe={class:"page-header"},PKe={class:"action-buttons"},IKe={class:"health-status-cards"},LKe={class:"device-health-info"},DKe={class:"health-status"},RKe={class:"device-info"},OKe={class:"device-detail"},zKe={class:"detail-value"},BKe={class:"device-detail"},FKe={class:"detail-value"},NKe={class:"device-detail"},$Ke={class:"device-actions"},VKe={class:"card-header"},HKe={class:"view-controls"},jKe={class:"card-header"},UKe={class:"card-header"},WKe={class:"task-filter"},GKe={class:"card-header"},KKe={__name:"DigitalTwinMaintenance",setup(e){Io([g4,m4,o9e,Jk,Xk,Qk,k4,Jte,dGe,o7e,eE]);const t=le("month"),n=le(""),r=le("all"),i=le("30"),a=le(null),o=le(null),s=le(null),l=le([{id:1,name:"K60发电机-001",healthScore:86,remainingLife:125,nextMaintenance:"2023-11-15",riskLevel:"low",riskLevelText:"低"},{id:2,name:"热交换器-103",healthScore:72,remainingLife:65,nextMaintenance:"2023-10-30",riskLevel:"medium",riskLevelText:"中"},{id:3,name:"阀门系统-205",healthScore:58,remainingLife:23,nextMaintenance:"2023-10-25",riskLevel:"high",riskLevelText:"高"},{id:4,name:"液压泵-054",healthScore:92,remainingLife:180,nextMaintenance:"2023-12-18",riskLevel:"low",riskLevelText:"低"}]),c=[{value:"k60-001",label:"K60发电机-001"},{value:"heat-103",label:"热交换器-103"},{value:"valve-205",label:"阀门系统-205"},{value:"pump-054",label:"液压泵-054"},{value:"rudder-a12",label:"舵机系统-A12"}],h=le([{id:1,date:"2023-10-25",device:"阀门系统-205",task:"更换密封圈并清洁阀门内部",assignee:"张工",status:"pending"},{id:2,date:"2023-10-28",device:"热交换器-103",task:"清洗换热管路并检查连接点",assignee:"李工",status:"pending"},{id:3,date:"2023-10-15",device:"K60发电机-001",task:"更换轴承并润滑传动装置",assignee:"王工",status:"completed"},{id:4,date:"2023-10-20",device:"液压泵-054",task:"检查泵压力并更换液压油",assignee:"刘工",status:"inProgress"},{id:5,date:"2023-10-10",device:"舵机系统-A12",task:"清洁控制器并测试响应时间",assignee:"赵工",status:"delayed"}]),f=X(()=>r.value==="all"?h.value:h.value.filter(H=>H.status===r.value)),p=H=>H>=80?"#67c23a":H>=60?"#e6a23c":"#f56c6c",v=H=>{switch(H){case"completed":return"success";case"inProgress":return"primary";case"pending":return"info";case"delayed":return"warning";default:return""}},_=H=>{switch(H){case"completed":return"已完成";case"inProgress":return"进行中";case"pending":return"待处理";case"delayed":return"已延期";default:return H}},b=H=>{console.log("查看设备详情:",H.name)},C=H=>{console.log("安排维护:",H.name)},T=H=>{console.log("开始任务:",H.id),H.status="inProgress"},E=H=>{console.log("完成任务:",H.id),H.status="completed"},A=H=>{console.log("延期任务:",H.id),H.status="delayed"},I=H=>{console.log("查看任务详情:",H.id)},O=()=>{if(!a.value)return;const H=Ef(a.value),j=[],W=new Date,U=new Date(W.getFullYear(),W.getMonth(),1),Y=new Date(W.getFullYear(),W.getMonth()+1,0);for(let ue=1;ue<=Y.getDate();ue++){const J=new Date(W.getFullYear(),W.getMonth(),ue),q=Math.floor(Math.random()*3);q>0&&j.push([J.getFullYear()+"-"+(J.getMonth()+1).toString().padStart(2,"0")+"-"+J.getDate().toString().padStart(2,"0"),q])}const ie={tooltip:{position:"top",formatter:function(ue){return ue.data[0]+": "+ue.data[1]+" 个任务"}},visualMap:{min:0,max:3,calculable:!0,orient:"horizontal",left:"center",bottom:10,textStyle:{color:"#e2e8f0"},inRange:{color:["#4299e1","#805ad5","#e53e3e"]}},calendar:{top:50,left:40,right:40,cellSize:["auto",30],range:U.getFullYear()+"-"+(U.getMonth()+1),itemStyle:{borderWidth:1,borderColor:"#334155"},yearLabel:{show:!1},dayLabel:{nameMap:"cn",color:"#e2e8f0"},monthLabel:{nameMap:"cn",color:"#e2e8f0"}},series:{type:"heatmap",coordinateSystem:"calendar",data:j}};H.setOption(ie),window.addEventListener("resize",()=>{H.resize()})},B=()=>{if(!o.value)return;const H=Ef(o.value),j=[],W=new Date;for(let Y=0;Y<12;Y++){const ie=new Date(W.getFullYear(),W.getMonth()+Y,1);j.push(ie.getFullYear()+"/"+(ie.getMonth()+1))}const U={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["轴承","密封圈","控制器","冷却系统","液压系统"],textStyle:{color:"#e2e8f0"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:j,axisLine:{lineStyle:{color:"#e2e8f0"}}},yAxis:{type:"value",name:"剩余寿命(%)",min:0,max:100,axisLine:{lineStyle:{color:"#e2e8f0"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.1)"}}},series:[{name:"轴承",type:"line",data:[90,85,80,75,70,65,60,55,50,45,40,35],lineStyle:{width:3},symbolSize:8},{name:"密封圈",type:"line",data:[95,90,85,80,75,70,65,60,55,50,45,40],lineStyle:{width:3},symbolSize:8},{name:"控制器",type:"line",data:[98,97,96,95,94,93,92,91,90,89,88,87],lineStyle:{width:3},symbolSize:8},{name:"冷却系统",type:"line",data:[85,80,75,70,65,60,55,50,45,40,35,30],lineStyle:{width:3},symbolSize:8},{name:"液压系统",type:"line",data:[92,89,86,83,80,77,74,71,68,65,62,59],lineStyle:{width:3},symbolSize:8}]};H.setOption(U),window.addEventListener("resize",()=>{H.resize()})},N=()=>{if(!s.value)return;const H=Ef(s.value),j=[],W=new Date;for(let Y=5;Y>=0;Y--){const ie=new Date(W.getFullYear(),W.getMonth()-Y,1);j.push(ie.getFullYear()+"/"+(ie.getMonth()+1))}const U={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["维护前故障率(%)","维护后故障率(%)"],textStyle:{color:"#e2e8f0"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:j,axisLine:{lineStyle:{color:"#e2e8f0"}}},yAxis:{type:"value",name:"故障率(%)",min:0,axisLine:{lineStyle:{color:"#e2e8f0"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.1)"}}},series:[{name:"维护前故障率(%)",type:"bar",data:[5.2,4.8,5.5,5.9,4.6,5.1],itemStyle:{color:"#e53e3e"}},{name:"维护后故障率(%)",type:"bar",data:[3.1,2.8,3.2,2.9,2.5,2.4],itemStyle:{color:"#48bb78"}}]};H.setOption(U),window.addEventListener("resize",()=>{H.resize()})};return Un(()=>{bn(()=>{O(),B(),N()})}),(H,j)=>{const W=Xt("el-button"),U=Xt("el-progress"),Y=Xt("el-card"),ie=Xt("el-radio-button"),ue=Xt("el-radio-group"),J=Xt("el-option"),q=Xt("el-select"),ce=Xt("el-table-column"),re=Xt("el-tag"),ee=Xt("el-table"),oe=Xt("el-descriptions-item"),be=Xt("el-descriptions");return te(),me("div",EKe,[V("div",AKe,[j[6]||(j[6]=V("h2",null,"预测性维护",-1)),V("div",PKe,[de(W,{type:"primary",size:"small"},{default:ge(()=>j[4]||(j[4]=[$t("添加维护计划")])),_:1}),de(W,{type:"success",size:"small"},{default:ge(()=>j[5]||(j[5]=[$t("导出报告")])),_:1})])]),V("div",IKe,[(te(!0),me(hn,null,Kn(l.value,we=>(te(),ft(Y,{class:"health-card",key:we.id},{default:ge(()=>[V("div",LKe,[V("div",DKe,[de(U,{type:"dashboard",percentage:we.healthScore,color:p(we.healthScore),"stroke-width":8},null,8,["percentage","color"]),j[7]||(j[7]=V("div",{class:"health-label"},"健康评分",-1))]),V("div",RKe,[V("h3",null,Xe(we.name),1),V("div",OKe,[j[8]||(j[8]=V("span",{class:"detail-label"},"剩余寿命:",-1)),V("span",zKe,Xe(we.remainingLife)+" 天",1)]),V("div",BKe,[j[9]||(j[9]=V("span",{class:"detail-label"},"下次维护:",-1)),V("span",FKe,Xe(we.nextMaintenance),1)]),V("div",NKe,[j[10]||(j[10]=V("span",{class:"detail-label"},"风险等级:",-1)),V("span",{class:se(["detail-value","risk-"+we.riskLevel])},Xe(we.riskLevelText),3)])])]),V("div",$Ke,[de(W,{type:"primary",size:"small",onClick:pe=>b(we)},{default:ge(()=>j[11]||(j[11]=[$t("详情")])),_:2},1032,["onClick"]),de(W,{type:"success",size:"small",onClick:pe=>C(we)},{default:ge(()=>j[12]||(j[12]=[$t("安排维护")])),_:2},1032,["onClick"])])]),_:2},1024))),128))]),de(Y,{class:"maintenance-schedule-card"},{header:ge(()=>[V("div",VKe,[j[16]||(j[16]=V("span",null,"维护计划安排",-1)),V("div",HKe,[de(ue,{modelValue:t.value,"onUpdate:modelValue":j[0]||(j[0]=we=>t.value=we),size:"small"},{default:ge(()=>[de(ie,{label:"month"},{default:ge(()=>j[13]||(j[13]=[$t("月视图")])),_:1}),de(ie,{label:"week"},{default:ge(()=>j[14]||(j[14]=[$t("周视图")])),_:1}),de(ie,{label:"day"},{default:ge(()=>j[15]||(j[15]=[$t("日视图")])),_:1})]),_:1},8,["modelValue"])])])]),default:ge(()=>[V("div",{class:"schedule-chart-wrapper",ref_key:"scheduleChart",ref:a},null,512)]),_:1}),de(Y,{class:"component-prediction-card"},{header:ge(()=>[V("div",jKe,[j[17]||(j[17]=V("span",null,"关键部件寿命预测",-1)),de(q,{modelValue:n.value,"onUpdate:modelValue":j[1]||(j[1]=we=>n.value=we),placeholder:"选择设备",size:"small"},{default:ge(()=>[(te(),me(hn,null,Kn(c,we=>de(J,{key:we.value,label:we.label,value:we.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),default:ge(()=>[V("div",{class:"prediction-chart-wrapper",ref_key:"predictionChart",ref:o},null,512)]),_:1}),de(Y,{class:"maintenance-tasks-card"},{header:ge(()=>[V("div",UKe,[j[18]||(j[18]=V("span",null,"维护任务",-1)),V("div",WKe,[de(q,{modelValue:r.value,"onUpdate:modelValue":j[2]||(j[2]=we=>r.value=we),placeholder:"筛选状态",size:"small"},{default:ge(()=>[de(J,{label:"全部",value:"all"}),de(J,{label:"待处理",value:"pending"}),de(J,{label:"进行中",value:"inProgress"}),de(J,{label:"已完成",value:"completed"}),de(J,{label:"已延期",value:"delayed"})]),_:1},8,["modelValue"])])])]),default:ge(()=>[de(ee,{data:f.value,style:{width:"100%"}},{default:ge(()=>[de(ce,{prop:"date",label:"计划日期",width:"120"}),de(ce,{prop:"device",label:"设备",width:"150"}),de(ce,{prop:"task",label:"任务描述"}),de(ce,{prop:"assignee",label:"负责人",width:"100"}),de(ce,{prop:"status",label:"状态",width:"100"},{default:ge(we=>[de(re,{type:v(we.row.status)},{default:ge(()=>[$t(Xe(_(we.row.status)),1)]),_:2},1032,["type"])]),_:1}),de(ce,{label:"操作",width:"200"},{default:ge(we=>[we.row.status==="pending"?(te(),ft(W,{key:0,type:"primary",size:"mini",onClick:pe=>T(we.row)},{default:ge(()=>j[19]||(j[19]=[$t("开始")])),_:2},1032,["onClick"])):Ge("",!0),we.row.status==="inProgress"?(te(),ft(W,{key:1,type:"success",size:"mini",onClick:pe=>E(we.row)},{default:ge(()=>j[20]||(j[20]=[$t("完成")])),_:2},1032,["onClick"])):Ge("",!0),["pending","inProgress"].includes(we.row.status)?(te(),ft(W,{key:2,type:"warning",size:"mini",onClick:pe=>A(we.row)},{default:ge(()=>j[21]||(j[21]=[$t("延期")])),_:2},1032,["onClick"])):Ge("",!0),de(W,{type:"info",size:"mini",onClick:pe=>I(we.row)},{default:ge(()=>j[22]||(j[22]=[$t("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),de(Y,{class:"maintenance-effect-card"},{header:ge(()=>[V("div",GKe,[j[23]||(j[23]=V("span",null,"维护效果分析",-1)),de(q,{modelValue:i.value,"onUpdate:modelValue":j[3]||(j[3]=we=>i.value=we),placeholder:"选择时间段",size:"small"},{default:ge(()=>[de(J,{label:"最近30天",value:"30"}),de(J,{label:"最近90天",value:"90"}),de(J,{label:"最近180天",value:"180"}),de(J,{label:"今年",value:"year"})]),_:1},8,["modelValue"])])]),default:ge(()=>[V("div",{class:"effect-chart-wrapper",ref_key:"effectChart",ref:s},null,512),de(be,{class:"effect-metrics",column:4,border:""},{default:ge(()=>[de(oe,{label:"平均故障间隔"},{default:ge(()=>j[24]||(j[24]=[V("span",{class:"metric-value"},"28.5天",-1),V("span",{class:"metric-change positive"},"+15.2%",-1)])),_:1}),de(oe,{label:"故障率"},{default:ge(()=>j[25]||(j[25]=[V("span",{class:"metric-value"},"2.4%",-1),V("span",{class:"metric-change positive"},"-1.8%",-1)])),_:1}),de(oe,{label:"维护成本"},{default:ge(()=>j[26]||(j[26]=[V("span",{class:"metric-value"},"￥23,450",-1),V("span",{class:"metric-change positive"},"-8.3%",-1)])),_:1}),de(oe,{label:"设备可用率"},{default:ge(()=>j[27]||(j[27]=[V("span",{class:"metric-value"},"97.8%",-1),V("span",{class:"metric-change positive"},"+2.1%",-1)])),_:1})]),_:1})]),_:1})])}}},qKe=Ms(KKe,[["__scopeId","data-v-49779d2d"]]),ZKe={class:"digital-twin-reports"},YKe={class:"page-header"},XKe={class:"action-buttons"},JKe={class:"filter-form"},QKe={class:"reports-list"},eqe={class:"report-header"},tqe={class:"report-actions"},nqe={class:"report-info"},rqe={class:"info-item"},iqe={class:"info-value"},aqe={class:"info-item"},oqe={class:"info-value"},sqe={class:"info-item"},lqe={class:"info-value"},uqe={class:"info-item"},cqe={class:"info-value"},dqe={class:"report-thumbnail"},hqe={class:"report-footer"},fqe={class:"statistics-content"},pqe={class:"statistics-summary"},vqe={class:"summary-item"},mqe={class:"summary-value"},gqe={class:"summary-item"},yqe={class:"summary-value"},_qe={class:"summary-item"},bqe={class:"summary-value"},wqe={class:"summary-item"},xqe={class:"summary-value"},Sqe={class:"summary-item"},Cqe={class:"summary-value"},Tqe={class:"card-header"},Mqe={__name:"DigitalTwinReports",setup(e){Io([cte,Jk,Xk,Qk,eE]);const t=le({dateRange:null,device:"",reportType:""}),n=[{value:"k60-001",label:"K60发电机-001"},{value:"heat-103",label:"热交换器-103"},{value:"valve-205",label:"阀门系统-205"},{value:"pump-054",label:"液压泵-054"},{value:"rudder-a12",label:"舵机系统-A12"}],r=le([{id:1,title:"K60发电机性能报表",type:"performance",device:"k60-001",createTime:"2023-10-20 15:30",dateRange:"2023-10-01 至 2023-10-20"},{id:2,title:"热交换器维护报表",type:"maintenance",device:"heat-103",createTime:"2023-10-18 09:45",dateRange:"2023-10-01 至 2023-10-18"},{id:3,title:"阀门系统故障分析",type:"fault",device:"valve-205",createTime:"2023-10-15 14:20",dateRange:"2023-10-01 至 2023-10-15"},{id:4,title:"液压泵运行状态报表",type:"operation",device:"pump-054",createTime:"2023-10-12 11:10",dateRange:"2023-10-01 至 2023-10-12"},{id:5,title:"舵机系统性能分析",type:"performance",device:"rudder-a12",createTime:"2023-10-10 16:05",dateRange:"2023-10-01 至 2023-10-10"},{id:6,title:"K60发电机故障诊断",type:"fault",device:"k60-001",createTime:"2023-10-05 10:30",dateRange:"2023-09-20 至 2023-10-05"}]),i=le(null),a=X(()=>{let B=r.value;if(t.value.device&&(B=B.filter(N=>N.device===t.value.device)),t.value.reportType&&(B=B.filter(N=>N.type===t.value.reportType)),t.value.dateRange&&t.value.dateRange.length===2){const N=new Date(t.value.dateRange[0]),H=new Date(t.value.dateRange[1]);B=B.filter(j=>{const W=new Date(j.createTime);return W>=N&&W<=H})}return B}),o=X(()=>[...r.value].sort((B,N)=>new Date(N.createTime)-new Date(B.createTime)).slice(0,5)),s=X(()=>r.value.length),l=X(()=>r.value.filter(B=>B.type==="operation").length),c=X(()=>r.value.filter(B=>B.type==="maintenance").length),h=X(()=>r.value.filter(B=>B.type==="fault").length),f=X(()=>r.value.filter(B=>B.type==="performance").length),p=()=>{console.log("应用筛选:",t.value)},v=()=>{t.value={dateRange:null,device:"",reportType:""}},_=B=>{const N=n.find(H=>H.value===B);return N?N.label:B},b=B=>{switch(B){case"operation":return"运行报表";case"maintenance":return"维护报表";case"fault":return"故障报表";case"performance":return"性能报表";default:return B}},C=B=>{console.log("查看报表:",B.id)},T=B=>{console.log("下载报表:",B.id)},E=B=>{console.log("分享报表:",B.id)},A=B=>{console.log("删除报表:",B.id),r.value=r.value.filter(N=>N.id!==B.id)},I=()=>{console.log("刷新最近报表")},O=()=>{if(!i.value)return;const B=Ef(i.value),N={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",textStyle:{color:"#e2e8f0"}},series:[{name:"报表类型",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:l.value,name:"运行报表",itemStyle:{color:"#3182ce"}},{value:c.value,name:"维护报表",itemStyle:{color:"#38a169"}},{value:h.value,name:"故障报表",itemStyle:{color:"#e53e3e"}},{value:f.value,name:"性能报表",itemStyle:{color:"#805ad5"}}]}]};B.setOption(N),window.addEventListener("resize",()=>{B.resize()})};return Un(()=>{bn(()=>{O()})}),(B,N)=>{const H=Xt("el-button"),j=Xt("el-date-picker"),W=Xt("el-form-item"),U=Xt("el-option"),Y=Xt("el-select"),ie=Xt("el-form"),ue=Xt("el-card"),J=Xt("el-dropdown-item"),q=Xt("el-dropdown-menu"),ce=Xt("el-dropdown"),re=Xt("el-table-column"),ee=Xt("el-table");return te(),me("div",ZKe,[V("div",YKe,[N[5]||(N[5]=V("h2",null,"报表中心",-1)),V("div",XKe,[de(H,{type:"primary",size:"small"},{default:ge(()=>N[3]||(N[3]=[$t("创建报表")])),_:1}),de(H,{type:"success",size:"small"},{default:ge(()=>N[4]||(N[4]=[$t("导出数据")])),_:1})])]),de(ue,{class:"filter-card"},{default:ge(()=>[V("div",JKe,[de(ie,{inline:!0,model:t.value,size:"small"},{default:ge(()=>[de(W,{label:"时间范围"},{default:ge(()=>[de(j,{modelValue:t.value.dateRange,"onUpdate:modelValue":N[0]||(N[0]=oe=>t.value.dateRange=oe),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),de(W,{label:"设备"},{default:ge(()=>[de(Y,{modelValue:t.value.device,"onUpdate:modelValue":N[1]||(N[1]=oe=>t.value.device=oe),placeholder:"选择设备",clearable:""},{default:ge(()=>[(te(),me(hn,null,Kn(n,oe=>de(U,{key:oe.value,label:oe.label,value:oe.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),de(W,{label:"报表类型"},{default:ge(()=>[de(Y,{modelValue:t.value.reportType,"onUpdate:modelValue":N[2]||(N[2]=oe=>t.value.reportType=oe),placeholder:"选择类型",clearable:""},{default:ge(()=>[de(U,{label:"运行报表",value:"operation"}),de(U,{label:"维护报表",value:"maintenance"}),de(U,{label:"故障报表",value:"fault"}),de(U,{label:"性能报表",value:"performance"})]),_:1},8,["modelValue"])]),_:1}),de(W,null,{default:ge(()=>[de(H,{type:"primary",onClick:p},{default:ge(()=>N[6]||(N[6]=[$t("应用筛选")])),_:1}),de(H,{onClick:v},{default:ge(()=>N[7]||(N[7]=[$t("重置")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),V("div",QKe,[(te(!0),me(hn,null,Kn(a.value,oe=>(te(),ft(ue,{class:"report-card",key:oe.id},{default:ge(()=>[V("div",eqe,[V("h3",null,Xe(oe.title),1),V("div",tqe,[de(ce,{trigger:"click"},{dropdown:ge(()=>[de(q,null,{default:ge(()=>[de(J,{onClick:be=>C(oe)},{default:ge(()=>N[8]||(N[8]=[$t("查看")])),_:2},1032,["onClick"]),de(J,{onClick:be=>T(oe)},{default:ge(()=>N[9]||(N[9]=[$t("下载")])),_:2},1032,["onClick"]),de(J,{onClick:be=>E(oe)},{default:ge(()=>N[10]||(N[10]=[$t("分享")])),_:2},1032,["onClick"]),de(J,{onClick:be=>A(oe),class:"text-danger"},{default:ge(()=>N[11]||(N[11]=[$t("删除")])),_:2},1032,["onClick"])]),_:2},1024)]),default:ge(()=>[N[12]||(N[12]=V("span",{class:"el-dropdown-link"},[V("i",{class:"el-icon-more"})],-1))]),_:2},1024)])]),V("div",nqe,[V("div",rqe,[N[13]||(N[13]=V("span",{class:"info-label"},"设备:",-1)),V("span",iqe,Xe(_(oe.device)),1)]),V("div",aqe,[N[14]||(N[14]=V("span",{class:"info-label"},"类型:",-1)),V("span",oqe,Xe(b(oe.type)),1)]),V("div",sqe,[N[15]||(N[15]=V("span",{class:"info-label"},"生成时间:",-1)),V("span",lqe,Xe(oe.createTime),1)]),V("div",uqe,[N[16]||(N[16]=V("span",{class:"info-label"},"时间范围:",-1)),V("span",cqe,Xe(oe.dateRange),1)])]),V("div",dqe,[V("div",{class:se(["thumbnail-placeholder","type-"+oe.type])},[N[17]||(N[17]=V("i",{class:"el-icon-document"},null,-1)),V("span",null,Xe(b(oe.type)),1)],2)]),V("div",hqe,[de(H,{type:"primary",size:"small",onClick:be=>C(oe)},{default:ge(()=>N[18]||(N[18]=[$t("查看报表")])),_:2},1032,["onClick"])])]),_:2},1024))),128))]),de(ue,{class:"statistics-card"},{header:ge(()=>N[19]||(N[19]=[V("div",{class:"card-header"},[V("span",null,"报表统计")],-1)])),default:ge(()=>[V("div",fqe,[V("div",{class:"statistics-chart-wrapper",ref_key:"statisticsChart",ref:i},null,512),V("div",pqe,[V("div",vqe,[N[20]||(N[20]=V("div",{class:"summary-label"},"总报表数",-1)),V("div",mqe,Xe(s.value),1)]),V("div",gqe,[N[21]||(N[21]=V("div",{class:"summary-label"},"运行报表",-1)),V("div",yqe,Xe(l.value),1)]),V("div",_qe,[N[22]||(N[22]=V("div",{class:"summary-label"},"维护报表",-1)),V("div",bqe,Xe(c.value),1)]),V("div",wqe,[N[23]||(N[23]=V("div",{class:"summary-label"},"故障报表",-1)),V("div",xqe,Xe(h.value),1)]),V("div",Sqe,[N[24]||(N[24]=V("div",{class:"summary-label"},"性能报表",-1)),V("div",Cqe,Xe(f.value),1)])])])]),_:1}),de(ue,{class:"recent-reports-card"},{header:ge(()=>[V("div",Tqe,[N[26]||(N[26]=V("span",null,"最近生成的报表",-1)),de(H,{type:"text",onClick:I},{default:ge(()=>N[25]||(N[25]=[$t("刷新")])),_:1})])]),default:ge(()=>[de(ee,{data:o.value,style:{width:"100%"}},{default:ge(()=>[de(re,{prop:"title",label:"报表名称",width:"250"}),de(re,{prop:"type",label:"类型",width:"120"},{default:ge(oe=>[$t(Xe(b(oe.row.type)),1)]),_:1}),de(re,{prop:"device",label:"设备",width:"180"},{default:ge(oe=>[$t(Xe(_(oe.row.device)),1)]),_:1}),de(re,{prop:"createTime",label:"生成时间",width:"180"}),de(re,{label:"操作"},{default:ge(oe=>[de(H,{type:"text",size:"small",onClick:be=>C(oe.row)},{default:ge(()=>N[27]||(N[27]=[$t("查看")])),_:2},1032,["onClick"]),de(H,{type:"text",size:"small",onClick:be=>T(oe.row)},{default:ge(()=>N[28]||(N[28]=[$t("下载")])),_:2},1032,["onClick"]),de(H,{type:"text",size:"small",onClick:be=>E(oe.row)},{default:ge(()=>N[29]||(N[29]=[$t("分享")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},kqe=Ms(Mqe,[["__scopeId","data-v-1821d376"]]),Eqe={class:"status-text"},Aqe={__name:"StatusIndicator",props:{status:{type:String,default:"normal",validator:e=>["normal","warning","error"].includes(e)},text:{type:String,default:""}},setup(e){const t=e;return X(()=>{switch(t.status){case"normal":return"正常";case"warning":return"警告";case"error":return"错误";default:return t.text}}),(n,r)=>(te(),me("div",{class:se(["status-indicator",e.status])},[V("span",{class:se(["status-dot",e.status])},null,2),V("span",Eqe,Xe(e.text),1)],2))}},Pqe=Ms(Aqe,[["__scopeId","data-v-b977e604"]]),Iqe={key:0,class:"loading-container"},Lqe={key:0,class:"loading-text"},Dqe={__name:"LoadingSpinner",props:{loading:{type:Boolean,default:!0},text:{type:String,default:"加载中..."}},setup(e){return(t,n)=>e.loading?(te(),me("div",Iqe,[n[0]||(n[0]=V("div",{class:"loading-spinner"},null,-1)),e.text?(te(),me("span",Lqe,Xe(e.text),1)):Ge("",!0)])):Ge("",!0)}},Rqe=Ms(Dqe,[["__scopeId","data-v-9e287718"]]),Oqe={class:"notification-center"},zqe={class:"notification-list"},Bqe={key:0,class:"empty-notifications"},Fqe=["onClick"],Nqe={class:"notification-icon"},$qe={class:"notification-content"},Vqe={class:"notification-title"},Hqe={class:"notification-message"},jqe={class:"notification-time"},Uqe={class:"notification-actions"},Wqe={__name:"NotificationCenter",setup(e){const t=zX(),n=le(!1),r=X(()=>t.notifications),i=X(()=>r.value.filter(f=>!f.read).length),a=()=>{n.value=!n.value},o=f=>({success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error",info:"el-icon-info"})[f]||"el-icon-info",s=f=>{const p=new Date(f),_=new Date-p;return _<6e4?"刚刚":_<36e5?`${Math.floor(_/6e4)}分钟前`:_<864e5?`${Math.floor(_/36e5)}小时前`:p.toLocaleDateString()},l=f=>{f.read||(f.read=!0)},c=()=>{t.clearNotifications()},h=()=>{r.value.forEach(f=>{f.read=!0})};return(f,p)=>{const v=Xt("el-button"),_=Xt("el-badge"),b=Xt("el-drawer");return te(),me("div",Oqe,[de(_,{value:i.value,max:99,class:"notification-badge"},{default:ge(()=>[de(v,{type:"text",onClick:a},{default:ge(()=>p[1]||(p[1]=[V("i",{class:"el-icon-bell"},null,-1)])),_:1})]),_:1},8,["value"]),de(b,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=C=>n.value=C),title:"通知中心",direction:"rtl",size:"400px"},{footer:ge(()=>[V("div",Uqe,[de(v,{type:"text",onClick:c},{default:ge(()=>p[2]||(p[2]=[$t(" 清空所有通知 ")])),_:1}),de(v,{type:"text",onClick:h},{default:ge(()=>p[3]||(p[3]=[$t(" 全部标记为已读 ")])),_:1})])]),default:ge(()=>[V("div",zqe,[r.value.length===0?(te(),me("div",Bqe," 暂无通知 ")):Ge("",!0),(te(!0),me(hn,null,Kn(r.value,C=>(te(),me("div",{key:C.id,class:se(["notification-item",{unread:!C.read}]),onClick:T=>l(C)},[V("div",Nqe,[V("i",{class:se(o(C.type))},null,2)]),V("div",$qe,[V("div",Vqe,Xe(C.title),1),V("div",Hqe,Xe(C.message),1),V("div",jqe,Xe(s(C.timestamp)),1)])],10,Fqe))),128))])]),_:1},8,["modelValue"])])}}},Gqe=Ms(Wqe,[["__scopeId","data-v-d16aaa4b"]]),Kqe={class:"logo-container"},qqe={class:"header-controls"},Zqe={class:"main-content-rebuild"},Yqe={class:"viewer-area-rebuild"},Xqe={class:"viewer-3d"},Jqe={__name:"DigitalTwinPlatform",setup(e){const t=zX(),n=_i(DP),r=le("monitor"),i=le(!1),a=X(()=>t.isDarkMode),o=X(()=>t.isRealTime),s=X(()=>t.systemStatus),l=p=>{switch(r.value=p,i.value=!0,p){case"overview":n.value=OGe;break;case"monitor":n.value=DP;break;case"data":n.value=JGe;break;case"alarm":n.value=kKe;break;case"maintenance":n.value=qKe;break;case"reports":n.value=kqe;break;default:n.value=DP}setTimeout(()=>{i.value=!1},300)},c=()=>{t.toggleRealTime()},h=()=>{t.toggleTheme()},f=()=>{i.value=!0,setTimeout(()=>{i.value=!1},1e3)};return Un(()=>{l("monitor")}),(p,v)=>{const _=Xt("el-button"),b=Xt("el-button-group"),C=Xt("el-dropdown-item"),T=Xt("el-dropdown-menu"),E=Xt("el-dropdown"),A=Xt("el-header"),I=Xt("el-menu-item"),O=Xt("el-menu-item-group"),B=Xt("el-menu"),N=Xt("el-aside"),H=Xt("el-main"),j=Xt("el-container");return te(),me("div",{class:se(["digital-twin-platform",{"dark-mode":a.value}])},[de(j,{class:"main-container"},{default:ge(()=>[de(A,{class:"platform-header"},{default:ge(()=>[V("div",Kqe,[v[6]||(v[6]=V("h1",{class:"platform-title"},"船舶/工业设备数字孪生监控平台",-1)),de(Pqe,{status:s.value},null,8,["status"])]),V("div",qqe,[de(b,null,{default:ge(()=>[de(_,{type:"primary",size:"small",onClick:c},{default:ge(()=>[v[7]||(v[7]=V("i",{class:"el-icon-refresh"},null,-1)),$t(" "+Xe(o.value?"停止实时":"开启实时"),1)]),_:1}),de(_,{type:"success",size:"small",onClick:f},{default:ge(()=>v[8]||(v[8]=[V("i",{class:"el-icon-refresh"},null,-1),$t(" 刷新数据 ")])),_:1})]),_:1}),de(Gqe),de(E,null,{dropdown:ge(()=>[de(T,null,{default:ge(()=>[de(C,{onClick:h},{default:ge(()=>[v[9]||(v[9]=V("i",{class:"el-icon-moon"},null,-1)),$t(" "+Xe(a.value?"切换浅色主题":"切换深色主题"),1)]),_:1}),de(C,null,{default:ge(()=>v[10]||(v[10]=[$t("个人信息")])),_:1}),de(C,null,{default:ge(()=>v[11]||(v[11]=[$t("设置")])),_:1}),de(C,null,{default:ge(()=>v[12]||(v[12]=[$t("退出")])),_:1})]),_:1})]),default:ge(()=>[v[13]||(v[13]=V("span",{class:"user-profile"},[V("i",{class:"el-icon-user"}),$t(" 工程师 "),V("i",{class:"el-icon-arrow-down"})],-1))]),_:1})])]),_:1}),de(j,{class:"content-container"},{default:ge(()=>[de(N,{width:"220px",class:"platform-sidebar"},{default:ge(()=>[de(B,{"default-active":r.value,class:"menu","background-color":"var(--background-secondary)","text-color":"var(--text-primary)","active-text-color":"var(--primary)"},{default:ge(()=>[de(O,{title:"核心功能"},{default:ge(()=>[de(I,{index:"overview",onClick:v[0]||(v[0]=W=>l("overview"))},{default:ge(()=>v[14]||(v[14]=[V("i",{class:"el-icon-monitor"},null,-1),V("span",null,"概览",-1)])),_:1}),de(I,{index:"monitor",onClick:v[1]||(v[1]=W=>l("monitor"))},{default:ge(()=>v[15]||(v[15]=[V("i",{class:"el-icon-view"},null,-1),V("span",null,"3D监控",-1)])),_:1})]),_:1}),de(O,{title:"数据分析"},{default:ge(()=>[de(I,{index:"data",onClick:v[2]||(v[2]=W=>l("data"))},{default:ge(()=>v[16]||(v[16]=[V("i",{class:"el-icon-data-line"},null,-1),V("span",null,"数据分析",-1)])),_:1}),de(I,{index:"alarm",onClick:v[3]||(v[3]=W=>l("alarm"))},{default:ge(()=>v[17]||(v[17]=[V("i",{class:"el-icon-warning"},null,-1),V("span",null,"告警管理",-1)])),_:1})]),_:1}),de(O,{title:"运维管理"},{default:ge(()=>[de(I,{index:"maintenance",onClick:v[4]||(v[4]=W=>l("maintenance"))},{default:ge(()=>v[18]||(v[18]=[V("i",{class:"el-icon-set-up"},null,-1),V("span",null,"预测性维护",-1)])),_:1}),de(I,{index:"reports",onClick:v[5]||(v[5]=W=>l("reports"))},{default:ge(()=>v[19]||(v[19]=[V("i",{class:"el-icon-document"},null,-1),V("span",null,"报表中心",-1)])),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1}),de(H,{class:"platform-main"},{default:ge(()=>[de(Rqe,{loading:i.value},null,8,["loading"]),V("div",Zqe,[v[20]||(v[20]=V("div",{class:"dashboard-area"},[V("div",{class:"dashboard-card"},[V("div",{class:"dashboard-title"},"实时数据看板"),V("div",{class:"dashboard-metrics"},[V("div",{class:"metric-item"},[V("span",{class:"metric-label"},"设备总数"),V("span",{class:"metric-value"},"128")]),V("div",{class:"metric-item"},[V("span",{class:"metric-label"},"在线设备"),V("span",{class:"metric-value metric-online"},"120")]),V("div",{class:"metric-item"},[V("span",{class:"metric-label"},"告警数"),V("span",{class:"metric-value metric-alarm"},"3")]),V("div",{class:"metric-item"},[V("span",{class:"metric-label"},"待维护"),V("span",{class:"metric-value metric-maintain"},"5")])])]),V("div",{class:"dashboard-card"},[V("div",{class:"dashboard-title"},"告警摘要"),V("ul",{class:"alarm-list"},[V("li",{class:"alarm-item"},[V("span",{class:"alarm-level alarm-critical"}),$t(" K60发动机温度过高 ")]),V("li",{class:"alarm-item"},[V("span",{class:"alarm-level alarm-warning"}),$t(" 热交换器流量异常 ")]),V("li",{class:"alarm-item"},[V("span",{class:"alarm-level alarm-info"}),$t(" 阀门状态变化 ")])])])],-1)),V("div",Yqe,[V("div",Xqe,[(te(),ft(ir(n.value)))])])])]),_:1})]),_:1})]),_:1})],2)}}};var rne={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(od,function(){var n={},r={};function i(o,s,l){if(r[o]=l,o==="index"){var c="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",h={};return r.shared(h),r.index(n,h),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))),n}}i("shared",["exports"],function(o){function s(g,d,y,x){return new(y||(y=Promise))(function(k,R){function z(Q){try{K(x.next(Q))}catch(ae){R(ae)}}function $(Q){try{K(x.throw(Q))}catch(ae){R(ae)}}function K(Q){var ae;Q.done?k(Q.value):(ae=Q.value,ae instanceof y?ae:new y(function(fe){fe(ae)})).then(z,$)}K((x=x.apply(g,d||[])).next())})}function l(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var c,h;function f(){if(h)return c;function g(d,y){this.x=d,this.y=y}return h=1,c=g,g.prototype={clone:function(){return new g(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,y){return this.clone()._rotateAround(d,y)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var y=d.x-this.x,x=d.y-this.y;return y*y+x*x},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,y){return Math.atan2(this.x*y-this.y*d,this.x*d+this.y*y)},_matMult:function(d){var y=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=y,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var y=Math.cos(d),x=Math.sin(d),k=x*this.x+y*this.y;return this.x=y*this.x-x*this.y,this.y=k,this},_rotateAround:function(d,y){var x=Math.cos(d),k=Math.sin(d),R=y.y+k*(this.x-y.x)+x*(this.y-y.y);return this.x=y.x+x*(this.x-y.x)-k*(this.y-y.y),this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(d){return d instanceof g?d:Array.isArray(d)?new g(d[0],d[1]):d},c}typeof SuppressedError=="function"&&SuppressedError;var p,v,_=l(f()),b=function(){if(v)return p;function g(d,y,x,k){this.cx=3*d,this.bx=3*(x-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(k-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=y,this.p2x=x,this.p2y=k}return v=1,p=g,g.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,y){if(y===void 0&&(y=1e-6),d<0)return 0;if(d>1)return 1;for(var x=d,k=0;k<8;k++){var R=this.sampleCurveX(x)-d;if(Math.abs(R)<y)return x;var z=this.sampleCurveDerivativeX(x);if(Math.abs(z)<1e-6)break;x-=R/z}var $=0,K=1;for(x=d,k=0;k<20&&(R=this.sampleCurveX(x),!(Math.abs(R-d)<y));k++)d>R?$=x:K=x,x=.5*(K-$)+$;return x},solve:function(d,y){return this.sampleCurveY(this.solveCurveX(d,y))}},p}(),C=l(b);let T,E;function A(){return T==null&&(T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),T}function I(){if(E==null&&(E=!1,A())){const d=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(d){for(let x=0;x<5*5;x++){const k=4*x;d.fillStyle=`rgb(${k},${k+1},${k+2})`,d.fillRect(x%5,Math.floor(x/5),1,1)}const y=d.getImageData(0,0,5,5).data;for(let x=0;x<5*5*4;x++)if(x%4!=3&&y[x]!==x){E=!0;break}}}return E||!1}var O=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function N(){var g=new B(9);return B!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g}function H(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function j(){var g=new B(3);return B!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function W(g){return Math.hypot(g[0],g[1],g[2])}function U(g,d,y){var x=new B(3);return x[0]=g,x[1]=d,x[2]=y,x}Math.hypot||(Math.hypot=function(){for(var g=0,d=arguments.length;d--;)g+=arguments[d]*arguments[d];return Math.sqrt(g)});var Y,ie=W;function ue(g,d,y){var x=d[0],k=d[1],R=d[2],z=d[3];return g[0]=y[0]*x+y[4]*k+y[8]*R+y[12]*z,g[1]=y[1]*x+y[5]*k+y[9]*R+y[13]*z,g[2]=y[2]*x+y[6]*k+y[10]*R+y[14]*z,g[3]=y[3]*x+y[7]*k+y[11]*R+y[15]*z,g}function J(){var g=new B(4);return B!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g[3]=1,g}function q(){var g=new B(2);return B!=Float32Array&&(g[0]=0,g[1]=0),g}function ce(g,d){var y=new B(2);return y[0]=g,y[1]=d,y}j(),Y=new B(4),B!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0,Y[3]=0),j(),U(1,0,0),U(0,1,0),J(),J(),N(),q();const re=8192;function ee(g,d,y){return d*(re/(g.tileSize*Math.pow(2,y-g.tileID.overscaledZ)))}function oe(g,d){return(g%d+d)%d}function be(g,d,y){return g*(1-y)+d*y}function we(g){if(g<=0)return 0;if(g>=1)return 1;const d=g*g,y=d*g;return 4*(g<.5?y:3*(g-d)+y-.75)}function pe(g,d,y,x){const k=new C(g,d,y,x);return R=>k.solve(R)}const Ce=pe(.25,.1,.25,1);function Ve(g,d,y){return Math.min(y,Math.max(d,g))}function et(g,d,y){const x=y-d,k=((g-d)%x+x)%x+d;return k===d?y:k}function Ee(g,...d){for(const y of d)for(const x in y)g[x]=y[x];return g}let Je=1;function Ue(g,d,y){const x={};for(const k in g)x[k]=d.call(this,g[k],k,g);return x}function yt(g,d,y){const x={};for(const k in g)d.call(this,g[k],k,g)&&(x[k]=g[k]);return x}function Ne(g){return Array.isArray(g)?g.map(Ne):typeof g=="object"&&g?Ue(g,Ne):g}const dt={};function Le(g){dt[g]||(typeof console<"u"&&console.warn(g),dt[g]=!0)}function ze(g,d,y){return(y.y-g.y)*(d.x-g.x)>(d.y-g.y)*(y.x-g.x)}function ct(g){return typeof WorkerGlobalScope<"u"&&g!==void 0&&g instanceof WorkerGlobalScope}let Lt=null;function lt(g){return typeof ImageBitmap<"u"&&g instanceof ImageBitmap}const Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _t(g,d,y,x,k){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(g,{timestamp:0});try{const z=R==null?void 0:R.format;if(!z||!z.startsWith("BGR")&&!z.startsWith("RGB"))throw new Error(`Unrecognized format ${z}`);const $=z.startsWith("BGR"),K=new Uint8ClampedArray(x*k*4);if(yield R.copyTo(K,function(Q,ae,fe,xe,Te){const Pe=4*Math.max(1,0),Re=(Math.max(0,fe)-fe)*xe*4+Pe,We=4*xe,nt=Math.max(0,ae),wt=Math.max(0,fe);return{rect:{x:nt,y:wt,width:Math.min(Q.width,ae+xe)-nt,height:Math.min(Q.height,fe+Te)-wt},layout:[{offset:Re,stride:We}]}}(g,d,y,x,k)),$)for(let Q=0;Q<K.length;Q+=4){const ae=K[Q];K[Q]=K[Q+2],K[Q+2]=ae}return K}finally{R.close()}})}let It,Bt;function Ft(g,d,y,x){return g.addEventListener(d,y,x),{unsubscribe:()=>{g.removeEventListener(d,y,x)}}}function cn(g){return g/Math.PI*180}const Ot={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},kt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},fn="AbortError";function Rn(){return new Error(fn)}const On={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function mt(g){return On.REGISTERED_PROTOCOLS[g.substring(0,g.indexOf("://"))]}const Gt="global-dispatcher";class gn extends Error{constructor(d,y,x,k){super(`AJAXError: ${y} (${d}): ${x}`),this.status=d,this.statusText=y,this.url=x,this.body=k}}const xt=()=>ct(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Zt=function(g,d){if(/:\/\//.test(g.url)&&!/^https?:|^file:/.test(g.url)){const x=mt(g.url);if(x)return x(g,d);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:g,targetMapId:Gt},d)}if(!(/^file:/.test(y=g.url)||/^file:/.test(xt())&&!/^\w+:/.test(y))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(x,k){return s(this,void 0,void 0,function*(){const R=new Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,cache:x.cache,referrer:xt(),signal:k.signal});let z,$;x.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{z=yield fetch(R)}catch(Q){throw new gn(0,Q.message,x.url,new Blob)}if(!z.ok){const Q=yield z.blob();throw new gn(z.status,z.statusText,x.url,Q)}$=x.type==="arrayBuffer"||x.type==="image"?z.arrayBuffer():x.type==="json"?z.json():z.text();const K=yield $;if(k.signal.aborted)throw Rn();return{data:K,cacheControl:z.headers.get("Cache-Control"),expires:z.headers.get("Expires")}})}(g,d);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:g,mustQueue:!0,targetMapId:Gt},d)}var y;return function(x,k){return new Promise((R,z)=>{var $;const K=new XMLHttpRequest;K.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(K.responseType="arraybuffer");for(const Q in x.headers)K.setRequestHeader(Q,x.headers[Q]);x.type==="json"&&(K.responseType="text",!(($=x.headers)===null||$===void 0)&&$.Accept||K.setRequestHeader("Accept","application/json")),K.withCredentials=x.credentials==="include",K.onerror=()=>{z(new Error(K.statusText))},K.onload=()=>{if(!k.signal.aborted)if((K.status>=200&&K.status<300||K.status===0)&&K.response!==null){let Q=K.response;if(x.type==="json")try{Q=JSON.parse(K.response)}catch(ae){return void z(ae)}R({data:Q,cacheControl:K.getResponseHeader("Cache-Control"),expires:K.getResponseHeader("Expires")})}else{const Q=new Blob([K.response],{type:K.getResponseHeader("Content-Type")});z(new gn(K.status,K.statusText,x.url,Q))}},k.signal.addEventListener("abort",()=>{K.abort(),z(Rn())}),K.send(x.body)})}(g,d)};function Ze(g){if(!g||g.indexOf("://")<=0||g.indexOf("data:image/")===0||g.indexOf("blob:")===0)return!0;const d=new URL(g),y=window.location;return d.protocol===y.protocol&&d.host===y.host}function Fe(g,d,y){y[g]&&y[g].indexOf(d)!==-1||(y[g]=y[g]||[],y[g].push(d))}function ve(g,d,y){if(y&&y[g]){const x=y[g].indexOf(d);x!==-1&&y[g].splice(x,1)}}class ke{constructor(d,y={}){Ee(this,y),this.type=d}}class Oe extends ke{constructor(d,y={}){super("error",Ee({error:d},y))}}class Me{on(d,y){return this._listeners=this._listeners||{},Fe(d,y,this._listeners),{unsubscribe:()=>{this.off(d,y)}}}off(d,y){return ve(d,y,this._listeners),ve(d,y,this._oneTimeListeners),this}once(d,y){return y?(this._oneTimeListeners=this._oneTimeListeners||{},Fe(d,y,this._oneTimeListeners),this):new Promise(x=>this.once(d,x))}fire(d,y){typeof d=="string"&&(d=new ke(d,y||{}));const x=d.type;if(this.listens(x)){d.target=this;const k=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const $ of k)$.call(this,d);const R=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const $ of R)ve(x,$,this._oneTimeListeners),$.call(this,d);const z=this._eventedParent;z&&(Ee(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),z.fire(d))}else d instanceof Oe&&console.error(d.error);return this}listens(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)}setEventedParent(d,y){return this._eventedParent=d,this._eventedParentData=y,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mt(g,d){const y={};for(const x in g)x!=="ref"&&(y[x]=g[x]);return pt.forEach(x=>{x in d&&(y[x]=d[x])}),y}function it(g,d){if(Array.isArray(g)){if(!Array.isArray(d)||g.length!==d.length)return!1;for(let y=0;y<g.length;y++)if(!it(g[y],d[y]))return!1;return!0}if(typeof g=="object"&&g!==null&&d!==null){if(typeof d!="object"||Object.keys(g).length!==Object.keys(d).length)return!1;for(const y in g)if(!it(g[y],d[y]))return!1;return!0}return g===d}function Et(g,d){g.push(d)}function Vt(g,d,y){Et(y,{command:"addSource",args:[g,d[g]]})}function Dt(g,d,y){Et(d,{command:"removeSource",args:[g]}),y[g]=!0}function ln(g,d,y,x){Dt(g,y,x),Vt(g,d,y)}function kn(g,d,y){let x;for(x in g[y])if(Object.prototype.hasOwnProperty.call(g[y],x)&&x!=="data"&&!it(g[y][x],d[y][x]))return!1;for(x in d[y])if(Object.prototype.hasOwnProperty.call(d[y],x)&&x!=="data"&&!it(g[y][x],d[y][x]))return!1;return!0}function Tn(g,d,y,x,k,R){g=g||{},d=d||{};for(const z in g)Object.prototype.hasOwnProperty.call(g,z)&&(it(g[z],d[z])||y.push({command:R,args:[x,z,d[z],k]}));for(const z in d)Object.prototype.hasOwnProperty.call(d,z)&&!Object.prototype.hasOwnProperty.call(g,z)&&(it(g[z],d[z])||y.push({command:R,args:[x,z,d[z],k]}))}function Xn(g){return g.id}function mr(g,d){return g[d.id]=d,g}class Yt{constructor(d,y,x,k){this.message=(d?`${d}: `:"")+x,k&&(this.identifier=k),y!=null&&y.__line__&&(this.line=y.__line__)}}function rr(g,...d){for(const y of d)for(const x in y)g[x]=y[x];return g}class zr extends Error{constructor(d,y){super(y),this.message=y,this.key=d}}class Ur{constructor(d,y=[]){this.parent=d,this.bindings={};for(const[x,k]of y)this.bindings[x]=k}concat(d){return new Ur(this,d)}get(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(`${d} not found in scope.`)}has(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)}}const Br={kind:"null"},Qt={kind:"number"},St={kind:"string"},en={kind:"boolean"},gr={kind:"color"},Tr={kind:"projectionDefinition"},qr={kind:"object"},ar={kind:"value"},$e={kind:"collator"},je={kind:"formatted"},zt={kind:"padding"},rt={kind:"resolvedImage"},Ht={kind:"variableAnchorOffsetCollection"};function Pt(g,d){return{kind:"array",itemType:g,N:d}}function dn(g){if(g.kind==="array"){const d=dn(g.itemType);return typeof g.N=="number"?`array<${d}, ${g.N}>`:g.itemType.kind==="value"?"array":`array<${d}>`}return g.kind}const Hn=[Br,Qt,St,en,gr,Tr,je,qr,Pt(ar),zt,rt,Ht];function dr(g,d){if(d.kind==="error")return null;if(g.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!dr(g.itemType,d.itemType))&&(typeof g.N!="number"||g.N===d.N))return null}else{if(g.kind===d.kind)return null;if(g.kind==="value"){for(const y of Hn)if(!dr(y,d))return null}}return`Expected ${dn(g)} but found ${dn(d)} instead.`}function Cr(g,d){return d.some(y=>y.kind===g.kind)}function ci(g,d){return d.some(y=>y==="null"?g===null:y==="array"?Array.isArray(g):y==="object"?g&&!Array.isArray(g)&&typeof g=="object":y===typeof g)}function Li(g,d){return g.kind==="array"&&d.kind==="array"?g.itemType.kind===d.itemType.kind&&typeof g.N=="number":g.kind===d.kind}const Lo=.96422,yl=.82521,uu=4/29,cu=6/29,lh=3*cu*cu,Sm=cu*cu*cu,Jf=Math.PI/180,Z0=180/Math.PI;function Rx(g){return(g%=360)<0&&(g+=360),g}function Ox([g,d,y,x]){let k,R;const z=X0((.2225045*(g=Y0(g))+.7168786*(d=Y0(d))+.0606169*(y=Y0(y)))/1);g===d&&d===y?k=R=z:(k=X0((.4360747*g+.3850649*d+.1430804*y)/Lo),R=X0((.0139322*g+.0971045*d+.7141733*y)/yl));const $=116*z-16;return[$<0?0:$,500*(k-z),200*(z-R),x]}function Y0(g){return g<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function X0(g){return g>Sm?Math.pow(g,1/3):g/lh+uu}function J0([g,d,y,x]){let k=(g+16)/116,R=isNaN(d)?k:k+d/500,z=isNaN(y)?k:k-y/200;return k=1*Q0(k),R=Lo*Q0(R),z=yl*Q0(z),[pd(3.1338561*R-1.6168667*k-.4906146*z),pd(-.9787684*R+1.9161415*k+.033454*z),pd(.0719453*R-.2289914*k+1.4052427*z),x]}function pd(g){return(g=g<=.00304?12.92*g:1.055*Math.pow(g,1/2.4)-.055)<0?0:g>1?1:g}function Q0(g){return g>cu?g*g*g:lh*(g-uu)}function Cm(g){return parseInt(g.padEnd(2,g),16)/255}function uh(g,d){return ch(d?g/100:g,0,1)}function ch(g,d,y){return Math.min(Math.max(d,g),y)}function zx(g){return!g.some(Number.isNaN)}const CE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function du(g,d,y){return g+y*(d-g)}function dh(g,d,y){return g.map((x,k)=>du(x,d[k],y))}class Rr{constructor(d,y,x,k=1,R=!0){this.r=d,this.g=y,this.b=x,this.a=k,R||(this.r*=k,this.g*=k,this.b*=k,k||this.overwriteGetter("rgb",[d,y,x,k]))}static parse(d){if(d instanceof Rr)return d;if(typeof d!="string")return;const y=function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const k=CE[x];if(k){const[z,$,K]=k;return[z/255,$/255,K/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const z=x.length<6?1:2;let $=1;return[Cm(x.slice($,$+=z)),Cm(x.slice($,$+=z)),Cm(x.slice($,$+=z)),Cm(x.slice($,$+z)||"ff")]}if(x.startsWith("rgb")){const z=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt]=z,ot=[ae||" ",Te||" ",We].join("");if(ot==="  "||ot==="  /"||ot===",,"||ot===",,,"){const Se=[Q,xe,Re].join(""),He=Se==="%%%"?100:Se===""?255:0;if(He){const ut=[ch(+K/He,0,1),ch(+fe/He,0,1),ch(+Pe/He,0,1),nt?uh(+nt,wt):1];if(zx(ut))return ut}}return}}const R=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[z,$,K,Q,ae,fe,xe,Te,Pe]=R,Re=[K||" ",ae||" ",xe].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const We=[+$,ch(+Q,0,100),ch(+fe,0,100),Te?uh(+Te,Pe):1];if(zx(We))return function([nt,wt,ot,Se]){function He(ut){const jt=(ut+nt/30)%12,vn=wt*Math.min(ot,1-ot);return ot-vn*Math.max(-1,Math.min(jt-3,9-jt,1))}return nt=Rx(nt),wt/=100,ot/=100,[He(0),He(8),He(4),Se]}(We)}}}(d);return y?new Rr(...y,!1):void 0}get rgb(){const{r:d,g:y,b:x,a:k}=this,R=k||1/0;return this.overwriteGetter("rgb",[d/R,y/R,x/R,k])}get hcl(){return this.overwriteGetter("hcl",function(d){const[y,x,k,R]=Ox(d),z=Math.sqrt(x*x+k*k);return[Math.round(1e4*z)?Rx(Math.atan2(k,x)*Z0):NaN,z,y,R]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ox(this.rgb))}overwriteGetter(d,y){return Object.defineProperty(this,d,{value:y}),y}toString(){const[d,y,x,k]=this.rgb;return`rgba(${[d,y,x].map(R=>Math.round(255*R)).join(",")},${k})`}static interpolate(d,y,x,k="rgb"){switch(k){case"rgb":{const[R,z,$,K]=dh(d.rgb,y.rgb,x);return new Rr(R,z,$,K,!1)}case"hcl":{const[R,z,$,K]=d.hcl,[Q,ae,fe,xe]=y.hcl;let Te,Pe;if(isNaN(R)||isNaN(Q))isNaN(R)?isNaN(Q)?Te=NaN:(Te=Q,$!==1&&$!==0||(Pe=ae)):(Te=R,fe!==1&&fe!==0||(Pe=z));else{let ot=Q-R;Q>R&&ot>180?ot-=360:Q<R&&R-Q>180&&(ot+=360),Te=R+x*ot}const[Re,We,nt,wt]=function([ot,Se,He,ut]){return ot=isNaN(ot)?0:ot*Jf,J0([He,Math.cos(ot)*Se,Math.sin(ot)*Se,ut])}([Te,Pe??du(z,ae,x),du($,fe,x),du(K,xe,x)]);return new Rr(Re,We,nt,wt,!1)}case"lab":{const[R,z,$,K]=J0(dh(d.lab,y.lab,x));return new Rr(R,z,$,K,!1)}}}}Rr.black=new Rr(0,0,0,1),Rr.white=new Rr(1,1,1,1),Rr.transparent=new Rr(0,0,0,0),Rr.red=new Rr(1,0,0,1);class Jr{constructor(d,y,x){this.sensitivity=d?y?"variant":"case":y?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(d,y){return this.collator.compare(d,y)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const hh=["bottom","center","top"];class _l{constructor(d,y,x,k,R,z){this.text=d,this.image=y,this.scale=x,this.fontStack=k,this.textColor=R,this.verticalAlign=z}}class Do{constructor(d){this.sections=d}static fromString(d){return new Do([new _l(d,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(d=>d.text.length!==0||d.image&&d.image.name.length!==0)}static factory(d){return d instanceof Do?d:Do.fromString(d)}toString(){return this.sections.length===0?"":this.sections.map(d=>d.text).join("")}}class so{constructor(d){this.values=d.slice()}static parse(d){if(d instanceof so)return d;if(typeof d=="number")return new so([d,d,d,d]);if(Array.isArray(d)&&!(d.length<1||d.length>4)){for(const y of d)if(typeof y!="number")return;switch(d.length){case 1:d=[d[0],d[0],d[0],d[0]];break;case 2:d=[d[0],d[1],d[0],d[1]];break;case 3:d=[d[0],d[1],d[2],d[1]]}return new so(d)}}toString(){return JSON.stringify(this.values)}static interpolate(d,y,x){return new so(dh(d.values,y.values,x))}}class sa{constructor(d){this.name="ExpressionEvaluationError",this.message=d}toJSON(){return this.message}}const Qf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Za{constructor(d){this.values=d.slice()}static parse(d){if(d instanceof Za)return d;if(Array.isArray(d)&&!(d.length<1)&&d.length%2==0){for(let y=0;y<d.length;y+=2){const x=d[y],k=d[y+1];if(typeof x!="string"||!Qf.has(x)||!Array.isArray(k)||k.length!==2||typeof k[0]!="number"||typeof k[1]!="number")return}return new Za(d)}}toString(){return JSON.stringify(this.values)}static interpolate(d,y,x){const k=d.values,R=y.values;if(k.length!==R.length)throw new sa(`Cannot interpolate values of different length. from: ${d.toString()}, to: ${y.toString()}`);const z=[];for(let $=0;$<k.length;$+=2){if(k[$]!==R[$])throw new sa(`Cannot interpolate values containing mismatched anchors. from[${$}]: ${k[$]}, to[${$}]: ${R[$]}`);z.push(k[$]);const[K,Q]=k[$+1],[ae,fe]=R[$+1];z.push([du(K,ae,x),du(Q,fe,x)])}return new Za(z)}}class ts{constructor(d){this.name=d.name,this.available=d.available}toString(){return this.name}static fromString(d){return d?new ts({name:d,available:!1}):null}}class _o{constructor(d,y,x){this.from=d,this.to=y,this.transition=x}static interpolate(d,y,x){return new _o(d,y,x)}static parse(d){return d instanceof _o?d:Array.isArray(d)&&d.length===3&&typeof d[0]=="string"&&typeof d[1]=="string"&&typeof d[2]=="number"?new _o(d[0],d[1],d[2]):typeof d=="object"&&typeof d.from=="string"&&typeof d.to=="string"&&typeof d.transition=="number"?new _o(d.from,d.to,d.transition):typeof d=="string"?new _o(d,d,1):void 0}}function dc(g,d,y,x){return typeof g=="number"&&g>=0&&g<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof y=="number"&&y>=0&&y<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[g,d,y,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[g,d,y,x]:[g,d,y]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ep(g){if(g===null||typeof g=="string"||typeof g=="boolean"||typeof g=="number"||g instanceof _o||g instanceof Rr||g instanceof Jr||g instanceof Do||g instanceof so||g instanceof Za||g instanceof ts)return!0;if(Array.isArray(g)){for(const d of g)if(!ep(d))return!1;return!0}if(typeof g=="object"){for(const d in g)if(!ep(g[d]))return!1;return!0}return!1}function la(g){if(g===null)return Br;if(typeof g=="string")return St;if(typeof g=="boolean")return en;if(typeof g=="number")return Qt;if(g instanceof Rr)return gr;if(g instanceof _o)return Tr;if(g instanceof Jr)return $e;if(g instanceof Do)return je;if(g instanceof so)return zt;if(g instanceof Za)return Ht;if(g instanceof ts)return rt;if(Array.isArray(g)){const d=g.length;let y;for(const x of g){const k=la(x);if(y){if(y===k)continue;y=ar;break}y=k}return Pt(y||ar,d)}return qr}function bl(g){const d=typeof g;return g===null?"":d==="string"||d==="number"||d==="boolean"?String(g):g instanceof Rr||g instanceof _o||g instanceof Do||g instanceof so||g instanceof Za||g instanceof ts?g.toString():JSON.stringify(g)}class hc{constructor(d,y){this.type=d,this.value=y}static parse(d,y){if(d.length!==2)return y.error(`'literal' expression requires exactly one argument, but found ${d.length-1} instead.`);if(!ep(d[1]))return y.error("invalid value");const x=d[1];let k=la(x);const R=y.expectedType;return k.kind!=="array"||k.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(k=R),new hc(k,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const tp={string:St,number:Qt,boolean:en,object:qr};class ks{constructor(d,y){this.type=d,this.args=y}static parse(d,y){if(d.length<2)return y.error("Expected at least one argument.");let x,k=1;const R=d[0];if(R==="array"){let $,K;if(d.length>2){const Q=d[1];if(typeof Q!="string"||!(Q in tp)||Q==="object")return y.error('The item type argument of "array" must be one of string, number, boolean',1);$=tp[Q],k++}else $=ar;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return y.error('The length argument to "array" must be a positive integer literal',2);K=d[2],k++}x=Pt($,K)}else{if(!tp[R])throw new Error(`Types doesn't contain name = ${R}`);x=tp[R]}const z=[];for(;k<d.length;k++){const $=y.parse(d[k],k,ar);if(!$)return null;z.push($)}return new ks(x,z)}evaluate(d){for(let y=0;y<this.args.length;y++){const x=this.args[y].evaluate(d);if(!dr(this.type,la(x)))return x;if(y===this.args.length-1)throw new sa(`Expected value to be of type ${dn(this.type)}, but found ${dn(la(x))} instead.`)}throw new Error}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}const np={"to-boolean":en,"to-color":gr,"to-number":Qt,"to-string":St};class vi{constructor(d,y){this.type=d,this.args=y}static parse(d,y){if(d.length<2)return y.error("Expected at least one argument.");const x=d[0];if(!np[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&d.length!==2)return y.error("Expected one argument.");const k=np[x],R=[];for(let z=1;z<d.length;z++){const $=y.parse(d[z],z,ar);if(!$)return null;R.push($)}return new vi(k,R)}evaluate(d){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(d);case"color":{let y,x;for(const k of this.args){if(y=k.evaluate(d),x=null,y instanceof Rr)return y;if(typeof y=="string"){const R=d.parseColor(y);if(R)return R}else if(Array.isArray(y)&&(x=y.length<3||y.length>4?`Invalid rgba value ${JSON.stringify(y)}: expected an array containing either three or four numeric values.`:dc(y[0],y[1],y[2],y[3]),!x))return new Rr(y[0]/255,y[1]/255,y[2]/255,y[3])}throw new sa(x||`Could not parse color from value '${typeof y=="string"?y:JSON.stringify(y)}'`)}case"padding":{let y;for(const x of this.args){y=x.evaluate(d);const k=so.parse(y);if(k)return k}throw new sa(`Could not parse padding from value '${typeof y=="string"?y:JSON.stringify(y)}'`)}case"variableAnchorOffsetCollection":{let y;for(const x of this.args){y=x.evaluate(d);const k=Za.parse(y);if(k)return k}throw new sa(`Could not parse variableAnchorOffsetCollection from value '${typeof y=="string"?y:JSON.stringify(y)}'`)}case"number":{let y=null;for(const x of this.args){if(y=x.evaluate(d),y===null)return 0;const k=Number(y);if(!isNaN(k))return k}throw new sa(`Could not convert ${JSON.stringify(y)} to number.`)}case"formatted":return Do.fromString(bl(this.args[0].evaluate(d)));case"resolvedImage":return ts.fromString(bl(this.args[0].evaluate(d)));case"projectionDefinition":return this.args[0].evaluate(d);default:return bl(this.args[0].evaluate(d))}}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}const e_=["Unknown","Point","LineString","Polygon"];class ni{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?e_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(d){let y=this._parseColorCache[d];return y||(y=this._parseColorCache[d]=Rr.parse(d)),y}}class kr{constructor(d,y,x=[],k,R=new Ur,z=[]){this.registry=d,this.path=x,this.key=x.map($=>`[${$}]`).join(""),this.scope=R,this.errors=z,this.expectedType=k,this._isConstant=y}parse(d,y,x,k,R={}){return y?this.concat(y,x,k)._parse(d,R):this._parse(d,R)}_parse(d,y){function x(k,R,z){return z==="assert"?new ks(R,[k]):z==="coerce"?new vi(R,[k]):k}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const k=d[0];if(typeof k!="string")return this.error(`Expression name must be a string, but found ${typeof k} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[k];if(R){let z=R.parse(d,this);if(!z)return null;if(this.expectedType){const $=this.expectedType,K=z.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||K.kind!=="value")if($.kind!=="projectionDefinition"||K.kind!=="string"&&K.kind!=="array")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||K.kind!=="value"&&K.kind!=="string")if($.kind!=="padding"||K.kind!=="value"&&K.kind!=="number"&&K.kind!=="array")if($.kind!=="variableAnchorOffsetCollection"||K.kind!=="value"&&K.kind!=="array"){if(this.checkSubtype($,K))return null}else z=x(z,$,y.typeAnnotation||"coerce");else z=x(z,$,y.typeAnnotation||"coerce");else z=x(z,$,y.typeAnnotation||"coerce");else z=x(z,$,y.typeAnnotation||"coerce");else z=x(z,$,y.typeAnnotation||"assert")}if(!(z instanceof hc)&&z.type.kind!=="resolvedImage"&&this._isConstant(z)){const $=new ni;try{z=new hc(z.type,z.evaluate($))}catch(K){return this.error(K.message),null}}return z}return this.error(`Unknown expression "${k}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof d} instead.`)}concat(d,y,x){const k=typeof d=="number"?this.path.concat(d):this.path,R=x?this.scope.concat(x):this.scope;return new kr(this.registry,this._isConstant,k,y||null,R,this.errors)}error(d,...y){const x=`${this.key}${y.map(k=>`[${k}]`).join("")}`;this.errors.push(new zr(x,d))}checkSubtype(d,y){const x=dr(d,y);return x&&this.error(x),x}}class fh{constructor(d,y){this.type=y.type,this.bindings=[].concat(d),this.result=y}evaluate(d){return this.result.evaluate(d)}eachChild(d){for(const y of this.bindings)d(y[1]);d(this.result)}static parse(d,y){if(d.length<4)return y.error(`Expected at least 3 arguments, but found ${d.length-1} instead.`);const x=[];for(let R=1;R<d.length-1;R+=2){const z=d[R];if(typeof z!="string")return y.error(`Expected string, but found ${typeof z} instead.`,R);if(/[^a-zA-Z0-9_]/.test(z))return y.error("Variable names must contain only alphanumeric characters or '_'.",R);const $=y.parse(d[R+1],R+1);if(!$)return null;x.push([z,$])}const k=y.parse(d[d.length-1],d.length-1,y.expectedType,x);return k?new fh(x,k):null}outputDefined(){return this.result.outputDefined()}}class Qr{constructor(d,y){this.type=y.type,this.name=d,this.boundExpression=y}static parse(d,y){if(d.length!==2||typeof d[1]!="string")return y.error("'var' expression requires exactly one string literal argument.");const x=d[1];return y.scope.has(x)?new Qr(x,y.scope.get(x)):y.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(d){return this.boundExpression.evaluate(d)}eachChild(){}outputDefined(){return!1}}class rp{constructor(d,y,x){this.type=d,this.index=y,this.input=x}static parse(d,y){if(d.length!==3)return y.error(`Expected 2 arguments, but found ${d.length-1} instead.`);const x=y.parse(d[1],1,Qt),k=y.parse(d[2],2,Pt(y.expectedType||ar));return x&&k?new rp(k.type.itemType,x,k):null}evaluate(d){const y=this.index.evaluate(d),x=this.input.evaluate(d);if(y<0)throw new sa(`Array index out of bounds: ${y} < 0.`);if(y>=x.length)throw new sa(`Array index out of bounds: ${y} > ${x.length-1}.`);if(y!==Math.floor(y))throw new sa(`Array index must be an integer, but found ${y} instead.`);return x[y]}eachChild(d){d(this.index),d(this.input)}outputDefined(){return!1}}class Qs{constructor(d,y){this.type=en,this.needle=d,this.haystack=y}static parse(d,y){if(d.length!==3)return y.error(`Expected 2 arguments, but found ${d.length-1} instead.`);const x=y.parse(d[1],1,ar),k=y.parse(d[2],2,ar);return x&&k?Cr(x.type,[en,St,Qt,Br,ar])?new Qs(x,k):y.error(`Expected first argument to be of type boolean, string, number or null, but found ${dn(x.type)} instead`):null}evaluate(d){const y=this.needle.evaluate(d),x=this.haystack.evaluate(d);if(!x)return!1;if(!ci(y,["boolean","string","number","null"]))throw new sa(`Expected first argument to be of type boolean, string, number or null, but found ${dn(la(y))} instead.`);if(!ci(x,["string","array"]))throw new sa(`Expected second argument to be of type array or string, but found ${dn(la(x))} instead.`);return x.indexOf(y)>=0}eachChild(d){d(this.needle),d(this.haystack)}outputDefined(){return!0}}class ph{constructor(d,y,x){this.type=Qt,this.needle=d,this.haystack=y,this.fromIndex=x}static parse(d,y){if(d.length<=2||d.length>=5)return y.error(`Expected 3 or 4 arguments, but found ${d.length-1} instead.`);const x=y.parse(d[1],1,ar),k=y.parse(d[2],2,ar);if(!x||!k)return null;if(!Cr(x.type,[en,St,Qt,Br,ar]))return y.error(`Expected first argument to be of type boolean, string, number or null, but found ${dn(x.type)} instead`);if(d.length===4){const R=y.parse(d[3],3,Qt);return R?new ph(x,k,R):null}return new ph(x,k)}evaluate(d){const y=this.needle.evaluate(d),x=this.haystack.evaluate(d);if(!ci(y,["boolean","string","number","null"]))throw new sa(`Expected first argument to be of type boolean, string, number or null, but found ${dn(la(y))} instead.`);let k;if(this.fromIndex&&(k=this.fromIndex.evaluate(d)),ci(x,["string"])){const R=x.indexOf(y,k);return R===-1?-1:[...x.slice(0,R)].length}if(ci(x,["array"]))return x.indexOf(y,k);throw new sa(`Expected second argument to be of type array or string, but found ${dn(la(x))} instead.`)}eachChild(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)}outputDefined(){return!1}}class Tm{constructor(d,y,x,k,R,z){this.inputType=d,this.type=y,this.input=x,this.cases=k,this.outputs=R,this.otherwise=z}static parse(d,y){if(d.length<5)return y.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if(d.length%2!=1)return y.error("Expected an even number of arguments.");let x,k;y.expectedType&&y.expectedType.kind!=="value"&&(k=y.expectedType);const R={},z=[];for(let Q=2;Q<d.length-1;Q+=2){let ae=d[Q];const fe=d[Q+1];Array.isArray(ae)||(ae=[ae]);const xe=y.concat(Q);if(ae.length===0)return xe.error("Expected at least one branch label.");for(const Pe of ae){if(typeof Pe!="number"&&typeof Pe!="string")return xe.error("Branch labels must be numbers or strings.");if(typeof Pe=="number"&&Math.abs(Pe)>Number.MAX_SAFE_INTEGER)return xe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Pe=="number"&&Math.floor(Pe)!==Pe)return xe.error("Numeric branch labels must be integer values.");if(x){if(xe.checkSubtype(x,la(Pe)))return null}else x=la(Pe);if(R[String(Pe)]!==void 0)return xe.error("Branch labels must be unique.");R[String(Pe)]=z.length}const Te=y.parse(fe,Q,k);if(!Te)return null;k=k||Te.type,z.push(Te)}const $=y.parse(d[1],1,ar);if(!$)return null;const K=y.parse(d[d.length-1],d.length-1,k);return K?$.type.kind!=="value"&&y.concat(1).checkSubtype(x,$.type)?null:new Tm(x,k,$,R,z,K):null}evaluate(d){const y=this.input.evaluate(d);return(la(y)===this.inputType&&this.outputs[this.cases[y]]||this.otherwise).evaluate(d)}eachChild(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)}outputDefined(){return this.outputs.every(d=>d.outputDefined())&&this.otherwise.outputDefined()}}class Mm{constructor(d,y,x){this.type=d,this.branches=y,this.otherwise=x}static parse(d,y){if(d.length<4)return y.error(`Expected at least 3 arguments, but found only ${d.length-1}.`);if(d.length%2!=0)return y.error("Expected an odd number of arguments.");let x;y.expectedType&&y.expectedType.kind!=="value"&&(x=y.expectedType);const k=[];for(let z=1;z<d.length-1;z+=2){const $=y.parse(d[z],z,en);if(!$)return null;const K=y.parse(d[z+1],z+1,x);if(!K)return null;k.push([$,K]),x=x||K.type}const R=y.parse(d[d.length-1],d.length-1,x);if(!R)return null;if(!x)throw new Error("Can't infer output type");return new Mm(x,k,R)}evaluate(d){for(const[y,x]of this.branches)if(y.evaluate(d))return x.evaluate(d);return this.otherwise.evaluate(d)}eachChild(d){for(const[y,x]of this.branches)d(y),d(x);d(this.otherwise)}outputDefined(){return this.branches.every(([d,y])=>y.outputDefined())&&this.otherwise.outputDefined()}}class vh{constructor(d,y,x,k){this.type=d,this.input=y,this.beginIndex=x,this.endIndex=k}static parse(d,y){if(d.length<=2||d.length>=5)return y.error(`Expected 3 or 4 arguments, but found ${d.length-1} instead.`);const x=y.parse(d[1],1,ar),k=y.parse(d[2],2,Qt);if(!x||!k)return null;if(!Cr(x.type,[Pt(ar),St,ar]))return y.error(`Expected first argument to be of type array or string, but found ${dn(x.type)} instead`);if(d.length===4){const R=y.parse(d[3],3,Qt);return R?new vh(x.type,x,k,R):null}return new vh(x.type,x,k)}evaluate(d){const y=this.input.evaluate(d),x=this.beginIndex.evaluate(d);let k;if(this.endIndex&&(k=this.endIndex.evaluate(d)),ci(y,["string"]))return[...y].slice(x,k).join("");if(ci(y,["array"]))return y.slice(x,k);throw new sa(`Expected first argument to be of type array or string, but found ${dn(la(y))} instead.`)}eachChild(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)}outputDefined(){return!1}}function ip(g,d){const y=g.length-1;let x,k,R=0,z=y,$=0;for(;R<=z;)if($=Math.floor((R+z)/2),x=g[$],k=g[$+1],x<=d){if($===y||d<k)return $;R=$+1}else{if(!(x>d))throw new sa("Input is not a number.");z=$-1}return 0}class ap{constructor(d,y,x){this.type=d,this.input=y,this.labels=[],this.outputs=[];for(const[k,R]of x)this.labels.push(k),this.outputs.push(R)}static parse(d,y){if(d.length-1<4)return y.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if((d.length-1)%2!=0)return y.error("Expected an even number of arguments.");const x=y.parse(d[1],1,Qt);if(!x)return null;const k=[];let R=null;y.expectedType&&y.expectedType.kind!=="value"&&(R=y.expectedType);for(let z=1;z<d.length;z+=2){const $=z===1?-1/0:d[z],K=d[z+1],Q=z,ae=z+1;if(typeof $!="number")return y.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(k.length&&k[k.length-1][0]>=$)return y.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Q);const fe=y.parse(K,ae,R);if(!fe)return null;R=R||fe.type,k.push([$,fe])}return new ap(R,x,k)}evaluate(d){const y=this.labels,x=this.outputs;if(y.length===1)return x[0].evaluate(d);const k=this.input.evaluate(d);if(k<=y[0])return x[0].evaluate(d);const R=y.length;return k>=y[R-1]?x[R-1].evaluate(d):x[ip(y,k)].evaluate(d)}eachChild(d){d(this.input);for(const y of this.outputs)d(y)}outputDefined(){return this.outputs.every(d=>d.outputDefined())}}function Bx(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var km,mh,lo=function(){if(mh)return km;function g(d,y,x,k){this.cx=3*d,this.bx=3*(x-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(k-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=y,this.p2x=x,this.p2y=k}return mh=1,km=g,g.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,y){if(y===void 0&&(y=1e-6),d<0)return 0;if(d>1)return 1;for(var x=d,k=0;k<8;k++){var R=this.sampleCurveX(x)-d;if(Math.abs(R)<y)return x;var z=this.sampleCurveDerivativeX(x);if(Math.abs(z)<1e-6)break;x-=R/z}var $=0,K=1;for(x=d,k=0;k<20&&(R=this.sampleCurveX(x),!(Math.abs(R-d)<y));k++)d>R?$=x:K=x,x=.5*(K-$)+$;return x},solve:function(d,y){return this.sampleCurveY(this.solveCurveX(d,y))}},km}(),Em=Bx(lo);class Ro{constructor(d,y,x,k,R){this.type=d,this.operator=y,this.interpolation=x,this.input=k,this.labels=[],this.outputs=[];for(const[z,$]of R)this.labels.push(z),this.outputs.push($)}static interpolationFactor(d,y,x,k){let R=0;if(d.name==="exponential")R=gh(y,d.base,x,k);else if(d.name==="linear")R=gh(y,1,x,k);else if(d.name==="cubic-bezier"){const z=d.controlPoints;R=new Em(z[0],z[1],z[2],z[3]).solve(gh(y,1,x,k))}return R}static parse(d,y){let[x,k,R,...z]=d;if(!Array.isArray(k)||k.length===0)return y.error("Expected an interpolation type expression.",1);if(k[0]==="linear")k={name:"linear"};else if(k[0]==="exponential"){const Q=k[1];if(typeof Q!="number")return y.error("Exponential interpolation requires a numeric base.",1,1);k={name:"exponential",base:Q}}else{if(k[0]!=="cubic-bezier")return y.error(`Unknown interpolation type ${String(k[0])}`,1,0);{const Q=k.slice(1);if(Q.length!==4||Q.some(ae=>typeof ae!="number"||ae<0||ae>1))return y.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);k={name:"cubic-bezier",controlPoints:Q}}}if(d.length-1<4)return y.error(`Expected at least 4 arguments, but found only ${d.length-1}.`);if((d.length-1)%2!=0)return y.error("Expected an even number of arguments.");if(R=y.parse(R,2,Qt),!R)return null;const $=[];let K=null;x==="interpolate-hcl"||x==="interpolate-lab"?K=gr:y.expectedType&&y.expectedType.kind!=="value"&&(K=y.expectedType);for(let Q=0;Q<z.length;Q+=2){const ae=z[Q],fe=z[Q+1],xe=Q+3,Te=Q+4;if(typeof ae!="number")return y.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xe);if($.length&&$[$.length-1][0]>=ae)return y.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xe);const Pe=y.parse(fe,Te,K);if(!Pe)return null;K=K||Pe.type,$.push([ae,Pe])}return Li(K,Qt)||Li(K,Tr)||Li(K,gr)||Li(K,zt)||Li(K,Ht)||Li(K,Pt(Qt))?new Ro(K,x,k,R,$):y.error(`Type ${dn(K)} is not interpolatable.`)}evaluate(d){const y=this.labels,x=this.outputs;if(y.length===1)return x[0].evaluate(d);const k=this.input.evaluate(d);if(k<=y[0])return x[0].evaluate(d);const R=y.length;if(k>=y[R-1])return x[R-1].evaluate(d);const z=ip(y,k),$=Ro.interpolationFactor(this.interpolation,k,y[z],y[z+1]),K=x[z].evaluate(d),Q=x[z+1].evaluate(d);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return du(K,Q,$);case"color":return Rr.interpolate(K,Q,$);case"padding":return so.interpolate(K,Q,$);case"variableAnchorOffsetCollection":return Za.interpolate(K,Q,$);case"array":return dh(K,Q,$);case"projectionDefinition":return _o.interpolate(K,Q,$)}case"interpolate-hcl":return Rr.interpolate(K,Q,$,"hcl");case"interpolate-lab":return Rr.interpolate(K,Q,$,"lab")}}eachChild(d){d(this.input);for(const y of this.outputs)d(y)}outputDefined(){return this.outputs.every(d=>d.outputDefined())}}function gh(g,d,y,x){const k=x-y,R=g-y;return k===0?0:d===1?R/k:(Math.pow(d,R)-1)/(Math.pow(d,k)-1)}const zi={color:Rr.interpolate,number:du,padding:so.interpolate,variableAnchorOffsetCollection:Za.interpolate,array:dh};class op{constructor(d,y){this.type=d,this.args=y}static parse(d,y){if(d.length<2)return y.error("Expected at least one argument.");let x=null;const k=y.expectedType;k&&k.kind!=="value"&&(x=k);const R=[];for(const $ of d.slice(1)){const K=y.parse($,1+R.length,x,void 0,{typeAnnotation:"omit"});if(!K)return null;x=x||K.type,R.push(K)}if(!x)throw new Error("No output type");const z=k&&R.some($=>dr(k,$.type));return new op(z?ar:x,R)}evaluate(d){let y,x=null,k=0;for(const R of this.args)if(k++,x=R.evaluate(d),x&&x instanceof ts&&!x.available&&(y||(y=x.name),x=null,k===this.args.length&&(x=y)),x!==null)break;return x}eachChild(d){this.args.forEach(d)}outputDefined(){return this.args.every(d=>d.outputDefined())}}function Am(g,d){return g==="=="||g==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function t_(g,d,y,x){return x.compare(d,y)===0}function yh(g,d,y){const x=g!=="=="&&g!=="!=";return class ine{constructor(R,z,$){this.type=en,this.lhs=R,this.rhs=z,this.collator=$,this.hasUntypedArgument=R.type.kind==="value"||z.type.kind==="value"}static parse(R,z){if(R.length!==3&&R.length!==4)return z.error("Expected two or three arguments.");const $=R[0];let K=z.parse(R[1],1,ar);if(!K)return null;if(!Am($,K.type))return z.concat(1).error(`"${$}" comparisons are not supported for type '${dn(K.type)}'.`);let Q=z.parse(R[2],2,ar);if(!Q)return null;if(!Am($,Q.type))return z.concat(2).error(`"${$}" comparisons are not supported for type '${dn(Q.type)}'.`);if(K.type.kind!==Q.type.kind&&K.type.kind!=="value"&&Q.type.kind!=="value")return z.error(`Cannot compare types '${dn(K.type)}' and '${dn(Q.type)}'.`);x&&(K.type.kind==="value"&&Q.type.kind!=="value"?K=new ks(Q.type,[K]):K.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new ks(K.type,[Q])));let ae=null;if(R.length===4){if(K.type.kind!=="string"&&Q.type.kind!=="string"&&K.type.kind!=="value"&&Q.type.kind!=="value")return z.error("Cannot use collator to compare non-string types.");if(ae=z.parse(R[3],3,$e),!ae)return null}return new ine(K,Q,ae)}evaluate(R){const z=this.lhs.evaluate(R),$=this.rhs.evaluate(R);if(x&&this.hasUntypedArgument){const K=la(z),Q=la($);if(K.kind!==Q.kind||K.kind!=="string"&&K.kind!=="number")throw new sa(`Expected arguments for "${g}" to be (string, string) or (number, number), but found (${K.kind}, ${Q.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const K=la(z),Q=la($);if(K.kind!=="string"||Q.kind!=="string")return d(R,z,$)}return this.collator?y(R,z,$,this.collator.evaluate(R)):d(R,z,$)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const Pm=yh("==",function(g,d,y){return d===y},t_),n_=yh("!=",function(g,d,y){return d!==y},function(g,d,y,x){return!t_(0,d,y,x)}),TE=yh("<",function(g,d,y){return d<y},function(g,d,y,x){return x.compare(d,y)<0}),Im=yh(">",function(g,d,y){return d>y},function(g,d,y,x){return x.compare(d,y)>0}),Lm=yh("<=",function(g,d,y){return d<=y},function(g,d,y,x){return x.compare(d,y)<=0}),el=yh(">=",function(g,d,y){return d>=y},function(g,d,y,x){return x.compare(d,y)>=0});class sp{constructor(d,y,x){this.type=$e,this.locale=x,this.caseSensitive=d,this.diacriticSensitive=y}static parse(d,y){if(d.length!==2)return y.error("Expected one argument.");const x=d[1];if(typeof x!="object"||Array.isArray(x))return y.error("Collator options argument must be an object.");const k=y.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,en);if(!k)return null;const R=y.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,en);if(!R)return null;let z=null;return x.locale&&(z=y.parse(x.locale,1,St),!z)?null:new sp(k,R,z)}evaluate(d){return new Jr(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)}eachChild(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)}outputDefined(){return!1}}class _h{constructor(d,y,x,k,R){this.type=St,this.number=d,this.locale=y,this.currency=x,this.minFractionDigits=k,this.maxFractionDigits=R}static parse(d,y){if(d.length!==3)return y.error("Expected two arguments.");const x=y.parse(d[1],1,Qt);if(!x)return null;const k=d[2];if(typeof k!="object"||Array.isArray(k))return y.error("NumberFormat options argument must be an object.");let R=null;if(k.locale&&(R=y.parse(k.locale,1,St),!R))return null;let z=null;if(k.currency&&(z=y.parse(k.currency,1,St),!z))return null;let $=null;if(k["min-fraction-digits"]&&($=y.parse(k["min-fraction-digits"],1,Qt),!$))return null;let K=null;return k["max-fraction-digits"]&&(K=y.parse(k["max-fraction-digits"],1,Qt),!K)?null:new _h(x,R,z,$,K)}evaluate(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))}eachChild(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)}outputDefined(){return!1}}class Dm{constructor(d){this.type=je,this.sections=d}static parse(d,y){if(d.length<2)return y.error("Expected at least one argument.");const x=d[1];if(!Array.isArray(x)&&typeof x=="object")return y.error("First argument must be an image or text section.");const k=[];let R=!1;for(let z=1;z<=d.length-1;++z){const $=d[z];if(R&&typeof $=="object"&&!Array.isArray($)){R=!1;let K=null;if($["font-scale"]&&(K=y.parse($["font-scale"],1,Qt),!K))return null;let Q=null;if($["text-font"]&&(Q=y.parse($["text-font"],1,Pt(St)),!Q))return null;let ae=null;if($["text-color"]&&(ae=y.parse($["text-color"],1,gr),!ae))return null;let fe=null;if($["vertical-align"]){if(typeof $["vertical-align"]=="string"&&!hh.includes($["vertical-align"]))return y.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${$["vertical-align"]}' instead.`);if(fe=y.parse($["vertical-align"],1,St),!fe)return null}const xe=k[k.length-1];xe.scale=K,xe.font=Q,xe.textColor=ae,xe.verticalAlign=fe}else{const K=y.parse(d[z],1,ar);if(!K)return null;const Q=K.type.kind;if(Q!=="string"&&Q!=="value"&&Q!=="null"&&Q!=="resolvedImage")return y.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,k.push({content:K,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Dm(k)}evaluate(d){return new Do(this.sections.map(y=>{const x=y.content.evaluate(d);return la(x)===rt?new _l("",x,null,null,null,y.verticalAlign?y.verticalAlign.evaluate(d):null):new _l(bl(x),null,y.scale?y.scale.evaluate(d):null,y.font?y.font.evaluate(d).join(","):null,y.textColor?y.textColor.evaluate(d):null,y.verticalAlign?y.verticalAlign.evaluate(d):null)}))}eachChild(d){for(const y of this.sections)d(y.content),y.scale&&d(y.scale),y.font&&d(y.font),y.textColor&&d(y.textColor),y.verticalAlign&&d(y.verticalAlign)}outputDefined(){return!1}}class lp{constructor(d){this.type=rt,this.input=d}static parse(d,y){if(d.length!==2)return y.error("Expected two arguments.");const x=y.parse(d[1],1,St);return x?new lp(x):y.error("No image name provided.")}evaluate(d){const y=this.input.evaluate(d),x=ts.fromString(y);return x&&d.availableImages&&(x.available=d.availableImages.indexOf(y)>-1),x}eachChild(d){d(this.input)}outputDefined(){return!1}}class r_{constructor(d){this.type=Qt,this.input=d}static parse(d,y){if(d.length!==2)return y.error(`Expected 1 argument, but found ${d.length-1} instead.`);const x=y.parse(d[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?y.error(`Expected argument of type string or array, but found ${dn(x.type)} instead.`):new r_(x):null}evaluate(d){const y=this.input.evaluate(d);if(typeof y=="string")return[...y].length;if(Array.isArray(y))return y.length;throw new sa(`Expected value to be of type string or array, but found ${dn(la(y))} instead.`)}eachChild(d){d(this.input)}outputDefined(){return!1}}const wl=8192;function ME(g,d){const y=(180+g[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g[1]*Math.PI/360)))/360,k=Math.pow(2,d.z);return[Math.round(y*k*wl),Math.round(x*k*wl)]}function i_(g,d){const y=Math.pow(2,d.z);return[(k=(g[0]/wl+d.x)/y,360*k-180),(x=(g[1]/wl+d.y)/y,360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90)];var x,k}function fc(g,d){g[0]=Math.min(g[0],d[0]),g[1]=Math.min(g[1],d[1]),g[2]=Math.max(g[2],d[0]),g[3]=Math.max(g[3],d[1])}function up(g,d){return!(g[0]<=d[0]||g[2]>=d[2]||g[1]<=d[1]||g[3]>=d[3])}function Fx(g,d,y){const x=g[0]-d[0],k=g[1]-d[1],R=g[0]-y[0],z=g[1]-y[1];return x*z-R*k==0&&x*R<=0&&k*z<=0}function cp(g,d,y,x){return(k=[x[0]-y[0],x[1]-y[1]])[0]*(R=[d[0]-g[0],d[1]-g[1]])[1]-k[1]*R[0]!=0&&!(!$x(g,d,y,x)||!$x(y,x,g,d));var k,R}function kE(g,d,y){for(const x of y)for(let k=0;k<x.length-1;++k)if(cp(g,d,x[k],x[k+1]))return!0;return!1}function vd(g,d,y=!1){let x=!1;for(const $ of d)for(let K=0;K<$.length-1;K++){if(Fx(g,$[K],$[K+1]))return y;(R=$[K])[1]>(k=g)[1]!=(z=$[K+1])[1]>k[1]&&k[0]<(z[0]-R[0])*(k[1]-R[1])/(z[1]-R[1])+R[0]&&(x=!x)}var k,R,z;return x}function EE(g,d){for(const y of d)if(vd(g,y))return!0;return!1}function Nx(g,d){for(const y of g)if(!vd(y,d))return!1;for(let y=0;y<g.length-1;++y)if(kE(g[y],g[y+1],d))return!1;return!0}function AE(g,d){for(const y of d)if(Nx(g,y))return!0;return!1}function $x(g,d,y,x){const k=x[0]-y[0],R=x[1]-y[1],z=(g[0]-y[0])*R-k*(g[1]-y[1]),$=(d[0]-y[0])*R-k*(d[1]-y[1]);return z>0&&$<0||z<0&&$>0}function a_(g,d,y){const x=[];for(let k=0;k<g.length;k++){const R=[];for(let z=0;z<g[k].length;z++){const $=ME(g[k][z],y);fc(d,$),R.push($)}x.push(R)}return x}function o_(g,d,y){const x=[];for(let k=0;k<g.length;k++){const R=a_(g[k],d,y);x.push(R)}return x}function s_(g,d,y,x){if(g[0]<y[0]||g[0]>y[2]){const k=.5*x;let R=g[0]-y[0]>k?-x:y[0]-g[0]>k?x:0;R===0&&(R=g[0]-y[2]>k?-x:y[2]-g[0]>k?x:0),g[0]+=R}fc(d,g)}function l_(g,d,y,x){const k=Math.pow(2,x.z)*wl,R=[x.x*wl,x.y*wl],z=[];for(const $ of g)for(const K of $){const Q=[K.x+R[0],K.y+R[1]];s_(Q,d,y,k),z.push(Q)}return z}function Vx(g,d,y,x){const k=Math.pow(2,x.z)*wl,R=[x.x*wl,x.y*wl],z=[];for(const K of g){const Q=[];for(const ae of K){const fe=[ae.x+R[0],ae.y+R[1]];fc(d,fe),Q.push(fe)}z.push(Q)}if(d[2]-d[0]<=k/2){($=d)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(const K of z)for(const Q of K)s_(Q,d,y,k)}var $;return z}class md{constructor(d,y){this.type=en,this.geojson=d,this.geometries=y}static parse(d,y){if(d.length!==2)return y.error(`'within' expression requires exactly one argument, but found ${d.length-1} instead.`);if(ep(d[1])){const x=d[1];if(x.type==="FeatureCollection"){const k=[];for(const R of x.features){const{type:z,coordinates:$}=R.geometry;z==="Polygon"&&k.push($),z==="MultiPolygon"&&k.push(...$)}if(k.length)return new md(x,{type:"MultiPolygon",coordinates:k})}else if(x.type==="Feature"){const k=x.geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new md(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new md(x,x)}return y.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(y,x){const k=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],z=y.canonicalID();if(x.type==="Polygon"){const $=a_(x.coordinates,R,z),K=l_(y.geometry(),k,R,z);if(!up(k,R))return!1;for(const Q of K)if(!vd(Q,$))return!1}if(x.type==="MultiPolygon"){const $=o_(x.coordinates,R,z),K=l_(y.geometry(),k,R,z);if(!up(k,R))return!1;for(const Q of K)if(!EE(Q,$))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(y,x){const k=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],z=y.canonicalID();if(x.type==="Polygon"){const $=a_(x.coordinates,R,z),K=Vx(y.geometry(),k,R,z);if(!up(k,R))return!1;for(const Q of K)if(!Nx(Q,$))return!1}if(x.type==="MultiPolygon"){const $=o_(x.coordinates,R,z),K=Vx(y.geometry(),k,R,z);if(!up(k,R))return!1;for(const Q of K)if(!AE(Q,$))return!1}return!0}(d,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Hx=class{constructor(g=[],d=(y,x)=>y<x?-1:y>x?1:0){if(this.data=g,this.length=this.data.length,this.compare=d,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(g){this.data.push(g),this._up(this.length++)}pop(){if(this.length===0)return;const g=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),g}peek(){return this.data[0]}_up(g){const{data:d,compare:y}=this,x=d[g];for(;g>0;){const k=g-1>>1,R=d[k];if(y(x,R)>=0)break;d[g]=R,g=k}d[g]=x}_down(g){const{data:d,compare:y}=this,x=this.length>>1,k=d[g];for(;g<x;){let R=1+(g<<1);const z=R+1;if(z<this.length&&y(d[z],d[R])<0&&(R=z),y(d[R],k)>=0)break;d[g]=d[R],g=R}d[g]=k}};function Rm(g,d,y=0,x=g.length-1,k=PE){for(;x>y;){if(x-y>600){const K=x-y+1,Q=d-y+1,ae=Math.log(K),fe=.5*Math.exp(2*ae/3),xe=.5*Math.sqrt(ae*fe*(K-fe)/K)*(Q-K/2<0?-1:1);Rm(g,d,Math.max(y,Math.floor(d-Q*fe/K+xe)),Math.min(x,Math.floor(d+(K-Q)*fe/K+xe)),k)}const R=g[d];let z=y,$=x;for(dp(g,y,d),k(g[x],R)>0&&dp(g,y,x);z<$;){for(dp(g,z,$),z++,$--;k(g[z],R)<0;)z++;for(;k(g[$],R)>0;)$--}k(g[y],R)===0?dp(g,y,$):($++,dp(g,$,x)),$<=d&&(y=$+1),d<=$&&(x=$-1)}}function dp(g,d,y){const x=g[d];g[d]=g[y],g[y]=x}function PE(g,d){return g<d?-1:g>d?1:0}function Om(g,d){if(g.length<=1)return[g];const y=[];let x,k;for(const R of g){const z=Ux(R);z!==0&&(R.area=Math.abs(z),k===void 0&&(k=z<0),k===z<0?(x&&y.push(x),x=[R]):x.push(R))}if(x&&y.push(x),d>1)for(let R=0;R<y.length;R++)y[R].length<=d||(Rm(y[R],d,1,y[R].length-1,jx),y[R]=y[R].slice(0,d));return y}function jx(g,d){return d.area-g.area}function Ux(g){let d=0;for(let y,x,k=0,R=g.length,z=R-1;k<R;z=k++)y=g[k],x=g[z],d+=(x.x-y.x)*(y.y+x.y);return d}const Wx=1/298.257223563,Gx=Wx*(2-Wx),u_=Math.PI/180;class zm{constructor(d){const y=6378.137*u_*1e3,x=Math.cos(d*u_),k=1/(1-Gx*(1-x*x)),R=Math.sqrt(k);this.kx=y*R*x,this.ky=y*R*k*(1-Gx)}distance(d,y){const x=this.wrap(d[0]-y[0])*this.kx,k=(d[1]-y[1])*this.ky;return Math.sqrt(x*x+k*k)}pointOnLine(d,y){let x,k,R,z,$=1/0;for(let K=0;K<d.length-1;K++){let Q=d[K][0],ae=d[K][1],fe=this.wrap(d[K+1][0]-Q)*this.kx,xe=(d[K+1][1]-ae)*this.ky,Te=0;fe===0&&xe===0||(Te=(this.wrap(y[0]-Q)*this.kx*fe+(y[1]-ae)*this.ky*xe)/(fe*fe+xe*xe),Te>1?(Q=d[K+1][0],ae=d[K+1][1]):Te>0&&(Q+=fe/this.kx*Te,ae+=xe/this.ky*Te)),fe=this.wrap(y[0]-Q)*this.kx,xe=(y[1]-ae)*this.ky;const Pe=fe*fe+xe*xe;Pe<$&&($=Pe,x=Q,k=ae,R=K,z=Te)}return{point:[x,k],index:R,t:Math.max(0,Math.min(1,z))}}wrap(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}}function Kx(g,d){return d[0]-g[0]}function Bm(g){return g[1]-g[0]+1}function hu(g,d){return g[1]>=g[0]&&g[1]<d}function Fm(g,d){if(g[0]>g[1])return[null,null];const y=Bm(g);if(d){if(y===2)return[g,null];const k=Math.floor(y/2);return[[g[0],g[0]+k],[g[0]+k,g[1]]]}if(y===1)return[g,null];const x=Math.floor(y/2)-1;return[[g[0],g[0]+x],[g[0]+x+1,g[1]]]}function c_(g,d){if(!hu(d,g.length))return[1/0,1/0,-1/0,-1/0];const y=[1/0,1/0,-1/0,-1/0];for(let x=d[0];x<=d[1];++x)fc(y,g[x]);return y}function d_(g){const d=[1/0,1/0,-1/0,-1/0];for(const y of g)for(const x of y)fc(d,x);return d}function qx(g){return g[0]!==-1/0&&g[1]!==-1/0&&g[2]!==1/0&&g[3]!==1/0}function h_(g,d,y){if(!qx(g)||!qx(d))return NaN;let x=0,k=0;return g[2]<d[0]&&(x=d[0]-g[2]),g[0]>d[2]&&(x=g[0]-d[2]),g[1]>d[3]&&(k=g[1]-d[3]),g[3]<d[1]&&(k=d[1]-g[3]),y.distance([0,0],[x,k])}function Zr(g,d,y){const x=y.pointOnLine(d,g);return y.distance(g,x.point)}function f_(g,d,y,x,k){const R=Math.min(Zr(g,[y,x],k),Zr(d,[y,x],k)),z=Math.min(Zr(y,[g,d],k),Zr(x,[g,d],k));return Math.min(R,z)}function IE(g,d,y,x,k){if(!hu(d,g.length)||!hu(x,y.length))return 1/0;let R=1/0;for(let z=d[0];z<d[1];++z){const $=g[z],K=g[z+1];for(let Q=x[0];Q<x[1];++Q){const ae=y[Q],fe=y[Q+1];if(cp($,K,ae,fe))return 0;R=Math.min(R,f_($,K,ae,fe,k))}}return R}function LE(g,d,y,x,k){if(!hu(d,g.length)||!hu(x,y.length))return NaN;let R=1/0;for(let z=d[0];z<=d[1];++z)for(let $=x[0];$<=x[1];++$)if(R=Math.min(R,k.distance(g[z],y[$])),R===0)return R;return R}function DE(g,d,y){if(vd(g,d,!0))return 0;let x=1/0;for(const k of d){const R=k[0],z=k[k.length-1];if(R!==z&&(x=Math.min(x,Zr(g,[z,R],y)),x===0))return x;const $=y.pointOnLine(k,g);if(x=Math.min(x,y.distance(g,$.point)),x===0)return x}return x}function RE(g,d,y,x){if(!hu(d,g.length))return NaN;for(let R=d[0];R<=d[1];++R)if(vd(g[R],y,!0))return 0;let k=1/0;for(let R=d[0];R<d[1];++R){const z=g[R],$=g[R+1];for(const K of y)for(let Q=0,ae=K.length,fe=ae-1;Q<ae;fe=Q++){const xe=K[fe],Te=K[Q];if(cp(z,$,xe,Te))return 0;k=Math.min(k,f_(z,$,xe,Te,x))}}return k}function Zx(g,d){for(const y of g)for(const x of y)if(vd(x,d,!0))return!0;return!1}function OE(g,d,y,x=1/0){const k=d_(g),R=d_(d);if(x!==1/0&&h_(k,R,y)>=x)return x;if(up(k,R)){if(Zx(g,d))return 0}else if(Zx(d,g))return 0;let z=1/0;for(const $ of g)for(let K=0,Q=$.length,ae=Q-1;K<Q;ae=K++){const fe=$[ae],xe=$[K];for(const Te of d)for(let Pe=0,Re=Te.length,We=Re-1;Pe<Re;We=Pe++){const nt=Te[We],wt=Te[Pe];if(cp(fe,xe,nt,wt))return 0;z=Math.min(z,f_(fe,xe,nt,wt,y))}}return z}function Yx(g,d,y,x,k,R){if(!R)return;const z=h_(c_(x,R),k,y);z<d&&g.push([z,R,[0,0]])}function Nm(g,d,y,x,k,R,z){if(!R||!z)return;const $=h_(c_(x,R),c_(k,z),y);$<d&&g.push([$,R,z])}function $m(g,d,y,x,k=1/0){let R=Math.min(x.distance(g[0],y[0][0]),k);if(R===0)return R;const z=new Hx([[0,[0,g.length-1],[0,0]]],Kx),$=d_(y);for(;z.length>0;){const K=z.pop();if(K[0]>=R)continue;const Q=K[1],ae=d?50:100;if(Bm(Q)<=ae){if(!hu(Q,g.length))return NaN;if(d){const fe=RE(g,Q,y,x);if(isNaN(fe)||fe===0)return fe;R=Math.min(R,fe)}else for(let fe=Q[0];fe<=Q[1];++fe){const xe=DE(g[fe],y,x);if(R=Math.min(R,xe),R===0)return 0}}else{const fe=Fm(Q,d);Yx(z,R,x,g,$,fe[0]),Yx(z,R,x,g,$,fe[1])}}return R}function Vm(g,d,y,x,k,R=1/0){let z=Math.min(R,k.distance(g[0],y[0]));if(z===0)return z;const $=new Hx([[0,[0,g.length-1],[0,y.length-1]]],Kx);for(;$.length>0;){const K=$.pop();if(K[0]>=z)continue;const Q=K[1],ae=K[2],fe=d?50:100,xe=x?50:100;if(Bm(Q)<=fe&&Bm(ae)<=xe){if(!hu(Q,g.length)&&hu(ae,y.length))return NaN;let Te;if(d&&x)Te=IE(g,Q,y,ae,k),z=Math.min(z,Te);else if(d&&!x){const Pe=g.slice(Q[0],Q[1]+1);for(let Re=ae[0];Re<=ae[1];++Re)if(Te=Zr(y[Re],Pe,k),z=Math.min(z,Te),z===0)return z}else if(!d&&x){const Pe=y.slice(ae[0],ae[1]+1);for(let Re=Q[0];Re<=Q[1];++Re)if(Te=Zr(g[Re],Pe,k),z=Math.min(z,Te),z===0)return z}else Te=LE(g,Q,y,ae,k),z=Math.min(z,Te)}else{const Te=Fm(Q,d),Pe=Fm(ae,x);Nm($,z,k,g,y,Te[0],Pe[0]),Nm($,z,k,g,y,Te[0],Pe[1]),Nm($,z,k,g,y,Te[1],Pe[0]),Nm($,z,k,g,y,Te[1],Pe[1])}}return z}function p_(g){return g.type==="MultiPolygon"?g.coordinates.map(d=>({type:"Polygon",coordinates:d})):g.type==="MultiLineString"?g.coordinates.map(d=>({type:"LineString",coordinates:d})):g.type==="MultiPoint"?g.coordinates.map(d=>({type:"Point",coordinates:d})):[g]}class gd{constructor(d,y){this.type=Qt,this.geojson=d,this.geometries=y}static parse(d,y){if(d.length!==2)return y.error(`'distance' expression requires exactly one argument, but found ${d.length-1} instead.`);if(ep(d[1])){const x=d[1];if(x.type==="FeatureCollection")return new gd(x,x.features.map(k=>p_(k.geometry)).flat());if(x.type==="Feature")return new gd(x,p_(x.geometry));if("type"in x&&"coordinates"in x)return new gd(x,p_(x))}return y.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(y,x){const k=y.geometry(),R=k.flat().map(K=>i_([K.x,K.y],y.canonical));if(k.length===0)return NaN;const z=new zm(R[0][1]);let $=1/0;for(const K of x){switch(K.type){case"Point":$=Math.min($,Vm(R,!1,[K.coordinates],!1,z,$));break;case"LineString":$=Math.min($,Vm(R,!1,K.coordinates,!0,z,$));break;case"Polygon":$=Math.min($,$m(R,!1,K.coordinates,z,$))}if($===0)return $}return $}(d,this.geometries);if(d.geometryType()==="LineString")return function(y,x){const k=y.geometry(),R=k.flat().map(K=>i_([K.x,K.y],y.canonical));if(k.length===0)return NaN;const z=new zm(R[0][1]);let $=1/0;for(const K of x){switch(K.type){case"Point":$=Math.min($,Vm(R,!0,[K.coordinates],!1,z,$));break;case"LineString":$=Math.min($,Vm(R,!0,K.coordinates,!0,z,$));break;case"Polygon":$=Math.min($,$m(R,!0,K.coordinates,z,$))}if($===0)return $}return $}(d,this.geometries);if(d.geometryType()==="Polygon")return function(y,x){const k=y.geometry();if(k.length===0||k[0].length===0)return NaN;const R=Om(k,0).map(K=>K.map(Q=>Q.map(ae=>i_([ae.x,ae.y],y.canonical)))),z=new zm(R[0][0][0][1]);let $=1/0;for(const K of x)for(const Q of R){switch(K.type){case"Point":$=Math.min($,$m([K.coordinates],!1,Q,z,$));break;case"LineString":$=Math.min($,$m(K.coordinates,!0,Q,z,$));break;case"Polygon":$=Math.min($,OE(Q,K.coordinates,z,$))}if($===0)return $}return $}(d,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const bh={"==":Pm,"!=":n_,">":Im,"<":TE,">=":el,"<=":Lm,array:ks,at:rp,boolean:ks,case:Mm,coalesce:op,collator:sp,format:Dm,image:lp,in:Qs,"index-of":ph,interpolate:Ro,"interpolate-hcl":Ro,"interpolate-lab":Ro,length:r_,let:fh,literal:hc,match:Tm,number:ks,"number-format":_h,object:ks,slice:vh,step:ap,string:ks,"to-boolean":vi,"to-color":vi,"to-number":vi,"to-string":vi,var:Qr,within:md,distance:gd};class Es{constructor(d,y,x,k){this.name=d,this.type=y,this._evaluate=x,this.args=k}evaluate(d){return this._evaluate(d,this.args)}eachChild(d){this.args.forEach(d)}outputDefined(){return!1}static parse(d,y){const x=d[0],k=Es.definitions[x];if(!k)return y.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(k)?k[0]:k.type,z=Array.isArray(k)?[[k[1],k[2]]]:k.overloads,$=z.filter(([Q])=>!Array.isArray(Q)||Q.length===d.length-1);let K=null;for(const[Q,ae]of $){K=new kr(y.registry,Hm,y.path,null,y.scope);const fe=[];let xe=!1;for(let Te=1;Te<d.length;Te++){const Pe=d[Te],Re=Array.isArray(Q)?Q[Te-1]:Q.type,We=K.parse(Pe,1+fe.length,Re);if(!We){xe=!0;break}fe.push(We)}if(!xe)if(Array.isArray(Q)&&Q.length!==fe.length)K.error(`Expected ${Q.length} arguments, but found ${fe.length} instead.`);else{for(let Te=0;Te<fe.length;Te++){const Pe=Array.isArray(Q)?Q[Te]:Q.type,Re=fe[Te];K.concat(Te+1).checkSubtype(Pe,Re.type)}if(K.errors.length===0)return new Es(x,R,ae,fe)}}if($.length===1)y.errors.push(...K.errors);else{const Q=($.length?$:z).map(([fe])=>{return xe=fe,Array.isArray(xe)?`(${xe.map(dn).join(", ")})`:`(${dn(xe.type)}...)`;var xe}).join(" | "),ae=[];for(let fe=1;fe<d.length;fe++){const xe=y.parse(d[fe],1+ae.length);if(!xe)return null;ae.push(dn(xe.type))}y.error(`Expected arguments of type ${Q}, but found (${ae.join(", ")}) instead.`)}return null}static register(d,y){Es.definitions=y;for(const x in y)d[x]=Es}}function Xx(g,[d,y,x,k]){d=d.evaluate(g),y=y.evaluate(g),x=x.evaluate(g);const R=k?k.evaluate(g):1,z=dc(d,y,x,R);if(z)throw new sa(z);return new Rr(d/255,y/255,x/255,R,!1)}function Jx(g,d){return g in d}function v_(g,d){const y=d[g];return y===void 0?null:y}function yd(g){return{type:g}}function Hm(g){if(g instanceof Qr)return Hm(g.boundExpression);if(g instanceof Es&&g.name==="error"||g instanceof sp||g instanceof md||g instanceof gd)return!1;const d=g instanceof vi||g instanceof ks;let y=!0;return g.eachChild(x=>{y=d?y&&Hm(x):y&&x instanceof hc}),!!y&&jm(g)&&Um(g,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function jm(g){if(g instanceof Es&&(g.name==="get"&&g.args.length===1||g.name==="feature-state"||g.name==="has"&&g.args.length===1||g.name==="properties"||g.name==="geometry-type"||g.name==="id"||/^filter-/.test(g.name))||g instanceof md||g instanceof gd)return!1;let d=!0;return g.eachChild(y=>{d&&!jm(y)&&(d=!1)}),d}function hp(g){if(g instanceof Es&&g.name==="feature-state")return!1;let d=!0;return g.eachChild(y=>{d&&!hp(y)&&(d=!1)}),d}function Um(g,d){if(g instanceof Es&&d.indexOf(g.name)>=0)return!1;let y=!0;return g.eachChild(x=>{y&&!Um(x,d)&&(y=!1)}),y}function Qx(g){return{result:"success",value:g}}function wh(g){return{result:"error",value:g}}function xh(g){return g["property-type"]==="data-driven"||g["property-type"]==="cross-faded-data-driven"}function eS(g){return!!g.expression&&g.expression.parameters.indexOf("zoom")>-1}function m_(g){return!!g.expression&&g.expression.interpolated}function ri(g){return g instanceof Number?"number":g instanceof String?"string":g instanceof Boolean?"boolean":Array.isArray(g)?"array":g===null?"null":typeof g}function Wm(g){return typeof g=="object"&&g!==null&&!Array.isArray(g)}function zE(g){return g}function Gm(g,d){const y=d.type==="color",x=g.stops&&typeof g.stops[0][0]=="object",k=x||!(x||g.property!==void 0),R=g.type||(m_(d)?"exponential":"interval");if(y||d.type==="padding"){const ae=y?Rr.parse:so.parse;(g=rr({},g)).stops&&(g.stops=g.stops.map(fe=>[fe[0],ae(fe[1])])),g.default=ae(g.default?g.default:d.default)}if(g.colorSpace&&(z=g.colorSpace)!=="rgb"&&z!=="hcl"&&z!=="lab")throw new Error(`Unknown color space: "${g.colorSpace}"`);var z;let $,K,Q;if(R==="exponential")$=g_;else if(R==="interval")$=FE;else if(R==="categorical"){$=BE,K=Object.create(null);for(const ae of g.stops)K[ae[0]]=ae[1];Q=typeof g.stops[0][0]}else{if(R!=="identity")throw new Error(`Unknown function type "${R}"`);$=NE}if(x){const ae={},fe=[];for(let Pe=0;Pe<g.stops.length;Pe++){const Re=g.stops[Pe],We=Re[0].zoom;ae[We]===void 0&&(ae[We]={zoom:We,type:g.type,property:g.property,default:g.default,stops:[]},fe.push(We)),ae[We].stops.push([Re[0].value,Re[1]])}const xe=[];for(const Pe of fe)xe.push([ae[Pe].zoom,Gm(ae[Pe],d)]);const Te={name:"linear"};return{kind:"composite",interpolationType:Te,interpolationFactor:Ro.interpolationFactor.bind(void 0,Te),zoomStops:xe.map(Pe=>Pe[0]),evaluate:({zoom:Pe},Re)=>g_({stops:xe,base:g.base},d,Pe).evaluate(Pe,Re)}}if(k){const ae=R==="exponential"?{name:"exponential",base:g.base!==void 0?g.base:1}:null;return{kind:"camera",interpolationType:ae,interpolationFactor:Ro.interpolationFactor.bind(void 0,ae),zoomStops:g.stops.map(fe=>fe[0]),evaluate:({zoom:fe})=>$(g,d,fe,K,Q)}}return{kind:"source",evaluate(ae,fe){const xe=fe&&fe.properties?fe.properties[g.property]:void 0;return xe===void 0?fp(g.default,d.default):$(g,d,xe,K,Q)}}}function fp(g,d,y){return g!==void 0?g:d!==void 0?d:y!==void 0?y:void 0}function BE(g,d,y,x,k){return fp(typeof y===k?x[y]:void 0,g.default,d.default)}function FE(g,d,y){if(ri(y)!=="number")return fp(g.default,d.default);const x=g.stops.length;if(x===1||y<=g.stops[0][0])return g.stops[0][1];if(y>=g.stops[x-1][0])return g.stops[x-1][1];const k=ip(g.stops.map(R=>R[0]),y);return g.stops[k][1]}function g_(g,d,y){const x=g.base!==void 0?g.base:1;if(ri(y)!=="number")return fp(g.default,d.default);const k=g.stops.length;if(k===1||y<=g.stops[0][0])return g.stops[0][1];if(y>=g.stops[k-1][0])return g.stops[k-1][1];const R=ip(g.stops.map(ae=>ae[0]),y),z=function(ae,fe,xe,Te){const Pe=Te-xe,Re=ae-xe;return Pe===0?0:fe===1?Re/Pe:(Math.pow(fe,Re)-1)/(Math.pow(fe,Pe)-1)}(y,x,g.stops[R][0],g.stops[R+1][0]),$=g.stops[R][1],K=g.stops[R+1][1],Q=zi[d.type]||zE;return typeof $.evaluate=="function"?{evaluate(...ae){const fe=$.evaluate.apply(void 0,ae),xe=K.evaluate.apply(void 0,ae);if(fe!==void 0&&xe!==void 0)return Q(fe,xe,z,g.colorSpace)}}:Q($,K,z,g.colorSpace)}function NE(g,d,y){switch(d.type){case"color":y=Rr.parse(y);break;case"formatted":y=Do.fromString(y.toString());break;case"resolvedImage":y=ts.fromString(y.toString());break;case"padding":y=so.parse(y);break;default:ri(y)===d.type||d.type==="enum"&&d.values[y]||(y=void 0)}return fp(y,g.default,d.default)}Es.register(bh,{error:[{kind:"error"},[St],(g,[d])=>{throw new sa(d.evaluate(g))}],typeof:[St,[ar],(g,[d])=>dn(la(d.evaluate(g)))],"to-rgba":[Pt(Qt,4),[gr],(g,[d])=>{const[y,x,k,R]=d.evaluate(g).rgb;return[255*y,255*x,255*k,R]}],rgb:[gr,[Qt,Qt,Qt],Xx],rgba:[gr,[Qt,Qt,Qt,Qt],Xx],has:{type:en,overloads:[[[St],(g,[d])=>Jx(d.evaluate(g),g.properties())],[[St,qr],(g,[d,y])=>Jx(d.evaluate(g),y.evaluate(g))]]},get:{type:ar,overloads:[[[St],(g,[d])=>v_(d.evaluate(g),g.properties())],[[St,qr],(g,[d,y])=>v_(d.evaluate(g),y.evaluate(g))]]},"feature-state":[ar,[St],(g,[d])=>v_(d.evaluate(g),g.featureState||{})],properties:[qr,[],g=>g.properties()],"geometry-type":[St,[],g=>g.geometryType()],id:[ar,[],g=>g.id()],zoom:[Qt,[],g=>g.globals.zoom],"heatmap-density":[Qt,[],g=>g.globals.heatmapDensity||0],"line-progress":[Qt,[],g=>g.globals.lineProgress||0],accumulated:[ar,[],g=>g.globals.accumulated===void 0?null:g.globals.accumulated],"+":[Qt,yd(Qt),(g,d)=>{let y=0;for(const x of d)y+=x.evaluate(g);return y}],"*":[Qt,yd(Qt),(g,d)=>{let y=1;for(const x of d)y*=x.evaluate(g);return y}],"-":{type:Qt,overloads:[[[Qt,Qt],(g,[d,y])=>d.evaluate(g)-y.evaluate(g)],[[Qt],(g,[d])=>-d.evaluate(g)]]},"/":[Qt,[Qt,Qt],(g,[d,y])=>d.evaluate(g)/y.evaluate(g)],"%":[Qt,[Qt,Qt],(g,[d,y])=>d.evaluate(g)%y.evaluate(g)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(g,[d,y])=>Math.pow(d.evaluate(g),y.evaluate(g))],sqrt:[Qt,[Qt],(g,[d])=>Math.sqrt(d.evaluate(g))],log10:[Qt,[Qt],(g,[d])=>Math.log(d.evaluate(g))/Math.LN10],ln:[Qt,[Qt],(g,[d])=>Math.log(d.evaluate(g))],log2:[Qt,[Qt],(g,[d])=>Math.log(d.evaluate(g))/Math.LN2],sin:[Qt,[Qt],(g,[d])=>Math.sin(d.evaluate(g))],cos:[Qt,[Qt],(g,[d])=>Math.cos(d.evaluate(g))],tan:[Qt,[Qt],(g,[d])=>Math.tan(d.evaluate(g))],asin:[Qt,[Qt],(g,[d])=>Math.asin(d.evaluate(g))],acos:[Qt,[Qt],(g,[d])=>Math.acos(d.evaluate(g))],atan:[Qt,[Qt],(g,[d])=>Math.atan(d.evaluate(g))],min:[Qt,yd(Qt),(g,d)=>Math.min(...d.map(y=>y.evaluate(g)))],max:[Qt,yd(Qt),(g,d)=>Math.max(...d.map(y=>y.evaluate(g)))],abs:[Qt,[Qt],(g,[d])=>Math.abs(d.evaluate(g))],round:[Qt,[Qt],(g,[d])=>{const y=d.evaluate(g);return y<0?-Math.round(-y):Math.round(y)}],floor:[Qt,[Qt],(g,[d])=>Math.floor(d.evaluate(g))],ceil:[Qt,[Qt],(g,[d])=>Math.ceil(d.evaluate(g))],"filter-==":[en,[St,ar],(g,[d,y])=>g.properties()[d.value]===y.value],"filter-id-==":[en,[ar],(g,[d])=>g.id()===d.value],"filter-type-==":[en,[St],(g,[d])=>g.geometryType()===d.value],"filter-<":[en,[St,ar],(g,[d,y])=>{const x=g.properties()[d.value],k=y.value;return typeof x==typeof k&&x<k}],"filter-id-<":[en,[ar],(g,[d])=>{const y=g.id(),x=d.value;return typeof y==typeof x&&y<x}],"filter->":[en,[St,ar],(g,[d,y])=>{const x=g.properties()[d.value],k=y.value;return typeof x==typeof k&&x>k}],"filter-id->":[en,[ar],(g,[d])=>{const y=g.id(),x=d.value;return typeof y==typeof x&&y>x}],"filter-<=":[en,[St,ar],(g,[d,y])=>{const x=g.properties()[d.value],k=y.value;return typeof x==typeof k&&x<=k}],"filter-id-<=":[en,[ar],(g,[d])=>{const y=g.id(),x=d.value;return typeof y==typeof x&&y<=x}],"filter->=":[en,[St,ar],(g,[d,y])=>{const x=g.properties()[d.value],k=y.value;return typeof x==typeof k&&x>=k}],"filter-id->=":[en,[ar],(g,[d])=>{const y=g.id(),x=d.value;return typeof y==typeof x&&y>=x}],"filter-has":[en,[ar],(g,[d])=>d.value in g.properties()],"filter-has-id":[en,[],g=>g.id()!==null&&g.id()!==void 0],"filter-type-in":[en,[Pt(St)],(g,[d])=>d.value.indexOf(g.geometryType())>=0],"filter-id-in":[en,[Pt(ar)],(g,[d])=>d.value.indexOf(g.id())>=0],"filter-in-small":[en,[St,Pt(ar)],(g,[d,y])=>y.value.indexOf(g.properties()[d.value])>=0],"filter-in-large":[en,[St,Pt(ar)],(g,[d,y])=>function(x,k,R,z){for(;R<=z;){const $=R+z>>1;if(k[$]===x)return!0;k[$]>x?z=$-1:R=$+1}return!1}(g.properties()[d.value],y.value,0,y.value.length-1)],all:{type:en,overloads:[[[en,en],(g,[d,y])=>d.evaluate(g)&&y.evaluate(g)],[yd(en),(g,d)=>{for(const y of d)if(!y.evaluate(g))return!1;return!0}]]},any:{type:en,overloads:[[[en,en],(g,[d,y])=>d.evaluate(g)||y.evaluate(g)],[yd(en),(g,d)=>{for(const y of d)if(y.evaluate(g))return!0;return!1}]]},"!":[en,[en],(g,[d])=>!d.evaluate(g)],"is-supported-script":[en,[St],(g,[d])=>{const y=g.globals&&g.globals.isSupportedScript;return!y||y(d.evaluate(g))}],upcase:[St,[St],(g,[d])=>d.evaluate(g).toUpperCase()],downcase:[St,[St],(g,[d])=>d.evaluate(g).toLowerCase()],concat:[St,yd(ar),(g,d)=>d.map(y=>bl(y.evaluate(g))).join("")],"resolved-locale":[St,[$e],(g,[d])=>d.evaluate(g).resolvedLocale()]});class y_{constructor(d,y){var x;this.expression=d,this._warningHistory={},this._evaluator=new ni,this._defaultValue=y?(x=y).type==="color"&&Wm(x.default)?new Rr(0,0,0,0):x.type==="color"?Rr.parse(x.default)||null:x.type==="padding"?so.parse(x.default)||null:x.type==="variableAnchorOffsetCollection"?Za.parse(x.default)||null:x.type==="projectionDefinition"?_o.parse(x.default)||null:x.default===void 0?null:x.default:null,this._enumValues=y&&y.type==="enum"?y.values:null}evaluateWithoutErrorHandling(d,y,x,k,R,z){return this._evaluator.globals=d,this._evaluator.feature=y,this._evaluator.featureState=x,this._evaluator.canonical=k,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)}evaluate(d,y,x,k,R,z){this._evaluator.globals=d,this._evaluator.feature=y||null,this._evaluator.featureState=x||null,this._evaluator.canonical=k,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=z||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new sa(`Expected value to be one of ${Object.keys(this._enumValues).map(K=>JSON.stringify(K)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function _d(g){return Array.isArray(g)&&g.length>0&&typeof g[0]=="string"&&g[0]in bh}function pp(g,d){const y=new kr(bh,Hm,[],d?function(k){const R={color:gr,string:St,number:Qt,enum:St,boolean:en,formatted:je,padding:zt,projectionDefinition:Tr,resolvedImage:rt,variableAnchorOffsetCollection:Ht};return k.type==="array"?Pt(R[k.value]||ar,k.length):R[k.type]}(d):void 0),x=y.parse(g,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Qx(new y_(x,d)):wh(y.errors)}class __{constructor(d,y){this.kind=d,this._styleExpression=y,this.isStateDependent=d!=="constant"&&!hp(y.expression)}evaluateWithoutErrorHandling(d,y,x,k,R,z){return this._styleExpression.evaluateWithoutErrorHandling(d,y,x,k,R,z)}evaluate(d,y,x,k,R,z){return this._styleExpression.evaluate(d,y,x,k,R,z)}}class b_{constructor(d,y,x,k){this.kind=d,this.zoomStops=x,this._styleExpression=y,this.isStateDependent=d!=="camera"&&!hp(y.expression),this.interpolationType=k}evaluateWithoutErrorHandling(d,y,x,k,R,z){return this._styleExpression.evaluateWithoutErrorHandling(d,y,x,k,R,z)}evaluate(d,y,x,k,R,z){return this._styleExpression.evaluate(d,y,x,k,R,z)}interpolationFactor(d,y,x){return this.interpolationType?Ro.interpolationFactor(this.interpolationType,d,y,x):0}}function tS(g,d){const y=pp(g,d);if(y.result==="error")return y;const x=y.value.expression,k=jm(x);if(!k&&!xh(d))return wh([new zr("","data expressions not supported")]);const R=Um(x,["zoom"]);if(!R&&!eS(d))return wh([new zr("","zoom expressions not supported")]);const z=qm(x);return z||R?z instanceof zr?wh([z]):z instanceof Ro&&!m_(d)?wh([new zr("",'"interpolate" expressions cannot be used with this property')]):Qx(z?new b_(k?"camera":"composite",y.value,z.labels,z instanceof Ro?z.interpolation:void 0):new __(k?"constant":"source",y.value)):wh([new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Km{constructor(d,y){this._parameters=d,this._specification=y,rr(this,Gm(this._parameters,this._specification))}static deserialize(d){return new Km(d._parameters,d._specification)}static serialize(d){return{_parameters:d._parameters,_specification:d._specification}}}function qm(g){let d=null;if(g instanceof fh)d=qm(g.result);else if(g instanceof op){for(const y of g.args)if(d=qm(y),d)break}else(g instanceof ap||g instanceof Ro)&&g.input instanceof Es&&g.input.name==="zoom"&&(d=g);return d instanceof zr||g.eachChild(y=>{const x=qm(y);x instanceof zr?d=x:!d&&x?d=new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):d&&x&&d!==x&&(d=new zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),d}function Zm(g){if(g===!0||g===!1)return!0;if(!Array.isArray(g)||g.length===0)return!1;switch(g[0]){case"has":return g.length>=2&&g[1]!=="$id"&&g[1]!=="$type";case"in":return g.length>=3&&(typeof g[1]!="string"||Array.isArray(g[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return g.length!==3||Array.isArray(g[1])||Array.isArray(g[2]);case"any":case"all":for(const d of g.slice(1))if(!Zm(d)&&typeof d!="boolean")return!1;return!0;default:return!0}}const nS={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function w_(g){if(g==null)return{filter:()=>!0,needGeometry:!1};Zm(g)||(g=vp(g));const d=pp(g,nS);if(d.result==="error")throw new Error(d.value.map(y=>`${y.key}: ${y.message}`).join(", "));return{filter:(y,x,k)=>d.value.evaluate(y,x,{},k),needGeometry:x_(g)}}function $E(g,d){return g<d?-1:g>d?1:0}function x_(g){if(!Array.isArray(g))return!1;if(g[0]==="within"||g[0]==="distance")return!0;for(let d=1;d<g.length;d++)if(x_(g[d]))return!0;return!1}function vp(g){if(!g)return!0;const d=g[0];return g.length<=1?d!=="any":d==="=="?Ym(g[1],g[2],"=="):d==="!="?Sh(Ym(g[1],g[2],"==")):d==="<"||d===">"||d==="<="||d===">="?Ym(g[1],g[2],d):d==="any"?(y=g.slice(1),["any"].concat(y.map(vp))):d==="all"?["all"].concat(g.slice(1).map(vp)):d==="none"?["all"].concat(g.slice(1).map(vp).map(Sh)):d==="in"?S_(g[1],g.slice(2)):d==="!in"?Sh(S_(g[1],g.slice(2))):d==="has"?Xm(g[1]):d!=="!has"||Sh(Xm(g[1]));var y}function Ym(g,d,y){switch(g){case"$type":return[`filter-type-${y}`,d];case"$id":return[`filter-id-${y}`,d];default:return[`filter-${y}`,g,d]}}function S_(g,d){if(d.length===0)return!1;switch(g){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(y=>typeof y!=typeof d[0])?["filter-in-large",g,["literal",d.sort($E)]]:["filter-in-small",g,["literal",d]]}}function Xm(g){switch(g){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",g]}}function Sh(g){return["!",g]}function mp(g){const d=typeof g;if(d==="number"||d==="boolean"||d==="string"||g==null)return JSON.stringify(g);if(Array.isArray(g)){let k="[";for(const R of g)k+=`${mp(R)},`;return`${k}]`}const y=Object.keys(g).sort();let x="{";for(let k=0;k<y.length;k++)x+=`${JSON.stringify(y[k])}:${mp(g[y[k]])},`;return`${x}}`}function Jm(g){let d="";for(const y of pt)d+=`/${mp(g[y])}`;return d}function rS(g){const d=g.value;return d?[new Yt(g.key,d,"constants have been deprecated as of v8")]:[]}function ma(g){return g instanceof Number||g instanceof String||g instanceof Boolean?g.valueOf():g}function bd(g){if(Array.isArray(g))return g.map(bd);if(g instanceof Object&&!(g instanceof Number||g instanceof String||g instanceof Boolean)){const d={};for(const y in g)d[y]=bd(g[y]);return d}return ma(g)}function As(g){const d=g.key,y=g.value,x=g.valueSpec||{},k=g.objectElementValidators||{},R=g.style,z=g.styleSpec,$=g.validateSpec;let K=[];const Q=ri(y);if(Q!=="object")return[new Yt(d,y,`object expected, ${Q} found`)];for(const ae in y){const fe=ae.split(".")[0],xe=x[fe]||x["*"];let Te;if(k[fe])Te=k[fe];else if(x[fe])Te=$;else if(k["*"])Te=k["*"];else{if(!x["*"]){K.push(new Yt(d,y[ae],`unknown property "${ae}"`));continue}Te=$}K=K.concat(Te({key:(d&&`${d}.`)+ae,value:y[ae],valueSpec:xe,style:R,styleSpec:z,object:y,objectKey:ae,validateSpec:$},y))}for(const ae in x)k[ae]||x[ae].required&&x[ae].default===void 0&&y[ae]===void 0&&K.push(new Yt(d,y,`missing required property "${ae}"`));return K}function C_(g){const d=g.value,y=g.valueSpec,x=g.style,k=g.styleSpec,R=g.key,z=g.arrayElementValidator||g.validateSpec;if(ri(d)!=="array")return[new Yt(R,d,`array expected, ${ri(d)} found`)];if(y.length&&d.length!==y.length)return[new Yt(R,d,`array length ${y.length} expected, length ${d.length} found`)];if(y["min-length"]&&d.length<y["min-length"])return[new Yt(R,d,`array length at least ${y["min-length"]} expected, length ${d.length} found`)];let $={type:y.value,values:y.values};k.$version<7&&($.function=y.function),ri(y.value)==="object"&&($=y.value);let K=[];for(let Q=0;Q<d.length;Q++)K=K.concat(z({array:d,arrayIndex:Q,value:d[Q],valueSpec:$,validateSpec:g.validateSpec,style:x,styleSpec:k,key:`${R}[${Q}]`}));return K}function T_(g){const d=g.key,y=g.value,x=g.valueSpec;let k=ri(y);return k==="number"&&y!=y&&(k="NaN"),k!=="number"?[new Yt(d,y,`number expected, ${k} found`)]:"minimum"in x&&y<x.minimum?[new Yt(d,y,`${y} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&y>x.maximum?[new Yt(d,y,`${y} is greater than the maximum value ${x.maximum}`)]:[]}function M_(g){const d=g.valueSpec,y=ma(g.value.type);let x,k,R,z={};const $=y!=="categorical"&&g.value.property===void 0,K=!$,Q=ri(g.value.stops)==="array"&&ri(g.value.stops[0])==="array"&&ri(g.value.stops[0][0])==="object",ae=As({key:g.key,value:g.value,valueSpec:g.styleSpec.function,validateSpec:g.validateSpec,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(Te){if(y==="identity")return[new Yt(Te.key,Te.value,'identity function may not have a "stops" property')];let Pe=[];const Re=Te.value;return Pe=Pe.concat(C_({key:Te.key,value:Re,valueSpec:Te.valueSpec,validateSpec:Te.validateSpec,style:Te.style,styleSpec:Te.styleSpec,arrayElementValidator:fe})),ri(Re)==="array"&&Re.length===0&&Pe.push(new Yt(Te.key,Re,"array must have at least one stop")),Pe},default:function(Te){return Te.validateSpec({key:Te.key,value:Te.value,valueSpec:d,validateSpec:Te.validateSpec,style:Te.style,styleSpec:Te.styleSpec})}}});return y==="identity"&&$&&ae.push(new Yt(g.key,g.value,'missing required property "property"')),y==="identity"||g.value.stops||ae.push(new Yt(g.key,g.value,'missing required property "stops"')),y==="exponential"&&g.valueSpec.expression&&!m_(g.valueSpec)&&ae.push(new Yt(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(K&&!xh(g.valueSpec)?ae.push(new Yt(g.key,g.value,"property functions not supported")):$&&!eS(g.valueSpec)&&ae.push(new Yt(g.key,g.value,"zoom functions not supported"))),y!=="categorical"&&!Q||g.value.property!==void 0||ae.push(new Yt(g.key,g.value,'"property" property is required')),ae;function fe(Te){let Pe=[];const Re=Te.value,We=Te.key;if(ri(Re)!=="array")return[new Yt(We,Re,`array expected, ${ri(Re)} found`)];if(Re.length!==2)return[new Yt(We,Re,`array length 2 expected, length ${Re.length} found`)];if(Q){if(ri(Re[0])!=="object")return[new Yt(We,Re,`object expected, ${ri(Re[0])} found`)];if(Re[0].zoom===void 0)return[new Yt(We,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new Yt(We,Re,"object stop key must have value")];if(R&&R>ma(Re[0].zoom))return[new Yt(We,Re[0].zoom,"stop zoom values must appear in ascending order")];ma(Re[0].zoom)!==R&&(R=ma(Re[0].zoom),k=void 0,z={}),Pe=Pe.concat(As({key:`${We}[0]`,value:Re[0],valueSpec:{zoom:{}},validateSpec:Te.validateSpec,style:Te.style,styleSpec:Te.styleSpec,objectElementValidators:{zoom:T_,value:xe}}))}else Pe=Pe.concat(xe({key:`${We}[0]`,value:Re[0],validateSpec:Te.validateSpec,style:Te.style,styleSpec:Te.styleSpec},Re));return _d(bd(Re[1]))?Pe.concat([new Yt(`${We}[1]`,Re[1],"expressions are not allowed in function stops.")]):Pe.concat(Te.validateSpec({key:`${We}[1]`,value:Re[1],valueSpec:d,validateSpec:Te.validateSpec,style:Te.style,styleSpec:Te.styleSpec}))}function xe(Te,Pe){const Re=ri(Te.value),We=ma(Te.value),nt=Te.value!==null?Te.value:Pe;if(x){if(Re!==x)return[new Yt(Te.key,nt,`${Re} stop domain type must match previous stop domain type ${x}`)]}else x=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new Yt(Te.key,nt,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&y!=="categorical"){let wt=`number expected, ${Re} found`;return xh(d)&&y===void 0&&(wt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(Te.key,nt,wt)]}return y!=="categorical"||Re!=="number"||isFinite(We)&&Math.floor(We)===We?y!=="categorical"&&Re==="number"&&k!==void 0&&We<k?[new Yt(Te.key,nt,"stop domain values must appear in ascending order")]:(k=We,y==="categorical"&&We in z?[new Yt(Te.key,nt,"stop domain values must be unique")]:(z[We]=!0,[])):[new Yt(Te.key,nt,`integer expected, found ${We}`)]}}function wd(g){const d=(g.expressionContext==="property"?tS:pp)(bd(g.value),g.valueSpec);if(d.result==="error")return d.value.map(x=>new Yt(`${g.key}${x.key}`,g.value,x.message));const y=d.value.expression||d.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!y.outputDefined())return[new Yt(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!hp(y))return[new Yt(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter"&&!hp(y))return[new Yt(g.key,g.value,'"feature-state" data expressions are not supported with filters.')];if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!Um(y,["zoom","feature-state"]))return[new Yt(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!jm(y))return[new Yt(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pc(g){const d=g.key,y=g.value,x=g.valueSpec,k=[];return Array.isArray(x.values)?x.values.indexOf(ma(y))===-1&&k.push(new Yt(d,y,`expected one of [${x.values.join(", ")}], ${JSON.stringify(y)} found`)):Object.keys(x.values).indexOf(ma(y))===-1&&k.push(new Yt(d,y,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(y)} found`)),k}function k_(g){return Zm(bd(g.value))?wd(rr({},g,{expressionContext:"filter",valueSpec:{value:"boolean"}})):E_(g)}function E_(g){const d=g.value,y=g.key;if(ri(d)!=="array")return[new Yt(y,d,`array expected, ${ri(d)} found`)];const x=g.styleSpec;let k,R=[];if(d.length<1)return[new Yt(y,d,"filter array must have at least 1 element")];switch(R=R.concat(pc({key:`${y}[0]`,value:d[0],valueSpec:x.filter_operator,style:g.style,styleSpec:g.styleSpec})),ma(d[0])){case"<":case"<=":case">":case">=":d.length>=2&&ma(d[1])==="$type"&&R.push(new Yt(y,d,`"$type" cannot be use with operator "${d[0]}"`));case"==":case"!=":d.length!==3&&R.push(new Yt(y,d,`filter array for operator "${d[0]}" must have 3 elements`));case"in":case"!in":d.length>=2&&(k=ri(d[1]),k!=="string"&&R.push(new Yt(`${y}[1]`,d[1],`string expected, ${k} found`)));for(let z=2;z<d.length;z++)k=ri(d[z]),ma(d[1])==="$type"?R=R.concat(pc({key:`${y}[${z}]`,value:d[z],valueSpec:x.geometry_type,style:g.style,styleSpec:g.styleSpec})):k!=="string"&&k!=="number"&&k!=="boolean"&&R.push(new Yt(`${y}[${z}]`,d[z],`string, number, or boolean expected, ${k} found`));break;case"any":case"all":case"none":for(let z=1;z<d.length;z++)R=R.concat(E_({key:`${y}[${z}]`,value:d[z],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":k=ri(d[1]),d.length!==2?R.push(new Yt(y,d,`filter array for "${d[0]}" operator must have 2 elements`)):k!=="string"&&R.push(new Yt(`${y}[1]`,d[1],`string expected, ${k} found`))}return R}function A_(g,d){const y=g.key,x=g.validateSpec,k=g.style,R=g.styleSpec,z=g.value,$=g.objectKey,K=R[`${d}_${g.layerType}`];if(!K)return[];const Q=$.match(/^(.*)-transition$/);if(d==="paint"&&Q&&K[Q[1]]&&K[Q[1]].transition)return x({key:y,value:z,valueSpec:R.transition,style:k,styleSpec:R});const ae=g.valueSpec||K[$];if(!ae)return[new Yt(y,z,`unknown property "${$}"`)];let fe;if(ri(z)==="string"&&xh(ae)&&!ae.tokens&&(fe=/^{([^}]+)}$/.exec(z)))return[new Yt(y,z,`"${$}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(fe[1])} }\`.`)];const xe=[];return g.layerType==="symbol"&&($==="text-field"&&k&&!k.glyphs&&xe.push(new Yt(y,z,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&Wm(bd(z))&&ma(z.type)==="identity"&&xe.push(new Yt(y,z,'"text-font" does not support identity functions'))),xe.concat(x({key:g.key,value:z,valueSpec:ae,style:k,styleSpec:R,expressionContext:"property",propertyType:d,propertyKey:$}))}function iS(g){return A_(g,"paint")}function P_(g){return A_(g,"layout")}function I_(g){let d=[];const y=g.value,x=g.key,k=g.style,R=g.styleSpec;y.type||y.ref||d.push(new Yt(x,y,'either "type" or "ref" is required'));let z=ma(y.type);const $=ma(y.ref);if(y.id){const K=ma(y.id);for(let Q=0;Q<g.arrayIndex;Q++){const ae=k.layers[Q];ma(ae.id)===K&&d.push(new Yt(x,y.id,`duplicate layer id "${y.id}", previously used at line ${ae.id.__line__}`))}}if("ref"in y){let K;["type","source","source-layer","filter","layout"].forEach(Q=>{Q in y&&d.push(new Yt(x,y[Q],`"${Q}" is prohibited for ref layers`))}),k.layers.forEach(Q=>{ma(Q.id)===$&&(K=Q)}),K?K.ref?d.push(new Yt(x,y.ref,"ref cannot reference another ref layer")):z=ma(K.type):d.push(new Yt(x,y.ref,`ref layer "${$}" not found`))}else if(z!=="background")if(y.source){const K=k.sources&&k.sources[y.source],Q=K&&ma(K.type);K?Q==="vector"&&z==="raster"?d.push(new Yt(x,y.source,`layer "${y.id}" requires a raster source`)):Q!=="raster-dem"&&z==="hillshade"?d.push(new Yt(x,y.source,`layer "${y.id}" requires a raster-dem source`)):Q==="raster"&&z!=="raster"?d.push(new Yt(x,y.source,`layer "${y.id}" requires a vector source`)):Q!=="vector"||y["source-layer"]?Q==="raster-dem"&&z!=="hillshade"?d.push(new Yt(x,y.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="line"||!y.paint||!y.paint["line-gradient"]||Q==="geojson"&&K.lineMetrics||d.push(new Yt(x,y,`layer "${y.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):d.push(new Yt(x,y,`layer "${y.id}" must specify a "source-layer"`)):d.push(new Yt(x,y.source,`source "${y.source}" not found`))}else d.push(new Yt(x,y,'missing required property "source"'));return d=d.concat(As({key:x,value:y,valueSpec:R.layer,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,objectElementValidators:{"*":()=>[],type:()=>g.validateSpec({key:`${x}.type`,value:y.type,valueSpec:R.layer.type,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,object:y,objectKey:"type"}),filter:k_,layout:K=>As({layer:y,key:K.key,value:K.value,style:K.style,styleSpec:K.styleSpec,validateSpec:K.validateSpec,objectElementValidators:{"*":Q=>P_(rr({layerType:z},Q))}}),paint:K=>As({layer:y,key:K.key,value:K.value,style:K.style,styleSpec:K.styleSpec,validateSpec:K.validateSpec,objectElementValidators:{"*":Q=>iS(rr({layerType:z},Q))}})}})),d}function tl(g){const d=g.value,y=g.key,x=ri(d);return x!=="string"?[new Yt(y,d,`string expected, ${x} found`)]:[]}const aS={promoteId:function({key:g,value:d}){if(ri(d)==="string")return tl({key:g,value:d});{const y=[];for(const x in d)y.push(...tl({key:`${g}.${x}`,value:d[x]}));return y}}};function oS(g){const d=g.value,y=g.key,x=g.styleSpec,k=g.style,R=g.validateSpec;if(!d.type)return[new Yt(y,d,'"type" is required')];const z=ma(d.type);let $;switch(z){case"vector":case"raster":return $=As({key:y,value:d,valueSpec:x[`source_${z.replace("-","_")}`],style:g.style,styleSpec:x,objectElementValidators:aS,validateSpec:R}),$;case"raster-dem":return $=function(K){var Q;const ae=(Q=K.sourceName)!==null&&Q!==void 0?Q:"",fe=K.value,xe=K.styleSpec,Te=xe.source_raster_dem,Pe=K.style;let Re=[];const We=ri(fe);if(fe===void 0)return Re;if(We!=="object")return Re.push(new Yt("source_raster_dem",fe,`object expected, ${We} found`)),Re;const nt=ma(fe.encoding)==="custom",wt=["redFactor","greenFactor","blueFactor","baseShift"],ot=K.value.encoding?`"${K.value.encoding}"`:"Default";for(const Se in fe)!nt&&wt.includes(Se)?Re.push(new Yt(Se,fe[Se],`In "${ae}": "${Se}" is only valid when "encoding" is set to "custom". ${ot} encoding found`)):Te[Se]?Re=Re.concat(K.validateSpec({key:Se,value:fe[Se],valueSpec:Te[Se],validateSpec:K.validateSpec,style:Pe,styleSpec:xe})):Re.push(new Yt(Se,fe[Se],`unknown property "${Se}"`));return Re}({sourceName:y,value:d,style:g.style,styleSpec:x,validateSpec:R}),$;case"geojson":if($=As({key:y,value:d,valueSpec:x.source_geojson,style:k,styleSpec:x,validateSpec:R,objectElementValidators:aS}),d.cluster)for(const K in d.clusterProperties){const[Q,ae]=d.clusterProperties[K],fe=typeof Q=="string"?[Q,["accumulated"],["get",K]]:Q;$.push(...wd({key:`${y}.${K}.map`,value:ae,expressionContext:"cluster-map"})),$.push(...wd({key:`${y}.${K}.reduce`,value:fe,expressionContext:"cluster-reduce"}))}return $;case"video":return As({key:y,value:d,valueSpec:x.source_video,style:k,validateSpec:R,styleSpec:x});case"image":return As({key:y,value:d,valueSpec:x.source_image,style:k,validateSpec:R,styleSpec:x});case"canvas":return[new Yt(y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pc({key:`${y}.type`,value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function sS(g){const d=g.value,y=g.styleSpec,x=y.light,k=g.style;let R=[];const z=ri(d);if(d===void 0)return R;if(z!=="object")return R=R.concat([new Yt("light",d,`object expected, ${z} found`)]),R;for(const $ in d){const K=$.match(/^(.*)-transition$/);R=R.concat(K&&x[K[1]]&&x[K[1]].transition?g.validateSpec({key:$,value:d[$],valueSpec:y.transition,validateSpec:g.validateSpec,style:k,styleSpec:y}):x[$]?g.validateSpec({key:$,value:d[$],valueSpec:x[$],validateSpec:g.validateSpec,style:k,styleSpec:y}):[new Yt($,d[$],`unknown property "${$}"`)])}return R}function lS(g){const d=g.value,y=g.styleSpec,x=y.sky,k=g.style,R=ri(d);if(d===void 0)return[];if(R!=="object")return[new Yt("sky",d,`object expected, ${R} found`)];let z=[];for(const $ in d)z=z.concat(x[$]?g.validateSpec({key:$,value:d[$],valueSpec:x[$],style:k,styleSpec:y}):[new Yt($,d[$],`unknown property "${$}"`)]);return z}function uS(g){const d=g.value,y=g.styleSpec,x=y.terrain,k=g.style;let R=[];const z=ri(d);if(d===void 0)return R;if(z!=="object")return R=R.concat([new Yt("terrain",d,`object expected, ${z} found`)]),R;for(const $ in d)R=R.concat(x[$]?g.validateSpec({key:$,value:d[$],valueSpec:x[$],validateSpec:g.validateSpec,style:k,styleSpec:y}):[new Yt($,d[$],`unknown property "${$}"`)]);return R}function cS(g){let d=[];const y=g.value,x=g.key;if(Array.isArray(y)){const k=[],R=[];for(const z in y)y[z].id&&k.includes(y[z].id)&&d.push(new Yt(x,y,`all the sprites' ids must be unique, but ${y[z].id} is duplicated`)),k.push(y[z].id),y[z].url&&R.includes(y[z].url)&&d.push(new Yt(x,y,`all the sprites' URLs must be unique, but ${y[z].url} is duplicated`)),R.push(y[z].url),d=d.concat(As({key:`${x}[${z}]`,value:y[z],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:g.validateSpec}));return d}return tl({key:x,value:y})}const Ch={"*":()=>[],array:C_,boolean:function(g){const d=g.value,y=g.key,x=ri(d);return x!=="boolean"?[new Yt(y,d,`boolean expected, ${x} found`)]:[]},number:T_,color:function(g){const d=g.key,y=g.value,x=ri(y);return x!=="string"?[new Yt(d,y,`color expected, ${x} found`)]:Rr.parse(String(y))?[]:[new Yt(d,y,`color expected, "${y}" found`)]},constants:rS,enum:pc,filter:k_,function:M_,layer:I_,object:As,source:oS,light:sS,sky:lS,terrain:uS,projection:function(g){const d=g.value,y=g.styleSpec,x=y.projection,k=g.style,R=ri(d);if(d===void 0)return[];if(R!=="object")return[new Yt("projection",d,`object expected, ${R} found`)];let z=[];for(const $ in d)z=z.concat(x[$]?g.validateSpec({key:$,value:d[$],valueSpec:x[$],style:k,styleSpec:y}):[new Yt($,d[$],`unknown property "${$}"`)]);return z},projectionDefinition:function(g){const d=g.key;let y=g.value;y=y instanceof String?y.valueOf():y;const x=ri(y);return x!=="array"||function(k){return Array.isArray(k)&&k.length===3&&typeof k[0]=="string"&&typeof k[1]=="string"&&typeof k[2]=="number"}(y)||function(k){return!!["interpolate","step","literal"].includes(k[0])}(y)?["array","string"].includes(x)?[]:[new Yt(d,y,`projection expected, invalid type "${x}" found`)]:[new Yt(d,y,`projection expected, invalid array ${JSON.stringify(y)} found`)]},string:tl,formatted:function(g){return tl(g).length===0?[]:wd(g)},resolvedImage:function(g){return tl(g).length===0?[]:wd(g)},padding:function(g){const d=g.key,y=g.value;if(ri(y)==="array"){if(y.length<1||y.length>4)return[new Yt(d,y,`padding requires 1 to 4 values; ${y.length} values found`)];const x={type:"number"};let k=[];for(let R=0;R<y.length;R++)k=k.concat(g.validateSpec({key:`${d}[${R}]`,value:y[R],validateSpec:g.validateSpec,valueSpec:x}));return k}return T_({key:d,value:y,valueSpec:{}})},variableAnchorOffsetCollection:function(g){const d=g.key,y=g.value,x=ri(y),k=g.styleSpec;if(x!=="array"||y.length<1||y.length%2!=0)return[new Yt(d,y,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let z=0;z<y.length;z+=2)R=R.concat(pc({key:`${d}[${z}]`,value:y[z],valueSpec:k.layout_symbol["text-anchor"]})),R=R.concat(C_({key:`${d}[${z+1}]`,value:y[z+1],valueSpec:{length:2,value:"number"},validateSpec:g.validateSpec,style:g.style,styleSpec:k}));return R},sprite:cS};function vc(g){const d=g.value,y=g.valueSpec,x=g.styleSpec;return g.validateSpec=vc,y.expression&&Wm(ma(d))?M_(g):y.expression&&_d(bd(d))?wd(g):y.type&&Ch[y.type]?Ch[y.type](g):As(rr({},g,{valueSpec:y.type?x[y.type]:y}))}function Oo(g){const d=g.value,y=g.key,x=tl(g);return x.length||(d.indexOf("{fontstack}")===-1&&x.push(new Yt(y,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&x.push(new Yt(y,d,'"glyphs" url must include a "{range}" token'))),x}function bo(g,d=Ae){let y=[];return y=y.concat(vc({key:"",value:g,valueSpec:d.$root,styleSpec:d,style:g,validateSpec:vc,objectElementValidators:{glyphs:Oo,"*":()=>[]}})),g.constants&&(y=y.concat(rS({key:"constants",value:g.constants}))),dS(y)}function nl(g){return function(d){return g({...d,validateSpec:vc})}}function dS(g){return[].concat(g).sort((d,y)=>d.line-y.line)}function xl(g){return function(...d){return dS(g.apply(this,d))}}bo.source=xl(nl(oS)),bo.sprite=xl(nl(cS)),bo.glyphs=xl(nl(Oo)),bo.light=xl(nl(sS)),bo.sky=xl(nl(lS)),bo.terrain=xl(nl(uS)),bo.layer=xl(nl(I_)),bo.filter=xl(nl(k_)),bo.paintProperty=xl(nl(iS)),bo.layoutProperty=xl(nl(P_));const Sl=bo,hS=Sl.light,L_=Sl.sky,VE=Sl.paintProperty,D_=Sl.layoutProperty;function fS(g,d){let y=!1;if(d&&d.length)for(const x of d)g.fire(new Oe(new Error(x.message))),y=!0;return y}class fu{constructor(d,y,x){const k=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;const z=new Int32Array(this.arrayBuffer);d=z[0],this.d=(y=z[1])+2*(x=z[2]);for(let K=0;K<this.d*this.d;K++){const Q=z[3+K],ae=z[3+K+1];k.push(Q===ae?null:z.subarray(Q,ae))}const $=z[3+k.length+1];this.keys=z.subarray(z[3+k.length],$),this.bboxes=z.subarray($),this.insert=this._insertReadonly}else{this.d=y+2*x;for(let z=0;z<this.d*this.d;z++)k.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=d,this.padding=x,this.scale=y/d,this.uid=0;const R=x/y*d;this.min=-R,this.max=d+R}insert(d,y,x,k,R){this._forEachCell(y,x,k,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(d),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(k),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(d,y,x,k,R,z){this.cells[R].push(z)}query(d,y,x,k,R){const z=this.min,$=this.max;if(d<=z&&y<=z&&$<=x&&$<=k&&!R)return Array.prototype.slice.call(this.keys);{const K=[];return this._forEachCell(d,y,x,k,this._queryCell,K,{},R),K}}_queryCell(d,y,x,k,R,z,$,K){const Q=this.cells[R];if(Q!==null){const ae=this.keys,fe=this.bboxes;for(let xe=0;xe<Q.length;xe++){const Te=Q[xe];if($[Te]===void 0){const Pe=4*Te;(K?K(fe[Pe+0],fe[Pe+1],fe[Pe+2],fe[Pe+3]):d<=fe[Pe+2]&&y<=fe[Pe+3]&&x>=fe[Pe+0]&&k>=fe[Pe+1])?($[Te]=!0,z.push(ae[Te])):$[Te]=!1}}}}_forEachCell(d,y,x,k,R,z,$,K){const Q=this._convertToCellCoord(d),ae=this._convertToCellCoord(y),fe=this._convertToCellCoord(x),xe=this._convertToCellCoord(k);for(let Te=Q;Te<=fe;Te++)for(let Pe=ae;Pe<=xe;Pe++){const Re=this.d*Pe+Te;if((!K||K(this._convertFromCellCoord(Te),this._convertFromCellCoord(Pe),this._convertFromCellCoord(Te+1),this._convertFromCellCoord(Pe+1)))&&R.call(this,d,y,x,k,Re,z,$,K))return}}_convertFromCellCoord(d){return(d-this.padding)/this.scale}_convertToCellCoord(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const d=this.cells,y=3+this.cells.length+1+1;let x=0;for(let z=0;z<this.cells.length;z++)x+=this.cells[z].length;const k=new Int32Array(y+x+this.keys.length+this.bboxes.length);k[0]=this.extent,k[1]=this.n,k[2]=this.padding;let R=y;for(let z=0;z<d.length;z++){const $=d[z];k[3+z]=R,k.set($,R),R+=$.length}return k[3+d.length]=R,k.set(this.keys,R),R+=this.keys.length,k[3+d.length+1]=R,k.set(this.bboxes,R),R+=this.bboxes.length,k.buffer}static serialize(d,y){const x=d.toArrayBuffer();return y&&y.push(x),{buffer:x}}static deserialize(d){return new fu(d.buffer)}}const pu={};function $n(g,d,y={}){if(pu[g])throw new Error(`${g} is already registered.`);Object.defineProperty(d,"_classRegistryKey",{value:g,writeable:!1}),pu[g]={klass:d,omit:y.omit||[],shallow:y.shallow||[]}}$n("Object",Object),$n("TransferableGridIndex",fu),$n("Color",Rr),$n("Error",Error),$n("AJAXError",gn),$n("ResolvedImage",ts),$n("StylePropertyFunction",Km),$n("StyleExpression",y_,{omit:["_evaluator"]}),$n("ZoomDependentExpression",b_),$n("ZoomConstantExpression",__),$n("CompoundExpression",Es,{omit:["_evaluate"]});for(const g in bh)bh[g]._classRegistryKey||$n(`Expression_${g}`,bh[g]);function pS(g){return g&&typeof ArrayBuffer<"u"&&(g instanceof ArrayBuffer||g.constructor&&g.constructor.name==="ArrayBuffer")}function R_(g){return g.$name||g.constructor._classRegistryKey}function gp(g){return!function(d){if(d===null||typeof d!="object")return!1;const y=R_(d);return!(!y||y==="Object")}(g)&&(g==null||typeof g=="boolean"||typeof g=="number"||typeof g=="string"||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp||g instanceof Blob||g instanceof Error||pS(g)||lt(g)||ArrayBuffer.isView(g)||g instanceof ImageData)}function yp(g,d){if(gp(g))return(pS(g)||lt(g))&&d&&d.push(g),ArrayBuffer.isView(g)&&d&&d.push(g.buffer),g instanceof ImageData&&d&&d.push(g.data.buffer),g;if(Array.isArray(g)){const R=[];for(const z of g)R.push(yp(z,d));return R}if(typeof g!="object")throw new Error("can't serialize object of type "+typeof g);const y=R_(g);if(!y)throw new Error(`can't serialize object of unregistered class ${g.constructor.name}`);if(!pu[y])throw new Error(`${y} is not registered.`);const{klass:x}=pu[y],k=x.serialize?x.serialize(g,d):{};if(x.serialize){if(d&&k===d[d.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in g){if(!g.hasOwnProperty(R)||pu[y].omit.indexOf(R)>=0)continue;const z=g[R];k[R]=pu[y].shallow.indexOf(R)>=0?z:yp(z,d)}g instanceof Error&&(k.message=g.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return y!=="Object"&&(k.$name=y),k}function xd(g){if(gp(g))return g;if(Array.isArray(g))return g.map(xd);if(typeof g!="object")throw new Error("can't deserialize object of type "+typeof g);const d=R_(g)||"Object";if(!pu[d])throw new Error(`can't deserialize unregistered class ${d}`);const{klass:y}=pu[d];if(!y)throw new Error(`can't deserialize unregistered class ${d}`);if(y.deserialize)return y.deserialize(g);const x=Object.create(y.prototype);for(const k of Object.keys(g)){if(k==="$name")continue;const R=g[k];x[k]=pu[d].shallow.indexOf(k)>=0?R:xd(R)}return x}class _p{constructor(){this.first=!0}update(d,y){const x=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=y):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=y),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=x,!0))}}const $r={"Latin-1 Supplement":g=>g>=128&&g<=255,"Hangul Jamo":g=>g>=4352&&g<=4607,Khmer:g=>g>=6016&&g<=6143,"General Punctuation":g=>g>=8192&&g<=8303,"Letterlike Symbols":g=>g>=8448&&g<=8527,"Number Forms":g=>g>=8528&&g<=8591,"Miscellaneous Technical":g=>g>=8960&&g<=9215,"Control Pictures":g=>g>=9216&&g<=9279,"Optical Character Recognition":g=>g>=9280&&g<=9311,"Enclosed Alphanumerics":g=>g>=9312&&g<=9471,"Geometric Shapes":g=>g>=9632&&g<=9727,"Miscellaneous Symbols":g=>g>=9728&&g<=9983,"Miscellaneous Symbols and Arrows":g=>g>=11008&&g<=11263,"Ideographic Description Characters":g=>g>=12272&&g<=12287,"CJK Symbols and Punctuation":g=>g>=12288&&g<=12351,Hiragana:g=>g>=12352&&g<=12447,Katakana:g=>g>=12448&&g<=12543,Kanbun:g=>g>=12688&&g<=12703,"CJK Strokes":g=>g>=12736&&g<=12783,"Enclosed CJK Letters and Months":g=>g>=12800&&g<=13055,"CJK Compatibility":g=>g>=13056&&g<=13311,"Yijing Hexagram Symbols":g=>g>=19904&&g<=19967,"CJK Unified Ideographs":g=>g>=19968&&g<=40959,"Hangul Syllables":g=>g>=44032&&g<=55215,"Private Use Area":g=>g>=57344&&g<=63743,"Vertical Forms":g=>g>=65040&&g<=65055,"CJK Compatibility Forms":g=>g>=65072&&g<=65103,"Small Form Variants":g=>g>=65104&&g<=65135,"Halfwidth and Fullwidth Forms":g=>g>=65280&&g<=65519};function Qm(g){for(const d of g)if(tg(d.charCodeAt(0)))return!0;return!1}function vS(g){for(const d of g)if(!mS(d.charCodeAt(0)))return!1;return!0}function eg(g){const d=g.map(y=>{try{return new RegExp(`\\p{sc=${y}}`,"u").source}catch{return null}}).filter(y=>y);return new RegExp(d.join("|"),"u")}const O_=eg(["Arab","Dupl","Mong","Ougr","Syrc"]);function mS(g){return!O_.test(String.fromCodePoint(g))}const gS=eg(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function tg(g){return!(g!==746&&g!==747&&(g<4352||!($r["CJK Compatibility Forms"](g)&&!(g>=65097&&g<=65103)||$r["CJK Compatibility"](g)||$r["CJK Strokes"](g)||!(!$r["CJK Symbols and Punctuation"](g)||g>=12296&&g<=12305||g>=12308&&g<=12319||g===12336)||$r["Enclosed CJK Letters and Months"](g)||$r["Ideographic Description Characters"](g)||$r.Kanbun(g)||$r.Katakana(g)&&g!==12540||!(!$r["Halfwidth and Fullwidth Forms"](g)||g===65288||g===65289||g===65293||g>=65306&&g<=65310||g===65339||g===65341||g===65343||g>=65371&&g<=65503||g===65507||g>=65512&&g<=65519)||!(!$r["Small Form Variants"](g)||g>=65112&&g<=65118||g>=65123&&g<=65126)||$r["Vertical Forms"](g)||$r["Yijing Hexagram Symbols"](g)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(g))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(g))||gS.test(String.fromCodePoint(g)))))}function yS(g){return!(tg(g)||function(d){return!!($r["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||$r["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||$r["Letterlike Symbols"](d)||$r["Number Forms"](d)||$r["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||$r["Control Pictures"](d)&&d!==9251||$r["Optical Character Recognition"](d)||$r["Enclosed Alphanumerics"](d)||$r["Geometric Shapes"](d)||$r["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||$r["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||$r["CJK Symbols and Punctuation"](d)||$r.Katakana(d)||$r["Private Use Area"](d)||$r["CJK Compatibility Forms"](d)||$r["Small Form Variants"](d)||$r["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(g))}const _S=eg(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function z_(g){return _S.test(String.fromCodePoint(g))}function bS(g,d){return!(!d&&z_(g)||g>=2304&&g<=3583||g>=3840&&g<=4255||$r.Khmer(g))}function HE(g){for(const d of g)if(z_(d.charCodeAt(0)))return!0;return!1}const mc=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(g){this.pluginStatus=g.pluginStatus,this.pluginURL=g.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(g){if(mc.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=g.applyArabicShaping,this.processBidirectionalText=g.processBidirectionalText,this.processStyledBidirectionalText=g.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(g,d){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(g.pluginStatus!=="loading")return this.setState(g),g;const y=g.pluginURL,x=new Promise(R=>{this.loadScriptResolve=R});d(y);const k=new Promise(R=>setTimeout(()=>R(),this.TIMEOUT));if(yield Promise.race([x,k]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:y};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${y}`)})}};class Fi{constructor(d,y){this.zoom=d,y?(this.now=y.now,this.fadeDuration=y.fadeDuration,this.zoomHistory=y.zoomHistory,this.transition=y.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _p,this.transition={})}isSupportedScript(d){return function(y,x){for(const k of y)if(!bS(k.charCodeAt(0),x))return!1;return!0}(d,mc.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const d=this.zoom,y=d-Math.floor(d),x=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:y+(1-y)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*y}}}class bp{constructor(d,y){this.property=d,this.value=y,this.expression=function(x,k){if(Wm(x))return new Km(x,k);if(_d(x)){const R=tS(x,k);if(R.result==="error")throw new Error(R.value.map(z=>`${z.key}: ${z.message}`).join(", "));return R.value}{let R=x;return k.type==="color"&&typeof x=="string"?R=Rr.parse(x):k.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?k.type==="variableAnchorOffsetCollection"&&Array.isArray(x)?R=Za.parse(x):k.type==="projectionDefinition"&&typeof x=="string"&&(R=_o.parse(x)):R=so.parse(x),{kind:"constant",evaluate:()=>R}}}(y===void 0?d.specification.default:y,d.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(d,y,x){return this.property.possiblyEvaluate(this,d,y,x)}}class ng{constructor(d){this.property=d,this.value=new bp(d,void 0)}transitioned(d,y){return new wp(this.property,this.value,y,Ee({},d.transition,this.transition),d.now)}untransitioned(){return new wp(this.property,this.value,null,{},0)}}class B_{constructor(d){this._properties=d,this._values=Object.create(d.defaultTransitionablePropertyValues)}getValue(d){return Ne(this._values[d].value.value)}setValue(d,y){Object.prototype.hasOwnProperty.call(this._values,d)||(this._values[d]=new ng(this._values[d].property)),this._values[d].value=new bp(this._values[d].property,y===null?void 0:Ne(y))}getTransition(d){return Ne(this._values[d].transition)}setTransition(d,y){Object.prototype.hasOwnProperty.call(this._values,d)||(this._values[d]=new ng(this._values[d].property)),this._values[d].transition=Ne(y)||void 0}serialize(){const d={};for(const y of Object.keys(this._values)){const x=this.getValue(y);x!==void 0&&(d[y]=x);const k=this.getTransition(y);k!==void 0&&(d[`${y}-transition`]=k)}return d}transitioned(d,y){const x=new wS(this._properties);for(const k of Object.keys(this._values))x._values[k]=this._values[k].transitioned(d,y._values[k]);return x}untransitioned(){const d=new wS(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].untransitioned();return d}}class wp{constructor(d,y,x,k,R){this.property=d,this.value=y,this.begin=R+k.delay||0,this.end=this.begin+k.duration||0,d.specification.transition&&(k.delay||k.duration)&&(this.prior=x)}possiblyEvaluate(d,y,x){const k=d.now||0,R=this.value.possiblyEvaluate(d,y,x),z=this.prior;if(z){if(k>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(k<this.begin)return z.possiblyEvaluate(d,y,x);{const $=(k-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(d,y,x),R,we($))}}return R}}class wS{constructor(d){this._properties=d,this._values=Object.create(d.defaultTransitioningPropertyValues)}possiblyEvaluate(d,y,x){const k=new rg(this._properties);for(const R of Object.keys(this._values))k._values[R]=this._values[R].possiblyEvaluate(d,y,x);return k}hasTransition(){for(const d of Object.keys(this._values))if(this._values[d].prior)return!0;return!1}}class F_{constructor(d){this._properties=d,this._values=Object.create(d.defaultPropertyValues)}hasValue(d){return this._values[d].value!==void 0}getValue(d){return Ne(this._values[d].value)}setValue(d,y){this._values[d]=new bp(this._values[d].property,y===null?void 0:Ne(y))}serialize(){const d={};for(const y of Object.keys(this._values)){const x=this.getValue(y);x!==void 0&&(d[y]=x)}return d}possiblyEvaluate(d,y,x){const k=new rg(this._properties);for(const R of Object.keys(this._values))k._values[R]=this._values[R].possiblyEvaluate(d,y,x);return k}}class Cl{constructor(d,y,x){this.property=d,this.value=y,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(d){return this.value.kind==="constant"?this.value.value:d}evaluate(d,y,x,k){return this.property.evaluate(this.value,this.parameters,d,y,x,k)}}class rg{constructor(d){this._properties=d,this._values=Object.create(d.defaultPossiblyEvaluatedValues)}get(d){return this._values[d]}}class Jn{constructor(d){this.specification=d}possiblyEvaluate(d,y){if(d.isDataDriven())throw new Error("Value should not be data driven");return d.expression.evaluate(y)}interpolate(d,y,x){const k=zi[this.specification.type];return k?k(d,y,x):d}}class hr{constructor(d,y){this.specification=d,this.overrides=y}possiblyEvaluate(d,y,x,k){return new Cl(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(y,null,{},x,k)}:d.expression,y)}interpolate(d,y,x){if(d.value.kind!=="constant"||y.value.kind!=="constant")return d;if(d.value.value===void 0||y.value.value===void 0)return new Cl(this,{kind:"constant",value:void 0},d.parameters);const k=zi[this.specification.type];if(k){const R=k(d.value.value,y.value.value,x);return new Cl(this,{kind:"constant",value:R},d.parameters)}return d}evaluate(d,y,x,k,R,z){return d.kind==="constant"?d.value:d.evaluate(y,x,k,R,z)}}class xp extends hr{possiblyEvaluate(d,y,x,k){if(d.value===void 0)return new Cl(this,{kind:"constant",value:void 0},y);if(d.expression.kind==="constant"){const R=d.expression.evaluate(y,null,{},x,k),z=d.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,$=this._calculate(z,z,z,y);return new Cl(this,{kind:"constant",value:$},y)}if(d.expression.kind==="camera"){const R=this._calculate(d.expression.evaluate({zoom:y.zoom-1}),d.expression.evaluate({zoom:y.zoom}),d.expression.evaluate({zoom:y.zoom+1}),y);return new Cl(this,{kind:"constant",value:R},y)}return new Cl(this,d.expression,y)}evaluate(d,y,x,k,R,z){if(d.kind==="source"){const $=d.evaluate(y,x,k,R,z);return this._calculate($,$,$,y)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(y.zoom)-1},x,k),d.evaluate({zoom:Math.floor(y.zoom)},x,k),d.evaluate({zoom:Math.floor(y.zoom)+1},x,k),y):d.value}_calculate(d,y,x,k){return k.zoom>k.zoomHistory.lastIntegerZoom?{from:d,to:y}:{from:x,to:y}}interpolate(d){return d}}class N_{constructor(d){this.specification=d}possiblyEvaluate(d,y,x,k){if(d.value!==void 0){if(d.expression.kind==="constant"){const R=d.expression.evaluate(y,null,{},x,k);return this._calculate(R,R,R,y)}return this._calculate(d.expression.evaluate(new Fi(Math.floor(y.zoom-1),y)),d.expression.evaluate(new Fi(Math.floor(y.zoom),y)),d.expression.evaluate(new Fi(Math.floor(y.zoom+1),y)),y)}}_calculate(d,y,x,k){return k.zoom>k.zoomHistory.lastIntegerZoom?{from:d,to:y}:{from:x,to:y}}interpolate(d){return d}}class $_{constructor(d){this.specification=d}possiblyEvaluate(d,y,x,k){return!!d.expression.evaluate(y,null,{},x,k)}interpolate(){return!1}}class zo{constructor(d){this.properties=d,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const y in d){const x=d[y];x.specification.overridable&&this.overridableProperties.push(y);const k=this.defaultPropertyValues[y]=new bp(x,void 0),R=this.defaultTransitionablePropertyValues[y]=new ng(x);this.defaultTransitioningPropertyValues[y]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[y]=k.possiblyEvaluate({})}}}$n("DataDrivenProperty",hr),$n("DataConstantProperty",Jn),$n("CrossFadedDataDrivenProperty",xp),$n("CrossFadedProperty",N_),$n("ColorRampProperty",$_);const xS="-transition";class Tl extends Me{constructor(d,y){if(super(),this.id=d.id,this.type=d.type,this._featureFilter={filter:()=>!0,needGeometry:!1},d.type!=="custom"&&(this.metadata=d.metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),y.layout&&(this._unevaluatedLayout=new F_(y.layout)),y.paint)){this._transitionablePaint=new B_(y.paint);for(const x in d.paint)this.setPaintProperty(x,d.paint[x],{validate:!1});for(const x in d.layout)this.setLayoutProperty(x,d.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rg(y.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)}setLayoutProperty(d,y,x={}){y!=null&&this._validate(D_,`layers.${this.id}.layout.${d}`,d,y,x)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,y):this.visibility=y)}getPaintProperty(d){return d.endsWith(xS)?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)}setPaintProperty(d,y,x={}){if(y!=null&&this._validate(VE,`layers.${this.id}.paint.${d}`,d,y,x))return!1;if(d.endsWith(xS))return this._transitionablePaint.setTransition(d.slice(0,-11),y||void 0),!1;{const k=this._transitionablePaint._values[d],R=k.property.specification["property-type"]==="cross-faded-data-driven",z=k.value.isDataDriven(),$=k.value;this._transitionablePaint.setValue(d,y),this._handleSpecialPaintPropertyUpdate(d);const K=this._transitionablePaint._values[d].value;return K.isDataDriven()||z||R||this._handleOverridablePaintPropertyUpdate(d,$,K)}}_handleSpecialPaintPropertyUpdate(d){}_handleOverridablePaintPropertyUpdate(d,y,x){return!1}isHidden(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"}updateTransitions(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(d,y){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,y)}serialize(){const d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),yt(d,(y,x)=>!(y===void 0||x==="layout"&&!Object.keys(y).length||x==="paint"&&!Object.keys(y).length))}_validate(d,y,x,k,R={}){return(!R||R.validate!==!1)&&fS(this,d.call(Sl,{key:y,layerType:this.type,objectKey:x,value:k,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const d in this.paint._values){const y=this.paint.get(d);if(y instanceof Cl&&xh(y.property.specification)&&(y.value.kind==="source"||y.value.kind==="composite")&&y.value.isStateDependent)return!0}return!1}}const Th={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Sp{constructor(d,y){this._structArray=d,this._pos1=y*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ua{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(d,y){return d._trim(),y&&(d.isTransferred=!0,y.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}}static deserialize(d){const y=Object.create(this.prototype);return y.arrayBuffer=d.arrayBuffer,y.length=d.length,y.capacity=d.arrayBuffer.byteLength/y.bytesPerElement,y._refreshViews(),y}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(d){this.reserve(d),this.length=d}reserve(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const y=this.uint8;this._refreshViews(),y&&this.uint8.set(y)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ba(g,d=1){let y=0,x=0;return{members:g.map(k=>{const R=Th[k.type].BYTES_PER_ELEMENT,z=y=V_(y,Math.max(d,R)),$=k.components||1;return x=Math.max(x,R),y+=R*$,{name:k.name,type:k.type,components:$,offset:z}}),size:V_(y,Math.max(x,d)),alignment:d}}function V_(g,d){return Math.ceil(g/d)*d}class Cp extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y){const x=this.length;return this.resize(x+1),this.emplace(x,d,y)}emplace(d,y,x){const k=2*d;return this.int16[k+0]=y,this.int16[k+1]=x,d}}Cp.prototype.bytesPerElement=4,$n("StructArrayLayout2i4",Cp);class ig extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,d,y,x)}emplace(d,y,x,k){const R=3*d;return this.int16[R+0]=y,this.int16[R+1]=x,this.int16[R+2]=k,d}}ig.prototype.bytesPerElement=6,$n("StructArrayLayout3i6",ig);class vu extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k){const R=this.length;return this.resize(R+1),this.emplace(R,d,y,x,k)}emplace(d,y,x,k,R){const z=4*d;return this.int16[z+0]=y,this.int16[z+1]=x,this.int16[z+2]=k,this.int16[z+3]=R,d}}vu.prototype.bytesPerElement=8,$n("StructArrayLayout4i8",vu);class ag extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z){const $=this.length;return this.resize($+1),this.emplace($,d,y,x,k,R,z)}emplace(d,y,x,k,R,z,$){const K=6*d;return this.int16[K+0]=y,this.int16[K+1]=x,this.int16[K+2]=k,this.int16[K+3]=R,this.int16[K+4]=z,this.int16[K+5]=$,d}}ag.prototype.bytesPerElement=12,$n("StructArrayLayout2i4i12",ag);class Tp extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z){const $=this.length;return this.resize($+1),this.emplace($,d,y,x,k,R,z)}emplace(d,y,x,k,R,z,$){const K=4*d,Q=8*d;return this.int16[K+0]=y,this.int16[K+1]=x,this.uint8[Q+4]=k,this.uint8[Q+5]=R,this.uint8[Q+6]=z,this.uint8[Q+7]=$,d}}Tp.prototype.bytesPerElement=8,$n("StructArrayLayout2i4ub8",Tp);class Mh extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y){const x=this.length;return this.resize(x+1),this.emplace(x,d,y)}emplace(d,y,x){const k=2*d;return this.float32[k+0]=y,this.float32[k+1]=x,d}}Mh.prototype.bytesPerElement=8,$n("StructArrayLayout2f8",Mh);class Mp extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z,$,K,Q,ae){const fe=this.length;return this.resize(fe+1),this.emplace(fe,d,y,x,k,R,z,$,K,Q,ae)}emplace(d,y,x,k,R,z,$,K,Q,ae,fe){const xe=10*d;return this.uint16[xe+0]=y,this.uint16[xe+1]=x,this.uint16[xe+2]=k,this.uint16[xe+3]=R,this.uint16[xe+4]=z,this.uint16[xe+5]=$,this.uint16[xe+6]=K,this.uint16[xe+7]=Q,this.uint16[xe+8]=ae,this.uint16[xe+9]=fe,d}}Mp.prototype.bytesPerElement=20,$n("StructArrayLayout10ui20",Mp);class H_ extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z,$,K,Q,ae,fe,xe){const Te=this.length;return this.resize(Te+1),this.emplace(Te,d,y,x,k,R,z,$,K,Q,ae,fe,xe)}emplace(d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te){const Pe=12*d;return this.int16[Pe+0]=y,this.int16[Pe+1]=x,this.int16[Pe+2]=k,this.int16[Pe+3]=R,this.uint16[Pe+4]=z,this.uint16[Pe+5]=$,this.uint16[Pe+6]=K,this.uint16[Pe+7]=Q,this.int16[Pe+8]=ae,this.int16[Pe+9]=fe,this.int16[Pe+10]=xe,this.int16[Pe+11]=Te,d}}H_.prototype.bytesPerElement=24,$n("StructArrayLayout4i4ui4i24",H_);class kh extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,d,y,x)}emplace(d,y,x,k){const R=3*d;return this.float32[R+0]=y,this.float32[R+1]=x,this.float32[R+2]=k,d}}kh.prototype.bytesPerElement=12,$n("StructArrayLayout3f12",kh);class Sd extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(d){const y=this.length;return this.resize(y+1),this.emplace(y,d)}emplace(d,y){return this.uint32[1*d+0]=y,d}}Sd.prototype.bytesPerElement=4,$n("StructArrayLayout1ul4",Sd);class j_ extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z,$,K,Q){const ae=this.length;return this.resize(ae+1),this.emplace(ae,d,y,x,k,R,z,$,K,Q)}emplace(d,y,x,k,R,z,$,K,Q,ae){const fe=10*d,xe=5*d;return this.int16[fe+0]=y,this.int16[fe+1]=x,this.int16[fe+2]=k,this.int16[fe+3]=R,this.int16[fe+4]=z,this.int16[fe+5]=$,this.uint32[xe+3]=K,this.uint16[fe+8]=Q,this.uint16[fe+9]=ae,d}}j_.prototype.bytesPerElement=20,$n("StructArrayLayout6i1ul2ui20",j_);class og extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z){const $=this.length;return this.resize($+1),this.emplace($,d,y,x,k,R,z)}emplace(d,y,x,k,R,z,$){const K=6*d;return this.int16[K+0]=y,this.int16[K+1]=x,this.int16[K+2]=k,this.int16[K+3]=R,this.int16[K+4]=z,this.int16[K+5]=$,d}}og.prototype.bytesPerElement=12,$n("StructArrayLayout2i2i2i12",og);class Cd extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R){const z=this.length;return this.resize(z+1),this.emplace(z,d,y,x,k,R)}emplace(d,y,x,k,R,z){const $=4*d,K=8*d;return this.float32[$+0]=y,this.float32[$+1]=x,this.float32[$+2]=k,this.int16[K+6]=R,this.int16[K+7]=z,d}}Cd.prototype.bytesPerElement=16,$n("StructArrayLayout2f1f2i16",Cd);class U_ extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z){const $=this.length;return this.resize($+1),this.emplace($,d,y,x,k,R,z)}emplace(d,y,x,k,R,z,$){const K=16*d,Q=4*d,ae=8*d;return this.uint8[K+0]=y,this.uint8[K+1]=x,this.float32[Q+1]=k,this.float32[Q+2]=R,this.int16[ae+6]=z,this.int16[ae+7]=$,d}}U_.prototype.bytesPerElement=16,$n("StructArrayLayout2ub2f2i16",U_);class sg extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,d,y,x)}emplace(d,y,x,k){const R=3*d;return this.uint16[R+0]=y,this.uint16[R+1]=x,this.uint16[R+2]=k,d}}sg.prototype.bytesPerElement=6,$n("StructArrayLayout3ui6",sg);class lg extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt){const wt=this.length;return this.resize(wt+1),this.emplace(wt,d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt)}emplace(d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt){const ot=24*d,Se=12*d,He=48*d;return this.int16[ot+0]=y,this.int16[ot+1]=x,this.uint16[ot+2]=k,this.uint16[ot+3]=R,this.uint32[Se+2]=z,this.uint32[Se+3]=$,this.uint32[Se+4]=K,this.uint16[ot+10]=Q,this.uint16[ot+11]=ae,this.uint16[ot+12]=fe,this.float32[Se+7]=xe,this.float32[Se+8]=Te,this.uint8[He+36]=Pe,this.uint8[He+37]=Re,this.uint8[He+38]=We,this.uint32[Se+10]=nt,this.int16[ot+22]=wt,d}}lg.prototype.bytesPerElement=48,$n("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lg);class W_ extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt,ot,Se,He,ut,jt,vn,qt,Jt,wn,mn){const Cn=this.length;return this.resize(Cn+1),this.emplace(Cn,d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt,ot,Se,He,ut,jt,vn,qt,Jt,wn,mn)}emplace(d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt,ot,Se,He,ut,jt,vn,qt,Jt,wn,mn,Cn){const rn=32*d,Gn=16*d;return this.int16[rn+0]=y,this.int16[rn+1]=x,this.int16[rn+2]=k,this.int16[rn+3]=R,this.int16[rn+4]=z,this.int16[rn+5]=$,this.int16[rn+6]=K,this.int16[rn+7]=Q,this.uint16[rn+8]=ae,this.uint16[rn+9]=fe,this.uint16[rn+10]=xe,this.uint16[rn+11]=Te,this.uint16[rn+12]=Pe,this.uint16[rn+13]=Re,this.uint16[rn+14]=We,this.uint16[rn+15]=nt,this.uint16[rn+16]=wt,this.uint16[rn+17]=ot,this.uint16[rn+18]=Se,this.uint16[rn+19]=He,this.uint16[rn+20]=ut,this.uint16[rn+21]=jt,this.uint16[rn+22]=vn,this.uint32[Gn+12]=qt,this.float32[Gn+13]=Jt,this.float32[Gn+14]=wn,this.uint16[rn+30]=mn,this.uint16[rn+31]=Cn,d}}W_.prototype.bytesPerElement=64,$n("StructArrayLayout8i15ui1ul2f2ui64",W_);class P extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d){const y=this.length;return this.resize(y+1),this.emplace(y,d)}emplace(d,y){return this.float32[1*d+0]=y,d}}P.prototype.bytesPerElement=4,$n("StructArrayLayout1f4",P);class u extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,d,y,x)}emplace(d,y,x,k){const R=3*d;return this.uint16[6*d+0]=y,this.float32[R+1]=x,this.float32[R+2]=k,d}}u.prototype.bytesPerElement=12,$n("StructArrayLayout1ui2f12",u);class m extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,d,y,x)}emplace(d,y,x,k){const R=4*d;return this.uint32[2*d+0]=y,this.uint16[R+2]=x,this.uint16[R+3]=k,d}}m.prototype.bytesPerElement=8,$n("StructArrayLayout1ul2ui8",m);class S extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d,y){const x=this.length;return this.resize(x+1),this.emplace(x,d,y)}emplace(d,y,x){const k=2*d;return this.uint16[k+0]=y,this.uint16[k+1]=x,d}}S.prototype.bytesPerElement=4,$n("StructArrayLayout2ui4",S);class M extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(d){const y=this.length;return this.resize(y+1),this.emplace(y,d)}emplace(d,y){return this.uint16[1*d+0]=y,d}}M.prototype.bytesPerElement=2,$n("StructArrayLayout1ui2",M);class D extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(d,y,x,k){const R=this.length;return this.resize(R+1),this.emplace(R,d,y,x,k)}emplace(d,y,x,k,R){const z=4*d;return this.float32[z+0]=y,this.float32[z+1]=x,this.float32[z+2]=k,this.float32[z+3]=R,d}}D.prototype.bytesPerElement=16,$n("StructArrayLayout4f16",D);class F extends Sp{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}F.prototype.size=20;class G extends j_{get(d){return new F(this,d)}}$n("CollisionBoxArray",G);class Z extends Sp{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(d){this._structArray.uint8[this._pos1+37]=d}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(d){this._structArray.uint8[this._pos1+38]=d}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(d){this._structArray.uint32[this._pos4+10]=d}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class ne extends lg{get(d){return new Z(this,d)}}$n("PlacedSymbolArray",ne);class he extends Sp{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(d){this._structArray.uint32[this._pos4+12]=d}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}he.prototype.size=64;class ye extends W_{get(d){return new he(this,d)}}$n("SymbolInstanceArray",ye);class _e extends P{getoffsetX(d){return this.float32[1*d+0]}}$n("GlyphOffsetArray",_e);class Ie extends ig{getx(d){return this.int16[3*d+0]}gety(d){return this.int16[3*d+1]}gettileUnitDistanceFromAnchor(d){return this.int16[3*d+2]}}$n("SymbolLineVertexArray",Ie);class De extends Sp{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}De.prototype.size=12;class Ye extends u{get(d){return new De(this,d)}}$n("TextAnchorOffsetArray",Ye);class Ke extends Sp{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ke.prototype.size=8;class tt extends m{get(d){return new Ke(this,d)}}$n("FeatureIndexArray",tt);class at extends Cp{}class ht extends Cp{}class vt extends Cp{}class gt extends ag{}class Tt extends Tp{}class bt extends Mh{}class Nt extends Mp{}class Ut extends H_{}class nn extends kh{}class an extends Sd{}class tn extends og{}class An extends U_{}class Sn extends sg{}class pn extends S{}const qn=ba([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pr}=qn;class br{constructor(d=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=d}prepareSegment(d,y,x,k){const R=this.segments[this.segments.length-1];return d>br.MAX_VERTEX_ARRAY_LENGTH&&Le(`Max vertices per segment is ${br.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${d}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${br.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+d>br.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==k?this.createNewSegment(y,x,k):R}createNewSegment(d,y,x){const k={vertexOffset:d.length,primitiveOffset:y.length,vertexLength:0,primitiveLength:0,vaos:{}};return x!==void 0&&(k.sortKey=x),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(k),k}getOrCreateLatestSegment(d,y,x){return this.prepareSegment(0,d,y,x)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const d of this.segments)for(const y in d.vaos)d.vaos[y].destroy()}static simpleSegment(d,y,x,k){return new br([{vertexOffset:d,primitiveOffset:y,vertexLength:x,primitiveLength:k,vaos:{},sortKey:0}])}}function qi(g,d){return 256*(g=Ve(Math.floor(g),0,255))+Ve(Math.floor(d),0,255)}br.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$n("SegmentVector",br);const wi=ba([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Zi,Ni,Si,mi={exports:{}},Va={exports:{}},Aa={exports:{}},Ya=function(){if(Si)return mi.exports;Si=1;var g=(Zi||(Zi=1,Va.exports=function(y,x){var k,R,z,$,K,Q,ae,fe;for(R=y.length-(k=3&y.length),z=x,K=3432918353,Q=461845907,fe=0;fe<R;)ae=255&y.charCodeAt(fe)|(255&y.charCodeAt(++fe))<<8|(255&y.charCodeAt(++fe))<<16|(255&y.charCodeAt(++fe))<<24,++fe,z=27492+(65535&($=5*(65535&(z=(z^=ae=(65535&(ae=(ae=(65535&ae)*K+(((ae>>>16)*K&65535)<<16)&4294967295)<<15|ae>>>17))*Q+(((ae>>>16)*Q&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+($>>>16)&65535)<<16);switch(ae=0,k){case 3:ae^=(255&y.charCodeAt(fe+2))<<16;case 2:ae^=(255&y.charCodeAt(fe+1))<<8;case 1:z^=ae=(65535&(ae=(ae=(65535&(ae^=255&y.charCodeAt(fe)))*K+(((ae>>>16)*K&65535)<<16)&4294967295)<<15|ae>>>17))*Q+(((ae>>>16)*Q&65535)<<16)&4294967295}return z^=y.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0}),Va.exports),d=(Ni||(Ni=1,Aa.exports=function(y,x){for(var k,R=y.length,z=x^R,$=0;R>=4;)k=1540483477*(65535&(k=255&y.charCodeAt($)|(255&y.charCodeAt(++$))<<8|(255&y.charCodeAt(++$))<<16|(255&y.charCodeAt(++$))<<24))+((1540483477*(k>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(k=1540483477*(65535&(k^=k>>>24))+((1540483477*(k>>>16)&65535)<<16)),R-=4,++$;switch(R){case 3:z^=(255&y.charCodeAt($+2))<<16;case 2:z^=(255&y.charCodeAt($+1))<<8;case 1:z=1540483477*(65535&(z^=255&y.charCodeAt($)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0}),Aa.exports);return mi.exports=g,mi.exports.murmur3=g,mi.exports.murmur2=d,mi.exports}(),uo=l(Ya);class Ml{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(d,y,x,k){this.ids.push(gc(d)),this.positions.push(y,x,k)}getPositions(d){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const y=gc(d);let x=0,k=this.ids.length-1;for(;x<k;){const z=x+k>>1;this.ids[z]>=y?k=z:x=z+1}const R=[];for(;this.ids[x]===y;)R.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return R}static serialize(d,y){const x=new Float64Array(d.ids),k=new Uint32Array(d.positions);return mu(x,k,0,x.length-1),y&&y.push(x.buffer,k.buffer),{ids:x,positions:k}}static deserialize(d){const y=new Ml;return y.ids=d.ids,y.positions=d.positions,y.indexed=!0,y}}function gc(g){const d=+g;return!isNaN(d)&&d<=Number.MAX_SAFE_INTEGER?d:uo(String(g))}function mu(g,d,y,x){for(;y<x;){const k=g[y+x>>1];let R=y-1,z=x+1;for(;;){do R++;while(g[R]<k);do z--;while(g[z]>k);if(R>=z)break;gu(g,R,z),gu(d,3*R,3*z),gu(d,3*R+1,3*z+1),gu(d,3*R+2,3*z+2)}z-y<x-z?(mu(g,d,y,z),y=z+1):(mu(g,d,z+1,x),x=z)}}function gu(g,d,y){const x=g[d];g[d]=g[y],g[y]=x}$n("FeaturePositionMap",Ml);class kl{constructor(d,y){this.gl=d.gl,this.location=y}}class Td extends kl{constructor(d,y){super(d,y),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class Md extends kl{constructor(d,y){super(d,y),this.current=[0,0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))}}class ns extends kl{constructor(d,y){super(d,y),this.current=Rr.transparent}set(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))}}const yc=new Float32Array(16);function yu(g){return[qi(255*g.r,255*g.g),qi(255*g.b,255*g.a)]}class _u{constructor(d,y,x){this.value=d,this.uniformNames=y.map(k=>`u_${k}`),this.type=x}setUniform(d,y,x){d.set(x.constantOr(this.value))}getBinding(d,y,x){return this.type==="color"?new ns(d,y):new Td(d,y)}}class Ji{constructor(d,y){this.uniformNames=y.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(d,y){this.pixelRatioFrom=y.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=y.tlbr,this.patternTo=d.tlbr}setUniform(d,y,x,k){const R=k==="u_pattern_to"?this.patternTo:k==="u_pattern_from"?this.patternFrom:k==="u_pixel_ratio_to"?this.pixelRatioTo:k==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&d.set(R)}getBinding(d,y,x){return x.substr(0,9)==="u_pattern"?new Md(d,y):new Td(d,y)}}class $i{constructor(d,y,x,k){this.expression=d,this.type=x,this.maxValue=0,this.paintVertexAttributes=y.map(R=>({name:`a_${R}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new k}populatePaintArray(d,y,x,k,R){const z=this.paintVertexArray.length,$=this.expression.evaluate(new Fi(0),y,{},k,[],R);this.paintVertexArray.resize(d),this._setPaintValue(z,d,$)}updatePaintArray(d,y,x,k){const R=this.expression.evaluate({zoom:0},x,k);this._setPaintValue(d,y,R)}_setPaintValue(d,y,x){if(this.type==="color"){const k=yu(x);for(let R=d;R<y;R++)this.paintVertexArray.emplace(R,k[0],k[1])}else{for(let k=d;k<y;k++)this.paintVertexArray.emplace(k,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ga{constructor(d,y,x,k,R,z){this.expression=d,this.uniformNames=y.map($=>`u_${$}_t`),this.type=x,this.useIntegerZoom=k,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=y.map($=>({name:`a_${$}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new z}populatePaintArray(d,y,x,k,R){const z=this.expression.evaluate(new Fi(this.zoom),y,{},k,[],R),$=this.expression.evaluate(new Fi(this.zoom+1),y,{},k,[],R),K=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(K,d,z,$)}updatePaintArray(d,y,x,k){const R=this.expression.evaluate({zoom:this.zoom},x,k),z=this.expression.evaluate({zoom:this.zoom+1},x,k);this._setPaintValue(d,y,R,z)}_setPaintValue(d,y,x,k){if(this.type==="color"){const R=yu(x),z=yu(k);for(let $=d;$<y;$++)this.paintVertexArray.emplace($,R[0],R[1],z[0],z[1])}else{for(let R=d;R<y;R++)this.paintVertexArray.emplace(R,x,k);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(k))}}upload(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(d,y){const x=this.useIntegerZoom?Math.floor(y.zoom):y.zoom,k=Ve(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);d.set(k)}getBinding(d,y,x){return new Td(d,y)}}class Yi{constructor(d,y,x,k,R,z){this.expression=d,this.type=y,this.useIntegerZoom=x,this.zoom=k,this.layerId=z,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(d,y,x){const k=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(k,d,y.patterns&&y.patterns[this.layerId],x)}updatePaintArray(d,y,x,k,R){this._setPaintValues(d,y,x.patterns&&x.patterns[this.layerId],R)}_setPaintValues(d,y,x,k){if(!k||!x)return;const{min:R,mid:z,max:$}=x,K=k[R],Q=k[z],ae=k[$];if(K&&Q&&ae)for(let fe=d;fe<y;fe++)this.zoomInPaintVertexArray.emplace(fe,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],K.tl[0],K.tl[1],K.br[0],K.br[1],Q.pixelRatio,K.pixelRatio),this.zoomOutPaintVertexArray.emplace(fe,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],Q.pixelRatio,ae.pixelRatio)}upload(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,wi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,wi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class SS{constructor(d,y,x){this.binders={},this._buffers=[];const k=[];for(const R in d.paint._values){if(!x(R))continue;const z=d.paint.get(R);if(!(z instanceof Cl&&xh(z.property.specification)))continue;const $=jE(R,d.type),K=z.value,Q=z.property.specification.type,ae=z.property.useIntegerZoom,fe=z.property.specification["property-type"],xe=fe==="cross-faded"||fe==="cross-faded-data-driven";if(K.kind==="constant")this.binders[R]=xe?new Ji(K.value,$):new _u(K.value,$,Q),k.push(`/u_${R}`);else if(K.kind==="source"||xe){const Te=CS(R,Q,"source");this.binders[R]=xe?new Yi(K,Q,ae,y,Te,d.id):new $i(K,$,Q,Te),k.push(`/a_${R}`)}else{const Te=CS(R,Q,"composite");this.binders[R]=new ga(K,$,Q,ae,y,Te),k.push(`/z_${R}`)}}this.cacheKey=k.sort().join("")}getMaxValue(d){const y=this.binders[d];return y instanceof $i||y instanceof ga?y.maxValue:0}populatePaintArrays(d,y,x,k,R){for(const z in this.binders){const $=this.binders[z];($ instanceof $i||$ instanceof ga||$ instanceof Yi)&&$.populatePaintArray(d,y,x,k,R)}}setConstantPatternPositions(d,y){for(const x in this.binders){const k=this.binders[x];k instanceof Ji&&k.setConstantPatternPositions(d,y)}}updatePaintArrays(d,y,x,k,R){let z=!1;for(const $ in d){const K=y.getPositions($);for(const Q of K){const ae=x.feature(Q.index);for(const fe in this.binders){const xe=this.binders[fe];if((xe instanceof $i||xe instanceof ga||xe instanceof Yi)&&xe.expression.isStateDependent===!0){const Te=k.paint.get(fe);xe.expression=Te.value,xe.updatePaintArray(Q.start,Q.end,ae,d[$],R),z=!0}}}}return z}defines(){const d=[];for(const y in this.binders){const x=this.binders[y];(x instanceof _u||x instanceof Ji)&&d.push(...x.uniformNames.map(k=>`#define HAS_UNIFORM_${k}`))}return d}getBinderAttributes(){const d=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof $i||x instanceof ga)for(let k=0;k<x.paintVertexAttributes.length;k++)d.push(x.paintVertexAttributes[k].name);else if(x instanceof Yi)for(let k=0;k<wi.members.length;k++)d.push(wi.members[k].name)}return d}getBinderUniforms(){const d=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof _u||x instanceof Ji||x instanceof ga)for(const k of x.uniformNames)d.push(k)}return d}getPaintVertexBuffers(){return this._buffers}getUniforms(d,y){const x=[];for(const k in this.binders){const R=this.binders[k];if(R instanceof _u||R instanceof Ji||R instanceof ga){for(const z of R.uniformNames)if(y[z]){const $=R.getBinding(d,y[z],z);x.push({name:z,property:k,binding:$})}}}return x}setUniforms(d,y,x,k){for(const{name:R,property:z,binding:$}of y)this.binders[z].setUniform($,k,x.get(z),R)}updatePaintBuffers(d){this._buffers=[];for(const y in this.binders){const x=this.binders[y];if(d&&x instanceof Yi){const k=d.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;k&&this._buffers.push(k)}else(x instanceof $i||x instanceof ga)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(d){for(const y in this.binders){const x=this.binders[y];(x instanceof $i||x instanceof ga||x instanceof Yi)&&x.upload(d)}this.updatePaintBuffers()}destroy(){for(const d in this.binders){const y=this.binders[d];(y instanceof $i||y instanceof ga||y instanceof Yi)&&y.destroy()}}}class kd{constructor(d,y,x=()=>!0){this.programConfigurations={};for(const k of d)this.programConfigurations[k.id]=new SS(k,y,x);this.needsUpload=!1,this._featureMap=new Ml,this._bufferOffset=0}populatePaintArrays(d,y,x,k,R,z){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(d,y,k,R,z);y.id!==void 0&&this._featureMap.add(y.id,x,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0}updatePaintArrays(d,y,x,k){for(const R of x)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(d,this._featureMap,y,R,k)||this.needsUpload}get(d){return this.programConfigurations[d]}upload(d){if(this.needsUpload){for(const y in this.programConfigurations)this.programConfigurations[y].upload(d);this.needsUpload=!1}}destroy(){for(const d in this.programConfigurations)this.programConfigurations[d].destroy()}}function jE(g,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[g]||[g.replace(`${d}-`,"").replace(/-/g,"_")]}function CS(g,d,y){const x={color:{source:Mh,composite:D},number:{source:P,composite:Mh}},k=function(R){return{"line-pattern":{source:Nt,composite:Nt},"fill-pattern":{source:Nt,composite:Nt},"fill-extrusion-pattern":{source:Nt,composite:Nt}}[R]}(g);return k&&k[y]||x[d][y]}$n("ConstantBinder",_u),$n("CrossFadedConstantBinder",Ji),$n("SourceExpressionBinder",$i),$n("CrossFadedCompositeBinder",Yi),$n("CompositeExpressionBinder",ga),$n("ProgramConfiguration",SS,{omit:["_buffers"]}),$n("ProgramConfigurationSet",kd);const G_=Math.pow(2,14)-1,TS=-G_-1;function rs(g){const d=re/g.extent,y=g.loadGeometry();for(let x=0;x<y.length;x++){const k=y[x];for(let R=0;R<k.length;R++){const z=k[R],$=Math.round(z.x*d),K=Math.round(z.y*d);z.x=Ve($,TS,G_),z.y=Ve(K,TS,G_),($<z.x||$>z.x+1||K<z.y||K>z.y+1)&&Le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return y}function _c(g,d){return{type:g.type,id:g.id,properties:g.properties,geometry:d?rs(g):[]}}const K_=-32768;function MS(g,d,y,x,k){g.emplaceBack(K_+8*d+x,K_+8*y+k)}class kp{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(y=>y.id),this.index=d.index,this.hasPattern=!1,this.layoutVertexArray=new ht,this.indexArray=new Sn,this.segments=new br,this.programConfigurations=new kd(d.layers,d.zoom),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id)}populate(d,y,x){const k=this.layers[0],R=[];let z=null,$=!1,K=k.type==="heatmap";if(k.type==="circle"){const ae=k;z=ae.layout.get("circle-sort-key"),$=!z.isConstant(),K=K||ae.paint.get("circle-pitch-alignment")==="map"}const Q=K?y.subdivisionGranularity.circle:1;for(const{feature:ae,id:fe,index:xe,sourceLayerIndex:Te}of d){const Pe=this.layers[0]._featureFilter.needGeometry,Re=_c(ae,Pe);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),Re,x))continue;const We=$?z.evaluate(Re,{},x):void 0,nt={id:fe,properties:ae.properties,type:ae.type,sourceLayerIndex:Te,index:xe,geometry:Pe?Re.geometry:rs(ae),patterns:{},sortKey:We};R.push(nt)}$&&R.sort((ae,fe)=>ae.sortKey-fe.sortKey);for(const ae of R){const{geometry:fe,index:xe,sourceLayerIndex:Te}=ae,Pe=d[xe].feature;this.addFeature(ae,fe,xe,x,Q),y.featureIndex.insert(Pe,fe,xe,Te,this.index)}}update(d,y,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,y,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Pr),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(d,y,x,k,R=1){let z;switch(R){case 1:z=[0,7];break;case 3:z=[0,2,5,7];break;case 5:z=[0,1,3,4,6,7];break;case 7:z=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const $=z.length;for(const K of y)for(const Q of K){const ae=Q.x,fe=Q.y;if(ae<0||ae>=re||fe<0||fe>=re)continue;const xe=this.segments.prepareSegment($*$,this.layoutVertexArray,this.indexArray,d.sortKey),Te=xe.vertexLength;for(let Pe=0;Pe<$;Pe++)for(let Re=0;Re<$;Re++)MS(this.layoutVertexArray,ae,fe,z[Re],z[Pe]);for(let Pe=0;Pe<$-1;Pe++)for(let Re=0;Re<$-1;Re++){const We=Te+Pe*$+Re,nt=Te+(Pe+1)*$+Re;this.indexArray.emplaceBack(We,nt+1,We+1),this.indexArray.emplaceBack(We,nt,nt+1)}xe.vertexLength+=$*$,xe.primitiveLength+=($-1)*($-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,x,{},k)}}function q_(g,d){for(let y=0;y<g.length;y++)if(Ep(d,g[y]))return!0;for(let y=0;y<d.length;y++)if(Ep(g,d[y]))return!0;return!!UE(g,d)}function Z_(g,d,y){return!!Ep(g,d)||!!WE(d,g,y)}function dB(g,d){if(g.length===1)return fB(d,g[0]);for(let y=0;y<d.length;y++){const x=d[y];for(let k=0;k<x.length;k++)if(Ep(g,x[k]))return!0}for(let y=0;y<g.length;y++)if(fB(d,g[y]))return!0;for(let y=0;y<d.length;y++)if(UE(g,d[y]))return!0;return!1}function Hre(g,d,y){if(g.length>1){if(UE(g,d))return!0;for(let x=0;x<d.length;x++)if(WE(d[x],g,y))return!0}for(let x=0;x<g.length;x++)if(WE(g[x],d,y))return!0;return!1}function UE(g,d){if(g.length===0||d.length===0)return!1;for(let y=0;y<g.length-1;y++){const x=g[y],k=g[y+1];for(let R=0;R<d.length-1;R++)if(jre(x,k,d[R],d[R+1]))return!0}return!1}function jre(g,d,y,x){return ze(g,y,x)!==ze(d,y,x)&&ze(g,d,y)!==ze(g,d,x)}function WE(g,d,y){const x=y*y;if(d.length===1)return g.distSqr(d[0])<x;for(let k=1;k<d.length;k++)if(hB(g,d[k-1],d[k])<x)return!0;return!1}function hB(g,d,y){const x=d.distSqr(y);if(x===0)return g.distSqr(d);const k=((g.x-d.x)*(y.x-d.x)+(g.y-d.y)*(y.y-d.y))/x;return g.distSqr(k<0?d:k>1?y:y.sub(d)._mult(k)._add(d))}function fB(g,d){for(let y=0;y<g.length;y++)if(Ep(g[y],d))return!0;return!1}function Ep(g,d){let y=!1;for(let x=0,k=g.length-1;x<g.length;k=x++){const R=g[x],z=g[k];R.y>d.y!=z.y>d.y&&d.x<(z.x-R.x)*(d.y-R.y)/(z.y-R.y)+R.x&&(y=!y)}return y}function Ure(g,d,y){const x=y[0],k=y[2];if(g.x<x.x&&d.x<x.x||g.x>k.x&&d.x>k.x||g.y<x.y&&d.y<x.y||g.y>k.y&&d.y>k.y)return!1;const R=ze(g,d,y[0]);return R!==ze(g,d,y[1])||R!==ze(g,d,y[2])||R!==ze(g,d,y[3])}function Y_(g,d,y){const x=d.paint.get(g).value;return x.kind==="constant"?x.value:y.programConfigurations.get(d.id).getMaxValue(g)}function kS(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function ES(g,d,y,x,k){if(!d[0]&&!d[1])return g;const R=_.convert(d)._mult(k);y==="viewport"&&R._rotate(-x);const z=[];for(let $=0;$<g.length;$++)z.push(g[$].sub(R));return z}let pB,vB;$n("CircleBucket",kp,{omit:["layers"]});var Wre={get paint(){return vB=vB||new zo({"circle-radius":new hr(Ae.paint_circle["circle-radius"]),"circle-color":new hr(Ae.paint_circle["circle-color"]),"circle-blur":new hr(Ae.paint_circle["circle-blur"]),"circle-opacity":new hr(Ae.paint_circle["circle-opacity"]),"circle-translate":new Jn(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new Jn(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jn(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jn(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hr(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hr(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hr(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return pB=pB||new zo({"circle-sort-key":new hr(Ae.layout_circle["circle-sort-key"])})}};class Gre extends Tl{constructor(d){super(d,Wre)}createBucket(d){return new kp(d)}queryRadius(d){const y=d;return Y_("circle-radius",this,y)+Y_("circle-stroke-width",this,y)+kS(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:d,feature:y,featureState:x,geometry:k,transform:R,pixelsToTileUnits:z,unwrappedTileID:$,getElevation:K}){const Q=ES(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,z),ae=this.paint.get("circle-radius").evaluate(y,x)+this.paint.get("circle-stroke-width").evaluate(y,x),fe=this.paint.get("circle-pitch-alignment")==="map",xe=fe?Q:function(Pe,Re,We,nt){return Pe.map(wt=>mB(wt,Re,We,nt))}(Q,R,$,K),Te=fe?ae*z:ae;for(const Pe of k)for(const Re of Pe){const We=fe?Re:mB(Re,R,$,K);let nt=Te;const wt=R.projectTileCoordinates(Re.x,Re.y,$,K).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?nt*=wt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(nt*=R.cameraToCenterDistance/wt),Z_(xe,We,nt))return!0}return!1}}function mB(g,d,y,x){const k=d.projectTileCoordinates(g.x,g.y,y,x).point;return new _((.5*k.x+.5)*d.width,(.5*-k.y+.5)*d.height)}class gB extends kp{}let yB;$n("HeatmapBucket",gB,{omit:["layers"]});var Kre={get paint(){return yB=yB||new zo({"heatmap-radius":new hr(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hr(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jn(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $_(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jn(Ae.paint_heatmap["heatmap-opacity"])})}};function GE(g,{width:d,height:y},x,k){if(k){if(k instanceof Uint8ClampedArray)k=new Uint8Array(k.buffer);else if(k.length!==d*y*x)throw new RangeError(`mismatched image size. expected: ${k.length} but got: ${d*y*x}`)}else k=new Uint8Array(d*y*x);return g.width=d,g.height=y,g.data=k,g}function _B(g,{width:d,height:y},x){if(d===g.width&&y===g.height)return;const k=GE({},{width:d,height:y},x);KE(g,k,{x:0,y:0},{x:0,y:0},{width:Math.min(g.width,d),height:Math.min(g.height,y)},x),g.width=d,g.height=y,g.data=k.data}function KE(g,d,y,x,k,R){if(k.width===0||k.height===0)return d;if(k.width>g.width||k.height>g.height||y.x>g.width-k.width||y.y>g.height-k.height)throw new RangeError("out of range source coordinates for image copy");if(k.width>d.width||k.height>d.height||x.x>d.width-k.width||x.y>d.height-k.height)throw new RangeError("out of range destination coordinates for image copy");const z=g.data,$=d.data;if(z===$)throw new Error("srcData equals dstData, so image is already copied");for(let K=0;K<k.height;K++){const Q=((y.y+K)*g.width+y.x)*R,ae=((x.y+K)*d.width+x.x)*R;for(let fe=0;fe<k.width*R;fe++)$[ae+fe]=z[Q+fe]}return d}class X_{constructor(d,y){GE(this,d,1,y)}resize(d){_B(this,d,1)}clone(){return new X_({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(d,y,x,k,R){KE(d,y,x,k,R,1)}}class rl{constructor(d,y){GE(this,d,4,y)}resize(d){_B(this,d,4)}replace(d,y){y?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d}clone(){return new rl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(d,y,x,k,R){KE(d,y,x,k,R,4)}}function bB(g){const d={},y=g.resolution||256,x=g.clips?g.clips.length:1,k=g.image||new rl({width:y,height:x});if(Math.log(y)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${y}`);const R=(z,$,K)=>{d[g.evaluationKey]=K;const Q=g.expression.evaluate(d);k.data[z+$+0]=Math.floor(255*Q.r/Q.a),k.data[z+$+1]=Math.floor(255*Q.g/Q.a),k.data[z+$+2]=Math.floor(255*Q.b/Q.a),k.data[z+$+3]=Math.floor(255*Q.a)};if(g.clips)for(let z=0,$=0;z<x;++z,$+=4*y)for(let K=0,Q=0;K<y;K++,Q+=4){const ae=K/(y-1),{start:fe,end:xe}=g.clips[z];R($,Q,fe*(1-ae)+xe*ae)}else for(let z=0,$=0;z<y;z++,$+=4)R(0,$,z/(y-1));return k}$n("AlphaImage",X_),$n("RGBAImage",rl);const qE="big-fb";class qre extends Tl{createBucket(d){return new gB(d)}constructor(d){super(d,Kre),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bB({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(qE)&&this.heatmapFbos.delete(qE)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let wB;var Zre={get paint(){return wB=wB||new zo({"hillshade-illumination-direction":new Jn(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Jn(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jn(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jn(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jn(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jn(Ae.paint_hillshade["hillshade-accent-color"])})}};class Yre extends Tl{constructor(d){super(d,Zre)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Xre=ba([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jre}=Xre;function ZE(g,d,y){const x=y.patternDependencies;let k=!1;for(const R of d){const z=R.paint.get(`${g}-pattern`);z.isConstant()||(k=!0);const $=z.constantOr(null);$&&(k=!0,x[$.to]=!0,x[$.from]=!0)}return k}function YE(g,d,y,x,k){const R=k.patternDependencies;for(const z of d){const $=z.paint.get(`${g}-pattern`).value;if($.kind!=="constant"){let K=$.evaluate({zoom:x-1},y,{},k.availableImages),Q=$.evaluate({zoom:x},y,{},k.availableImages),ae=$.evaluate({zoom:x+1},y,{},k.availableImages);K=K&&K.name?K.name:K,Q=Q&&Q.name?Q.name:Q,ae=ae&&ae.name?ae.name:ae,R[K]=!0,R[Q]=!0,R[ae]=!0,y.patterns[z.id]={min:K,mid:Q,max:ae}}}return y}function xB(g,d,y,x,k){let R;if(k===function(z,$,K,Q){let ae=0;for(let fe=$,xe=K-Q;fe<K;fe+=Q)ae+=(z[xe]-z[fe])*(z[fe+1]+z[xe+1]),xe=fe;return ae}(g,d,y,x)>0)for(let z=d;z<y;z+=x)R=MB(z/x|0,g[z],g[z+1],R);else for(let z=y-x;z>=d;z-=x)R=MB(z/x|0,g[z],g[z+1],R);return R&&ug(R,R.next)&&(tb(R),R=R.next),R}function Ap(g,d){if(!g)return g;d||(d=g);let y,x=g;do if(y=!1,x.steiner||!ug(x,x.next)&&wa(x.prev,x,x.next)!==0)x=x.next;else{if(tb(x),x=d=x.prev,x===x.next)break;y=!0}while(y||x!==d);return d}function J_(g,d,y,x,k,R,z){if(!g)return;!z&&R&&function(K,Q,ae,fe){let xe=K;do xe.z===0&&(xe.z=XE(xe.x,xe.y,Q,ae,fe)),xe.prevZ=xe.prev,xe.nextZ=xe.next,xe=xe.next;while(xe!==K);xe.prevZ.nextZ=null,xe.prevZ=null,function(Te){let Pe,Re=1;do{let We,nt=Te;Te=null;let wt=null;for(Pe=0;nt;){Pe++;let ot=nt,Se=0;for(let ut=0;ut<Re&&(Se++,ot=ot.nextZ,ot);ut++);let He=Re;for(;Se>0||He>0&&ot;)Se!==0&&(He===0||!ot||nt.z<=ot.z)?(We=nt,nt=nt.nextZ,Se--):(We=ot,ot=ot.nextZ,He--),wt?wt.nextZ=We:Te=We,We.prevZ=wt,wt=We;nt=ot}wt.nextZ=null,Re*=2}while(Pe>1)}(xe)}(g,x,k,R);let $=g;for(;g.prev!==g.next;){const K=g.prev,Q=g.next;if(R?eie(g,x,k,R):Qre(g))d.push(K.i,g.i,Q.i),tb(g),g=Q.next,$=Q.next;else if((g=Q)===$){z?z===1?J_(g=tie(Ap(g),d),d,y,x,k,R,2):z===2&&nie(g,d,y,x,k,R):J_(Ap(g),d,y,x,k,R,1);break}}}function Qre(g){const d=g.prev,y=g,x=g.next;if(wa(d,y,x)>=0)return!1;const k=d.x,R=y.x,z=x.x,$=d.y,K=y.y,Q=x.y,ae=Math.min(k,R,z),fe=Math.min($,K,Q),xe=Math.max(k,R,z),Te=Math.max($,K,Q);let Pe=x.next;for(;Pe!==d;){if(Pe.x>=ae&&Pe.x<=xe&&Pe.y>=fe&&Pe.y<=Te&&Q_(k,$,R,K,z,Q,Pe.x,Pe.y)&&wa(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.next}return!0}function eie(g,d,y,x){const k=g.prev,R=g,z=g.next;if(wa(k,R,z)>=0)return!1;const $=k.x,K=R.x,Q=z.x,ae=k.y,fe=R.y,xe=z.y,Te=Math.min($,K,Q),Pe=Math.min(ae,fe,xe),Re=Math.max($,K,Q),We=Math.max(ae,fe,xe),nt=XE(Te,Pe,d,y,x),wt=XE(Re,We,d,y,x);let ot=g.prevZ,Se=g.nextZ;for(;ot&&ot.z>=nt&&Se&&Se.z<=wt;){if(ot.x>=Te&&ot.x<=Re&&ot.y>=Pe&&ot.y<=We&&ot!==k&&ot!==z&&Q_($,ae,K,fe,Q,xe,ot.x,ot.y)&&wa(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,Se.x>=Te&&Se.x<=Re&&Se.y>=Pe&&Se.y<=We&&Se!==k&&Se!==z&&Q_($,ae,K,fe,Q,xe,Se.x,Se.y)&&wa(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;ot&&ot.z>=nt;){if(ot.x>=Te&&ot.x<=Re&&ot.y>=Pe&&ot.y<=We&&ot!==k&&ot!==z&&Q_($,ae,K,fe,Q,xe,ot.x,ot.y)&&wa(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;Se&&Se.z<=wt;){if(Se.x>=Te&&Se.x<=Re&&Se.y>=Pe&&Se.y<=We&&Se!==k&&Se!==z&&Q_($,ae,K,fe,Q,xe,Se.x,Se.y)&&wa(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function tie(g,d){let y=g;do{const x=y.prev,k=y.next.next;!ug(x,k)&&CB(x,y,y.next,k)&&eb(x,k)&&eb(k,x)&&(d.push(x.i,y.i,k.i),tb(y),tb(y.next),y=g=k),y=y.next}while(y!==g);return Ap(y)}function nie(g,d,y,x,k,R){let z=g;do{let $=z.next.next;for(;$!==z.prev;){if(z.i!==$.i&&sie(z,$)){let K=TB(z,$);return z=Ap(z,z.next),K=Ap(K,K.next),J_(z,d,y,x,k,R,0),void J_(K,d,y,x,k,R,0)}$=$.next}z=z.next}while(z!==g)}function rie(g,d){let y=g.x-d.x;return y===0&&(y=g.y-d.y,y===0)&&(y=(g.next.y-g.y)/(g.next.x-g.x)-(d.next.y-d.y)/(d.next.x-d.x)),y}function iie(g,d){const y=function(k,R){let z=R;const $=k.x,K=k.y;let Q,ae=-1/0;if(ug(k,z))return z;do{if(ug(k,z.next))return z.next;if(K<=z.y&&K>=z.next.y&&z.next.y!==z.y){const Re=z.x+(K-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(Re<=$&&Re>ae&&(ae=Re,Q=z.x<z.next.x?z:z.next,Re===$))return Q}z=z.next}while(z!==R);if(!Q)return null;const fe=Q,xe=Q.x,Te=Q.y;let Pe=1/0;z=Q;do{if($>=z.x&&z.x>=xe&&$!==z.x&&SB(K<Te?$:ae,K,xe,Te,K<Te?ae:$,K,z.x,z.y)){const Re=Math.abs(K-z.y)/($-z.x);eb(z,k)&&(Re<Pe||Re===Pe&&(z.x>Q.x||z.x===Q.x&&aie(Q,z)))&&(Q=z,Pe=Re)}z=z.next}while(z!==fe);return Q}(g,d);if(!y)return d;const x=TB(y,g);return Ap(x,x.next),Ap(y,y.next)}function aie(g,d){return wa(g.prev,g,d.prev)<0&&wa(d.next,g,g.next)<0}function XE(g,d,y,x,k){return(g=1431655765&((g=858993459&((g=252645135&((g=16711935&((g=(g-y)*k|0)|g<<8))|g<<4))|g<<2))|g<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-x)*k|0)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function oie(g){let d=g,y=g;do(d.x<y.x||d.x===y.x&&d.y<y.y)&&(y=d),d=d.next;while(d!==g);return y}function SB(g,d,y,x,k,R,z,$){return(k-z)*(d-$)>=(g-z)*(R-$)&&(g-z)*(x-$)>=(y-z)*(d-$)&&(y-z)*(R-$)>=(k-z)*(x-$)}function Q_(g,d,y,x,k,R,z,$){return!(g===z&&d===$)&&SB(g,d,y,x,k,R,z,$)}function sie(g,d){return g.next.i!==d.i&&g.prev.i!==d.i&&!function(y,x){let k=y;do{if(k.i!==y.i&&k.next.i!==y.i&&k.i!==x.i&&k.next.i!==x.i&&CB(k,k.next,y,x))return!0;k=k.next}while(k!==y);return!1}(g,d)&&(eb(g,d)&&eb(d,g)&&function(y,x){let k=y,R=!1;const z=(y.x+x.x)/2,$=(y.y+x.y)/2;do k.y>$!=k.next.y>$&&k.next.y!==k.y&&z<(k.next.x-k.x)*($-k.y)/(k.next.y-k.y)+k.x&&(R=!R),k=k.next;while(k!==y);return R}(g,d)&&(wa(g.prev,g,d.prev)||wa(g,d.prev,d))||ug(g,d)&&wa(g.prev,g,g.next)>0&&wa(d.prev,d,d.next)>0)}function wa(g,d,y){return(d.y-g.y)*(y.x-d.x)-(d.x-g.x)*(y.y-d.y)}function ug(g,d){return g.x===d.x&&g.y===d.y}function CB(g,d,y,x){const k=PS(wa(g,d,y)),R=PS(wa(g,d,x)),z=PS(wa(y,x,g)),$=PS(wa(y,x,d));return k!==R&&z!==$||!(k!==0||!AS(g,y,d))||!(R!==0||!AS(g,x,d))||!(z!==0||!AS(y,g,x))||!($!==0||!AS(y,d,x))}function AS(g,d,y){return d.x<=Math.max(g.x,y.x)&&d.x>=Math.min(g.x,y.x)&&d.y<=Math.max(g.y,y.y)&&d.y>=Math.min(g.y,y.y)}function PS(g){return g>0?1:g<0?-1:0}function eb(g,d){return wa(g.prev,g,g.next)<0?wa(g,d,g.next)>=0&&wa(g,g.prev,d)>=0:wa(g,d,g.prev)<0||wa(g,g.next,d)<0}function TB(g,d){const y=JE(g.i,g.x,g.y),x=JE(d.i,d.x,d.y),k=g.next,R=d.prev;return g.next=d,d.prev=g,y.next=k,k.prev=y,x.next=y,y.prev=x,R.next=x,x.prev=R,x}function MB(g,d,y,x){const k=JE(g,d,y);return x?(k.next=x.next,k.prev=x,x.next.prev=k,x.next=k):(k.prev=k,k.next=k),k}function tb(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function JE(g,d,y){return{i:g,x:d,y,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class cg{constructor(d,y){if(y>d)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=d,this._minGranularity=y}getGranularityForZoomLevel(d){return Math.max(Math.floor(this._baseZoomGranularity/(1<<d)),this._minGranularity,1)}}class IS{constructor(d){this.fill=d.fill,this.line=d.line,this.tile=d.tile,this.stencil=d.stencil,this.circle=d.circle}}IS.noSubdivision=new IS({fill:new cg(0,0),line:new cg(0,0),tile:new cg(0,0),stencil:new cg(0,0),circle:1}),$n("SubdivisionGranularityExpression",cg),$n("SubdivisionGranularitySetting",IS);const dg=-32768,nb=32767;class lie{constructor(d,y){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=d,this._granularityCellSize=re/d,this._canonical=y}_getKey(d,y){return(d+=32768)<<16|(y+=32768)<<0}_vertexToIndex(d,y){if(d<-32768||y<-32768||d>32767||y>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const x=0|Math.round(d),k=0|Math.round(y),R=this._getKey(x,k);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const z=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,z),this._vertexBuffer.push(x,k),z}_subdivideTrianglesScanline(d){if(this._granularity<2)return function(k,R){const z=[];for(let $=0;$<R.length;$+=3){const K=R[$],Q=R[$+1],ae=R[$+2],fe=k[2*K],xe=k[2*K+1];(k[2*Q]-fe)*(k[2*ae+1]-xe)-(k[2*Q+1]-xe)*(k[2*ae]-fe)>0?(z.push(K),z.push(ae),z.push(Q)):(z.push(K),z.push(Q),z.push(ae))}return z}(this._vertexBuffer,d);const y=[],x=d.length;for(let k=0;k<x;k+=3){const R=[d[k+0],d[k+1],d[k+2]],z=[this._vertexBuffer[2*d[k+0]+0],this._vertexBuffer[2*d[k+0]+1],this._vertexBuffer[2*d[k+1]+0],this._vertexBuffer[2*d[k+1]+1],this._vertexBuffer[2*d[k+2]+0],this._vertexBuffer[2*d[k+2]+1]];let $=1/0,K=1/0,Q=-1/0,ae=-1/0;for(let Re=0;Re<3;Re++){const We=z[2*Re],nt=z[2*Re+1];$=Math.min($,We),Q=Math.max(Q,We),K=Math.min(K,nt),ae=Math.max(ae,nt)}if($===Q||K===ae)continue;const fe=Math.floor($/this._granularityCellSize),xe=Math.ceil(Q/this._granularityCellSize),Te=Math.floor(K/this._granularityCellSize),Pe=Math.ceil(ae/this._granularityCellSize);if(fe!==xe||Te!==Pe)for(let Re=Te;Re<Pe;Re++){const We=this._scanlineGenerateVertexRingForCellRow(Re,z,R);uie(this._vertexBuffer,We,y)}else y.push(...R)}return y}_scanlineGenerateVertexRingForCellRow(d,y,x){const k=d*this._granularityCellSize,R=k+this._granularityCellSize,z=[];for(let $=0;$<3;$++){const K=y[2*$],Q=y[2*$+1],ae=y[2*($+1)%6],fe=y[(2*($+1)+1)%6],xe=y[2*($+2)%6],Te=y[(2*($+2)+1)%6],Pe=ae-K,Re=fe-Q,We=Pe===0,nt=Re===0,wt=(k-Q)/Re,ot=(R-Q)/Re,Se=Math.min(wt,ot),He=Math.max(wt,ot);if(!nt&&(Se>=1||He<=0)||nt&&(Q<k||Q>R)){fe>=k&&fe<=R&&z.push(x[($+1)%3]);continue}!nt&&Se>0&&z.push(this._vertexToIndex(K+Pe*Se,Q+Re*Se));const ut=K+Pe*Math.max(Se,0),jt=K+Pe*Math.min(He,1);We||this._generateIntraEdgeVertices(z,K,Q,ae,fe,ut,jt),!nt&&He<1&&z.push(this._vertexToIndex(K+Pe*He,Q+Re*He)),(nt||fe>=k&&fe<=R)&&z.push(x[($+1)%3]),!nt&&(fe<=k||fe>=R)&&this._generateInterEdgeVertices(z,K,Q,ae,fe,xe,Te,jt,k,R)}return z}_generateIntraEdgeVertices(d,y,x,k,R,z,$){const K=k-y,Q=R-x,ae=Q===0,fe=ae?Math.min(y,k):Math.min(z,$),xe=ae?Math.max(y,k):Math.max(z,$),Te=Math.floor(fe/this._granularityCellSize)+1,Pe=Math.ceil(xe/this._granularityCellSize)-1;if(ae?y<k:z<$)for(let Re=Te;Re<=Pe;Re++){const We=Re*this._granularityCellSize;d.push(this._vertexToIndex(We,x+Q*(We-y)/K))}else for(let Re=Pe;Re>=Te;Re--){const We=Re*this._granularityCellSize;d.push(this._vertexToIndex(We,x+Q*(We-y)/K))}}_generateInterEdgeVertices(d,y,x,k,R,z,$,K,Q,ae){const fe=R-x,xe=z-k,Te=$-R,Pe=(Q-R)/Te,Re=(ae-R)/Te,We=Math.min(Pe,Re),nt=Math.max(Pe,Re),wt=k+xe*We;let ot=Math.floor(Math.min(wt,K)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(wt,K)/this._granularityCellSize)-1,He=K<wt;const ut=Te===0;if(ut&&($===Q||$===ae))return;if(ut||We>=1||nt<=0){const vn=x-$,qt=z+(y-z)*Math.min((Q-$)/vn,(ae-$)/vn);ot=Math.floor(Math.min(qt,K)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(qt,K)/this._granularityCellSize)-1,He=K<qt}const jt=fe>0?ae:Q;if(He)for(let vn=ot;vn<=Se;vn++)d.push(this._vertexToIndex(vn*this._granularityCellSize,jt));else for(let vn=Se;vn>=ot;vn--)d.push(this._vertexToIndex(vn*this._granularityCellSize,jt))}_generateOutline(d){const y=[];for(const x of d){const k=Pp(x,this._granularity,!0),R=this._pointArrayToIndices(k),z=[];for(let $=1;$<R.length;$++)z.push(R[$-1]),z.push(R[$]);y.push(z)}return y}_handlePoles(d){let y=!1,x=!1;this._canonical&&(this._canonical.y===0&&(y=!0),this._canonical.y===(1<<this._canonical.z)-1&&(x=!0)),(y||x)&&this._fillPoles(d,y,x)}_ensureNoPoleVertices(){const d=this._vertexBuffer;for(let y=0;y<d.length;y+=2){const x=d[y+1];x===dg&&(d[y+1]=-32767),x===nb&&(d[y+1]=32766)}}_generatePoleQuad(d,y,x,k,R,z){k>R!=(z===dg)?(d.push(y),d.push(x),d.push(this._vertexToIndex(k,z)),d.push(x),d.push(this._vertexToIndex(R,z)),d.push(this._vertexToIndex(k,z))):(d.push(x),d.push(y),d.push(this._vertexToIndex(k,z)),d.push(this._vertexToIndex(R,z)),d.push(x),d.push(this._vertexToIndex(k,z)))}_fillPoles(d,y,x){const k=this._vertexBuffer,R=re,z=d.length;for(let $=2;$<z;$+=3){const K=d[$-2],Q=d[$-1],ae=d[$],fe=k[2*K],xe=k[2*K+1],Te=k[2*Q],Pe=k[2*Q+1],Re=k[2*ae],We=k[2*ae+1];y&&(xe===0&&Pe===0&&this._generatePoleQuad(d,K,Q,fe,Te,dg),Pe===0&&We===0&&this._generatePoleQuad(d,Q,ae,Te,Re,dg),We===0&&xe===0&&this._generatePoleQuad(d,ae,K,Re,fe,dg)),x&&(xe===R&&Pe===R&&this._generatePoleQuad(d,K,Q,fe,Te,nb),Pe===R&&We===R&&this._generatePoleQuad(d,Q,ae,Te,Re,nb),We===R&&xe===R&&this._generatePoleQuad(d,ae,K,Re,fe,nb))}}_initializeVertices(d){for(let y=0;y<d.length;y+=2)this._vertexToIndex(d[y],d[y+1])}subdividePolygonInternal(d,y){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:x,holeIndices:k}=function($){const K=[],Q=[];for(const ae of $)if(ae.length!==0){ae!==$[0]&&K.push(Q.length/2);for(let fe=0;fe<ae.length;fe++)Q.push(ae[fe].x),Q.push(ae[fe].y)}return{flattened:Q,holeIndices:K}}(d);let R;this._initializeVertices(x);try{const $=function(Q,ae,fe=2){const xe=ae&&ae.length,Te=xe?ae[0]*fe:Q.length;let Pe=xB(Q,0,Te,fe,!0);const Re=[];if(!Pe||Pe.next===Pe.prev)return Re;let We,nt,wt;if(xe&&(Pe=function(ot,Se,He,ut){const jt=[];for(let vn=0,qt=Se.length;vn<qt;vn++){const Jt=xB(ot,Se[vn]*ut,vn<qt-1?Se[vn+1]*ut:ot.length,ut,!1);Jt===Jt.next&&(Jt.steiner=!0),jt.push(oie(Jt))}jt.sort(rie);for(let vn=0;vn<jt.length;vn++)He=iie(jt[vn],He);return He}(Q,ae,Pe,fe)),Q.length>80*fe){We=1/0,nt=1/0;let ot=-1/0,Se=-1/0;for(let He=fe;He<Te;He+=fe){const ut=Q[He],jt=Q[He+1];ut<We&&(We=ut),jt<nt&&(nt=jt),ut>ot&&(ot=ut),jt>Se&&(Se=jt)}wt=Math.max(ot-We,Se-nt),wt=wt!==0?32767/wt:0}return J_(Pe,Re,fe,We,nt,wt,0),Re}(x,k),K=this._convertIndices(x,$);R=this._subdivideTrianglesScanline(K)}catch($){console.error($)}let z=[];return y&&(z=this._generateOutline(d)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:z}}_convertIndices(d,y){const x=[];for(let k=0;k<y.length;k++)x.push(this._vertexToIndex(d[2*y[k]],d[2*y[k]+1]));return x}_pointArrayToIndices(d){const y=[];for(let x=0;x<d.length;x++){const k=d[x];y.push(this._vertexToIndex(k.x,k.y))}return y}}function kB(g,d,y,x=!0){return new lie(y,d).subdividePolygonInternal(g,x)}function Pp(g,d,y=!1){if(!g||g.length<1)return[];if(g.length<2)return[];const x=g[0],k=g[g.length-1],R=y&&(x.x!==k.x||x.y!==k.y);if(d<2)return R?[...g,g[0]]:[...g];const z=Math.floor(re/d),$=[];$.push(new _(g[0].x,g[0].y));const K=g.length,Q=R?K:K-1;for(let ae=0;ae<Q;ae++){const fe=g[ae],xe=ae<K-1?g[ae+1]:g[0],Te=fe.x,Pe=fe.y,Re=xe.x,We=xe.y,nt=Te!==Re,wt=Pe!==We;if(!nt&&!wt)continue;const ot=Re-Te,Se=We-Pe,He=Math.abs(ot),ut=Math.abs(Se);let jt=Te,vn=Pe;for(;;){const Jt=ot>0?(Math.floor(jt/z)+1)*z:(Math.ceil(jt/z)-1)*z,wn=Se>0?(Math.floor(vn/z)+1)*z:(Math.ceil(vn/z)-1)*z,mn=Math.abs(jt-Jt),Cn=Math.abs(vn-wn),rn=Math.abs(jt-Re),Gn=Math.abs(vn-We),cr=nt?mn/He:Number.POSITIVE_INFINITY,or=wt?Cn/ut:Number.POSITIVE_INFINITY;if((rn<=mn||!nt)&&(Gn<=Cn||!wt))break;if(cr<or&&nt||!wt){jt=Jt,vn+=Se*cr;const Zn=new _(jt,Math.round(vn));$[$.length-1].x===Zn.x&&$[$.length-1].y===Zn.y||$.push(Zn)}else{jt+=ot*or,vn=wn;const Zn=new _(Math.round(jt),vn);$[$.length-1].x===Zn.x&&$[$.length-1].y===Zn.y||$.push(Zn)}}const qt=new _(Re,We);$[$.length-1].x===qt.x&&$[$.length-1].y===qt.y||$.push(qt)}return $}function uie(g,d,y){if(d.length===0)throw new Error("Subdivision vertex ring is empty.");let x=0,k=g[2*d[0]];for(let K=1;K<d.length;K++){const Q=g[2*d[K]];Q<k&&(k=Q,x=K)}const R=d.length;let z=x,$=(z+1)%R;for(;;){const K=z-1>=0?z-1:R-1,Q=($+1)%R,ae=g[2*d[K]],fe=g[2*d[Q]],xe=g[2*d[z]],Te=g[2*d[z]+1],Pe=g[2*d[$]+1];let Re=!1;if(ae<fe)Re=!0;else if(ae>fe)Re=!1;else{const We=Pe-Te,nt=-(g[2*d[$]]-xe),wt=Te<Pe?1:-1;((ae-xe)*We+(g[2*d[K]+1]-Te)*nt)*wt>((fe-xe)*We+(g[2*d[Q]+1]-Te)*nt)*wt&&(Re=!0)}if(Re){const We=d[K],nt=d[z],wt=d[$];We!==nt&&We!==wt&&nt!==wt&&y.push(wt,nt,We),z--,z<0&&(z=R-1)}else{const We=d[Q],nt=d[z],wt=d[$];We!==nt&&We!==wt&&nt!==wt&&y.push(wt,nt,We),$++,$>=R&&($=0)}if(K===Q)break}}function EB(g,d,y,x,k,R,z,$,K){const Q=k.length/2,ae=z&&$&&K;if(Q<br.MAX_VERTEX_ARRAY_LENGTH){const fe=d.prepareSegment(Q,y,x),xe=fe.vertexLength;for(let Re=0;Re<R.length;Re+=3)x.emplaceBack(xe+R[Re],xe+R[Re+1],xe+R[Re+2]);let Te,Pe;fe.vertexLength+=Q,fe.primitiveLength+=R.length/3,ae&&(Pe=z.prepareSegment(Q,y,$),Te=Pe.vertexLength,Pe.vertexLength+=Q);for(let Re=0;Re<k.length;Re+=2)g(k[Re],k[Re+1]);if(ae)for(let Re=0;Re<K.length;Re++){const We=K[Re];for(let nt=1;nt<We.length;nt+=2)$.emplaceBack(Te+We[nt-1],Te+We[nt]);Pe.primitiveLength+=We.length/2}}else(function(fe,xe,Te,Pe,Re,We){const nt=[];for(let ut=0;ut<Pe.length/2;ut++)nt.push(-1);const wt={count:0};let ot=0,Se=fe.getOrCreateLatestSegment(xe,Te),He=Se.vertexLength;for(let ut=2;ut<Re.length;ut+=3){const jt=Re[ut-2],vn=Re[ut-1],qt=Re[ut];let Jt=nt[jt]<ot,wn=nt[vn]<ot,mn=nt[qt]<ot;Se.vertexLength+((Jt?1:0)+(wn?1:0)+(mn?1:0))>br.MAX_VERTEX_ARRAY_LENGTH&&(Se=fe.createNewSegment(xe,Te),ot=wt.count,Jt=!0,wn=!0,mn=!0,He=0);const Cn=rb(nt,Pe,We,wt,jt,Jt,Se),rn=rb(nt,Pe,We,wt,vn,wn,Se),Gn=rb(nt,Pe,We,wt,qt,mn,Se);Te.emplaceBack(He+Cn-ot,He+rn-ot,He+Gn-ot),Se.primitiveLength++}})(d,y,x,k,R,g),ae&&function(fe,xe,Te,Pe,Re,We){const nt=[];for(let ut=0;ut<Pe.length/2;ut++)nt.push(-1);const wt={count:0};let ot=0,Se=fe.getOrCreateLatestSegment(xe,Te),He=Se.vertexLength;for(let ut=0;ut<Re.length;ut++){const jt=Re[ut];for(let vn=1;vn<Re[ut].length;vn+=2){const qt=jt[vn-1],Jt=jt[vn];let wn=nt[qt]<ot,mn=nt[Jt]<ot;Se.vertexLength+((wn?1:0)+(mn?1:0))>br.MAX_VERTEX_ARRAY_LENGTH&&(Se=fe.createNewSegment(xe,Te),ot=wt.count,wn=!0,mn=!0,He=0);const Cn=rb(nt,Pe,We,wt,qt,wn,Se),rn=rb(nt,Pe,We,wt,Jt,mn,Se);Te.emplaceBack(He+Cn-ot,He+rn-ot),Se.primitiveLength++}}}(z,y,$,k,K,g),d.forceNewSegmentOnNextPrepare(),z==null||z.forceNewSegmentOnNextPrepare()}function rb(g,d,y,x,k,R,z){if(R){const $=x.count;return y(d[2*k],d[2*k+1]),g[k]=x.count,x.count++,z.vertexLength++,$}return g[k]}class QE{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(y=>y.id),this.index=d.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vt,this.indexArray=new Sn,this.indexArray2=new pn,this.programConfigurations=new kd(d.layers,d.zoom),this.segments=new br,this.segments2=new br,this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id)}populate(d,y,x){this.hasPattern=ZE("fill",this.layers,y);const k=this.layers[0].layout.get("fill-sort-key"),R=!k.isConstant(),z=[];for(const{feature:$,id:K,index:Q,sourceLayerIndex:ae}of d){const fe=this.layers[0]._featureFilter.needGeometry,xe=_c($,fe);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),xe,x))continue;const Te=R?k.evaluate(xe,{},x,y.availableImages):void 0,Pe={id:K,properties:$.properties,type:$.type,sourceLayerIndex:ae,index:Q,geometry:fe?xe.geometry:rs($),patterns:{},sortKey:Te};z.push(Pe)}R&&z.sort(($,K)=>$.sortKey-K.sortKey);for(const $ of z){const{geometry:K,index:Q,sourceLayerIndex:ae}=$;if(this.hasPattern){const fe=YE("fill",this.layers,$,this.zoom,y);this.patternFeatures.push(fe)}else this.addFeature($,K,Q,x,{},y.subdivisionGranularity);y.featureIndex.insert(d[Q].feature,K,Q,ae,this.index)}}update(d,y,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,y,this.stateDependentLayers,x)}addFeatures(d,y,x){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,y,x,d.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Jre),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(d,y,x,k,R,z){for(const $ of Om(y,500)){const K=kB($,k,z.fill.getGranularityForZoomLevel(k.z)),Q=this.layoutVertexArray;EB((ae,fe)=>{Q.emplaceBack(ae,fe)},this.segments,this.layoutVertexArray,this.indexArray,K.verticesFlattened,K.indicesTriangles,this.segments2,this.indexArray2,K.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,x,R,k)}}let AB,PB;$n("FillBucket",QE,{omit:["layers","patternFeatures"]});var cie={get paint(){return PB=PB||new zo({"fill-antialias":new Jn(Ae.paint_fill["fill-antialias"]),"fill-opacity":new hr(Ae.paint_fill["fill-opacity"]),"fill-color":new hr(Ae.paint_fill["fill-color"]),"fill-outline-color":new hr(Ae.paint_fill["fill-outline-color"]),"fill-translate":new Jn(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new Jn(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new xp(Ae.paint_fill["fill-pattern"])})},get layout(){return AB=AB||new zo({"fill-sort-key":new hr(Ae.layout_fill["fill-sort-key"])})}};class die extends Tl{constructor(d){super(d,cie)}recalculate(d,y){super.recalculate(d,y);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new QE(d)}queryRadius(){return kS(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:d,geometry:y,transform:x,pixelsToTileUnits:k}){return dB(ES(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-x.bearingInRadians,k),y)}isTileClipped(){return!0}}const hie=ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),fie=ba([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pie}=hie;var eA,IB,tA,LB,nA,DB,RB,LS={};function OB(){if(IB)return eA;IB=1;var g=f();function d(k,R,z,$,K){this.properties={},this.extent=z,this.type=0,this._pbf=k,this._geometry=-1,this._keys=$,this._values=K,k.readFields(y,this,R)}function y(k,R,z){k==1?R.id=z.readVarint():k==2?function($,K){for(var Q=$.readVarint()+$.pos;$.pos<Q;){var ae=K._keys[$.readVarint()],fe=K._values[$.readVarint()];K.properties[ae]=fe}}(z,R):k==3?R.type=z.readVarint():k==4&&(R._geometry=z.pos)}function x(k){for(var R,z,$=0,K=0,Q=k.length,ae=Q-1;K<Q;ae=K++)$+=((z=k[ae]).x-(R=k[K]).x)*(R.y+z.y);return $}return eA=d,d.types=["Unknown","Point","LineString","Polygon"],d.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var R,z=k.readVarint()+k.pos,$=1,K=0,Q=0,ae=0,fe=[];k.pos<z;){if(K<=0){var xe=k.readVarint();$=7&xe,K=xe>>3}if(K--,$===1||$===2)Q+=k.readSVarint(),ae+=k.readSVarint(),$===1&&(R&&fe.push(R),R=[]),R.push(new g(Q,ae));else{if($!==7)throw new Error("unknown command "+$);R&&R.push(R[0].clone())}}return R&&fe.push(R),fe},d.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var R=k.readVarint()+k.pos,z=1,$=0,K=0,Q=0,ae=1/0,fe=-1/0,xe=1/0,Te=-1/0;k.pos<R;){if($<=0){var Pe=k.readVarint();z=7&Pe,$=Pe>>3}if($--,z===1||z===2)(K+=k.readSVarint())<ae&&(ae=K),K>fe&&(fe=K),(Q+=k.readSVarint())<xe&&(xe=Q),Q>Te&&(Te=Q);else if(z!==7)throw new Error("unknown command "+z)}return[ae,xe,fe,Te]},d.prototype.toGeoJSON=function(k,R,z){var $,K,Q=this.extent*Math.pow(2,z),ae=this.extent*k,fe=this.extent*R,xe=this.loadGeometry(),Te=d.types[this.type];function Pe(nt){for(var wt=0;wt<nt.length;wt++){var ot=nt[wt];nt[wt]=[360*(ot.x+ae)/Q-180,360/Math.PI*Math.atan(Math.exp((180-360*(ot.y+fe)/Q)*Math.PI/180))-90]}}switch(this.type){case 1:var Re=[];for($=0;$<xe.length;$++)Re[$]=xe[$][0];Pe(xe=Re);break;case 2:for($=0;$<xe.length;$++)Pe(xe[$]);break;case 3:for(xe=function(nt){var wt=nt.length;if(wt<=1)return[nt];for(var ot,Se,He=[],ut=0;ut<wt;ut++){var jt=x(nt[ut]);jt!==0&&(Se===void 0&&(Se=jt<0),Se===jt<0?(ot&&He.push(ot),ot=[nt[ut]]):ot.push(nt[ut]))}return ot&&He.push(ot),He}(xe),$=0;$<xe.length;$++)for(K=0;K<xe[$].length;K++)Pe(xe[$][K])}xe.length===1?xe=xe[0]:Te="Multi"+Te;var We={type:"Feature",geometry:{type:Te,coordinates:xe},properties:this.properties};return"id"in this&&(We.id=this.id),We},eA}function zB(){if(LB)return tA;LB=1;var g=OB();function d(x,k){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=x,this._keys=[],this._values=[],this._features=[],x.readFields(y,this,k),this.length=this._features.length}function y(x,k,R){x===15?k.version=R.readVarint():x===1?k.name=R.readString():x===5?k.extent=R.readVarint():x===2?k._features.push(R.pos):x===3?k._keys.push(R.readString()):x===4&&k._values.push(function(z){for(var $=null,K=z.readVarint()+z.pos;z.pos<K;){var Q=z.readVarint()>>3;$=Q===1?z.readString():Q===2?z.readFloat():Q===3?z.readDouble():Q===4?z.readVarint64():Q===5?z.readVarint():Q===6?z.readSVarint():Q===7?z.readBoolean():null}return $}(R))}return tA=d,d.prototype.feature=function(x){if(x<0||x>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[x];var k=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,k,this.extent,this._keys,this._values)},tA}function BB(){return RB||(RB=1,LS.VectorTile=function(){if(DB)return nA;DB=1;var g=zB();function d(y,x,k){if(y===3){var R=new g(k,k.readVarint()+k.pos);R.length&&(x[R.name]=R)}}return nA=function(y,x){this.layers=y.readFields(d,{},x)},nA}(),LS.VectorTileFeature=OB(),LS.VectorTileLayer=zB()),LS}var ib=l(BB());const vie=ib.VectorTileFeature.types,rA=Math.pow(2,13);function ab(g,d,y,x,k,R,z,$){g.emplaceBack(d,y,2*Math.floor(x*rA)+z,k*rA*2,R*rA*2,Math.round($))}class iA{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(y=>y.id),this.index=d.index,this.hasPattern=!1,this.layoutVertexArray=new gt,this.centroidVertexArray=new at,this.indexArray=new Sn,this.programConfigurations=new kd(d.layers,d.zoom),this.segments=new br,this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id)}populate(d,y,x){this.features=[],this.hasPattern=ZE("fill-extrusion",this.layers,y);for(const{feature:k,id:R,index:z,sourceLayerIndex:$}of d){const K=this.layers[0]._featureFilter.needGeometry,Q=_c(k,K);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),Q,x))continue;const ae={id:R,sourceLayerIndex:$,index:z,geometry:K?Q.geometry:rs(k),properties:k.properties,type:k.type,patterns:{}};this.hasPattern?this.features.push(YE("fill-extrusion",this.layers,ae,this.zoom,y)):this.addFeature(ae,ae.geometry,z,x,{},y.subdivisionGranularity),y.featureIndex.insert(k,ae.geometry,z,$,this.index,!0)}}addFeatures(d,y,x){for(const k of this.features){const{geometry:R}=k;this.addFeature(k,R,k.index,y,x,d.subdivisionGranularity)}}update(d,y,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,y,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,pie),this.centroidVertexBuffer=d.createVertexBuffer(this.centroidVertexArray,fie.members,!0),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(d,y,x,k,R,z){for(const $ of Om(y,500)){const K={x:0,y:0,sampleCount:0},Q=this.layoutVertexArray.length;this.processPolygon(K,k,d,$,z);const ae=this.layoutVertexArray.length-Q,fe=Math.floor(K.x/K.sampleCount),xe=Math.floor(K.y/K.sampleCount);for(let Te=0;Te<ae;Te++)this.centroidVertexArray.emplaceBack(fe,xe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,x,R,k)}processPolygon(d,y,x,k,R){if(k.length<1||FB(k[0]))return;for(const fe of k)fe.length!==0&&mie(d,fe);const z={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},$=R.fill.getGranularityForZoomLevel(y.z),K=vie[x.type]==="Polygon";for(const fe of k){if(fe.length===0||FB(fe))continue;const xe=Pp(fe,$,K);this._generateSideFaces(xe,z)}if(!K)return;const Q=kB(k,y,$,!1),ae=this.layoutVertexArray;EB((fe,xe)=>{ab(ae,fe,xe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,Q.verticesFlattened,Q.indicesTriangles)}_generateSideFaces(d,y){let x=0;for(let k=1;k<d.length;k++){const R=d[k],z=d[k-1];if(gie(R,z))continue;y.segment.vertexLength+4>br.MAX_VERTEX_ARRAY_LENGTH&&(y.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const $=R.sub(z)._perp()._unit(),K=z.dist(R);x+K>32768&&(x=0),ab(this.layoutVertexArray,R.x,R.y,$.x,$.y,0,0,x),ab(this.layoutVertexArray,R.x,R.y,$.x,$.y,0,1,x),x+=K,ab(this.layoutVertexArray,z.x,z.y,$.x,$.y,0,0,x),ab(this.layoutVertexArray,z.x,z.y,$.x,$.y,0,1,x);const Q=y.segment.vertexLength;this.indexArray.emplaceBack(Q,Q+2,Q+1),this.indexArray.emplaceBack(Q+1,Q+2,Q+3),y.segment.vertexLength+=4,y.segment.primitiveLength+=2}}}function mie(g,d){for(let y=0;y<d.length;y++){const x=d[y];y===d.length-1&&d[0].x===x.x&&d[0].y===x.y||(g.x+=x.x,g.y+=x.y,g.sampleCount++)}}function gie(g,d){return g.x===d.x&&(g.x<0||g.x>re)||g.y===d.y&&(g.y<0||g.y>re)}function FB(g){return g.every(d=>d.x<0)||g.every(d=>d.x>re)||g.every(d=>d.y<0)||g.every(d=>d.y>re)}let NB;$n("FillExtrusionBucket",iA,{omit:["layers","features"]});var yie={get paint(){return NB=NB||new zo({"fill-extrusion-opacity":new Jn(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hr(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jn(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jn(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xp(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hr(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hr(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jn(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _ie extends Tl{constructor(d){super(d,yie)}createBucket(d){return new iA(d)}queryRadius(){return kS(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:d,feature:y,featureState:x,geometry:k,transform:R,pixelsToTileUnits:z,pixelPosMatrix:$}){const K=ES(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,z),Q=this.paint.get("fill-extrusion-height").evaluate(y,x),ae=this.paint.get("fill-extrusion-base").evaluate(y,x),fe=function(Te,Pe,Re){const We=[];for(const nt of Te){const wt=[nt.x,nt.y,0,1];ue(wt,wt,Pe),We.push(new _(wt[0]/wt[3],wt[1]/wt[3]))}return We}(K,$),xe=function(Te,Pe,Re,We){const nt=[],wt=[],ot=We[8]*Pe,Se=We[9]*Pe,He=We[10]*Pe,ut=We[11]*Pe,jt=We[8]*Re,vn=We[9]*Re,qt=We[10]*Re,Jt=We[11]*Re;for(const wn of Te){const mn=[],Cn=[];for(const rn of wn){const Gn=rn.x,cr=rn.y,or=We[0]*Gn+We[4]*cr+We[12],Zn=We[1]*Gn+We[5]*cr+We[13],Wr=We[2]*Gn+We[6]*cr+We[14],ca=We[3]*Gn+We[7]*cr+We[15],Ia=Wr+He,ho=ca+ut,al=or+jt,as=Zn+vn,Xa=Wr+qt,Qi=ca+Jt,Ha=new _((or+ot)/ho,(Zn+Se)/ho);Ha.z=Ia/ho,mn.push(Ha);const Ja=new _(al/Qi,as/Qi);Ja.z=Xa/Qi,Cn.push(Ja)}nt.push(mn),wt.push(Cn)}return[nt,wt]}(k,ae,Q,$);return function(Te,Pe,Re){let We=1/0;dB(Re,Pe)&&(We=$B(Re,Pe[0]));for(let nt=0;nt<Pe.length;nt++){const wt=Pe[nt],ot=Te[nt];for(let Se=0;Se<wt.length-1;Se++){const He=wt[Se],ut=[He,wt[Se+1],ot[Se+1],ot[Se],He];q_(Re,ut)&&(We=Math.min(We,$B(Re,ut)))}}return We!==1/0&&We}(xe[0],xe[1],fe)}}function ob(g,d){return g.x*d.x+g.y*d.y}function $B(g,d){if(g.length===1){let y=0;const x=d[y++];let k;for(;!k||x.equals(k);)if(k=d[y++],!k)return 1/0;for(;y<d.length;y++){const R=d[y],z=g[0],$=k.sub(x),K=R.sub(x),Q=z.sub(x),ae=ob($,$),fe=ob($,K),xe=ob(K,K),Te=ob(Q,$),Pe=ob(Q,K),Re=ae*xe-fe*fe,We=(xe*Te-fe*Pe)/Re,nt=(ae*Pe-fe*Te)/Re,wt=x.z*(1-We-nt)+k.z*We+R.z*nt;if(isFinite(wt))return wt}return 1/0}{let y=1/0;for(const x of d)y=Math.min(y,x.z);return y}}const bie=ba([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wie}=bie,xie=ba([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Sie}=xie,Cie=ib.VectorTileFeature.types,Tie=Math.cos(Math.PI/180*37.5),VB=Math.pow(2,14)/.5;class aA{constructor(d){this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(y=>y.id),this.index=d.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(y=>{this.gradients[y.id]={}}),this.layoutVertexArray=new Tt,this.layoutVertexArray2=new bt,this.indexArray=new Sn,this.programConfigurations=new kd(d.layers,d.zoom),this.segments=new br,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id)}populate(d,y,x){this.hasPattern=ZE("line",this.layers,y);const k=this.layers[0].layout.get("line-sort-key"),R=!k.isConstant(),z=[];for(const{feature:$,id:K,index:Q,sourceLayerIndex:ae}of d){const fe=this.layers[0]._featureFilter.needGeometry,xe=_c($,fe);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),xe,x))continue;const Te=R?k.evaluate(xe,{},x):void 0,Pe={id:K,properties:$.properties,type:$.type,sourceLayerIndex:ae,index:Q,geometry:fe?xe.geometry:rs($),patterns:{},sortKey:Te};z.push(Pe)}R&&z.sort(($,K)=>$.sortKey-K.sortKey);for(const $ of z){const{geometry:K,index:Q,sourceLayerIndex:ae}=$;if(this.hasPattern){const fe=YE("line",this.layers,$,this.zoom,y);this.patternFeatures.push(fe)}else this.addFeature($,K,Q,x,{},y.subdivisionGranularity);y.featureIndex.insert(d[Q].feature,K,Q,ae,this.index)}}update(d,y,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,y,this.stateDependentLayers,x)}addFeatures(d,y,x){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,y,x,d.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,Sie)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,wie),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(d){if(d.properties&&Object.prototype.hasOwnProperty.call(d.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(d.properties,"mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}}addFeature(d,y,x,k,R,z){const $=this.layers[0].layout,K=$.get("line-join").evaluate(d,{}),Q=$.get("line-cap"),ae=$.get("line-miter-limit"),fe=$.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(const xe of y)this.addLine(xe,d,K,Q,ae,fe,k,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,x,R,k)}addLine(d,y,x,k,R,z,$,K){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,d=Pp(d,$?K.line.getGranularityForZoomLevel($.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ot=0;ot<d.length-1;ot++)this.totalDistance+=d[ot].dist(d[ot+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Q=Cie[y.type]==="Polygon";let ae=d.length;for(;ae>=2&&d[ae-1].equals(d[ae-2]);)ae--;let fe=0;for(;fe<ae-1&&d[fe].equals(d[fe+1]);)fe++;if(ae<(Q?3:2))return;x==="bevel"&&(R=1.05);const xe=this.overscaling<=16?15*re/(512*this.overscaling):0,Te=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray);let Pe,Re,We,nt,wt;this.e1=this.e2=-1,Q&&(Pe=d[ae-2],wt=d[fe].sub(Pe)._unit()._perp());for(let ot=fe;ot<ae;ot++){if(We=ot===ae-1?Q?d[fe+1]:void 0:d[ot+1],We&&d[ot].equals(We))continue;wt&&(nt=wt),Pe&&(Re=Pe),Pe=d[ot],wt=We?We.sub(Pe)._unit()._perp():nt,nt=nt||wt;let Se=nt.add(wt);Se.x===0&&Se.y===0||Se._unit();const He=nt.x*wt.x+nt.y*wt.y,ut=Se.x*wt.x+Se.y*wt.y,jt=ut!==0?1/ut:1/0,vn=2*Math.sqrt(2-2*ut),qt=ut<Tie&&Re&&We,Jt=nt.x*wt.y-nt.y*wt.x>0;if(qt&&ot>fe){const Cn=Pe.dist(Re);if(Cn>2*xe){const rn=Pe.sub(Pe.sub(Re)._mult(xe/Cn)._round());this.updateDistance(Re,rn),this.addCurrentVertex(rn,nt,0,0,Te),Re=rn}}const wn=Re&&We;let mn=wn?x:Q?"butt":k;if(wn&&mn==="round"&&(jt<z?mn="miter":jt<=2&&(mn="fakeround")),mn==="miter"&&jt>R&&(mn="bevel"),mn==="bevel"&&(jt>2&&(mn="flipbevel"),jt<R&&(mn="miter")),Re&&this.updateDistance(Re,Pe),mn==="miter")Se._mult(jt),this.addCurrentVertex(Pe,Se,0,0,Te);else if(mn==="flipbevel"){if(jt>100)Se=wt.mult(-1);else{const Cn=jt*nt.add(wt).mag()/nt.sub(wt).mag();Se._perp()._mult(Cn*(Jt?-1:1))}this.addCurrentVertex(Pe,Se,0,0,Te),this.addCurrentVertex(Pe,Se.mult(-1),0,0,Te)}else if(mn==="bevel"||mn==="fakeround"){const Cn=-Math.sqrt(jt*jt-1),rn=Jt?Cn:0,Gn=Jt?0:Cn;if(Re&&this.addCurrentVertex(Pe,nt,rn,Gn,Te),mn==="fakeround"){const cr=Math.round(180*vn/Math.PI/20);for(let or=1;or<cr;or++){let Zn=or/cr;if(Zn!==.5){const ca=Zn-.5;Zn+=Zn*ca*(Zn-1)*((1.0904+He*(He*(3.55645-1.43519*He)-3.2452))*ca*ca+(.848013+He*(.215638*He-1.06021)))}const Wr=wt.sub(nt)._mult(Zn)._add(nt)._unit()._mult(Jt?-1:1);this.addHalfVertex(Pe,Wr.x,Wr.y,!1,Jt,0,Te)}}We&&this.addCurrentVertex(Pe,wt,-rn,-Gn,Te)}else if(mn==="butt")this.addCurrentVertex(Pe,Se,0,0,Te);else if(mn==="square"){const Cn=Re?1:-1;this.addCurrentVertex(Pe,Se,Cn,Cn,Te)}else mn==="round"&&(Re&&(this.addCurrentVertex(Pe,nt,0,0,Te),this.addCurrentVertex(Pe,nt,1,1,Te,!0)),We&&(this.addCurrentVertex(Pe,wt,-1,-1,Te,!0),this.addCurrentVertex(Pe,wt,0,0,Te)));if(qt&&ot<ae-1){const Cn=Pe.dist(We);if(Cn>2*xe){const rn=Pe.add(We.sub(Pe)._mult(xe/Cn)._round());this.updateDistance(Pe,rn),this.addCurrentVertex(rn,wt,0,0,Te),Pe=rn}}}}addCurrentVertex(d,y,x,k,R,z=!1){const $=y.y*k-y.x,K=-y.y-y.x*k;this.addHalfVertex(d,y.x+y.y*x,y.y-y.x*x,z,!1,x,R),this.addHalfVertex(d,$,K,z,!0,-k,R),this.distance>VB/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(d,y,x,k,R,z))}addHalfVertex({x:d,y},x,k,R,z,$,K){const Q=.5*(this.lineClips?this.scaledDistance*(VB-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d<<1)+(R?1:0),(y<<1)+(z?1:0),Math.round(63*x)+128,Math.round(63*k)+128,1+($===0?0:$<0?-1:1)|(63&Q)<<2,Q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ae=K.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ae,this.e2),K.primitiveLength++),z?this.e2=ae:this.e1=ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(d,y){this.distance+=d.dist(y),this.updateScaledDistance()}}let HB,jB;$n("LineBucket",aA,{omit:["layers","patternFeatures"]});var UB={get paint(){return jB=jB||new zo({"line-opacity":new hr(Ae.paint_line["line-opacity"]),"line-color":new hr(Ae.paint_line["line-color"]),"line-translate":new Jn(Ae.paint_line["line-translate"]),"line-translate-anchor":new Jn(Ae.paint_line["line-translate-anchor"]),"line-width":new hr(Ae.paint_line["line-width"]),"line-gap-width":new hr(Ae.paint_line["line-gap-width"]),"line-offset":new hr(Ae.paint_line["line-offset"]),"line-blur":new hr(Ae.paint_line["line-blur"]),"line-dasharray":new N_(Ae.paint_line["line-dasharray"]),"line-pattern":new xp(Ae.paint_line["line-pattern"]),"line-gradient":new $_(Ae.paint_line["line-gradient"])})},get layout(){return HB=HB||new zo({"line-cap":new Jn(Ae.layout_line["line-cap"]),"line-join":new hr(Ae.layout_line["line-join"]),"line-miter-limit":new Jn(Ae.layout_line["line-miter-limit"]),"line-round-limit":new Jn(Ae.layout_line["line-round-limit"]),"line-sort-key":new hr(Ae.layout_line["line-sort-key"])})}};class Mie extends hr{possiblyEvaluate(d,y){return y=new Fi(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),super.possiblyEvaluate(d,y)}evaluate(d,y,x,k){return y=Ee({},y,{zoom:Math.floor(y.zoom)}),super.evaluate(d,y,x,k)}}let DS;class kie extends Tl{constructor(d){super(d,UB),this.gradientVersion=0,DS||(DS=new Mie(UB.paint.properties["line-width"].specification),DS.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const y=this.gradientExpression();this.stepInterpolant=!!function(x){return x._styleExpression!==void 0}(y)&&y._styleExpression.expression instanceof ap,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(d,y){super.recalculate(d,y),this.paint._values["line-floorwidth"]=DS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new aA(d)}queryRadius(d){const y=d,x=WB(Y_("line-width",this,y),Y_("line-gap-width",this,y)),k=Y_("line-offset",this,y);return x/2+Math.abs(k)+kS(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:d,feature:y,featureState:x,geometry:k,transform:R,pixelsToTileUnits:z}){const $=ES(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,z),K=z/2*WB(this.paint.get("line-width").evaluate(y,x),this.paint.get("line-gap-width").evaluate(y,x)),Q=this.paint.get("line-offset").evaluate(y,x);return Q&&(k=function(ae,fe){const xe=[];for(let Te=0;Te<ae.length;Te++){const Pe=ae[Te],Re=[];for(let We=0;We<Pe.length;We++){const nt=Pe[We-1],wt=Pe[We],ot=Pe[We+1],Se=We===0?new _(0,0):wt.sub(nt)._unit()._perp(),He=We===Pe.length-1?new _(0,0):ot.sub(wt)._unit()._perp(),ut=Se._add(He)._unit(),jt=ut.x*He.x+ut.y*He.y;jt!==0&&ut._mult(1/jt),Re.push(ut._mult(fe)._add(wt))}xe.push(Re)}return xe}(k,Q*z)),function(ae,fe,xe){for(let Te=0;Te<fe.length;Te++){const Pe=fe[Te];if(ae.length>=3){for(let Re=0;Re<Pe.length;Re++)if(Ep(ae,Pe[Re]))return!0}if(Hre(ae,Pe,xe))return!0}return!1}($,k,K)}isTileClipped(){return!0}}function WB(g,d){return d>0?d+2*g:g}const Eie=ba([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Aie=ba([{name:"a_projected_pos",components:3,type:"Float32"}],4);ba([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Pie=ba([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ba([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const GB=ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Iie=ba([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Lie(g,d,y){return g.sections.forEach(x=>{x.text=function(k,R,z){const $=R.layout.get("text-transform").evaluate(z,{});return $==="uppercase"?k=k.toLocaleUpperCase():$==="lowercase"&&(k=k.toLocaleLowerCase()),mc.applyArabicShaping&&(k=mc.applyArabicShaping(k)),k}(x.text,d,y)}),g}ba([{name:"triangle",components:3,type:"Uint16"}]),ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ba([{type:"Float32",name:"offsetX"}]),ba([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ba([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const sb={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var KB,oA,qB,Pa=24,sA={};function Die(){return KB||(KB=1,sA.read=function(g,d,y,x,k){var R,z,$=8*k-x-1,K=(1<<$)-1,Q=K>>1,ae=-7,fe=y?k-1:0,xe=y?-1:1,Te=g[d+fe];for(fe+=xe,R=Te&(1<<-ae)-1,Te>>=-ae,ae+=$;ae>0;R=256*R+g[d+fe],fe+=xe,ae-=8);for(z=R&(1<<-ae)-1,R>>=-ae,ae+=x;ae>0;z=256*z+g[d+fe],fe+=xe,ae-=8);if(R===0)R=1-Q;else{if(R===K)return z?NaN:1/0*(Te?-1:1);z+=Math.pow(2,x),R-=Q}return(Te?-1:1)*z*Math.pow(2,R-x)},sA.write=function(g,d,y,x,k,R){var z,$,K,Q=8*R-k-1,ae=(1<<Q)-1,fe=ae>>1,xe=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,Te=x?0:R-1,Pe=x?1:-1,Re=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?($=isNaN(d)?1:0,z=ae):(z=Math.floor(Math.log(d)/Math.LN2),d*(K=Math.pow(2,-z))<1&&(z--,K*=2),(d+=z+fe>=1?xe/K:xe*Math.pow(2,1-fe))*K>=2&&(z++,K/=2),z+fe>=ae?($=0,z=ae):z+fe>=1?($=(d*K-1)*Math.pow(2,k),z+=fe):($=d*Math.pow(2,fe-1)*Math.pow(2,k),z=0));k>=8;g[y+Te]=255&$,Te+=Pe,$/=256,k-=8);for(z=z<<k|$,Q+=k;Q>0;g[y+Te]=255&z,Te+=Pe,z/=256,Q-=8);g[y+Te-Pe]|=128*Re}),sA}function ZB(){if(qB)return oA;qB=1,oA=d;var g=Die();function d(Se){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Se)?Se:new Uint8Array(Se||0),this.pos=0,this.type=0,this.length=this.buf.length}d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var y=4294967296,x=1/y,k=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function R(Se){return Se.type===d.Bytes?Se.readVarint()+Se.pos:Se.pos+1}function z(Se,He,ut){return ut?4294967296*He+(Se>>>0):4294967296*(He>>>0)+(Se>>>0)}function $(Se,He,ut){var jt=He<=16383?1:He<=2097151?2:He<=268435455?3:Math.floor(Math.log(He)/(7*Math.LN2));ut.realloc(jt);for(var vn=ut.pos-1;vn>=Se;vn--)ut.buf[vn+jt]=ut.buf[vn]}function K(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeVarint(Se[ut])}function Q(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeSVarint(Se[ut])}function ae(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeFloat(Se[ut])}function fe(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeDouble(Se[ut])}function xe(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeBoolean(Se[ut])}function Te(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeFixed32(Se[ut])}function Pe(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeSFixed32(Se[ut])}function Re(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeFixed64(Se[ut])}function We(Se,He){for(var ut=0;ut<Se.length;ut++)He.writeSFixed64(Se[ut])}function nt(Se,He){return(Se[He]|Se[He+1]<<8|Se[He+2]<<16)+16777216*Se[He+3]}function wt(Se,He,ut){Se[ut]=He,Se[ut+1]=He>>>8,Se[ut+2]=He>>>16,Se[ut+3]=He>>>24}function ot(Se,He){return(Se[He]|Se[He+1]<<8|Se[He+2]<<16)+(Se[He+3]<<24)}return d.prototype={destroy:function(){this.buf=null},readFields:function(Se,He,ut){for(ut=ut||this.length;this.pos<ut;){var jt=this.readVarint(),vn=jt>>3,qt=this.pos;this.type=7&jt,Se(vn,He,this),this.pos===qt&&this.skip(jt)}return He},readMessage:function(Se,He){return this.readFields(Se,He,this.readVarint()+this.pos)},readFixed32:function(){var Se=nt(this.buf,this.pos);return this.pos+=4,Se},readSFixed32:function(){var Se=ot(this.buf,this.pos);return this.pos+=4,Se},readFixed64:function(){var Se=nt(this.buf,this.pos)+nt(this.buf,this.pos+4)*y;return this.pos+=8,Se},readSFixed64:function(){var Se=nt(this.buf,this.pos)+ot(this.buf,this.pos+4)*y;return this.pos+=8,Se},readFloat:function(){var Se=g.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Se},readDouble:function(){var Se=g.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Se},readVarint:function(Se){var He,ut,jt=this.buf;return He=127&(ut=jt[this.pos++]),ut<128?He:(He|=(127&(ut=jt[this.pos++]))<<7,ut<128?He:(He|=(127&(ut=jt[this.pos++]))<<14,ut<128?He:(He|=(127&(ut=jt[this.pos++]))<<21,ut<128?He:function(vn,qt,Jt){var wn,mn,Cn=Jt.buf;if(wn=(112&(mn=Cn[Jt.pos++]))>>4,mn<128||(wn|=(127&(mn=Cn[Jt.pos++]))<<3,mn<128)||(wn|=(127&(mn=Cn[Jt.pos++]))<<10,mn<128)||(wn|=(127&(mn=Cn[Jt.pos++]))<<17,mn<128)||(wn|=(127&(mn=Cn[Jt.pos++]))<<24,mn<128)||(wn|=(1&(mn=Cn[Jt.pos++]))<<31,mn<128))return z(vn,wn,qt);throw new Error("Expected varint not more than 10 bytes")}(He|=(15&(ut=jt[this.pos]))<<28,Se,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Se=this.readVarint();return Se%2==1?(Se+1)/-2:Se/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Se=this.readVarint()+this.pos,He=this.pos;return this.pos=Se,Se-He>=12&&k?function(ut,jt,vn){return k.decode(ut.subarray(jt,vn))}(this.buf,He,Se):function(ut,jt,vn){for(var qt="",Jt=jt;Jt<vn;){var wn,mn,Cn,rn=ut[Jt],Gn=null,cr=rn>239?4:rn>223?3:rn>191?2:1;if(Jt+cr>vn)break;cr===1?rn<128&&(Gn=rn):cr===2?(192&(wn=ut[Jt+1]))==128&&(Gn=(31&rn)<<6|63&wn)<=127&&(Gn=null):cr===3?(mn=ut[Jt+2],(192&(wn=ut[Jt+1]))==128&&(192&mn)==128&&((Gn=(15&rn)<<12|(63&wn)<<6|63&mn)<=2047||Gn>=55296&&Gn<=57343)&&(Gn=null)):cr===4&&(mn=ut[Jt+2],Cn=ut[Jt+3],(192&(wn=ut[Jt+1]))==128&&(192&mn)==128&&(192&Cn)==128&&((Gn=(15&rn)<<18|(63&wn)<<12|(63&mn)<<6|63&Cn)<=65535||Gn>=1114112)&&(Gn=null)),Gn===null?(Gn=65533,cr=1):Gn>65535&&(Gn-=65536,qt+=String.fromCharCode(Gn>>>10&1023|55296),Gn=56320|1023&Gn),qt+=String.fromCharCode(Gn),Jt+=cr}return qt}(this.buf,He,Se)},readBytes:function(){var Se=this.readVarint()+this.pos,He=this.buf.subarray(this.pos,Se);return this.pos=Se,He},readPackedVarint:function(Se,He){if(this.type!==d.Bytes)return Se.push(this.readVarint(He));var ut=R(this);for(Se=Se||[];this.pos<ut;)Se.push(this.readVarint(He));return Se},readPackedSVarint:function(Se){if(this.type!==d.Bytes)return Se.push(this.readSVarint());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readSVarint());return Se},readPackedBoolean:function(Se){if(this.type!==d.Bytes)return Se.push(this.readBoolean());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readBoolean());return Se},readPackedFloat:function(Se){if(this.type!==d.Bytes)return Se.push(this.readFloat());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readFloat());return Se},readPackedDouble:function(Se){if(this.type!==d.Bytes)return Se.push(this.readDouble());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readDouble());return Se},readPackedFixed32:function(Se){if(this.type!==d.Bytes)return Se.push(this.readFixed32());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readFixed32());return Se},readPackedSFixed32:function(Se){if(this.type!==d.Bytes)return Se.push(this.readSFixed32());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readSFixed32());return Se},readPackedFixed64:function(Se){if(this.type!==d.Bytes)return Se.push(this.readFixed64());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readFixed64());return Se},readPackedSFixed64:function(Se){if(this.type!==d.Bytes)return Se.push(this.readSFixed64());var He=R(this);for(Se=Se||[];this.pos<He;)Se.push(this.readSFixed64());return Se},skip:function(Se){var He=7&Se;if(He===d.Varint)for(;this.buf[this.pos++]>127;);else if(He===d.Bytes)this.pos=this.readVarint()+this.pos;else if(He===d.Fixed32)this.pos+=4;else{if(He!==d.Fixed64)throw new Error("Unimplemented type: "+He);this.pos+=8}},writeTag:function(Se,He){this.writeVarint(Se<<3|He)},realloc:function(Se){for(var He=this.length||16;He<this.pos+Se;)He*=2;if(He!==this.length){var ut=new Uint8Array(He);ut.set(this.buf),this.buf=ut,this.length=He}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Se){this.realloc(4),wt(this.buf,Se,this.pos),this.pos+=4},writeSFixed32:function(Se){this.realloc(4),wt(this.buf,Se,this.pos),this.pos+=4},writeFixed64:function(Se){this.realloc(8),wt(this.buf,-1&Se,this.pos),wt(this.buf,Math.floor(Se*x),this.pos+4),this.pos+=8},writeSFixed64:function(Se){this.realloc(8),wt(this.buf,-1&Se,this.pos),wt(this.buf,Math.floor(Se*x),this.pos+4),this.pos+=8},writeVarint:function(Se){(Se=+Se||0)>268435455||Se<0?function(He,ut){var jt,vn;if(He>=0?(jt=He%4294967296|0,vn=He/4294967296|0):(vn=~(-He/4294967296),4294967295^(jt=~(-He%4294967296))?jt=jt+1|0:(jt=0,vn=vn+1|0)),He>=18446744073709552e3||He<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ut.realloc(10),function(qt,Jt,wn){wn.buf[wn.pos++]=127&qt|128,qt>>>=7,wn.buf[wn.pos++]=127&qt|128,qt>>>=7,wn.buf[wn.pos++]=127&qt|128,qt>>>=7,wn.buf[wn.pos++]=127&qt|128,wn.buf[wn.pos]=127&(qt>>>=7)}(jt,0,ut),function(qt,Jt){var wn=(7&qt)<<4;Jt.buf[Jt.pos++]|=wn|((qt>>>=3)?128:0),qt&&(Jt.buf[Jt.pos++]=127&qt|((qt>>>=7)?128:0),qt&&(Jt.buf[Jt.pos++]=127&qt|((qt>>>=7)?128:0),qt&&(Jt.buf[Jt.pos++]=127&qt|((qt>>>=7)?128:0),qt&&(Jt.buf[Jt.pos++]=127&qt|((qt>>>=7)?128:0),qt&&(Jt.buf[Jt.pos++]=127&qt)))))}(vn,ut)}(Se,this):(this.realloc(4),this.buf[this.pos++]=127&Se|(Se>127?128:0),Se<=127||(this.buf[this.pos++]=127&(Se>>>=7)|(Se>127?128:0),Se<=127||(this.buf[this.pos++]=127&(Se>>>=7)|(Se>127?128:0),Se<=127||(this.buf[this.pos++]=Se>>>7&127))))},writeSVarint:function(Se){this.writeVarint(Se<0?2*-Se-1:2*Se)},writeBoolean:function(Se){this.writeVarint(!!Se)},writeString:function(Se){Se=String(Se),this.realloc(4*Se.length),this.pos++;var He=this.pos;this.pos=function(jt,vn,qt){for(var Jt,wn,mn=0;mn<vn.length;mn++){if((Jt=vn.charCodeAt(mn))>55295&&Jt<57344){if(!wn){Jt>56319||mn+1===vn.length?(jt[qt++]=239,jt[qt++]=191,jt[qt++]=189):wn=Jt;continue}if(Jt<56320){jt[qt++]=239,jt[qt++]=191,jt[qt++]=189,wn=Jt;continue}Jt=wn-55296<<10|Jt-56320|65536,wn=null}else wn&&(jt[qt++]=239,jt[qt++]=191,jt[qt++]=189,wn=null);Jt<128?jt[qt++]=Jt:(Jt<2048?jt[qt++]=Jt>>6|192:(Jt<65536?jt[qt++]=Jt>>12|224:(jt[qt++]=Jt>>18|240,jt[qt++]=Jt>>12&63|128),jt[qt++]=Jt>>6&63|128),jt[qt++]=63&Jt|128)}return qt}(this.buf,Se,this.pos);var ut=this.pos-He;ut>=128&&$(He,ut,this),this.pos=He-1,this.writeVarint(ut),this.pos+=ut},writeFloat:function(Se){this.realloc(4),g.write(this.buf,Se,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Se){this.realloc(8),g.write(this.buf,Se,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Se){var He=Se.length;this.writeVarint(He),this.realloc(He);for(var ut=0;ut<He;ut++)this.buf[this.pos++]=Se[ut]},writeRawMessage:function(Se,He){this.pos++;var ut=this.pos;Se(He,this);var jt=this.pos-ut;jt>=128&&$(ut,jt,this),this.pos=ut-1,this.writeVarint(jt),this.pos+=jt},writeMessage:function(Se,He,ut){this.writeTag(Se,d.Bytes),this.writeRawMessage(He,ut)},writePackedVarint:function(Se,He){He.length&&this.writeMessage(Se,K,He)},writePackedSVarint:function(Se,He){He.length&&this.writeMessage(Se,Q,He)},writePackedBoolean:function(Se,He){He.length&&this.writeMessage(Se,xe,He)},writePackedFloat:function(Se,He){He.length&&this.writeMessage(Se,ae,He)},writePackedDouble:function(Se,He){He.length&&this.writeMessage(Se,fe,He)},writePackedFixed32:function(Se,He){He.length&&this.writeMessage(Se,Te,He)},writePackedSFixed32:function(Se,He){He.length&&this.writeMessage(Se,Pe,He)},writePackedFixed64:function(Se,He){He.length&&this.writeMessage(Se,Re,He)},writePackedSFixed64:function(Se,He){He.length&&this.writeMessage(Se,We,He)},writeBytesField:function(Se,He){this.writeTag(Se,d.Bytes),this.writeBytes(He)},writeFixed32Field:function(Se,He){this.writeTag(Se,d.Fixed32),this.writeFixed32(He)},writeSFixed32Field:function(Se,He){this.writeTag(Se,d.Fixed32),this.writeSFixed32(He)},writeFixed64Field:function(Se,He){this.writeTag(Se,d.Fixed64),this.writeFixed64(He)},writeSFixed64Field:function(Se,He){this.writeTag(Se,d.Fixed64),this.writeSFixed64(He)},writeVarintField:function(Se,He){this.writeTag(Se,d.Varint),this.writeVarint(He)},writeSVarintField:function(Se,He){this.writeTag(Se,d.Varint),this.writeSVarint(He)},writeStringField:function(Se,He){this.writeTag(Se,d.Bytes),this.writeString(He)},writeFloatField:function(Se,He){this.writeTag(Se,d.Fixed32),this.writeFloat(He)},writeDoubleField:function(Se,He){this.writeTag(Se,d.Fixed64),this.writeDouble(He)},writeBooleanField:function(Se,He){this.writeVarintField(Se,!!He)}},oA}var lA=l(ZB());const uA=3;function Rie(g,d,y){g===1&&y.readMessage(Oie,d)}function Oie(g,d,y){if(g===3){const{id:x,bitmap:k,width:R,height:z,left:$,top:K,advance:Q}=y.readMessage(zie,{});d.push({id:x,bitmap:new X_({width:R+2*uA,height:z+2*uA},k),metrics:{width:R,height:z,left:$,top:K,advance:Q}})}}function zie(g,d,y){g===1?d.id=y.readVarint():g===2?d.bitmap=y.readBytes():g===3?d.width=y.readVarint():g===4?d.height=y.readVarint():g===5?d.left=y.readSVarint():g===6?d.top=y.readSVarint():g===7&&(d.advance=y.readVarint())}const Bie=uA;function YB(g){let d=0,y=0;for(const z of g)d+=z.w*z.h,y=Math.max(y,z.w);g.sort((z,$)=>$.h-z.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),y),h:1/0}];let k=0,R=0;for(const z of g)for(let $=x.length-1;$>=0;$--){const K=x[$];if(!(z.w>K.w||z.h>K.h)){if(z.x=K.x,z.y=K.y,R=Math.max(R,z.y+z.h),k=Math.max(k,z.x+z.w),z.w===K.w&&z.h===K.h){const Q=x.pop();$<x.length&&(x[$]=Q)}else z.h===K.h?(K.x+=z.w,K.w-=z.w):z.w===K.w?(K.y+=z.h,K.h-=z.h):(x.push({x:K.x+z.w,y:K.y,w:K.w-z.w,h:z.h}),K.y+=z.h,K.h-=z.h);break}}return{w:k,h:R,fill:d/(k*R)||0}}const is=1;class cA{constructor(d,{pixelRatio:y,version:x,stretchX:k,stretchY:R,content:z,textFitWidth:$,textFitHeight:K}){this.paddedRect=d,this.pixelRatio=y,this.stretchX=k,this.stretchY=R,this.content=z,this.version=x,this.textFitWidth=$,this.textFitHeight=K}get tl(){return[this.paddedRect.x+is,this.paddedRect.y+is]}get br(){return[this.paddedRect.x+this.paddedRect.w-is,this.paddedRect.y+this.paddedRect.h-is]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*is)/this.pixelRatio,(this.paddedRect.h-2*is)/this.pixelRatio]}}class XB{constructor(d,y){const x={},k={};this.haveRenderCallbacks=[];const R=[];this.addImages(d,x,R),this.addImages(y,k,R);const{w:z,h:$}=YB(R),K=new rl({width:z||1,height:$||1});for(const Q in d){const ae=d[Q],fe=x[Q].paddedRect;rl.copy(ae.data,K,{x:0,y:0},{x:fe.x+is,y:fe.y+is},ae.data)}for(const Q in y){const ae=y[Q],fe=k[Q].paddedRect,xe=fe.x+is,Te=fe.y+is,Pe=ae.data.width,Re=ae.data.height;rl.copy(ae.data,K,{x:0,y:0},{x:xe,y:Te},ae.data),rl.copy(ae.data,K,{x:0,y:Re-1},{x:xe,y:Te-1},{width:Pe,height:1}),rl.copy(ae.data,K,{x:0,y:0},{x:xe,y:Te+Re},{width:Pe,height:1}),rl.copy(ae.data,K,{x:Pe-1,y:0},{x:xe-1,y:Te},{width:1,height:Re}),rl.copy(ae.data,K,{x:0,y:0},{x:xe+Pe,y:Te},{width:1,height:Re})}this.image=K,this.iconPositions=x,this.patternPositions=k}addImages(d,y,x){for(const k in d){const R=d[k],z={x:0,y:0,w:R.data.width+2*is,h:R.data.height+2*is};x.push(z),y[k]=new cA(z,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(k)}}patchUpdatedImages(d,y){d.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in d.updatedImages)this.patchUpdatedImage(this.iconPositions[x],d.getImage(x),y),this.patchUpdatedImage(this.patternPositions[x],d.getImage(x),y)}patchUpdatedImage(d,y,x){if(!d||!y||d.version===y.version)return;d.version=y.version;const[k,R]=d.tl;x.update(y.data,void 0,{x:k,y:R})}}var Eh;$n("ImagePosition",cA),$n("ImageAtlas",XB),o.al=void 0,(Eh=o.al||(o.al={}))[Eh.none=0]="none",Eh[Eh.horizontal=1]="horizontal",Eh[Eh.vertical=2]="vertical",Eh[Eh.horizontalOnly=3]="horizontalOnly";const RS=-17;class lb{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(d,y,x){const k=new lb;return k.scale=d||1,k.fontStack=y,k.verticalAlign=x||"bottom",k}static forImage(d,y){const x=new lb;return x.imageName=d,x.verticalAlign=y||"bottom",x}}class hg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(d,y){const x=new hg;for(let k=0;k<d.sections.length;k++){const R=d.sections[k];R.image?x.addImageSection(R):x.addTextSection(R,y)}return x}length(){return this.text.length}getSection(d){return this.sections[this.sectionIndex[d]]}getSectionIndex(d){return this.sectionIndex[d]}getCharCode(d){return this.text.charCodeAt(d)}verticalizePunctuation(){this.text=function(d){let y="";for(let x=0;x<d.length;x++){const k=d.charCodeAt(x+1)||null,R=d.charCodeAt(x-1)||null;y+=k&&yS(k)&&!sb[d[x+1]]||R&&yS(R)&&!sb[d[x-1]]||!sb[d[x]]?d[x]:sb[d[x]]}return y}(this.text)}trim(){let d=0;for(let x=0;x<this.text.length&&zS[this.text.charCodeAt(x)];x++)d++;let y=this.text.length;for(let x=this.text.length-1;x>=0&&x>=d&&zS[this.text.charCodeAt(x)];x--)y--;this.text=this.text.substring(d,y),this.sectionIndex=this.sectionIndex.slice(d,y)}substring(d,y){const x=new hg;return x.text=this.text.substring(d,y),x.sectionIndex=this.sectionIndex.slice(d,y),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((d,y)=>Math.max(d,this.sections[y].scale),0)}getMaxImageSize(d){let y=0,x=0;for(let k=0;k<this.length();k++){const R=this.getSection(k);if(R.imageName){const z=d[R.imageName];if(!z)continue;const $=z.displaySize;y=Math.max(y,$[0]),x=Math.max(x,$[1])}}return{maxImageWidth:y,maxImageHeight:x}}addTextSection(d,y){this.text+=d.text,this.sections.push(lb.forText(d.scale,d.fontStack||y,d.verticalAlign));const x=this.sections.length-1;for(let k=0;k<d.text.length;++k)this.sectionIndex.push(x)}addImageSection(d){const y=d.image?d.image.name:"";if(y.length===0)return void Le("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(lb.forImage(y,d.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function OS(g,d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe){const Re=hg.fromFeature(g,k);let We;fe===o.al.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:nt,processStyledBidirectionalText:wt}=mc;if(nt&&Re.sections.length===1){We=[];const He=nt(Re.toString(),dA(Re,Q,R,d,x,Te));for(const ut of He){const jt=new hg;jt.text=ut,jt.sections=Re.sections;for(let vn=0;vn<ut.length;vn++)jt.sectionIndex.push(0);We.push(jt)}}else if(wt){We=[];const He=wt(Re.text,Re.sectionIndex,dA(Re,Q,R,d,x,Te));for(const ut of He){const jt=new hg;jt.text=ut[0],jt.sectionIndex=ut[1],jt.sections=Re.sections,We.push(jt)}}else We=function(He,ut){const jt=[],vn=He.text;let qt=0;for(const Jt of ut)jt.push(He.substring(qt,Jt)),qt=Jt;return qt<vn.length&&jt.push(He.substring(qt,vn.length)),jt}(Re,dA(Re,Q,R,d,x,Te));const ot=[],Se={positionedLines:ot,text:Re.toString(),top:ae[1],bottom:ae[1],left:ae[0],right:ae[0],writingMode:fe,iconsInText:!1,verticalizable:!1};return function(He,ut,jt,vn,qt,Jt,wn,mn,Cn,rn,Gn,cr){let or=0,Zn=0,Wr=0,ca=0;const Ia=mn==="right"?1:mn==="left"?0:.5,ho=Pa/cr;let al=0;for(const Qi of qt){Qi.trim();const Ha=Qi.getMaxScale(),Ja={positionedGlyphs:[],lineOffset:0};He.positionedLines[al]=Ja;const Qa=Ja.positionedGlyphs;let Bo=0;if(!Qi.length()){Zn+=Jt,++al;continue}const ol=Vie(vn,Qi,ho);for(let os=0;os<Qi.length();os++){const La=Qi.getSection(os),Ua=Qi.getSectionIndex(os),Wa=Qi.getCharCode(os),Ca=Hie(Cn,Gn,Wa);let Vi;if(La.imageName){if(He.iconsInText=!0,La.scale=La.scale*ho,Vi=Uie(La,Ca,Ha,ol,vn),!Vi)continue;Bo=Math.max(Bo,Vi.imageOffset)}else if(Vi=jie(La,Wa,Ca,ol,ut,jt),!Vi)continue;const{rect:bu,metrics:mg,baselineOffset:wu}=Vi;Qa.push({glyph:Wa,imageName:La.imageName,x:or,y:Zn+wu+RS,vertical:Ca,scale:La.scale,fontStack:La.fontStack,sectionIndex:Ua,metrics:mg,rect:bu}),Ca?(He.verticalizable=!0,or+=(La.imageName?mg.advance:Pa)*La.scale+rn):or+=mg.advance*La.scale+rn}Qa.length!==0&&(Wr=Math.max(or-rn,Wr),Wie(Qa,0,Qa.length-1,Ia)),or=0,Ja.lineOffset=Math.max(Bo,(Ha-1)*Pa);const ja=Jt*Ha+Bo;Zn+=ja,ca=Math.max(ja,ca),++al}const{horizontalAlign:as,verticalAlign:Xa}=hA(wn);(function(Qi,Ha,Ja,Qa,Bo,ol,ja,os,La){const Ua=(Ha-Ja)*Bo;let Wa=0;Wa=ol!==ja?-os*Qa-RS:-Qa*La*ja+.5*ja;for(const Ca of Qi)for(const Vi of Ca.positionedGlyphs)Vi.x+=Ua,Vi.y+=Wa})(He.positionedLines,Ia,as,Xa,Wr,ca,Jt,Zn,qt.length),He.top+=-Xa*Zn,He.bottom=He.top+Zn,He.left+=-as*Wr,He.right=He.left+Wr}(Se,d,y,x,We,z,$,K,fe,Q,xe,Pe),!function(He){for(const ut of He)if(ut.positionedGlyphs.length!==0)return!1;return!0}(ot)&&Se}const zS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fie={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Nie={40:!0};function JB(g,d,y,x,k,R){if(d.imageName){const z=x[d.imageName];return z?z.displaySize[0]*d.scale*Pa/R+k:0}{const z=y[d.fontStack],$=z&&z[g];return $?$.metrics.advance*d.scale+k:0}}function QB(g,d,y,x){const k=Math.pow(g-d,2);return x?g<d?k/2:2*k:k+Math.abs(y)*y}function $ie(g,d,y){let x=0;return g===10&&(x-=1e4),y&&(x+=150),g!==40&&g!==65288||(x+=50),d!==41&&d!==65289||(x+=50),x}function eF(g,d,y,x,k,R){let z=null,$=QB(d,y,k,R);for(const K of x){const Q=QB(d-K.x,y,k,R)+K.badness;Q<=$&&(z=K,$=Q)}return{index:g,x:d,priorBreak:z,badness:$}}function tF(g){return g?tF(g.priorBreak).concat(g.index):[]}function dA(g,d,y,x,k,R){if(!g)return[];const z=[],$=function(fe,xe,Te,Pe,Re,We){let nt=0;for(let wt=0;wt<fe.length();wt++){const ot=fe.getSection(wt);nt+=JB(fe.getCharCode(wt),ot,Pe,Re,xe,We)}return nt/Math.max(1,Math.ceil(nt/Te))}(g,d,y,x,k,R),K=g.text.indexOf("​")>=0;let Q=0;for(let fe=0;fe<g.length();fe++){const xe=g.getSection(fe),Te=g.getCharCode(fe);if(zS[Te]||(Q+=JB(Te,xe,x,k,d,R)),fe<g.length()-1){const Pe=!((ae=Te)<11904)&&(!!$r["CJK Compatibility Forms"](ae)||!!$r["CJK Compatibility"](ae)||!!$r["CJK Strokes"](ae)||!!$r["CJK Symbols and Punctuation"](ae)||!!$r["Enclosed CJK Letters and Months"](ae)||!!$r["Halfwidth and Fullwidth Forms"](ae)||!!$r["Ideographic Description Characters"](ae)||!!$r["Vertical Forms"](ae)||gS.test(String.fromCodePoint(ae)));(Fie[Te]||Pe||xe.imageName||fe!==g.length()-2&&Nie[g.getCharCode(fe+1)])&&z.push(eF(fe+1,Q,$,z,$ie(Te,g.getCharCode(fe+1),Pe&&K),!1))}}var ae;return tF(eF(g.length(),Q,$,z,0,!0))}function hA(g){let d=.5,y=.5;switch(g){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(g){case"bottom":case"bottom-right":case"bottom-left":y=1;break;case"top":case"top-right":case"top-left":y=0}return{horizontalAlign:d,verticalAlign:y}}function Vie(g,d,y){const x=d.getMaxScale()*Pa,{maxImageWidth:k,maxImageHeight:R}=d.getMaxImageSize(g),z=Math.max(x,R*y);return{verticalLineContentWidth:Math.max(x,k*y),horizontalLineContentHeight:z}}function nF(g){switch(g){case"top":return 0;case"center":return .5;default:return 1}}function Hie(g,d,y){return!(g===o.al.horizontal||!d&&!tg(y)||d&&(zS[y]||(x=y,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(x)))));var x}function jie(g,d,y,x,k,R){const z=R[g.fontStack],$=function(Q,ae,fe,xe){if(Q&&Q.rect)return Q;const Te=ae[fe.fontStack],Pe=Te&&Te[xe];return Pe?{rect:null,metrics:Pe.metrics}:null}(z&&z[d],k,g,d);if($===null)return null;let K;if(y)K=x.verticalLineContentWidth-g.scale*Pa;else{const Q=nF(g.verticalAlign);K=(x.horizontalLineContentHeight-g.scale*Pa)*Q}return{rect:$.rect,metrics:$.metrics,baselineOffset:K}}function Uie(g,d,y,x,k){const R=k[g.imageName];if(!R)return null;const z=R.paddedRect,$=R.displaySize,K={width:$[0],height:$[1],left:is,top:-3,advance:d?$[1]:$[0]};let Q;if(d)Q=x.verticalLineContentWidth-$[1]*g.scale;else{const ae=nF(g.verticalAlign);Q=(x.horizontalLineContentHeight-$[1]*g.scale)*ae}return{rect:z,metrics:K,baselineOffset:Q,imageOffset:(d?$[0]:$[1])*g.scale-Pa*y}}function Wie(g,d,y,x){if(x===0)return;const k=g[y],R=(g[y].x+k.metrics.advance*k.scale)*x;for(let z=d;z<=y;z++)g[z].x-=R}function Gie(g,d,y){const{horizontalAlign:x,verticalAlign:k}=hA(y),R=d[0]-g.displaySize[0]*x,z=d[1]-g.displaySize[1]*k;return{image:g,top:z,bottom:z+g.displaySize[1],left:R,right:R+g.displaySize[0]}}function rF(g){var d,y;let x=g.left,k=g.top,R=g.right-x,z=g.bottom-k;const $=(d=g.image.textFitWidth)!==null&&d!==void 0?d:"stretchOrShrink",K=(y=g.image.textFitHeight)!==null&&y!==void 0?y:"stretchOrShrink",Q=(g.image.content[2]-g.image.content[0])/(g.image.content[3]-g.image.content[1]);if(K==="proportional"){if($==="stretchOnly"&&R/z<Q||$==="proportional"){const ae=Math.ceil(z*Q);x*=ae/R,R=ae}}else if($==="proportional"&&K==="stretchOnly"&&Q!==0&&R/z>Q){const ae=Math.ceil(R/Q);k*=ae/z,z=ae}return{x1:x,y1:k,x2:x+R,y2:k+z}}function iF(g,d,y,x,k,R){const z=g.image;let $;if(z.content){const We=z.content,nt=z.pixelRatio||1;$=[We[0]/nt,We[1]/nt,z.displaySize[0]-We[2]/nt,z.displaySize[1]-We[3]/nt]}const K=d.left*R,Q=d.right*R;let ae,fe,xe,Te;y==="width"||y==="both"?(Te=k[0]+K-x[3],fe=k[0]+Q+x[1]):(Te=k[0]+(K+Q-z.displaySize[0])/2,fe=Te+z.displaySize[0]);const Pe=d.top*R,Re=d.bottom*R;return y==="height"||y==="both"?(ae=k[1]+Pe-x[0],xe=k[1]+Re+x[2]):(ae=k[1]+(Pe+Re-z.displaySize[1])/2,xe=ae+z.displaySize[1]),{image:z,top:ae,right:fe,bottom:xe,left:Te,collisionPadding:$}}const ub=255,bc=128,Ah=ub*bc;function aF(g,d){const{expression:y}=d;if(y.kind==="constant")return{kind:"constant",layoutSize:y.evaluate(new Fi(g+1))};if(y.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:k}=y;let R=0;for(;R<x.length&&x[R]<=g;)R++;R=Math.max(0,R-1);let z=R;for(;z<x.length&&x[z]<g+1;)z++;z=Math.min(x.length-1,z);const $=x[R],K=x[z];return y.kind==="composite"?{kind:"composite",minZoom:$,maxZoom:K,interpolationType:k}:{kind:"camera",minZoom:$,maxZoom:K,minSize:y.evaluate(new Fi($)),maxSize:y.evaluate(new Fi(K)),interpolationType:k}}}function fA(g,d,y){let x="never";const k=g.get(d);return k?x=k:g.get(y)&&(x="always"),x}const Kie=ib.VectorTileFeature.types,qie=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function BS(g,d,y,x,k,R,z,$,K,Q,ae,fe,xe){const Te=$?Math.min(Ah,Math.round($[0])):0,Pe=$?Math.min(Ah,Math.round($[1])):0;g.emplaceBack(d,y,Math.round(32*x),Math.round(32*k),R,z,(Te<<1)+(K?1:0),Pe,16*Q,16*ae,256*fe,256*xe)}function pA(g,d,y){g.emplaceBack(d.x,d.y,y),g.emplaceBack(d.x,d.y,y),g.emplaceBack(d.x,d.y,y),g.emplaceBack(d.x,d.y,y)}function Zie(g){for(const d of g.sections)if(HE(d.text))return!0;return!1}class vA{constructor(d){this.layoutVertexArray=new Ut,this.indexArray=new Sn,this.programConfigurations=d,this.segments=new br,this.dynamicLayoutVertexArray=new nn,this.opacityVertexArray=new an,this.hasVisibleVertices=!1,this.placedSymbolArray=new ne}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(d,y,x,k){this.isEmpty()||(x&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Eie.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,y),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,Aie.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,qie,!0),this.opacityVertexBuffer.itemSize=1),(x||k)&&this.programConfigurations.upload(d))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$n("SymbolBuffers",vA);class mA{constructor(d,y,x){this.layoutVertexArray=new d,this.layoutAttributes=y,this.indexArray=new x,this.segments=new br,this.collisionVertexArray=new An}upload(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,Pie.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$n("CollisionBuffers",mA);class fg{constructor(d){this.collisionBoxArray=d.collisionBoxArray,this.zoom=d.zoom,this.overscaling=d.overscaling,this.layers=d.layers,this.layerIds=this.layers.map(z=>z.id),this.index=d.index,this.pixelRatio=d.pixelRatio,this.sourceLayerIndex=d.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const y=this.layers[0]._unevaluatedLayout._values;this.textSizeData=aF(this.zoom,y["text-size"]),this.iconSizeData=aF(this.zoom,y["icon-size"]);const x=this.layers[0].layout,k=x.get("symbol-sort-key"),R=x.get("symbol-z-order");this.canOverlap=fA(x,"text-overlap","text-allow-overlap")!=="never"||fA(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!k.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(z=>o.al[z])),this.stateDependentLayerIds=this.layers.filter(z=>z.isStateDependent()).map(z=>z.id),this.sourceID=d.sourceID}createArrays(){this.text=new vA(new kd(this.layers,this.zoom,d=>/^text/.test(d))),this.icon=new vA(new kd(this.layers,this.zoom,d=>/^icon/.test(d))),this.glyphOffsetArray=new _e,this.lineVertexArray=new Ie,this.symbolInstances=new ye,this.textAnchorOffsets=new Ye}calculateGlyphDependencies(d,y,x,k,R){for(let z=0;z<d.length;z++)if(y[d.charCodeAt(z)]=!0,(x||k)&&R){const $=sb[d.charAt(z)];$&&(y[$.charCodeAt(0)]=!0)}}populate(d,y,x){const k=this.layers[0],R=k.layout,z=R.get("text-font"),$=R.get("text-field"),K=R.get("icon-image"),Q=($.value.kind!=="constant"||$.value.value instanceof Do&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),ae=K.value.kind!=="constant"||!!K.value.value||Object.keys(K.parameters).length>0,fe=R.get("symbol-sort-key");if(this.features=[],!Q&&!ae)return;const xe=y.iconDependencies,Te=y.glyphDependencies,Pe=y.availableImages,Re=new Fi(this.zoom);for(const{feature:We,id:nt,index:wt,sourceLayerIndex:ot}of d){const Se=k._featureFilter.needGeometry,He=_c(We,Se);if(!k._featureFilter.filter(Re,He,x))continue;let ut,jt;if(Se||(He.geometry=rs(We)),Q){const qt=k.getValueAndResolveTokens("text-field",He,x,Pe),Jt=Do.factory(qt),wn=this.hasRTLText=this.hasRTLText||Zie(Jt);(!wn||mc.getRTLTextPluginStatus()==="unavailable"||wn&&mc.isParsed())&&(ut=Lie(Jt,k,He))}if(ae){const qt=k.getValueAndResolveTokens("icon-image",He,x,Pe);jt=qt instanceof ts?qt:ts.fromString(qt)}if(!ut&&!jt)continue;const vn=this.sortFeaturesByKey?fe.evaluate(He,{},x):void 0;if(this.features.push({id:nt,text:ut,icon:jt,index:wt,sourceLayerIndex:ot,geometry:He.geometry,properties:We.properties,type:Kie[We.type],sortKey:vn}),jt&&(xe[jt.name]=!0),ut){const qt=z.evaluate(He,{},x).join(","),Jt=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.al.vertical)>=0;for(const wn of ut.sections)if(wn.image)xe[wn.image.name]=!0;else{const mn=Qm(ut.toString()),Cn=wn.fontStack||qt,rn=Te[Cn]=Te[Cn]||{};this.calculateGlyphDependencies(wn.text,rn,Jt,this.allowVerticalPlacement,mn)}}}R.get("symbol-placement")==="line"&&(this.features=function(We){const nt={},wt={},ot=[];let Se=0;function He(qt){ot.push(We[qt]),Se++}function ut(qt,Jt,wn){const mn=wt[qt];return delete wt[qt],wt[Jt]=mn,ot[mn].geometry[0].pop(),ot[mn].geometry[0]=ot[mn].geometry[0].concat(wn[0]),mn}function jt(qt,Jt,wn){const mn=nt[Jt];return delete nt[Jt],nt[qt]=mn,ot[mn].geometry[0].shift(),ot[mn].geometry[0]=wn[0].concat(ot[mn].geometry[0]),mn}function vn(qt,Jt,wn){const mn=wn?Jt[0][Jt[0].length-1]:Jt[0][0];return`${qt}:${mn.x}:${mn.y}`}for(let qt=0;qt<We.length;qt++){const Jt=We[qt],wn=Jt.geometry,mn=Jt.text?Jt.text.toString():null;if(!mn){He(qt);continue}const Cn=vn(mn,wn),rn=vn(mn,wn,!0);if(Cn in wt&&rn in nt&&wt[Cn]!==nt[rn]){const Gn=jt(Cn,rn,wn),cr=ut(Cn,rn,ot[Gn].geometry);delete nt[Cn],delete wt[rn],wt[vn(mn,ot[cr].geometry,!0)]=cr,ot[Gn].geometry=null}else Cn in wt?ut(Cn,rn,wn):rn in nt?jt(Cn,rn,wn):(He(qt),nt[Cn]=Se-1,wt[rn]=Se-1)}return ot.filter(qt=>qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((We,nt)=>We.sortKey-nt.sortKey)}update(d,y,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,y,this.layers,x),this.icon.programConfigurations.updatePaintArrays(d,y,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(d,y){const x=this.lineVertexArray.length;if(d.segment!==void 0){let k=d.dist(y[d.segment+1]),R=d.dist(y[d.segment]);const z={};for(let $=d.segment+1;$<y.length;$++)z[$]={x:y[$].x,y:y[$].y,tileUnitDistanceFromAnchor:k},$<y.length-1&&(k+=y[$+1].dist(y[$]));for(let $=d.segment||0;$>=0;$--)z[$]={x:y[$].x,y:y[$].y,tileUnitDistanceFromAnchor:R},$>0&&(R+=y[$-1].dist(y[$]));for(let $=0;$<y.length;$++){const K=z[$];this.lineVertexArray.emplaceBack(K.x,K.y,K.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(d,y,x,k,R,z,$,K,Q,ae,fe,xe){const Te=d.indexArray,Pe=d.layoutVertexArray,Re=d.segments.prepareSegment(4*y.length,Pe,Te,this.canOverlap?z.sortKey:void 0),We=this.glyphOffsetArray.length,nt=Re.vertexLength,wt=this.allowVerticalPlacement&&$===o.al.vertical?Math.PI/2:0,ot=z.text&&z.text.sections;for(let Se=0;Se<y.length;Se++){const{tl:He,tr:ut,bl:jt,br:vn,tex:qt,pixelOffsetTL:Jt,pixelOffsetBR:wn,minFontScaleX:mn,minFontScaleY:Cn,glyphOffset:rn,isSDF:Gn,sectionIndex:cr}=y[Se],or=Re.vertexLength,Zn=rn[1];BS(Pe,K.x,K.y,He.x,Zn+He.y,qt.x,qt.y,x,Gn,Jt.x,Jt.y,mn,Cn),BS(Pe,K.x,K.y,ut.x,Zn+ut.y,qt.x+qt.w,qt.y,x,Gn,wn.x,Jt.y,mn,Cn),BS(Pe,K.x,K.y,jt.x,Zn+jt.y,qt.x,qt.y+qt.h,x,Gn,Jt.x,wn.y,mn,Cn),BS(Pe,K.x,K.y,vn.x,Zn+vn.y,qt.x+qt.w,qt.y+qt.h,x,Gn,wn.x,wn.y,mn,Cn),pA(d.dynamicLayoutVertexArray,K,wt),Te.emplaceBack(or,or+2,or+1),Te.emplaceBack(or+1,or+2,or+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),Se!==y.length-1&&cr===y[Se+1].sectionIndex||d.programConfigurations.populatePaintArrays(Pe.length,z,z.index,{},xe,ot&&ot[cr])}d.placedSymbolArray.emplaceBack(K.x,K.y,We,this.glyphOffsetArray.length-We,nt,Q,ae,K.segment,x?x[0]:0,x?x[1]:0,k[0],k[1],$,0,!1,0,fe)}_addCollisionDebugVertex(d,y,x,k,R,z){return y.emplaceBack(0,0),d.emplaceBack(x.x,x.y,k,R,Math.round(z.x),Math.round(z.y))}addCollisionDebugVertices(d,y,x,k,R,z,$){const K=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),Q=K.vertexLength,ae=R.layoutVertexArray,fe=R.collisionVertexArray,xe=$.anchorX,Te=$.anchorY;this._addCollisionDebugVertex(ae,fe,z,xe,Te,new _(d,y)),this._addCollisionDebugVertex(ae,fe,z,xe,Te,new _(x,y)),this._addCollisionDebugVertex(ae,fe,z,xe,Te,new _(x,k)),this._addCollisionDebugVertex(ae,fe,z,xe,Te,new _(d,k)),K.vertexLength+=4;const Pe=R.indexArray;Pe.emplaceBack(Q,Q+1),Pe.emplaceBack(Q+1,Q+2),Pe.emplaceBack(Q+2,Q+3),Pe.emplaceBack(Q+3,Q),K.primitiveLength+=4}addDebugCollisionBoxes(d,y,x,k){for(let R=d;R<y;R++){const z=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,k?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mA(tn,GB.members,pn),this.iconCollisionBox=new mA(tn,GB.members,pn);for(let d=0;d<this.symbolInstances.length;d++){const y=this.symbolInstances.get(d);this.addDebugCollisionBoxes(y.textBoxStartIndex,y.textBoxEndIndex,y,!0),this.addDebugCollisionBoxes(y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y,!0),this.addDebugCollisionBoxes(y.iconBoxStartIndex,y.iconBoxEndIndex,y,!1),this.addDebugCollisionBoxes(y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y,!1)}}_deserializeCollisionBoxesForSymbol(d,y,x,k,R,z,$,K,Q){const ae={};for(let fe=y;fe<x;fe++){const xe=d.get(fe);ae.textBox={x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,anchorPointX:xe.anchorPointX,anchorPointY:xe.anchorPointY},ae.textFeatureIndex=xe.featureIndex;break}for(let fe=k;fe<R;fe++){const xe=d.get(fe);ae.verticalTextBox={x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,anchorPointX:xe.anchorPointX,anchorPointY:xe.anchorPointY},ae.verticalTextFeatureIndex=xe.featureIndex;break}for(let fe=z;fe<$;fe++){const xe=d.get(fe);ae.iconBox={x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,anchorPointX:xe.anchorPointX,anchorPointY:xe.anchorPointY},ae.iconFeatureIndex=xe.featureIndex;break}for(let fe=K;fe<Q;fe++){const xe=d.get(fe);ae.verticalIconBox={x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,anchorPointX:xe.anchorPointX,anchorPointY:xe.anchorPointY},ae.verticalIconFeatureIndex=xe.featureIndex;break}return ae}deserializeCollisionBoxes(d){this.collisionArrays=[];for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(d,y){const x=d.placedSymbolArray.get(y),k=x.vertexStartIndex+4*x.numGlyphs;for(let R=x.vertexStartIndex;R<k;R+=4)d.indexArray.emplaceBack(R,R+2,R+1),d.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const y=Math.sin(d),x=Math.cos(d),k=[],R=[],z=[];for(let $=0;$<this.symbolInstances.length;++$){z.push($);const K=this.symbolInstances.get($);k.push(0|Math.round(y*K.anchorX+x*K.anchorY)),R.push(K.featureIndex)}return z.sort(($,K)=>k[$]-k[K]||R[K]-R[$]),z}addToSortKeyRanges(d,y){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===y?x.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:y,symbolInstanceStart:d,symbolInstanceEnd:d+1})}sortFeatures(d){if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const y of this.symbolInstanceIndexes){const x=this.symbolInstances.get(y);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((k,R,z)=>{k>=0&&z.indexOf(k)===R&&this.addIndicesForPlacedSymbol(this.text,k)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let oF,sF;$n("SymbolBucket",fg,{omit:["layers","collisionBoxArray","features","compareText"]}),fg.MAX_GLYPHS=65535,fg.addDynamicAttributes=pA;var gA={get paint(){return sF=sF||new zo({"icon-opacity":new hr(Ae.paint_symbol["icon-opacity"]),"icon-color":new hr(Ae.paint_symbol["icon-color"]),"icon-halo-color":new hr(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new hr(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hr(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new Jn(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jn(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new hr(Ae.paint_symbol["text-opacity"]),"text-color":new hr(Ae.paint_symbol["text-color"],{runtimeType:gr,getOverride:g=>g.textColor,hasOverride:g=>!!g.textColor}),"text-halo-color":new hr(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new hr(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new hr(Ae.paint_symbol["text-halo-blur"]),"text-translate":new Jn(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new Jn(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return oF=oF||new zo({"symbol-placement":new Jn(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new Jn(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jn(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hr(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jn(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jn(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jn(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jn(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jn(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jn(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new hr(Ae.layout_symbol["icon-size"]),"icon-text-fit":new Jn(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jn(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new hr(Ae.layout_symbol["icon-image"]),"icon-rotate":new hr(Ae.layout_symbol["icon-rotate"]),"icon-padding":new hr(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new Jn(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new hr(Ae.layout_symbol["icon-offset"]),"icon-anchor":new hr(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jn(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jn(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jn(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new hr(Ae.layout_symbol["text-field"]),"text-font":new hr(Ae.layout_symbol["text-font"]),"text-size":new hr(Ae.layout_symbol["text-size"]),"text-max-width":new hr(Ae.layout_symbol["text-max-width"]),"text-line-height":new Jn(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new hr(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new hr(Ae.layout_symbol["text-justify"]),"text-radial-offset":new hr(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jn(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new hr(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new hr(Ae.layout_symbol["text-anchor"]),"text-max-angle":new Jn(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new Jn(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new hr(Ae.layout_symbol["text-rotate"]),"text-padding":new Jn(Ae.layout_symbol["text-padding"]),"text-keep-upright":new Jn(Ae.layout_symbol["text-keep-upright"]),"text-transform":new hr(Ae.layout_symbol["text-transform"]),"text-offset":new hr(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new Jn(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new Jn(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new Jn(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new Jn(Ae.layout_symbol["text-optional"])})}};class lF{constructor(d){if(d.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=d.property.overrides?d.property.overrides.runtimeType:Br,this.defaultValue=d}evaluate(d){if(d.formattedSection){const y=this.defaultValue.property.overrides;if(y&&y.hasOverride(d.formattedSection))return y.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default}eachChild(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$n("FormatSectionOverride",lF,{omit:["defaultValue"]});class FS extends Tl{constructor(d){super(d,gA)}recalculate(d,y){if(super.recalculate(d,y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const k=[];for(const R of x)k.indexOf(R)<0&&k.push(R);this.layout._values["text-writing-mode"]=k}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(d,y,x,k){const R=this.layout.get(d).evaluate(y,{},x,k),z=this._unevaluatedLayout._values[d];return z.isDataDriven()||_d(z.value)||!R?R:function($,K){return K.replace(/{([^{}]+)}/g,(Q,ae)=>$&&ae in $?String($[ae]):"")}(y.properties,R)}createBucket(d){return new fg(d)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const d of gA.paint.overridableProperties){if(!FS.hasPaintOverride(this.layout,d))continue;const y=this.paint.get(d),x=new lF(y),k=new y_(x,y.property.specification);let R=null;R=y.value.kind==="constant"||y.value.kind==="source"?new __("source",k):new b_("composite",k,y.value.zoomStops),this.paint._values[d]=new Cl(y.property,R,y.parameters)}}_handleOverridablePaintPropertyUpdate(d,y,x){return!(!this.layout||y.isDataDriven()||x.isDataDriven())&&FS.hasPaintOverride(this.layout,d)}static hasPaintOverride(d,y){const x=d.get("text-field"),k=gA.paint.properties[y];let R=!1;const z=$=>{for(const K of $)if(k.overrides&&k.overrides.hasOverride(K))return void(R=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Do)z(x.value.value.sections);else if(x.value.kind==="source"){const $=Q=>{R||(Q instanceof hc&&la(Q.value)===je?z(Q.value.sections):Q instanceof Dm?z(Q.sections):Q.eachChild($))},K=x.value;K._styleExpression&&$(K._styleExpression.expression)}return R}}let uF;var Yie={get paint(){return uF=uF||new zo({"background-color":new Jn(Ae.paint_background["background-color"]),"background-pattern":new N_(Ae.paint_background["background-pattern"]),"background-opacity":new Jn(Ae.paint_background["background-opacity"])})}};class Xie extends Tl{constructor(d){super(d,Yie)}}let cF;var Jie={get paint(){return cF=cF||new zo({"raster-opacity":new Jn(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jn(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jn(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jn(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new Jn(Ae.paint_raster["raster-saturation"]),"raster-contrast":new Jn(Ae.paint_raster["raster-contrast"]),"raster-resampling":new Jn(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new Jn(Ae.paint_raster["raster-fade-duration"])})}};class Qie extends Tl{constructor(d){super(d,Jie)}}class eae extends Tl{constructor(d){super(d,{}),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=d}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class tae{constructor(d){this._methodToThrottle=d,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const nae={once:!0},yA=63710088e-1;class Ph{constructor(d,y){if(isNaN(d)||isNaN(y))throw new Error(`Invalid LngLat object: (${d}, ${y})`);if(this.lng=+d,this.lat=+y,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ph(et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(d){const y=Math.PI/180,x=this.lat*y,k=d.lat*y,R=Math.sin(x)*Math.sin(k)+Math.cos(x)*Math.cos(k)*Math.cos((d.lng-this.lng)*y);return yA*Math.acos(Math.min(R,1))}static convert(d){if(d instanceof Ph)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new Ph(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new Ph(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dF=2*Math.PI*yA;function hF(g){return dF*Math.cos(g*Math.PI/180)}function fF(g){return(180+g)/360}function pF(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function vF(g,d){return g/hF(d)}function _A(g){return 360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90}function mF(g,d){return g*hF(_A(d))}class cb{constructor(d,y,x=0){this.x=+d,this.y=+y,this.z=+x}static fromLngLat(d,y=0){const x=Ph.convert(d);return new cb(fF(x.lng),pF(x.lat),vF(y,x.lat))}toLngLat(){return new Ph(360*this.x-180,_A(this.y))}toAltitude(){return mF(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/dF*(d=_A(this.y),1/Math.cos(d*Math.PI/180));var d}}function gF(g,d,y){var x=2*Math.PI*6378137/256/Math.pow(2,y);return[g*x-2*Math.PI*6378137/2,d*x-2*Math.PI*6378137/2]}class bA{constructor(d,y,x){if(!function(k,R,z){return!(k<0||k>25||z<0||z>=Math.pow(2,k)||R<0||R>=Math.pow(2,k))}(d,y,x))throw new Error(`x=${y}, y=${x}, z=${d} outside of bounds. 0<=x<${Math.pow(2,d)}, 0<=y<${Math.pow(2,d)} 0<=z<=25 `);this.z=d,this.x=y,this.y=x,this.key=pg(0,d,d,y,x)}equals(d){return this.z===d.z&&this.x===d.x&&this.y===d.y}url(d,y,x){const k=(z=this.y,$=this.z,K=gF(256*(R=this.x),256*(z=Math.pow(2,$)-z-1),$),Q=gF(256*(R+1),256*(z+1),$),K[0]+","+K[1]+","+Q[0]+","+Q[1]);var R,z,$,K,Q;const ae=function(fe,xe,Te){let Pe,Re="";for(let We=fe;We>0;We--)Pe=1<<We-1,Re+=(xe&Pe?1:0)+(Te&Pe?2:0);return Re}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,y>1?"@2x":"").replace(/{quadkey}/g,ae).replace(/{bbox-epsg-3857}/g,k)}isChildOf(d){const y=this.z-d.z;return y>0&&d.x===this.x>>y&&d.y===this.y>>y}getTilePoint(d){const y=Math.pow(2,this.z);return new _((d.x*y-this.x)*re,(d.y*y-this.y)*re)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yF{constructor(d,y){this.wrap=d,this.canonical=y,this.key=pg(d,y.z,y.z,y.x,y.y)}}class il{constructor(d,y,x,k,R){if(this.terrainRttPosMatrix32f=null,d<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${d}; z = ${x}`);this.overscaledZ=d,this.wrap=y,this.canonical=new bA(x,+k,+R),this.key=pg(y,d,x,k,R)}clone(){return new il(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)}scaledTo(d){if(d>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${d}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-d;return d>this.canonical.z?new il(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new il(d,this.wrap,d,this.canonical.x>>y,this.canonical.y>>y)}calculateScaledKey(d,y){if(d>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${d}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-d;return d>this.canonical.z?pg(this.wrap*+y,d,this.canonical.z,this.canonical.x,this.canonical.y):pg(this.wrap*+y,d,d,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(d){if(d.wrap!==this.wrap)return!1;const y=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>y&&d.canonical.y===this.canonical.y>>y}children(d){if(this.overscaledZ>=d)return[new il(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const y=this.canonical.z+1,x=2*this.canonical.x,k=2*this.canonical.y;return[new il(y,this.wrap,y,x,k),new il(y,this.wrap,y,x+1,k),new il(y,this.wrap,y,x,k+1),new il(y,this.wrap,y,x+1,k+1)]}isLessThan(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))}wrapped(){return new il(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(d){return new il(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yF(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(d){return this.canonical.getTilePoint(new cb(d.x-this.wrap,d.y))}}function pg(g,d,y,x,k){(g*=2)<0&&(g=-1*g-1);const R=1<<y;return(R*R*g+R*k+x).toString(36)+y.toString(36)+d.toString(36)}$n("CanonicalTileID",bA),$n("OverscaledTileID",il,{omit:["terrainRttPosMatrix32f"]});class _F{constructor(d,y,x,k=1,R=1,z=1,$=0){if(this.uid=d,y.height!==y.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void Le(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=y.height;const K=this.dim=y.height-2;switch(this.data=new Uint32Array(y.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=k,this.greenFactor=R,this.blueFactor=z,this.baseShift=$;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Q=0;Q<K;Q++)this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q)],this.data[this._idx(K,Q)]=this.data[this._idx(K-1,Q)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q,0)],this.data[this._idx(Q,K)]=this.data[this._idx(Q,K-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(K,-1)]=this.data[this._idx(K-1,0)],this.data[this._idx(-1,K)]=this.data[this._idx(0,K-1)],this.data[this._idx(K,K)]=this.data[this._idx(K-1,K-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<K;Q++)for(let ae=0;ae<K;ae++){const fe=this.get(Q,ae);fe>this.max&&(this.max=fe),fe<this.min&&(this.min=fe)}}get(d,y){const x=new Uint8Array(this.data.buffer),k=4*this._idx(d,y);return this.unpack(x[k],x[k+1],x[k+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(d,y){if(d<-1||d>=this.dim+1||y<-1||y>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(y+1)*this.stride+(d+1)}unpack(d,y,x){return d*this.redFactor+y*this.greenFactor+x*this.blueFactor-this.baseShift}getPixels(){return new rl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(d,y,x){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");let k=y*this.dim,R=y*this.dim+this.dim,z=x*this.dim,$=x*this.dim+this.dim;switch(y){case-1:k=R-1;break;case 1:R=k+1}switch(x){case-1:z=$-1;break;case 1:$=z+1}const K=-y*this.dim,Q=-x*this.dim;for(let ae=z;ae<$;ae++)for(let fe=k;fe<R;fe++)this.data[this._idx(fe,ae)]=d.data[this._idx(fe+K,ae+Q)]}}$n("DEMData",_F);class bF{constructor(d){this._stringToNumber={},this._numberToString=[];for(let y=0;y<d.length;y++){const x=d[y];this._stringToNumber[x]=y,this._numberToString[y]=x}}encode(d){return this._stringToNumber[d]}decode(d){if(d>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${d} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[d]}}class wF{constructor(d,y,x,k,R){this.type="Feature",this._vectorTileFeature=d,d._z=y,d._x=x,d._y=k,this.properties=d.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(d){this._geometry=d}toJSON(){const d={geometry:this.geometry};for(const y in this)y!=="_geometry"&&y!=="_vectorTileFeature"&&(d[y]=this[y]);return d}}class xF{constructor(d,y){this.tileID=d,this.x=d.canonical.x,this.y=d.canonical.y,this.z=d.canonical.z,this.grid=new fu(re,16,0),this.grid3D=new fu(re,16,0),this.featureIndexArray=new tt,this.promoteId=y}insert(d,y,x,k,R,z){const $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,k,R);const K=z?this.grid3D:this.grid;for(let Q=0;Q<y.length;Q++){const ae=y[Q],fe=[1/0,1/0,-1/0,-1/0];for(let xe=0;xe<ae.length;xe++){const Te=ae[xe];fe[0]=Math.min(fe[0],Te.x),fe[1]=Math.min(fe[1],Te.y),fe[2]=Math.max(fe[2],Te.x),fe[3]=Math.max(fe[3],Te.y)}fe[0]<re&&fe[1]<re&&fe[2]>=0&&fe[3]>=0&&K.insert($,fe[0],fe[1],fe[2],fe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ib.VectorTile(new lA(this.rawTileData)).layers,this.sourceLayerCoder=new bF(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(d,y,x,k){this.loadVTLayers();const R=d.params,z=re/d.tileSize/d.scale,$=w_(R.filter),K=d.queryGeometry,Q=d.queryPadding*z,ae=CF(K),fe=this.grid.query(ae.minX-Q,ae.minY-Q,ae.maxX+Q,ae.maxY+Q),xe=CF(d.cameraQueryGeometry),Te=this.grid3D.query(xe.minX-Q,xe.minY-Q,xe.maxX+Q,xe.maxY+Q,(We,nt,wt,ot)=>function(Se,He,ut,jt,vn){for(const Jt of Se)if(He<=Jt.x&&ut<=Jt.y&&jt>=Jt.x&&vn>=Jt.y)return!0;const qt=[new _(He,ut),new _(He,vn),new _(jt,vn),new _(jt,ut)];if(Se.length>2){for(const Jt of qt)if(Ep(Se,Jt))return!0}for(let Jt=0;Jt<Se.length-1;Jt++)if(Ure(Se[Jt],Se[Jt+1],qt))return!0;return!1}(d.cameraQueryGeometry,We-Q,nt-Q,wt+Q,ot+Q));for(const We of Te)fe.push(We);fe.sort(rae);const Pe={};let Re;for(let We=0;We<fe.length;We++){const nt=fe[We];if(nt===Re)continue;Re=nt;const wt=this.featureIndexArray.get(nt);let ot=null;this.loadMatchingFeature(Pe,wt.bucketIndex,wt.sourceLayerIndex,wt.featureIndex,$,R.layers,R.availableImages,y,x,k,(Se,He,ut)=>(ot||(ot=rs(Se)),He.queryIntersectsFeature({queryGeometry:K,feature:Se,featureState:ut,geometry:ot,zoom:this.z,transform:d.transform,pixelsToTileUnits:z,pixelPosMatrix:d.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:d.getElevation})))}return Pe}loadMatchingFeature(d,y,x,k,R,z,$,K,Q,ae,fe){const xe=this.bucketLayerIDs[y];if(z&&!xe.some(We=>z.has(We)))return;const Te=this.sourceLayerCoder.decode(x),Pe=this.vtLayers[Te].feature(k);if(R.needGeometry){const We=_c(Pe,!0);if(!R.filter(new Fi(this.tileID.overscaledZ),We,this.tileID.canonical))return}else if(!R.filter(new Fi(this.tileID.overscaledZ),Pe))return;const Re=this.getId(Pe,Te);for(let We=0;We<xe.length;We++){const nt=xe[We];if(z&&!z.has(nt))continue;const wt=K[nt];if(!wt)continue;let ot={};Re&&ae&&(ot=ae.getState(wt.sourceLayer||"_geojsonTileLayer",Re));const Se=Ee({},Q[nt]);Se.paint=SF(Se.paint,wt.paint,Pe,ot,$),Se.layout=SF(Se.layout,wt.layout,Pe,ot,$);const He=!fe||fe(Pe,wt,ot);if(!He)continue;const ut=new wF(Pe,this.z,this.x,this.y,Re);ut.layer=Se;let jt=d[nt];jt===void 0&&(jt=d[nt]=[]),jt.push({featureIndex:k,feature:ut,intersectionZ:He})}}lookupSymbolFeatures(d,y,x,k,R,z,$,K){const Q={};this.loadVTLayers();const ae=w_(R);for(const fe of d)this.loadMatchingFeature(Q,x,k,fe,ae,z,$,K,y);return Q}hasLayer(d){for(const y of this.bucketLayerIDs)for(const x of y)if(d===x)return!0;return!1}getId(d,y){var x;let k=d.id;return this.promoteId&&(k=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[y]],typeof k=="boolean"&&(k=Number(k)),k===void 0&&(!((x=d.properties)===null||x===void 0)&&x.cluster)&&this.promoteId&&(k=Number(d.properties.cluster_id))),k}}function SF(g,d,y,x,k){return Ue(g,(R,z)=>{const $=d instanceof rg?d.get(z):null;return $&&$.evaluate?$.evaluate(y,x,k):$})}function CF(g){let d=1/0,y=1/0,x=-1/0,k=-1/0;for(const R of g)d=Math.min(d,R.x),y=Math.min(y,R.y),x=Math.max(x,R.x),k=Math.max(k,R.y);return{minX:d,minY:y,maxX:x,maxY:k}}function rae(g,d){return d-g}function TF(g,d,y,x,k){const R=[];for(let z=0;z<g.length;z++){const $=g[z];let K;for(let Q=0;Q<$.length-1;Q++){let ae=$[Q],fe=$[Q+1];ae.x<d&&fe.x<d||(ae.x<d?ae=new _(d,ae.y+(d-ae.x)/(fe.x-ae.x)*(fe.y-ae.y))._round():fe.x<d&&(fe=new _(d,ae.y+(d-ae.x)/(fe.x-ae.x)*(fe.y-ae.y))._round()),ae.y<y&&fe.y<y||(ae.y<y?ae=new _(ae.x+(y-ae.y)/(fe.y-ae.y)*(fe.x-ae.x),y)._round():fe.y<y&&(fe=new _(ae.x+(y-ae.y)/(fe.y-ae.y)*(fe.x-ae.x),y)._round()),ae.x>=x&&fe.x>=x||(ae.x>=x?ae=new _(x,ae.y+(x-ae.x)/(fe.x-ae.x)*(fe.y-ae.y))._round():fe.x>=x&&(fe=new _(x,ae.y+(x-ae.x)/(fe.x-ae.x)*(fe.y-ae.y))._round()),ae.y>=k&&fe.y>=k||(ae.y>=k?ae=new _(ae.x+(k-ae.y)/(fe.y-ae.y)*(fe.x-ae.x),k)._round():fe.y>=k&&(fe=new _(ae.x+(k-ae.y)/(fe.y-ae.y)*(fe.x-ae.x),k)._round()),K&&ae.equals(K[K.length-1])||(K=[ae],R.push(K)),K.push(fe)))))}}return R}$n("FeatureIndex",xF,{omit:["rawTileData","sourceLayerCoder"]});class Ih extends _{constructor(d,y,x,k){super(d,y),this.angle=x,k!==void 0&&(this.segment=k)}clone(){return new Ih(this.x,this.y,this.angle,this.segment)}}function MF(g,d,y,x,k){if(d.segment===void 0||y===0)return!0;let R=d,z=d.segment+1,$=0;for(;$>-y/2;){if(z--,z<0)return!1;$-=g[z].dist(R),R=g[z]}$+=g[z].dist(g[z+1]),z++;const K=[];let Q=0;for(;$<y/2;){const ae=g[z],fe=g[z+1];if(!fe)return!1;let xe=g[z-1].angleTo(ae)-ae.angleTo(fe);for(xe=Math.abs((xe+3*Math.PI)%(2*Math.PI)-Math.PI),K.push({distance:$,angleDelta:xe}),Q+=xe;$-K[0].distance>x;)Q-=K.shift().angleDelta;if(Q>k)return!1;z++,$+=ae.dist(fe)}return!0}function kF(g){let d=0;for(let y=0;y<g.length-1;y++)d+=g[y].dist(g[y+1]);return d}function EF(g,d,y){return g?.6*d*y:0}function AF(g,d){return Math.max(g?g.right-g.left:0,d?d.right-d.left:0)}function iae(g,d,y,x,k,R){const z=EF(y,k,R),$=AF(y,x)*R;let K=0;const Q=kF(g)/2;for(let ae=0;ae<g.length-1;ae++){const fe=g[ae],xe=g[ae+1],Te=fe.dist(xe);if(K+Te>Q){const Pe=(Q-K)/Te,Re=zi.number(fe.x,xe.x,Pe),We=zi.number(fe.y,xe.y,Pe),nt=new Ih(Re,We,xe.angleTo(fe),ae);return nt._round(),!z||MF(g,nt,$,z,d)?nt:void 0}K+=Te}}function aae(g,d,y,x,k,R,z,$,K){const Q=EF(x,R,z),ae=AF(x,k),fe=ae*z,xe=g[0].x===0||g[0].x===K||g[0].y===0||g[0].y===K;return d-fe<d/4&&(d=fe+d/4),PF(g,xe?d/2*$%d:(ae/2+2*R)*z*$%d,d,Q,y,fe,xe,!1,K)}function PF(g,d,y,x,k,R,z,$,K){const Q=R/2,ae=kF(g);let fe=0,xe=d-y,Te=[];for(let Pe=0;Pe<g.length-1;Pe++){const Re=g[Pe],We=g[Pe+1],nt=Re.dist(We),wt=We.angleTo(Re);for(;xe+y<fe+nt;){xe+=y;const ot=(xe-fe)/nt,Se=zi.number(Re.x,We.x,ot),He=zi.number(Re.y,We.y,ot);if(Se>=0&&Se<K&&He>=0&&He<K&&xe-Q>=0&&xe+Q<=ae){const ut=new Ih(Se,He,wt,Pe);ut._round(),x&&!MF(g,ut,R,x,k)||Te.push(ut)}}fe+=nt}return $||Te.length||z||(Te=PF(g,fe/2,y,x,k,R,z,!0,K)),Te}$n("Anchor",Ih);const db=is;function IF(g,d,y,x){const k=[],R=g.image,z=R.pixelRatio,$=R.paddedRect.w-2*db,K=R.paddedRect.h-2*db;let Q={x1:g.left,y1:g.top,x2:g.right,y2:g.bottom};const ae=R.stretchX||[[0,$]],fe=R.stretchY||[[0,K]],xe=(rn,Gn)=>rn+Gn[1]-Gn[0],Te=ae.reduce(xe,0),Pe=fe.reduce(xe,0),Re=$-Te,We=K-Pe;let nt=0,wt=Te,ot=0,Se=Pe,He=0,ut=Re,jt=0,vn=We;if(R.content&&x){const rn=R.content,Gn=rn[2]-rn[0],cr=rn[3]-rn[1];(R.textFitWidth||R.textFitHeight)&&(Q=rF(g)),nt=NS(ae,0,rn[0]),ot=NS(fe,0,rn[1]),wt=NS(ae,rn[0],rn[2]),Se=NS(fe,rn[1],rn[3]),He=rn[0]-nt,jt=rn[1]-ot,ut=Gn-wt,vn=cr-Se}const qt=Q.x1,Jt=Q.y1,wn=Q.x2-qt,mn=Q.y2-Jt,Cn=(rn,Gn,cr,or)=>{const Zn=$S(rn.stretch-nt,wt,wn,qt),Wr=VS(rn.fixed-He,ut,rn.stretch,Te),ca=$S(Gn.stretch-ot,Se,mn,Jt),Ia=VS(Gn.fixed-jt,vn,Gn.stretch,Pe),ho=$S(cr.stretch-nt,wt,wn,qt),al=VS(cr.fixed-He,ut,cr.stretch,Te),as=$S(or.stretch-ot,Se,mn,Jt),Xa=VS(or.fixed-jt,vn,or.stretch,Pe),Qi=new _(Zn,ca),Ha=new _(ho,ca),Ja=new _(ho,as),Qa=new _(Zn,as),Bo=new _(Wr/z,Ia/z),ol=new _(al/z,Xa/z),ja=d*Math.PI/180;if(ja){const Ua=Math.sin(ja),Wa=Math.cos(ja),Ca=[Wa,-Ua,Ua,Wa];Qi._matMult(Ca),Ha._matMult(Ca),Qa._matMult(Ca),Ja._matMult(Ca)}const os=rn.stretch+rn.fixed,La=Gn.stretch+Gn.fixed;return{tl:Qi,tr:Ha,bl:Qa,br:Ja,tex:{x:R.paddedRect.x+db+os,y:R.paddedRect.y+db+La,w:cr.stretch+cr.fixed-os,h:or.stretch+or.fixed-La},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bo,pixelOffsetBR:ol,minFontScaleX:ut/z/wn,minFontScaleY:vn/z/mn,isSDF:y}};if(x&&(R.stretchX||R.stretchY)){const rn=LF(ae,Re,Te),Gn=LF(fe,We,Pe);for(let cr=0;cr<rn.length-1;cr++){const or=rn[cr],Zn=rn[cr+1];for(let Wr=0;Wr<Gn.length-1;Wr++)k.push(Cn(or,Gn[Wr],Zn,Gn[Wr+1]))}}else k.push(Cn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$+1},{fixed:0,stretch:K+1}));return k}function NS(g,d,y){let x=0;for(const k of g)x+=Math.max(d,Math.min(y,k[1]))-Math.max(d,Math.min(y,k[0]));return x}function LF(g,d,y){const x=[{fixed:-1,stretch:0}];for(const[k,R]of g){const z=x[x.length-1];x.push({fixed:k-z.stretch,stretch:z.stretch}),x.push({fixed:k-z.stretch,stretch:z.stretch+(R-k)})}return x.push({fixed:d+db,stretch:y}),x}function $S(g,d,y,x){return g/d*y+x}function VS(g,d,y,x){return g-d*y/x}class HS{constructor(d,y,x,k,R,z,$,K,Q,ae){var fe;if(this.boxStartIndex=d.length,Q){let xe=z.top,Te=z.bottom;const Pe=z.collisionPadding;Pe&&(xe-=Pe[1],Te+=Pe[3]);let Re=Te-xe;Re>0&&(Re=Math.max(10,Re),this.circleDiameter=Re)}else{const xe=!((fe=z.image)===null||fe===void 0)&&fe.content&&(z.image.textFitWidth||z.image.textFitHeight)?rF(z):{x1:z.left,y1:z.top,x2:z.right,y2:z.bottom};xe.y1=xe.y1*$-K[0],xe.y2=xe.y2*$+K[2],xe.x1=xe.x1*$-K[3],xe.x2=xe.x2*$+K[1];const Te=z.collisionPadding;if(Te&&(xe.x1-=Te[0]*$,xe.y1-=Te[1]*$,xe.x2+=Te[2]*$,xe.y2+=Te[3]*$),ae){const Pe=new _(xe.x1,xe.y1),Re=new _(xe.x2,xe.y1),We=new _(xe.x1,xe.y2),nt=new _(xe.x2,xe.y2),wt=ae*Math.PI/180;Pe._rotate(wt),Re._rotate(wt),We._rotate(wt),nt._rotate(wt),xe.x1=Math.min(Pe.x,Re.x,We.x,nt.x),xe.x2=Math.max(Pe.x,Re.x,We.x,nt.x),xe.y1=Math.min(Pe.y,Re.y,We.y,nt.y),xe.y2=Math.max(Pe.y,Re.y,We.y,nt.y)}d.emplaceBack(y.x,y.y,xe.x1,xe.y1,xe.x2,xe.y2,x,k,R)}this.boxEndIndex=d.length}}class oae{constructor(d=[],y=(x,k)=>x<k?-1:x>k?1:0){if(this.data=d,this.length=this.data.length,this.compare=y,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],y=this.data.pop();return--this.length>0&&(this.data[0]=y,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:y,compare:x}=this,k=y[d];for(;d>0;){const R=d-1>>1,z=y[R];if(x(k,z)>=0)break;y[d]=z,d=R}y[d]=k}_down(d){const{data:y,compare:x}=this,k=this.length>>1,R=y[d];for(;d<k;){let z=1+(d<<1);const $=z+1;if($<this.length&&x(y[$],y[z])<0&&(z=$),x(y[z],R)>=0)break;y[d]=y[z],d=z}y[d]=R}}function sae(g,d=1,y=!1){let x=1/0,k=1/0,R=-1/0,z=-1/0;const $=g[0];for(let Te=0;Te<$.length;Te++){const Pe=$[Te];(!Te||Pe.x<x)&&(x=Pe.x),(!Te||Pe.y<k)&&(k=Pe.y),(!Te||Pe.x>R)&&(R=Pe.x),(!Te||Pe.y>z)&&(z=Pe.y)}const K=Math.min(R-x,z-k);let Q=K/2;const ae=new oae([],lae);if(K===0)return new _(x,k);for(let Te=x;Te<R;Te+=K)for(let Pe=k;Pe<z;Pe+=K)ae.push(new vg(Te+Q,Pe+Q,Q,g));let fe=function(Te){let Pe=0,Re=0,We=0;const nt=Te[0];for(let wt=0,ot=nt.length,Se=ot-1;wt<ot;Se=wt++){const He=nt[wt],ut=nt[Se],jt=He.x*ut.y-ut.x*He.y;Re+=(He.x+ut.x)*jt,We+=(He.y+ut.y)*jt,Pe+=3*jt}return new vg(Re/Pe,We/Pe,0,Te)}(g),xe=ae.length;for(;ae.length;){const Te=ae.pop();(Te.d>fe.d||!fe.d)&&(fe=Te,y&&console.log("found best %d after %d probes",Math.round(1e4*Te.d)/1e4,xe)),Te.max-fe.d<=d||(Q=Te.h/2,ae.push(new vg(Te.p.x-Q,Te.p.y-Q,Q,g)),ae.push(new vg(Te.p.x+Q,Te.p.y-Q,Q,g)),ae.push(new vg(Te.p.x-Q,Te.p.y+Q,Q,g)),ae.push(new vg(Te.p.x+Q,Te.p.y+Q,Q,g)),xe+=4)}return y&&(console.log(`num probes: ${xe}`),console.log(`best distance: ${fe.d}`)),fe.p}function lae(g,d){return d.max-g.max}function vg(g,d,y,x){this.p=new _(g,d),this.h=y,this.d=function(k,R){let z=!1,$=1/0;for(let K=0;K<R.length;K++){const Q=R[K];for(let ae=0,fe=Q.length,xe=fe-1;ae<fe;xe=ae++){const Te=Q[ae],Pe=Q[xe];Te.y>k.y!=Pe.y>k.y&&k.x<(Pe.x-Te.x)*(k.y-Te.y)/(Pe.y-Te.y)+Te.x&&(z=!z),$=Math.min($,hB(k,Te,Pe))}}return(z?1:-1)*Math.sqrt($)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}var co;o.aB=void 0,(co=o.aB||(o.aB={}))[co.center=1]="center",co[co.left=2]="left",co[co.right=3]="right",co[co.top=4]="top",co[co.bottom=5]="bottom",co[co["top-left"]=6]="top-left",co[co["top-right"]=7]="top-right",co[co["bottom-left"]=8]="bottom-left",co[co["bottom-right"]=9]="bottom-right";const Lh=7,wA=Number.POSITIVE_INFINITY;function DF(g,d){return d[1]!==wA?function(y,x,k){let R=0,z=0;switch(x=Math.abs(x),k=Math.abs(k),y){case"top-right":case"top-left":case"top":z=k-Lh;break;case"bottom-right":case"bottom-left":case"bottom":z=-k+Lh}switch(y){case"top-right":case"bottom-right":case"right":R=-x;break;case"top-left":case"bottom-left":case"left":R=x}return[R,z]}(g,d[0],d[1]):function(y,x){let k=0,R=0;x<0&&(x=0);const z=x/Math.SQRT2;switch(y){case"top-right":case"top-left":R=z-Lh;break;case"bottom-right":case"bottom-left":R=-z+Lh;break;case"bottom":R=-x+Lh;break;case"top":R=x-Lh}switch(y){case"top-right":case"bottom-right":k=-z;break;case"top-left":case"bottom-left":k=z;break;case"left":k=x;break;case"right":k=-x}return[k,R]}(g,d[0])}function RF(g,d,y){var x;const k=g.layout,R=(x=k.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(d,{},y);if(R){const $=R.values,K=[];for(let Q=0;Q<$.length;Q+=2){const ae=K[Q]=$[Q],fe=$[Q+1].map(xe=>xe*Pa);ae.startsWith("top")?fe[1]-=Lh:ae.startsWith("bottom")&&(fe[1]+=Lh),K[Q+1]=fe}return new Za(K)}const z=k.get("text-variable-anchor");if(z){let $;$=g._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[k.get("text-radial-offset").evaluate(d,{},y)*Pa,wA]:k.get("text-offset").evaluate(d,{},y).map(Q=>Q*Pa);const K=[];for(const Q of z)K.push(Q,DF(Q,$));return new Za(K)}return null}function xA(g){switch(g){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uae(g,d,y,x,k,R,z,$,K,Q,ae,fe){let xe=R.textMaxSize.evaluate(d,{});xe===void 0&&(xe=z);const Te=g.layers[0].layout,Pe=Te.get("icon-offset").evaluate(d,{},ae),Re=zF(y.horizontal),We=z/24,nt=g.tilePixelRatio*We,wt=g.tilePixelRatio*xe/24,ot=g.tilePixelRatio*$,Se=g.tilePixelRatio*Te.get("symbol-spacing"),He=Te.get("text-padding")*g.tilePixelRatio,ut=function(cr,or,Zn,Wr=1){const ca=cr.get("icon-padding").evaluate(or,{},Zn),Ia=ca&&ca.values;return[Ia[0]*Wr,Ia[1]*Wr,Ia[2]*Wr,Ia[3]*Wr]}(Te,d,ae,g.tilePixelRatio),jt=Te.get("text-max-angle")/180*Math.PI,vn=Te.get("text-rotation-alignment")!=="viewport"&&Te.get("symbol-placement")!=="point",qt=Te.get("icon-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point",Jt=Te.get("symbol-placement"),wn=Se/2,mn=Te.get("icon-text-fit");let Cn;x&&mn!=="none"&&(g.allowVerticalPlacement&&y.vertical&&(Cn=iF(x,y.vertical,mn,Te.get("icon-text-fit-padding"),Pe,We)),Re&&(x=iF(x,Re,mn,Te.get("icon-text-fit-padding"),Pe,We)));const rn=ae?fe.line.getGranularityForZoomLevel(ae.z):1,Gn=(cr,or)=>{or.x<0||or.x>=re||or.y<0||or.y>=re||function(Zn,Wr,ca,Ia,ho,al,as,Xa,Qi,Ha,Ja,Qa,Bo,ol,ja,os,La,Ua,Wa,Ca,Vi,bu,mg,wu,hae){const gg=Zn.addToLineVertexArray(Wr,ca);let Ip,yg,_g,bg,$F=0,VF=0,HF=0,jF=0,PA=-1,IA=-1;const Ed={};let UF=uo("");if(Zn.allowVerticalPlacement&&Ia.vertical){const wo=Xa.layout.get("text-rotate").evaluate(Vi,{},wu)+90;_g=new HS(Qi,Wr,Ha,Ja,Qa,Ia.vertical,Bo,ol,ja,wo),as&&(bg=new HS(Qi,Wr,Ha,Ja,Qa,as,La,Ua,ja,wo))}if(ho){const wo=Xa.layout.get("icon-rotate").evaluate(Vi,{}),sl=Xa.layout.get("icon-text-fit")!=="none",Lp=IF(ho,wo,mg,sl),Su=as?IF(as,wo,mg,sl):void 0;yg=new HS(Qi,Wr,Ha,Ja,Qa,ho,La,Ua,!1,wo),$F=4*Lp.length;const Dp=Zn.iconSizeData;let wc=null;Dp.kind==="source"?(wc=[bc*Xa.layout.get("icon-size").evaluate(Vi,{})],wc[0]>Ah&&Le(`${Zn.layerIds[0]}: Value for "icon-size" is >= ${ub}. Reduce your "icon-size".`)):Dp.kind==="composite"&&(wc=[bc*bu.compositeIconSizes[0].evaluate(Vi,{},wu),bc*bu.compositeIconSizes[1].evaluate(Vi,{},wu)],(wc[0]>Ah||wc[1]>Ah)&&Le(`${Zn.layerIds[0]}: Value for "icon-size" is >= ${ub}. Reduce your "icon-size".`)),Zn.addSymbols(Zn.icon,Lp,wc,Ca,Wa,Vi,o.al.none,Wr,gg.lineStartIndex,gg.lineLength,-1,wu),PA=Zn.icon.placedSymbolArray.length-1,Su&&(VF=4*Su.length,Zn.addSymbols(Zn.icon,Su,wc,Ca,Wa,Vi,o.al.vertical,Wr,gg.lineStartIndex,gg.lineLength,-1,wu),IA=Zn.icon.placedSymbolArray.length-1)}const WF=Object.keys(Ia.horizontal);for(const wo of WF){const sl=Ia.horizontal[wo];if(!Ip){UF=uo(sl.text);const Su=Xa.layout.get("text-rotate").evaluate(Vi,{},wu);Ip=new HS(Qi,Wr,Ha,Ja,Qa,sl,Bo,ol,ja,Su)}const Lp=sl.positionedLines.length===1;if(HF+=OF(Zn,Wr,sl,al,Xa,ja,Vi,os,gg,Ia.vertical?o.al.horizontal:o.al.horizontalOnly,Lp?WF:[wo],Ed,PA,bu,wu),Lp)break}Ia.vertical&&(jF+=OF(Zn,Wr,Ia.vertical,al,Xa,ja,Vi,os,gg,o.al.vertical,["vertical"],Ed,IA,bu,wu));const fae=Ip?Ip.boxStartIndex:Zn.collisionBoxArray.length,pae=Ip?Ip.boxEndIndex:Zn.collisionBoxArray.length,vae=_g?_g.boxStartIndex:Zn.collisionBoxArray.length,mae=_g?_g.boxEndIndex:Zn.collisionBoxArray.length,gae=yg?yg.boxStartIndex:Zn.collisionBoxArray.length,yae=yg?yg.boxEndIndex:Zn.collisionBoxArray.length,_ae=bg?bg.boxStartIndex:Zn.collisionBoxArray.length,bae=bg?bg.boxEndIndex:Zn.collisionBoxArray.length;let xu=-1;const US=(wo,sl)=>wo&&wo.circleDiameter?Math.max(wo.circleDiameter,sl):sl;xu=US(Ip,xu),xu=US(_g,xu),xu=US(yg,xu),xu=US(bg,xu);const GF=xu>-1?1:0;GF&&(xu*=hae/Pa),Zn.glyphOffsetArray.length>=fg.MAX_GLYPHS&&Le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vi.sortKey!==void 0&&Zn.addToSortKeyRanges(Zn.symbolInstances.length,Vi.sortKey);const wae=RF(Xa,Vi,wu),[xae,Sae]=function(wo,sl){const Lp=wo.length,Su=sl==null?void 0:sl.values;if((Su==null?void 0:Su.length)>0)for(let Dp=0;Dp<Su.length;Dp+=2){const wc=Su[Dp+1];wo.emplaceBack(o.aB[Su[Dp]],wc[0],wc[1])}return[Lp,wo.length]}(Zn.textAnchorOffsets,wae);Zn.symbolInstances.emplaceBack(Wr.x,Wr.y,Ed.right>=0?Ed.right:-1,Ed.center>=0?Ed.center:-1,Ed.left>=0?Ed.left:-1,Ed.vertical||-1,PA,IA,UF,fae,pae,vae,mae,gae,yae,_ae,bae,Ha,HF,jF,$F,VF,GF,0,Bo,xu,xae,Sae)}(g,or,cr,y,x,k,Cn,g.layers[0],g.collisionBoxArray,d.index,d.sourceLayerIndex,g.index,nt,[He,He,He,He],vn,K,ot,ut,qt,Pe,d,R,Q,ae,z)};if(Jt==="line")for(const cr of TF(d.geometry,0,0,re,re)){const or=Pp(cr,rn),Zn=aae(or,Se,jt,y.vertical||Re,x,24,wt,g.overscaling,re);for(const Wr of Zn)Re&&cae(g,Re.text,wn,Wr)||Gn(or,Wr)}else if(Jt==="line-center"){for(const cr of d.geometry)if(cr.length>1){const or=Pp(cr,rn),Zn=iae(or,jt,y.vertical||Re,x,24,wt);Zn&&Gn(or,Zn)}}else if(d.type==="Polygon")for(const cr of Om(d.geometry,0)){const or=sae(cr,16);Gn(Pp(cr[0],rn,!0),new Ih(or.x,or.y,0))}else if(d.type==="LineString")for(const cr of d.geometry){const or=Pp(cr,rn);Gn(or,new Ih(or[0].x,or[0].y,0))}else if(d.type==="Point")for(const cr of d.geometry)for(const or of cr)Gn([or],new Ih(or.x,or.y,0))}function OF(g,d,y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe){const Re=function(wt,ot,Se,He,ut,jt,vn,qt){const Jt=He.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,wn=[];for(const mn of ot.positionedLines)for(const Cn of mn.positionedGlyphs){if(!Cn.rect)continue;const rn=Cn.rect||{};let Gn=Bie+1,cr=!0,or=1,Zn=0;const Wr=(ut||qt)&&Cn.vertical,ca=Cn.metrics.advance*Cn.scale/2;if(qt&&ot.verticalizable&&(Zn=mn.lineOffset/2-(Cn.imageName?-(Pa-Cn.metrics.width*Cn.scale)/2:(Cn.scale-1)*Pa)),Cn.imageName){const Ua=vn[Cn.imageName];cr=Ua.sdf,or=Ua.pixelRatio,Gn=is/or}const Ia=ut?[Cn.x+ca,Cn.y]:[0,0];let ho=ut?[0,0]:[Cn.x+ca+Se[0],Cn.y+Se[1]-Zn],al=[0,0];Wr&&(al=ho,ho=[0,0]);const as=Cn.metrics.isDoubleResolution?2:1,Xa=(Cn.metrics.left-Gn)*Cn.scale-ca+ho[0],Qi=(-Cn.metrics.top-Gn)*Cn.scale+ho[1],Ha=Xa+rn.w/as*Cn.scale/or,Ja=Qi+rn.h/as*Cn.scale/or,Qa=new _(Xa,Qi),Bo=new _(Ha,Qi),ol=new _(Xa,Ja),ja=new _(Ha,Ja);if(Wr){const Ua=new _(-ca,ca-RS),Wa=-Math.PI/2,Ca=Pa/2-ca,Vi=new _(5-RS-Ca,-(Cn.imageName?Ca:0)),bu=new _(...al);Qa._rotateAround(Wa,Ua)._add(Vi)._add(bu),Bo._rotateAround(Wa,Ua)._add(Vi)._add(bu),ol._rotateAround(Wa,Ua)._add(Vi)._add(bu),ja._rotateAround(Wa,Ua)._add(Vi)._add(bu)}if(Jt){const Ua=Math.sin(Jt),Wa=Math.cos(Jt),Ca=[Wa,-Ua,Ua,Wa];Qa._matMult(Ca),Bo._matMult(Ca),ol._matMult(Ca),ja._matMult(Ca)}const os=new _(0,0),La=new _(0,0);wn.push({tl:Qa,tr:Bo,bl:ol,br:ja,tex:rn,writingMode:ot.writingMode,glyphOffset:Ia,sectionIndex:Cn.sectionIndex,isSDF:cr,pixelOffsetTL:os,pixelOffsetBR:La,minFontScaleX:0,minFontScaleY:0})}return wn}(0,y,$,k,R,z,x,g.allowVerticalPlacement),We=g.textSizeData;let nt=null;We.kind==="source"?(nt=[bc*k.layout.get("text-size").evaluate(z,{})],nt[0]>Ah&&Le(`${g.layerIds[0]}: Value for "text-size" is >= ${ub}. Reduce your "text-size".`)):We.kind==="composite"&&(nt=[bc*Te.compositeTextSizes[0].evaluate(z,{},Pe),bc*Te.compositeTextSizes[1].evaluate(z,{},Pe)],(nt[0]>Ah||nt[1]>Ah)&&Le(`${g.layerIds[0]}: Value for "text-size" is >= ${ub}. Reduce your "text-size".`)),g.addSymbols(g.text,Re,nt,$,R,z,Q,d,K.lineStartIndex,K.lineLength,xe,Pe);for(const wt of ae)fe[wt]=g.text.placedSymbolArray.length-1;return 4*Re.length}function zF(g){for(const d in g)return g[d];return null}function cae(g,d,y,x){const k=g.compareText;if(d in k){const R=k[d];for(let z=R.length-1;z>=0;z--)if(x.dist(R[z])<y)return!0}else k[d]=[];return k[d].push(x),!1}const BF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class SA{static from(d){if(!(d instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[y,x]=new Uint8Array(d,0,2);if(y!==219)throw new Error("Data does not appear to be in a KDBush format.");const k=x>>4;if(k!==1)throw new Error(`Got v${k} data when expected v1.`);const R=BF[15&x];if(!R)throw new Error("Unrecognized array type.");const[z]=new Uint16Array(d,2,1),[$]=new Uint32Array(d,4,1);return new SA($,z,R,d)}constructor(d,y=64,x=Float64Array,k){if(isNaN(d)||d<0)throw new Error(`Unpexpected numItems value: ${d}.`);this.numItems=+d,this.nodeSize=Math.min(Math.max(+y,2),65535),this.ArrayType=x,this.IndexArrayType=d<65536?Uint16Array:Uint32Array;const R=BF.indexOf(this.ArrayType),z=2*d*this.ArrayType.BYTES_PER_ELEMENT,$=d*this.IndexArrayType.BYTES_PER_ELEMENT,K=(8-$%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${x}.`);k&&k instanceof ArrayBuffer?(this.data=k,this.ids=new this.IndexArrayType(this.data,8,d),this.coords=new this.ArrayType(this.data,8+$+K,2*d),this._pos=2*d,this._finished=!0):(this.data=new ArrayBuffer(8+z+$+K),this.ids=new this.IndexArrayType(this.data,8,d),this.coords=new this.ArrayType(this.data,8+$+K,2*d),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=y,new Uint32Array(this.data,4,1)[0]=d)}add(d,y){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=d,this.coords[this._pos++]=y,x}finish(){const d=this._pos>>1;if(d!==this.numItems)throw new Error(`Added ${d} items when expected ${this.numItems}.`);return CA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(d,y,x,k){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:z,nodeSize:$}=this,K=[0,R.length-1,0],Q=[];for(;K.length;){const ae=K.pop()||0,fe=K.pop()||0,xe=K.pop()||0;if(fe-xe<=$){for(let We=xe;We<=fe;We++){const nt=z[2*We],wt=z[2*We+1];nt>=d&&nt<=x&&wt>=y&&wt<=k&&Q.push(R[We])}continue}const Te=xe+fe>>1,Pe=z[2*Te],Re=z[2*Te+1];Pe>=d&&Pe<=x&&Re>=y&&Re<=k&&Q.push(R[Te]),(ae===0?d<=Pe:y<=Re)&&(K.push(xe),K.push(Te-1),K.push(1-ae)),(ae===0?x>=Pe:k>=Re)&&(K.push(Te+1),K.push(fe),K.push(1-ae))}return Q}within(d,y,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:R,nodeSize:z}=this,$=[0,k.length-1,0],K=[],Q=x*x;for(;$.length;){const ae=$.pop()||0,fe=$.pop()||0,xe=$.pop()||0;if(fe-xe<=z){for(let We=xe;We<=fe;We++)NF(R[2*We],R[2*We+1],d,y)<=Q&&K.push(k[We]);continue}const Te=xe+fe>>1,Pe=R[2*Te],Re=R[2*Te+1];NF(Pe,Re,d,y)<=Q&&K.push(k[Te]),(ae===0?d-x<=Pe:y-x<=Re)&&($.push(xe),$.push(Te-1),$.push(1-ae)),(ae===0?d+x>=Pe:y+x>=Re)&&($.push(Te+1),$.push(fe),$.push(1-ae))}return K}}function CA(g,d,y,x,k,R){if(k-x<=y)return;const z=x+k>>1;FF(g,d,z,x,k,R),CA(g,d,y,x,z-1,1-R),CA(g,d,y,z+1,k,1-R)}function FF(g,d,y,x,k,R){for(;k>x;){if(k-x>600){const Q=k-x+1,ae=y-x+1,fe=Math.log(Q),xe=.5*Math.exp(2*fe/3),Te=.5*Math.sqrt(fe*xe*(Q-xe)/Q)*(ae-Q/2<0?-1:1);FF(g,d,y,Math.max(x,Math.floor(y-ae*xe/Q+Te)),Math.min(k,Math.floor(y+(Q-ae)*xe/Q+Te)),R)}const z=d[2*y+R];let $=x,K=k;for(hb(g,d,x,y),d[2*k+R]>z&&hb(g,d,x,k);$<K;){for(hb(g,d,$,K),$++,K--;d[2*$+R]<z;)$++;for(;d[2*K+R]>z;)K--}d[2*x+R]===z?hb(g,d,x,K):(K++,hb(g,d,K,k)),K<=y&&(x=K+1),y<=K&&(k=K-1)}}function hb(g,d,y,x){TA(g,y,x),TA(d,2*y,2*x),TA(d,2*y+1,2*x+1)}function TA(g,d,y){const x=g[d];g[d]=g[y],g[y]=x}function NF(g,d,y,x){const k=g-y,R=d-x;return k*k+R*R}var MA;o.cm=void 0,(MA=o.cm||(o.cm={})).create="create",MA.load="load",MA.fullLoad="fullLoad";let jS=null,fb=[];const kA=1e3/60,EA="loadTime",AA="fullLoadTime",dae={mark(g){performance.mark(g)},frame(g){const d=g;jS!=null&&fb.push(d-jS),jS=d},clearMetrics(){jS=null,fb=[],performance.clearMeasures(EA),performance.clearMeasures(AA);for(const g in o.cm)performance.clearMarks(o.cm[g])},getPerformanceMetrics(){performance.measure(EA,o.cm.create,o.cm.load),performance.measure(AA,o.cm.create,o.cm.fullLoad);const g=performance.getEntriesByName(EA)[0].duration,d=performance.getEntriesByName(AA)[0].duration,y=fb.length,x=1/(fb.reduce((R,z)=>R+z,0)/y/1e3),k=fb.filter(R=>R>kA).reduce((R,z)=>R+(z-kA)/kA,0);return{loadTime:g,fullLoadTime:d,fps:x,percentDroppedFrames:k/(y+k)*100,totalFrames:y}}};o.$=cb,o.A=B,o.B=zi,o.C=Fi,o.D=Jn,o.E=Me,o.F=L_,o.G=function(g){if(Lt==null){const d=g.navigator?g.navigator.userAgent:null;Lt=!!g.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Lt},o.H=class{constructor(g,d){this.target=g,this.mapId=d,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new tae(()=>this.process()),this.subscription=Ft(this.target,"message",y=>this.receive(y),!1),this.globalScope=ct(self)?g:window}registerMessageHandler(g,d){this.messageHandlers[g]=d}sendAsync(g,d){return new Promise((y,x)=>{const k=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=d?Ft(d.signal,"abort",()=>{R==null||R.unsubscribe(),delete this.resolveRejects[k];const K={id:k,type:"<cancel>",origin:location.origin,targetMapId:g.targetMapId,sourceMapId:this.mapId};this.target.postMessage(K)},nae):null;this.resolveRejects[k]={resolve:K=>{R==null||R.unsubscribe(),y(K)},reject:K=>{R==null||R.unsubscribe(),x(K)}};const z=[],$=Object.assign(Object.assign({},g),{id:k,sourceMapId:this.mapId,origin:location.origin,data:yp(g.data,z)});this.target.postMessage($,{transfer:z})})}receive(g){const d=g.data,y=d.id;if(!(d.origin!=="file://"&&location.origin!=="file://"&&d.origin!=="resource://android"&&location.origin!=="resource://android"&&d.origin!==location.origin||d.targetMapId&&this.mapId!==d.targetMapId)){if(d.type==="<cancel>"){delete this.tasks[y];const x=this.abortControllers[y];return delete this.abortControllers[y],void(x&&x.abort())}if(ct(self)||d.mustQueue)return this.tasks[y]=d,this.taskQueue.push(y),void this.invoker.trigger();this.processTask(y,d)}}process(){if(this.taskQueue.length===0)return;const g=this.taskQueue.shift(),d=this.tasks[g];delete this.tasks[g],this.taskQueue.length>0&&this.invoker.trigger(),d&&this.processTask(g,d)}processTask(g,d){return s(this,void 0,void 0,function*(){if(d.type==="<response>"){const k=this.resolveRejects[g];return delete this.resolveRejects[g],k?void(d.error?k.reject(xd(d.error)):k.resolve(xd(d.data))):void 0}if(!this.messageHandlers[d.type])return void this.completeTask(g,new Error(`Could not find a registered handler for ${d.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const y=xd(d.data),x=new AbortController;this.abortControllers[g]=x;try{const k=yield this.messageHandlers[d.type](d.sourceMapId,y,x);this.completeTask(g,null,k)}catch(k){this.completeTask(g,k)}})}completeTask(g,d,y){const x=[];delete this.abortControllers[g];const k={id:g,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:d?yp(d):null,data:yp(y,x)};this.target.postMessage(k,{transfer:x})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.I=cA,o.J=Gt,o.K=function(){var g=new B(16);return B!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g},o.L=function(g,d,y){var x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re=y[0],We=y[1],nt=y[2];return d===g?(g[12]=d[0]*Re+d[4]*We+d[8]*nt+d[12],g[13]=d[1]*Re+d[5]*We+d[9]*nt+d[13],g[14]=d[2]*Re+d[6]*We+d[10]*nt+d[14],g[15]=d[3]*Re+d[7]*We+d[11]*nt+d[15]):(k=d[1],R=d[2],z=d[3],$=d[4],K=d[5],Q=d[6],ae=d[7],fe=d[8],xe=d[9],Te=d[10],Pe=d[11],g[0]=x=d[0],g[1]=k,g[2]=R,g[3]=z,g[4]=$,g[5]=K,g[6]=Q,g[7]=ae,g[8]=fe,g[9]=xe,g[10]=Te,g[11]=Pe,g[12]=x*Re+$*We+fe*nt+d[12],g[13]=k*Re+K*We+xe*nt+d[13],g[14]=R*Re+Q*We+Te*nt+d[14],g[15]=z*Re+ae*We+Pe*nt+d[15]),g},o.M=function(g,d,y){var x=y[0],k=y[1],R=y[2];return g[0]=d[0]*x,g[1]=d[1]*x,g[2]=d[2]*x,g[3]=d[3]*x,g[4]=d[4]*k,g[5]=d[5]*k,g[6]=d[6]*k,g[7]=d[7]*k,g[8]=d[8]*R,g[9]=d[9]*R,g[10]=d[10]*R,g[11]=d[11]*R,g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15],g},o.N=function(g,d,y){var x=d[0],k=d[1],R=d[2],z=d[3],$=d[4],K=d[5],Q=d[6],ae=d[7],fe=d[8],xe=d[9],Te=d[10],Pe=d[11],Re=d[12],We=d[13],nt=d[14],wt=d[15],ot=y[0],Se=y[1],He=y[2],ut=y[3];return g[0]=ot*x+Se*$+He*fe+ut*Re,g[1]=ot*k+Se*K+He*xe+ut*We,g[2]=ot*R+Se*Q+He*Te+ut*nt,g[3]=ot*z+Se*ae+He*Pe+ut*wt,g[4]=(ot=y[4])*x+(Se=y[5])*$+(He=y[6])*fe+(ut=y[7])*Re,g[5]=ot*k+Se*K+He*xe+ut*We,g[6]=ot*R+Se*Q+He*Te+ut*nt,g[7]=ot*z+Se*ae+He*Pe+ut*wt,g[8]=(ot=y[8])*x+(Se=y[9])*$+(He=y[10])*fe+(ut=y[11])*Re,g[9]=ot*k+Se*K+He*xe+ut*We,g[10]=ot*R+Se*Q+He*Te+ut*nt,g[11]=ot*z+Se*ae+He*Pe+ut*wt,g[12]=(ot=y[12])*x+(Se=y[13])*$+(He=y[14])*fe+(ut=y[15])*Re,g[13]=ot*k+Se*K+He*xe+ut*We,g[14]=ot*R+Se*Q+He*Te+ut*nt,g[15]=ot*z+Se*ae+He*Pe+ut*wt,g},o.O=function(g,d){const y={};for(let x=0;x<d.length;x++){const k=d[x];k in g&&(y[k]=g[k])}return y},o.P=_,o.Q=Ph,o.R=rl,o.S=pF,o.T=B_,o.U=fF,o.V=A,o.W=I,o.X=_t,o.Y=il,o.Z=re,o._=s,o.a=On,o.a$=function(g,d,y){var x=Math.sin(y),k=Math.cos(y),R=d[4],z=d[5],$=d[6],K=d[7],Q=d[8],ae=d[9],fe=d[10],xe=d[11];return d!==g&&(g[0]=d[0],g[1]=d[1],g[2]=d[2],g[3]=d[3],g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15]),g[4]=R*k+Q*x,g[5]=z*k+ae*x,g[6]=$*k+fe*x,g[7]=K*k+xe*x,g[8]=Q*k-R*x,g[9]=ae*k-z*x,g[10]=fe*k-$*x,g[11]=xe*k-K*x,g},o.a0=25,o.a1=bA,o.a2=g=>{const d=window.document.createElement("video");return d.muted=!0,new Promise(y=>{d.onloadstart=()=>{y(d)};for(const x of g){const k=window.document.createElement("source");Ze(x)||(d.crossOrigin="Anonymous"),k.src=x,d.appendChild(k)}})},o.a3=Yt,o.a4=function(){return Je++},o.a5=G,o.a6=fg,o.a7=w_,o.a8=_c,o.a9=wF,o.aA=function(g,d,y,x,k=!1){if(!y[0]&&!y[1])return[0,0];const R=k?x==="map"?-g.bearingInRadians:0:x==="viewport"?g.bearingInRadians:0;if(R){const z=Math.sin(R),$=Math.cos(R);y=[y[0]*$-y[1]*z,y[0]*z+y[1]*$]}return[k?y[0]:ee(d,y[0],g.zoom),k?y[1]:ee(d,y[1],g.zoom)]},o.aC=fA,o.aD=xA,o.aE=hA,o.aF=SA,o.aG=ba,o.aH=IS,o.aI=at,o.aJ=br,o.aK=Sn,o.aL=et,o.aM=cn,o.aN=mF,o.aO=function(g,d,y){return g[0]=d[0]*y,g[1]=d[1]*y,g[2]=d[2]*y,g},o.aP=function(g,d,y){return g[0]=d[0]+y[0],g[1]=d[1]+y[1],g[2]=d[2]+y[2],g},o.aQ=function(g){var d=new B(3);return d[0]=g[0],d[1]=g[1],d[2]=g[2],d},o.aR=function(g,d,y){return g[0]=d[0]*y[0],g[1]=d[1]*y[1],g[2]=d[2]*y[2],g[3]=d[3]*y[3],g},o.aS=function(g,d,y){return g[0]=d[0]-y[0],g[1]=d[1]-y[1],g[2]=d[2]-y[2],g},o.aT=function(g,d){var y=d[0],x=d[1],k=d[2],R=y*y+x*x+k*k;return R>0&&(R=1/Math.sqrt(R)),g[0]=d[0]*R,g[1]=d[1]*R,g[2]=d[2]*R,g},o.aU=function(g,d,y){var x=d[0],k=d[1],R=d[2],z=y[0],$=y[1],K=y[2];return g[0]=k*K-R*$,g[1]=R*z-x*K,g[2]=x*$-k*z,g},o.aV=function(g,d){return g[0]*d[0]+g[1]*d[1]+g[2]*d[2]},o.aW=yF,o.aX=pg,o.aY=function(g,d,y,x,k){var R,z=1/Math.tan(d/2);return g[0]=z/y,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=z,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,k!=null&&k!==1/0?(g[10]=(k+x)*(R=1/(x-k)),g[14]=2*k*x*R):(g[10]=-1,g[14]=-2*x),g},o.aZ=function(g){var d=new B(16);return d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3],d[4]=g[4],d[5]=g[5],d[6]=g[6],d[7]=g[7],d[8]=g[8],d[9]=g[9],d[10]=g[10],d[11]=g[11],d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15],d},o.a_=function(g,d,y){var x=Math.sin(y),k=Math.cos(y),R=d[0],z=d[1],$=d[2],K=d[3],Q=d[4],ae=d[5],fe=d[6],xe=d[7];return d!==g&&(g[8]=d[8],g[9]=d[9],g[10]=d[10],g[11]=d[11],g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15]),g[0]=R*k+Q*x,g[1]=z*k+ae*x,g[2]=$*k+fe*x,g[3]=K*k+xe*x,g[4]=Q*k-R*x,g[5]=ae*k-z*x,g[6]=fe*k-$*x,g[7]=xe*k-K*x,g},o.aa=function(g){const d={};if(g.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(y,x,k,R)=>{const z=k||R;return d[x]=!z||z.toLowerCase(),""}),d["max-age"]){const y=parseInt(d["max-age"],10);isNaN(y)?delete d["max-age"]:d["max-age"]=y}return d},o.ab=function(g){return g*Math.PI/180},o.ac=function(g){return Math.pow(2,g)},o.ad=H,o.ae=Ve,o.af=85.051129,o.ag=vF,o.ah=function(g){return Math.log(g)/Math.LN2},o.ai=function(g){var d=g[0],y=g[1];return d*d+y*y},o.aj=function(g,d){const y=[];for(const x in g)x in d||y.push(x);return y},o.ak=function(g,d){let y=0,x=0;if(g.kind==="constant")x=g.layoutSize;else if(g.kind!=="source"){const{interpolationType:k,minZoom:R,maxZoom:z}=g,$=k?Ve(Ro.interpolationFactor(k,d,R,z),0,1):0;g.kind==="camera"?x=zi.number(g.minSize,g.maxSize,$):y=$}return{uSizeT:y,uSize:x}},o.am=function(g,{uSize:d,uSizeT:y},{lowerSize:x,upperSize:k}){return g.kind==="source"?x/bc:g.kind==="composite"?zi.number(x/bc,k/bc,y):d},o.an=function(g,d){var y=d[0],x=d[1],k=d[2],R=d[3],z=d[4],$=d[5],K=d[6],Q=d[7],ae=d[8],fe=d[9],xe=d[10],Te=d[11],Pe=d[12],Re=d[13],We=d[14],nt=d[15],wt=y*$-x*z,ot=y*K-k*z,Se=y*Q-R*z,He=x*K-k*$,ut=x*Q-R*$,jt=k*Q-R*K,vn=ae*Re-fe*Pe,qt=ae*We-xe*Pe,Jt=ae*nt-Te*Pe,wn=fe*We-xe*Re,mn=fe*nt-Te*Re,Cn=xe*nt-Te*We,rn=wt*Cn-ot*mn+Se*wn+He*Jt-ut*qt+jt*vn;return rn?(g[0]=($*Cn-K*mn+Q*wn)*(rn=1/rn),g[1]=(k*mn-x*Cn-R*wn)*rn,g[2]=(Re*jt-We*ut+nt*He)*rn,g[3]=(xe*ut-fe*jt-Te*He)*rn,g[4]=(K*Jt-z*Cn-Q*qt)*rn,g[5]=(y*Cn-k*Jt+R*qt)*rn,g[6]=(We*Se-Pe*jt-nt*ot)*rn,g[7]=(ae*jt-xe*Se+Te*ot)*rn,g[8]=(z*mn-$*Jt+Q*vn)*rn,g[9]=(x*Jt-y*mn-R*vn)*rn,g[10]=(Pe*ut-Re*Se+nt*wt)*rn,g[11]=(fe*Se-ae*ut-Te*wt)*rn,g[12]=($*qt-z*wn-K*vn)*rn,g[13]=(y*wn-x*qt+k*vn)*rn,g[14]=(Re*ot-Pe*He-We*wt)*rn,g[15]=(ae*He-fe*ot+xe*wt)*rn,g):null},o.ao=q,o.ap=function(g){return Math.hypot(g[0],g[1])},o.aq=function(g){return g[0]=0,g[1]=0,g},o.ar=function(g,d,y){return g[0]=d[0]*y,g[1]=d[1]*y,g},o.as=pA,o.at=ue,o.au=function(g,d,y,x){const k=d.y-g.y,R=d.x-g.x,z=x.y-y.y,$=x.x-y.x,K=z*R-$*k;if(K===0)return null;const Q=($*(g.y-y.y)-z*(g.x-y.x))/K;return new _(g.x+Q*R,g.y+Q*k)},o.av=TF,o.aw=q_,o.ax=function(g){let d=1/0,y=1/0,x=-1/0,k=-1/0;for(const R of g)d=Math.min(d,R.x),y=Math.min(y,R.y),x=Math.max(x,R.x),k=Math.max(k,R.y);return[d,y,x,k]},o.ay=Pa,o.az=ee,o.b=lt,o.b$=function(g,d){var y=g[0],x=g[1],k=g[2],R=g[3],z=g[4],$=g[5],K=g[6],Q=g[7],ae=g[8],fe=g[9],xe=g[10],Te=g[11],Pe=g[12],Re=g[13],We=g[14],nt=g[15],wt=d[0],ot=d[1],Se=d[2],He=d[3],ut=d[4],jt=d[5],vn=d[6],qt=d[7],Jt=d[8],wn=d[9],mn=d[10],Cn=d[11],rn=d[12],Gn=d[13],cr=d[14],or=d[15];return Math.abs(y-wt)<=O*Math.max(1,Math.abs(y),Math.abs(wt))&&Math.abs(x-ot)<=O*Math.max(1,Math.abs(x),Math.abs(ot))&&Math.abs(k-Se)<=O*Math.max(1,Math.abs(k),Math.abs(Se))&&Math.abs(R-He)<=O*Math.max(1,Math.abs(R),Math.abs(He))&&Math.abs(z-ut)<=O*Math.max(1,Math.abs(z),Math.abs(ut))&&Math.abs($-jt)<=O*Math.max(1,Math.abs($),Math.abs(jt))&&Math.abs(K-vn)<=O*Math.max(1,Math.abs(K),Math.abs(vn))&&Math.abs(Q-qt)<=O*Math.max(1,Math.abs(Q),Math.abs(qt))&&Math.abs(ae-Jt)<=O*Math.max(1,Math.abs(ae),Math.abs(Jt))&&Math.abs(fe-wn)<=O*Math.max(1,Math.abs(fe),Math.abs(wn))&&Math.abs(xe-mn)<=O*Math.max(1,Math.abs(xe),Math.abs(mn))&&Math.abs(Te-Cn)<=O*Math.max(1,Math.abs(Te),Math.abs(Cn))&&Math.abs(Pe-rn)<=O*Math.max(1,Math.abs(Pe),Math.abs(rn))&&Math.abs(Re-Gn)<=O*Math.max(1,Math.abs(Re),Math.abs(Gn))&&Math.abs(We-cr)<=O*Math.max(1,Math.abs(We),Math.abs(cr))&&Math.abs(nt-or)<=O*Math.max(1,Math.abs(nt),Math.abs(or))},o.b0=function(){const g=new Float32Array(16);return H(g),g},o.b1=function(){const g=new Float64Array(16);return H(g),g},o.b2=function(){return new Float64Array(16)},o.b3=function(g,d,y){const x=new Float64Array(4);return function(k,R,z,$){var K=.5*Math.PI/180;R*=K,z*=K,$*=K;var Q=Math.sin(R),ae=Math.cos(R),fe=Math.sin(z),xe=Math.cos(z),Te=Math.sin($),Pe=Math.cos($);k[0]=Q*xe*Pe-ae*fe*Te,k[1]=ae*fe*Pe+Q*xe*Te,k[2]=ae*xe*Te-Q*fe*Pe,k[3]=ae*xe*Pe+Q*fe*Te}(x,g,d-90,y),x},o.b4=function(g,d,y,x){var k,R,z,$,K,Q=d[0],ae=d[1],fe=d[2],xe=d[3],Te=y[0],Pe=y[1],Re=y[2],We=y[3];return(R=Q*Te+ae*Pe+fe*Re+xe*We)<0&&(R=-R,Te=-Te,Pe=-Pe,Re=-Re,We=-We),1-R>O?(k=Math.acos(R),z=Math.sin(k),$=Math.sin((1-x)*k)/z,K=Math.sin(x*k)/z):($=1-x,K=x),g[0]=$*Q+K*Te,g[1]=$*ae+K*Pe,g[2]=$*fe+K*Re,g[3]=$*xe+K*We,g},o.b5=function(g){const d=new Float64Array(9);var y,x,k,R,z,$,K,Q,ae,fe,xe,Te,Pe,Re,We,nt,wt,ot;fe=(k=(x=g)[0])*(K=k+k),xe=(R=x[1])*K,Pe=(z=x[2])*K,Re=z*(Q=R+R),nt=($=x[3])*K,wt=$*Q,ot=$*(ae=z+z),(y=d)[0]=1-(Te=R*Q)-(We=z*ae),y[3]=xe-ot,y[6]=Pe+wt,y[1]=xe+ot,y[4]=1-fe-We,y[7]=Re-nt,y[2]=Pe-wt,y[5]=Re+nt,y[8]=1-fe-Te;const Se=cn(-Math.asin(Ve(d[2],-1,1)));let He,ut;return Math.hypot(d[5],d[8])<.001?(He=0,ut=-cn(Math.atan2(d[3],d[4]))):(He=cn(d[5]===0&&d[8]===0?0:Math.atan2(d[5],d[8])),ut=cn(d[1]===0&&d[0]===0?0:Math.atan2(d[1],d[0]))),{roll:He,pitch:Se+90,bearing:ut}},o.b6=function(g,d){return g.roll==d.roll&&g.pitch==d.pitch&&g.bearing==d.bearing},o.b7=Rr,o.b8=Td,o.b9=dg,o.bA=function(g){if(g.type==="custom")return new eae(g);switch(g.type){case"background":return new Xie(g);case"circle":return new Gre(g);case"fill":return new die(g);case"fill-extrusion":return new _ie(g);case"heatmap":return new qre(g);case"hillshade":return new Yre(g);case"line":return new kie(g);case"raster":return new Qie(g);case"symbol":return new FS(g)}},o.bB=Ne,o.bC=function(g,d){if(!g)return[{command:"setStyle",args:[d]}];let y=[];try{if(!it(g.version,d.version))return[{command:"setStyle",args:[d]}];it(g.center,d.center)||y.push({command:"setCenter",args:[d.center]}),it(g.centerAltitude,d.centerAltitude)||y.push({command:"setCenterAltitude",args:[d.centerAltitude]}),it(g.zoom,d.zoom)||y.push({command:"setZoom",args:[d.zoom]}),it(g.bearing,d.bearing)||y.push({command:"setBearing",args:[d.bearing]}),it(g.pitch,d.pitch)||y.push({command:"setPitch",args:[d.pitch]}),it(g.roll,d.roll)||y.push({command:"setRoll",args:[d.roll]}),it(g.sprite,d.sprite)||y.push({command:"setSprite",args:[d.sprite]}),it(g.glyphs,d.glyphs)||y.push({command:"setGlyphs",args:[d.glyphs]}),it(g.transition,d.transition)||y.push({command:"setTransition",args:[d.transition]}),it(g.light,d.light)||y.push({command:"setLight",args:[d.light]}),it(g.terrain,d.terrain)||y.push({command:"setTerrain",args:[d.terrain]}),it(g.sky,d.sky)||y.push({command:"setSky",args:[d.sky]}),it(g.projection,d.projection)||y.push({command:"setProjection",args:[d.projection]});const x={},k=[];(function(z,$,K,Q){let ae;for(ae in $=$||{},z=z||{})Object.prototype.hasOwnProperty.call(z,ae)&&(Object.prototype.hasOwnProperty.call($,ae)||Dt(ae,K,Q));for(ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(Object.prototype.hasOwnProperty.call(z,ae)?it(z[ae],$[ae])||(z[ae].type==="geojson"&&$[ae].type==="geojson"&&kn(z,$,ae)?Et(K,{command:"setGeoJSONSourceData",args:[ae,$[ae].data]}):ln(ae,$,K,Q)):Vt(ae,$,K))})(g.sources,d.sources,k,x);const R=[];g.layers&&g.layers.forEach(z=>{"source"in z&&x[z.source]?y.push({command:"removeLayer",args:[z.id]}):R.push(z)}),y=y.concat(k),function(z,$,K){$=$||[];const Q=(z=z||[]).map(Xn),ae=$.map(Xn),fe=z.reduce(mr,{}),xe=$.reduce(mr,{}),Te=Q.slice(),Pe=Object.create(null);let Re,We,nt,wt,ot;for(let Se=0,He=0;Se<Q.length;Se++)Re=Q[Se],Object.prototype.hasOwnProperty.call(xe,Re)?He++:(Et(K,{command:"removeLayer",args:[Re]}),Te.splice(Te.indexOf(Re,He),1));for(let Se=0,He=0;Se<ae.length;Se++)Re=ae[ae.length-1-Se],Te[Te.length-1-Se]!==Re&&(Object.prototype.hasOwnProperty.call(fe,Re)?(Et(K,{command:"removeLayer",args:[Re]}),Te.splice(Te.lastIndexOf(Re,Te.length-He),1)):He++,wt=Te[Te.length-Se],Et(K,{command:"addLayer",args:[xe[Re],wt]}),Te.splice(Te.length-Se,0,Re),Pe[Re]=!0);for(let Se=0;Se<ae.length;Se++)if(Re=ae[Se],We=fe[Re],nt=xe[Re],!Pe[Re]&&!it(We,nt))if(it(We.source,nt.source)&&it(We["source-layer"],nt["source-layer"])&&it(We.type,nt.type)){for(ot in Tn(We.layout,nt.layout,K,Re,null,"setLayoutProperty"),Tn(We.paint,nt.paint,K,Re,null,"setPaintProperty"),it(We.filter,nt.filter)||Et(K,{command:"setFilter",args:[Re,nt.filter]}),it(We.minzoom,nt.minzoom)&&it(We.maxzoom,nt.maxzoom)||Et(K,{command:"setLayerZoomRange",args:[Re,nt.minzoom,nt.maxzoom]}),We)Object.prototype.hasOwnProperty.call(We,ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?Tn(We[ot],nt[ot],K,Re,ot.slice(6),"setPaintProperty"):it(We[ot],nt[ot])||Et(K,{command:"setLayerProperty",args:[Re,ot,nt[ot]]}));for(ot in nt)Object.prototype.hasOwnProperty.call(nt,ot)&&!Object.prototype.hasOwnProperty.call(We,ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?Tn(We[ot],nt[ot],K,Re,ot.slice(6),"setPaintProperty"):it(We[ot],nt[ot])||Et(K,{command:"setLayerProperty",args:[Re,ot,nt[ot]]}))}else Et(K,{command:"removeLayer",args:[Re]}),wt=Te[Te.lastIndexOf(Re)+1],Et(K,{command:"addLayer",args:[nt,wt]})}(R,d.layers,y)}catch(x){console.warn("Unable to compute style diff:",x),y=[{command:"setStyle",args:[d]}]}return y},o.bD=function(g){const d=[],y=g.id;return y===void 0&&d.push({message:`layers.${y}: missing required property "id"`}),g.render===void 0&&d.push({message:`layers.${y}: missing required method "render"`}),g.renderingMode&&g.renderingMode!=="2d"&&g.renderingMode!=="3d"&&d.push({message:`layers.${y}: property "renderingMode" must be either "2d" or "3d"`}),d},o.bE=function g(d,y){if(Array.isArray(d)){if(!Array.isArray(y)||d.length!==y.length)return!1;for(let x=0;x<d.length;x++)if(!g(d[x],y[x]))return!1;return!0}if(typeof d=="object"&&d!==null&&y!==null){if(typeof y!="object"||Object.keys(d).length!==Object.keys(y).length)return!1;for(const x in d)if(!g(d[x],y[x]))return!1;return!0}return d===y},o.bF=Ue,o.bG=yt,o.bH=class extends kl{constructor(g,d){super(g,d),this.current=0}set(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))}},o.bI=ns,o.bJ=class extends kl{constructor(g,d){super(g,d),this.current=yc}set(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(let d=1;d<16;d++)if(g[d]!==this.current[d]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}}},o.bK=Md,o.bL=class extends kl{constructor(g,d){super(g,d),this.current=[0,0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))}},o.bM=class extends kl{constructor(g,d){super(g,d),this.current=[0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))}},o.bN=N,o.bO=function(g,d){var y=Math.sin(d),x=Math.cos(d);return g[0]=x,g[1]=y,g[2]=0,g[3]=-y,g[4]=x,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},o.bP=function(g,d,y){var x=d[0],k=d[1],R=d[2];return g[0]=x*y[0]+k*y[3]+R*y[6],g[1]=x*y[1]+k*y[4]+R*y[7],g[2]=x*y[2]+k*y[5]+R*y[8],g},o.bQ=function(g,d,y,x,k,R,z){var $=1/(d-y),K=1/(x-k),Q=1/(R-z);return g[0]=-2*$,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*K,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*Q,g[11]=0,g[12]=(d+y)*$,g[13]=(k+x)*K,g[14]=(z+R)*Q,g[15]=1,g},o.bR=class extends Cd{},o.bS=Iie,o.bT=class extends sg{},o.bU=qE,o.bV=function(g){return g<=1?1:Math.pow(2,Math.ceil(Math.log(g)/Math.LN2))},o.bW=bB,o.bX=function(g,d,y){var x=d[0],k=d[1],R=d[2],z=y[3]*x+y[7]*k+y[11]*R+y[15];return g[0]=(y[0]*x+y[4]*k+y[8]*R+y[12])/(z=z||1),g[1]=(y[1]*x+y[5]*k+y[9]*R+y[13])/z,g[2]=(y[2]*x+y[6]*k+y[10]*R+y[14])/z,g},o.bY=class extends vu{},o.bZ=class extends M{},o.b_=function(g,d){return g[0]===d[0]&&g[1]===d[1]&&g[2]===d[2]&&g[3]===d[3]&&g[4]===d[4]&&g[5]===d[5]&&g[6]===d[6]&&g[7]===d[7]&&g[8]===d[8]&&g[9]===d[9]&&g[10]===d[10]&&g[11]===d[11]&&g[12]===d[12]&&g[13]===d[13]&&g[14]===d[14]&&g[15]===d[15]},o.ba=nb,o.bb=cg,o.bc=be,o.bd=we,o.be=_o,o.bf=function(g,d,y,x,k){return be(x,k,Ve((g-d)/(y-d),0,1))},o.bg=oe,o.bh=function(){return new Float64Array(3)},o.bi=function(g,d,y,x){return g[0]=d[0]+y[0]*x,g[1]=d[1]+y[1]*x,g[2]=d[2]+y[2]*x,g},o.bj=ie,o.bk=function(){return new Float64Array(4)},o.bl=function(g,d,y,x){var k=[],R=[];return k[0]=d[0]-y[0],k[1]=d[1]-y[1],k[2]=d[2]-y[2],R[0]=k[0]*Math.cos(x)-k[1]*Math.sin(x),R[1]=k[0]*Math.sin(x)+k[1]*Math.cos(x),R[2]=k[2],g[0]=R[0]+y[0],g[1]=R[1]+y[1],g[2]=R[2]+y[2],g},o.bm=function(g,d,y,x){var k=[],R=[];return k[0]=d[0]-y[0],k[1]=d[1]-y[1],k[2]=d[2]-y[2],R[0]=k[0],R[1]=k[1]*Math.cos(x)-k[2]*Math.sin(x),R[2]=k[1]*Math.sin(x)+k[2]*Math.cos(x),g[0]=R[0]+y[0],g[1]=R[1]+y[1],g[2]=R[2]+y[2],g},o.bn=function(g,d,y,x){var k=[],R=[];return k[0]=d[0]-y[0],k[1]=d[1]-y[1],k[2]=d[2]-y[2],R[0]=k[2]*Math.sin(x)+k[0]*Math.cos(x),R[1]=k[1],R[2]=k[2]*Math.cos(x)-k[0]*Math.sin(x),g[0]=R[0]+y[0],g[1]=R[1]+y[1],g[2]=R[2]+y[2],g},o.bo=W,o.bp=function(g,d,y){var x=Math.sin(y),k=Math.cos(y),R=d[0],z=d[1],$=d[2],K=d[3],Q=d[8],ae=d[9],fe=d[10],xe=d[11];return d!==g&&(g[4]=d[4],g[5]=d[5],g[6]=d[6],g[7]=d[7],g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15]),g[0]=R*k-Q*x,g[1]=z*k-ae*x,g[2]=$*k-fe*x,g[3]=K*k-xe*x,g[8]=R*x+Q*k,g[9]=z*x+ae*k,g[10]=$*x+fe*k,g[11]=K*x+xe*k,g},o.bq=function(g,d){const y=oe(g,360),x=oe(d,360),k=x-y,R=x>y?k-360:k+360;return Math.abs(k)<Math.abs(R)?k:R},o.br=function(g){return g[0]=0,g[1]=0,g[2]=0,g},o.bs=function(g,d,y,x){const k=Math.sqrt(g*g+d*d),R=Math.sqrt(y*y+x*x);g/=k,d/=k,y/=R,x/=R;const z=Math.acos(g*y+d*x);return-d*y+g*x>0?z:-z},o.bt=function(g,d){return g[0]*d[0]+g[1]*d[1]+g[2]*d[2]+g[3]},o.bu=yA,o.bv=function(g,d){const y=oe(g,2*Math.PI),x=oe(d,2*Math.PI);return Math.min(Math.abs(y-x),Math.abs(y-x+2*Math.PI),Math.abs(y-x-2*Math.PI))},o.bw=function(){const g={},d=Ae.$version;for(const y in Ae.$root){const x=Ae.$root[y];if(x.required){let k=null;k=y==="version"?d:x.type==="array"?[]:{},k!=null&&(g[y]=k)}}return g},o.bx=_p,o.by=xt,o.bz=function(g){g=g.slice();const d=Object.create(null);for(let y=0;y<g.length;y++)d[g[y].id]=g[y];for(let y=0;y<g.length;y++)"ref"in g[y]&&(g[y]=Mt(g[y],d[g[y].ref]));return g},o.c=Rn,o.c0=function(g,d){return g[0]=d[0],g[1]=d[1],g[2]=d[2],g[3]=d[3],g[4]=d[4],g[5]=d[5],g[6]=d[6],g[7]=d[7],g[8]=d[8],g[9]=d[9],g[10]=d[10],g[11]=d[11],g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15],g},o.c1=g=>g.type==="symbol",o.c2=g=>g.type==="circle",o.c3=g=>g.type==="heatmap",o.c4=g=>g.type==="line",o.c5=g=>g.type==="fill",o.c6=g=>g.type==="fill-extrusion",o.c7=g=>g.type==="hillshade",o.c8=g=>g.type==="raster",o.c9=g=>g.type==="background",o.cA=ib,o.cB=lA,o.cC=class{constructor(g){this._marks={start:[g.url,"start"].join("#"),end:[g.url,"end"].join("#"),measure:g.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let g=performance.getEntriesByName(this._marks.measure);return g.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),g=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),g}},o.cD=function(g,d,y,x,k){return s(this,void 0,void 0,function*(){if(I())try{return yield _t(g,d,y,x,k)}catch{}return function(R,z,$,K,Q){const ae=R.width,fe=R.height;It&&Bt||(It=new OffscreenCanvas(ae,fe),Bt=It.getContext("2d",{willReadFrequently:!0})),It.width=ae,It.height=fe,Bt.drawImage(R,0,0,ae,fe);const xe=Bt.getImageData(z,$,K,Q);return Bt.clearRect(0,0,ae,fe),xe.data}(g,d,y,x,k)})},o.cE=_F,o.cF=l,o.cG=f,o.cH=BB,o.cI=ZB,o.cJ=pp,o.cK=mc,o.ca=g=>g.type==="custom",o.cb=pe,o.cc=function(g,d,y){const x=ce(d.x-y.x,d.y-y.y),k=ce(g.x-y.x,g.y-y.y);var R,z;return cn(Math.atan2(x[0]*k[1]-x[1]*k[0],(R=x)[0]*(z=k)[0]+R[1]*z[1]))},o.cd=Ce,o.ce=function(g,d){return kt[d]&&(g instanceof MouseEvent||g instanceof WheelEvent)},o.cf=function(g,d){return Ot[d]&&"touches"in g},o.cg=function(g){return Ot[g]||kt[g]},o.ch=function(g,d,y){var x=d[0],k=d[1];return g[0]=y[0]*x+y[4]*k+y[12],g[1]=y[1]*x+y[5]*k+y[13],g},o.ci=function(g,d){const{x:y,y:x}=cb.fromLngLat(d);return!(g<0||g>25||x<0||x>=1||y<0||y>=1)},o.cj=function(g,d){return g[0]=d[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=d[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=d[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.ck=class extends ig{},o.cl=dae,o.cn=function(g){return g.message===fn},o.co=gn,o.cp=function(g,d){On.REGISTERED_PROTOCOLS[g]=d},o.cq=function(g){delete On.REGISTERED_PROTOCOLS[g]},o.cr=function(g,d){const y={};for(let k=0;k<g.length;k++){const R=d&&d[g[k].id]||Jm(g[k]);d&&(d[g[k].id]=R);let z=y[R];z||(z=y[R]=[]),z.push(g[k])}const x=[];for(const k in y)x.push(y[k]);return x},o.cs=$n,o.ct=bF,o.cu=xF,o.cv=XB,o.cw=function(g){g.bucket.createArrays(),g.bucket.tilePixelRatio=re/(512*g.bucket.overscaling),g.bucket.compareText={},g.bucket.iconsNeedLinear=!1;const d=g.bucket.layers[0],y=d.layout,x=d._unevaluatedLayout._values,k={layoutIconSize:x["icon-size"].possiblyEvaluate(new Fi(g.bucket.zoom+1),g.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new Fi(g.bucket.zoom+1),g.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new Fi(18))};if(g.bucket.textSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ae}=g.bucket.textSizeData;k.compositeTextSizes=[x["text-size"].possiblyEvaluate(new Fi(Q),g.canonical),x["text-size"].possiblyEvaluate(new Fi(ae),g.canonical)]}if(g.bucket.iconSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ae}=g.bucket.iconSizeData;k.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new Fi(Q),g.canonical),x["icon-size"].possiblyEvaluate(new Fi(ae),g.canonical)]}const R=y.get("text-line-height")*Pa,z=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point",$=y.get("text-keep-upright"),K=y.get("text-size");for(const Q of g.bucket.features){const ae=y.get("text-font").evaluate(Q,{},g.canonical).join(","),fe=K.evaluate(Q,{},g.canonical),xe=k.layoutTextSize.evaluate(Q,{},g.canonical),Te=k.layoutIconSize.evaluate(Q,{},g.canonical),Pe={horizontal:{},vertical:void 0},Re=Q.text;let We,nt=[0,0];if(Re){const Se=Re.toString(),He=y.get("text-letter-spacing").evaluate(Q,{},g.canonical)*Pa,ut=vS(Se)?He:0,jt=y.get("text-anchor").evaluate(Q,{},g.canonical),vn=RF(d,Q,g.canonical);if(!vn){const mn=y.get("text-radial-offset").evaluate(Q,{},g.canonical);nt=mn?DF(jt,[mn*Pa,wA]):y.get("text-offset").evaluate(Q,{},g.canonical).map(Cn=>Cn*Pa)}let qt=z?"center":y.get("text-justify").evaluate(Q,{},g.canonical);const Jt=y.get("symbol-placement")==="point"?y.get("text-max-width").evaluate(Q,{},g.canonical)*Pa:1/0,wn=()=>{g.bucket.allowVerticalPlacement&&Qm(Se)&&(Pe.vertical=OS(Re,g.glyphMap,g.glyphPositions,g.imagePositions,ae,Jt,R,jt,"left",ut,nt,o.al.vertical,!0,xe,fe))};if(!z&&vn){const mn=new Set;if(qt==="auto")for(let rn=0;rn<vn.values.length;rn+=2)mn.add(xA(vn.values[rn]));else mn.add(qt);let Cn=!1;for(const rn of mn)if(!Pe.horizontal[rn])if(Cn)Pe.horizontal[rn]=Pe.horizontal[0];else{const Gn=OS(Re,g.glyphMap,g.glyphPositions,g.imagePositions,ae,Jt,R,"center",rn,ut,nt,o.al.horizontal,!1,xe,fe);Gn&&(Pe.horizontal[rn]=Gn,Cn=Gn.positionedLines.length===1)}wn()}else{qt==="auto"&&(qt=xA(jt));const mn=OS(Re,g.glyphMap,g.glyphPositions,g.imagePositions,ae,Jt,R,jt,qt,ut,nt,o.al.horizontal,!1,xe,fe);mn&&(Pe.horizontal[qt]=mn),wn(),Qm(Se)&&z&&$&&(Pe.vertical=OS(Re,g.glyphMap,g.glyphPositions,g.imagePositions,ae,Jt,R,jt,qt,ut,nt,o.al.vertical,!1,xe,fe))}}let wt=!1;if(Q.icon&&Q.icon.name){const Se=g.imageMap[Q.icon.name];Se&&(We=Gie(g.imagePositions[Q.icon.name],y.get("icon-offset").evaluate(Q,{},g.canonical),y.get("icon-anchor").evaluate(Q,{},g.canonical)),wt=!!Se.sdf,g.bucket.sdfIcons===void 0?g.bucket.sdfIcons=wt:g.bucket.sdfIcons!==wt&&Le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==g.bucket.pixelRatio||y.get("icon-rotate").constantOr(1)!==0)&&(g.bucket.iconsNeedLinear=!0))}const ot=zF(Pe.horizontal)||Pe.vertical;g.bucket.iconsInText=!!ot&&ot.iconsInText,(ot||We)&&uae(g.bucket,Q,Pe,We,g.imageMap,k,xe,Te,nt,wt,g.canonical,g.subdivisionGranularity)}g.showCollisionBoxes&&g.bucket.generateCollisionDebugBuffers()},o.cx=aA,o.cy=QE,o.cz=iA,o.d=Ze,o.e=Ee,o.f=g=>s(void 0,void 0,void 0,function*(){if(g.byteLength===0)return createImageBitmap(new ImageData(1,1));const d=new Blob([new Uint8Array(g)],{type:"image/png"});try{return createImageBitmap(d)}catch(y){throw new Error(`Could not load image because of ${y.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.g=mt,o.h=g=>new Promise((d,y)=>{const x=new Image;x.onload=()=>{d(x),URL.revokeObjectURL(x.src),x.onload=null,window.requestAnimationFrame(()=>{x.src=Ct})},x.onerror=()=>y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const k=new Blob([new Uint8Array(g)],{type:"image/png"});x.src=g.byteLength?URL.createObjectURL(k):Ct}),o.i=ct,o.j=(g,d)=>Zt(Ee(g,{type:"json"}),d),o.k=Oe,o.l=ke,o.m=Zt,o.n=(g,d)=>Zt(Ee(g,{type:"arrayBuffer"}),d),o.o=function(g){return new lA(g).readFields(Rie,[])},o.p=YB,o.q=X_,o.r=zo,o.s=Ft,o.t=hS,o.u=$r,o.v=Ae,o.w=Le,o.x=fS,o.y=Sl,o.z=function([g,d,y]){return d+=90,d*=Math.PI/180,y*=Math.PI/180,{x:g*Math.cos(d)*Math.sin(y),y:g*Math.sin(d)*Math.sin(y),z:g*Math.cos(y)}}}),i("worker",["./shared"],function(o){class s{constructor(ve){this.keyCache={},ve&&this.replace(ve)}replace(ve){this._layerConfigs={},this._layers={},this.update(ve,[])}update(ve,ke){for(const Me of ve){this._layerConfigs[Me.id]=Me;const Ae=this._layers[Me.id]=o.bA(Me);Ae._featureFilter=o.a7(Ae.filter),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of ke)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const Oe=o.cr(Object.values(this._layerConfigs),this.keyCache);for(const Me of Oe){const Ae=Me.map(Dt=>this._layers[Dt.id]),pt=Ae[0];if(pt.visibility==="none")continue;const Mt=pt.source||"";let it=this.familiesBySource[Mt];it||(it=this.familiesBySource[Mt]={});const Et=pt.sourceLayer||"_geojsonTileLayer";let Vt=it[Et];Vt||(Vt=it[Et]=[]),Vt.push(Ae)}}}class l{constructor(ve){const ke={},Oe=[];for(const Mt in ve){const it=ve[Mt],Et=ke[Mt]={};for(const Vt in it){const Dt=it[+Vt];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const ln={x:0,y:0,w:Dt.bitmap.width+2,h:Dt.bitmap.height+2};Oe.push(ln),Et[Vt]={rect:ln,metrics:Dt.metrics}}}const{w:Me,h:Ae}=o.p(Oe),pt=new o.q({width:Me||1,height:Ae||1});for(const Mt in ve){const it=ve[Mt];for(const Et in it){const Vt=it[+Et];if(!Vt||Vt.bitmap.width===0||Vt.bitmap.height===0)continue;const Dt=ke[Mt][Et].rect;o.q.copy(Vt.bitmap,pt,{x:0,y:0},{x:Dt.x+1,y:Dt.y+1},Vt.bitmap)}}this.image=pt,this.positions=ke}}o.cs("GlyphAtlas",l);class c{constructor(ve){this.tileID=new o.Y(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId,this.inFlightDependencies=[]}parse(ve,ke,Oe,Me,Ae){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=ve,this.collisionBoxArray=new o.a5;const pt=new o.ct(Object.keys(ve.layers).sort()),Mt=new o.cu(this.tileID,this.promoteId);Mt.bucketLayerIDs=[];const it={},Et={featureIndex:Mt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Oe,subdivisionGranularity:Ae},Vt=ke.familiesBySource[this.source];for(const Qt in Vt){const St=ve.layers[Qt];if(!St)continue;St.version===1&&o.w(`Vector tile source "${this.source}" layer "${Qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const en=pt.encode(Qt),gr=[];for(let Tr=0;Tr<St.length;Tr++){const qr=St.feature(Tr),ar=Mt.getId(qr,Qt);gr.push({feature:qr,id:ar,index:Tr,sourceLayerIndex:en})}for(const Tr of Vt[Qt]){const qr=Tr[0];qr.source!==this.source&&o.w(`layer.source = ${qr.source} does not equal this.source = ${this.source}`),qr.minzoom&&this.zoom<Math.floor(qr.minzoom)||qr.maxzoom&&this.zoom>=qr.maxzoom||qr.visibility!=="none"&&(h(Tr,this.zoom,Oe),(it[qr.id]=qr.createBucket({index:Mt.bucketLayerIDs.length,layers:Tr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:en,sourceID:this.source})).populate(gr,Et,this.tileID.canonical),Mt.bucketLayerIDs.push(Tr.map(ar=>ar.id)))}}const Dt=o.bF(Et.glyphDependencies,Qt=>Object.keys(Qt).map(Number));this.inFlightDependencies.forEach(Qt=>Qt==null?void 0:Qt.abort()),this.inFlightDependencies=[];let ln=Promise.resolve({});if(Object.keys(Dt).length){const Qt=new AbortController;this.inFlightDependencies.push(Qt),ln=Me.sendAsync({type:"GG",data:{stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"}},Qt)}const kn=Object.keys(Et.iconDependencies);let Tn=Promise.resolve({});if(kn.length){const Qt=new AbortController;this.inFlightDependencies.push(Qt),Tn=Me.sendAsync({type:"GI",data:{icons:kn,source:this.source,tileID:this.tileID,type:"icons"}},Qt)}const Xn=Object.keys(Et.patternDependencies);let mr=Promise.resolve({});if(Xn.length){const Qt=new AbortController;this.inFlightDependencies.push(Qt),mr=Me.sendAsync({type:"GI",data:{icons:Xn,source:this.source,tileID:this.tileID,type:"patterns"}},Qt)}const[Yt,rr,zr]=yield Promise.all([ln,Tn,mr]),Ur=new l(Yt),Br=new o.cv(rr,zr);for(const Qt in it){const St=it[Qt];St instanceof o.a6?(h(St.layers,this.zoom,Oe),o.cw({bucket:St,glyphMap:Yt,glyphPositions:Ur.positions,imageMap:rr,imagePositions:Br.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Et.subdivisionGranularity})):St.hasPattern&&(St instanceof o.cx||St instanceof o.cy||St instanceof o.cz)&&(h(St.layers,this.zoom,Oe),St.addFeatures(Et,this.tileID.canonical,Br.patternPositions))}return this.status="done",{buckets:Object.values(it).filter(Qt=>!Qt.isEmpty()),featureIndex:Mt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ur.image,imageAtlas:Br,glyphMap:this.returnDependencies?Yt:null,iconMap:this.returnDependencies?rr:null,glyphPositions:this.returnDependencies?Ur.positions:null}})}}function h(Fe,ve,ke){const Oe=new o.C(ve);for(const Me of Fe)Me.recalculate(Oe,ke)}class f{constructor(ve,ke,Oe){this.actor=ve,this.layerIndex=ke,this.availableImages=Oe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ve,ke){return o._(this,void 0,void 0,function*(){const Oe=yield o.n(ve.request,ke);try{return{vectorTile:new o.cA.VectorTile(new o.cB(Oe.data)),rawData:Oe.data,cacheControl:Oe.cacheControl,expires:Oe.expires}}catch(Me){const Ae=new Uint8Array(Oe.data);let pt=`Unable to parse the tile at ${ve.request.url}, `;throw pt+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Me.message}`,new Error(pt)}})}loadTile(ve){return o._(this,void 0,void 0,function*(){const ke=ve.uid,Oe=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new o.cC(ve.request),Me=new c(ve);this.loading[ke]=Me;const Ae=new AbortController;Me.abort=Ae;try{const pt=yield this.loadVectorTile(ve,Ae);if(delete this.loading[ke],!pt)return null;const Mt=pt.rawData,it={};pt.expires&&(it.expires=pt.expires),pt.cacheControl&&(it.cacheControl=pt.cacheControl);const Et={};if(Oe){const Dt=Oe.finish();Dt&&(Et.resourceTiming=JSON.parse(JSON.stringify(Dt)))}Me.vectorTile=pt.vectorTile;const Vt=Me.parse(pt.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity);this.loaded[ke]=Me,this.fetching[ke]={rawTileData:Mt,cacheControl:it,resourceTiming:Et};try{const Dt=yield Vt;return o.e({rawTileData:Mt.slice(0)},Dt,it,Et)}finally{delete this.fetching[ke]}}catch(pt){throw delete this.loading[ke],Me.status="done",this.loaded[ke]=Me,pt}})}reloadTile(ve){return o._(this,void 0,void 0,function*(){const ke=ve.uid;if(!this.loaded||!this.loaded[ke])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Oe=this.loaded[ke];if(Oe.showCollisionBoxes=ve.showCollisionBoxes,Oe.status==="parsing"){const Me=yield Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity);let Ae;if(this.fetching[ke]){const{rawTileData:pt,cacheControl:Mt,resourceTiming:it}=this.fetching[ke];delete this.fetching[ke],Ae=o.e({rawTileData:pt.slice(0)},Me,Mt,it)}else Ae=Me;return Ae}if(Oe.status==="done"&&Oe.vectorTile)return Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity)})}abortTile(ve){return o._(this,void 0,void 0,function*(){const ke=this.loading,Oe=ve.uid;ke&&ke[Oe]&&ke[Oe].abort&&(ke[Oe].abort.abort(),delete ke[Oe])})}removeTile(ve){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ve.uid]&&delete this.loaded[ve.uid]})}}class p{constructor(){this.loaded={}}loadTile(ve){return o._(this,void 0,void 0,function*(){const{uid:ke,encoding:Oe,rawImageData:Me,redFactor:Ae,greenFactor:pt,blueFactor:Mt,baseShift:it}=ve,Et=Me.width+2,Vt=Me.height+2,Dt=o.b(Me)?new o.R({width:Et,height:Vt},yield o.cD(Me,-1,-1,Et,Vt)):Me,ln=new o.cE(ke,Dt,Oe,Ae,pt,Mt,it);return this.loaded=this.loaded||{},this.loaded[ke]=ln,ln})}removeTile(ve){const ke=this.loaded,Oe=ve.uid;ke&&ke[Oe]&&delete ke[Oe]}}var v,_,b=function(){if(_)return v;function Fe(ke,Oe){if(ke.length!==0){ve(ke[0],Oe);for(var Me=1;Me<ke.length;Me++)ve(ke[Me],!Oe)}}function ve(ke,Oe){for(var Me=0,Ae=0,pt=0,Mt=ke.length,it=Mt-1;pt<Mt;it=pt++){var Et=(ke[pt][0]-ke[it][0])*(ke[it][1]+ke[pt][1]),Vt=Me+Et;Ae+=Math.abs(Me)>=Math.abs(Et)?Me-Vt+Et:Et-Vt+Me,Me=Vt}Me+Ae>=0!=!!Oe&&ke.reverse()}return _=1,v=function ke(Oe,Me){var Ae,pt=Oe&&Oe.type;if(pt==="FeatureCollection")for(Ae=0;Ae<Oe.features.length;Ae++)ke(Oe.features[Ae],Me);else if(pt==="GeometryCollection")for(Ae=0;Ae<Oe.geometries.length;Ae++)ke(Oe.geometries[Ae],Me);else if(pt==="Feature")ke(Oe.geometry,Me);else if(pt==="Polygon")Fe(Oe.coordinates,Me);else if(pt==="MultiPolygon")for(Ae=0;Ae<Oe.coordinates.length;Ae++)Fe(Oe.coordinates[Ae],Me);return Oe}}(),C=o.cF(b);const T=o.cA.VectorTileFeature.prototype.toGeoJSON;class E{constructor(ve){this._feature=ve,this.extent=o.Z,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))}loadGeometry(){if(this._feature.type===1){const ve=[];for(const ke of this._feature.geometry)ve.push([new o.P(ke[0],ke[1])]);return ve}{const ve=[];for(const ke of this._feature.geometry){const Oe=[];for(const Me of ke)Oe.push(new o.P(Me[0],Me[1]));ve.push(Oe)}return ve}}toGeoJSON(ve,ke,Oe){return T.call(this,ve,ke,Oe)}}class A{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.Z,this.length=ve.length,this._features=ve}feature(ve){return new E(this._features[ve])}}var I,O,B,N={exports:{}},H=function(){if(B)return N.exports;B=1;var Fe=o.cI(),ve=function(){if(O)return I;O=1;var Vt=o.cG(),Dt=o.cH().VectorTileFeature;function ln(Tn,Xn){this.options=Xn||{},this.features=Tn,this.length=Tn.length}function kn(Tn,Xn){this.id=typeof Tn.id=="number"?Tn.id:void 0,this.type=Tn.type,this.rawGeometry=Tn.type===1?[Tn.geometry]:Tn.geometry,this.properties=Tn.tags,this.extent=Xn||4096}return I=ln,ln.prototype.feature=function(Tn){return new kn(this.features[Tn],this.options.extent)},kn.prototype.loadGeometry=function(){var Tn=this.rawGeometry;this.geometry=[];for(var Xn=0;Xn<Tn.length;Xn++){for(var mr=Tn[Xn],Yt=[],rr=0;rr<mr.length;rr++)Yt.push(new Vt(mr[rr][0],mr[rr][1]));this.geometry.push(Yt)}return this.geometry},kn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Tn=this.geometry,Xn=1/0,mr=-1/0,Yt=1/0,rr=-1/0,zr=0;zr<Tn.length;zr++)for(var Ur=Tn[zr],Br=0;Br<Ur.length;Br++){var Qt=Ur[Br];Xn=Math.min(Xn,Qt.x),mr=Math.max(mr,Qt.x),Yt=Math.min(Yt,Qt.y),rr=Math.max(rr,Qt.y)}return[Xn,Yt,mr,rr]},kn.prototype.toGeoJSON=Dt.prototype.toGeoJSON,I}();function ke(Vt){var Dt=new Fe;return function(ln,kn){for(var Tn in ln.layers)kn.writeMessage(3,Oe,ln.layers[Tn])}(Vt,Dt),Dt.finish()}function Oe(Vt,Dt){var ln;Dt.writeVarintField(15,Vt.version||1),Dt.writeStringField(1,Vt.name||""),Dt.writeVarintField(5,Vt.extent||4096);var kn={keys:[],values:[],keycache:{},valuecache:{}};for(ln=0;ln<Vt.length;ln++)kn.feature=Vt.feature(ln),Dt.writeMessage(2,Me,kn);var Tn=kn.keys;for(ln=0;ln<Tn.length;ln++)Dt.writeStringField(3,Tn[ln]);var Xn=kn.values;for(ln=0;ln<Xn.length;ln++)Dt.writeMessage(4,Et,Xn[ln])}function Me(Vt,Dt){var ln=Vt.feature;ln.id!==void 0&&Dt.writeVarintField(1,ln.id),Dt.writeMessage(2,Ae,Vt),Dt.writeVarintField(3,ln.type),Dt.writeMessage(4,it,ln)}function Ae(Vt,Dt){var ln=Vt.feature,kn=Vt.keys,Tn=Vt.values,Xn=Vt.keycache,mr=Vt.valuecache;for(var Yt in ln.properties){var rr=ln.properties[Yt],zr=Xn[Yt];if(rr!==null){zr===void 0&&(kn.push(Yt),Xn[Yt]=zr=kn.length-1),Dt.writeVarint(zr);var Ur=typeof rr;Ur!=="string"&&Ur!=="boolean"&&Ur!=="number"&&(rr=JSON.stringify(rr));var Br=Ur+":"+rr,Qt=mr[Br];Qt===void 0&&(Tn.push(rr),mr[Br]=Qt=Tn.length-1),Dt.writeVarint(Qt)}}}function pt(Vt,Dt){return(Dt<<3)+(7&Vt)}function Mt(Vt){return Vt<<1^Vt>>31}function it(Vt,Dt){for(var ln=Vt.loadGeometry(),kn=Vt.type,Tn=0,Xn=0,mr=ln.length,Yt=0;Yt<mr;Yt++){var rr=ln[Yt],zr=1;kn===1&&(zr=rr.length),Dt.writeVarint(pt(1,zr));for(var Ur=kn===3?rr.length-1:rr.length,Br=0;Br<Ur;Br++){Br===1&&kn!==1&&Dt.writeVarint(pt(2,Ur-1));var Qt=rr[Br].x-Tn,St=rr[Br].y-Xn;Dt.writeVarint(Mt(Qt)),Dt.writeVarint(Mt(St)),Tn+=Qt,Xn+=St}kn===3&&Dt.writeVarint(pt(7,1))}}function Et(Vt,Dt){var ln=typeof Vt;ln==="string"?Dt.writeStringField(1,Vt):ln==="boolean"?Dt.writeBooleanField(7,Vt):ln==="number"&&(Vt%1!=0?Dt.writeDoubleField(3,Vt):Vt<0?Dt.writeSVarintField(6,Vt):Dt.writeVarintField(5,Vt))}return N.exports=ke,N.exports.fromVectorTileJs=ke,N.exports.fromGeojsonVt=function(Vt,Dt){Dt=Dt||{};var ln={};for(var kn in Vt)ln[kn]=new ve(Vt[kn].features,Dt),ln[kn].name=kn,ln[kn].version=Dt.version,ln[kn].extent=Dt.extent;return ke({layers:ln})},N.exports.GeoJSONWrapper=ve,N.exports}(),j=o.cF(H);const W={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Fe=>Fe},U=Math.fround||(Y=new Float32Array(1),Fe=>(Y[0]=+Fe,Y[0]));var Y;const ie=3,ue=5,J=6;class q{constructor(ve){this.options=Object.assign(Object.create(W),ve),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ve){const{log:ke,minZoom:Oe,maxZoom:Me}=this.options;ke&&console.time("total time");const Ae=`prepare ${ve.length} points`;ke&&console.time(Ae),this.points=ve;const pt=[];for(let it=0;it<ve.length;it++){const Et=ve[it];if(!Et.geometry)continue;const[Vt,Dt]=Et.geometry.coordinates,ln=U(ee(Vt)),kn=U(oe(Dt));pt.push(ln,kn,1/0,it,-1,1),this.options.reduce&&pt.push(0)}let Mt=this.trees[Me+1]=this._createTree(pt);ke&&console.timeEnd(Ae);for(let it=Me;it>=Oe;it--){const Et=+Date.now();Mt=this.trees[it]=this._createTree(this._cluster(Mt,it)),ke&&console.log("z%d: %d clusters in %dms",it,Mt.numItems,+Date.now()-Et)}return ke&&console.timeEnd("total time"),this}getClusters(ve,ke){let Oe=((ve[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,ve[1]));let Ae=ve[2]===180?180:((ve[2]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)Oe=-180,Ae=180;else if(Oe>Ae){const Dt=this.getClusters([Oe,Me,180,pt],ke),ln=this.getClusters([-180,Me,Ae,pt],ke);return Dt.concat(ln)}const Mt=this.trees[this._limitZoom(ke)],it=Mt.range(ee(Oe),oe(pt),ee(Ae),oe(Me)),Et=Mt.data,Vt=[];for(const Dt of it){const ln=this.stride*Dt;Vt.push(Et[ln+ue]>1?ce(Et,ln,this.clusterProps):this.points[Et[ln+ie]])}return Vt}getChildren(ve){const ke=this._getOriginId(ve),Oe=this._getOriginZoom(ve),Me="No cluster with the specified id.",Ae=this.trees[Oe];if(!Ae)throw new Error(Me);const pt=Ae.data;if(ke*this.stride>=pt.length)throw new Error(Me);const Mt=this.options.radius/(this.options.extent*Math.pow(2,Oe-1)),it=Ae.within(pt[ke*this.stride],pt[ke*this.stride+1],Mt),Et=[];for(const Vt of it){const Dt=Vt*this.stride;pt[Dt+4]===ve&&Et.push(pt[Dt+ue]>1?ce(pt,Dt,this.clusterProps):this.points[pt[Dt+ie]])}if(Et.length===0)throw new Error(Me);return Et}getLeaves(ve,ke,Oe){const Me=[];return this._appendLeaves(Me,ve,ke=ke||10,Oe=Oe||0,0),Me}getTile(ve,ke,Oe){const Me=this.trees[this._limitZoom(ve)],Ae=Math.pow(2,ve),{extent:pt,radius:Mt}=this.options,it=Mt/pt,Et=(Oe-it)/Ae,Vt=(Oe+1+it)/Ae,Dt={features:[]};return this._addTileFeatures(Me.range((ke-it)/Ae,Et,(ke+1+it)/Ae,Vt),Me.data,ke,Oe,Ae,Dt),ke===0&&this._addTileFeatures(Me.range(1-it/Ae,Et,1,Vt),Me.data,Ae,Oe,Ae,Dt),ke===Ae-1&&this._addTileFeatures(Me.range(0,Et,it/Ae,Vt),Me.data,-1,Oe,Ae,Dt),Dt.features.length?Dt:null}getClusterExpansionZoom(ve){let ke=this._getOriginZoom(ve)-1;for(;ke<=this.options.maxZoom;){const Oe=this.getChildren(ve);if(ke++,Oe.length!==1)break;ve=Oe[0].properties.cluster_id}return ke}_appendLeaves(ve,ke,Oe,Me,Ae){const pt=this.getChildren(ke);for(const Mt of pt){const it=Mt.properties;if(it&&it.cluster?Ae+it.point_count<=Me?Ae+=it.point_count:Ae=this._appendLeaves(ve,it.cluster_id,Oe,Me,Ae):Ae<Me?Ae++:ve.push(Mt),ve.length===Oe)break}return Ae}_createTree(ve){const ke=new o.aF(ve.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Oe=0;Oe<ve.length;Oe+=this.stride)ke.add(ve[Oe],ve[Oe+1]);return ke.finish(),ke.data=ve,ke}_addTileFeatures(ve,ke,Oe,Me,Ae,pt){for(const Mt of ve){const it=Mt*this.stride,Et=ke[it+ue]>1;let Vt,Dt,ln;if(Et)Vt=re(ke,it,this.clusterProps),Dt=ke[it],ln=ke[it+1];else{const Xn=this.points[ke[it+ie]];Vt=Xn.properties;const[mr,Yt]=Xn.geometry.coordinates;Dt=ee(mr),ln=oe(Yt)}const kn={type:1,geometry:[[Math.round(this.options.extent*(Dt*Ae-Oe)),Math.round(this.options.extent*(ln*Ae-Me))]],tags:Vt};let Tn;Tn=Et||this.options.generateId?ke[it+ie]:this.points[ke[it+ie]].id,Tn!==void 0&&(kn.id=Tn),pt.features.push(kn)}}_limitZoom(ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+ve),this.options.maxZoom+1))}_cluster(ve,ke){const{radius:Oe,extent:Me,reduce:Ae,minPoints:pt}=this.options,Mt=Oe/(Me*Math.pow(2,ke)),it=ve.data,Et=[],Vt=this.stride;for(let Dt=0;Dt<it.length;Dt+=Vt){if(it[Dt+2]<=ke)continue;it[Dt+2]=ke;const ln=it[Dt],kn=it[Dt+1],Tn=ve.within(it[Dt],it[Dt+1],Mt),Xn=it[Dt+ue];let mr=Xn;for(const Yt of Tn){const rr=Yt*Vt;it[rr+2]>ke&&(mr+=it[rr+ue])}if(mr>Xn&&mr>=pt){let Yt,rr=ln*Xn,zr=kn*Xn,Ur=-1;const Br=((Dt/Vt|0)<<5)+(ke+1)+this.points.length;for(const Qt of Tn){const St=Qt*Vt;if(it[St+2]<=ke)continue;it[St+2]=ke;const en=it[St+ue];rr+=it[St]*en,zr+=it[St+1]*en,it[St+4]=Br,Ae&&(Yt||(Yt=this._map(it,Dt,!0),Ur=this.clusterProps.length,this.clusterProps.push(Yt)),Ae(Yt,this._map(it,St)))}it[Dt+4]=Br,Et.push(rr/mr,zr/mr,1/0,Br,-1,mr),Ae&&Et.push(Ur)}else{for(let Yt=0;Yt<Vt;Yt++)Et.push(it[Dt+Yt]);if(mr>1)for(const Yt of Tn){const rr=Yt*Vt;if(!(it[rr+2]<=ke)){it[rr+2]=ke;for(let zr=0;zr<Vt;zr++)Et.push(it[rr+zr])}}}}return Et}_getOriginId(ve){return ve-this.points.length>>5}_getOriginZoom(ve){return(ve-this.points.length)%32}_map(ve,ke,Oe){if(ve[ke+ue]>1){const pt=this.clusterProps[ve[ke+J]];return Oe?Object.assign({},pt):pt}const Me=this.points[ve[ke+ie]].properties,Ae=this.options.map(Me);return Oe&&Ae===Me?Object.assign({},Ae):Ae}}function ce(Fe,ve,ke){return{type:"Feature",id:Fe[ve+ie],properties:re(Fe,ve,ke),geometry:{type:"Point",coordinates:[(Oe=Fe[ve],360*(Oe-.5)),be(Fe[ve+1])]}};var Oe}function re(Fe,ve,ke){const Oe=Fe[ve+ue],Me=Oe>=1e4?`${Math.round(Oe/1e3)}k`:Oe>=1e3?Math.round(Oe/100)/10+"k":Oe,Ae=Fe[ve+J],pt=Ae===-1?{}:Object.assign({},ke[Ae]);return Object.assign(pt,{cluster:!0,cluster_id:Fe[ve+ie],point_count:Oe,point_count_abbreviated:Me})}function ee(Fe){return Fe/360+.5}function oe(Fe){const ve=Math.sin(Fe*Math.PI/180),ke=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return ke<0?0:ke>1?1:ke}function be(Fe){const ve=(180-360*Fe)*Math.PI/180;return 360*Math.atan(Math.exp(ve))/Math.PI-90}function we(Fe,ve,ke,Oe){let Me=Oe;const Ae=ve+(ke-ve>>1);let pt,Mt=ke-ve;const it=Fe[ve],Et=Fe[ve+1],Vt=Fe[ke],Dt=Fe[ke+1];for(let ln=ve+3;ln<ke;ln+=3){const kn=pe(Fe[ln],Fe[ln+1],it,Et,Vt,Dt);if(kn>Me)pt=ln,Me=kn;else if(kn===Me){const Tn=Math.abs(ln-Ae);Tn<Mt&&(pt=ln,Mt=Tn)}}Me>Oe&&(pt-ve>3&&we(Fe,ve,pt,Oe),Fe[pt+2]=Me,ke-pt>3&&we(Fe,pt,ke,Oe))}function pe(Fe,ve,ke,Oe,Me,Ae){let pt=Me-ke,Mt=Ae-Oe;if(pt!==0||Mt!==0){const it=((Fe-ke)*pt+(ve-Oe)*Mt)/(pt*pt+Mt*Mt);it>1?(ke=Me,Oe=Ae):it>0&&(ke+=pt*it,Oe+=Mt*it)}return pt=Fe-ke,Mt=ve-Oe,pt*pt+Mt*Mt}function Ce(Fe,ve,ke,Oe){const Me={id:Fe??null,type:ve,geometry:ke,tags:Oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Ve(Me,ke);else if(ve==="Polygon")Ve(Me,ke[0]);else if(ve==="MultiLineString")for(const Ae of ke)Ve(Me,Ae);else if(ve==="MultiPolygon")for(const Ae of ke)Ve(Me,Ae[0]);return Me}function Ve(Fe,ve){for(let ke=0;ke<ve.length;ke+=3)Fe.minX=Math.min(Fe.minX,ve[ke]),Fe.minY=Math.min(Fe.minY,ve[ke+1]),Fe.maxX=Math.max(Fe.maxX,ve[ke]),Fe.maxY=Math.max(Fe.maxY,ve[ke+1])}function et(Fe,ve,ke,Oe){if(!ve.geometry)return;const Me=ve.geometry.coordinates;if(Me&&Me.length===0)return;const Ae=ve.geometry.type,pt=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2);let Mt=[],it=ve.id;if(ke.promoteId?it=ve.properties[ke.promoteId]:ke.generateId&&(it=Oe||0),Ae==="Point")Ee(Me,Mt);else if(Ae==="MultiPoint")for(const Et of Me)Ee(Et,Mt);else if(Ae==="LineString")Je(Me,Mt,pt,!1);else if(Ae==="MultiLineString"){if(ke.lineMetrics){for(const Et of Me)Mt=[],Je(Et,Mt,pt,!1),Fe.push(Ce(it,"LineString",Mt,ve.properties));return}Ue(Me,Mt,pt,!1)}else if(Ae==="Polygon")Ue(Me,Mt,pt,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const Et of ve.geometry.geometries)et(Fe,{id:it,geometry:Et,properties:ve.properties},ke,Oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Et of Me){const Vt=[];Ue(Et,Vt,pt,!0),Mt.push(Vt)}}Fe.push(Ce(it,Ae,Mt,ve.properties))}function Ee(Fe,ve){ve.push(yt(Fe[0]),Ne(Fe[1]),0)}function Je(Fe,ve,ke,Oe){let Me,Ae,pt=0;for(let it=0;it<Fe.length;it++){const Et=yt(Fe[it][0]),Vt=Ne(Fe[it][1]);ve.push(Et,Vt,0),it>0&&(pt+=Oe?(Me*Vt-Et*Ae)/2:Math.sqrt(Math.pow(Et-Me,2)+Math.pow(Vt-Ae,2))),Me=Et,Ae=Vt}const Mt=ve.length-3;ve[2]=1,we(ve,0,Mt,ke),ve[Mt+2]=1,ve.size=Math.abs(pt),ve.start=0,ve.end=ve.size}function Ue(Fe,ve,ke,Oe){for(let Me=0;Me<Fe.length;Me++){const Ae=[];Je(Fe[Me],Ae,ke,Oe),ve.push(Ae)}}function yt(Fe){return Fe/360+.5}function Ne(Fe){const ve=Math.sin(Fe*Math.PI/180),ke=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return ke<0?0:ke>1?1:ke}function dt(Fe,ve,ke,Oe,Me,Ae,pt,Mt){if(Oe/=ve,Ae>=(ke/=ve)&&pt<Oe)return Fe;if(pt<ke||Ae>=Oe)return null;const it=[];for(const Et of Fe){const Vt=Et.geometry;let Dt=Et.type;const ln=Me===0?Et.minX:Et.minY,kn=Me===0?Et.maxX:Et.maxY;if(ln>=ke&&kn<Oe){it.push(Et);continue}if(kn<ke||ln>=Oe)continue;let Tn=[];if(Dt==="Point"||Dt==="MultiPoint")Le(Vt,Tn,ke,Oe,Me);else if(Dt==="LineString")ze(Vt,Tn,ke,Oe,Me,!1,Mt.lineMetrics);else if(Dt==="MultiLineString")Lt(Vt,Tn,ke,Oe,Me,!1);else if(Dt==="Polygon")Lt(Vt,Tn,ke,Oe,Me,!0);else if(Dt==="MultiPolygon")for(const Xn of Vt){const mr=[];Lt(Xn,mr,ke,Oe,Me,!0),mr.length&&Tn.push(mr)}if(Tn.length){if(Mt.lineMetrics&&Dt==="LineString"){for(const Xn of Tn)it.push(Ce(Et.id,Dt,Xn,Et.tags));continue}Dt!=="LineString"&&Dt!=="MultiLineString"||(Tn.length===1?(Dt="LineString",Tn=Tn[0]):Dt="MultiLineString"),Dt!=="Point"&&Dt!=="MultiPoint"||(Dt=Tn.length===3?"Point":"MultiPoint"),it.push(Ce(Et.id,Dt,Tn,Et.tags))}}return it.length?it:null}function Le(Fe,ve,ke,Oe,Me){for(let Ae=0;Ae<Fe.length;Ae+=3){const pt=Fe[Ae+Me];pt>=ke&&pt<=Oe&&lt(ve,Fe[Ae],Fe[Ae+1],Fe[Ae+2])}}function ze(Fe,ve,ke,Oe,Me,Ae,pt){let Mt=ct(Fe);const it=Me===0?Ct:_t;let Et,Vt,Dt=Fe.start;for(let mr=0;mr<Fe.length-3;mr+=3){const Yt=Fe[mr],rr=Fe[mr+1],zr=Fe[mr+2],Ur=Fe[mr+3],Br=Fe[mr+4],Qt=Me===0?Yt:rr,St=Me===0?Ur:Br;let en=!1;pt&&(Et=Math.sqrt(Math.pow(Yt-Ur,2)+Math.pow(rr-Br,2))),Qt<ke?St>ke&&(Vt=it(Mt,Yt,rr,Ur,Br,ke),pt&&(Mt.start=Dt+Et*Vt)):Qt>Oe?St<Oe&&(Vt=it(Mt,Yt,rr,Ur,Br,Oe),pt&&(Mt.start=Dt+Et*Vt)):lt(Mt,Yt,rr,zr),St<ke&&Qt>=ke&&(Vt=it(Mt,Yt,rr,Ur,Br,ke),en=!0),St>Oe&&Qt<=Oe&&(Vt=it(Mt,Yt,rr,Ur,Br,Oe),en=!0),!Ae&&en&&(pt&&(Mt.end=Dt+Et*Vt),ve.push(Mt),Mt=ct(Fe)),pt&&(Dt+=Et)}let ln=Fe.length-3;const kn=Fe[ln],Tn=Fe[ln+1],Xn=Me===0?kn:Tn;Xn>=ke&&Xn<=Oe&&lt(Mt,kn,Tn,Fe[ln+2]),ln=Mt.length-3,Ae&&ln>=3&&(Mt[ln]!==Mt[0]||Mt[ln+1]!==Mt[1])&&lt(Mt,Mt[0],Mt[1],Mt[2]),Mt.length&&ve.push(Mt)}function ct(Fe){const ve=[];return ve.size=Fe.size,ve.start=Fe.start,ve.end=Fe.end,ve}function Lt(Fe,ve,ke,Oe,Me,Ae){for(const pt of Fe)ze(pt,ve,ke,Oe,Me,Ae,!1)}function lt(Fe,ve,ke,Oe){Fe.push(ve,ke,Oe)}function Ct(Fe,ve,ke,Oe,Me,Ae){const pt=(Ae-ve)/(Oe-ve);return lt(Fe,Ae,ke+(Me-ke)*pt,1),pt}function _t(Fe,ve,ke,Oe,Me,Ae){const pt=(Ae-ke)/(Me-ke);return lt(Fe,ve+(Oe-ve)*pt,Ae,1),pt}function It(Fe,ve){const ke=[];for(let Oe=0;Oe<Fe.length;Oe++){const Me=Fe[Oe],Ae=Me.type;let pt;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")pt=Bt(Me.geometry,ve);else if(Ae==="MultiLineString"||Ae==="Polygon"){pt=[];for(const Mt of Me.geometry)pt.push(Bt(Mt,ve))}else if(Ae==="MultiPolygon"){pt=[];for(const Mt of Me.geometry){const it=[];for(const Et of Mt)it.push(Bt(Et,ve));pt.push(it)}}ke.push(Ce(Me.id,Ae,pt,Me.tags))}return ke}function Bt(Fe,ve){const ke=[];ke.size=Fe.size,Fe.start!==void 0&&(ke.start=Fe.start,ke.end=Fe.end);for(let Oe=0;Oe<Fe.length;Oe+=3)ke.push(Fe[Oe]+ve,Fe[Oe+1],Fe[Oe+2]);return ke}function Ft(Fe,ve){if(Fe.transformed)return Fe;const ke=1<<Fe.z,Oe=Fe.x,Me=Fe.y;for(const Ae of Fe.features){const pt=Ae.geometry,Mt=Ae.type;if(Ae.geometry=[],Mt===1)for(let it=0;it<pt.length;it+=2)Ae.geometry.push(cn(pt[it],pt[it+1],ve,ke,Oe,Me));else for(let it=0;it<pt.length;it++){const Et=[];for(let Vt=0;Vt<pt[it].length;Vt+=2)Et.push(cn(pt[it][Vt],pt[it][Vt+1],ve,ke,Oe,Me));Ae.geometry.push(Et)}}return Fe.transformed=!0,Fe}function cn(Fe,ve,ke,Oe,Me,Ae){return[Math.round(ke*(Fe*Oe-Me)),Math.round(ke*(ve*Oe-Ae))]}function Ot(Fe,ve,ke,Oe,Me){const Ae=ve===Me.maxZoom?0:Me.tolerance/((1<<ve)*Me.extent),pt={features:[],numPoints:0,numSimplified:0,numFeatures:Fe.length,source:null,x:ke,y:Oe,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Mt of Fe)kt(pt,Mt,Ae,Me);return pt}function kt(Fe,ve,ke,Oe){const Me=ve.geometry,Ae=ve.type,pt=[];if(Fe.minX=Math.min(Fe.minX,ve.minX),Fe.minY=Math.min(Fe.minY,ve.minY),Fe.maxX=Math.max(Fe.maxX,ve.maxX),Fe.maxY=Math.max(Fe.maxY,ve.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Mt=0;Mt<Me.length;Mt+=3)pt.push(Me[Mt],Me[Mt+1]),Fe.numPoints++,Fe.numSimplified++;else if(Ae==="LineString")fn(pt,Me,Fe,ke,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Mt=0;Mt<Me.length;Mt++)fn(pt,Me[Mt],Fe,ke,Ae==="Polygon",Mt===0);else if(Ae==="MultiPolygon")for(let Mt=0;Mt<Me.length;Mt++){const it=Me[Mt];for(let Et=0;Et<it.length;Et++)fn(pt,it[Et],Fe,ke,!0,Et===0)}if(pt.length){let Mt=ve.tags||null;if(Ae==="LineString"&&Oe.lineMetrics){Mt={};for(const Et in ve.tags)Mt[Et]=ve.tags[Et];Mt.mapbox_clip_start=Me.start/Me.size,Mt.mapbox_clip_end=Me.end/Me.size}const it={geometry:pt,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Mt};ve.id!==null&&(it.id=ve.id),Fe.features.push(it)}}function fn(Fe,ve,ke,Oe,Me,Ae){const pt=Oe*Oe;if(Oe>0&&ve.size<(Me?pt:Oe))return void(ke.numPoints+=ve.length/3);const Mt=[];for(let it=0;it<ve.length;it+=3)(Oe===0||ve[it+2]>pt)&&(ke.numSimplified++,Mt.push(ve[it],ve[it+1])),ke.numPoints++;Me&&function(it,Et){let Vt=0;for(let Dt=0,ln=it.length,kn=ln-2;Dt<ln;kn=Dt,Dt+=2)Vt+=(it[Dt]-it[kn])*(it[Dt+1]+it[kn+1]);if(Vt>0===Et)for(let Dt=0,ln=it.length;Dt<ln/2;Dt+=2){const kn=it[Dt],Tn=it[Dt+1];it[Dt]=it[ln-2-Dt],it[Dt+1]=it[ln-1-Dt],it[ln-2-Dt]=kn,it[ln-1-Dt]=Tn}}(Mt,Ae),Fe.push(Mt)}const Rn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class On{constructor(ve,ke){const Oe=(ke=this.options=function(Ae,pt){for(const Mt in pt)Ae[Mt]=pt[Mt];return Ae}(Object.create(Rn),ke)).debug;if(Oe&&console.time("preprocess data"),ke.maxZoom<0||ke.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ke.promoteId&&ke.generateId)throw new Error("promoteId and generateId cannot be used together.");let Me=function(Ae,pt){const Mt=[];if(Ae.type==="FeatureCollection")for(let it=0;it<Ae.features.length;it++)et(Mt,Ae.features[it],pt,it);else et(Mt,Ae.type==="Feature"?Ae:{geometry:Ae},pt);return Mt}(ve,ke);this.tiles={},this.tileCoords=[],Oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ke.indexMaxZoom,ke.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Me=function(Ae,pt){const Mt=pt.buffer/pt.extent;let it=Ae;const Et=dt(Ae,1,-1-Mt,Mt,0,-1,2,pt),Vt=dt(Ae,1,1-Mt,2+Mt,0,-1,2,pt);return(Et||Vt)&&(it=dt(Ae,1,-Mt,1+Mt,0,-1,2,pt)||[],Et&&(it=It(Et,1).concat(it)),Vt&&(it=it.concat(It(Vt,-1)))),it}(Me,ke),Me.length&&this.splitTile(Me,0,0,0),Oe&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ve,ke,Oe,Me,Ae,pt,Mt){const it=[ve,ke,Oe,Me],Et=this.options,Vt=Et.debug;for(;it.length;){Me=it.pop(),Oe=it.pop(),ke=it.pop(),ve=it.pop();const Dt=1<<ke,ln=mt(ke,Oe,Me);let kn=this.tiles[ln];if(!kn&&(Vt>1&&console.time("creation"),kn=this.tiles[ln]=Ot(ve,ke,Oe,Me,Et),this.tileCoords.push({z:ke,x:Oe,y:Me}),Vt)){Vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ke,Oe,Me,kn.numFeatures,kn.numPoints,kn.numSimplified),console.timeEnd("creation"));const en=`z${ke}`;this.stats[en]=(this.stats[en]||0)+1,this.total++}if(kn.source=ve,Ae==null){if(ke===Et.indexMaxZoom||kn.numPoints<=Et.indexMaxPoints)continue}else{if(ke===Et.maxZoom||ke===Ae)continue;if(Ae!=null){const en=Ae-ke;if(Oe!==pt>>en||Me!==Mt>>en)continue}}if(kn.source=null,ve.length===0)continue;Vt>1&&console.time("clipping");const Tn=.5*Et.buffer/Et.extent,Xn=.5-Tn,mr=.5+Tn,Yt=1+Tn;let rr=null,zr=null,Ur=null,Br=null,Qt=dt(ve,Dt,Oe-Tn,Oe+mr,0,kn.minX,kn.maxX,Et),St=dt(ve,Dt,Oe+Xn,Oe+Yt,0,kn.minX,kn.maxX,Et);ve=null,Qt&&(rr=dt(Qt,Dt,Me-Tn,Me+mr,1,kn.minY,kn.maxY,Et),zr=dt(Qt,Dt,Me+Xn,Me+Yt,1,kn.minY,kn.maxY,Et),Qt=null),St&&(Ur=dt(St,Dt,Me-Tn,Me+mr,1,kn.minY,kn.maxY,Et),Br=dt(St,Dt,Me+Xn,Me+Yt,1,kn.minY,kn.maxY,Et),St=null),Vt>1&&console.timeEnd("clipping"),it.push(rr||[],ke+1,2*Oe,2*Me),it.push(zr||[],ke+1,2*Oe,2*Me+1),it.push(Ur||[],ke+1,2*Oe+1,2*Me),it.push(Br||[],ke+1,2*Oe+1,2*Me+1)}}getTile(ve,ke,Oe){ve=+ve,ke=+ke,Oe=+Oe;const Me=this.options,{extent:Ae,debug:pt}=Me;if(ve<0||ve>24)return null;const Mt=1<<ve,it=mt(ve,ke=ke+Mt&Mt-1,Oe);if(this.tiles[it])return Ft(this.tiles[it],Ae);pt>1&&console.log("drilling down to z%d-%d-%d",ve,ke,Oe);let Et,Vt=ve,Dt=ke,ln=Oe;for(;!Et&&Vt>0;)Vt--,Dt>>=1,ln>>=1,Et=this.tiles[mt(Vt,Dt,ln)];return Et&&Et.source?(pt>1&&(console.log("found parent tile z%d-%d-%d",Vt,Dt,ln),console.time("drilling down")),this.splitTile(Et.source,Vt,Dt,ln,ve,ke,Oe),pt>1&&console.timeEnd("drilling down"),this.tiles[it]?Ft(this.tiles[it],Ae):null):null}}function mt(Fe,ve,ke){return 32*((1<<Fe)*ke+ve)+Fe}function Gt(Fe,ve){return ve?Fe.properties[ve]:Fe.id}function gn(Fe,ve){if(Fe==null)return!0;if(Fe.type==="Feature")return Gt(Fe,ve)!=null;if(Fe.type==="FeatureCollection"){const ke=new Set;for(const Oe of Fe.features){const Me=Gt(Oe,ve);if(Me==null||ke.has(Me))return!1;ke.add(Me)}return!0}return!1}function xt(Fe,ve){const ke=new Map;if(Fe!=null)if(Fe.type==="Feature")ke.set(Gt(Fe,ve),Fe);else for(const Oe of Fe.features)ke.set(Gt(Oe,ve),Oe);return ke}class Zt extends f{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ve,ke){return o._(this,void 0,void 0,function*(){const Oe=ve.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Me=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!Me)return null;const Ae=new A(Me.features);let pt=j(Ae);return pt.byteOffset===0&&pt.byteLength===pt.buffer.byteLength||(pt=new Uint8Array(pt)),{vectorTile:Ae,rawData:pt.buffer}})}loadData(ve){return o._(this,void 0,void 0,function*(){var ke;(ke=this._pendingRequest)===null||ke===void 0||ke.abort();const Oe=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new o.cC(ve.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ve,this._pendingRequest),this._geoJSONIndex=ve.cluster?new q(function({superclusterOptions:pt,clusterProperties:Mt}){if(!Mt||!pt)return pt;const it={},Et={},Vt={accumulated:null,zoom:0},Dt={properties:null},ln=Object.keys(Mt);for(const kn of ln){const[Tn,Xn]=Mt[kn],mr=o.cJ(Xn),Yt=o.cJ(typeof Tn=="string"?[Tn,["accumulated"],["get",kn]]:Tn);it[kn]=mr.value,Et[kn]=Yt.value}return pt.map=kn=>{Dt.properties=kn;const Tn={};for(const Xn of ln)Tn[Xn]=it[Xn].evaluate(Vt,Dt);return Tn},pt.reduce=(kn,Tn)=>{Dt.properties=Tn;for(const Xn of ln)Vt.accumulated=kn[Xn],kn[Xn]=Et[Xn].evaluate(Vt,Dt)},pt}(ve)).load((yield this._pendingData).features):(Me=yield this._pendingData,new On(Me,ve.geojsonVtOptions)),this.loaded={};const Ae={};if(Oe){const pt=Oe.finish();pt&&(Ae.resourceTiming={},Ae.resourceTiming[ve.source]=JSON.parse(JSON.stringify(pt)))}return Ae}catch(Ae){if(delete this._pendingRequest,o.cn(Ae))return{abandoned:!0};throw Ae}var Me})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ve){const ke=this.loaded;return ke&&ke[ve.uid]?super.reloadTile(ve):this.loadTile(ve)}loadAndProcessGeoJSON(ve,ke){return o._(this,void 0,void 0,function*(){let Oe=yield this.loadGeoJSON(ve,ke);if(delete this._pendingRequest,typeof Oe!="object")throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`);if(C(Oe,!0),ve.filter){const Me=o.cJ(ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Me.result==="error")throw new Error(Me.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));Oe={type:"FeatureCollection",features:Oe.features.filter(pt=>Me.value.evaluate({zoom:0},pt))}}return Oe})}loadGeoJSON(ve,ke){return o._(this,void 0,void 0,function*(){const{promoteId:Oe}=ve;if(ve.request){const Me=yield o.j(ve.request,ke);return this._dataUpdateable=gn(Me.data,Oe)?xt(Me.data,Oe):void 0,Me.data}if(typeof ve.data=="string")try{const Me=JSON.parse(ve.data);return this._dataUpdateable=gn(Me,Oe)?xt(Me,Oe):void 0,Me}catch{throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`)}if(!ve.dataDiff)throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ve.source}`);return function(Me,Ae,pt){var Mt,it,Et,Vt;if(Ae.removeAll&&Me.clear(),Ae.remove)for(const Dt of Ae.remove)Me.delete(Dt);if(Ae.add)for(const Dt of Ae.add){const ln=Gt(Dt,pt);ln!=null&&Me.set(ln,Dt)}if(Ae.update)for(const Dt of Ae.update){let ln=Me.get(Dt.id);if(ln==null)continue;const kn=!Dt.removeAllProperties&&(((Mt=Dt.removeProperties)===null||Mt===void 0?void 0:Mt.length)>0||((it=Dt.addOrUpdateProperties)===null||it===void 0?void 0:it.length)>0);if((Dt.newGeometry||Dt.removeAllProperties||kn)&&(ln=Object.assign({},ln),Me.set(Dt.id,ln),kn&&(ln.properties=Object.assign({},ln.properties))),Dt.newGeometry&&(ln.geometry=Dt.newGeometry),Dt.removeAllProperties)ln.properties={};else if(((Et=Dt.removeProperties)===null||Et===void 0?void 0:Et.length)>0)for(const Tn of Dt.removeProperties)Object.prototype.hasOwnProperty.call(ln.properties,Tn)&&delete ln.properties[Tn];if(((Vt=Dt.addOrUpdateProperties)===null||Vt===void 0?void 0:Vt.length)>0)for(const{key:Tn,value:Xn}of Dt.addOrUpdateProperties)ln.properties[Tn]=Xn}}(this._dataUpdateable,ve.dataDiff,Oe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ve){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ve){return this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId)}getClusterChildren(ve){return this._geoJSONIndex.getChildren(ve.clusterId)}getClusterLeaves(ve){return this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset)}}class Ze{constructor(ve){this.self=ve,this.actor=new o.H(ve),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ke,Oe)=>{if(this.externalWorkerSourceTypes[ke])throw new Error(`Worker source with name "${ke}" already registered.`);this.externalWorkerSourceTypes[ke]=Oe},this.self.addProtocol=o.cp,this.self.removeProtocol=o.cq,this.self.registerRTLTextPlugin=ke=>{o.cK.setMethods(ke)},this.actor.registerMessageHandler("LDT",(ke,Oe)=>this._getDEMWorkerSource(ke,Oe.source).loadTile(Oe)),this.actor.registerMessageHandler("RDT",(ke,Oe)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ke,Oe.source).removeTile(Oe)})),this.actor.registerMessageHandler("GCEZ",(ke,Oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,Oe.type,Oe.source).getClusterExpansionZoom(Oe)})),this.actor.registerMessageHandler("GCC",(ke,Oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,Oe.type,Oe.source).getClusterChildren(Oe)})),this.actor.registerMessageHandler("GCL",(ke,Oe)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,Oe.type,Oe.source).getClusterLeaves(Oe)})),this.actor.registerMessageHandler("LD",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).loadData(Oe)),this.actor.registerMessageHandler("GD",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).getData()),this.actor.registerMessageHandler("LT",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).loadTile(Oe)),this.actor.registerMessageHandler("RT",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).reloadTile(Oe)),this.actor.registerMessageHandler("AT",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).abortTile(Oe)),this.actor.registerMessageHandler("RMT",(ke,Oe)=>this._getWorkerSource(ke,Oe.type,Oe.source).removeTile(Oe)),this.actor.registerMessageHandler("RS",(ke,Oe)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[ke]||!this.workerSources[ke][Oe.type]||!this.workerSources[ke][Oe.type][Oe.source])return;const Me=this.workerSources[ke][Oe.type][Oe.source];delete this.workerSources[ke][Oe.type][Oe.source],Me.removeSource!==void 0&&Me.removeSource(Oe)})),this.actor.registerMessageHandler("RM",ke=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[ke],delete this.availableImages[ke],delete this.workerSources[ke],delete this.demWorkerSources[ke]})),this.actor.registerMessageHandler("SR",(ke,Oe)=>o._(this,void 0,void 0,function*(){this.referrer=Oe})),this.actor.registerMessageHandler("SRPS",(ke,Oe)=>this._syncRTLPluginState(ke,Oe)),this.actor.registerMessageHandler("IS",(ke,Oe)=>o._(this,void 0,void 0,function*(){this.self.importScripts(Oe)})),this.actor.registerMessageHandler("SI",(ke,Oe)=>this._setImages(ke,Oe)),this.actor.registerMessageHandler("UL",(ke,Oe)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(ke).update(Oe.layers,Oe.removedIds)})),this.actor.registerMessageHandler("SL",(ke,Oe)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(ke).replace(Oe)}))}_setImages(ve,ke){return o._(this,void 0,void 0,function*(){this.availableImages[ve]=ke;for(const Oe in this.workerSources[ve]){const Me=this.workerSources[ve][Oe];for(const Ae in Me)Me[Ae].availableImages=ke}})}_syncRTLPluginState(ve,ke){return o._(this,void 0,void 0,function*(){return yield o.cK.syncState(ke,this.self.importScripts)})}_getAvailableImages(ve){let ke=this.availableImages[ve];return ke||(ke=[]),ke}_getLayerIndex(ve){let ke=this.layerIndexes[ve];return ke||(ke=this.layerIndexes[ve]=new s),ke}_getWorkerSource(ve,ke,Oe){if(this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][ke]||(this.workerSources[ve][ke]={}),!this.workerSources[ve][ke][Oe]){const Me={sendAsync:(Ae,pt)=>(Ae.targetMapId=ve,this.actor.sendAsync(Ae,pt))};switch(ke){case"vector":this.workerSources[ve][ke][Oe]=new f(Me,this._getLayerIndex(ve),this._getAvailableImages(ve));break;case"geojson":this.workerSources[ve][ke][Oe]=new Zt(Me,this._getLayerIndex(ve),this._getAvailableImages(ve));break;default:this.workerSources[ve][ke][Oe]=new this.externalWorkerSourceTypes[ke](Me,this._getLayerIndex(ve),this._getAvailableImages(ve))}}return this.workerSources[ve][ke][Oe]}_getDEMWorkerSource(ve,ke){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][ke]||(this.demWorkerSources[ve][ke]=new p),this.demWorkerSources[ve][ke]}}return o.i(self)&&(self.worker=new Ze(self)),Ze}),i("index",["exports","./shared"],function(o,s){var l="5.4.0";function c(){var P=new s.A(4);return s.A!=Float32Array&&(P[1]=0,P[2]=0),P[0]=1,P[3]=1,P}let h,f;const p={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(P,u,m){const S=requestAnimationFrame(D=>{M(),u(D)}),{unsubscribe:M}=s.s(P.signal,"abort",()=>{M(),cancelAnimationFrame(S),m(s.c())},!1)},frameAsync(P){return new Promise((u,m)=>{this.frame(P,u,m)})},getImageData(P,u=0){return this.getImageCanvasContext(P).getImageData(-u,-u,P.width+2*u,P.height+2*u)},getImageCanvasContext(P){const u=window.document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return u.width=P.width,u.height=P.height,m.drawImage(P,0,0,P.width,P.height),m},resolveURL:P=>(h||(h=document.createElement("a")),h.href=P,h.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(f==null&&(f=matchMedia("(prefers-reduced-motion: reduce)")),f.matches)}};class v{static testProp(u){if(!v.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in v.docStyle)return u[m];return u[0]}static create(u,m,S){const M=window.document.createElement(u);return m!==void 0&&(M.className=m),S&&S.appendChild(M),M}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){v.docStyle&&v.selectProp&&(v.userSelect=v.docStyle[v.selectProp],v.docStyle[v.selectProp]="none")}static enableDrag(){v.docStyle&&v.selectProp&&(v.docStyle[v.selectProp]=v.userSelect)}static setTransform(u,m){u.style[v.transformProp]=m}static addEventListener(u,m,S,M={}){u.addEventListener(m,S,"passive"in M?M:M.capture)}static removeEventListener(u,m,S,M={}){u.removeEventListener(m,S,"passive"in M?M:M.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",v.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",v.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",v.suppressClickInternal,!0)},0)}static getScale(u){const m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}static getPoint(u,m,S){const M=m.boundingClientRect;return new s.P((S.clientX-M.left)/m.x-u.clientLeft,(S.clientY-M.top)/m.y-u.clientTop)}static mousePos(u,m){const S=v.getScale(u);return v.getPoint(u,S,m)}static touchPos(u,m){const S=[],M=v.getScale(u);for(let D=0;D<m.length;D++)S.push(v.getPoint(u,M,m[D]));return S}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}static sanitize(u){const m=new DOMParser().parseFromString(u,"text/html").body||document.createElement("body"),S=m.querySelectorAll("script");for(const M of S)M.remove();return v.clean(m),m.innerHTML}static isPossiblyDangerous(u,m){const S=m.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(u)||!S.includes("javascript:")&&!S.includes("data:"))||!!u.startsWith("on")||void 0}static clean(u){const m=u.children;for(const S of m)v.removeAttributes(S),v.clean(S)}static removeAttributes(u){for(const{name:m,value:S}of u.attributes)v.isPossiblyDangerous(m,S)&&u.removeAttribute(m)}}v.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,v.selectProp=v.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),v.transformProp=v.testProp(["transform","WebkitTransform"]);const _={supported:!1,testSupport:function(P){!T&&C&&(E?A(P):b=P)}};let b,C,T=!1,E=!1;function A(P){const u=P.createTexture();P.bindTexture(P.TEXTURE_2D,u);try{if(P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,C),P.isContextLost())return;_.supported=!0}catch{}P.deleteTexture(u),T=!0}var I;typeof document<"u"&&(C=document.createElement("img"),C.onload=()=>{b&&A(b),b=null,E=!0},C.onerror=()=>{T=!0,b=null},C.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(P){let u,m,S,M;P.resetRequestQueue=()=>{u=[],m=0,S=0,M={}},P.addThrottleControl=Z=>{const ne=S++;return M[ne]=Z,ne},P.removeThrottleControl=Z=>{delete M[Z],F()},P.getImage=(Z,ne,he=!0)=>new Promise((ye,_e)=>{_.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),s.e(Z,{type:"image"}),u.push({abortController:ne,requestParameters:Z,supportImageRefresh:he,state:"queued",onError:Ie=>{_e(Ie)},onSuccess:Ie=>{ye(Ie)}}),F()});const D=Z=>s._(this,void 0,void 0,function*(){Z.state="running";const{requestParameters:ne,supportImageRefresh:he,onError:ye,onSuccess:_e,abortController:Ie}=Z,De=he===!1&&!s.i(self)&&!s.g(ne.url)&&(!ne.headers||Object.keys(ne.headers).reduce((tt,at)=>tt&&at==="accept",!0));m++;const Ye=De?G(ne,Ie):s.m(ne,Ie);try{const tt=yield Ye;delete Z.abortController,Z.state="completed",tt.data instanceof HTMLImageElement||s.b(tt.data)?_e(tt):tt.data&&_e({data:yield(Ke=tt.data,typeof createImageBitmap=="function"?s.f(Ke):s.h(Ke)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete Z.abortController,ye(tt)}finally{m--,F()}var Ke}),F=()=>{const Z=(()=>{for(const ne of Object.keys(M))if(M[ne]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ne=m;ne<Z&&u.length>0;ne++){const he=u.shift();he.abortController.signal.aborted?ne--:D(he)}},G=(Z,ne)=>new Promise((he,ye)=>{const _e=new Image,Ie=Z.url,De=Z.credentials;De&&De==="include"?_e.crossOrigin="use-credentials":(De&&De==="same-origin"||!s.d(Ie))&&(_e.crossOrigin="anonymous"),ne.signal.addEventListener("abort",()=>{_e.src="",ye(s.c())}),_e.fetchPriority="high",_e.onload=()=>{_e.onerror=_e.onload=null,he({data:_e})},_e.onerror=()=>{_e.onerror=_e.onload=null,ne.signal.aborted||ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},_e.src=Ie})}(I||(I={})),I.resetRequestQueue();class O{constructor(u){this._transformRequestFn=u}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}setTransformRequest(u){this._transformRequestFn=u}}function B(P){const u=[];if(typeof P=="string")u.push({id:"default",url:P});else if(P&&P.length>0){const m=[];for(const{id:S,url:M}of P){const D=`${S}${M}`;m.indexOf(D)===-1&&(m.push(D),u.push({id:S,url:M}))}}return u}function N(P,u,m){try{const S=new URL(P);return S.pathname+=`${u}${m}`,S.toString()}catch{throw new Error(`Invalid sprite URL "${P}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class H{constructor(u,m,S,M){this.context=u,this.format=S,this.texture=u.gl.createTexture(),this.update(m,M)}update(u,m,S){const{width:M,height:D}=u,F=!(this.size&&this.size[0]===M&&this.size[1]===D||S),{context:G}=this,{gl:Z}=G;if(this.useMipmap=!!(m&&m.useMipmap),Z.bindTexture(Z.TEXTURE_2D,this.texture),G.pixelStoreUnpackFlipY.set(!1),G.pixelStoreUnpack.set(1),G.pixelStoreUnpackPremultiplyAlpha.set(this.format===Z.RGBA&&(!m||m.premultiply!==!1)),F)this.size=[M,D],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||s.b(u)?Z.texImage2D(Z.TEXTURE_2D,0,this.format,this.format,Z.UNSIGNED_BYTE,u):Z.texImage2D(Z.TEXTURE_2D,0,this.format,M,D,0,this.format,Z.UNSIGNED_BYTE,u.data);else{const{x:ne,y:he}=S||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||s.b(u)?Z.texSubImage2D(Z.TEXTURE_2D,0,ne,he,Z.RGBA,Z.UNSIGNED_BYTE,u):Z.texSubImage2D(Z.TEXTURE_2D,0,ne,he,M,D,Z.RGBA,Z.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Z.generateMipmap(Z.TEXTURE_2D),G.pixelStoreUnpackFlipY.setDefault(),G.pixelStoreUnpack.setDefault(),G.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,m,S){const{context:M}=this,{gl:D}=M;D.bindTexture(D.TEXTURE_2D,this.texture),S!==D.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(S=D.LINEAR),u!==this.filter&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,u),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,S||u),this.filter=u),m!==this.wrap&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,m),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function j(P){const{userImage:u}=P;return!!(u&&u.render&&u.render())&&(P.data.replace(new Uint8Array(u.data.buffer)),!0)}class W extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,promiseResolve:S}of this.requestors)S(this._getImagesForIds(m));this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const S=m.spriteData;m.data=new s.R({width:S.width,height:S.height},S.context.getImageData(S.x,S.y,S.width,S.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let S=!0;const M=m.data||m.spriteData;return this._validateStretch(m.stretchX,M&&M.width)||(this.fire(new s.k(new Error(`Image "${u}" has invalid "stretchX" value`))),S=!1),this._validateStretch(m.stretchY,M&&M.height)||(this.fire(new s.k(new Error(`Image "${u}" has invalid "stretchY" value`))),S=!1),this._validateContent(m.content,m)||(this.fire(new s.k(new Error(`Image "${u}" has invalid "content" value`))),S=!1),S}_validateStretch(u,m){if(!u)return!0;let S=0;for(const M of u){if(M[0]<S||M[1]<M[0]||m<M[1])return!1;S=M[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const S=m.spriteData,M=S&&S.width||m.data.width,D=S&&S.height||m.data.height;return!(u[0]<0||M<u[0]||u[1]<0||D<u[1]||u[2]<0||M<u[2]||u[3]<0||D<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,S=!0){const M=this.getImage(u);if(S&&(M.data.width!==m.data.width||M.data.height!==m.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=M.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((m,S)=>{let M=!0;if(!this.isLoaded())for(const D of u)this.images[D]||(M=!1);this.isLoaded()||M?m(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:m})})}_getImagesForIds(u){const m={};for(const S of u){let M=this.getImage(S);M||(this.fire(new s.l("styleimagemissing",{id:S})),M=this.getImage(S)),M?m[S]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:s.w(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],S=this.getImage(u);if(!S)return null;if(m&&m.position.version===S.version)return m.position;if(m)m.position.version=S.version;else{const M={w:S.data.width+2,h:S.data.height+2,x:0,y:0},D=new s.I(M,S);this.patterns[u]={bin:M,position:D}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const D in this.patterns)u.push(this.patterns[D].bin);const{w:m,h:S}=s.p(u),M=this.atlasImage;M.resize({width:m||1,height:S||1});for(const D in this.patterns){const{bin:F}=this.patterns[D],G=F.x+1,Z=F.y+1,ne=this.getImage(D).data,he=ne.width,ye=ne.height;s.R.copy(ne,M,{x:0,y:0},{x:G,y:Z},{width:he,height:ye}),s.R.copy(ne,M,{x:0,y:ye-1},{x:G,y:Z-1},{width:he,height:1}),s.R.copy(ne,M,{x:0,y:0},{x:G,y:Z+ye},{width:he,height:1}),s.R.copy(ne,M,{x:he-1,y:0},{x:G-1,y:Z},{width:1,height:ye}),s.R.copy(ne,M,{x:0,y:0},{x:G+he,y:Z},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const S=this.getImage(m);S||s.w(`Image with ID: "${m}" was not found`),j(S)&&this.updateImage(m,S)}}}const U=1e20;function Y(P,u,m,S,M,D,F,G,Z){for(let ne=u;ne<u+S;ne++)ie(P,m*D+ne,D,M,F,G,Z);for(let ne=m;ne<m+M;ne++)ie(P,ne*D+u,1,S,F,G,Z)}function ie(P,u,m,S,M,D,F){D[0]=0,F[0]=-1e20,F[1]=U,M[0]=P[u];for(let G=1,Z=0,ne=0;G<S;G++){M[G]=P[u+G*m];const he=G*G;do{const ye=D[Z];ne=(M[G]-M[ye]+he-ye*ye)/(G-ye)/2}while(ne<=F[Z]&&--Z>-1);Z++,D[Z]=G,F[Z]=ne,F[Z+1]=U}for(let G=0,Z=0;G<S;G++){for(;F[Z+1]<G;)Z++;const ne=D[Z],he=G-ne;P[u+G*m]=M[ne]+he*he}}class ue{constructor(u,m){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return s._(this,void 0,void 0,function*(){const m=[];for(const D in u)for(const F of u[D])m.push(this._getAndCacheGlyphsPromise(D,F));const S=yield Promise.all(m),M={};for(const{stack:D,id:F,glyph:G}of S)M[D]||(M[D]={}),M[D][F]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics};return M})}_getAndCacheGlyphsPromise(u,m){return s._(this,void 0,void 0,function*(){let S=this.entries[u];S||(S=this.entries[u]={glyphs:{},requests:{},ranges:{}});let M=S.glyphs[m];if(M!==void 0)return{stack:u,id:m,glyph:M};if(M=this._tinySDF(S,u,m),M)return S.glyphs[m]=M,{stack:u,id:m,glyph:M};const D=Math.floor(m/256);if(256*D>65535)throw new Error("glyphs > 65535 not supported");if(S.ranges[D])return{stack:u,id:m,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!S.requests[D]){const G=ue.loadGlyphRange(u,D,this.url,this.requestManager);S.requests[D]=G}const F=yield S.requests[D];for(const G in F)this._doesCharSupportLocalGlyph(+G)||(S.glyphs[+G]=F[+G]);return S.ranges[D]=!0,{stack:u,id:m,glyph:F[m]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(u))||s.u["CJK Unified Ideographs"](u)||s.u["Hangul Syllables"](u)||s.u.Hiragana(u)||s.u.Katakana(u)||s.u["CJK Symbols and Punctuation"](u)||s.u["Halfwidth and Fullwidth Forms"](u))}_tinySDF(u,m,S){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(S))return;let D=u.tinySDF;if(!D){let G="400";/bold/i.test(m)?G="900":/medium/i.test(m)?G="500":/light/i.test(m)&&(G="200"),D=u.tinySDF=new ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:G})}const F=D.draw(String.fromCharCode(S));return{id:S,bitmap:new s.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}ue.loadGlyphRange=function(P,u,m,S){return s._(this,void 0,void 0,function*(){const M=256*u,D=M+255,F=S.transformRequest(m.replace("{fontstack}",P).replace("{range}",`${M}-${D}`),"Glyphs"),G=yield s.n(F,new AbortController);if(!G||!G.data)throw new Error(`Could not load glyph range. range: ${u}, ${M}-${D}`);const Z={};for(const ne of s.o(G.data))Z[ne.id]=ne;return Z})},ue.TinySDF=class{constructor({fontSize:P=24,buffer:u=3,radius:m=8,cutoff:S=.25,fontFamily:M="sans-serif",fontWeight:D="normal",fontStyle:F="normal"}={}){this.buffer=u,this.cutoff=S,this.radius=m;const G=this.size=P+4*u,Z=this._createCanvas(G),ne=this.ctx=Z.getContext("2d",{willReadFrequently:!0});ne.font=`${F} ${D} ${P}px ${M}`,ne.textBaseline="alphabetic",ne.textAlign="left",ne.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(P){const u=document.createElement("canvas");return u.width=u.height=P,u}draw(P){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:S,actualBoundingBoxLeft:M,actualBoundingBoxRight:D}=this.ctx.measureText(P),F=Math.ceil(m),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(D-M))),Z=Math.min(this.size-this.buffer,F+Math.ceil(S)),ne=G+2*this.buffer,he=Z+2*this.buffer,ye=Math.max(ne*he,0),_e=new Uint8ClampedArray(ye),Ie={data:_e,width:ne,height:he,glyphWidth:G,glyphHeight:Z,glyphTop:F,glyphLeft:0,glyphAdvance:u};if(G===0||Z===0)return Ie;const{ctx:De,buffer:Ye,gridInner:Ke,gridOuter:tt}=this;De.clearRect(Ye,Ye,G,Z),De.fillText(P,Ye,Ye+F);const at=De.getImageData(Ye,Ye,G,Z);tt.fill(U,0,ye),Ke.fill(0,0,ye);for(let ht=0;ht<Z;ht++)for(let vt=0;vt<G;vt++){const gt=at.data[4*(ht*G+vt)+3]/255;if(gt===0)continue;const Tt=(ht+Ye)*ne+vt+Ye;if(gt===1)tt[Tt]=0,Ke[Tt]=U;else{const bt=.5-gt;tt[Tt]=bt>0?bt*bt:0,Ke[Tt]=bt<0?bt*bt:0}}Y(tt,0,0,ne,he,ne,this.f,this.v,this.z),Y(Ke,Ye,Ye,G,Z,ne,this.f,this.v,this.z);for(let ht=0;ht<ye;ht++){const vt=Math.sqrt(tt[ht])-Math.sqrt(Ke[ht]);_e[ht]=Math.round(255-255*(vt/this.radius+this.cutoff))}return Ie}};class J{constructor(){this.specification=s.v.light.position}possiblyEvaluate(u,m){return s.z(u.expression.evaluate(m))}interpolate(u,m,S){return{x:s.B.number(u.x,m.x,S),y:s.B.number(u.y,m.y,S),z:s.B.number(u.z,m.z,S)}}}let q;class ce extends s.E{constructor(u){super(),q=q||new s.r({anchor:new s.D(s.v.light.anchor),position:new J,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(q),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.t,u,m))for(const S in u){const M=u[S];S.endsWith("-transition")?this._transitionable.setTransition(S.slice(0,-11),M):this._transitionable.setValue(S,M)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,S){return(!S||S.validate!==!1)&&s.x(this,u.call(s.y,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const re=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class ee extends s.E{constructor(u){super(),this._transitionable=new s.T(re),this.setSky(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(u,m={}){if(!this._validate(s.F,u,m)){u||(u={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const S in u){const M=u[S];S.endsWith("-transition")?this._transitionable.setTransition(S.slice(0,-11),M):this._transitionable.setValue(S,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,S={}){return(S==null?void 0:S.validate)!==!1&&s.x(this,u.call(s.y,s.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(u){return u<60?0:u<70?(u-60)/10:1}}class oe{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const S=u.join(",")+String(m);return this.dashEntry[S]||(this.dashEntry[S]=this.addDash(u,m)),this.dashEntry[S]}getDashRanges(u,m,S){const M=[];let D=u.length%2==1?-u[u.length-1]*S:0,F=u[0]*S,G=!0;M.push({left:D,right:F,isDash:G,zeroLength:u[0]===0});let Z=u[0];for(let ne=1;ne<u.length;ne++){G=!G;const he=u[ne];D=Z*S,Z+=he,F=Z*S,M.push({left:D,right:F,isDash:G,zeroLength:he===0})}return M}addRoundDash(u,m,S){const M=m/2;for(let D=-S;D<=S;D++){const F=this.width*(this.nextRow+S+D);let G=0,Z=u[G];for(let ne=0;ne<this.width;ne++){ne/Z.right>1&&(Z=u[++G]);const he=Math.abs(ne-Z.left),ye=Math.abs(ne-Z.right),_e=Math.min(he,ye);let Ie;const De=D/S*(M+1);if(Z.isDash){const Ye=M-Math.abs(De);Ie=Math.sqrt(_e*_e+Ye*Ye)}else Ie=M-Math.sqrt(_e*_e+De*De);this.data[F+ne]=Math.max(0,Math.min(255,Ie+128))}}}addRegularDash(u){for(let G=u.length-1;G>=0;--G){const Z=u[G],ne=u[G+1];Z.zeroLength?u.splice(G,1):ne&&ne.isDash===Z.isDash&&(ne.left=Z.left,u.splice(G,1))}const m=u[0],S=u[u.length-1];m.isDash===S.isDash&&(m.left=S.left-this.width,S.right=m.right+this.width);const M=this.width*this.nextRow;let D=0,F=u[D];for(let G=0;G<this.width;G++){G/F.right>1&&(F=u[++D]);const Z=Math.abs(G-F.left),ne=Math.abs(G-F.right),he=Math.min(Z,ne);this.data[M+G]=Math.max(0,Math.min(255,(F.isDash?he:-he)+128))}}addDash(u,m){const S=m?7:0,M=2*S+1;if(this.nextRow+M>this.height)return s.w("LineAtlas out of space"),null;let D=0;for(let G=0;G<u.length;G++)D+=u[G];if(D!==0){const G=this.width/D,Z=this.getDashRanges(u,this.width,G);m?this.addRoundDash(Z,G,S):this.addRegularDash(Z)}const F={y:(this.nextRow+S+.5)/this.height,height:2*S/this.height,width:D};return this.nextRow+=M,this.dirty=!0,F}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const be="maplibre_preloaded_worker_pool";class we{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<we.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[be]}numActive(){return Object.keys(this.active).length}}const pe=Math.floor(p.hardwareConcurrency/2);let Ce,Ve;function et(){return Ce||(Ce=new we),Ce}we.workerCount=s.G(globalThis)?Math.max(Math.min(pe,3),1):1;class Ee{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=m;const S=this.workerPool.acquire(m);for(let M=0;M<S.length;M++){const D=new s.H(S[M],m);D.name=`Worker ${M}`,this.actors.push(D)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m){const S=[];for(const M of this.actors)S.push(M.sendAsync({type:u,data:m}));return Promise.all(S)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(m=>{m.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,m){for(const S of this.actors)S.registerMessageHandler(u,m)}}function Je(){return Ve||(Ve=new Ee(et(),s.J),Ve.registerMessageHandler("GR",(P,u,m)=>s.m(u,m))),Ve}function Ue(P,u){const m=s.K();return s.L(m,m,[1,1,0]),s.M(m,m,[.5*P.width,.5*P.height,1]),P.calculatePosMatrix?s.N(m,m,P.calculatePosMatrix(u.toUnwrapped())):m}function yt(P,u,m,S,M,D,F){var G;const Z=function(_e,Ie,De){if(_e)for(const Ye of _e){const Ke=Ie[Ye];if(Ke&&Ke.source===De&&Ke.type==="fill-extrusion")return!0}else for(const Ye in Ie){const Ke=Ie[Ye];if(Ke.source===De&&Ke.type==="fill-extrusion")return!0}return!1}((G=M==null?void 0:M.layers)!==null&&G!==void 0?G:null,u,P.id),ne=D.maxPitchScaleFactor(),he=P.tilesIn(S,ne,Z);he.sort(Ne);const ye=[];for(const _e of he)ye.push({wrappedTileID:_e.tileID.wrapped().key,queryResults:_e.tile.queryRenderedFeatures(u,m,P._state,_e.queryGeometry,_e.cameraQueryGeometry,_e.scale,M,D,ne,Ue(P.transform,_e.tileID),F?(Ie,De)=>F(_e.tileID,Ie,De):void 0)});return function(_e,Ie){for(const De in _e)for(const Ye of _e[De])dt(Ye,Ie);return _e}(function(_e){const Ie={},De={};for(const Ye of _e){const Ke=Ye.queryResults,tt=Ye.wrappedTileID,at=De[tt]=De[tt]||{};for(const ht in Ke){const vt=Ke[ht],gt=at[ht]=at[ht]||{},Tt=Ie[ht]=Ie[ht]||[];for(const bt of vt)gt[bt.featureIndex]||(gt[bt.featureIndex]=!0,Tt.push(bt))}}return Ie}(ye),P)}function Ne(P,u){const m=P.tileID,S=u.tileID;return m.overscaledZ-S.overscaledZ||m.canonical.y-S.canonical.y||m.wrap-S.wrap||m.canonical.x-S.canonical.x}function dt(P,u){const m=P.feature,S=u.getFeatureState(m.layer["source-layer"],m.id);m.source=m.layer.source,m.layer["source-layer"]&&(m.sourceLayer=m.layer["source-layer"]),m.state=S}function Le(P,u,m){return s._(this,void 0,void 0,function*(){let S=P;if(P.url?S=(yield s.j(u.transformRequest(P.url,"Source"),m)).data:yield p.frameAsync(m),!S)return null;const M=s.O(s.e(S,P),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in S&&S.vector_layers&&(M.vectorLayerIds=S.vector_layers.map(D=>D.id)),M})}class ze{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof s.Q?new s.Q(u.lng,u.lat):s.Q.convert(u),this}setSouthWest(u){return this._sw=u instanceof s.Q?new s.Q(u.lng,u.lat):s.Q.convert(u),this}extend(u){const m=this._sw,S=this._ne;let M,D;if(u instanceof s.Q)M=u,D=u;else{if(!(u instanceof ze))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(ze.convert(u)):this.extend(s.Q.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(s.Q.convert(u)):this;if(M=u._sw,D=u._ne,!M||!D)return this}return m||S?(m.lng=Math.min(M.lng,m.lng),m.lat=Math.min(M.lat,m.lat),S.lng=Math.max(D.lng,S.lng),S.lat=Math.max(D.lat,S.lat)):(this._sw=new s.Q(M.lng,M.lat),this._ne=new s.Q(D.lng,D.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:S}=s.Q.convert(u);let M=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=S&&S<=this._ne.lat&&M}static convert(u){return u instanceof ze?u:u&&new ze(u)}static fromLngLat(u,m=0){const S=360*m/40075017,M=S/Math.cos(Math.PI/180*u.lat);return new ze(new s.Q(u.lng-M,u.lat-S),new s.Q(u.lng+M,u.lat+S))}adjustAntiMeridian(){const u=new s.Q(this._sw.lng,this._sw.lat),m=new s.Q(this._ne.lng,this._ne.lat);return new ze(u,u.lng>m.lng?new s.Q(m.lng+360,m.lat):m)}}class ct{constructor(u,m,S){this.bounds=ze.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=S||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),S=Math.floor(s.U(this.bounds.getWest())*m),M=Math.floor(s.S(this.bounds.getNorth())*m),D=Math.ceil(s.U(this.bounds.getEast())*m),F=Math.ceil(s.S(this.bounds.getSouth())*m);return u.x>=S&&u.x<D&&u.y>=M&&u.y<F}}class Lt extends s.E{constructor(u,m,S,M){if(super(),this.id=u,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(m,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Le(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(s.e(this,u),u.bounds&&(this.tileBounds=new ct(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new s.k(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S={request:this.map._requestManager.transformRequest(m,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};S.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((D,F)=>{u.reloadPromise={resolve:D,reject:F}})}else u.actor=this.dispatcher.getActor(),M="LT";u.abortController=new AbortController;try{const D=yield u.actor.sendAsync({type:M,data:S},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,D)}catch(D){if(delete u.abortController,u.aborted)return;if(D&&D.status!==404)throw D;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,m){if(m&&m.resourceTiming&&(u.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&u.setExpiryData(m),u.loadVectorData(m,this.map.painter),u.reloadPromise){const S=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(S.resolve).catch(S.reject)}}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class lt extends s.E{constructor(u,m,S,M){super(),this.id=u,this.dispatcher=S,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},m),s.e(this,s.O(m,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(u=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const m=yield Le(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,m&&(s.e(this,m),m.bounds&&(this.tileBounds=new ct(m.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:u})))}catch(m){this._tileJSONRequest=null,this.fire(new s.k(m))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load(!0)}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return s.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const S=yield I.getImage(this.map._requestManager.transformRequest(m,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(S&&S.data){this.map._refreshExpiredTiles&&S.cacheControl&&S.expires&&u.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const M=this.map.painter.context,D=M.gl,F=S.data;u.texture=this.map.painter.getTileTexture(F.width),u.texture?u.texture.update(F,{useMipmap:!0}):(u.texture=new H(M,F,D.RGBA,{useMipmap:!0}),u.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST)),u.state="loaded"}}catch(S){if(delete u.abortController,u.aborted)u.state="unloaded";else if(S)throw u.state="errored",S}})}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class Ct extends lt{constructor(u,m,S,M){super(u,m,S,M),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S=this.map._requestManager.transformRequest(m,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const M=yield I.getImage(S,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(M&&M.data){const D=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&u.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const F=s.b(D)&&s.V()?D:yield this.readImageNow(D),G={type:this.type,uid:u.uid,source:this.id,rawImageData:F,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const Z=yield u.actor.sendAsync({type:"LDT",data:G});u.dem=Z,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(M){if(delete u.abortController,u.aborted)u.state="unloaded";else if(M)throw u.state="errored",M}})}readImageNow(u){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const m=u.width+2,S=u.height+2;try{return new s.R({width:m,height:S},yield s.X(u,-1,-1,m,S))}catch{}}return p.getImageData(u,1)})}_getNeighboringTiles(u){const m=u.canonical,S=Math.pow(2,m.z),M=(m.x-1+S)%S,D=m.x===0?u.wrap-1:u.wrap,F=(m.x+1+S)%S,G=m.x+1===S?u.wrap+1:u.wrap,Z={};return Z[new s.Y(u.overscaledZ,D,m.z,M,m.y).key]={backfilled:!1},Z[new s.Y(u.overscaledZ,G,m.z,F,m.y).key]={backfilled:!1},m.y>0&&(Z[new s.Y(u.overscaledZ,D,m.z,M,m.y-1).key]={backfilled:!1},Z[new s.Y(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},Z[new s.Y(u.overscaledZ,G,m.z,F,m.y-1).key]={backfilled:!1}),m.y+1<S&&(Z[new s.Y(u.overscaledZ,D,m.z,M,m.y+1).key]={backfilled:!1},Z[new s.Y(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},Z[new s.Y(u.overscaledZ,G,m.z,F,m.y+1).key]={backfilled:!1}),Z}unloadTile(u){return s._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class _t extends s.E{constructor(u,m,S,M){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=S.getActor(),this.setEventedParent(M),this._data=m.data,this._options=s.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId,m.clusterMaxZoom!==void 0&&this.maxzoom<=m.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${m.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(m.buffer!==void 0?m.buffer:128),tolerance:this._pixelsToTileUnits(m.tolerance!==void 0?m.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(m.clusterRadius||50),log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(u){return u*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}getData(){return s._(this,void 0,void 0,function*(){const u=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:u})})}getCoordinatesFromGeometry(u){return u.type==="GeometryCollection"?u.geometries.map(m=>m.coordinates).flat(1/0):u.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const u=new ze,m=yield this.getData();let S;switch(m.type){case"FeatureCollection":S=m.features.map(M=>this.getCoordinatesFromGeometry(M.geometry)).flat(1/0);break;case"Feature":S=this.getCoordinatesFromGeometry(m.geometry);break;default:S=this.getCoordinatesFromGeometry(m)}if(S.length==0)return u;for(let M=0;M<S.length-1;M+=2)u.extend([S[M],S[M+1]]);return u})}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(u.clusterRadius)),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,m,S){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:m,offset:S}})}_updateWorkerData(u){return s._(this,void 0,void 0,function*(){const m=s.e({type:this.type},this.workerOptions);u?m.dataDiff=u:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(p.resolveURL(this._data),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:m});if(this._pendingLoads--,this._removed||S.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let M=null;S.resourceTiming&&S.resourceTiming[this.id]&&(M=S.resourceTiming[this.id].slice(0));const D={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&s.e(D,{resourceTiming:M}),this.fire(new s.l("data",Object.assign(Object.assign({},D),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},D),{sourceDataType:"content"})))}catch(S){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(S))}})}loaded(){return this._pendingLoads===0}loadTile(u){return s._(this,void 0,void 0,function*(){const m=u.actor?"RT":"LT";u.actor=this.actor;const S={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};u.abortController=new AbortController;const M=yield this.actor.sendAsync({type:m,data:S},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(M,this.map.painter,m==="RT")})}abortTile(u){return s._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return s._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class It extends s.E{constructor(u,m,S,M){super(),this.flippedWindingOrder=!1,this.id=u,this.dispatcher=S,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=m}load(u){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield I.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,u&&(this.coordinates=u),this._finishLoading())}catch(m){this._request=null,this._loaded=!0,this.fire(new s.k(m))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(s.$.fromLngLat);var S;return this.tileID=function(M){let D=1/0,F=1/0,G=-1/0,Z=-1/0;for(const _e of M)D=Math.min(D,_e.x),F=Math.min(F,_e.y),G=Math.max(G,_e.x),Z=Math.max(Z,_e.y);const ne=Math.max(G-D,Z-F),he=Math.max(0,Math.floor(-Math.log(ne)/Math.LN2)),ye=Math.pow(2,he);return new s.a1(he,Math.floor((D+G)/2*ye),Math.floor((F+Z)/2*ye))}(m),this.terrainTileRanges=this._getOverlappingTileRanges(m),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=m.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((S=this.tileCoords)[1].x-S[0].x)*(S[2].y-S[0].y)-(S[1].y-S[0].y)*(S[2].x-S[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this.texture||(this.texture=new H(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let S=!1;for(const M in this.tiles){const D=this.tiles[M];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,S=!0)}S&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(u){let m=1/0,S=1/0,M=-1/0,D=-1/0;for(const G of u)m=Math.min(m,G.x),S=Math.min(S,G.y),M=Math.max(M,G.x),D=Math.max(D,G.y);const F={};for(let G=0;G<=s.a0;G++){const Z=Math.pow(2,G),ne=Math.floor(m*Z),he=Math.floor(S*Z),ye=Math.floor(M*Z),_e=Math.floor(D*Z);F[G]={minTileX:ne,minTileY:he,maxTileX:ye,maxTileY:_e}}return F}}class Bt extends It{constructor(u,m,S,M){super(u,m,S,M),this.roundZoom=!0,this.type="video",this.options=m}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const m of u.urls)this.urls.push(this.map._requestManager.transformRequest(m,"Source").url);try{const m=yield s.a2(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new s.k(m))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,m=u.gl;this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new H(u,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let S=!1;for(const M in this.tiles){const D=this.tiles[M];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,S=!0)}S&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ft extends It{constructor(u,m,S,M){super(u,m,S,M),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(D=>!Array.isArray(D)||D.length!==2||D.some(F=>typeof F!="number"))||this.fire(new s.k(new s.a3(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,S=m.gl;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(m,this.canvas,S.RGBA,{premultiply:!0});let M=!1;for(const D in this.tiles){const F=this.tiles[D];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,M=!0)}M&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const cn={},Ot=P=>{switch(P){case"geojson":return _t;case"image":return It;case"raster":return lt;case"raster-dem":return Ct;case"vector":return Lt;case"video":return Bt;case"canvas":return Ft}return cn[P]},kt="RTLPluginLoaded";class fn extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Je()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch(m=>{throw this.status="error",m})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return s._(this,arguments,void 0,function*(m,S=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=p.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if(this.status==="unavailable"){if(!S)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(kt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Rn=null;function On(){return Rn||(Rn=new fn),Rn}class mt{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=s.a4(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const m=u+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,S){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(M,D){const F={};if(!D)return F;for(const G of M){const Z=G.layerIds.map(ne=>D.getLayer(ne)).filter(Boolean);if(Z.length!==0){G.layers=Z,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(ne=>Z.filter(he=>he.id===ne)[0]));for(const ne of Z)F[ne.id]=G}}return F}(u.buckets,m==null?void 0:m.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const D=this.buckets[M];if(D instanceof s.a6){if(this.hasSymbolBuckets=!0,!S)break;D.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const D=this.buckets[M];if(D instanceof s.a6&&D.hasRTLText){this.hasRTLText=!0,On().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const D=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(M).queryRadius(D))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const S in this.buckets){const M=this.buckets[S];M.uploadPending()&&M.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,S,M,D,F,G,Z,ne,he,ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:D,scale:F,tileSize:this.tileSize,pixelPosMatrix:he,transform:Z,params:G,queryPadding:this.queryPadding*ne,getElevation:ye},u,m,S):{}}querySourceFeatures(u,m){const S=this.latestFeatureIndex;if(!S||!S.rawTileData)return;const M=S.loadVTLayers(),D=m&&m.sourceLayer?m.sourceLayer:"",F=M._geojsonTileLayer||M[D];if(!F)return;const G=s.a7(m&&m.filter),{z:Z,x:ne,y:he}=this.tileID.canonical,ye={z:Z,x:ne,y:he};for(let _e=0;_e<F.length;_e++){const Ie=F.feature(_e);if(G.needGeometry){const Ke=s.a8(Ie,!0);if(!G.filter(new s.C(this.tileID.overscaledZ),Ke,this.tileID.canonical))continue}else if(!G.filter(new s.C(this.tileID.overscaledZ),Ie))continue;const De=S.getId(Ie,D),Ye=new s.a9(Ie,Z,ne,he,De);Ye.tile=ye,u.push(Ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const S=s.aa(u.cacheControl);S["max-age"]&&(this.expirationTime=Date.now()+1e3*S["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const S=Date.now();let M=!1;if(this.expirationTime>S)M=!1;else if(m)if(this.expirationTime<m)M=!0;else{const D=this.expirationTime-m;D?this.expirationTime=S+Math.max(D,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const S=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!m.style.hasLayer(M))continue;const D=this.buckets[M],F=D.layers[0].sourceLayer||"_geojsonTileLayer",G=S[F],Z=u[F];if(!G||!Z||Object.keys(Z).length===0)continue;D.update(Z,G,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ne=m&&m.style&&m.style.getLayer(M);ne&&(this.queryPadding=Math.max(this.queryPadding,ne.queryRadius(D)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<p.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=p.now()+u}setDependencies(u,m){const S={};for(const M of m)S[M]=!0;this.dependencies[u]=S}hasDependency(u,m){for(const S of u){const M=this.dependencies[S];if(M){for(const D of m)if(M[D])return!0}}return!1}}class Gt{constructor(u,m){this.max=u,this.onRemove=m,this.reset()}reset(){for(const u in this.data)for(const m of this.data[u])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(u,m,S){const M=u.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const D={value:m,timeout:void 0};if(S!==void 0&&(D.timeout=setTimeout(()=>{this.remove(u,D)},S)),this.data[M].push(D),this.order.push(M),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const m=this.data[u].shift();return m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),m.value}getByKey(u){const m=this.data[u];return m?m[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,m){if(!this.has(u))return this;const S=u.wrapped().key,M=m===void 0?0:this.data[S].indexOf(m),D=this.data[S][M];return this.data[S].splice(M,1),D.timeout&&clearTimeout(D.timeout),this.data[S].length===0&&delete this.data[S],this.onRemove(D.value),this.order.splice(this.order.indexOf(S),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(u){const m=[];for(const S in this.data)for(const M of this.data[S])u(M.value)||m.push(M);for(const S of m)this.remove(S.value.tileID,S)}}class gn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,S){const M=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][M]=this.stateChanges[u][M]||{},s.e(this.stateChanges[u][M],S),this.deletedStates[u]===null){this.deletedStates[u]={};for(const D in this.state[u])D!==M&&(this.deletedStates[u][D]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][M]===null){this.deletedStates[u][M]={};for(const D in this.state[u][M])S[D]||(this.deletedStates[u][M][D]=null)}else for(const D in S)this.deletedStates[u]&&this.deletedStates[u][M]&&this.deletedStates[u][M][D]===null&&delete this.deletedStates[u][M][D]}removeFeatureState(u,m,S){if(this.deletedStates[u]===null)return;const M=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},S&&m!==void 0)this.deletedStates[u][M]!==null&&(this.deletedStates[u][M]=this.deletedStates[u][M]||{},this.deletedStates[u][M][S]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][M])for(S in this.deletedStates[u][M]={},this.stateChanges[u][M])this.deletedStates[u][M][S]=null;else this.deletedStates[u][M]=null;else this.deletedStates[u]=null}getState(u,m){const S=String(m),M=s.e({},(this.state[u]||{})[S],(this.stateChanges[u]||{})[S]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const D=this.deletedStates[u][m];if(D===null)return{};for(const F in D)delete M[F]}return M}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const S={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const D={};for(const F in this.stateChanges[M])this.state[M][F]||(this.state[M][F]={}),s.e(this.state[M][F],this.stateChanges[M][F]),D[F]=this.state[M][F];S[M]=D}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const D={};if(this.deletedStates[M]===null)for(const F in this.state[M])D[F]={},this.state[M][F]={};else for(const F in this.deletedStates[M]){if(this.deletedStates[M][F]===null)this.state[M][F]={};else for(const G of Object.keys(this.deletedStates[M][F]))delete this.state[M][F][G];D[F]=this.state[M][F]}S[M]=S[M]||{},s.e(S[M],D)}if(this.stateChanges={},this.deletedStates={},Object.keys(S).length!==0)for(const M in u)u[M].setFeatureState(S,m)}}const xt=89.25;function Zt(P,u){const m=s.ae(u.lat,-85.051129,s.af);return new s.P(s.U(u.lng)*P,s.S(m)*P)}function Ze(P,u){return new s.$(u.x/P,u.y/P).toLngLat()}function Fe(P){return P.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-P.pitch)),Math.tan(s.ab(xt-P.pitch)))}function ve(P,u){const m=P.canonical,S=u/s.ac(m.z),M=m.x+Math.pow(2,m.z)*P.wrap,D=s.ad(new Float64Array(16));return s.L(D,D,[M*S,m.y*S,0]),s.M(D,D,[S/s.Z,S/s.Z,1]),D}function ke(P,u,m,S,M){const D=s.$.fromLngLat(P,u),F=M*s.ag(1,P.lat),G=F*Math.cos(s.ab(m)),Z=Math.sqrt(F*F-G*G),ne=Z*Math.sin(s.ab(-S)),he=Z*Math.cos(s.ab(-S));return new s.$(D.x+ne,D.y+he,D.z+G)}function Oe(P,u,m){const S=u.intersectsFrustum(P);if(!m)return S;const M=u.intersectsPlane(m);return S===0||M===0?0:S===2&&M===2?2:1}function Me(P,u,m){let S=0;const M=(m-u)/10;for(let D=0;D<10;D++)S+=M*Math.pow(Math.cos(u+(D+.5)/10*(m-u)),P);return S}function Ae(P,u){return function(m,S,M,D,F){const G=2*((P-1)/s.ah(Math.cos(s.ab(xt-F))/Math.cos(s.ab(xt)))-1),Z=Math.acos(M/D),ne=2*Me(G-1,0,s.ab(F/2)),he=Math.min(s.ab(xt),Z+s.ab(F/2)),ye=Me(G-1,Math.min(he,Z-s.ab(F/2)),he),_e=Math.atan(S/M),Ie=Math.hypot(S,M);let De=m;return De+=s.ah(D/Ie/Math.max(.5,Math.cos(s.ab(F/2)))),De+=G*s.ah(Math.cos(_e))/2,De-=s.ah(Math.max(1,ye/ne/u))/2,De}}const pt=Ae(9.314,3);function Mt(P,u){const m=(u.roundZoom?Math.round:Math.floor)(P.zoom+s.ah(P.tileSize/u.tileSize));return Math.max(0,m)}function it(P,u){const m=P.getCameraFrustum(),S=P.getClippingPlane(),M=P.screenPointToMercatorCoordinate(P.getCameraPoint()),D=s.$.fromLngLat(P.center,P.elevation);M.z=D.z+Math.cos(P.pitchInRadians)*P.cameraToCenterDistance/P.worldSize;const F=P.getCoveringTilesDetailsProvider(),G=F.allowVariableZoom(P,u),Z=Mt(P,u),ne=u.minzoom||0,he=u.maxzoom!==void 0?u.maxzoom:P.maxZoom,ye=Math.min(Math.max(0,Z),he),_e=Math.pow(2,ye),Ie=[_e*M.x,_e*M.y,0],De=[_e*D.x,_e*D.y,0],Ye=Math.hypot(D.x-M.x,D.y-M.y),Ke=Math.abs(D.z-M.z),tt=Math.hypot(Ye,Ke),at=gt=>({zoom:0,x:0,y:0,wrap:gt,fullyVisible:!1}),ht=[],vt=[];if(P.renderWorldCopies&&F.allowWorldCopies())for(let gt=1;gt<=3;gt++)ht.push(at(-gt)),ht.push(at(gt));for(ht.push(at(0));ht.length>0;){const gt=ht.pop(),Tt=gt.x,bt=gt.y;let Nt=gt.fullyVisible;const Ut={x:Tt,y:bt,z:gt.zoom},nn=F.getTileAABB(Ut,gt.wrap,P.elevation,u);if(!Nt){const Sn=Oe(m,nn,S);if(Sn===0)continue;Nt=Sn===2}const an=F.distanceToTile2d(M.x,M.y,Ut,nn);let tn=Z;G&&(tn=(u.calculateTileZoom||pt)(P.zoom+s.ah(P.tileSize/u.tileSize),an,Ke,tt,P.fov)),tn=(u.roundZoom?Math.round:Math.floor)(tn),tn=Math.max(0,tn);const An=Math.min(tn,he);if(gt.wrap=F.getWrap(D,Ut,gt.wrap),gt.zoom>=An){if(gt.zoom<ne)continue;const Sn=ye-gt.zoom,pn=Ie[0]-.5-(Tt<<Sn),qn=Ie[1]-.5-(bt<<Sn),Pr=u.reparseOverscaled?Math.max(gt.zoom,tn):gt.zoom;vt.push({tileID:new s.Y(gt.zoom===he?Pr:gt.zoom,gt.wrap,gt.zoom,Tt,bt),distanceSq:s.ai([De[0]-.5-Tt,De[1]-.5-bt]),tileDistanceToCamera:Math.sqrt(pn*pn+qn*qn)})}else for(let Sn=0;Sn<4;Sn++)ht.push({zoom:gt.zoom+1,x:(Tt<<1)+Sn%2,y:(bt<<1)+(Sn>>1),wrap:gt.wrap,fullyVisible:Nt})}return vt.sort((gt,Tt)=>gt.distanceSq-Tt.distanceSq).map(gt=>gt.tileID)}class Et extends s.E{constructor(u,m,S){super(),this.id=u,this.dispatcher=S,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,D,F,G)=>{const Z=new(Ot(D.type))(M,D,F,G);if(Z.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${Z.id}`);return Z})(u,m,S,this),this._tiles={},this._cache=new Gt(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new gn,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m,S){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,m,S)}catch(M){u.state="errored",M.status!==404?this._source.fire(new s.k(M,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new s.l("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const S=this._tiles[m];S.upload(u),S.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(Vt).map(u=>u.key)}getRenderableIds(u){const m=[];for(const S in this._tiles)this._isIdRenderable(S,u)&&m.push(this._tiles[S]);return u?m.sort((S,M)=>{const D=S.tileID,F=M.tileID,G=new s.P(D.canonical.x,D.canonical.y)._rotate(-this.transform.bearingInRadians),Z=new s.P(F.canonical.x,F.canonical.y)._rotate(-this.transform.bearingInRadians);return D.overscaledZ-F.overscaledZ||Z.y-G.y||Z.x-G.x}).map(S=>S.tileID.key):m.map(S=>S.tileID).sort(Vt).map(S=>S.key)}hasRenderableParent(u){const m=this.findLoadedParent(u,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(u,m){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(m||!this._tiles[u].holdingForFade())}reload(u){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const m in this._tiles)(u||this._tiles[m].state!=="errored")&&this._reloadTile(m,"reloading")}}_reloadTile(u,m){return s._(this,void 0,void 0,function*(){const S=this._tiles[u];S&&(S.state!=="loading"&&(S.state=m),yield this._loadTile(S,u,m))})}_tileLoaded(u,m,S){u.timeAdded=p.now(),S==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const m=this.getRenderableIds();for(let M=0;M<m.length;M++){const D=m[M];if(u.neighboringTiles&&u.neighboringTiles[D]){const F=this.getTileByID(D);S(u,F),S(F,u)}}function S(M,D){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let F=D.tileID.canonical.x-M.tileID.canonical.x;const G=D.tileID.canonical.y-M.tileID.canonical.y,Z=Math.pow(2,M.tileID.canonical.z),ne=D.tileID.key;F===0&&G===0||Math.abs(G)>1||(Math.abs(F)>1&&(Math.abs(F+Z)===1?F+=Z:Math.abs(F-Z)===1&&(F-=Z)),D.dem&&M.dem&&(M.dem.backfillBorder(D.dem,F,G),M.neighboringTiles&&M.neighboringTiles[ne]&&(M.neighboringTiles[ne].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,m,S,M){for(const D in this._tiles){let F=this._tiles[D];if(M[D]||!F.hasData()||F.tileID.overscaledZ<=m||F.tileID.overscaledZ>S)continue;let G=F.tileID;for(;F&&F.tileID.overscaledZ>m+1;){const ne=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[ne.key],F&&F.hasData()&&(G=ne)}let Z=G;for(;Z.overscaledZ>m;)if(Z=Z.scaledTo(Z.overscaledZ-1),u[Z.key]||u[Z.canonical.key]){M[G.key]=G;break}}}findLoadedParent(u,m){if(u.key in this._loadedParentTiles){const S=this._loadedParentTiles[u.key];return S&&S.tileID.overscaledZ>=m?S:null}for(let S=u.overscaledZ-1;S>=m;S--){const M=u.scaledTo(S),D=this._getLoadedTile(M);if(D)return D}}findLoadedSibling(u){return this._getLoadedTile(u)}_getLoadedTile(u){const m=this._tiles[u.key];return m&&m.hasData()?m:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,S=Math.ceil(u.height/this._source.tileSize)+1,M=Math.floor(m*S*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(D)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){const S={};for(const M in this._tiles){const D=this._tiles[M];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+m),S[D.tileID.key]=D}this._tiles=S;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(u,m,S,M,D,F){const G={},Z={},ne=Object.keys(u),he=p.now();for(const ye of ne){const _e=u[ye],Ie=this._tiles[ye];if(!Ie||Ie.fadeEndTime!==0&&Ie.fadeEndTime<=he)continue;const De=this.findLoadedParent(_e,m),Ye=this.findLoadedSibling(_e),Ke=De||Ye||null;Ke&&(this._addTile(Ke.tileID),G[Ke.tileID.key]=Ke.tileID),Z[ye]=_e}this._retainLoadedChildren(Z,M,S,u);for(const ye in G)u[ye]||(this._coveredTiles[ye]=!0,u[ye]=G[ye]);if(F){const ye={},_e={};for(const Ie of D)this._tiles[Ie.key].hasData()?ye[Ie.key]=Ie:_e[Ie.key]=Ie;for(const Ie in _e){const De=_e[Ie].children(this._source.maxzoom);this._tiles[De[0].key]&&this._tiles[De[1].key]&&this._tiles[De[2].key]&&this._tiles[De[3].key]&&(ye[De[0].key]=u[De[0].key]=De[0],ye[De[1].key]=u[De[1].key]=De[1],ye[De[2].key]=u[De[2].key]=De[2],ye[De[3].key]=u[De[3].key]=De[3],delete _e[Ie])}for(const Ie in _e){const De=_e[Ie],Ye=this.findLoadedParent(De,this._source.minzoom),Ke=this.findLoadedSibling(De),tt=Ye||Ke||null;if(tt){ye[tt.tileID.key]=u[tt.tileID.key]=tt.tileID;for(const at in ye)ye[at].isChildOf(tt.tileID)&&delete ye[at]}}for(const Ie in this._tiles)ye[Ie]||(this._coveredTiles[Ie]=!0)}}update(u,m){if(!this._sourceLoaded||this._paused)return;let S;this.transform=u,this.terrain=m,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?S=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(he=>new s.Y(he.canonical.z,he.wrap,he.canonical.z,he.canonical.x,he.canonical.y)):(S=it(u,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(S=S.filter(he=>this._source.hasTile(he)))):S=[];const M=Mt(u,this._source),D=Math.max(M-Et.maxOverzooming,this._source.minzoom),F=Math.max(M+Et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const he={};for(const ye of S)if(ye.canonical.z>this._source.minzoom){const _e=ye.scaledTo(ye.canonical.z-1);he[_e.key]=_e;const Ie=ye.scaledTo(Math.max(this._source.minzoom,Math.min(ye.canonical.z,5)));he[Ie.key]=Ie}S=S.concat(Object.values(he))}const G=S.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,G&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Z=this._updateRetainedTiles(S,M);Dt(this._source.type)&&this._updateCoveredAndRetainedTiles(Z,D,F,M,S,m);for(const he in Z)this._tiles[he].clearFadeHold();const ne=s.aj(this._tiles,Z);for(const he of ne){const ye=this._tiles[he];ye.hasSymbolBuckets&&!ye.holdingForFade()?ye.setHoldDuration(this.map._fadeDuration):ye.hasSymbolBuckets&&!ye.symbolFadeFinished()||this._removeTile(he)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){var S;const M={},D={},F=Math.max(m-Et.maxOverzooming,this._source.minzoom),G=Math.max(m+Et.maxUnderzooming,this._source.minzoom),Z={};for(const ne of u){const he=this._addTile(ne);M[ne.key]=ne,he.hasData()||m<this._source.maxzoom&&(Z[ne.key]=ne)}this._retainLoadedChildren(Z,m,G,M);for(const ne of u){let he=this._tiles[ne.key];if(he.hasData())continue;if(m+1>this._source.maxzoom){const _e=ne.children(this._source.maxzoom)[0],Ie=this.getTile(_e);if(Ie&&Ie.hasData()){M[_e.key]=_e;continue}}else{const _e=ne.children(this._source.maxzoom);if(M[_e[0].key]&&M[_e[1].key]&&M[_e[2].key]&&M[_e[3].key])continue}let ye=he.wasRequested();for(let _e=ne.overscaledZ-1;_e>=F;--_e){const Ie=ne.scaledTo(_e);if(D[Ie.key])break;if(D[Ie.key]=!0,he=this.getTile(Ie),!he&&ye&&(he=this._addTile(Ie)),he){const De=he.hasData();if((De||!(!((S=this.map)===null||S===void 0)&&S.cancelPendingTileRequestsWhileZooming)||ye)&&(M[Ie.key]=Ie),ye=he.wasRequested(),De)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const m=[];let S,M=this._tiles[u].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){S=this._loadedParentTiles[M.key];break}m.push(M.key);const D=M.scaledTo(M.overscaledZ-1);if(S=this._getLoadedTile(D),S)break;M=D}for(const D of m)this._loadedParentTiles[D]=S}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const u in this._tiles){const m=this._tiles[u].tileID,S=this._getLoadedTile(m);this._loadedSiblingTiles[m.key]=S}}_addTile(u){let m=this._tiles[u.key];if(m)return m;m=this._cache.getAndRemove(u),m&&(this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,m)));const S=m;return m||(m=new mt(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,u.key,m.state)),m.uses++,this._tiles[u.key]=m,S||this._source.fire(new s.l("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const S=m.getExpiryTimeout();S&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},S))}_removeTile(u){const m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}_dataHandler(u){const m=u.sourceDataType;u.dataType==="source"&&m==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&m==="content"&&(this.reload(u.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,m,S){const M=[],D=this.transform;if(!D)return M;const F=S?D.getCameraQueryGeometry(u):u,G=u.map(De=>D.screenPointToMercatorCoordinate(De,this.terrain)),Z=F.map(De=>D.screenPointToMercatorCoordinate(De,this.terrain)),ne=this.getIds();let he=1/0,ye=1/0,_e=-1/0,Ie=-1/0;for(const De of Z)he=Math.min(he,De.x),ye=Math.min(ye,De.y),_e=Math.max(_e,De.x),Ie=Math.max(Ie,De.y);for(let De=0;De<ne.length;De++){const Ye=this._tiles[ne[De]];if(Ye.holdingForFade())continue;const Ke=D.getCoveringTilesDetailsProvider().allowWorldCopies()?Ye.tileID:Ye.tileID.unwrapTo(0),tt=Math.pow(2,D.zoom-Ye.tileID.overscaledZ),at=m*Ye.queryPadding*s.Z/Ye.tileSize/tt,ht=[Ke.getTilePoint(new s.$(he,ye)),Ke.getTilePoint(new s.$(_e,Ie))];if(ht[0].x-at<s.Z&&ht[0].y-at<s.Z&&ht[1].x+at>=0&&ht[1].y+at>=0){const vt=G.map(Tt=>Ke.getTilePoint(Tt)),gt=Z.map(Tt=>Ke.getTilePoint(Tt));M.push({tile:Ye,tileID:Ke,queryGeometry:vt,cameraQueryGeometry:gt,scale:tt})}}return M}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map(S=>this._tiles[S].tileID);return this.transform&&this.transform.populateCache(m),m}hasTransition(){if(this._source.hasTransition())return!0;if(Dt(this._source.type)){const u=p.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=u)return!0}return!1}setFeatureState(u,m,S){this._state.updateState(u=u||"_geojsonTileLayer",m,S)}removeFeatureState(u,m,S){this._state.removeFeatureState(u=u||"_geojsonTileLayer",m,S)}getFeatureState(u,m){return this._state.getState(u=u||"_geojsonTileLayer",m)}setDependencies(u,m,S){const M=this._tiles[u];M&&M.setDependencies(m,S)}reloadTilesForDependencies(u,m){for(const S in this._tiles)this._tiles[S].hasDependency(u,m)&&this._reloadTile(S,"reloading");this._cache.filter(S=>!S.hasDependency(u,m))}}function Vt(P,u){const m=Math.abs(2*P.wrap)-+(P.wrap<0),S=Math.abs(2*u.wrap)-+(u.wrap<0);return P.overscaledZ-u.overscaledZ||S-m||u.canonical.y-P.canonical.y||u.canonical.x-P.canonical.x}function Dt(P){return P==="raster"||P==="image"||P==="video"}Et.maxOverzooming=10,Et.maxUnderzooming=3;class ln{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let S=1;S<this.points.length;S++)this._distances[S]=this._distances[S-1]+this.points[S].dist(this.points[S-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.ae(u,0,1);let m=1,S=this._distances[m];const M=u*this.paddedLength+this.padding;for(;S<M&&m<this._distances.length;)S=this._distances[++m];const D=m-1,F=this._distances[D],G=S-F,Z=G>0?(M-F)/G:0;return this.points[D].mult(1-Z).add(this.points[m].mult(Z))}}function kn(P,u){let m=!0;return P==="always"||P!=="never"&&u!=="never"||(m=!1),m}class Tn{constructor(u,m,S){const M=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(u/S),this.yCellCount=Math.ceil(m/S);for(let F=0;F<this.xCellCount*this.yCellCount;F++)M.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,S,M,D){this._forEachCell(m,S,M,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(S),this.bboxes.push(M),this.bboxes.push(D)}insertCircle(u,m,S,M){this._forEachCell(m-M,S-M,m+M,S+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(S),this.circles.push(M)}_insertBoxCell(u,m,S,M,D,F){this.boxCells[D].push(F)}_insertCircleCell(u,m,S,M,D,F){this.circleCells[D].push(F)}_query(u,m,S,M,D,F,G){if(S<0||u>this.width||M<0||m>this.height)return[];const Z=[];if(u<=0&&m<=0&&this.width<=S&&this.height<=M){if(D)return[{key:null,x1:u,y1:m,x2:S,y2:M}];for(let ne=0;ne<this.boxKeys.length;ne++)Z.push({key:this.boxKeys[ne],x1:this.bboxes[4*ne],y1:this.bboxes[4*ne+1],x2:this.bboxes[4*ne+2],y2:this.bboxes[4*ne+3]});for(let ne=0;ne<this.circleKeys.length;ne++){const he=this.circles[3*ne],ye=this.circles[3*ne+1],_e=this.circles[3*ne+2];Z.push({key:this.circleKeys[ne],x1:he-_e,y1:ye-_e,x2:he+_e,y2:ye+_e})}}else this._forEachCell(u,m,S,M,this._queryCell,Z,{hitTest:D,overlapMode:F,seenUids:{box:{},circle:{}}},G);return Z}query(u,m,S,M){return this._query(u,m,S,M,!1,null)}hitTest(u,m,S,M,D,F){return this._query(u,m,S,M,!0,D,F).length>0}hitTestCircle(u,m,S,M,D){const F=u-S,G=u+S,Z=m-S,ne=m+S;if(G<0||F>this.width||ne<0||Z>this.height)return!1;const he=[];return this._forEachCell(F,Z,G,ne,this._queryCellCircle,he,{hitTest:!0,overlapMode:M,circle:{x:u,y:m,radius:S},seenUids:{box:{},circle:{}}},D),he.length>0}_queryCell(u,m,S,M,D,F,G,Z){const{seenUids:ne,hitTest:he,overlapMode:ye}=G,_e=this.boxCells[D];if(_e!==null){const De=this.bboxes;for(const Ye of _e)if(!ne.box[Ye]){ne.box[Ye]=!0;const Ke=4*Ye,tt=this.boxKeys[Ye];if(u<=De[Ke+2]&&m<=De[Ke+3]&&S>=De[Ke+0]&&M>=De[Ke+1]&&(!Z||Z(tt))&&(!he||!kn(ye,tt.overlapMode))&&(F.push({key:tt,x1:De[Ke],y1:De[Ke+1],x2:De[Ke+2],y2:De[Ke+3]}),he))return!0}}const Ie=this.circleCells[D];if(Ie!==null){const De=this.circles;for(const Ye of Ie)if(!ne.circle[Ye]){ne.circle[Ye]=!0;const Ke=3*Ye,tt=this.circleKeys[Ye];if(this._circleAndRectCollide(De[Ke],De[Ke+1],De[Ke+2],u,m,S,M)&&(!Z||Z(tt))&&(!he||!kn(ye,tt.overlapMode))){const at=De[Ke],ht=De[Ke+1],vt=De[Ke+2];if(F.push({key:tt,x1:at-vt,y1:ht-vt,x2:at+vt,y2:ht+vt}),he)return!0}}}return!1}_queryCellCircle(u,m,S,M,D,F,G,Z){const{circle:ne,seenUids:he,overlapMode:ye}=G,_e=this.boxCells[D];if(_e!==null){const De=this.bboxes;for(const Ye of _e)if(!he.box[Ye]){he.box[Ye]=!0;const Ke=4*Ye,tt=this.boxKeys[Ye];if(this._circleAndRectCollide(ne.x,ne.y,ne.radius,De[Ke+0],De[Ke+1],De[Ke+2],De[Ke+3])&&(!Z||Z(tt))&&!kn(ye,tt.overlapMode))return F.push(!0),!0}}const Ie=this.circleCells[D];if(Ie!==null){const De=this.circles;for(const Ye of Ie)if(!he.circle[Ye]){he.circle[Ye]=!0;const Ke=3*Ye,tt=this.circleKeys[Ye];if(this._circlesCollide(De[Ke],De[Ke+1],De[Ke+2],ne.x,ne.y,ne.radius)&&(!Z||Z(tt))&&!kn(ye,tt.overlapMode))return F.push(!0),!0}}}_forEachCell(u,m,S,M,D,F,G,Z){const ne=this._convertToXCellCoord(u),he=this._convertToYCellCoord(m),ye=this._convertToXCellCoord(S),_e=this._convertToYCellCoord(M);for(let Ie=ne;Ie<=ye;Ie++)for(let De=he;De<=_e;De++)if(D.call(this,u,m,S,M,this.xCellCount*De+Ie,F,G,Z))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,S,M,D,F){const G=M-u,Z=D-m,ne=S+F;return ne*ne>G*G+Z*Z}_circleAndRectCollide(u,m,S,M,D,F,G){const Z=(F-M)/2,ne=Math.abs(u-(M+Z));if(ne>Z+S)return!1;const he=(G-D)/2,ye=Math.abs(m-(D+he));if(ye>he+S)return!1;if(ne<=Z||ye<=he)return!0;const _e=ne-Z,Ie=ye-he;return _e*_e+Ie*Ie<=S*S}}function Xn(P,u,m){const S=s.K();if(!P){const{vecSouth:ye,vecEast:_e}=Yt(u),Ie=c();Ie[0]=_e[0],Ie[1]=_e[1],Ie[2]=ye[0],Ie[3]=ye[1],M=Ie,(he=(F=(D=Ie)[0])*(ne=D[3])-(Z=D[2])*(G=D[1]))&&(M[0]=ne*(he=1/he),M[1]=-G*he,M[2]=-Z*he,M[3]=F*he),S[0]=Ie[0],S[1]=Ie[1],S[4]=Ie[2],S[5]=Ie[3]}var M,D,F,G,Z,ne,he;return s.M(S,S,[1/m,1/m,1]),S}function mr(P,u,m,S){if(P){const M=s.K();if(!u){const{vecSouth:D,vecEast:F}=Yt(m);M[0]=F[0],M[1]=F[1],M[4]=D[0],M[5]=D[1]}return s.M(M,M,[S,S,1]),M}return m.pixelsToClipSpaceMatrix}function Yt(P){const u=Math.cos(P.rollInRadians),m=Math.sin(P.rollInRadians),S=Math.cos(P.pitchInRadians),M=Math.cos(P.bearingInRadians),D=Math.sin(P.bearingInRadians),F=s.ao();F[0]=-M*S*m-D*u,F[1]=-D*S*m+M*u;const G=s.ap(F);G<1e-9?s.aq(F):s.ar(F,F,1/G);const Z=s.ao();Z[0]=M*S*u-D*m,Z[1]=D*S*u+M*m;const ne=s.ap(Z);return ne<1e-9?s.aq(Z):s.ar(Z,Z,1/ne),{vecEast:Z,vecSouth:F}}function rr(P,u,m,S){let M;S?(M=[P,u,S(P,u),1],s.at(M,M,m)):(M=[P,u,0,1],dn(M,M,m));const D=M[3];return{point:new s.P(M[0]/D,M[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}function zr(P,u){return .5+P/u*.5}function Ur(P,u){return P.x>=-u[0]&&P.x<=u[0]&&P.y>=-u[1]&&P.y<=u[1]}function Br(P,u,m,S,M,D,F,G,Z,ne,he,ye,_e){const Ie=m?P.textSizeData:P.iconSizeData,De=s.ak(Ie,u.transform.zoom),Ye=[256/u.width*2+1,256/u.height*2+1],Ke=m?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Ke.clear();const tt=P.lineVertexArray,at=m?P.text.placedSymbolArray:P.icon.placedSymbolArray,ht=u.transform.width/u.transform.height;let vt=!1;for(let gt=0;gt<at.length;gt++){const Tt=at.get(gt);if(Tt.hidden||Tt.writingMode===s.al.vertical&&!vt){Pt(Tt.numGlyphs,Ke);continue}vt=!1;const bt=new s.P(Tt.anchorX,Tt.anchorY),Nt={getElevation:_e,pitchedLabelPlaneMatrix:S,lineVertexArray:tt,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:u.transform,tileAnchorPoint:bt,unwrappedTileID:Z,width:ne,height:he,translation:ye},Ut=$e(Tt.anchorX,Tt.anchorY,Nt);if(!Ur(Ut.point,Ye)){Pt(Tt.numGlyphs,Ke);continue}const nn=zr(u.transform.cameraToCenterDistance,Ut.signedDistanceFromCamera),an=s.am(Ie,De,Tt),tn=D?an*u.transform.getPitchedTextCorrection(Tt.anchorX,Tt.anchorY,Z)/nn:an*nn,An=en({projectionContext:Nt,pitchedLabelPlaneMatrixInverse:M,symbol:Tt,fontSize:tn,flip:!1,keepUpright:F,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Ke,aspectRatio:ht,rotateToLine:G});vt=An.useVertical,(An.notEnoughRoom||vt||An.needsFlipping&&en({projectionContext:Nt,pitchedLabelPlaneMatrixInverse:M,symbol:Tt,fontSize:tn,flip:!0,keepUpright:F,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Ke,aspectRatio:ht,rotateToLine:G}).notEnoughRoom)&&Pt(Tt.numGlyphs,Ke)}m?P.text.dynamicLayoutVertexBuffer.updateData(Ke):P.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function Qt(P,u,m,S,M,D,F,G){const Z=D.glyphStartIndex+D.numGlyphs,ne=D.lineStartIndex,he=D.lineStartIndex+D.lineLength,ye=u.getoffsetX(D.glyphStartIndex),_e=u.getoffsetX(Z-1),Ie=rt(P*ye,m,S,M,D.segment,ne,he,G,F);if(!Ie)return null;const De=rt(P*_e,m,S,M,D.segment,ne,he,G,F);return De?G.projectionCache.anyProjectionOccluded?null:{first:Ie,last:De}:null}function St(P,u,m,S){return P===s.al.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*S?{useVertical:!0}:(P===s.al.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function en(P){const{projectionContext:u,pitchedLabelPlaneMatrixInverse:m,symbol:S,fontSize:M,flip:D,keepUpright:F,glyphOffsetArray:G,dynamicLayoutVertexArray:Z,aspectRatio:ne,rotateToLine:he}=P,ye=M/24,_e=S.lineOffsetX*ye,Ie=S.lineOffsetY*ye;let De;if(S.numGlyphs>1){const Ye=S.glyphStartIndex+S.numGlyphs,Ke=S.lineStartIndex,tt=S.lineStartIndex+S.lineLength,at=Qt(ye,G,_e,Ie,D,S,he,u);if(!at)return{notEnoughRoom:!0};const ht=ar(at.first.point.x,at.first.point.y,u,m),vt=ar(at.last.point.x,at.last.point.y,u,m);if(F&&!D){const gt=St(S.writingMode,ht,vt,ne);if(gt)return gt}De=[at.first];for(let gt=S.glyphStartIndex+1;gt<Ye-1;gt++)De.push(rt(ye*G.getoffsetX(gt),_e,Ie,D,S.segment,Ke,tt,u,he));De.push(at.last)}else{if(F&&!D){const Ke=qr(u.tileAnchorPoint.x,u.tileAnchorPoint.y,u).point,tt=S.lineStartIndex+S.segment+1,at=new s.P(u.lineVertexArray.getx(tt),u.lineVertexArray.gety(tt)),ht=qr(at.x,at.y,u),vt=ht.signedDistanceFromCamera>0?ht.point:gr(u.tileAnchorPoint,at,Ke,1,u),gt=ar(Ke.x,Ke.y,u,m),Tt=ar(vt.x,vt.y,u,m),bt=St(S.writingMode,gt,Tt,ne);if(bt)return bt}const Ye=rt(ye*G.getoffsetX(S.glyphStartIndex),_e,Ie,D,S.segment,S.lineStartIndex,S.lineStartIndex+S.lineLength,u,he);if(!Ye||u.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};De=[Ye]}for(const Ye of De)s.as(Z,Ye.point,Ye.angle);return{}}function gr(P,u,m,S,M){const D=P.add(P.sub(u)._unit()),F=qr(D.x,D.y,M).point,G=m.sub(F);return m.add(G._mult(S/G.mag()))}function Tr(P,u,m){const S=u.projectionCache;if(S.projections[P])return S.projections[P];const M=new s.P(u.lineVertexArray.getx(P),u.lineVertexArray.gety(P)),D=qr(M.x,M.y,u);if(D.signedDistanceFromCamera>0)return S.projections[P]=D.point,S.anyProjectionOccluded=S.anyProjectionOccluded||D.isOccluded,D.point;const F=P-m.direction;return gr(m.distanceFromAnchor===0?u.tileAnchorPoint:new s.P(u.lineVertexArray.getx(F),u.lineVertexArray.gety(F)),M,m.previousVertex,m.absOffsetX-m.distanceFromAnchor+1,u)}function qr(P,u,m){const S=P+m.translation[0],M=u+m.translation[1];let D;return m.pitchWithMap?(D=rr(S,M,m.pitchedLabelPlaneMatrix,m.getElevation),D.isOccluded=!1):(D=m.transform.projectTileCoordinates(S,M,m.unwrappedTileID,m.getElevation),D.point.x=(.5*D.point.x+.5)*m.width,D.point.y=(.5*-D.point.y+.5)*m.height),D}function ar(P,u,m,S){if(m.pitchWithMap){const M=[P,u,0,1];return s.at(M,M,S),m.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],m.unwrappedTileID,m.getElevation).point}return{x:P/m.width*2-1,y:u/m.height*2-1}}function $e(P,u,m){return m.transform.projectTileCoordinates(P,u,m.unwrappedTileID,m.getElevation)}function je(P,u,m){return P._unit()._perp()._mult(u*m)}function zt(P,u,m,S,M,D,F,G,Z){if(G.projectionCache.offsets[P])return G.projectionCache.offsets[P];const ne=m.add(u);if(P+Z.direction<S||P+Z.direction>=M)return G.projectionCache.offsets[P]=ne,ne;const he=Tr(P+Z.direction,G,Z),ye=je(he.sub(m),F,Z.direction),_e=m.add(ye),Ie=he.add(ye);return G.projectionCache.offsets[P]=s.au(D,ne,_e,Ie)||ne,G.projectionCache.offsets[P]}function rt(P,u,m,S,M,D,F,G,Z){const ne=S?P-u:P+u;let he=ne>0?1:-1,ye=0;S&&(he*=-1,ye=Math.PI),he<0&&(ye+=Math.PI);let _e,Ie=he>0?D+M:D+M+1;G.projectionCache.cachedAnchorPoint?_e=G.projectionCache.cachedAnchorPoint:(_e=qr(G.tileAnchorPoint.x,G.tileAnchorPoint.y,G).point,G.projectionCache.cachedAnchorPoint=_e);let De,Ye,Ke=_e,tt=_e,at=0,ht=0;const vt=Math.abs(ne),gt=[];let Tt;for(;at+ht<=vt;){if(Ie+=he,Ie<D||Ie>=F)return null;at+=ht,tt=Ke,Ye=De;const Ut={absOffsetX:vt,direction:he,distanceFromAnchor:at,previousVertex:tt};if(Ke=Tr(Ie,G,Ut),m===0)gt.push(tt),Tt=Ke.sub(tt);else{let nn;const an=Ke.sub(tt);nn=an.mag()===0?je(Tr(Ie+he,G,Ut).sub(Ke),m,he):je(an,m,he),Ye||(Ye=tt.add(nn)),De=zt(Ie,nn,Ke,D,F,Ye,m,G,Ut),gt.push(Ye),Tt=De.sub(Ye)}ht=Tt.mag()}const bt=Tt._mult((vt-at)/ht)._add(Ye||tt),Nt=ye+Math.atan2(Ke.y-tt.y,Ke.x-tt.x);return gt.push(bt),{point:bt,angle:Z?Nt:0,path:gt}}const Ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pt(P,u){for(let m=0;m<P;m++){const S=u.length;u.resize(S+4),u.float32.set(Ht,3*S)}}function dn(P,u,m){const S=u[0],M=u[1];return P[0]=m[0]*S+m[4]*M+m[12],P[1]=m[1]*S+m[5]*M+m[13],P[3]=m[3]*S+m[7]*M+m[15],P}const Hn=100;class dr{constructor(u,m=new Tn(u.width+200,u.height+200,25),S=new Tn(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=S,this.pitchFactor=Math.cos(u.pitch*Math.PI/180)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Hn,this.screenBottomBoundary=u.height+Hn,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,S,M,D,F,G,Z,ne,he,ye,_e){const Ie=this.projectAndGetPerspectiveRatio(u.anchorPointX+Z[0],u.anchorPointY+Z[1],D,he,_e),De=S*Ie.perspectiveRatio;let Ye;if(F||G)Ye=this._projectCollisionBox(u,De,M,D,F,G,Z,Ie,he,ye,_e);else{const Tt=Ie.x+(ye?ye.x*De:0),bt=Ie.y+(ye?ye.y*De:0);Ye={allPointsOccluded:!1,box:[Tt+u.x1*De,bt+u.y1*De,Tt+u.x2*De,bt+u.y2*De]}}const[Ke,tt,at,ht]=Ye.box,vt=F?Ye.allPointsOccluded:Ie.isOccluded;let gt=vt;return gt||(gt=Ie.perspectiveRatio<this.perspectiveRatioCutoff),gt||(gt=!this.isInsideGrid(Ke,tt,at,ht)),gt||m!=="always"&&this.grid.hitTest(Ke,tt,at,ht,m,ne)?{box:[Ke,tt,at,ht],placeable:!1,offscreen:!1,occluded:vt}:{box:[Ke,tt,at,ht],placeable:!0,offscreen:this.isOffscreen(Ke,tt,at,ht),occluded:vt}}placeCollisionCircles(u,m,S,M,D,F,G,Z,ne,he,ye,_e,Ie,De){const Ye=[],Ke=new s.P(m.anchorX,m.anchorY),tt=this.getPerspectiveRatio(Ke.x,Ke.y,F,De),at=(ne?D*this.transform.getPitchedTextCorrection(m.anchorX,m.anchorY,F)/tt:D*tt)/s.ay,ht={getElevation:De,pitchedLabelPlaneMatrix:G,lineVertexArray:S,pitchWithMap:ne,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ke,unwrappedTileID:F,width:this.transform.width,height:this.transform.height,translation:Ie},vt=Qt(at,M,m.lineOffsetX*at,m.lineOffsetY*at,!1,m,!1,ht);let gt=!1,Tt=!1,bt=!0;if(vt){const Nt=.5*ye*tt+_e,Ut=new s.P(-100,-100),nn=new s.P(this.screenRightBoundary,this.screenBottomBoundary),an=new ln,tn=vt.first,An=vt.last;let Sn=[];for(let Pr=tn.path.length-1;Pr>=1;Pr--)Sn.push(tn.path[Pr]);for(let Pr=1;Pr<An.path.length;Pr++)Sn.push(An.path[Pr]);const pn=2.5*Nt;if(ne){const Pr=this.projectPathToScreenSpace(Sn,ht);Sn=Pr.some(br=>br.signedDistanceFromCamera<=0)?[]:Pr.map(br=>br.point)}let qn=[];if(Sn.length>0){const Pr=Sn[0].clone(),br=Sn[0].clone();for(let qi=1;qi<Sn.length;qi++)Pr.x=Math.min(Pr.x,Sn[qi].x),Pr.y=Math.min(Pr.y,Sn[qi].y),br.x=Math.max(br.x,Sn[qi].x),br.y=Math.max(br.y,Sn[qi].y);qn=Pr.x>=Ut.x&&br.x<=nn.x&&Pr.y>=Ut.y&&br.y<=nn.y?[Sn]:br.x<Ut.x||Pr.x>nn.x||br.y<Ut.y||Pr.y>nn.y?[]:s.av([Sn],Ut.x,Ut.y,nn.x,nn.y)}for(const Pr of qn){an.reset(Pr,.25*Nt);let br=0;br=an.length<=.5*Nt?1:Math.ceil(an.paddedLength/pn)+1;for(let qi=0;qi<br;qi++){const wi=qi/Math.max(br-1,1),Zi=an.lerp(wi),Ni=Zi.x+Hn,Si=Zi.y+Hn;Ye.push(Ni,Si,Nt,0);const mi=Ni-Nt,Va=Si-Nt,Aa=Ni+Nt,Ya=Si+Nt;if(bt=bt&&this.isOffscreen(mi,Va,Aa,Ya),Tt=Tt||this.isInsideGrid(mi,Va,Aa,Ya),u!=="always"&&this.grid.hitTestCircle(Ni,Si,Nt,u,he)&&(gt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!Z&&gt||!Tt||tt<this.perspectiveRatioCutoff?[]:Ye,offscreen:bt,collisionDetected:gt}}projectPathToScreenSpace(u,m){const S=function(M,D){const F=s.K();return s.an(F,D.pitchedLabelPlaneMatrix),M.map(G=>{const Z=rr(G.x,G.y,F,D.getElevation),ne=D.transform.projectTileCoordinates(Z.point.x,Z.point.y,D.unwrappedTileID,D.getElevation);return ne.point.x=(.5*ne.point.x+.5)*D.width,ne.point.y=(.5*-ne.point.y+.5)*D.height,ne})}(u,m);return function(M){let D=0,F=0,G=0,Z=0;for(let ne=0;ne<M.length;ne++)M[ne].isOccluded?(G=ne+1,Z=0):(Z++,Z>F&&(F=Z,D=G));return M.slice(D,D+F)}(S)}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let S=1/0,M=1/0,D=-1/0,F=-1/0;for(const he of u){const ye=new s.P(he.x+Hn,he.y+Hn);S=Math.min(S,ye.x),M=Math.min(M,ye.y),D=Math.max(D,ye.x),F=Math.max(F,ye.y),m.push(ye)}const G=this.grid.query(S,M,D,F).concat(this.ignoredGrid.query(S,M,D,F)),Z={},ne={};for(const he of G){const ye=he.key;if(Z[ye.bucketInstanceId]===void 0&&(Z[ye.bucketInstanceId]={}),Z[ye.bucketInstanceId][ye.featureIndex])continue;const _e=[new s.P(he.x1,he.y1),new s.P(he.x2,he.y1),new s.P(he.x2,he.y2),new s.P(he.x1,he.y2)];s.aw(m,_e)&&(Z[ye.bucketInstanceId][ye.featureIndex]=!0,ne[ye.bucketInstanceId]===void 0&&(ne[ye.bucketInstanceId]=[]),ne[ye.bucketInstanceId].push(ye.featureIndex))}return ne}insertCollisionBox(u,m,S,M,D,F){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:D,collisionGroupID:F,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,S,M,D,F){const G=S?this.ignoredGrid:this.grid,Z={bucketInstanceId:M,featureIndex:D,collisionGroupID:F,overlapMode:m};for(let ne=0;ne<u.length;ne+=4)G.insertCircle(Z,u[ne],u[ne+1],u[ne+2])}projectAndGetPerspectiveRatio(u,m,S,M,D){if(D){let F;M?(F=[u,m,M(u,m),1],s.at(F,F,D)):(F=[u,m,0,1],dn(F,F,D));const G=F[3];return{x:(F[0]/G+1)/2*this.transform.width+Hn,y:(-F[1]/G+1)/2*this.transform.height+Hn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/G*.5,isOccluded:!1,signedDistanceFromCamera:G}}{const F=this.transform.projectTileCoordinates(u,m,S,M);return{x:(F.point.x+1)/2*this.transform.width+Hn,y:(1-F.point.y)/2*this.transform.height+Hn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/F.signedDistanceFromCamera*.5,isOccluded:F.isOccluded,signedDistanceFromCamera:F.signedDistanceFromCamera}}}getPerspectiveRatio(u,m,S,M){const D=this.transform.projectTileCoordinates(u,m,S,M);return .5+this.transform.cameraToCenterDistance/D.signedDistanceFromCamera*.5}isOffscreen(u,m,S,M){return S<Hn||u>=this.screenRightBoundary||M<Hn||m>this.screenBottomBoundary}isInsideGrid(u,m,S,M){return S>=0&&u<this.gridRightBoundary&&M>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.ad([]);return s.L(u,u,[-100,-100,0]),u}_projectCollisionBox(u,m,S,M,D,F,G,Z,ne,he,ye){let _e=1,Ie=0,De=0,Ye=1;const Ke=u.anchorPointX+G[0],tt=u.anchorPointY+G[1];if(F&&!D){const Sn=this.projectAndGetPerspectiveRatio(Ke+1,tt,M,ne,ye),pn=Sn.x-Z.x,qn=Math.atan((Sn.y-Z.y)/pn)+(pn<0?Math.PI:0),Pr=Math.sin(qn),br=Math.cos(qn);_e=br,Ie=Pr,De=-Pr,Ye=br}else if(!F&&D){const Sn=Yt(this.transform);_e=Sn.vecEast[0],Ie=Sn.vecEast[1],De=Sn.vecSouth[0],Ye=Sn.vecSouth[1]}let at=Z.x,ht=Z.y,vt=m;D&&(at=Ke,ht=tt,vt=Math.pow(2,-(this.transform.zoom-S.overscaledZ)),vt*=this.transform.getPitchedTextCorrection(Ke,tt,M),he||(vt*=s.ae(.5+Z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),he&&(at+=_e*he.x*vt+De*he.y*vt,ht+=Ie*he.x*vt+Ye*he.y*vt);const gt=u.x1*vt,Tt=u.x2*vt,bt=(gt+Tt)/2,Nt=u.y1*vt,Ut=u.y2*vt,nn=(Nt+Ut)/2,an=[{offsetX:gt,offsetY:Nt},{offsetX:bt,offsetY:Nt},{offsetX:Tt,offsetY:Nt},{offsetX:Tt,offsetY:nn},{offsetX:Tt,offsetY:Ut},{offsetX:bt,offsetY:Ut},{offsetX:gt,offsetY:Ut},{offsetX:gt,offsetY:nn}];let tn=[];for(const{offsetX:Sn,offsetY:pn}of an)tn.push(new s.P(at+_e*Sn+De*pn,ht+Ie*Sn+Ye*pn));let An=!1;if(D){const Sn=tn.map(pn=>this.projectAndGetPerspectiveRatio(pn.x,pn.y,M,ne,ye));An=Sn.some(pn=>!pn.isOccluded),tn=Sn.map(pn=>new s.P(pn.x,pn.y))}else An=!0;return{box:s.ax(tn),allPointsOccluded:!An}}}class Cr{constructor(u,m,S,M){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):M&&S?1:0,this.placed=S}isHidden(){return this.opacity===0&&!this.placed}}class ci{constructor(u,m,S,M,D){this.text=new Cr(u?u.text:null,m,S,D),this.icon=new Cr(u?u.icon:null,m,M,D)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Li{constructor(u,m,S){this.text=u,this.icon=m,this.skipFade=S}}class Lo{constructor(u,m,S,M,D){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=S,this.bucketIndex=M,this.tileID=D}}class yl{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:S=>S.collisionGroupID===m}}return this.collisionGroups[u]}}function uu(P,u,m,S,M){const{horizontalAlign:D,verticalAlign:F}=s.aE(P);return new s.P(-(D-.5)*u+S[0]*M,-(F-.5)*m+S[1]*M)}class cu{constructor(u,m,S,M,D){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new dr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new yl(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(u){const m=this.terrain;return m?(S,M)=>m.getElevation(u,S,M):null}getBucketParts(u,m,S,M){const D=S.getBucket(m),F=S.latestFeatureIndex;if(!D||!F||m.id!==D.layerIds[0])return;const G=S.collisionBoxArray,Z=D.layers[0].layout,ne=D.layers[0].paint,he=Math.pow(2,this.transform.zoom-S.tileID.overscaledZ),ye=S.tileSize/s.Z,_e=S.tileID.toUnwrapped(),Ie=Z.get("text-rotation-alignment")==="map",De=s.az(S,1,this.transform.zoom),Ye=s.aA(this.collisionIndex.transform,S,ne.get("text-translate"),ne.get("text-translate-anchor")),Ke=s.aA(this.collisionIndex.transform,S,ne.get("icon-translate"),ne.get("icon-translate-anchor")),tt=Xn(Ie,this.transform,De);this.retainedQueryData[D.bucketInstanceId]=new Lo(D.bucketInstanceId,F,D.sourceLayerIndex,D.index,S.tileID);const at={bucket:D,layout:Z,translationText:Ye,translationIcon:Ke,unwrappedTileID:_e,pitchedLabelPlaneMatrix:tt,scale:he,textPixelRatio:ye,holdingForFade:S.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:s.ak(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(M)for(const ht of D.sortKeyRanges){const{sortKey:vt,symbolInstanceStart:gt,symbolInstanceEnd:Tt}=ht;u.push({sortKey:vt,symbolInstanceStart:gt,symbolInstanceEnd:Tt,parameters:at})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:at})}attemptAnchorPlacement(u,m,S,M,D,F,G,Z,ne,he,ye,_e,Ie,De,Ye,Ke,tt,at,ht,vt){const gt=s.aB[u.textAnchor],Tt=[u.textOffset0,u.textOffset1],bt=uu(gt,S,M,Tt,D),Nt=this.collisionIndex.placeCollisionBox(m,_e,Z,ne,he,G,F,Ke,ye.predicate,ht,bt,vt);if((!at||this.collisionIndex.placeCollisionBox(at,_e,Z,ne,he,G,F,tt,ye.predicate,ht,bt,vt).placeable)&&Nt.placeable){let Ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID].text&&(Ut=this.prevPlacement.variableOffsets[Ie.crossTileID].anchor),Ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ie.crossTileID]={textOffset:Tt,width:S,height:M,anchor:gt,textBoxScale:D,prevAnchor:Ut},this.markUsedJustification(De,gt,Ie,Ye),De.allowVerticalPlacement&&(this.markUsedOrientation(De,Ye,Ie),this.placedOrientations[Ie.crossTileID]=Ye),{shift:bt,placedGlyphBoxes:Nt}}}placeLayerBucketPart(u,m,S){const{bucket:M,layout:D,translationText:F,translationIcon:G,unwrappedTileID:Z,pitchedLabelPlaneMatrix:ne,textPixelRatio:he,holdingForFade:ye,collisionBoxArray:_e,partiallyEvaluatedTextSize:Ie,collisionGroup:De}=u.parameters,Ye=D.get("text-optional"),Ke=D.get("icon-optional"),tt=s.aC(D,"text-overlap","text-allow-overlap"),at=tt==="always",ht=s.aC(D,"icon-overlap","icon-allow-overlap"),vt=ht==="always",gt=D.get("text-rotation-alignment")==="map",Tt=D.get("text-pitch-alignment")==="map",bt=D.get("icon-text-fit")!=="none",Nt=D.get("symbol-z-order")==="viewport-y",Ut=at&&(vt||!M.hasIconData()||Ke),nn=vt&&(at||!M.hasTextData()||Ye);!M.collisionArrays&&_e&&M.deserializeCollisionBoxes(_e);const an=this.retainedQueryData[M.bucketInstanceId].tileID,tn=this._getTerrainElevationFunc(an),An=this.transform.getFastPathSimpleProjectionMatrix(an),Sn=(pn,qn,Pr)=>{var br,qi;if(m[pn.crossTileID])return;if(ye)return void(this.placements[pn.crossTileID]=new Li(!1,!1,!1));let wi=!1,Zi=!1,Ni=!0,Si=null,mi={box:null,placeable:!1,offscreen:null,occluded:!1},Va={placeable:!1},Aa=null,Ya=null,uo=null,Ml=0,gc=0,mu=0;qn.textFeatureIndex?Ml=qn.textFeatureIndex:pn.useRuntimeCollisionCircles&&(Ml=pn.featureIndex),qn.verticalTextFeatureIndex&&(gc=qn.verticalTextFeatureIndex);const gu=qn.textBox;if(gu){const ns=Ji=>{let $i=s.al.horizontal;if(M.allowVerticalPlacement&&!Ji&&this.prevPlacement){const ga=this.prevPlacement.placedOrientations[pn.crossTileID];ga&&(this.placedOrientations[pn.crossTileID]=ga,$i=ga,this.markUsedOrientation(M,$i,pn))}return $i},yc=(Ji,$i)=>{if(M.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&qn.verticalTextBox){for(const ga of M.writingModes)if(ga===s.al.vertical?(mi=$i(),Va=mi):mi=Ji(),mi&&mi.placeable)break}else mi=Ji()},yu=pn.textAnchorOffsetStartIndex,_u=pn.textAnchorOffsetEndIndex;if(_u===yu){const Ji=($i,ga)=>{const Yi=this.collisionIndex.placeCollisionBox($i,tt,he,an,Z,Tt,gt,F,De.predicate,tn,void 0,An);return Yi&&Yi.placeable&&(this.markUsedOrientation(M,ga,pn),this.placedOrientations[pn.crossTileID]=ga),Yi};yc(()=>Ji(gu,s.al.horizontal),()=>{const $i=qn.verticalTextBox;return M.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&$i?Ji($i,s.al.vertical):{box:null,offscreen:null}}),ns(mi&&mi.placeable)}else{let Ji=s.aB[(qi=(br=this.prevPlacement)===null||br===void 0?void 0:br.variableOffsets[pn.crossTileID])===null||qi===void 0?void 0:qi.anchor];const $i=(Yi,SS,kd)=>{const jE=Yi.x2-Yi.x1,CS=Yi.y2-Yi.y1,G_=pn.textBoxScale,TS=bt&&ht==="never"?SS:null;let rs=null,_c=tt==="never"?1:2,K_="never";Ji&&_c++;for(let MS=0;MS<_c;MS++){for(let kp=yu;kp<_u;kp++){const q_=M.textAnchorOffsets.get(kp);if(Ji&&q_.textAnchor!==Ji)continue;const Z_=this.attemptAnchorPlacement(q_,Yi,jE,CS,G_,gt,Tt,he,an,Z,De,K_,pn,M,kd,F,G,TS,tn);if(Z_&&(rs=Z_.placedGlyphBoxes,rs&&rs.placeable))return wi=!0,Si=Z_.shift,rs}Ji?Ji=null:K_=tt}return S&&!rs&&(rs={box:this.collisionIndex.placeCollisionBox(gu,"always",he,an,Z,Tt,gt,F,De.predicate,tn,void 0,An).box,offscreen:!1,placeable:!1,occluded:!1}),rs};yc(()=>$i(gu,qn.iconBox,s.al.horizontal),()=>{const Yi=qn.verticalTextBox;return M.allowVerticalPlacement&&(!mi||!mi.placeable)&&pn.numVerticalGlyphVertices>0&&Yi?$i(Yi,qn.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),mi&&(wi=mi.placeable,Ni=mi.offscreen);const ga=ns(mi&&mi.placeable);if(!wi&&this.prevPlacement){const Yi=this.prevPlacement.variableOffsets[pn.crossTileID];Yi&&(this.variableOffsets[pn.crossTileID]=Yi,this.markUsedJustification(M,Yi.anchor,pn,ga))}}}if(Aa=mi,wi=Aa&&Aa.placeable,Ni=Aa&&Aa.offscreen,pn.useRuntimeCollisionCircles){const ns=M.text.placedSymbolArray.get(pn.centerJustifiedTextSymbolIndex),yc=s.am(M.textSizeData,Ie,ns),yu=D.get("text-padding");Ya=this.collisionIndex.placeCollisionCircles(tt,ns,M.lineVertexArray,M.glyphOffsetArray,yc,Z,ne,S,Tt,De.predicate,pn.collisionCircleDiameter,yu,F,tn),Ya.circles.length&&Ya.collisionDetected&&!S&&s.w("Collisions detected, but collision boxes are not shown"),wi=at||Ya.circles.length>0&&!Ya.collisionDetected,Ni=Ni&&Ya.offscreen}if(qn.iconFeatureIndex&&(mu=qn.iconFeatureIndex),qn.iconBox){const ns=yc=>this.collisionIndex.placeCollisionBox(yc,ht,he,an,Z,Tt,gt,G,De.predicate,tn,bt&&Si?Si:void 0,An);Va&&Va.placeable&&qn.verticalIconBox?(uo=ns(qn.verticalIconBox),Zi=uo.placeable):(uo=ns(qn.iconBox),Zi=uo.placeable),Ni=Ni&&uo.offscreen}const kl=Ye||pn.numHorizontalGlyphVertices===0&&pn.numVerticalGlyphVertices===0,Td=Ke||pn.numIconVertices===0;kl||Td?Td?kl||(Zi=Zi&&wi):wi=Zi&&wi:Zi=wi=Zi&&wi;const Md=Zi&&uo.placeable;if(wi&&Aa.placeable&&this.collisionIndex.insertCollisionBox(Aa.box,tt,D.get("text-ignore-placement"),M.bucketInstanceId,Va&&Va.placeable&&gc?gc:Ml,De.ID),Md&&this.collisionIndex.insertCollisionBox(uo.box,ht,D.get("icon-ignore-placement"),M.bucketInstanceId,mu,De.ID),Ya&&wi&&this.collisionIndex.insertCollisionCircles(Ya.circles,tt,D.get("text-ignore-placement"),M.bucketInstanceId,Ml,De.ID),S&&this.storeCollisionData(M.bucketInstanceId,Pr,qn,Aa,uo,Ya),pn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pn.crossTileID]=new Li((wi||Ut)&&!(Aa!=null&&Aa.occluded),(Zi||nn)&&!(uo!=null&&uo.occluded),Ni||M.justReloaded),m[pn.crossTileID]=!0};if(Nt){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let qn=pn.length-1;qn>=0;--qn){const Pr=pn[qn];Sn(M.symbolInstances.get(Pr),M.collisionArrays[Pr],Pr)}}else for(let pn=u.symbolInstanceStart;pn<u.symbolInstanceEnd;pn++)Sn(M.symbolInstances.get(pn),M.collisionArrays[pn],pn);M.justReloaded=!1}storeCollisionData(u,m,S,M,D,F){if(S.textBox||S.iconBox){let G,Z;this.collisionBoxArrays.has(u)?G=this.collisionBoxArrays.get(u):(G=new Map,this.collisionBoxArrays.set(u,G)),G.has(m)?Z=G.get(m):(Z={text:null,icon:null},G.set(m,Z)),S.textBox&&(Z.text=M.box),S.iconBox&&(Z.icon=D.box)}if(F){let G=this.collisionCircleArrays[u];G===void 0&&(G=this.collisionCircleArrays[u]=[]);for(let Z=0;Z<F.circles.length;Z+=4)G.push(F.circles[Z+0]-Hn),G.push(F.circles[Z+1]-Hn),G.push(F.circles[Z+2]),G.push(F.collisionDetected?1:0)}}markUsedJustification(u,m,S,M){let D;D=M===s.al.vertical?S.verticalPlacedTextSymbolIndex:{left:S.leftJustifiedTextSymbolIndex,center:S.centerJustifiedTextSymbolIndex,right:S.rightJustifiedTextSymbolIndex}[s.aD(m)];const F=[S.leftJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.rightJustifiedTextSymbolIndex,S.verticalPlacedTextSymbolIndex];for(const G of F)G>=0&&(u.text.placedSymbolArray.get(G).crossTileID=D>=0&&G!==D?0:S.crossTileID)}markUsedOrientation(u,m,S){const M=m===s.al.horizontal||m===s.al.horizontalOnly?m:0,D=m===s.al.vertical?m:0,F=[S.leftJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.rightJustifiedTextSymbolIndex];for(const G of F)u.text.placedSymbolArray.get(G).placedOrientation=M;S.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(S.verticalPlacedTextSymbolIndex).placedOrientation=D)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let S=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const M=m?m.symbolFadeChange(u):1,D=m?m.opacities:{},F=m?m.variableOffsets:{},G=m?m.placedOrientations:{};for(const Z in this.placements){const ne=this.placements[Z],he=D[Z];he?(this.opacities[Z]=new ci(he,M,ne.text,ne.icon),S=S||ne.text!==he.text.placed||ne.icon!==he.icon.placed):(this.opacities[Z]=new ci(null,M,ne.text,ne.icon,ne.skipFade),S=S||ne.text||ne.icon)}for(const Z in D){const ne=D[Z];if(!this.opacities[Z]){const he=new ci(ne,M,!1,!1);he.isHidden()||(this.opacities[Z]=he,S=S||ne.text.placed||ne.icon.placed)}}for(const Z in F)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=F[Z]);for(const Z in G)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=G[Z]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");S?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const S={};for(const M of m){const D=M.getBucket(u);D&&M.latestFeatureIndex&&u.id===D.layerIds[0]&&this.updateBucketOpacities(D,M.tileID,S,M.collisionBoxArray)}}updateBucketOpacities(u,m,S,M){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const D=u.layers[0],F=D.layout,G=new ci(null,0,!1,!1,!0),Z=F.get("text-allow-overlap"),ne=F.get("icon-allow-overlap"),he=D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ye=F.get("text-rotation-alignment")==="map",_e=F.get("text-pitch-alignment")==="map",Ie=F.get("icon-text-fit")!=="none",De=new ci(null,0,Z&&(ne||!u.hasIconData()||F.get("icon-optional")),ne&&(Z||!u.hasTextData()||F.get("text-optional")),!0);!u.collisionArrays&&M&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(M);const Ye=(tt,at,ht)=>{for(let vt=0;vt<at/4;vt++)tt.opacityVertexArray.emplaceBack(ht);tt.hasVisibleVertices=tt.hasVisibleVertices||ht!==pd},Ke=this.collisionBoxArrays.get(u.bucketInstanceId);for(let tt=0;tt<u.symbolInstances.length;tt++){const at=u.symbolInstances.get(tt),{numHorizontalGlyphVertices:ht,numVerticalGlyphVertices:vt,crossTileID:gt}=at;let Tt=this.opacities[gt];S[gt]?Tt=G:Tt||(Tt=De,this.opacities[gt]=Tt),S[gt]=!0;const bt=at.numIconVertices>0,Nt=this.placedOrientations[at.crossTileID],Ut=Nt===s.al.vertical,nn=Nt===s.al.horizontal||Nt===s.al.horizontalOnly;if(ht>0||vt>0){const tn=J0(Tt.text);Ye(u.text,ht,Ut?pd:tn),Ye(u.text,vt,nn?pd:tn);const An=Tt.text.isHidden();[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach(qn=>{qn>=0&&(u.text.placedSymbolArray.get(qn).hidden=An||Ut?1:0)}),at.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(at.verticalPlacedTextSymbolIndex).hidden=An||nn?1:0);const Sn=this.variableOffsets[at.crossTileID];Sn&&this.markUsedJustification(u,Sn.anchor,at,Nt);const pn=this.placedOrientations[at.crossTileID];pn&&(this.markUsedJustification(u,"left",at,pn),this.markUsedOrientation(u,pn,at))}if(bt){const tn=J0(Tt.icon),An=!(Ie&&at.verticalPlacedIconSymbolIndex&&Ut);at.placedIconSymbolIndex>=0&&(Ye(u.icon,at.numIconVertices,An?tn:pd),u.icon.placedSymbolArray.get(at.placedIconSymbolIndex).hidden=Tt.icon.isHidden()),at.verticalPlacedIconSymbolIndex>=0&&(Ye(u.icon,at.numVerticalIconVertices,An?pd:tn),u.icon.placedSymbolArray.get(at.verticalPlacedIconSymbolIndex).hidden=Tt.icon.isHidden())}const an=Ke&&Ke.has(tt)?Ke.get(tt):{text:null,icon:null};if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const tn=u.collisionArrays[tt];if(tn){let An=new s.P(0,0);if(tn.textBox||tn.verticalTextBox){let Sn=!0;if(he){const pn=this.variableOffsets[gt];pn?(An=uu(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale),ye&&An._rotate(_e?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Sn=!1}if(tn.textBox||tn.verticalTextBox){let pn;tn.textBox&&(pn=Ut),tn.verticalTextBox&&(pn=nn),lh(u.textCollisionBox.collisionVertexArray,Tt.text.placed,!Sn||pn,an.text,An.x,An.y)}}if(tn.iconBox||tn.verticalIconBox){const Sn=!!(!nn&&tn.verticalIconBox);let pn;tn.iconBox&&(pn=Sn),tn.verticalIconBox&&(pn=!Sn),lh(u.iconCollisionBox.collisionVertexArray,Tt.icon.placed,pn,an.icon,Ie?An.x:0,Ie?An.y:0)}}}}if(u.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);u.bucketInstanceId in this.collisionCircleArrays&&(u.collisionCircleArray=this.collisionCircleArrays[u.bucketInstanceId],delete this.collisionCircleArrays[u.bucketInstanceId])}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const S=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*S>u}setStale(){this.stale=!0}}function lh(P,u,m,S,M,D){S&&S.length!==0||(S=[0,0,0,0]);const F=S[0]-Hn,G=S[1]-Hn,Z=S[2]-Hn,ne=S[3]-Hn;P.emplaceBack(u?1:0,m?1:0,M||0,D||0,F,G),P.emplaceBack(u?1:0,m?1:0,M||0,D||0,Z,G),P.emplaceBack(u?1:0,m?1:0,M||0,D||0,Z,ne),P.emplaceBack(u?1:0,m?1:0,M||0,D||0,F,ne)}const Sm=Math.pow(2,25),Jf=Math.pow(2,24),Z0=Math.pow(2,17),Rx=Math.pow(2,16),Ox=Math.pow(2,9),Y0=Math.pow(2,8),X0=Math.pow(2,1);function J0(P){if(P.opacity===0&&!P.placed)return 0;if(P.opacity===1&&P.placed)return 4294967295;const u=P.placed?1:0,m=Math.floor(127*P.opacity);return m*Sm+u*Jf+m*Z0+u*Rx+m*Ox+u*Y0+m*X0+u}const pd=0;class Q0{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,S,M,D){const F=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(F,M,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((G,Z)=>G.sortKey-Z.sortKey));this._currentPartIndex<F.length;)if(m.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,S),this._currentPartIndex++,D())return!0;return!1}}class Cm{constructor(u,m,S,M,D,F,G,Z){this.placement=new cu(u,m,F,G,Z),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(u,m,S){const M=p.now(),D=()=>!this._forceFullPlacement&&p.now()-M>2;for(;this._currentPlacementIndex>=0;){const F=m[u[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=G)&&(!F.maxzoom||F.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new Q0(F)),this._inProgressLayer.continuePlacement(S[F.source],this.placement,this._showCollisionBoxes,F,D))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const uh=512/s.Z/2;class ch{constructor(u,m,S){this.tileID=u,this.bucketInstanceId=S,this._symbolsByKey={};const M=new Map;for(let D=0;D<m.length;D++){const F=m.get(D),G=F.key,Z=M.get(G);Z?Z.push(F):M.set(G,[F])}for(const[D,F]of M){const G={positions:F.map(Z=>({x:Math.floor(Z.anchorX*uh),y:Math.floor(Z.anchorY*uh)})),crossTileIDs:F.map(Z=>Z.crossTileID)};if(G.positions.length>128){const Z=new s.aF(G.positions.length,16,Uint16Array);for(const{x:ne,y:he}of G.positions)Z.add(ne,he);Z.finish(),delete G.positions,G.index=Z}this._symbolsByKey[D]=G}}getScaledCoordinates(u,m){const{x:S,y:M,z:D}=this.tileID.canonical,{x:F,y:G,z:Z}=m.canonical,ne=uh/Math.pow(2,Z-D),he=(G*s.Z+u.anchorY)*ne,ye=M*s.Z*uh;return{x:Math.floor((F*s.Z+u.anchorX)*ne-S*s.Z*uh),y:Math.floor(he-ye)}}findMatches(u,m,S){const M=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let D=0;D<u.length;D++){const F=u.get(D);if(F.crossTileID)continue;const G=this._symbolsByKey[F.key];if(!G)continue;const Z=this.getScaledCoordinates(F,m);if(G.index){const ne=G.index.range(Z.x-M,Z.y-M,Z.x+M,Z.y+M).sort();for(const he of ne){const ye=G.crossTileIDs[he];if(!S[ye]){S[ye]=!0,F.crossTileID=ye;break}}}else if(G.positions)for(let ne=0;ne<G.positions.length;ne++){const he=G.positions[ne],ye=G.crossTileIDs[ne];if(Math.abs(he.x-Z.x)<=M&&Math.abs(he.y-Z.y)<=M&&!S[ye]){S[ye]=!0,F.crossTileID=ye;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class zx{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class CE{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const S in this.indexes){const M=this.indexes[S],D={};for(const F in M){const G=M[F];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+m),D[G.tileID.key]=G}this.indexes[S]=D}this.lng=u}addBucket(u,m,S){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let D=0;D<m.symbolInstances.length;D++)m.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const M=this.usedCrossTileIDs[u.overscaledZ];for(const D in this.indexes){const F=this.indexes[D];if(Number(D)>u.overscaledZ)for(const G in F){const Z=F[G];Z.tileID.isChildOf(u)&&Z.findMatches(m.symbolInstances,u,M)}else{const G=F[u.scaledTo(Number(D)).key];G&&G.findMatches(m.symbolInstances,u,M)}}for(let D=0;D<m.symbolInstances.length;D++){const F=m.symbolInstances.get(D);F.crossTileID||(F.crossTileID=S.generate(),M[F.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new ch(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const S of m.getCrossTileIDsLists())for(const M of S)delete this.usedCrossTileIDs[u][M]}removeStaleBuckets(u){let m=!1;for(const S in this.indexes){const M=this.indexes[S];for(const D in M)u[M[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(S,M[D]),delete M[D],m=!0)}return m}}class du{constructor(){this.layerIndexes={},this.crossTileIDs=new zx,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,S){let M=this.layerIndexes[u.id];M===void 0&&(M=this.layerIndexes[u.id]=new CE);let D=!1;const F={};M.handleWrapJump(S);for(const G of m){const Z=G.getBucket(u);Z&&u.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(G.tileID,Z,this.crossTileIDs)&&(D=!0),F[Z.bucketInstanceId]=!0)}return M.removeStaleBuckets(F)&&(D=!0),D}pruneUnusedLayers(u){const m={};u.forEach(S=>{m[S]=!0});for(const S in this.layerIndexes)m[S]||delete this.layerIndexes[S]}}var dh="void main() {fragColor=vec4(1.0);}";const Rr={prelude:Jr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Jr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Jr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Jr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Jr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Jr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Jr(dh,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Jr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Jr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Jr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Jr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Jr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Jr(dh,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Jr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Jr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Jr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Jr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Jr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Jr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Jr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Jr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Jr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Jr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Jr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Jr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Jr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Jr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Jr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Jr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Jr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Jr(P,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=u.match(/in ([\w]+) ([\w]+)/g),M=P.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=D?D.concat(M):M,G={};return{fragmentSource:P=P.replace(m,(Z,ne,he,ye,_e)=>(G[_e]=!0,ne==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
in ${he} ${ye} ${_e};
#else
uniform ${he} ${ye} u_${_e};
#endif
`:`
#ifdef HAS_UNIFORM_u_${_e}
    ${he} ${ye} ${_e} = u_${_e};
#endif
`)),vertexSource:u=u.replace(m,(Z,ne,he,ye,_e)=>{const Ie=ye==="float"?"vec2":"vec4",De=_e.match(/color/)?"color":Ie;return G[_e]?ne==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
uniform lowp float u_${_e}_t;
in ${he} ${Ie} a_${_e};
out ${he} ${ye} ${_e};
#else
uniform ${he} ${ye} u_${_e};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${_e}
    ${_e} = a_${_e};
#else
    ${he} ${ye} ${_e} = u_${_e};
#endif
`:`
#ifndef HAS_UNIFORM_u_${_e}
    ${_e} = unpack_mix_${De}(a_${_e}, u_${_e}_t);
#else
    ${he} ${ye} ${_e} = u_${_e};
#endif
`:ne==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
uniform lowp float u_${_e}_t;
in ${he} ${Ie} a_${_e};
#else
uniform ${he} ${ye} u_${_e};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${_e}
    ${he} ${ye} ${_e} = a_${_e};
#else
    ${he} ${ye} ${_e} = u_${_e};
#endif
`:`
#ifndef HAS_UNIFORM_u_${_e}
    ${he} ${ye} ${_e} = unpack_mix_${De}(a_${_e}, u_${_e}_t);
#else
    ${he} ${ye} ${_e} = u_${_e};
#endif
`}),staticAttributes:S,staticUniforms:F}}class hh{constructor(u,m,S){this.vertexBuffer=u,this.indexBuffer=m,this.segments=S}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _l=s.aG([{name:"a_pos",type:"Int16",components:2}]);const Do="#define PROJECTION_MERCATOR",so="mercator";class sa{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return so}get shaderDefine(){return Do}get shaderPreludeCode(){return Rr.projectionMercator}get vertexShaderPreludeCode(){return Rr.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(u){}getMeshFromTileID(u,m,S,M,D){if(this._cachedMesh)return this._cachedMesh;const F=new s.aI;F.emplaceBack(0,0),F.emplaceBack(s.Z,0),F.emplaceBack(0,s.Z),F.emplaceBack(s.Z,s.Z);const G=u.createVertexBuffer(F,_l.members),Z=s.aJ.simpleSegment(0,0,4,2),ne=new s.aK;ne.emplaceBack(1,0,2),ne.emplaceBack(1,2,3);const he=u.createIndexBuffer(ne);return this._cachedMesh=new hh(G,he,Z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(u){}}class Qf{constructor(u=0,m=0,S=0,M=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(S)||S<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=S,this.right=M}interpolate(u,m,S){return m.top!=null&&u.top!=null&&(this.top=s.B.number(u.top,m.top,S)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.B.number(u.bottom,m.bottom,S)),m.left!=null&&u.left!=null&&(this.left=s.B.number(u.left,m.left,S)),m.right!=null&&u.right!=null&&(this.right=s.B.number(u.right,m.right,S)),this}getCenter(u,m){const S=s.ae((this.left+u-this.right)/2,0,u),M=s.ae((this.top+m-this.bottom)/2,0,m);return new s.P(S,M)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Qf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Za(P,u){if(!P.renderWorldCopies||P.lngRange)return;const m=u.lng-P.center.lng;u.lng+=m>180?-360:m<-180?360:0}function ts(P){return Math.max(0,Math.floor(P))}class _o{constructor(u,m,S,M,D,F){this._callbacks=u,this._tileSize=512,this._renderWorldCopies=F===void 0||!!F,this._minZoom=m||0,this._maxZoom=S||22,this._minPitch=M??0,this._maxPitch=D??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ts(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Qf,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(u,m,S){this._latRange=u.latRange,this._lngRange=u.lngRange,this._width=u.width,this._height=u.height,this._center=u.center,this._elevation=u.elevation,this._minElevationForCurrentTile=u.minElevationForCurrentTile,this._zoom=u.zoom,this._tileZoom=ts(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=u.bearingInRadians,this._fovInRadians=u.fovInRadians,this._pitchInRadians=u.pitchInRadians,this._rollInRadians=u.rollInRadians,this._unmodified=u.unmodified,this._edgeInsets=new Qf(u.padding.top,u.padding.bottom,u.padding.left,u.padding.right),this._minZoom=u.minZoom,this._maxZoom=u.maxZoom,this._minPitch=u.minPitch,this._maxPitch=u.maxPitch,this._renderWorldCopies=u.renderWorldCopies,this._cameraToCenterDistance=u.cameraToCenterDistance,this._nearZ=u.nearZ,this._farZ=u.farZ,this._autoCalculateNearFarZ=!S&&u.autoCalculateNearFarZ,m&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(u){this._minElevationForCurrentTile=u}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(u){this._minZoom!==u&&(this._minZoom=u,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(u){this._minPitch!==u&&(this._minPitch=u,this.setPitch(Math.max(this.pitch,u)))}get maxPitch(){return this._maxPitch}setMaxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.setPitch(Math.min(this.pitch,u)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(u){const m=s.aL(u,-180,180)*Math.PI/180;var S,M,D,F,G,Z,ne,he,ye;this._bearingInRadians!==m&&(this._unmodified=!1,this._bearingInRadians=m,this._calcMatrices(),this._rotationMatrix=c(),S=this._rotationMatrix,D=-this._bearingInRadians,F=(M=this._rotationMatrix)[0],G=M[1],Z=M[2],ne=M[3],he=Math.sin(D),ye=Math.cos(D),S[0]=F*ye+Z*he,S[1]=G*ye+ne*he,S[2]=F*-he+Z*ye,S[3]=G*-he+ne*ye)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(u){const m=s.ae(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==m&&(this._unmodified=!1,this._pitchInRadians=m,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(u){const m=u/180*Math.PI;this._rollInRadians!==m&&(this._unmodified=!1,this._rollInRadians=m,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(u){u=s.ae(u,.1,150),this.fov!==u&&(this._unmodified=!1,this._fovInRadians=s.ab(u),this._calcMatrices())}get zoom(){return this._zoom}setZoom(u){const m=this.getConstrained(this._center,u).zoom;this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this._tileZoom=Math.max(0,Math.floor(m)),this._scale=s.ac(m),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(u,m){this._autoCalculateNearFarZ=!1,this._nearZ=u,this._farZ=m,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,S){this._unmodified=!1,this._edgeInsets.interpolate(u,m,S),this._constrain(),this._calcMatrices()}resize(u,m,S=!0){this._width=u,this._height=m,S&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new ze([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(u){u?(this._lngRange=[u.getWest(),u.getEast()],this._latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(u,m){return this._callbacks.getConstrained(u,m)}getCameraQueryGeometry(u,m){if(m.length===1)return[m[0],u];{let S=u.x,M=u.y,D=u.x,F=u.y;for(const G of m)S=Math.min(S,G.x),M=Math.min(M,G.y),D=Math.max(D,G.x),F=Math.max(F,G.y);return[new s.P(S,M),new s.P(D,M),new s.P(D,F),new s.P(S,F),new s.P(S,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:m,zoom:S}=this.getConstrained(this.center,this.zoom);this.setCenter(m),this.setZoom(S),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let u=s.ad(new Float64Array(16));s.M(u,u,[this._width/2,-this._height/2,1]),s.L(u,u,[1,-1,0]),this._clipSpaceToPixelsMatrix=u,u=s.ad(new Float64Array(16)),s.M(u,u,[1,-1,1]),s.L(u,u,[-1,-1,0]),s.M(u,u,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=u,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(u,m,S,M){const D=S!==void 0?S:this.bearing,F=M=M!==void 0?M:this.pitch,G=s.$.fromLngLat(u,m),Z=-Math.cos(s.ab(F)),ne=Math.sin(s.ab(F)),he=ne*Math.sin(s.ab(D)),ye=-ne*Math.cos(s.ab(D));let _e=this.elevation;const Ie=m-_e;let De;Z*Ie>=0||Math.abs(Z)<.1?(De=1e4,_e=m+De*Z):De=-Ie/Z;let Ye,Ke,tt=s.aN(1,G.y),at=0;do{if(at+=1,at>10)break;Ke=De/tt,Ye=new s.$(G.x+he*Ke,G.y+ye*Ke),tt=1/Ye.meterInMercatorCoordinateUnits()}while(Math.abs(De-Ke*tt)>1e-12);return{center:Ye.toLngLat(),elevation:_e,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/Ke/this.tileSize)}}recalculateZoomAndCenter(u){if(this.elevation-u==0)return;const m=s.ag(1,this.center.lat)*this.worldSize,S=this.cameraToCenterDistance/m,M=s.$.fromLngLat(this.center,this.elevation),D=ke(this.center,this.elevation,this.pitch,this.bearing,S);this._elevation=u;const F=this.calculateCenterFromCameraLngLatAlt(D.toLngLat(),s.aN(D.z,M.y),this.bearing,this.pitch);this._elevation=F.elevation,this._center=F.center,this.setZoom(F.zoom)}getCameraPoint(){const u=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(u*Math.sin(this.rollInRadians),u*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const u=s.ag(1,this.center.lat)*this.worldSize;return ke(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/u).toLngLat()}getMercatorTileCoordinates(u){if(!u)return[0,0,1,1];const m=u.canonical.z>=0?1<<u.canonical.z:Math.pow(2,u.canonical.z);return[u.canonical.x/m,u.canonical.y/m,1/m/s.Z,1/m/s.Z]}}class dc{constructor(u,m){this.min=u,this.max=m,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(u){const m=[u%2==0,u<2],S=s.aQ(this.min),M=s.aQ(this.max);for(let D=0;D<m.length;D++)S[D]=m[D]?this.min[D]:this.center[D],M[D]=m[D]?this.center[D]:this.max[D];return M[2]=this.max[2],new dc(S,M)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersectsFrustum(u){let m=!0;for(let S=0;S<u.planes.length;S++){const M=this.intersectsPlane(u.planes[S]);if(M===0)return 0;M===1&&(m=!1)}return m?2:u.aabb.min[0]>this.max[0]||u.aabb.min[1]>this.max[1]||u.aabb.min[2]>this.max[2]||u.aabb.max[0]<this.min[0]||u.aabb.max[1]<this.min[1]||u.aabb.max[2]<this.min[2]?0:1}intersectsPlane(u){let m=u[3],S=u[3];for(let M=0;M<3;M++)u[M]>0?(m+=u[M]*this.min[M],S+=u[M]*this.max[M]):(S+=u[M]*this.min[M],m+=u[M]*this.max[M]);return m>=0?2:S<0?0:1}}class ep{distanceToTile2d(u,m,S,M){const D=M.distanceX([u,m]),F=M.distanceY([u,m]);return Math.hypot(D,F)}getWrap(u,m,S){return S}getTileAABB(u,m,S,M){var D,F;let G=S,Z=S;if(M.terrain){const he=new s.Y(u.z,m,u.z,u.x,u.y),ye=M.terrain.getMinMaxElevation(he);G=(D=ye.minElevation)!==null&&D!==void 0?D:S,Z=(F=ye.maxElevation)!==null&&F!==void 0?F:S}const ne=1<<u.z;return new dc([m+u.x/ne,u.y/ne,G],[m+(u.x+1)/ne,(u.y+1)/ne,Z])}allowVariableZoom(u,m){const S=u.fov*(Math.abs(Math.cos(u.rollInRadians))*u.height+Math.abs(Math.sin(u.rollInRadians))*u.width)/u.height,M=s.ae(78.5-S/2,0,60);return!!m.terrain||u.pitch>M}allowWorldCopies(){return!0}recalculateCache(){}}class la{constructor(u,m,S){this.points=u,this.planes=m,this.aabb=S}static fromInvProjectionMatrix(u,m=1,S=0){const M=Math.pow(2,S),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ne=>{const he=1/(ne=s.at([],ne,u))[3]/m*M;return s.aR(ne,ne,[he,he,1/ne[3],he])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ne=>{const he=s.aS([],D[ne[0]],D[ne[1]]),ye=s.aS([],D[ne[2]],D[ne[1]]),_e=s.aT([],s.aU([],he,ye)),Ie=-s.aV(_e,D[ne[1]]);return _e.concat(Ie)}),G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Z=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ne of D)for(let he=0;he<3;he++)G[he]=Math.min(G[he],ne[he]),Z[he]=Math.max(Z[he],ne[he]);return new la(D,F,new dc(G,Z))}}class bl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,S){return this._helper.interpolatePadding(u,m,S)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,S=!0){this._helper.resize(u,m,S)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u,m){}constructor(u,m,S,M,D){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(F,G)=>this.getConstrained(F,G)},u,m,S,M,D),this._coveringTilesDetailsProvider=new ep}clone(){const u=new bl;return u.apply(this),u}apply(u,m,S){this._helper.apply(u,m,S)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(u){const m=[new s.aW(0,u)];if(this._helper._renderWorldCopies){const S=this.screenPointToMercatorCoordinate(new s.P(0,0)),M=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),D=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),F=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),G=Math.floor(Math.min(S.x,M.x,D.x,F.x)),Z=Math.floor(Math.max(S.x,M.x,D.x,F.x)),ne=1;for(let he=G-ne;he<=Z+ne;he++)he!==0&&m.push(new s.aW(he,u))}return m}getCameraFrustum(){return la.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){const m=this.screenPointToLocation(this.centerPoint,u),S=u?u.getElevationForLngLatZoom(m,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(S)}setLocationAtPoint(u,m){const S=s.ag(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(m,S),D=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,S),F=s.$.fromLngLat(u),G=new s.$(F.x-(M.x-D.x),F.y-(M.y-D.y));this.setCenter(G==null?void 0:G.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(u,m){return m?this.coordinatePoint(s.$.fromLngLat(u),m.getElevationForLngLatZoom(u,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(u))}screenPointToLocation(u,m){var S;return(S=this.screenPointToMercatorCoordinate(u,m))===null||S===void 0?void 0:S.toLngLat()}screenPointToMercatorCoordinate(u,m){if(m){const S=m.pointCoordinate(u);if(S!=null)return S}return this.screenPointToMercatorCoordinateAtZ(u)}screenPointToMercatorCoordinateAtZ(u,m){const S=m||0,M=[u.x,u.y,0,1],D=[u.x,u.y,1,1];s.at(M,M,this._pixelMatrixInverse),s.at(D,D,this._pixelMatrixInverse);const F=M[3],G=D[3],Z=M[1]/F,ne=D[1]/G,he=M[2]/F,ye=D[2]/G,_e=he===ye?0:(S-he)/(ye-he);return new s.$(s.B.number(M[0]/F,D[0]/G,_e)/this.worldSize,s.B.number(Z,ne,_e)/this.worldSize,S)}coordinatePoint(u,m=0,S=this._pixelMatrix){const M=[u.x*this.worldSize,u.y*this.worldSize,m,1];return s.at(M,M,S),new s.P(M[0]/M[3],M[1]/M[3])}getBounds(){const u=Math.max(0,this._helper._height/2-Fe(this));return new ze().extend(this.screenPointToLocation(new s.P(0,u))).extend(this.screenPointToLocation(new s.P(this._helper._width,u))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(u,m){return m?m.pointCoordinate(u)!=null:u.y>this.height/2-Fe(this)}calculatePosMatrix(u,m=!1,S){var M;const D=(M=u.key)!==null&&M!==void 0?M:s.aX(u.wrap,u.canonical.z,u.canonical.z,u.canonical.x,u.canonical.y),F=m?this._alignedPosMatrixCache:this._posMatrixCache;if(F.has(D)){const ne=F.get(D);return S?ne.f32:ne.f64}const G=ve(u,this.worldSize);s.N(G,m?this._alignedProjMatrix:this._viewProjMatrix,G);const Z={f64:G,f32:new Float32Array(G)};return F.set(D,Z),S?Z.f32:Z.f64}calculateFogMatrix(u){const m=u.key,S=this._fogMatrixCacheF32;if(S.has(m))return S.get(m);const M=ve(u,this.worldSize);return s.N(M,this._fogMatrix,M),S.set(m,new Float32Array(M)),S.get(m)}getConstrained(u,m){m=s.ae(+m,this.minZoom,this.maxZoom);const S={center:new s.Q(u.lng,u.lat),zoom:m};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const D=this.tileSize*s.ac(S.zoom);let F=0,G=D,Z=0,ne=D,he=0,ye=0;const{x:_e,y:Ie}=this.size;if(this._helper._latRange){const ht=this._helper._latRange;F=s.S(ht[1])*D,G=s.S(ht[0])*D,G-F<Ie&&(he=Ie/(G-F))}M&&(Z=s.aL(s.U(M[0])*D,0,D),ne=s.aL(s.U(M[1])*D,0,D),ne<Z&&(ne+=D),ne-Z<_e&&(ye=_e/(ne-Z)));const{x:De,y:Ye}=Zt(D,u);let Ke,tt;const at=Math.max(ye||0,he||0);if(at){const ht=new s.P(ye?(ne+Z)/2:De,he?(G+F)/2:Ye);return S.center=Ze(D,ht).wrap(),S.zoom+=s.ah(at),S}if(this._helper._latRange){const ht=Ie/2;Ye-ht<F&&(tt=F+ht),Ye+ht>G&&(tt=G-ht)}if(M){const ht=(Z+ne)/2;let vt=De;this._helper._renderWorldCopies&&(vt=s.aL(De,ht-D/2,ht+D/2));const gt=_e/2;vt-gt<Z&&(Ke=Z+gt),vt+gt>ne&&(Ke=ne-gt)}if(Ke!==void 0||tt!==void 0){const ht=new s.P(Ke??De,tt??Ye);S.center=Ze(D,ht).wrap()}return S}calculateCenterFromCameraLngLatAlt(u,m,S,M){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,S,M)}_calculateNearFarZIfNeeded(u,m,S){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),D=u-M*this._helper._pixelPerMeter/Math.cos(m),F=M<0?D:u,G=Math.PI/2+this.pitchInRadians,Z=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+S.y/this.height),ne=Math.sin(Z)*F/Math.sin(s.ae(Math.PI-G-Z,.01,Math.PI-.01)),he=Fe(this),ye=Math.atan(he/this._helper.cameraToCenterDistance),_e=s.ab(.75),Ie=ye>_e?2*ye*(.5+S.y/(2*he)):_e,De=Math.sin(Ie)*F/Math.sin(s.ae(Math.PI-G-Ie,.01,Math.PI-.01)),Ye=Math.min(ne,De);this._helper._farZ=1.01*(Math.cos(Math.PI/2-m)*Ye+F),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const u=this.centerOffset,m=Zt(this.worldSize,this.center),S=m.x,M=m.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const D=s.ab(Math.min(this.pitch,xt)),F=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(D));let G;this._calculateNearFarZIfNeeded(F,D,u),G=new Float64Array(16),s.aY(G,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,G),G[8]=2*-u.x/this._helper._width,G[9]=2*u.y/this._helper._height,this._projectionMatrix=s.aZ(G),s.M(G,G,[1,-1,1]),s.L(G,G,[0,0,-this._helper.cameraToCenterDistance]),s.a_(G,G,-this.rollInRadians),s.a$(G,G,this.pitchInRadians),s.a_(G,G,-this.bearingInRadians),s.L(G,G,[-S,-M,0]),this._mercatorMatrix=s.M([],G,[this.worldSize,this.worldSize,this.worldSize]),s.M(G,G,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,G),s.L(G,G,[0,0,-this.elevation]),this._viewProjMatrix=G,this._invViewProjMatrix=s.an([],G);const Z=[0,0,-1,1];s.at(Z,Z,this._invViewProjMatrix),this._cameraPosition=[Z[0]/Z[3],Z[1]/Z[3],Z[2]/Z[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,F,this._helper._farZ),this._fogMatrix[8]=2*-u.x/this.width,this._fogMatrix[9]=2*u.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-S,-M,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,G);const ne=this._helper._width%2/2,he=this._helper._height%2/2,ye=Math.cos(this.bearingInRadians),_e=Math.sin(-this.bearingInRadians),Ie=S-Math.round(S)+ye*ne+_e*he,De=M-Math.round(M)+ye*he+_e*ne,Ye=new Float64Array(G);if(s.L(Ye,Ye,[Ie>.5?Ie-1:Ie,De>.5?De-1:De,0]),this._alignedProjMatrix=Ye,G=s.an(new Float64Array(16),this._pixelMatrix),!G)throw new Error("failed to invert matrix");this._pixelMatrixInverse=G,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const u=this.screenPointToMercatorCoordinate(new s.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return s.at(m,m,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const u=s.ag(1,this.center.lat)*this.worldSize;return ke(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/u).toLngLat()}lngLatToCameraDepth(u,m){const S=s.$.fromLngLat(u),M=[S.x*this.worldSize,S.y*this.worldSize,m,1];return s.at(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(u){const{overscaledTileID:m,aligned:S,applyTerrainMatrix:M}=u,D=this._helper.getMercatorTileCoordinates(m),F=m?this.calculatePosMatrix(m,S,!0):null;let G;return G=m&&m.terrainRttPosMatrix32f&&M?m.terrainRttPosMatrix32f:F||s.b0(),{mainMatrix:G,tileMercatorCoords:D,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:G}}isLocationOccluded(u){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(u,m,S){return 1}transformLightDirection(u){return s.aQ(u)}getRayDirectionFromPixel(u){throw new Error("Not implemented.")}projectTileCoordinates(u,m,S,M){const D=this.calculatePosMatrix(S);let F;M?(F=[u,m,M(u,m),1],s.at(F,F,D)):(F=[u,m,0,1],dn(F,F,D));const G=F[3];return{point:new s.P(F[0]/G,F[1]/G),signedDistanceFromCamera:G,isOccluded:!1}}populateCache(u){for(const m of u)this.calculatePosMatrix(m)}getMatrixForModel(u,m){const S=s.$.fromLngLat(u,m),M=S.meterInMercatorCoordinateUnits(),D=s.b1();return s.L(D,D,[S.x,S.y,S.z]),s.a_(D,D,Math.PI),s.a$(D,D,Math.PI/2),s.M(D,D,[-M,M,M]),D}getProjectionDataForCustomLayer(u=!0){const m=new s.Y(0,0,0,0,0),S=this.getProjectionData({overscaledTileID:m,applyGlobeMatrix:u}),M=ve(m,this.worldSize);s.N(M,this._viewProjMatrix,M),S.tileMercatorCoords=[0,0,1,1];const D=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],F=s.b2();return s.M(F,M,D),S.fallbackMatrix=F,S.mainMatrix=F,S}getFastPathSimpleProjectionMatrix(u){return this.calculatePosMatrix(u)}}function hc(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function tp(P){if(P.useSlerp)if(P.k<1){const u=s.b3(P.startEulerAngles.roll,P.startEulerAngles.pitch,P.startEulerAngles.bearing),m=s.b3(P.endEulerAngles.roll,P.endEulerAngles.pitch,P.endEulerAngles.bearing),S=new Float64Array(4);s.b4(S,u,m,P.k);const M=s.b5(S);P.tr.setRoll(M.roll),P.tr.setPitch(M.pitch),P.tr.setBearing(M.bearing)}else P.tr.setRoll(P.endEulerAngles.roll),P.tr.setPitch(P.endEulerAngles.pitch),P.tr.setBearing(P.endEulerAngles.bearing);else P.tr.setRoll(s.B.number(P.startEulerAngles.roll,P.endEulerAngles.roll,P.k)),P.tr.setPitch(s.B.number(P.startEulerAngles.pitch,P.endEulerAngles.pitch,P.k)),P.tr.setBearing(s.B.number(P.startEulerAngles.bearing,P.endEulerAngles.bearing,P.k))}function ks(P,u,m,S,M){const D=M.padding,F=Zt(M.worldSize,m.getNorthWest()),G=Zt(M.worldSize,m.getNorthEast()),Z=Zt(M.worldSize,m.getSouthEast()),ne=Zt(M.worldSize,m.getSouthWest()),he=s.ab(-S),ye=F.rotate(he),_e=G.rotate(he),Ie=Z.rotate(he),De=ne.rotate(he),Ye=new s.P(Math.max(ye.x,_e.x,De.x,Ie.x),Math.max(ye.y,_e.y,De.y,Ie.y)),Ke=new s.P(Math.min(ye.x,_e.x,De.x,Ie.x),Math.min(ye.y,_e.y,De.y,Ie.y)),tt=Ye.sub(Ke),at=(M.width-(D.left+D.right+u.left+u.right))/tt.x,ht=(M.height-(D.top+D.bottom+u.top+u.bottom))/tt.y;if(ht<0||at<0)return void hc();const vt=Math.min(s.ah(M.scale*Math.min(at,ht)),P.maxZoom),gt=s.P.convert(P.offset),Tt=new s.P((u.left-u.right)/2,(u.top-u.bottom)/2).rotate(s.ab(S)),bt=gt.add(Tt).mult(M.scale/s.ac(vt));return{center:Ze(M.worldSize,F.add(Z).div(2).sub(bt)),zoom:vt,bearing:S}}class np{get useGlobeControls(){return!1}handlePanInertia(u,m){return{easingOffset:u,easingCenter:m.center}}handleMapControlsRollPitchBearingZoom(u,m){u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta),u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta)}handleMapControlsPan(u,m,S){u.around.distSqr(m.centerPoint)<.01||m.setLocationAtPoint(S,u.around)}cameraForBoxAndBearing(u,m,S,M,D){return ks(u,m,S,M,D)}handleJumpToCenterZoom(u,m){u.zoom!==(m.zoom!==void 0?+m.zoom:u.zoom)&&u.setZoom(+m.zoom),m.center!==void 0&&u.setCenter(s.Q.convert(m.center))}handleEaseTo(u,m){const S=u.zoom,M=u.padding,D={roll:u.roll,pitch:u.pitch,bearing:u.bearing},F={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},G=m.zoom!==void 0,Z=!u.isPaddingEqual(m.padding);let ne=!1;const he=G?+m.zoom:u.zoom;let ye=u.centerPoint.add(m.offsetAsPoint);const _e=u.screenPointToLocation(ye),{center:Ie,zoom:De}=u.getConstrained(s.Q.convert(m.center||_e),he??S);Za(u,Ie);const Ye=Zt(u.worldSize,_e),Ke=Zt(u.worldSize,Ie).sub(Ye),tt=s.ac(De-S);return ne=De!==S,{easeFunc:at=>{if(ne&&u.setZoom(s.B.number(S,De,at)),s.b6(D,F)||tp({startEulerAngles:D,endEulerAngles:F,tr:u,k:at,useSlerp:D.roll!=F.roll}),Z&&(u.interpolatePadding(M,m.padding,at),ye=u.centerPoint.add(m.offsetAsPoint)),m.around)u.setLocationAtPoint(m.around,m.aroundPoint);else{const ht=s.ac(u.zoom-S),vt=De>S?Math.min(2,tt):Math.max(.5,tt),gt=Math.pow(vt,1-at),Tt=Ze(u.worldSize,Ye.add(Ke.mult(at*gt)).mult(ht));u.setLocationAtPoint(u.renderWorldCopies?Tt.wrap():Tt,ye)}},isZooming:ne,elevationCenter:Ie}}handleFlyTo(u,m){const S=m.zoom!==void 0,M=u.zoom,D=u.getConstrained(s.Q.convert(m.center||m.locationAtOffset),S?+m.zoom:M),F=D.center,G=D.zoom;Za(u,F);const Z=Zt(u.worldSize,m.locationAtOffset),ne=Zt(u.worldSize,F).sub(Z),he=ne.mag(),ye=s.ac(G-M);let _e;if(m.minZoom!==void 0){const Ie=Math.min(+m.minZoom,M,G),De=u.getConstrained(F,Ie).zoom;_e=s.ac(De-M)}return{easeFunc:(Ie,De,Ye,Ke)=>{u.setZoom(Ie===1?G:M+s.ah(De));const tt=Ie===1?F:Ze(u.worldSize,Z.add(ne.mult(Ye)).mult(De));u.setLocationAtPoint(u.renderWorldCopies?tt.wrap():tt,Ke)},scaleOfZoom:ye,targetCenter:F,scaleOfMinZoom:_e,pixelPathLength:he}}}class vi{constructor(u,m,S){this.blendFunction=u,this.blendColor=m,this.mask=S}}vi.Replace=[1,0],vi.disabled=new vi(vi.Replace,s.b7.transparent,[!1,!1,!1,!1]),vi.unblended=new vi(vi.Replace,s.b7.transparent,[!0,!0,!0,!0]),vi.alphaBlended=new vi([1,771],s.b7.transparent,[!0,!0,!0,!0]);const e_=2305;class ni{constructor(u,m,S){this.enable=u,this.mode=m,this.frontFace=S}}ni.disabled=new ni(!1,1029,e_),ni.backCCW=new ni(!0,1029,e_),ni.frontCCW=new ni(!0,1028,e_);class kr{constructor(u,m,S){this.func=u,this.mask=m,this.range=S}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);const fh=7680;class Qr{constructor(u,m,S,M,D,F){this.test=u,this.ref=m,this.mask=S,this.fail=M,this.depthFail=D,this.pass=F}}Qr.disabled=new Qr({func:519,mask:0},0,0,fh,fh,fh);const rp=new WeakMap;function Qs(P){var u;if(rp.has(P))return rp.get(P);{const m=(u=P.getParameter(P.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return rp.set(P,m),m}}class ph{get awaitingQuery(){return!!this._readbackQueue}constructor(u){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=u;const m=u.context,S=m.gl;this._texFormat=S.RGBA,this._texType=S.UNSIGNED_BYTE;const M=new s.aI;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const D=new s.aK;D.emplaceBack(0,1,2),this._fullscreenTriangle=new hh(m.createVertexBuffer(M,_l.members),m.createIndexBuffer(D),s.aJ.simpleSegment(0,0,M.length,D.length)),this._resultBuffer=new Uint8Array(4),m.activeTexture.set(S.TEXTURE1);const F=S.createTexture();S.bindTexture(S.TEXTURE_2D,F),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.NEAREST),S.texImage2D(S.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=m.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(F),Qs(S)&&(this._pbo=S.createBuffer(),S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.bufferData(S.PIXEL_PACK_BUFFER,4,S.STREAM_READ),S.bindBuffer(S.PIXEL_PACK_BUFFER,null))}destroy(){const u=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),u.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(u,m){const S=this._updateCount;return this._readbackQueue?S>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():S>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(u,m),this._updateCount++,this._measuredError}_bindFramebuffer(){const u=this._cachedRenderContext.context,m=u.gl;u.activeTexture.set(m.TEXTURE1),m.bindTexture(m.TEXTURE_2D,this._fbo.colorAttachment.get()),u.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(u,m){const S=this._cachedRenderContext.context,M=S.gl;if(this._bindFramebuffer(),S.viewport.set([0,0,this._texWidth,this._texHeight]),S.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(S,M.TRIANGLES,kr.disabled,Qr.disabled,vi.unblended,ni.disabled,((D,F)=>({u_input:D,u_output_expected:F}))(u,m),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Qs(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const D=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:D}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const u=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Qs(u)){const m=u.clientWaitSync(this._readbackQueue.sync,0,0);if(m===u.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(m===u.TIMEOUT_EXPIRED)return;u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),u.bindBuffer(u.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),u.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ph._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(u){let m=0;return m+=u[0]/256,m+=u[1]/65536,m+=u[2]/16777216,u[3]<127&&(m=-m),m/128}}const Tm=s.Z/128;function Mm(P,u){const m=P.granularity!==void 0?Math.max(P.granularity,1):1,S=m+(P.generateBorders?2:0),M=m+(P.extendToNorthPole||P.generateBorders?1:0)+(P.extendToSouthPole||P.generateBorders?1:0),D=S+1,F=M+1,G=P.generateBorders?-1:0,Z=P.generateBorders||P.extendToNorthPole?-1:0,ne=m+(P.generateBorders?1:0),he=m+(P.generateBorders||P.extendToSouthPole?1:0),ye=D*F,_e=S*M*6,Ie=D*F>65536;if(Ie&&u==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const De=Ie||u==="32bit",Ye=new Int16Array(2*ye);let Ke=0;for(let ht=Z;ht<=he;ht++)for(let vt=G;vt<=ne;vt++){let gt=vt/m*s.Z;vt===-1&&(gt=-64),vt===m+1&&(gt=s.Z+Tm);let Tt=ht/m*s.Z;ht===-1&&(Tt=P.extendToNorthPole?s.b9:-64),ht===m+1&&(Tt=P.extendToSouthPole?s.ba:s.Z+Tm),Ye[Ke++]=gt,Ye[Ke++]=Tt}const tt=De?new Uint32Array(_e):new Uint16Array(_e);let at=0;for(let ht=0;ht<M;ht++)for(let vt=0;vt<S;vt++){const gt=vt+1+ht*D,Tt=vt+(ht+1)*D,bt=vt+1+(ht+1)*D;tt[at++]=vt+ht*D,tt[at++]=Tt,tt[at++]=gt,tt[at++]=gt,tt[at++]=Tt,tt[at++]=bt}return{vertices:Ye.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:De}}const vh=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class ip{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Rr.projectionGlobe}get vertexShaderPreludeCode(){return Rr.projectionMercator.vertexSource}get subdivisionGranularity(){return vh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(u){this._errorMeasurement||(this._errorMeasurement=new ph(u));const m=s.S(this._errorQueryLatitudeDegrees),S=2*Math.atan(Math.exp(Math.PI-m*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(m,S),D=p.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=D);const F=Math.min(Math.max((D-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(F))}_getMeshKey(u){return`${u.granularity.toString(36)}_${u.generateBorders?"b":""}${u.extendToNorthPole?"n":""}${u.extendToSouthPole?"s":""}`}getMeshFromTileID(u,m,S,M,D){const F=(D==="stencil"?vh.stencil:vh.tile).getGranularityForZoomLevel(m.z);return this._getMesh(u,{granularity:F,generateBorders:S,extendToNorthPole:m.y===0&&M,extendToSouthPole:m.y===(1<<m.z)-1&&M})}_getMesh(u,m){const S=this._getMeshKey(m);if(S in this._tileMeshCache)return this._tileMeshCache[S];const M=function(D,F){const G=Mm(F,"16bit"),Z=s.aI.deserialize({arrayBuffer:G.vertices,length:G.vertices.byteLength/2/2}),ne=s.aK.deserialize({arrayBuffer:G.indices,length:G.indices.byteLength/2/3});return new hh(D.createVertexBuffer(Z,_l.members),D.createIndexBuffer(ne),s.aJ.simpleSegment(0,0,Z.length,ne.length))}(u,m);return this._tileMeshCache[S]=M,M}recalculate(u){}hasTransition(){const u=p.now();let m=!1;return m=m||(u-this._errorMeasurementLastChangeTime)/1e3<.7,m=m||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,m}setErrorQueryLatitudeDegrees(u){this._errorQueryLatitudeDegrees=u}}const ap=new s.r({type:new s.D(s.v.projection.type)});class Bx extends s.E{constructor(u){super(),this._transitionable=new s.T(ap),this.setProjection(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new sa,this._verticalPerspectiveProjection=new ip}get transitionState(){const u=this.properties.get("type");if(typeof u=="string"&&u==="mercator")return 0;if(typeof u=="string"&&u==="vertical-perspective")return 1;if(u instanceof s.be){if(u.from==="vertical-perspective"&&u.to==="mercator")return 1-u.transition;if(u.from==="mercator"&&u.to==="vertical-perspective")return u.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(u){this._mercatorProjection.updateGPUdependent(u),this._verticalPerspectiveProjection.updateGPUdependent(u)}getMeshFromTileID(u,m,S,M,D){return this.currentProjection.getMeshFromTileID(u,m,S,M,D)}setProjection(u){this._transitionable.setValue("type",(u==null?void 0:u.type)||"mercator")}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}setErrorQueryLatitudeDegrees(u){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(u),this._mercatorProjection.setErrorQueryLatitudeDegrees(u)}}function km(P){const u=Em(P.worldSize,P.center.lat);return 2*Math.PI*u}function mh(P,u,m,S,M){const D=1/(1<<M),F=u/s.Z*D+S*D,G=s.bg((P/s.Z*D+m*D)*Math.PI*2+Math.PI,2*Math.PI),Z=2*Math.atan(Math.exp(Math.PI-F*Math.PI*2))-.5*Math.PI,ne=Math.cos(Z),he=new Float64Array(3);return he[0]=Math.sin(G)*ne,he[1]=Math.sin(Z),he[2]=Math.cos(G)*ne,he}function lo(P){return function(u,m){const S=Math.cos(m),M=new Float64Array(3);return M[0]=Math.sin(u)*S,M[1]=Math.sin(m),M[2]=Math.cos(u)*S,M}(P.lng*Math.PI/180,P.lat*Math.PI/180)}function Em(P,u){return P/(2*Math.PI)/Math.cos(u*Math.PI/180)}function Ro(P){const u=Math.asin(P[1])/Math.PI*180,m=Math.sqrt(P[0]*P[0]+P[2]*P[2]);if(m>1e-6){const S=P[0]/m,M=Math.acos(P[2]/m),D=(S>0?M:-M)/Math.PI*180;return new s.Q(s.aL(D,-180,180),u)}return new s.Q(0,u)}function gh(P){return Math.cos(P*Math.PI/180)}function zi(P,u){const m=gh(P),S=gh(u);return s.ah(S/m)}function op(P,u){const m=P.rotate(u.bearingInRadians),S=u.zoom+zi(u.center.lat,0),M=s.bc(1/gh(u.center.lat),1/gh(Math.min(Math.abs(u.center.lat),60)),s.bf(S,7,3,0,1)),D=360/km({worldSize:u.worldSize,center:{lat:u.center.lat}});return new s.Q(u.center.lng-m.x*D*M,s.ae(u.center.lat+m.y*D,-85.051129,s.af))}function Am(P){const u=.5*P,m=Math.sin(u),S=Math.cos(u);return Math.log(m+S)-Math.log(S-m)}function t_(P,u,m,S){const M=P.lat+m*S;if(Math.abs(m)>1){const D=(Math.sign(P.lat+m)!==Math.sign(P.lat)?-Math.abs(P.lat):Math.abs(P.lat))*Math.PI/180,F=Math.abs(P.lat+m)*Math.PI/180,G=Am(D+S*(F-D)),Z=Am(D),ne=Am(F);return new s.Q(P.lng+u*((G-Z)/(ne-Z)),M)}return new s.Q(P.lng+u*S,M)}class yh{constructor(u){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=u}recalculateCache(){if(!this._hadAnyChanges)return;const u=this._cachePrevious;this._cachePrevious=this._cache,this._cache=u,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(u,m,S,M){const D=`${u.z}_${u.x}_${u.y}`,F=this._cache.get(D);if(F)return F;const G=this._cachePrevious.get(D);if(G)return this._cache.set(D,G),G;const Z=this._aabbFactory(u,m,S,M);return this._cache.set(D,Z),this._hadAnyChanges=!0,Z}}function Pm(P,u,m){const S=P-u;return S<0?-S:Math.max(0,S-m)}function n_(P,u,m,S,M){const D=P-m;let F;return F=D<0?Math.min(-D,1+D-M):D>1?Math.min(Math.max(D-M,0),1-D):0,Math.max(F,Pm(u,S,M))}class TE{constructor(){this._aabbCache=new yh(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(u,m,S,M){const D=1<<S.z,F=1/D,G=S.x/D,Z=S.y/D;let ne=2;return ne=Math.min(ne,n_(u,m,G,Z,F)),ne=Math.min(ne,n_(u,m,G+.5,-Z-F,F)),ne=Math.min(ne,n_(u,m,G+.5,2-Z-F,F)),ne}getWrap(u,m,S){const M=1<<m.z,D=1/M,F=m.x/M,G=Pm(u.x,F,D),Z=Pm(u.x,F-1,D),ne=Pm(u.x,F+1,D),he=Math.min(G,Z,ne);return he===ne?1:he===Z?-1:0}allowVariableZoom(u,m){return Mt(u,m)>4}allowWorldCopies(){return!1}getTileAABB(u,m,S,M){return this._aabbCache.getTileAABB(u,m,S,M)}_computeTileAABB(u,m,S,M){if(u.z<=0)return new dc([-1,-1,-1],[1,1,1]);if(u.z===1)return new dc([u.x===0?-1:0,u.y===0?0:-1,-1],[u.x===0?0:1,u.y===0?1:0,1]);{const D=[mh(0,0,u.x,u.y,u.z),mh(s.Z,0,u.x,u.y,u.z),mh(s.Z,s.Z,u.x,u.y,u.z),mh(0,s.Z,u.x,u.y,u.z)],F=[1,1,1],G=[-1,-1,-1];for(const Z of D)for(let ne=0;ne<3;ne++)F[ne]=Math.min(F[ne],Z[ne]),G[ne]=Math.max(G[ne],Z[ne]);if(u.y===0||u.y===(1<<u.z)-1){const Z=[0,u.y===0?1:-1,0];for(let ne=0;ne<3;ne++)F[ne]=Math.min(F[ne],Z[ne]),G[ne]=Math.max(G[ne],Z[ne])}return new dc(F,G)}}}class Im{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,S){return this._helper.interpolatePadding(u,m,S)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m){this._helper.resize(u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(u,m)=>this.getConstrained(u,m)}),this._coveringTilesDetailsProvider=new TE}clone(){const u=new Im;return u.apply(this),u}apply(u,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const u=s.bh();return u[0]=this._cameraPosition[0],u[1]=this._cameraPosition[1],u[2]=this._cameraPosition[2],u}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(u){const{overscaledTileID:m,applyGlobeMatrix:S}=u,M=this._helper.getMercatorTileCoordinates(m);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:S?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(u){const m=this.pitchInRadians,S=this.cameraToCenterDistance/u,M=Math.sin(m)*S,D=Math.cos(m)*S+1,F=1/Math.sqrt(M*M+D*D)*1;let G=-M,Z=D;const ne=Math.sqrt(G*G+Z*Z);G/=ne,Z/=ne;const he=[0,G,Z];s.bl(he,he,[0,0,0],-this.bearingInRadians),s.bm(he,he,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(he,he,[0,0,0],this.center.lng*Math.PI/180);const ye=1/s.bo(he);return s.aO(he,he,ye),[...he,-F*ye]}isLocationOccluded(u){return!this.isSurfacePointVisible(lo(u))}transformLightDirection(u){const m=this._helper._center.lng*Math.PI/180,S=this._helper._center.lat*Math.PI/180,M=Math.cos(S),D=[Math.sin(m)*M,Math.sin(S),Math.cos(m)*M],F=[D[2],0,-D[0]],G=[0,0,0];s.aU(G,F,D),s.aT(F,F),s.aT(G,G);const Z=[0,0,0];return s.aT(Z,[F[0]*u[0]+G[0]*u[1]+D[0]*u[2],F[1]*u[0]+G[1]*u[1]+D[1]*u[2],F[2]*u[0]+G[2]*u[1]+D[2]*u[2]]),Z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(u,m,S){const M=function(G,Z,ne){const he=1/(1<<ne.z);return new s.$(G/s.Z*he+ne.x*he,Z/s.Z*he+ne.y*he)}(u,m,S.canonical),D=(F=M.y,[s.bg(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-F*Math.PI*2))-.5*Math.PI]);var F;return this.getCircleRadiusCorrection()/Math.cos(D[1])}projectTileCoordinates(u,m,S,M){const D=S.canonical,F=mh(u,m,D.x,D.y,D.z),G=1+(M?M(u,m):0)/s.bu,Z=[F[0]*G,F[1]*G,F[2]*G,1];s.at(Z,Z,this._globeViewProjMatrixNoCorrection);const ne=this._cachedClippingPlane,he=ne[0]*F[0]+ne[1]*F[1]+ne[2]*F[2]+ne[3]<0;return{point:new s.P(Z[0]/Z[3],Z[1]/Z[3]),signedDistanceFromCamera:Z[3],isOccluded:he}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const u=Em(this.worldSize,this.center.lat),m=s.b2(),S=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*u),s.aY(m,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;m[8]=2*-M.x/this._helper._width,m[9]=2*M.y/this._helper._height,this._projectionMatrix=s.aZ(m),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,m),s.L(m,m,[0,0,-this.cameraToCenterDistance]),s.a_(m,m,this.rollInRadians),s.a$(m,m,-this.pitchInRadians),s.a_(m,m,this.bearingInRadians),s.L(m,m,[0,0,-u]);const D=s.bh();D[0]=u,D[1]=u,D[2]=u,s.a$(S,m,this.center.lat*Math.PI/180),s.bp(S,S,-this.center.lng*Math.PI/180),s.M(S,S,D),this._globeViewProjMatrixNoCorrection=S,s.a$(m,m,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(m,m,-this.center.lng*Math.PI/180),s.M(m,m,D),this._globeViewProjMatrix32f=new Float32Array(m),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,S);const F=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/u,s.bl(this._cameraPosition,this._cameraPosition,F,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,F,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,F,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,F,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,F,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(u);const G=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(G,G,[1,1,-1]),this._cachedFrustum=la.fromInvProjectionMatrix(G)}calculateFogMatrix(u){s.w("calculateFogMatrix is not supported on globe projection.");const m=s.b2();return s.ad(m),m}getVisibleUnwrappedCoordinates(u){return[new s.aW(0,u)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){u&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){if(!this._globeViewProjMatrixNoCorrection)return 1;const S=lo(u);s.aO(S,S,1+m/s.bu);const M=s.bk();return s.at(M,[S[0],S[1],S[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(u){}getBounds(){const u=.5*this.width,m=.5*this.height,S=[new s.P(0,0),new s.P(u,0),new s.P(this.width,0),new s.P(this.width,m),new s.P(this.width,this.height),new s.P(u,this.height),new s.P(0,this.height),new s.P(0,m)],M=[];for(const ye of S)M.push(this.unprojectScreenPoint(ye));let D=0,F=0,G=0,Z=0;const ne=this.center;for(const ye of M){const _e=s.bq(ne.lng,ye.lng),Ie=s.bq(ne.lat,ye.lat);_e<F&&(F=_e),_e>D&&(D=_e),Ie<Z&&(Z=Ie),Ie>G&&(G=Ie)}const he=[ne.lng+F,ne.lat+Z,ne.lng+D,ne.lat+G];return this.isSurfacePointOnScreen([0,1,0])&&(he[3]=90,he[0]=-180,he[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(he[1]=-90,he[0]=-180,he[2]=180),new ze(he)}getConstrained(u,m){const S=s.ae(u.lat,-85.051129,s.af),M=s.ae(+m,this.minZoom+zi(0,S),this.maxZoom);return{center:new s.Q(u.lng,S),zoom:M}}calculateCenterFromCameraLngLatAlt(u,m,S,M){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,S,M)}setLocationAtPoint(u,m){const S=lo(this.unprojectScreenPoint(m)),M=lo(u),D=s.bh();s.br(D);const F=s.bh();s.bn(F,S,D,-this.center.lng*Math.PI/180),s.bm(F,F,D,this.center.lat*Math.PI/180);const G=M[0]*M[0]+M[2]*M[2],Z=F[0]*F[0];if(G<Z)return;const ne=Math.sqrt(G-Z),he=-ne,ye=s.bs(M[0],M[2],F[0],ne),_e=s.bs(M[0],M[2],F[0],he),Ie=s.bh();s.bn(Ie,M,D,-ye);const De=s.bs(Ie[1],Ie[2],F[1],F[2]),Ye=s.bh();s.bn(Ye,M,D,-_e);const Ke=s.bs(Ye[1],Ye[2],F[1],F[2]),tt=.5*Math.PI,at=De>=-tt&&De<=tt,ht=Ke>=-tt&&Ke<=tt;let vt,gt;if(at&&ht){const Ut=this.center.lng*Math.PI/180,nn=this.center.lat*Math.PI/180;s.bv(ye,Ut)+s.bv(De,nn)<s.bv(_e,Ut)+s.bv(Ke,nn)?(vt=ye,gt=De):(vt=_e,gt=Ke)}else if(at)vt=ye,gt=De;else{if(!ht)return;vt=_e,gt=Ke}const Tt=vt/Math.PI*180,bt=gt/Math.PI*180,Nt=this.center.lat;this.setCenter(new s.Q(Tt,s.ae(bt,-90,90))),this.setZoom(this.zoom+zi(Nt,this.center.lat))}locationToScreenPoint(u,m){const S=lo(u);if(m){const M=m.getElevationForLngLatZoom(u,this._helper._tileZoom);s.aO(S,S,1+M/s.bu)}return this._projectSurfacePointToScreen(S)}_projectSurfacePointToScreen(u){const m=s.bk();return s.at(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],new s.P((.5*m[0]+.5)*this.width,(.5*-m[1]+.5)*this.height)}screenPointToMercatorCoordinate(u,m){if(m){const S=m.pointCoordinate(u);if(S)return S}return s.$.fromLngLat(this.unprojectScreenPoint(u))}screenPointToLocation(u,m){var S;return(S=this.screenPointToMercatorCoordinate(u,m))===null||S===void 0?void 0:S.toLngLat()}isPointOnMapSurface(u,m){const S=this._cameraPosition,M=this.getRayDirectionFromPixel(u);return!!this.rayPlanetIntersection(S,M)}getRayDirectionFromPixel(u){const m=s.bk();m[0]=u.x/this.width*2-1,m[1]=-1*(u.y/this.height*2-1),m[2]=1,m[3]=1,s.at(m,m,this._globeViewProjMatrixNoCorrectionInverted),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3];const S=s.bh();S[0]=m[0]-this._cameraPosition[0],S[1]=m[1]-this._cameraPosition[1],S[2]=m[2]-this._cameraPosition[2];const M=s.bh();return s.aT(M,S),M}isSurfacePointVisible(u){const m=this._cachedClippingPlane;return m[0]*u[0]+m[1]*u[1]+m[2]*u[2]+m[3]>=0}isSurfacePointOnScreen(u){if(!this.isSurfacePointVisible(u))return!1;const m=s.bk();return s.at(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3],m[0]>-1&&m[0]<1&&m[1]>-1&&m[1]<1&&m[2]>-1&&m[2]<1}rayPlanetIntersection(u,m){const S=s.aV(u,m),M=s.bh(),D=s.bh();s.aO(D,m,S),s.aS(M,u,D);const F=1-s.aV(M,M);if(F<0)return null;const G=s.aV(u,u)-1,Z=-S+(S<0?1:-1)*Math.sqrt(F),ne=G/Z,he=Z;return{tMin:Math.min(ne,he),tMax:Math.max(ne,he)}}unprojectScreenPoint(u){const m=this._cameraPosition,S=this.getRayDirectionFromPixel(u),M=this.rayPlanetIntersection(m,S);if(M){const he=s.bh();s.aP(he,m,[S[0]*M.tMin,S[1]*M.tMin,S[2]*M.tMin]);const ye=s.bh();return s.aT(ye,he),Ro(ye)}const D=this._cachedClippingPlane,F=D[0]*S[0]+D[1]*S[1]+D[2]*S[2],G=-s.bt(D,m)/F,Z=s.bh();if(G>0)s.aP(Z,m,[S[0]*G,S[1]*G,S[2]*G]);else{const he=s.bh();s.aP(he,m,[2*S[0],2*S[1],2*S[2]]);const ye=s.bt(this._cachedClippingPlane,he);s.aS(Z,he,[this._cachedClippingPlane[0]*ye,this._cachedClippingPlane[1]*ye,this._cachedClippingPlane[2]*ye])}const ne=function(he){const ye=s.bh();return ye[0]=he[0]*-he[3],ye[1]=he[1]*-he[3],ye[2]=he[2]*-he[3],{center:ye,radius:Math.sqrt(1-he[3]*he[3])}}(D);return Ro(function(he,ye,_e){const Ie=s.bh();s.aS(Ie,_e,he);const De=s.bh();return s.bi(De,he,Ie,ye/s.bj(Ie)),De}(ne.center,ne.radius,Z))}getMatrixForModel(u,m){const S=s.Q.convert(u),M=1/s.bu,D=s.b1();return s.bp(D,D,S.lng/180*Math.PI),s.a$(D,D,-S.lat/180*Math.PI),s.L(D,D,[0,0,1+m/s.bu]),s.a$(D,D,.5*Math.PI),s.M(D,D,[M,M,M]),D}getProjectionDataForCustomLayer(u=!0){const m=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:u});return m.tileMercatorCoords=[0,0,1,1],m}getFastPathSimpleProjectionMatrix(u){}}class Lm{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,S){return this._helper.interpolatePadding(u,m,S)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,S=!0){this._helper.resize(u,m,S)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(u,m){this._globeness=u,this._globeLatitudeErrorCorrectionRadians=m,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(u,m)=>this.getConstrained(u,m)}),this._globeness=1,this._mercatorTransform=new bl,this._verticalPerspectiveTransform=new Im}clone(){const u=new Lm;return u._globeness=this._globeness,u._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,u.apply(this),u}apply(u){this._helper.apply(u),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(u){const m=this._mercatorTransform.getProjectionData(u),S=this._verticalPerspectiveTransform.getProjectionData(u);return{mainMatrix:this.isGlobeRendering?S.mainMatrix:m.mainMatrix,clippingPlane:S.clippingPlane,tileMercatorCoords:S.tileMercatorCoords,projectionTransition:u.applyGlobeMatrix?this._globeness:0,fallbackMatrix:m.fallbackMatrix}}isLocationOccluded(u){return this.currentTransform.isLocationOccluded(u)}transformLightDirection(u){return this.currentTransform.transformLightDirection(u)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(u,m,S){const M=this._mercatorTransform.getPitchedTextCorrection(u,m,S),D=this._verticalPerspectiveTransform.getPitchedTextCorrection(u,m,S);return s.bc(M,D,this._globeness)}projectTileCoordinates(u,m,S,M){return this.currentTransform.projectTileCoordinates(u,m,S,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(u){return this.currentTransform.calculateFogMatrix(u)}getVisibleUnwrappedCoordinates(u){return this.currentTransform.getVisibleUnwrappedCoordinates(u)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(u){this._mercatorTransform.recalculateZoomAndCenter(u),this._verticalPerspectiveTransform.recalculateZoomAndCenter(u)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){return this.currentTransform.lngLatToCameraDepth(u,m)}populateCache(u){this._mercatorTransform.populateCache(u),this._verticalPerspectiveTransform.populateCache(u)}getBounds(){return this.currentTransform.getBounds()}getConstrained(u,m){return this.currentTransform.getConstrained(u,m)}calculateCenterFromCameraLngLatAlt(u,m,S,M){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,S,M)}setLocationAtPoint(u,m){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(u,m),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(u,m),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(u,m){return this.currentTransform.locationToScreenPoint(u,m)}screenPointToMercatorCoordinate(u,m){return this.currentTransform.screenPointToMercatorCoordinate(u,m)}screenPointToLocation(u,m){return this.currentTransform.screenPointToLocation(u,m)}isPointOnMapSurface(u,m){return this.currentTransform.isPointOnMapSurface(u,m)}getRayDirectionFromPixel(u){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(u)}getMatrixForModel(u,m){return this.currentTransform.getMatrixForModel(u,m)}getProjectionDataForCustomLayer(u=!0){const m=this._mercatorTransform.getProjectionDataForCustomLayer(u);if(!this.isGlobeRendering)return m;const S=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(u);return S.fallbackMatrix=m.mainMatrix,S}getFastPathSimpleProjectionMatrix(u){return this.currentTransform.getFastPathSimpleProjectionMatrix(u)}}class el{get useGlobeControls(){return!0}handlePanInertia(u,m){const S=op(u,m);return Math.abs(S.lng-m.center.lng)>180&&(S.lng=m.center.lng+179.5*Math.sign(S.lng-m.center.lng)),{easingCenter:S,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(u,m){const S=u.around,M=m.screenPointToLocation(S);u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta);const D=m.zoom;u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta);const F=m.zoom-D;if(F===0)return;const G=s.bq(m.center.lng,M.lng),Z=G/(Math.abs(G/180)+1),ne=s.bq(m.center.lat,M.lat),he=m.getRayDirectionFromPixel(S),ye=m.cameraPosition,_e=-1*s.aV(ye,he),Ie=s.bh();s.aP(Ie,ye,[he[0]*_e,he[1]*_e,he[2]*_e]);const De=s.bo(Ie)-1,Ye=Math.exp(.5*-Math.max(De-.3,0)),Ke=Em(m.worldSize,m.center.lat)/Math.min(m.width,m.height),tt=s.bf(Ke,.9,.5,1,.25),at=(1-s.ac(-F))*Math.min(Ye,tt),ht=m.center.lat,vt=m.zoom,gt=new s.Q(m.center.lng+Z*at,s.ae(m.center.lat+ne*at,-85.051129,s.af));m.setLocationAtPoint(M,S);const Tt=m.center,bt=s.bf(Math.abs(G),45,85,0,1),Nt=s.bf(Ke,.75,.35,0,1),Ut=Math.pow(Math.max(bt,Nt),.25),nn=s.bq(Tt.lng,gt.lng),an=s.bq(Tt.lat,gt.lat);m.setCenter(new s.Q(Tt.lng+nn*Ut,Tt.lat+an*Ut).wrap()),m.setZoom(vt+zi(ht,m.center.lat))}handleMapControlsPan(u,m,S){if(!u.panDelta)return;const M=m.center.lat,D=m.zoom;m.setCenter(op(u.panDelta,m).wrap()),m.setZoom(D+zi(M,m.center.lat))}cameraForBoxAndBearing(u,m,S,M,D){const F=ks(u,m,S,M,D),G=m.left/D.width*2-1,Z=(D.width-m.right)/D.width*2-1,ne=m.top/D.height*-2+1,he=(D.height-m.bottom)/D.height*-2+1,ye=s.bq(S.getWest(),S.getEast())<0,_e=ye?S.getEast():S.getWest(),Ie=ye?S.getWest():S.getEast(),De=Math.max(S.getNorth(),S.getSouth()),Ye=Math.min(S.getNorth(),S.getSouth()),Ke=_e+.5*s.bq(_e,Ie),tt=De+.5*s.bq(De,Ye),at=D.clone();at.setCenter(F.center),at.setBearing(F.bearing),at.setPitch(0),at.setRoll(0),at.setZoom(F.zoom);const ht=at.modelViewProjectionMatrix,vt=[lo(S.getNorthWest()),lo(S.getNorthEast()),lo(S.getSouthWest()),lo(S.getSouthEast()),lo(new s.Q(Ie,tt)),lo(new s.Q(_e,tt)),lo(new s.Q(Ke,De)),lo(new s.Q(Ke,Ye))],gt=lo(F.center);let Tt=Number.POSITIVE_INFINITY;for(const bt of vt)G<0&&(Tt=el.getLesserNonNegativeNonNull(Tt,el.solveVectorScale(bt,gt,ht,"x",G))),Z>0&&(Tt=el.getLesserNonNegativeNonNull(Tt,el.solveVectorScale(bt,gt,ht,"x",Z))),ne>0&&(Tt=el.getLesserNonNegativeNonNull(Tt,el.solveVectorScale(bt,gt,ht,"y",ne))),he<0&&(Tt=el.getLesserNonNegativeNonNull(Tt,el.solveVectorScale(bt,gt,ht,"y",he)));if(Number.isFinite(Tt)&&Tt!==0)return F.zoom=at.zoom+s.ah(Tt),F;hc()}handleJumpToCenterZoom(u,m){const S=u.center.lat,M=u.getConstrained(m.center?s.Q.convert(m.center):u.center,u.zoom).center;u.setCenter(M.wrap());const D=m.zoom!==void 0?+m.zoom:u.zoom+zi(S,M.lat);u.zoom!==D&&u.setZoom(D)}handleEaseTo(u,m){const S=u.zoom,M=u.center,D=u.padding,F={roll:u.roll,pitch:u.pitch,bearing:u.bearing},G={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},Z=m.zoom!==void 0,ne=!u.isPaddingEqual(m.padding);let he=!1;const ye=m.center?s.Q.convert(m.center):M,_e=u.getConstrained(ye,S).center;Za(u,_e);const Ie=u.clone();Ie.setCenter(_e),Ie.setZoom(Z?+m.zoom:S+zi(M.lat,ye.lat)),Ie.setBearing(m.bearing);const De=new s.P(s.ae(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),s.ae(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));Ie.setLocationAtPoint(_e,De);const Ye=(m.offset&&m.offsetAsPoint.mag())>0?Ie.center:_e,Ke=Z?+m.zoom:S+zi(M.lat,Ye.lat),tt=S+zi(M.lat,0),at=Ke+zi(Ye.lat,0),ht=s.bq(M.lng,Ye.lng),vt=s.bq(M.lat,Ye.lat),gt=s.ac(at-tt);return he=Ke!==S,{easeFunc:Tt=>{if(s.b6(F,G)||tp({startEulerAngles:F,endEulerAngles:G,tr:u,k:Tt,useSlerp:F.roll!=G.roll}),ne&&u.interpolatePadding(D,m.padding,Tt),m.around)s.w("Easing around a point is not supported under globe projection."),u.setLocationAtPoint(m.around,m.aroundPoint);else{const bt=at>tt?Math.min(2,gt):Math.max(.5,gt),Nt=Math.pow(bt,1-Tt),Ut=t_(M,ht,vt,Tt*Nt);u.setCenter(Ut.wrap())}if(he){const bt=s.B.number(tt,at,Tt)+zi(0,u.center.lat);u.setZoom(bt)}},isZooming:he,elevationCenter:Ye}}handleFlyTo(u,m){const S=m.zoom!==void 0,M=u.center,D=u.zoom,F=u.padding,G=!u.isPaddingEqual(m.padding),Z=u.getConstrained(s.Q.convert(m.center||m.locationAtOffset),D).center,ne=S?+m.zoom:u.zoom+zi(u.center.lat,Z.lat),he=u.clone();he.setCenter(Z),he.setZoom(ne),he.setBearing(m.bearing);const ye=new s.P(s.ae(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),s.ae(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));he.setLocationAtPoint(Z,ye);const _e=he.center;Za(u,_e);const Ie=function(vt,gt,Tt){const bt=lo(gt),Nt=lo(Tt),Ut=s.aV(bt,Nt),nn=Math.acos(Ut),an=km(vt);return nn/(2*Math.PI)*an}(u,M,_e),De=D+zi(M.lat,0),Ye=ne+zi(_e.lat,0),Ke=s.ac(Ye-De);let tt;if(typeof m.minZoom=="number"){const vt=+m.minZoom+zi(_e.lat,0),gt=Math.min(vt,De,Ye)+zi(0,_e.lat),Tt=u.getConstrained(_e,gt).zoom+zi(_e.lat,0);tt=s.ac(Tt-De)}const at=s.bq(M.lng,_e.lng),ht=s.bq(M.lat,_e.lat);return{easeFunc:(vt,gt,Tt,bt)=>{const Nt=t_(M,at,ht,Tt);G&&u.interpolatePadding(F,m.padding,vt);const Ut=vt===1?_e:Nt;u.setCenter(Ut.wrap());const nn=De+s.ah(gt);u.setZoom(vt===1?ne:nn+zi(0,Ut.lat))},scaleOfZoom:Ke,targetCenter:_e,scaleOfMinZoom:tt,pixelPathLength:Ie}}static solveVectorScale(u,m,S,M,D){const F=M==="x"?[S[0],S[4],S[8],S[12]]:[S[1],S[5],S[9],S[13]],G=[S[3],S[7],S[11],S[15]],Z=u[0]*F[0]+u[1]*F[1]+u[2]*F[2],ne=u[0]*G[0]+u[1]*G[1]+u[2]*G[2],he=m[0]*F[0]+m[1]*F[1]+m[2]*F[2],ye=m[0]*G[0]+m[1]*G[1]+m[2]*G[2];return he+D*ne===Z+D*ye||G[3]*(Z-he)+F[3]*(ye-ne)+Z*ye==he*ne?null:(he+F[3]-D*ye-D*G[3])/(he-Z-D*ye+D*ne)}static getLesserNonNegativeNonNull(u,m){return m!==null&&m>=0&&m<u?m:u}}class sp{constructor(u){this._globe=u,this._mercatorCameraHelper=new np,this._verticalPerspectiveCameraHelper=new el}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(u,m){return this.currentHelper.handlePanInertia(u,m)}handleMapControlsRollPitchBearingZoom(u,m){return this.currentHelper.handleMapControlsRollPitchBearingZoom(u,m)}handleMapControlsPan(u,m,S){this.currentHelper.handleMapControlsPan(u,m,S)}cameraForBoxAndBearing(u,m,S,M,D){return this.currentHelper.cameraForBoxAndBearing(u,m,S,M,D)}handleJumpToCenterZoom(u,m){this.currentHelper.handleJumpToCenterZoom(u,m)}handleEaseTo(u,m){return this.currentHelper.handleEaseTo(u,m)}handleFlyTo(u,m){return this.currentHelper.handleFlyTo(u,m)}}const _h=(P,u)=>s.x(P,u&&u.filter(m=>m.identifier!=="source.canvas")),Dm=s.bw();class lp extends s.E{constructor(u,m={}){super(),this._rtlPluginLoaded=()=>{for(const S in this.sourceCaches){const M=this.sourceCaches[S].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[S].reload()}},this.map=u,this.dispatcher=new Ee(et(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",(S,M)=>this.getGlyphs(S,M)),this.dispatcher.registerMessageHandler("GI",(S,M)=>this.getImages(S,M)),this.imageManager=new W,this.imageManager.setEventedParent(this),this.glyphManager=new ue(u._requestManager,m.localIdeographFontFamily),this.lineAtlas=new oe(256,512),this.crossTileSymbolIndex=new du,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),On().on(kt,this._rtlPluginLoaded),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const M=this.sourceCaches[S.sourceId];if(!M)return;const D=M.getSource();if(D&&D.vectorLayerIds)for(const F in this._layers){const G=this._layers[F];G.source===D.id&&this._validateLayer(G)}})}loadURL(u,m={},S){this.fire(new s.l("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const M=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController;const D=this._loadStyleRequest;s.j(M,this._loadStyleRequest).then(F=>{this._loadStyleRequest=null,this._load(F.data,m,S)}).catch(F=>{this._loadStyleRequest=null,F&&!D.signal.aborted&&this.fire(new s.k(F))})}loadJSON(u,m={},S){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(u,m,S)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Dm,{validate:!1})}_load(u,m,S){var M,D;const F=m.transformStyle?m.transformStyle(S,u):u;if(!m.validate||!_h(this,s.y(F))){this._loaded=!0,this.stylesheet=F;for(const G in F.sources)this.addSource(G,F.sources[G],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs),this._createLayers(),this.light=new ce(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new ee(this.stylesheet.sky),this.map.setTerrain((D=this.stylesheet.terrain)!==null&&D!==void 0?D:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const u=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(m=>m.id),this._layers={},this._serializedLayers=null;for(const m of u){const S=s.bA(m);S.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=S}}_loadSprite(u,m=!1,S=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(D,F,G,Z){return s._(this,void 0,void 0,function*(){const ne=B(D),he=G>1?"@2x":"",ye={},_e={};for(const{id:Ie,url:De}of ne){const Ye=F.transformRequest(N(De,he,".json"),"SpriteJSON");ye[Ie]=s.j(Ye,Z);const Ke=F.transformRequest(N(De,he,".png"),"SpriteImage");_e[Ie]=I.getImage(Ke,Z)}return yield Promise.all([...Object.values(ye),...Object.values(_e)]),function(Ie,De){return s._(this,void 0,void 0,function*(){const Ye={};for(const Ke in Ie){Ye[Ke]={};const tt=p.getImageCanvasContext((yield De[Ke]).data),at=(yield Ie[Ke]).data;for(const ht in at){const{width:vt,height:gt,x:Tt,y:bt,sdf:Nt,pixelRatio:Ut,stretchX:nn,stretchY:an,content:tn,textFitWidth:An,textFitHeight:Sn}=at[ht];Ye[Ke][ht]={data:null,pixelRatio:Ut,sdf:Nt,stretchX:nn,stretchY:an,content:tn,textFitWidth:An,textFitHeight:Sn,spriteData:{width:vt,height:gt,x:Tt,y:bt,context:tt}}}}return Ye})}(ye,_e)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(D=>{if(this._spriteRequest=null,D)for(const F in D){this._spritesImagesIds[F]=[];const G=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(Z=>!(Z in D)):[];for(const Z of G)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in D[F]){const ne=F==="default"?Z:`${F}:${Z}`;this._spritesImagesIds[F].push(ne),ne in this.imageManager.images?this.imageManager.updateImage(ne,D[F][Z],!1):this.imageManager.addImage(ne,D[F][Z]),m&&(this._changedImages[ne]=!0)}}}).catch(D=>{this._spriteRequest=null,M=D,this.fire(new s.k(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),S&&S(M)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(u){const m=this.sourceCaches[u.source];if(!m)return;const S=u.sourceLayer;if(!S)return;const M=m.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(S)===-1)&&this.fire(new s.k(new Error(`Source layer "${S}" does not exist on source "${M.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u,m=!1){const S=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m?s.bB(S):S);const M=[];for(const D of u)if(S[D]){const F=m?s.bB(S[D]):S[D];M.push(F)}return M}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const S of m){const M=this._layers[S];M.type!=="custom"&&(u[S]=M.serialize())}return u}hasTransitions(){var u,m,S;if(!((u=this.light)===null||u===void 0)&&u.hasTransition()||!((m=this.sky)===null||m===void 0)&&m.hasTransition()||!((S=this.projection)===null||S===void 0)&&S.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(m){const M=Object.keys(this._updatedLayers),D=Object.keys(this._removedLayers);(M.length||D.length)&&this._updateWorkerLayers(M,D);for(const F in this._updatedSources){const G=this._updatedSources[F];if(G==="reload")this._reloadSource(F);else{if(G!=="clear")throw new Error(`Invalid action ${G}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(u);this.light.updateTransitions(u),this.sky.updateTransitions(u),this._resetUpdates()}const S={};for(const M in this.sourceCaches){const D=this.sourceCaches[M];S[M]=D.used,D.used=!1}for(const M of this._order){const D=this._layers[M];D.recalculate(u,this._availableImages),!D.isHidden(u.zoom)&&D.source&&(this.sourceCaches[D.source].used=!0)}for(const M in S){const D=this.sourceCaches[M];!!S[M]!=!!D.used&&D.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(u),this.sky.recalculate(u),this.projection.recalculate(u),this.z=u.zoom,m&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u,!1),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){var S;this._checkLoaded();const M=this.serialize();if(u=m.transformStyle?m.transformStyle(M,u):u,((S=m.validate)===null||S===void 0||S)&&_h(this,s.y(u)))return!1;(u=s.bB(u)).layers=s.bz(u.layers);const D=s.bC(M,u),F=this._getOperationsToPerform(D);if(F.unimplemented.length>0)throw new Error(`Unimplemented: ${F.unimplemented.join(", ")}.`);if(F.operations.length===0)return!1;for(const G of F.operations)G();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const m=[],S=[];for(const M of u)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":m.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":m.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":m.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":m.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":m.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":m.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":m.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":m.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":m.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":m.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":m.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":m.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":m.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":m.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":m.push(()=>{});break;default:S.push(M.command)}return{operations:m,unimplemented:S}}addImage(u,m){if(this.getImage(u))return this.fire(new s.k(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new s.k(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,S={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.y.source,`sources.${u}`,m,null,S))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const M=this.sourceCaches[u]=new Et(u,m,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:u})),M.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===u)return this.fire(new s.k(new Error(`Source "${u}" cannot be removed while layer "${S}" is using it.`)));const m=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],m.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const S=this.sourceCaches[u].getSource();if(S.type!=="geojson")throw new Error(`geojsonSource.type is ${S.type}, which is !== 'geojson`);S.setData(m),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,m,S={}){this._checkLoaded();const M=u.id;if(this.getLayer(M))return void this.fire(new s.k(new Error(`Layer "${M}" already exists on this map.`)));let D;if(u.type==="custom"){if(_h(this,s.bD(u)))return;D=s.bA(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(M,u.source),u=s.bB(u),u=s.e(u,{source:M})),this._validate(s.y.layer,`layers.${M}`,u,{arrayIndex:-1},S))return;D=s.bA(u),this._validateLayer(D),D.setEventedParent(this,{layer:{id:M}})}const F=m?this._order.indexOf(m):this._order.length;if(m&&F===-1)this.fire(new s.k(new Error(`Cannot add layer "${M}" before non-existing layer "${m}".`)));else{if(this._order.splice(F,0,M),this._layerOrderChanged=!0,this._layers[M]=D,this._removedLayers[M]&&D.source&&D.type!=="custom"){const G=this._removedLayers[M];delete this._removedLayers[M],G.type!==D.type?this._updatedSources[D.source]="clear":(this._updatedSources[D.source]="reload",this.sourceCaches[D.source].pause())}this._updateLayer(D),D.onAdd&&D.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.k(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const S=this._order.indexOf(u);this._order.splice(S,1);const M=m?this._order.indexOf(m):this._order.length;m&&M===-1?this.fire(new s.k(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(M,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const S=this._order.indexOf(u);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,S){this._checkLoaded();const M=this.getLayer(u);M?M.minzoom===m&&M.maxzoom===S||(m!=null&&(M.minzoom=m),S!=null&&(M.maxzoom=S),this._updateLayer(M)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,S={}){this._checkLoaded();const M=this.getLayer(u);if(M){if(!s.bE(M.filter,m))return m==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(s.y.filter,`layers.${M.id}.filter`,m,null,S)||(M.filter=s.bB(m),this._updateLayer(M)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return s.bB(this.getLayer(u).filter)}setLayoutProperty(u,m,S,M={}){this._checkLoaded();const D=this.getLayer(u);D?s.bE(D.getLayoutProperty(m),S)||(D.setLayoutProperty(m,S,M),this._updateLayer(D)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const S=this.getLayer(u);if(S)return S.getLayoutProperty(m);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,S,M={}){this._checkLoaded();const D=this.getLayer(u);D?s.bE(D.getPaintProperty(m),S)||(D.setPaintProperty(m,S,M)&&this._updateLayer(D),this._changed=!0,this._updatedPaintProps[u]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const S=u.source,M=u.sourceLayer,D=this.sourceCaches[S];if(D===void 0)return void this.fire(new s.k(new Error(`The source '${S}' does not exist in the map's style.`)));const F=D.getSource().type;F==="geojson"&&M?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||M?(u.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),D.setFeatureState(M,u.id,m)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const S=u.source,M=this.sourceCaches[S];if(M===void 0)return void this.fire(new s.k(new Error(`The source '${S}' does not exist in the map's style.`)));const D=M.getSource().type,F=D==="vector"?u.sourceLayer:void 0;D!=="vector"||F?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(F,u.id,m):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,S=u.sourceLayer,M=this.sourceCaches[m];if(M!==void 0)return M.getSource().type!=="vector"||S?(u.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),M.getFeatureState(S,u.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=s.bF(this.sourceCaches,D=>D.serialize()),m=this._serializeByIds(this._order,!0),S=this.map.getTerrain()||void 0,M=this.stylesheet;return s.bG({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:u,layers:m,terrain:S},D=>D!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=F=>this._layers[F].type==="fill-extrusion",S={},M=[];for(let F=this._order.length-1;F>=0;F--){const G=this._order[F];if(m(G)){S[G]=F;for(const Z of u){const ne=Z[G];if(ne)for(const he of ne)M.push(he)}}}M.sort((F,G)=>G.intersectionZ-F.intersectionZ);const D=[];for(let F=this._order.length-1;F>=0;F--){const G=this._order[F];if(m(G))for(let Z=M.length-1;Z>=0;Z--){const ne=M[Z].feature;if(S[ne.layer.id]<F)break;D.push(ne),M.pop()}else for(const Z of u){const ne=Z[G];if(ne)for(const he of ne)D.push(he.feature)}}return D}queryRenderedFeatures(u,m,S){m&&m.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",m.filter,null,m);const M={};if(m&&m.layers){if(!(Array.isArray(m.layers)||m.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ne of m.layers){const he=this._layers[ne];if(!he)return this.fire(new s.k(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];M[he.source]=!0}}const D=[];m.availableImages=this._availableImages;const F=this._serializedAllLayers(),G=m.layers instanceof Set?m.layers:Array.isArray(m.layers)?new Set(m.layers):null,Z=Object.assign(Object.assign({},m),{layers:G});for(const ne in this.sourceCaches)m.layers&&!M[ne]||D.push(yt(this.sourceCaches[ne],this._layers,F,u,Z,S,this.map.terrain?(he,ye,_e)=>this.map.terrain.getElevation(he,ye,_e):void 0));return this.placement&&D.push(function(ne,he,ye,_e,Ie,De,Ye){const Ke={},tt=De.queryRenderedSymbols(_e),at=[];for(const ht of Object.keys(tt).map(Number))at.push(Ye[ht]);at.sort(Ne);for(const ht of at){const vt=ht.featureIndex.lookupSymbolFeatures(tt[ht.bucketInstanceId],he,ht.bucketIndex,ht.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,ne);for(const gt in vt){const Tt=Ke[gt]=Ke[gt]||[],bt=vt[gt];bt.sort((Nt,Ut)=>{const nn=ht.featureSortOrder;if(nn){const an=nn.indexOf(Nt.featureIndex);return nn.indexOf(Ut.featureIndex)-an}return Ut.featureIndex-Nt.featureIndex});for(const Nt of bt)Tt.push(Nt)}}return function(ht,vt,gt){for(const Tt in ht)for(const bt of ht[Tt])dt(bt,gt[vt[Tt].source]);return ht}(Ke,ne,ye)}(this._layers,F,this.sourceCaches,u,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",m.filter,null,m);const S=this.sourceCaches[u];return S?function(M,D){const F=M.getRenderableIds().map(ne=>M.getTileByID(ne)),G=[],Z={};for(let ne=0;ne<F.length;ne++){const he=F[ne],ye=he.tileID.canonical.key;Z[ye]||(Z[ye]=!0,he.querySourceFeatures(G,D))}return G}(S,m):[]}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const S=this.light.getLight();let M=!1;for(const F in u)if(!s.bE(u[F],S[F])){M=!0;break}if(!M)return;const D={now:p.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(D)}getProjection(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.projection}setProjection(u){if(this._checkLoaded(),this.projection){if(this.projection.name===u.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=u,this._setProjectionInternal(u.type)}getSky(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.sky}setSky(u,m={}){this._checkLoaded();const S=this.getSky();let M=!1;if(!u&&!S)return;if(u&&!S)M=!0;else if(!u&&S)M=!0;else for(const F in u)if(!s.bE(u[F],S[F])){M=!0;break}if(!M)return;const D={now:p.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=u,this.sky.setSky(u,m),this.sky.updateTransitions(D)}_setProjectionInternal(u){const m=function(S){if(Array.isArray(S)){const M=new Bx({type:S});return{projection:M,transform:new Lm,cameraHelper:new sp(M)}}switch(S){case"mercator":return{projection:new sa,transform:new bl,cameraHelper:new np};case"globe":{const M=new Bx({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Lm,cameraHelper:new sp(M)}}case"vertical-perspective":return{projection:new ip,transform:new Im,cameraHelper:new el};default:return s.w(`Unknown projection name: ${S}. Falling back to mercator projection.`),{projection:new sa,transform:new bl,cameraHelper:new np}}}(u);this.projection=m.projection,this.map.migrateProjection(m.transform,m.cameraHelper);for(const S in this.sourceCaches)this.sourceCaches[S].reload()}_validate(u,m,S,M,D={}){return(!D||D.validate!==!1)&&_h(this,u.call(s.y,s.e({key:m,style:this.serialize(),value:S,styleSpec:s.v},M)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),On().off(kt,this._rtlPluginLoaded);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const S=this.sourceCaches[m];S.setEventedParent(null),S.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const m in this.sourceCaches)this.sourceCaches[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,m,S,M,D=!1){let F=!1,G=!1;const Z={};for(const ne of this._order){const he=this._layers[ne];if(he.type!=="symbol")continue;if(!Z[he.source]){const _e=this.sourceCaches[he.source];Z[he.source]=_e.getRenderableIds(!0).map(Ie=>_e.getTileByID(Ie)).sort((Ie,De)=>De.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(De.tileID)?-1:1))}const ye=this.crossTileSymbolIndex.addLayer(he,Z[he.source],u.center.lng);F=F||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((D=D||this._layerOrderChanged||S===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.now(),u.zoom))&&(this.pauseablePlacement=new Cm(u,this.map.terrain,this._order,D,m,S,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.now()),G=!0),F&&this.pauseablePlacement.placement.setStale()),G||F)for(const ne of this._order){const he=this._layers[ne];he.type==="symbol"&&this.placement.updateLayerOpacities(he,Z[he.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m){return s._(this,void 0,void 0,function*(){const S=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[m.source];return M&&M.setDependencies(m.tileID.key,m.type,m.icons),S})}getGlyphs(u,m){return s._(this,void 0,void 0,function*(){const S=yield this.glyphManager.getGlyphs(m.stacks),M=this.sourceCaches[m.source];return M&&M.setDependencies(m.tileID.key,m.type,[""]),S})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(s.y.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,m,S={},M){this._checkLoaded();const D=[{id:u,url:m}],F=[...B(this.stylesheet.sprite),...D];this._validate(s.y.sprite,"sprite",F,null,S)||(this.stylesheet.sprite=F,this._loadSprite(D,!0,M))}removeSprite(u){this._checkLoaded();const m=B(this.stylesheet.sprite);if(m.find(S=>S.id===u)){if(this._spritesImagesIds[u])for(const S of this._spritesImagesIds[u])this.imageManager.removeImage(S),this._changedImages[S]=!0;m.splice(m.findIndex(S=>S.id===u),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(u,m={},S){this._checkLoaded(),u&&this._validate(s.y.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,S):(this._unloadSprite(),S&&S(null)))}}var r_=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class wl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,S,M,D,F,G,Z,ne){this.context=u;let he=this.boundPaintVertexBuffers.length!==M.length;for(let ye=0;!he&&ye<M.length;ye++)this.boundPaintVertexBuffers[ye]!==M[ye]&&(he=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==S||he||this.boundIndexBuffer!==D||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==ne?this.freshBind(m,S,M,D,F,G,Z,ne):(u.bindVertexArray.set(this.vao),G&&G.bind(),D&&D.dynamicDraw&&D.bind(),Z&&Z.bind(),ne&&ne.bind())}freshBind(u,m,S,M,D,F,G,Z){const ne=u.numAttributes,he=this.context,ye=he.gl;this.vao&&this.destroy(),this.vao=he.createVertexArray(),he.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=S,this.boundIndexBuffer=M,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=G,this.boundDynamicVertexBuffer3=Z,m.enableAttributes(ye,u);for(const _e of S)_e.enableAttributes(ye,u);F&&F.enableAttributes(ye,u),G&&G.enableAttributes(ye,u),Z&&Z.enableAttributes(ye,u),m.bind(),m.setVertexAttribPointers(ye,u,D);for(const _e of S)_e.bind(),_e.setVertexAttribPointers(ye,u,D);F&&(F.bind(),F.setVertexAttribPointers(ye,u,D)),M&&M.bind(),G&&(G.bind(),G.setVertexAttribPointers(ye,u,D)),Z&&(Z.bind(),Z.setVertexAttribPointers(ye,u,D)),he.currentNumAttributes=ne}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ME=(P,u,m,S,M)=>({u_texture:0,u_ele_delta:P,u_fog_matrix:u,u_fog_color:m?m.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:m?m.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:m?m.calculateFogBlendOpacity(S):0,u_horizon_color:m?m.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:m?m.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),i_={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function fc(P){const u=[];for(let m=0;m<P.length;m++){if(P[m]===null)continue;const S=P[m].split(" ");u.push(S.pop())}return u}class up{constructor(u,m,S,M,D,F,G,Z){const ne=u.gl;this.program=ne.createProgram();const he=fc(m.staticAttributes),ye=S?S.getBinderAttributes():[],_e=he.concat(ye),Ie=Rr.prelude.staticUniforms?fc(Rr.prelude.staticUniforms):[],De=G.staticUniforms?fc(G.staticUniforms):[],Ye=m.staticUniforms?fc(m.staticUniforms):[],Ke=S?S.getBinderUniforms():[],tt=Ie.concat(De).concat(Ye).concat(Ke),at=[];for(const Ut of tt)at.indexOf(Ut)<0&&at.push(Ut);const ht=S?S.defines():[];Qs(ne)&&ht.unshift("#version 300 es"),D&&ht.push("#define OVERDRAW_INSPECTOR;"),F&&ht.push("#define TERRAIN3D;"),Z&&ht.push(Z);let vt=ht.concat(Rr.prelude.fragmentSource,G.fragmentSource,m.fragmentSource).join(`
`),gt=ht.concat(Rr.prelude.vertexSource,G.vertexSource,m.vertexSource).join(`
`);Qs(ne)||(vt=function(Ut){return Ut.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(vt),gt=function(Ut){return Ut.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(gt));const Tt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(Tt,vt),ne.compileShader(Tt),!ne.getShaderParameter(Tt,ne.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ne.getShaderInfoLog(Tt)}`);ne.attachShader(this.program,Tt);const bt=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(bt,gt),ne.compileShader(bt),!ne.getShaderParameter(bt,ne.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ne.getShaderInfoLog(bt)}`);ne.attachShader(this.program,bt),this.attributes={};const Nt={};this.numAttributes=_e.length;for(let Ut=0;Ut<this.numAttributes;Ut++)_e[Ut]&&(ne.bindAttribLocation(this.program,Ut,_e[Ut]),this.attributes[_e[Ut]]=Ut);if(ne.linkProgram(this.program),!ne.getProgramParameter(this.program,ne.LINK_STATUS))throw new Error(`Program failed to link: ${ne.getProgramInfoLog(this.program)}`);ne.deleteShader(bt),ne.deleteShader(Tt);for(let Ut=0;Ut<at.length;Ut++){const nn=at[Ut];if(nn&&!Nt[nn]){const an=ne.getUniformLocation(this.program,nn);an&&(Nt[nn]=an)}}this.fixedUniforms=M(u,Nt),this.terrainUniforms=((Ut,nn)=>({u_depth:new s.bH(Ut,nn.u_depth),u_terrain:new s.bH(Ut,nn.u_terrain),u_terrain_dim:new s.b8(Ut,nn.u_terrain_dim),u_terrain_matrix:new s.bJ(Ut,nn.u_terrain_matrix),u_terrain_unpack:new s.bK(Ut,nn.u_terrain_unpack),u_terrain_exaggeration:new s.b8(Ut,nn.u_terrain_exaggeration)}))(u,Nt),this.projectionUniforms=((Ut,nn)=>({u_projection_matrix:new s.bJ(Ut,nn.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(Ut,nn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(Ut,nn.u_projection_clipping_plane),u_projection_transition:new s.b8(Ut,nn.u_projection_transition),u_projection_fallback_matrix:new s.bJ(Ut,nn.u_projection_fallback_matrix)}))(u,Nt),this.binderUniforms=S?S.getUniforms(u,Nt):[]}draw(u,m,S,M,D,F,G,Z,ne,he,ye,_e,Ie,De,Ye,Ke,tt,at,ht){const vt=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(S),u.setStencilMode(M),u.setColorMode(D),u.setCullFace(F),Z){u.activeTexture.set(vt.TEXTURE2),vt.bindTexture(vt.TEXTURE_2D,Z.depthTexture),u.activeTexture.set(vt.TEXTURE3),vt.bindTexture(vt.TEXTURE_2D,Z.texture);for(const Tt in this.terrainUniforms)this.terrainUniforms[Tt].set(Z[Tt])}if(ne)for(const Tt in ne)this.projectionUniforms[i_[Tt]].set(ne[Tt]);if(G)for(const Tt in this.fixedUniforms)this.fixedUniforms[Tt].set(G[Tt]);Ke&&Ke.setUniforms(u,this.binderUniforms,De,{zoom:Ye});let gt=0;switch(m){case vt.LINES:gt=2;break;case vt.TRIANGLES:gt=3;break;case vt.LINE_STRIP:gt=1}for(const Tt of Ie.get()){const bt=Tt.vaos||(Tt.vaos={});(bt[he]||(bt[he]=new wl)).bind(u,this,ye,Ke?Ke.getPaintVertexBuffers():[],_e,Tt.vertexOffset,tt,at,ht),vt.drawElements(m,Tt.primitiveLength*gt,vt.UNSIGNED_SHORT,Tt.primitiveOffset*gt*2)}}}function Fx(P,u,m){const S=1/s.az(m,1,u.transform.tileZoom),M=Math.pow(2,m.tileID.overscaledZ),D=m.tileSize*Math.pow(2,u.transform.tileZoom)/M,F=D*(m.tileID.canonical.x+m.tileID.wrap*M),G=D*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[S,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[F>>16,G>>16],u_pixel_coord_lower:[65535&F,65535&G]}}const cp=(P,u,m,S)=>{const M=P.style.light,D=M.properties.get("position"),F=[D.x,D.y,D.z],G=s.bN();M.properties.get("anchor")==="viewport"&&s.bO(G,P.transform.bearingInRadians),s.bP(F,F,G);const Z=P.transform.transformLightDirection(F),ne=M.properties.get("color");return{u_lightpos:F,u_lightpos_globe:Z,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[ne.r,ne.g,ne.b],u_vertical_gradient:+u,u_opacity:m,u_fill_translate:S}},kE=(P,u,m,S,M,D,F)=>s.e(cp(P,u,m,S),Fx(D,P,F),{u_height_factor:-Math.pow(2,M.overscaledZ)/F.tileSize/8}),vd=(P,u,m,S)=>s.e(Fx(u,P,m),{u_fill_translate:S}),EE=(P,u)=>({u_world:P,u_fill_translate:u}),Nx=(P,u,m,S,M)=>s.e(vd(P,u,m,M),{u_world:S}),AE=(P,u,m,S,M)=>{const D=P.transform;let F,G,Z=0;if(m.paint.get("circle-pitch-alignment")==="map"){const ne=s.az(u,1,D.zoom);F=!0,G=[ne,ne],Z=ne/(s.Z*Math.pow(2,u.tileID.overscaledZ))*2*Math.PI*M}else F=!1,G=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+F,u_device_pixel_ratio:P.pixelRatio,u_extrude_scale:G,u_globe_extrude_scale:Z,u_translate:S}},$x=P=>({u_pixel_extrude_scale:[1/P.width,1/P.height]}),a_=P=>({u_viewport_size:[P.width,P.height]}),o_=(P,u=1)=>({u_color:P,u_overlay:0,u_overlay_scale:u}),s_=(P,u,m,S)=>{const M=s.az(P,1,u)/(s.Z*Math.pow(2,P.tileID.overscaledZ))*2*Math.PI*S;return{u_extrude_scale:s.az(P,1,u),u_intensity:m,u_globe_extrude_scale:M}},l_=(P,u,m,S)=>{const M=s.K();s.bQ(M,0,P.width,P.height,0,0,1);const D=P.context.gl;return{u_matrix:M,u_world:[D.drawingBufferWidth,D.drawingBufferHeight],u_image:m,u_color_ramp:S,u_opacity:u.paint.get("heatmap-opacity")}},Vx=(P,u,m)=>{const S=m.paint.get("hillshade-shadow-color"),M=m.paint.get("hillshade-highlight-color"),D=m.paint.get("hillshade-accent-color");let F=m.paint.get("hillshade-illumination-direction")*(Math.PI/180);return m.paint.get("hillshade-illumination-anchor")==="viewport"&&(F+=P.transform.bearingInRadians),{u_image:0,u_latrange:Hx(0,u.tileID),u_light:[m.paint.get("hillshade-exaggeration"),F],u_shadow:S,u_highlight:M,u_accent:D}},md=(P,u)=>{const m=u.stride,S=s.K();return s.bQ(S,0,s.Z,-8192,0,0,1),s.L(S,S,[0,-8192,0]),{u_matrix:S,u_image:1,u_dimension:[m,m],u_zoom:P.overscaledZ,u_unpack:u.getUnpackVector()}};function Hx(P,u){const m=Math.pow(2,u.canonical.z),S=u.canonical.y;return[new s.$(0,S/m).toLngLat().lat,new s.$(0,(S+1)/m).toLngLat().lat]}const Rm=(P,u,m,S)=>{const M=P.transform;return{u_translation:Ux(P,u,m),u_ratio:S/s.az(u,1,M.zoom),u_device_pixel_ratio:P.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},dp=(P,u,m,S,M)=>s.e(Rm(P,u,m,S),{u_image:0,u_image_height:M}),PE=(P,u,m,S,M)=>{const D=P.transform,F=jx(u,D);return{u_translation:Ux(P,u,m),u_texsize:u.imageAtlasTexture.size,u_ratio:S/s.az(u,1,D.zoom),u_device_pixel_ratio:P.pixelRatio,u_image:0,u_scale:[F,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Om=(P,u,m,S,M,D)=>{const F=P.lineAtlas,G=jx(u,P.transform),Z=m.layout.get("line-cap")==="round",ne=F.getDash(M.from,Z),he=F.getDash(M.to,Z),ye=ne.width*D.fromScale,_e=he.width*D.toScale;return s.e(Rm(P,u,m,S),{u_patternscale_a:[G/ye,-ne.height/2],u_patternscale_b:[G/_e,-he.height/2],u_sdfgamma:F.width/(256*Math.min(ye,_e)*P.pixelRatio)/2,u_image:0,u_tex_y_a:ne.y,u_tex_y_b:he.y,u_mix:D.t})};function jx(P,u){return 1/s.az(P,1,u.tileZoom)}function Ux(P,u,m){return s.aA(P.transform,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const Wx=(P,u,m,S,M)=>{return{u_tl_parent:P,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(F=S.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(D=S.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:Gx(S.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var D,F};function Gx(P){P*=Math.PI/180;const u=Math.sin(P),m=Math.cos(P);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const u_=(P,u,m,S,M,D,F,G,Z,ne,he,ye,_e)=>{const Ie=F.transform;return{u_is_size_zoom_constant:+(P==="constant"||P==="source"),u_is_size_feature_constant:+(P==="constant"||P==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Ie.cameraToCenterDistance,u_pitch:Ie.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:Ie.width/Ie.height,u_fade_change:F.options.fadeDuration?F.symbolFadeChange:1,u_label_plane_matrix:G,u_coord_matrix:Z,u_is_text:+he,u_pitch_with_map:+S,u_is_along_line:M,u_is_variable_anchor:D,u_texsize:ye,u_texture:0,u_translation:ne,u_pitched_scale:_e}},zm=(P,u,m,S,M,D,F,G,Z,ne,he,ye,_e,Ie)=>{const De=F.transform;return s.e(u_(P,u,m,S,M,D,F,G,Z,ne,he,ye,Ie),{u_gamma_scale:S?Math.cos(De.pitch*Math.PI/180)*De.cameraToCenterDistance:1,u_device_pixel_ratio:F.pixelRatio,u_is_halo:1})},Kx=(P,u,m,S,M,D,F,G,Z,ne,he,ye,_e)=>s.e(zm(P,u,m,S,M,D,F,G,Z,ne,!0,he,0,_e),{u_texsize_icon:ye,u_texture_icon:1}),Bm=(P,u)=>({u_opacity:P,u_color:u}),hu=(P,u,m,S,M)=>s.e(function(D,F,G,Z){const ne=G.imageManager.getPattern(D.from.toString()),he=G.imageManager.getPattern(D.to.toString()),{width:ye,height:_e}=G.imageManager.getPixelSize(),Ie=Math.pow(2,Z.tileID.overscaledZ),De=Z.tileSize*Math.pow(2,G.transform.tileZoom)/Ie,Ye=De*(Z.tileID.canonical.x+Z.tileID.wrap*Ie),Ke=De*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ne.tl,u_pattern_br_a:ne.br,u_pattern_tl_b:he.tl,u_pattern_br_b:he.br,u_texsize:[ye,_e],u_mix:F.t,u_pattern_size_a:ne.displaySize,u_pattern_size_b:he.displaySize,u_scale_a:F.fromScale,u_scale_b:F.toScale,u_tile_units_to_pixels:1/s.az(Z,1,G.transform.tileZoom),u_pixel_coord_upper:[Ye>>16,Ke>>16],u_pixel_coord_lower:[65535&Ye,65535&Ke]}}(m,M,u,S),{u_opacity:P}),Fm=(P,u)=>{},c_={fillExtrusion:(P,u)=>({u_lightpos:new s.bL(P,u.u_lightpos),u_lightpos_globe:new s.bL(P,u.u_lightpos_globe),u_lightintensity:new s.b8(P,u.u_lightintensity),u_lightcolor:new s.bL(P,u.u_lightcolor),u_vertical_gradient:new s.b8(P,u.u_vertical_gradient),u_opacity:new s.b8(P,u.u_opacity),u_fill_translate:new s.bM(P,u.u_fill_translate)}),fillExtrusionPattern:(P,u)=>({u_lightpos:new s.bL(P,u.u_lightpos),u_lightpos_globe:new s.bL(P,u.u_lightpos_globe),u_lightintensity:new s.b8(P,u.u_lightintensity),u_lightcolor:new s.bL(P,u.u_lightcolor),u_vertical_gradient:new s.b8(P,u.u_vertical_gradient),u_height_factor:new s.b8(P,u.u_height_factor),u_opacity:new s.b8(P,u.u_opacity),u_fill_translate:new s.bM(P,u.u_fill_translate),u_image:new s.bH(P,u.u_image),u_texsize:new s.bM(P,u.u_texsize),u_pixel_coord_upper:new s.bM(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(P,u.u_pixel_coord_lower),u_scale:new s.bL(P,u.u_scale),u_fade:new s.b8(P,u.u_fade)}),fill:(P,u)=>({u_fill_translate:new s.bM(P,u.u_fill_translate)}),fillPattern:(P,u)=>({u_image:new s.bH(P,u.u_image),u_texsize:new s.bM(P,u.u_texsize),u_pixel_coord_upper:new s.bM(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(P,u.u_pixel_coord_lower),u_scale:new s.bL(P,u.u_scale),u_fade:new s.b8(P,u.u_fade),u_fill_translate:new s.bM(P,u.u_fill_translate)}),fillOutline:(P,u)=>({u_world:new s.bM(P,u.u_world),u_fill_translate:new s.bM(P,u.u_fill_translate)}),fillOutlinePattern:(P,u)=>({u_world:new s.bM(P,u.u_world),u_image:new s.bH(P,u.u_image),u_texsize:new s.bM(P,u.u_texsize),u_pixel_coord_upper:new s.bM(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(P,u.u_pixel_coord_lower),u_scale:new s.bL(P,u.u_scale),u_fade:new s.b8(P,u.u_fade),u_fill_translate:new s.bM(P,u.u_fill_translate)}),circle:(P,u)=>({u_camera_to_center_distance:new s.b8(P,u.u_camera_to_center_distance),u_scale_with_map:new s.bH(P,u.u_scale_with_map),u_pitch_with_map:new s.bH(P,u.u_pitch_with_map),u_extrude_scale:new s.bM(P,u.u_extrude_scale),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(P,u.u_globe_extrude_scale),u_translate:new s.bM(P,u.u_translate)}),collisionBox:(P,u)=>({u_pixel_extrude_scale:new s.bM(P,u.u_pixel_extrude_scale)}),collisionCircle:(P,u)=>({u_viewport_size:new s.bM(P,u.u_viewport_size)}),debug:(P,u)=>({u_color:new s.bI(P,u.u_color),u_overlay:new s.bH(P,u.u_overlay),u_overlay_scale:new s.b8(P,u.u_overlay_scale)}),depth:Fm,clippingMask:Fm,heatmap:(P,u)=>({u_extrude_scale:new s.b8(P,u.u_extrude_scale),u_intensity:new s.b8(P,u.u_intensity),u_globe_extrude_scale:new s.b8(P,u.u_globe_extrude_scale)}),heatmapTexture:(P,u)=>({u_matrix:new s.bJ(P,u.u_matrix),u_world:new s.bM(P,u.u_world),u_image:new s.bH(P,u.u_image),u_color_ramp:new s.bH(P,u.u_color_ramp),u_opacity:new s.b8(P,u.u_opacity)}),hillshade:(P,u)=>({u_image:new s.bH(P,u.u_image),u_latrange:new s.bM(P,u.u_latrange),u_light:new s.bM(P,u.u_light),u_shadow:new s.bI(P,u.u_shadow),u_highlight:new s.bI(P,u.u_highlight),u_accent:new s.bI(P,u.u_accent)}),hillshadePrepare:(P,u)=>({u_matrix:new s.bJ(P,u.u_matrix),u_image:new s.bH(P,u.u_image),u_dimension:new s.bM(P,u.u_dimension),u_zoom:new s.b8(P,u.u_zoom),u_unpack:new s.bK(P,u.u_unpack)}),line:(P,u)=>({u_translation:new s.bM(P,u.u_translation),u_ratio:new s.b8(P,u.u_ratio),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_units_to_pixels:new s.bM(P,u.u_units_to_pixels)}),lineGradient:(P,u)=>({u_translation:new s.bM(P,u.u_translation),u_ratio:new s.b8(P,u.u_ratio),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_units_to_pixels:new s.bM(P,u.u_units_to_pixels),u_image:new s.bH(P,u.u_image),u_image_height:new s.b8(P,u.u_image_height)}),linePattern:(P,u)=>({u_translation:new s.bM(P,u.u_translation),u_texsize:new s.bM(P,u.u_texsize),u_ratio:new s.b8(P,u.u_ratio),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_image:new s.bH(P,u.u_image),u_units_to_pixels:new s.bM(P,u.u_units_to_pixels),u_scale:new s.bL(P,u.u_scale),u_fade:new s.b8(P,u.u_fade)}),lineSDF:(P,u)=>({u_translation:new s.bM(P,u.u_translation),u_ratio:new s.b8(P,u.u_ratio),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_units_to_pixels:new s.bM(P,u.u_units_to_pixels),u_patternscale_a:new s.bM(P,u.u_patternscale_a),u_patternscale_b:new s.bM(P,u.u_patternscale_b),u_sdfgamma:new s.b8(P,u.u_sdfgamma),u_image:new s.bH(P,u.u_image),u_tex_y_a:new s.b8(P,u.u_tex_y_a),u_tex_y_b:new s.b8(P,u.u_tex_y_b),u_mix:new s.b8(P,u.u_mix)}),raster:(P,u)=>({u_tl_parent:new s.bM(P,u.u_tl_parent),u_scale_parent:new s.b8(P,u.u_scale_parent),u_buffer_scale:new s.b8(P,u.u_buffer_scale),u_fade_t:new s.b8(P,u.u_fade_t),u_opacity:new s.b8(P,u.u_opacity),u_image0:new s.bH(P,u.u_image0),u_image1:new s.bH(P,u.u_image1),u_brightness_low:new s.b8(P,u.u_brightness_low),u_brightness_high:new s.b8(P,u.u_brightness_high),u_saturation_factor:new s.b8(P,u.u_saturation_factor),u_contrast_factor:new s.b8(P,u.u_contrast_factor),u_spin_weights:new s.bL(P,u.u_spin_weights),u_coords_top:new s.bK(P,u.u_coords_top),u_coords_bottom:new s.bK(P,u.u_coords_bottom)}),symbolIcon:(P,u)=>({u_is_size_zoom_constant:new s.bH(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(P,u.u_is_size_feature_constant),u_size_t:new s.b8(P,u.u_size_t),u_size:new s.b8(P,u.u_size),u_camera_to_center_distance:new s.b8(P,u.u_camera_to_center_distance),u_pitch:new s.b8(P,u.u_pitch),u_rotate_symbol:new s.bH(P,u.u_rotate_symbol),u_aspect_ratio:new s.b8(P,u.u_aspect_ratio),u_fade_change:new s.b8(P,u.u_fade_change),u_label_plane_matrix:new s.bJ(P,u.u_label_plane_matrix),u_coord_matrix:new s.bJ(P,u.u_coord_matrix),u_is_text:new s.bH(P,u.u_is_text),u_pitch_with_map:new s.bH(P,u.u_pitch_with_map),u_is_along_line:new s.bH(P,u.u_is_along_line),u_is_variable_anchor:new s.bH(P,u.u_is_variable_anchor),u_texsize:new s.bM(P,u.u_texsize),u_texture:new s.bH(P,u.u_texture),u_translation:new s.bM(P,u.u_translation),u_pitched_scale:new s.b8(P,u.u_pitched_scale)}),symbolSDF:(P,u)=>({u_is_size_zoom_constant:new s.bH(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(P,u.u_is_size_feature_constant),u_size_t:new s.b8(P,u.u_size_t),u_size:new s.b8(P,u.u_size),u_camera_to_center_distance:new s.b8(P,u.u_camera_to_center_distance),u_pitch:new s.b8(P,u.u_pitch),u_rotate_symbol:new s.bH(P,u.u_rotate_symbol),u_aspect_ratio:new s.b8(P,u.u_aspect_ratio),u_fade_change:new s.b8(P,u.u_fade_change),u_label_plane_matrix:new s.bJ(P,u.u_label_plane_matrix),u_coord_matrix:new s.bJ(P,u.u_coord_matrix),u_is_text:new s.bH(P,u.u_is_text),u_pitch_with_map:new s.bH(P,u.u_pitch_with_map),u_is_along_line:new s.bH(P,u.u_is_along_line),u_is_variable_anchor:new s.bH(P,u.u_is_variable_anchor),u_texsize:new s.bM(P,u.u_texsize),u_texture:new s.bH(P,u.u_texture),u_gamma_scale:new s.b8(P,u.u_gamma_scale),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_is_halo:new s.bH(P,u.u_is_halo),u_translation:new s.bM(P,u.u_translation),u_pitched_scale:new s.b8(P,u.u_pitched_scale)}),symbolTextAndIcon:(P,u)=>({u_is_size_zoom_constant:new s.bH(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(P,u.u_is_size_feature_constant),u_size_t:new s.b8(P,u.u_size_t),u_size:new s.b8(P,u.u_size),u_camera_to_center_distance:new s.b8(P,u.u_camera_to_center_distance),u_pitch:new s.b8(P,u.u_pitch),u_rotate_symbol:new s.bH(P,u.u_rotate_symbol),u_aspect_ratio:new s.b8(P,u.u_aspect_ratio),u_fade_change:new s.b8(P,u.u_fade_change),u_label_plane_matrix:new s.bJ(P,u.u_label_plane_matrix),u_coord_matrix:new s.bJ(P,u.u_coord_matrix),u_is_text:new s.bH(P,u.u_is_text),u_pitch_with_map:new s.bH(P,u.u_pitch_with_map),u_is_along_line:new s.bH(P,u.u_is_along_line),u_is_variable_anchor:new s.bH(P,u.u_is_variable_anchor),u_texsize:new s.bM(P,u.u_texsize),u_texsize_icon:new s.bM(P,u.u_texsize_icon),u_texture:new s.bH(P,u.u_texture),u_texture_icon:new s.bH(P,u.u_texture_icon),u_gamma_scale:new s.b8(P,u.u_gamma_scale),u_device_pixel_ratio:new s.b8(P,u.u_device_pixel_ratio),u_is_halo:new s.bH(P,u.u_is_halo),u_translation:new s.bM(P,u.u_translation),u_pitched_scale:new s.b8(P,u.u_pitched_scale)}),background:(P,u)=>({u_opacity:new s.b8(P,u.u_opacity),u_color:new s.bI(P,u.u_color)}),backgroundPattern:(P,u)=>({u_opacity:new s.b8(P,u.u_opacity),u_image:new s.bH(P,u.u_image),u_pattern_tl_a:new s.bM(P,u.u_pattern_tl_a),u_pattern_br_a:new s.bM(P,u.u_pattern_br_a),u_pattern_tl_b:new s.bM(P,u.u_pattern_tl_b),u_pattern_br_b:new s.bM(P,u.u_pattern_br_b),u_texsize:new s.bM(P,u.u_texsize),u_mix:new s.b8(P,u.u_mix),u_pattern_size_a:new s.bM(P,u.u_pattern_size_a),u_pattern_size_b:new s.bM(P,u.u_pattern_size_b),u_scale_a:new s.b8(P,u.u_scale_a),u_scale_b:new s.b8(P,u.u_scale_b),u_pixel_coord_upper:new s.bM(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(P,u.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(P,u.u_tile_units_to_pixels)}),terrain:(P,u)=>({u_texture:new s.bH(P,u.u_texture),u_ele_delta:new s.b8(P,u.u_ele_delta),u_fog_matrix:new s.bJ(P,u.u_fog_matrix),u_fog_color:new s.bI(P,u.u_fog_color),u_fog_ground_blend:new s.b8(P,u.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(P,u.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(P,u.u_horizon_color),u_horizon_fog_blend:new s.b8(P,u.u_horizon_fog_blend),u_is_globe_mode:new s.b8(P,u.u_is_globe_mode)}),terrainDepth:(P,u)=>({u_ele_delta:new s.b8(P,u.u_ele_delta)}),terrainCoords:(P,u)=>({u_texture:new s.bH(P,u.u_texture),u_terrain_coords_id:new s.b8(P,u.u_terrain_coords_id),u_ele_delta:new s.b8(P,u.u_ele_delta)}),projectionErrorMeasurement:(P,u)=>({u_input:new s.b8(P,u.u_input),u_output_expected:new s.b8(P,u.u_output_expected)}),atmosphere:(P,u)=>({u_sun_pos:new s.bL(P,u.u_sun_pos),u_atmosphere_blend:new s.b8(P,u.u_atmosphere_blend),u_globe_position:new s.bL(P,u.u_globe_position),u_globe_radius:new s.b8(P,u.u_globe_radius),u_inv_proj_matrix:new s.bJ(P,u.u_inv_proj_matrix)}),sky:(P,u)=>({u_sky_color:new s.bI(P,u.u_sky_color),u_horizon_color:new s.bI(P,u.u_horizon_color),u_horizon:new s.bM(P,u.u_horizon),u_horizon_normal:new s.bM(P,u.u_horizon_normal),u_sky_horizon_blend:new s.b8(P,u.u_sky_horizon_blend),u_sky_blend:new s.b8(P,u.u_sky_blend)})};class d_{constructor(u,m,S){this.context=u;const M=u.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!S,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qx={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class h_{constructor(u,m,S,M){this.length=m.length,this.attributes=S,this.itemSize=m.bytesPerElement,this.dynamicDraw=M,this.context=u;const D=u.gl;this.buffer=D.createBuffer(),u.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let S=0;S<this.attributes.length;S++){const M=m.attributes[this.attributes[S].name];M!==void 0&&u.enableVertexAttribArray(M)}}setVertexAttribPointers(u,m,S){for(let M=0;M<this.attributes.length;M++){const D=this.attributes[M],F=m.attributes[D.name];F!==void 0&&u.vertexAttribPointer(F,D.components,u[qx[D.type]],!1,this.itemSize,D.offset+this.itemSize*(S||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class f_ extends Zr{getDefault(){return s.b7.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class IE extends Zr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class LE extends Zr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class DE extends Zr{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class RE extends Zr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Zx extends Zr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class OE extends Zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Yx extends Zr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Nm extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class $m extends Zr{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Vm extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class p_ extends Zr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class gd extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class bh extends Zr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Es extends Zr{getDefault(){return s.b7.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Xx extends Zr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Jx extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class v_ extends Zr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class yd extends Zr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Hm extends Zr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class jm extends Zr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class hp extends Zr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Um extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Qx extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class wh extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class xh extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class eS extends Zr{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class m_ extends Zr{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const S=this.gl;Qs(S)?S.bindVertexArray(u):(m=S.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class ri extends Zr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Wm extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class zE extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Gm extends Zr{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class fp extends Gm{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class BE extends Gm{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class FE extends Gm{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}const g_="Framebuffer is not complete";class NE{constructor(u,m,S,M,D){this.context=u,this.width=m,this.height=S;const F=u.gl,G=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new fp(u,G),M)this.depthAttachment=D?new FE(u,G):new BE(u,G);else if(D)throw new Error("Stencil cannot be set without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error(g_)}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const S=this.depthAttachment.get();S&&u.deleteRenderbuffer(S)}u.deleteFramebuffer(this.framebuffer)}}class y_{constructor(u){var m,S;if(this.gl=u,this.clearColor=new f_(this),this.clearDepth=new IE(this),this.clearStencil=new LE(this),this.colorMask=new DE(this),this.depthMask=new RE(this),this.stencilMask=new Zx(this),this.stencilFunc=new OE(this),this.stencilOp=new Yx(this),this.stencilTest=new Nm(this),this.depthRange=new $m(this),this.depthTest=new Vm(this),this.depthFunc=new p_(this),this.blend=new gd(this),this.blendFunc=new bh(this),this.blendColor=new Es(this),this.blendEquation=new Xx(this),this.cullFace=new Jx(this),this.cullFaceSide=new v_(this),this.frontFace=new yd(this),this.program=new Hm(this),this.activeTexture=new jm(this),this.viewport=new hp(this),this.bindFramebuffer=new Um(this),this.bindRenderbuffer=new Qx(this),this.bindTexture=new wh(this),this.bindVertexBuffer=new xh(this),this.bindElementBuffer=new eS(this),this.bindVertexArray=new m_(this),this.pixelStoreUnpack=new ri(this),this.pixelStoreUnpackPremultiplyAlpha=new Wm(this),this.pixelStoreUnpackFlipY=new zE(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Qs(u)){this.HALF_FLOAT=u.HALF_FLOAT;const M=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(S=u.RGB16F)!==null&&S!==void 0?S:M==null?void 0:M.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const M=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new d_(this,u,m)}createVertexBuffer(u,m,S){return new h_(this,u,m,S)}createRenderbuffer(u,m,S){const M=this.gl,D=M.createRenderbuffer();return this.bindRenderbuffer.set(D),M.renderbufferStorage(M.RENDERBUFFER,u,m,S),this.bindRenderbuffer.set(null),D}createFramebuffer(u,m,S,M){return new NE(this,u,m,S,M)}clear({color:u,depth:m,stencil:S}){const M=this.gl;let D=0;u&&(D|=M.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(D|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),S!==void 0&&(D|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(S),this.stencilMask.set(255)),M.clear(D)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){s.bE(u.blendFunction,vi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Qs(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return Qs(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}let _d;function pp(P,u,m,S,M){const D=P.context,F=P.transform,G=D.gl,Z=P.useProgram("collisionBox"),ne=[];let he=0,ye=0;for(let tt=0;tt<S.length;tt++){const at=S[tt],ht=u.getTile(at).getBucket(m);if(!ht)continue;const vt=M?ht.textCollisionBox:ht.iconCollisionBox,gt=ht.collisionCircleArray;gt.length>0&&(ne.push({circleArray:gt,circleOffset:ye,coord:at}),he+=gt.length/4,ye=he),vt&&Z.draw(D,G.LINES,kr.disabled,Qr.disabled,P.colorModeForRenderPass(),ni.disabled,$x(P.transform),P.style.map.terrain&&P.style.map.terrain.getTerrainData(at),F.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),m.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,null,P.transform.zoom,null,null,vt.collisionVertexBuffer)}if(!M||!ne.length)return;const _e=P.useProgram("collisionCircle"),Ie=new s.bR;Ie.resize(4*he),Ie._trim();let De=0;for(const tt of ne)for(let at=0;at<tt.circleArray.length/4;at++){const ht=4*at,vt=tt.circleArray[ht+0],gt=tt.circleArray[ht+1],Tt=tt.circleArray[ht+2],bt=tt.circleArray[ht+3];Ie.emplace(De++,vt,gt,Tt,bt,0),Ie.emplace(De++,vt,gt,Tt,bt,1),Ie.emplace(De++,vt,gt,Tt,bt,2),Ie.emplace(De++,vt,gt,Tt,bt,3)}(!_d||_d.length<2*he)&&(_d=function(tt){const at=2*tt,ht=new s.bT;ht.resize(at),ht._trim();for(let vt=0;vt<at;vt++){const gt=6*vt;ht.uint16[gt+0]=4*vt+0,ht.uint16[gt+1]=4*vt+1,ht.uint16[gt+2]=4*vt+2,ht.uint16[gt+3]=4*vt+2,ht.uint16[gt+4]=4*vt+3,ht.uint16[gt+5]=4*vt+0}return ht}(he));const Ye=D.createIndexBuffer(_d,!0),Ke=D.createVertexBuffer(Ie,s.bS.members,!0);for(const tt of ne){const at=a_(P.transform);_e.draw(D,G.TRIANGLES,kr.disabled,Qr.disabled,P.colorModeForRenderPass(),ni.disabled,at,P.style.map.terrain&&P.style.map.terrain.getTerrainData(tt.coord),null,m.id,Ke,Ye,s.aJ.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,P.transform.zoom,null,null,null)}Ke.destroy(),Ye.destroy()}const __=s.ad(new Float32Array(16));function b_(P,u,m,S,M,D){const{horizontalAlign:F,verticalAlign:G}=s.aE(P);return new s.P((-(F-.5)*u/M+S[0])*D,(-(G-.5)*m/M+S[1])*D)}function tS(P,u,m,S,M,D){const F=u.tileAnchorPoint.add(new s.P(u.translation[0],u.translation[1]));if(u.pitchWithMap){let G=S.mult(D);m||(G=G.rotate(-M));const Z=F.add(G);return rr(Z.x,Z.y,u.pitchedLabelPlaneMatrix,u.getElevation).point}if(m){const G=qr(u.tileAnchorPoint.x+1,u.tileAnchorPoint.y,u).point.sub(P),Z=Math.atan(G.y/G.x)+(G.x<0?Math.PI:0);return P.add(S.rotate(Z))}return P.add(S)}function Km(P,u,m,S,M,D,F,G,Z,ne,he,ye){const _e=P.text.placedSymbolArray,Ie=P.text.dynamicLayoutVertexArray,De=P.icon.dynamicLayoutVertexArray,Ye={};Ie.clear();for(let Ke=0;Ke<_e.length;Ke++){const tt=_e.get(Ke),at=tt.hidden||!tt.crossTileID||P.allowVerticalPlacement&&!tt.placedOrientation?null:S[tt.crossTileID];if(at){const ht=new s.P(tt.anchorX,tt.anchorY),vt={getElevation:ye,width:M.width,height:M.height,pitchedLabelPlaneMatrix:D,pitchWithMap:m,transform:M,tileAnchorPoint:ht,translation:ne,unwrappedTileID:he},gt=m?$e(ht.x,ht.y,vt):qr(ht.x,ht.y,vt),Tt=zr(M.cameraToCenterDistance,gt.signedDistanceFromCamera);let bt=s.am(P.textSizeData,G,tt)*Tt/s.ay;m&&(bt*=P.tilePixelRatio/F);const{width:Nt,height:Ut,anchor:nn,textOffset:an,textBoxScale:tn}=at,An=b_(nn,Nt,Ut,an,tn,bt),Sn=M.getPitchedTextCorrection(ht.x+ne[0],ht.y+ne[1],he),pn=tS(gt.point,vt,u,An,-M.bearingInRadians,Sn),qn=P.allowVerticalPlacement&&tt.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Pr=0;Pr<tt.numGlyphs;Pr++)s.as(Ie,pn,qn);Z&&tt.associatedIconIndex>=0&&(Ye[tt.associatedIconIndex]={shiftedAnchor:pn,angle:qn})}else Pt(tt.numGlyphs,Ie)}if(Z){De.clear();const Ke=P.icon.placedSymbolArray;for(let tt=0;tt<Ke.length;tt++){const at=Ke.get(tt);if(at.hidden)Pt(at.numGlyphs,De);else{const ht=Ye[tt];if(ht)for(let vt=0;vt<at.numGlyphs;vt++)s.as(De,ht.shiftedAnchor,ht.angle);else Pt(at.numGlyphs,De)}}P.icon.dynamicLayoutVertexBuffer.updateData(De)}P.text.dynamicLayoutVertexBuffer.updateData(Ie)}function qm(P,u,m){return m.iconsInText&&u?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Zm(P,u,m,S,M,D,F,G,Z,ne,he,ye,_e){const Ie=P.context,De=Ie.gl,Ye=P.transform,Ke=G==="map",tt=Z==="map",at=G!=="viewport"&&m.layout.get("symbol-placement")!=="point",ht=Ke&&!tt&&!at,vt=!m.layout.get("symbol-sort-key").isConstant();let gt=!1;const Tt=P.getDepthModeForSublayer(0,kr.ReadOnly),bt=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Nt=[],Ut=Ye.getCircleRadiusCorrection();for(const nn of S){const an=u.getTile(nn),tn=an.getBucket(m);if(!tn)continue;const An=M?tn.text:tn.icon;if(!An||!An.segments.get().length||!An.hasVisibleVertices)continue;const Sn=An.programConfigurations.get(m.id),pn=M||tn.sdfIcons,qn=M?tn.textSizeData:tn.iconSizeData,Pr=tt||Ye.pitch!==0,br=P.useProgram(qm(pn,M,tn),Sn),qi=s.ak(qn,Ye.zoom),wi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(nn);let Zi,Ni,Si,mi,Va=[0,0],Aa=null;if(M)Ni=an.glyphAtlasTexture,Si=De.LINEAR,Zi=an.glyphAtlasTexture.size,tn.iconsInText&&(Va=an.imageAtlasTexture.size,Aa=an.imageAtlasTexture,mi=Pr||P.options.rotating||P.options.zooming||qn.kind==="composite"||qn.kind==="camera"?De.LINEAR:De.NEAREST);else{const Ji=m.layout.get("icon-size").constantOr(0)!==1||tn.iconsNeedLinear;Ni=an.imageAtlasTexture,Si=pn||P.options.rotating||P.options.zooming||Ji||Pr?De.LINEAR:De.NEAREST,Zi=an.imageAtlasTexture.size}const Ya=s.az(an,1,P.transform.zoom),uo=Xn(Ke,P.transform,Ya),Ml=s.K();s.an(Ml,uo);const gc=mr(tt,Ke,P.transform,Ya),mu=s.aA(Ye,an,D,F),gu=Ye.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!_e,applyTerrainMatrix:!0}),kl=bt&&tn.hasTextData(),Td=m.layout.get("icon-text-fit")!=="none"&&kl&&tn.hasIconData();if(at){const Ji=P.style.map.terrain?(ga,Yi)=>P.style.map.terrain.getElevation(nn,ga,Yi):null,$i=m.layout.get("text-rotation-alignment")==="map";Br(tn,P,M,uo,Ml,tt,ne,$i,nn.toUnwrapped(),Ye.width,Ye.height,mu,Ji)}const Md=M&&bt||Td,ns=at||Md?__:tt?uo:P.transform.clipSpaceToPixelsMatrix,yc=pn&&m.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yu;yu=pn?tn.iconsInText?Kx(qn.kind,qi,ht,tt,at,Md,P,ns,gc,mu,Zi,Va,Ut):zm(qn.kind,qi,ht,tt,at,Md,P,ns,gc,mu,M,Zi,0,Ut):u_(qn.kind,qi,ht,tt,at,Md,P,ns,gc,mu,M,Zi,Ut);const _u={program:br,buffers:An,uniformValues:yu,projectionData:gu,atlasTexture:Ni,atlasTextureIcon:Aa,atlasInterpolation:Si,atlasInterpolationIcon:mi,isSDF:pn,hasHalo:yc};if(vt&&tn.canOverlap){gt=!0;const Ji=An.segments.get();for(const $i of Ji)Nt.push({segments:new s.aJ([$i]),sortKey:$i.sortKey,state:_u,terrainData:wi})}else Nt.push({segments:An.segments,sortKey:0,state:_u,terrainData:wi})}gt&&Nt.sort((nn,an)=>nn.sortKey-an.sortKey);for(const nn of Nt){const an=nn.state;if(Ie.activeTexture.set(De.TEXTURE0),an.atlasTexture.bind(an.atlasInterpolation,De.CLAMP_TO_EDGE),an.atlasTextureIcon&&(Ie.activeTexture.set(De.TEXTURE1),an.atlasTextureIcon&&an.atlasTextureIcon.bind(an.atlasInterpolationIcon,De.CLAMP_TO_EDGE)),an.isSDF){const tn=an.uniformValues;an.hasHalo&&(tn.u_is_halo=1,nS(an.buffers,nn.segments,m,P,an.program,Tt,he,ye,tn,an.projectionData,nn.terrainData)),tn.u_is_halo=0}nS(an.buffers,nn.segments,m,P,an.program,Tt,he,ye,an.uniformValues,an.projectionData,nn.terrainData)}}function nS(P,u,m,S,M,D,F,G,Z,ne,he){const ye=S.context;M.draw(ye,ye.gl.TRIANGLES,D,F,G,ni.backCCW,Z,he,ne,m.id,P.layoutVertexBuffer,P.indexBuffer,u,m.paint,S.transform.zoom,P.programConfigurations.get(m.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function w_(P,u,m,S,M){const D=P.context,F=D.gl,G=Qr.disabled,Z=new vi([F.ONE,F.ONE],s.b7.transparent,[!0,!0,!0,!0]),ne=u.getBucket(m);if(!ne)return;const he=S.key;let ye=m.heatmapFbos.get(he);ye||(ye=x_(D,u.tileSize,u.tileSize),m.heatmapFbos.set(he,ye)),D.bindFramebuffer.set(ye.framebuffer),D.viewport.set([0,0,u.tileSize,u.tileSize]),D.clear({color:s.b7.transparent});const _e=ne.programConfigurations.get(m.id),Ie=P.useProgram("heatmap",_e,!M),De=P.transform.getProjectionData({overscaledTileID:u.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ye=P.style.map.terrain.getTerrainData(S);Ie.draw(D,F.TRIANGLES,kr.disabled,G,Z,ni.disabled,s_(u,P.transform.zoom,m.paint.get("heatmap-intensity"),1),Ye,De,m.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,m.paint,P.transform.zoom,_e)}function $E(P,u,m,S,M){const D=P.context,F=D.gl,G=P.transform;D.setColorMode(P.colorModeForRenderPass());const Z=vp(D,u),ne=m.key,he=u.heatmapFbos.get(ne);if(!he)return;D.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,he.colorAttachment.get()),D.activeTexture.set(F.TEXTURE1),Z.bind(F.LINEAR,F.CLAMP_TO_EDGE);const ye=G.getProjectionData({overscaledTileID:m,applyTerrainMatrix:M,applyGlobeMatrix:!S});P.useProgram("heatmapTexture").draw(D,F.TRIANGLES,kr.disabled,Qr.disabled,P.colorModeForRenderPass(),ni.disabled,l_(P,u,0,1),null,ye,u.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments,u.paint,G.zoom),he.destroy(),u.heatmapFbos.delete(ne)}function x_(P,u,m){var S,M;const D=P.gl,F=D.createTexture();D.bindTexture(D.TEXTURE_2D,F),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.LINEAR),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.LINEAR);const G=(S=P.HALF_FLOAT)!==null&&S!==void 0?S:D.UNSIGNED_BYTE,Z=(M=P.RGBA16F)!==null&&M!==void 0?M:D.RGBA;D.texImage2D(D.TEXTURE_2D,0,Z,u,m,0,D.RGBA,G,null);const ne=P.createFramebuffer(u,m,!1,!1);return ne.colorAttachment.set(F),ne}function vp(P,u){return u.colorRampTexture||(u.colorRampTexture=new H(P,u.colorRamp,P.gl.RGBA)),u.colorRampTexture}function Ym(P,u,m,S,M){if(!m||!S||!S.imageAtlas)return;const D=S.imageAtlas.patternPositions;let F=D[m.to.toString()],G=D[m.from.toString()];if(!F&&G&&(F=G),!G&&F&&(G=F),!F||!G){const Z=M.getPaintProperty(u);F=D[Z],G=D[Z]}F&&G&&P.setConstantPatternPositions(F,G)}function S_(P,u,m,S,M,D,F,G){const Z=P.context.gl,ne="fill-pattern",he=m.paint.get(ne),ye=he&&he.constantOr(1),_e=m.getCrossfadeParameters();let Ie,De,Ye,Ke,tt;const at=P.transform,ht=m.paint.get("fill-translate"),vt=m.paint.get("fill-translate-anchor");F?(De=ye&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ie=Z.LINES):(De=ye?"fillPattern":"fill",Ie=Z.TRIANGLES);const gt=he.constantOr(null);for(const Tt of S){const bt=u.getTile(Tt);if(ye&&!bt.patternsLoaded())continue;const Nt=bt.getBucket(m);if(!Nt)continue;const Ut=Nt.programConfigurations.get(m.id),nn=P.useProgram(De,Ut),an=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Tt);ye&&(P.context.activeTexture.set(Z.TEXTURE0),bt.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ut.updatePaintBuffers(_e)),Ym(Ut,ne,gt,bt,m);const tn=at.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),An=s.aA(at,bt,ht,vt);if(F){Ke=Nt.indexBuffer2,tt=Nt.segments2;const pn=[Z.drawingBufferWidth,Z.drawingBufferHeight];Ye=De==="fillOutlinePattern"&&ye?Nx(P,_e,bt,pn,An):EE(pn,An)}else Ke=Nt.indexBuffer,tt=Nt.segments,Ye=ye?vd(P,_e,bt,An):{u_fill_translate:An};let Sn;if(P.renderPass==="translucent"&&G){const[pn]=P.getStencilConfigForOverlapAndUpdateStencilID(S);Sn=pn[Tt.overscaledZ]}else Sn=P.stencilModeForClipping(Tt);nn.draw(P.context,Ie,M,Sn,D,ni.backCCW,Ye,an,tn,m.id,Nt.layoutVertexBuffer,Ke,tt,m.paint,P.transform.zoom,Ut)}}function Xm(P,u,m,S,M,D,F,G){const Z=P.context,ne=Z.gl,he="fill-extrusion-pattern",ye=m.paint.get(he),_e=ye.constantOr(1),Ie=m.getCrossfadeParameters(),De=m.paint.get("fill-extrusion-opacity"),Ye=ye.constantOr(null),Ke=P.transform;for(const tt of S){const at=u.getTile(tt),ht=at.getBucket(m);if(!ht)continue;const vt=P.style.map.terrain&&P.style.map.terrain.getTerrainData(tt),gt=ht.programConfigurations.get(m.id),Tt=P.useProgram(_e?"fillExtrusionPattern":"fillExtrusion",gt);_e&&(P.context.activeTexture.set(ne.TEXTURE0),at.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),gt.updatePaintBuffers(Ie));const bt=Ke.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!G,applyTerrainMatrix:!0});Ym(gt,he,Ye,at,m);const Nt=s.aA(Ke,at,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Ut=m.paint.get("fill-extrusion-vertical-gradient"),nn=_e?kE(P,Ut,De,Nt,tt,Ie,at):cp(P,Ut,De,Nt);Tt.draw(Z,Z.gl.TRIANGLES,M,D,F,ni.backCCW,nn,vt,bt,m.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,m.paint,P.transform.zoom,gt,P.style.map.terrain&&ht.centroidVertexBuffer)}}function Sh(P,u,m,S,M,D,F,G,Z){var ne;const he=P.style.projection,ye=P.context,_e=P.transform,Ie=ye.gl,De=P.useProgram("hillshade"),Ye=!P.options.moving;for(const Ke of S){const tt=u.getTile(Ke),at=tt.fbo;if(!at)continue;const ht=he.getMeshFromTileID(ye,Ke.canonical,G,!0,"raster"),vt=(ne=P.style.map.terrain)===null||ne===void 0?void 0:ne.getTerrainData(Ke);ye.activeTexture.set(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_2D,at.colorAttachment.get());const gt=_e.getProjectionData({overscaledTileID:Ke,aligned:Ye,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});De.draw(ye,Ie.TRIANGLES,D,M[Ke.overscaledZ],F,ni.backCCW,Vx(P,tt,m),vt,gt,m.id,ht.vertexBuffer,ht.indexBuffer,ht.segments)}}const mp=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function Jm(P,u,m,S,M,D,F,G,Z=!1,ne=!1){const he=S[S.length-1].overscaledZ,ye=P.context,_e=ye.gl,Ie=P.useProgram("raster"),De=P.transform,Ye=P.style.projection,Ke=P.colorModeForRenderPass(),tt=!P.options.moving;for(const at of S){const ht=P.getDepthModeForSublayer(at.overscaledZ-he,m.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,_e.LESS),vt=u.getTile(at);vt.registerFadeDuration(m.paint.get("raster-fade-duration"));const gt=u.findLoadedParent(at,0),Tt=u.findLoadedSibling(at),bt=rS(vt,gt||Tt||null,u,m,P.transform,P.style.map.terrain);let Nt,Ut;const nn=m.paint.get("raster-resampling")==="nearest"?_e.NEAREST:_e.LINEAR;ye.activeTexture.set(_e.TEXTURE0),vt.texture.bind(nn,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(_e.TEXTURE1),gt?(gt.texture.bind(nn,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),Nt=Math.pow(2,gt.tileID.overscaledZ-vt.tileID.overscaledZ),Ut=[vt.tileID.canonical.x*Nt%1,vt.tileID.canonical.y*Nt%1]):vt.texture.bind(nn,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),vt.texture.useMipmap&&ye.extTextureFilterAnisotropic&&P.transform.pitch>20&&_e.texParameterf(_e.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax);const an=P.style.map.terrain&&P.style.map.terrain.getTerrainData(at),tn=De.getProjectionData({overscaledTileID:at,aligned:tt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),An=Wx(Ut||[0,0],Nt||1,bt,m,G),Sn=Ye.getMeshFromTileID(ye,at.canonical,D,F,"raster");Ie.draw(ye,_e.TRIANGLES,ht,M?M[at.overscaledZ]:Qr.disabled,Ke,Z?ni.frontCCW:ni.backCCW,An,an,tn,m.id,Sn.vertexBuffer,Sn.indexBuffer,Sn.segments)}}function rS(P,u,m,S,M,D){const F=S.paint.get("raster-fade-duration");if(!D&&F>0){const G=p.now(),Z=(G-P.timeAdded)/F,ne=u?(G-u.timeAdded)/F:-1,he=m.getSource(),ye=Mt(M,{tileSize:he.tileSize,roundZoom:he.roundZoom}),_e=!u||Math.abs(u.tileID.overscaledZ-ye)>Math.abs(P.tileID.overscaledZ-ye),Ie=_e&&P.refreshedUponExpiration?1:s.ae(_e?Z:1-ne,0,1);return P.refreshedUponExpiration&&Z>=1&&(P.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const ma=new s.b7(1,0,0,1),bd=new s.b7(0,1,0,1),As=new s.b7(0,0,1,1),C_=new s.b7(1,0,1,1),T_=new s.b7(0,1,1,1);function M_(P,u,m,S){pc(P,0,u+m/2,P.transform.width,m,S)}function wd(P,u,m,S){pc(P,u-m/2,0,m,P.transform.height,S)}function pc(P,u,m,S,M,D){const F=P.context,G=F.gl;G.enable(G.SCISSOR_TEST),G.scissor(u*P.pixelRatio,m*P.pixelRatio,S*P.pixelRatio,M*P.pixelRatio),F.clear({color:D}),G.disable(G.SCISSOR_TEST)}function k_(P,u,m){const S=P.context,M=S.gl,D=P.useProgram("debug"),F=kr.disabled,G=Qr.disabled,Z=P.colorModeForRenderPass(),ne="$debug",he=P.style.map.terrain&&P.style.map.terrain.getTerrainData(m);S.activeTexture.set(M.TEXTURE0);const ye=u.getTileByID(m.key).latestRawTileData,_e=Math.floor((ye&&ye.byteLength||0)/1024),Ie=u.getTile(m).tileSize,De=512/Math.min(Ie,512)*(m.overscaledZ/P.transform.zoom)*.5;let Ye=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Ye+=` => ${m.overscaledZ}`),function(tt,at){tt.initDebugOverlayCanvas();const ht=tt.debugOverlayCanvas,vt=tt.context.gl,gt=tt.debugOverlayCanvas.getContext("2d");gt.clearRect(0,0,ht.width,ht.height),gt.shadowColor="white",gt.shadowBlur=2,gt.lineWidth=1.5,gt.strokeStyle="white",gt.textBaseline="top",gt.font="bold 36px Open Sans, sans-serif",gt.fillText(at,5,5),gt.strokeText(at,5,5),tt.debugOverlayTexture.update(ht),tt.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}(P,`${Ye} ${_e}kB`);const Ke=P.transform.getProjectionData({overscaledTileID:m,applyGlobeMatrix:!0,applyTerrainMatrix:!0});D.draw(S,M.TRIANGLES,F,G,vi.alphaBlended,ni.disabled,o_(s.b7.transparent,De),null,Ke,ne,P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments),D.draw(S,M.LINE_STRIP,F,G,Z,ni.disabled,o_(s.b7.red),he,Ke,ne,P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments)}function E_(P,u,m,S){const{isRenderingGlobe:M}=S,D=P.context,F=D.gl,G=P.transform,Z=P.colorModeForRenderPass(),ne=P.getDepthModeFor3D(),he=P.useProgram("terrain");D.bindFramebuffer.set(null),D.viewport.set([0,0,P.width,P.height]);for(const ye of m){const _e=u.getTerrainMesh(ye.tileID),Ie=P.renderToTexture.getTexture(ye),De=u.getTerrainData(ye.tileID);D.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,Ie.texture);const Ye=u.getMeshFrameDelta(G.zoom),Ke=G.calculateFogMatrix(ye.tileID.toUnwrapped()),tt=ME(Ye,Ke,P.style.sky,G.pitch,M),at=G.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});he.draw(D,F.TRIANGLES,ne,Qr.disabled,Z,ni.backCCW,tt,De,at,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}}function A_(P,u){if(!u.mesh){const m=new s.aI;m.emplaceBack(-1,-1),m.emplaceBack(1,-1),m.emplaceBack(1,1),m.emplaceBack(-1,1);const S=new s.aK;S.emplaceBack(0,1,2),S.emplaceBack(0,2,3),u.mesh=new hh(P.createVertexBuffer(m,_l.members),P.createIndexBuffer(S),s.aJ.simpleSegment(0,0,m.length,S.length))}return u.mesh}class iS{constructor(u,m){this.context=new y_(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Et.maxUnderzooming+Et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new du}resize(u,m,S){if(this.width=Math.floor(u*S),this.height=Math.floor(m*S),this.pixelRatio=S,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const u=this.context,m=new s.aI;m.emplaceBack(0,0),m.emplaceBack(s.Z,0),m.emplaceBack(0,s.Z),m.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=u.createVertexBuffer(m,_l.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const S=new s.aI;S.emplaceBack(0,0),S.emplaceBack(s.Z,0),S.emplaceBack(0,s.Z),S.emplaceBack(s.Z,s.Z),this.debugBuffer=u.createVertexBuffer(S,_l.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const M=new s.bY;M.emplaceBack(0,0,0,0),M.emplaceBack(s.Z,0,s.Z,0),M.emplaceBack(0,s.Z,0,s.Z),M.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=u.createVertexBuffer(M,r_.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const D=new s.aI;D.emplaceBack(0,0),D.emplaceBack(s.Z,0),D.emplaceBack(0,s.Z),D.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=u.createVertexBuffer(D,_l.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const F=new s.aI;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(F,_l.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const G=new s.bZ;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(G);const Z=new s.aK;Z.emplaceBack(1,0,2),Z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(Z);const ne=this.context.gl;this.stencilClearMode=new Qr({func:ne.ALWAYS,mask:0},0,255,ne.ZERO,ne.ZERO,ne.ZERO),this.tileExtentMesh=new hh(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const S=s.K();s.bQ(S,0,this.width,this.height,0,0,1),s.M(S,S,[m.drawingBufferWidth,m.drawingBufferHeight,0]);const M={mainMatrix:S,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:S};this.useProgram("clippingMask",null,!0).draw(u,m.TRIANGLES,kr.disabled,this.stencilClearMode,vi.disabled,ni.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m,S){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source,this.nextStencilID+m.length>256&&this.clearStencil();const M=this.context;M.setColorMode(vi.disabled),M.setDepthMode(kr.disabled);const D={};for(const F of m)D[F.key]=this.nextStencilID++;this._renderTileMasks(D,m,S,!0),this._renderTileMasks(D,m,S,!1),this._tileClippingMaskIDs=D}_renderTileMasks(u,m,S,M){const D=this.context,F=D.gl,G=this.style.projection,Z=this.transform,ne=this.useProgram("clippingMask");for(const he of m){const ye=u[he.key],_e=this.style.map.terrain&&this.style.map.terrain.getTerrainData(he),Ie=G.getMeshFromTileID(this.context,he.canonical,M,!0,"stencil"),De=Z.getProjectionData({overscaledTileID:he,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ne.draw(D,F.TRIANGLES,kr.disabled,new Qr({func:F.ALWAYS,mask:0},ye,255,F.KEEP,F.KEEP,F.REPLACE),vi.disabled,S?ni.disabled:ni.backCCW,null,_e,De,"$clipping",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}}_renderTilesDepthBuffer(){const u=this.context,m=u.gl,S=this.style.projection,M=this.transform,D=this.useProgram("depth"),F=this.getDepthModeFor3D(),G=it(M,{tileSize:M.tileSize});for(const Z of G){const ne=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Z),he=S.getMeshFromTileID(this.context,Z.canonical,!0,!0,"raster"),ye=M.getProjectionData({overscaledTileID:Z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});D.draw(u,m.TRIANGLES,F,Qr.disabled,vi.disabled,ni.backCCW,null,ne,ye,"$clipping",he.vertexBuffer,he.indexBuffer,he.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new Qr({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new Qr({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(u){const m=this.context.gl,S=u.sort((F,G)=>G.overscaledZ-F.overscaledZ),M=S[S.length-1].overscaledZ,D=S[0].overscaledZ-M+1;if(D>1){this.currentStencilSource=void 0,this.nextStencilID+D>256&&this.clearStencil();const F={};for(let G=0;G<D;G++)F[G+M]=new Qr({func:m.GEQUAL,mask:255},G+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=D,[F,S]}return[{[M]:Qr.disabled},S]}stencilConfigForOverlapTwoPass(u){const m=this.context.gl,S=u.sort((F,G)=>G.overscaledZ-F.overscaledZ),M=S[S.length-1].overscaledZ,D=S[0].overscaledZ-M+1;if(this.clearStencil(),D>1){const F={},G={};for(let Z=0;Z<D;Z++)F[Z+M]=new Qr({func:m.GREATER,mask:255},D+1+Z,255,m.KEEP,m.KEEP,m.REPLACE),G[Z+M]=new Qr({func:m.GREATER,mask:255},1+Z,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID=2*D+1,[F,G,S]}return this.nextStencilID=3,[{[M]:new Qr({func:m.GREATER,mask:255},2,255,m.KEEP,m.KEEP,m.REPLACE)},{[M]:new Qr({func:m.GREATER,mask:255},1,255,m.KEEP,m.KEEP,m.REPLACE)},S]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new vi([u.CONSTANT_COLOR,u.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vi.unblended:vi.alphaBlended}getDepthModeForSublayer(u,m,S){if(!this.opaquePassEnabledForLayer())return kr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new kr(S||this.context.gl.LEQUAL,m,[M,M])}getDepthModeFor3D(){return new kr(this.context.gl.LEQUAL,kr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){var S,M;this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(p.now()),this.imageManager.beginFrame();const D=this.style._order,F=this.style.sourceCaches,G={},Z={},ne={},he={isRenderingToTexture:!1,isRenderingGlobe:((S=u.projection)===null||S===void 0?void 0:S.transitionState)>0};for(const _e in F){const Ie=F[_e];Ie.used&&Ie.prepare(this.context),G[_e]=Ie.getVisibleCoordinates(!1),Z[_e]=G[_e].slice().reverse(),ne[_e]=Ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let _e=0;_e<D.length;_e++)if(this.style._layers[D[_e]].is3D()){this.opaquePassCutoff=_e;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const _e of D){const Ie=this.style._layers[_e];if(!Ie.hasOffscreenPass()||Ie.isHidden(this.transform.zoom))continue;const De=Z[Ie.source];(Ie.type==="custom"||De.length)&&this.renderLayer(this,F[Ie.source],Ie,De,he)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:_e=>this.useProgram(_e)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(_e,Ie){const De=_e.context,Ye=De.gl,Ke=((Tt,bt,Nt)=>{const Ut=Math.cos(bt.rollInRadians),nn=Math.sin(bt.rollInRadians),an=Fe(bt),tn=bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Tt.properties.get("sky-color"),u_horizon_color:Tt.properties.get("horizon-color"),u_horizon:[(bt.width/2-an*nn)*Nt,(bt.height/2+an*Ut)*Nt],u_horizon_normal:[-nn,Ut],u_sky_horizon_blend:Tt.properties.get("sky-horizon-blend")*bt.height/2*Nt,u_sky_blend:tn}})(Ie,_e.style.map.transform,_e.pixelRatio),tt=new kr(Ye.LEQUAL,kr.ReadWrite,[0,1]),at=Qr.disabled,ht=_e.colorModeForRenderPass(),vt=_e.useProgram("sky"),gt=A_(De,Ie);vt.draw(De,Ye.TRIANGLES,tt,at,ht,ni.disabled,Ke,null,void 0,"sky",gt.vertexBuffer,gt.indexBuffer,gt.segments)}(this,this.style.sky),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const _e=this.style._layers[D[this.currentLayer]],Ie=F[_e.source],De=G[_e.source];this._renderTileClippingMasks(_e,De,!1),this.renderLayer(this,Ie,_e,De,he)}this.renderPass="translucent";let ye=!1;for(this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const _e=this.style._layers[D[this.currentLayer]],Ie=F[_e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(_e,he))continue;this.opaquePassEnabledForLayer()||ye||(ye=!0,he.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const De=(_e.type==="symbol"?ne:Z)[_e.source];this._renderTileClippingMasks(_e,G[_e.source],!1),this.renderLayer(this,Ie,_e,De,he)}if(he.isRenderingGlobe&&function(_e,Ie,De){const Ye=_e.context,Ke=Ye.gl,tt=_e.useProgram("atmosphere"),at=new kr(Ke.LEQUAL,kr.ReadOnly,[0,1]),ht=_e.transform,vt=function(tn,An){const Sn=tn.properties.get("position"),pn=[-Sn.x,-Sn.y,-Sn.z],qn=s.ad(new Float64Array(16));return tn.properties.get("anchor")==="map"&&(s.a_(qn,qn,An.rollInRadians),s.a$(qn,qn,-An.pitchInRadians),s.a_(qn,qn,An.bearingInRadians),s.a$(qn,qn,An.center.lat*Math.PI/180),s.bp(qn,qn,-An.center.lng*Math.PI/180)),s.bX(pn,pn,qn),pn}(De,_e.transform),gt=ht.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Tt=Ie.properties.get("atmosphere-blend")*gt.projectionTransition;if(Tt===0)return;const bt=Em(ht.worldSize,ht.center.lat),Nt=ht.inverseProjectionMatrix,Ut=new Float64Array(4);Ut[3]=1,s.at(Ut,Ut,ht.modelViewProjectionMatrix),Ut[0]/=Ut[3],Ut[1]/=Ut[3],Ut[2]/=Ut[3],Ut[3]=1,s.at(Ut,Ut,Nt),Ut[0]/=Ut[3],Ut[1]/=Ut[3],Ut[2]/=Ut[3],Ut[3]=1;const nn=((tn,An,Sn,pn,qn)=>({u_sun_pos:tn,u_atmosphere_blend:An,u_globe_position:Sn,u_globe_radius:pn,u_inv_proj_matrix:qn}))(vt,Tt,[Ut[0],Ut[1],Ut[2]],bt,Nt),an=A_(Ye,Ie);tt.draw(Ye,Ke.TRIANGLES,at,Qr.disabled,vi.alphaBlended,ni.disabled,nn,null,null,"atmosphere",an.vertexBuffer,an.indexBuffer,an.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const _e=function(Ie,De){let Ye=null;const Ke=Object.values(Ie._layers).flatMap(vt=>vt.source&&!vt.isHidden(De)?[Ie.sourceCaches[vt.source]]:[]),tt=Ke.filter(vt=>vt.getSource().type==="vector"),at=Ke.filter(vt=>vt.getSource().type!=="vector"),ht=vt=>{(!Ye||Ye.getSource().maxzoom<vt.getSource().maxzoom)&&(Ye=vt)};return tt.forEach(vt=>ht(vt)),Ye||at.forEach(vt=>ht(vt)),Ye}(this.style,this.transform.zoom);_e&&function(Ie,De,Ye){for(let Ke=0;Ke<Ye.length;Ke++)k_(Ie,De,Ye[Ke])}(this,_e,_e.getVisibleCoordinates())}this.options.showPadding&&function(_e){const Ie=_e.transform.padding;M_(_e,_e.transform.height-(Ie.top||0),3,ma),M_(_e,Ie.bottom||0,3,bd),wd(_e,Ie.left||0,3,As),wd(_e,_e.transform.width-(Ie.right||0),3,C_);const De=_e.transform.centerPoint;(function(Ye,Ke,tt,at){pc(Ye,Ke-1,tt-10,2,20,at),pc(Ye,Ke-10,tt-1,20,2,at)})(_e,De.x,_e.transform.height-De.y,T_)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const m=this.terrainFacilitator.matrix,S=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=u?!s.b_(m,S):!s.b$(m,S)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(s.c0(m,S),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,F){const G=D.context,Z=G.gl,ne=D.transform,he=vi.unblended,ye=new kr(Z.LEQUAL,kr.ReadWrite,[0,1]),_e=F.sourceCache.getRenderableTiles(),Ie=D.useProgram("terrainDepth");G.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),G.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),G.clear({color:s.b7.transparent,depth:1});for(const De of _e){const Ye=F.getTerrainMesh(De.tileID),Ke=F.getTerrainData(De.tileID),tt=ne.getProjectionData({overscaledTileID:De.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),at={u_ele_delta:F.getMeshFrameDelta(ne.zoom)};Ie.draw(G,Z.TRIANGLES,ye,Qr.disabled,he,ni.backCCW,at,Ke,tt,"terrain",Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)}G.bindFramebuffer.set(null),G.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,F){const G=D.context,Z=G.gl,ne=D.transform,he=vi.unblended,ye=new kr(Z.LEQUAL,kr.ReadWrite,[0,1]),_e=F.getCoordsTexture(),Ie=F.sourceCache.getRenderableTiles(),De=D.useProgram("terrainCoords");G.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),G.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),G.clear({color:s.b7.transparent,depth:1}),F.coordsIndex=[];for(const Ye of Ie){const Ke=F.getTerrainMesh(Ye.tileID),tt=F.getTerrainData(Ye.tileID);G.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,_e.texture);const at={u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(ne.zoom)},ht=ne.getProjectionData({overscaledTileID:Ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});De.draw(G,Z.TRIANGLES,ye,Qr.disabled,he,ni.backCCW,at,tt,ht,"terrain",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments),F.coordsIndex.push(Ye.tileID.key)}G.bindFramebuffer.set(null),G.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}renderLayer(u,m,S,M,D){S.isHidden(this.transform.zoom)||(S.type==="background"||S.type==="custom"||(M||[]).length)&&(this.id=S.id,s.c1(S)?function(F,G,Z,ne,he,ye){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:_e}=ye,Ie=Qr.disabled,De=F.colorModeForRenderPass();(Z._unevaluatedLayout.hasValue("text-variable-anchor")||Z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ye,Ke,tt,at,ht,vt,gt,Tt,bt){const Nt=Ke.transform,Ut=Ke.style.map.terrain,nn=ht==="map",an=vt==="map";for(const tn of Ye){const An=at.getTile(tn),Sn=An.getBucket(tt);if(!Sn||!Sn.text||!Sn.text.segments.get().length)continue;const pn=s.ak(Sn.textSizeData,Nt.zoom),qn=s.az(An,1,Ke.transform.zoom),Pr=Xn(nn,Ke.transform,qn),br=tt.layout.get("icon-text-fit")!=="none"&&Sn.hasIconData();if(pn){const qi=Math.pow(2,Nt.zoom-An.tileID.overscaledZ),wi=Ut?(Zi,Ni)=>Ut.getElevation(tn,Zi,Ni):null;Km(Sn,nn,an,bt,Nt,Pr,qi,pn,br,s.aA(Nt,An,gt,Tt),tn.toUnwrapped(),wi)}}}(ne,F,Z,G,Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),he),Z.paint.get("icon-opacity").constantOr(1)!==0&&Zm(F,G,Z,ne,!1,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),Z.layout.get("icon-rotation-alignment"),Z.layout.get("icon-pitch-alignment"),Z.layout.get("icon-keep-upright"),Ie,De,_e),Z.paint.get("text-opacity").constantOr(1)!==0&&Zm(F,G,Z,ne,!0,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.layout.get("text-keep-upright"),Ie,De,_e),G.map.showCollisionBoxes&&(pp(F,G,Z,ne,!0),pp(F,G,Z,ne,!1))}(u,m,S,M,this.style.placement.variableOffsets,D):s.c2(S)?function(F,G,Z,ne,he){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=he,_e=Z.paint.get("circle-opacity"),Ie=Z.paint.get("circle-stroke-width"),De=Z.paint.get("circle-stroke-opacity"),Ye=!Z.layout.get("circle-sort-key").isConstant();if(_e.constantOr(1)===0&&(Ie.constantOr(1)===0||De.constantOr(1)===0))return;const Ke=F.context,tt=Ke.gl,at=F.transform,ht=F.getDepthModeForSublayer(0,kr.ReadOnly),vt=Qr.disabled,gt=F.colorModeForRenderPass(),Tt=[],bt=at.getCircleRadiusCorrection();for(let Nt=0;Nt<ne.length;Nt++){const Ut=ne[Nt],nn=G.getTile(Ut),an=nn.getBucket(Z);if(!an)continue;const tn=Z.paint.get("circle-translate"),An=Z.paint.get("circle-translate-anchor"),Sn=s.aA(at,nn,tn,An),pn=an.programConfigurations.get(Z.id),qn=F.useProgram("circle",pn),Pr=an.layoutVertexBuffer,br=an.indexBuffer,qi=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Ut),wi={programConfiguration:pn,program:qn,layoutVertexBuffer:Pr,indexBuffer:br,uniformValues:AE(F,nn,Z,Sn,bt),terrainData:qi,projectionData:at.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!ye,applyTerrainMatrix:!0})};if(Ye){const Zi=an.segments.get();for(const Ni of Zi)Tt.push({segments:new s.aJ([Ni]),sortKey:Ni.sortKey,state:wi})}else Tt.push({segments:an.segments,sortKey:0,state:wi})}Ye&&Tt.sort((Nt,Ut)=>Nt.sortKey-Ut.sortKey);for(const Nt of Tt){const{programConfiguration:Ut,program:nn,layoutVertexBuffer:an,indexBuffer:tn,uniformValues:An,terrainData:Sn,projectionData:pn}=Nt.state;nn.draw(Ke,tt.TRIANGLES,ht,vt,gt,ni.backCCW,An,Sn,pn,Z.id,an,tn,Nt.segments,Z.paint,F.transform.zoom,Ut)}}(u,m,S,M,D):s.c3(S)?function(F,G,Z,ne,he){if(Z.paint.get("heatmap-opacity")===0)return;const ye=F.context,{isRenderingToTexture:_e,isRenderingGlobe:Ie}=he;if(F.style.map.terrain){for(const De of ne){const Ye=G.getTile(De);G.hasRenderableParent(De)||(F.renderPass==="offscreen"?w_(F,Ye,Z,De,Ie):F.renderPass==="translucent"&&$E(F,Z,De,_e,Ie))}ye.viewport.set([0,0,F.width,F.height])}else F.renderPass==="offscreen"?function(De,Ye,Ke,tt){const at=De.context,ht=at.gl,vt=De.transform,gt=Qr.disabled,Tt=new vi([ht.ONE,ht.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(bt,Nt,Ut){const nn=bt.gl;bt.activeTexture.set(nn.TEXTURE1),bt.viewport.set([0,0,Nt.width/4,Nt.height/4]);let an=Ut.heatmapFbos.get(s.bU);an?(nn.bindTexture(nn.TEXTURE_2D,an.colorAttachment.get()),bt.bindFramebuffer.set(an.framebuffer)):(an=x_(bt,Nt.width/4,Nt.height/4),Ut.heatmapFbos.set(s.bU,an))})(at,De,Ke),at.clear({color:s.b7.transparent});for(let bt=0;bt<tt.length;bt++){const Nt=tt[bt];if(Ye.hasRenderableParent(Nt))continue;const Ut=Ye.getTile(Nt),nn=Ut.getBucket(Ke);if(!nn)continue;const an=nn.programConfigurations.get(Ke.id),tn=De.useProgram("heatmap",an),An=vt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Sn=vt.getCircleRadiusCorrection();tn.draw(at,ht.TRIANGLES,kr.disabled,gt,Tt,ni.backCCW,s_(Ut,vt.zoom,Ke.paint.get("heatmap-intensity"),Sn),null,An,Ke.id,nn.layoutVertexBuffer,nn.indexBuffer,nn.segments,Ke.paint,vt.zoom,an)}at.viewport.set([0,0,De.width,De.height])}(F,G,Z,ne):F.renderPass==="translucent"&&function(De,Ye){const Ke=De.context,tt=Ke.gl;Ke.setColorMode(De.colorModeForRenderPass());const at=Ye.heatmapFbos.get(s.bU);at&&(Ke.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,at.colorAttachment.get()),Ke.activeTexture.set(tt.TEXTURE1),vp(Ke,Ye).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),De.useProgram("heatmapTexture").draw(Ke,tt.TRIANGLES,kr.disabled,Qr.disabled,De.colorModeForRenderPass(),ni.disabled,l_(De,Ye,0,1),null,null,Ye.id,De.viewportBuffer,De.quadTriangleIndexBuffer,De.viewportSegments,Ye.paint,De.transform.zoom))}(F,Z)}(u,m,S,M,D):s.c4(S)?function(F,G,Z,ne,he){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=he,_e=Z.paint.get("line-opacity"),Ie=Z.paint.get("line-width");if(_e.constantOr(1)===0||Ie.constantOr(1)===0)return;const De=F.getDepthModeForSublayer(0,kr.ReadOnly),Ye=F.colorModeForRenderPass(),Ke=Z.paint.get("line-dasharray"),tt=Z.paint.get("line-pattern"),at=tt.constantOr(1),ht=Z.paint.get("line-gradient"),vt=Z.getCrossfadeParameters(),gt=at?"linePattern":Ke?"lineSDF":ht?"lineGradient":"line",Tt=F.context,bt=Tt.gl,Nt=F.transform;let Ut=!0;for(const nn of ne){const an=G.getTile(nn);if(at&&!an.patternsLoaded())continue;const tn=an.getBucket(Z);if(!tn)continue;const An=tn.programConfigurations.get(Z.id),Sn=F.context.program.get(),pn=F.useProgram(gt,An),qn=Ut||pn.program!==Sn,Pr=F.style.map.terrain&&F.style.map.terrain.getTerrainData(nn),br=tt.constantOr(null);if(br&&an.imageAtlas){const Si=an.imageAtlas,mi=Si.patternPositions[br.to.toString()],Va=Si.patternPositions[br.from.toString()];mi&&Va&&An.setConstantPatternPositions(mi,Va)}const qi=Nt.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!ye,applyTerrainMatrix:!0}),wi=Nt.getPixelScale(),Zi=at?PE(F,an,Z,wi,vt):Ke?Om(F,an,Z,wi,Ke,vt):ht?dp(F,an,Z,wi,tn.lineClipsArray.length):Rm(F,an,Z,wi);if(at)Tt.activeTexture.set(bt.TEXTURE0),an.imageAtlasTexture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE),An.updatePaintBuffers(vt);else if(Ke&&(qn||F.lineAtlas.dirty))Tt.activeTexture.set(bt.TEXTURE0),F.lineAtlas.bind(Tt);else if(ht){const Si=tn.gradients[Z.id];let mi=Si.texture;if(Z.gradientVersion!==Si.version){let Va=256;if(Z.stepInterpolant){const Aa=G.getSource().maxzoom,Ya=nn.canonical.z===Aa?Math.ceil(1<<F.transform.maxZoom-nn.canonical.z):1;Va=s.ae(s.bV(tn.maxLineLength/s.Z*1024*Ya),256,Tt.maxTextureSize)}Si.gradient=s.bW({expression:Z.gradientExpression(),evaluationKey:"lineProgress",resolution:Va,image:Si.gradient||void 0,clips:tn.lineClipsArray}),Si.texture?Si.texture.update(Si.gradient):Si.texture=new H(Tt,Si.gradient,bt.RGBA),Si.version=Z.gradientVersion,mi=Si.texture}Tt.activeTexture.set(bt.TEXTURE0),mi.bind(Z.stepInterpolant?bt.NEAREST:bt.LINEAR,bt.CLAMP_TO_EDGE)}let Ni;if(ye){const[Si]=F.getStencilConfigForOverlapAndUpdateStencilID(ne);Ni=Si[nn.overscaledZ]}else Ni=F.stencilModeForClipping(nn);pn.draw(Tt,bt.TRIANGLES,De,Ni,Ye,ni.disabled,Zi,Pr,qi,Z.id,tn.layoutVertexBuffer,tn.indexBuffer,tn.segments,Z.paint,F.transform.zoom,An,tn.layoutVertexBuffer2),Ut=!1}}(u,m,S,M,D):s.c5(S)?function(F,G,Z,ne,he){const ye=Z.paint.get("fill-color"),_e=Z.paint.get("fill-opacity");if(_e.constantOr(1)===0)return;const{isRenderingToTexture:Ie}=he,De=F.colorModeForRenderPass(),Ye=Z.paint.get("fill-pattern"),Ke=F.opaquePassEnabledForLayer()&&!Ye.constantOr(1)&&ye.constantOr(s.b7.transparent).a===1&&_e.constantOr(0)===1?"opaque":"translucent";if(F.renderPass===Ke){const tt=F.getDepthModeForSublayer(1,F.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);S_(F,G,Z,ne,tt,De,!1,Ie)}if(F.renderPass==="translucent"&&Z.paint.get("fill-antialias")){const tt=F.getDepthModeForSublayer(Z.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);S_(F,G,Z,ne,tt,De,!0,Ie)}}(u,m,S,M,D):s.c6(S)?function(F,G,Z,ne,he){const ye=Z.paint.get("fill-extrusion-opacity");if(ye===0)return;const{isRenderingToTexture:_e}=he;if(F.renderPass==="translucent"){const Ie=new kr(F.context.gl.LEQUAL,kr.ReadWrite,F.depthRangeFor3D);if(ye!==1||Z.paint.get("fill-extrusion-pattern").constantOr(1))Xm(F,G,Z,ne,Ie,Qr.disabled,vi.disabled,_e),Xm(F,G,Z,ne,Ie,F.stencilModeFor3D(),F.colorModeForRenderPass(),_e);else{const De=F.colorModeForRenderPass();Xm(F,G,Z,ne,Ie,Qr.disabled,De,_e)}}}(u,m,S,M,D):s.c7(S)?function(F,G,Z,ne,he){if(F.renderPass!=="offscreen"&&F.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=he,_e=F.context,Ie=F.style.projection.useSubdivision,De=F.getDepthModeForSublayer(0,kr.ReadOnly),Ye=F.colorModeForRenderPass();if(F.renderPass==="offscreen")(function(Ke,tt,at,ht,vt,gt,Tt){const bt=Ke.context,Nt=bt.gl;for(const Ut of at){const nn=tt.getTile(Ut),an=nn.dem;if(!an||!an.data||!nn.needsHillshadePrepare)continue;const tn=an.dim,An=an.stride,Sn=an.getPixels();if(bt.activeTexture.set(Nt.TEXTURE1),bt.pixelStoreUnpackPremultiplyAlpha.set(!1),nn.demTexture=nn.demTexture||Ke.getTileTexture(An),nn.demTexture){const qn=nn.demTexture;qn.update(Sn,{premultiply:!1}),qn.bind(Nt.NEAREST,Nt.CLAMP_TO_EDGE)}else nn.demTexture=new H(bt,Sn,Nt.RGBA,{premultiply:!1}),nn.demTexture.bind(Nt.NEAREST,Nt.CLAMP_TO_EDGE);bt.activeTexture.set(Nt.TEXTURE0);let pn=nn.fbo;if(!pn){const qn=new H(bt,{width:tn,height:tn,data:null},Nt.RGBA);qn.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),pn=nn.fbo=bt.createFramebuffer(tn,tn,!0,!1),pn.colorAttachment.set(qn.texture)}bt.bindFramebuffer.set(pn.framebuffer),bt.viewport.set([0,0,tn,tn]),Ke.useProgram("hillshadePrepare").draw(bt,Nt.TRIANGLES,vt,gt,Tt,ni.disabled,md(nn.tileID,an),null,null,ht.id,Ke.rasterBoundsBuffer,Ke.quadTriangleIndexBuffer,Ke.rasterBoundsSegments),nn.needsHillshadePrepare=!1}})(F,G,ne,Z,De,Qr.disabled,Ye),_e.viewport.set([0,0,F.width,F.height]);else if(F.renderPass==="translucent")if(Ie){const[Ke,tt,at]=F.stencilConfigForOverlapTwoPass(ne);Sh(F,G,Z,at,Ke,De,Ye,!1,ye),Sh(F,G,Z,at,tt,De,Ye,!0,ye)}else{const[Ke,tt]=F.getStencilConfigForOverlapAndUpdateStencilID(ne);Sh(F,G,Z,tt,Ke,De,Ye,!1,ye)}}(u,m,S,M,D):s.c8(S)?function(F,G,Z,ne,he){if(F.renderPass!=="translucent"||Z.paint.get("raster-opacity")===0||!ne.length)return;const{isRenderingToTexture:ye}=he,_e=G.getSource(),Ie=F.style.projection.useSubdivision;if(_e instanceof It)Jm(F,G,Z,ne,null,!1,!1,_e.tileCoords,_e.flippedWindingOrder,ye);else if(Ie){const[De,Ye,Ke]=F.stencilConfigForOverlapTwoPass(ne);Jm(F,G,Z,Ke,De,!1,!0,mp,!1,ye),Jm(F,G,Z,Ke,Ye,!0,!0,mp,!1,ye)}else{const[De,Ye]=F.getStencilConfigForOverlapAndUpdateStencilID(ne);Jm(F,G,Z,Ye,De,!1,!0,mp,!1,ye)}}(u,m,S,M,D):s.c9(S)?function(F,G,Z,ne,he){const ye=Z.paint.get("background-color"),_e=Z.paint.get("background-opacity");if(_e===0)return;const{isRenderingToTexture:Ie}=he,De=F.context,Ye=De.gl,Ke=F.style.projection,tt=F.transform,at=tt.tileSize,ht=Z.paint.get("background-pattern");if(F.isPatternMissing(ht))return;const vt=!ht&&ye.a===1&&_e===1&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass!==vt)return;const gt=Qr.disabled,Tt=F.getDepthModeForSublayer(0,vt==="opaque"?kr.ReadWrite:kr.ReadOnly),bt=F.colorModeForRenderPass(),Nt=F.useProgram(ht?"backgroundPattern":"background"),Ut=ne||it(tt,{tileSize:at,terrain:F.style.map.terrain});ht&&(De.activeTexture.set(Ye.TEXTURE0),F.imageManager.bind(F.context));const nn=Z.getCrossfadeParameters();for(const an of Ut){const tn=tt.getProjectionData({overscaledTileID:an,applyGlobeMatrix:!Ie,applyTerrainMatrix:!0}),An=ht?hu(_e,F,ht,{tileID:an,tileSize:at},nn):Bm(_e,ye),Sn=F.style.map.terrain&&F.style.map.terrain.getTerrainData(an),pn=Ke.getMeshFromTileID(De,an.canonical,!1,!0,"raster");Nt.draw(De,Ye.TRIANGLES,Tt,gt,bt,ni.backCCW,An,Sn,tn,Z.id,pn.vertexBuffer,pn.indexBuffer,pn.segments)}}(u,0,S,M,D):s.ca(S)&&function(F,G,Z,ne){const{isRenderingGlobe:he}=ne,ye=F.context,_e=Z.implementation,Ie=F.style.projection,De=F.transform,Ye=De.getProjectionDataForCustomLayer(he),Ke={farZ:De.farZ,nearZ:De.nearZ,fov:De.fov*Math.PI/180,modelViewProjectionMatrix:De.modelViewProjectionMatrix,projectionMatrix:De.projectionMatrix,shaderData:{variantName:Ie.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ie.shaderPreludeCode.vertexSource}`,define:Ie.shaderDefine},defaultProjectionData:Ye},tt=_e.renderingMode?_e.renderingMode:"2d";if(F.renderPass==="offscreen"){const at=_e.prerender;at&&(F.setCustomLayerDefaults(),ye.setColorMode(F.colorModeForRenderPass()),at.call(_e,ye.gl,Ke),ye.setDirty(),F.setBaseState())}else if(F.renderPass==="translucent"){F.setCustomLayerDefaults(),ye.setColorMode(F.colorModeForRenderPass()),ye.setStencilMode(Qr.disabled);const at=tt==="3d"?F.getDepthModeFor3D():F.getDepthModeForSublayer(0,kr.ReadOnly);ye.setDepthMode(at),_e.render(ye.gl,Ke),ye.setDirty(),F.setBaseState(),ye.bindFramebuffer.set(null)}}(u,0,S,D))}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),S=this.imageManager.getPattern(u.to.toString());return!m||!S}useProgram(u,m,S=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,D=this.style.projection,F=u+(m?m.cacheKey:"")+`/${S?so:D.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[F]||(this.cache[F]=new up(this.context,Rr[u],m,c_[u],this._showOverdrawInspector,M,S?Rr.projectionMercator:D.shaderPreludeCode,S?Do:D.shaderDefine)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}function P_(P,u){let m,S=!1,M=null,D=null;const F=()=>{M=null,S&&(P.apply(D,m),M=setTimeout(F,u),S=!1)};return(...G)=>(S=!0,D=this,m=G,M||F(),M)}class I_{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let S;return m.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(S=M)}),(S&&S[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(!this._isValidHash(m))return!1;const S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:S,pitch:+(m[4]||0)}),!0},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,m)},this._removeHash=()=>{const m=this._getCurrentHash();if(m.length===0)return;const S=m.join("/");let M=S;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${S}`);let D=window.location.hash.replace(M,"");D.startsWith("#&")?D=D.slice(0,1)+D.slice(2):D==="#"&&(D="");let F=window.location.href.replace(/(#.+)?$/,D);F=F.replace("&&","&"),window.history.replaceState(window.history.state,null,F)},this._updateHash=P_(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(u){const m=this._map.getCenter(),S=Math.round(100*this._map.getZoom())/100,M=Math.ceil((S*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,M),F=Math.round(m.lng*D)/D,G=Math.round(m.lat*D)/D,Z=this._map.getBearing(),ne=this._map.getPitch();let he="";if(he+=u?`/${F}/${G}/${S}`:`${S}/${G}/${F}`,(Z||ne)&&(he+="/"+Math.round(10*Z)/10),ne&&(he+=`/${Math.round(ne)}`),this._hashName){const ye=this._hashName;let _e=!1;const Ie=window.location.hash.slice(1).split("&").map(De=>{const Ye=De.split("=")[0];return Ye===ye?(_e=!0,`${Ye}=${he}`):De}).filter(De=>De);return _e||Ie.push(`${ye}=${he}`),`#${Ie.join("&")}`}return`#${he}`}_isValidHash(u){if(u.length<3||u.some(isNaN))return!1;try{new s.Q(+u[2],+u[1])}catch{return!1}const m=+u[0],S=+(u[3]||0),M=+(u[4]||0);return m>=this._map.getMinZoom()&&m<=this._map.getMaxZoom()&&S>=-180&&S<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const tl={linearity:.3,easing:s.cb(0,0,.3,1)},aS=s.e({deceleration:2500,maxSpeed:1400},tl),oS=s.e({deceleration:20,maxSpeed:1400},tl),sS=s.e({deceleration:1e3,maxSpeed:360},tl),lS=s.e({deceleration:1e3,maxSpeed:90},tl),uS=s.e({deceleration:1e3,maxSpeed:360},tl);class cS{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=p.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:D}of this._inertiaBuffer)m.zoom+=D.zoomDelta||0,m.bearing+=D.bearingDelta||0,m.pitch+=D.pitchDelta||0,m.roll+=D.rollDelta||0,D.panDelta&&m.pan._add(D.panDelta),D.around&&(m.around=D.around),D.pinchAround&&(m.pinchAround=D.pinchAround);const S=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(m.pan.mag()){const D=vc(m.pan.mag(),S,s.e({},aS,u||{})),F=m.pan.mult(D.amount/m.pan.mag()),G=this._map.cameraHelper.handlePanInertia(F,this._map.transform);M.center=G.easingCenter,M.offset=G.easingOffset,Ch(M,D)}if(m.zoom){const D=vc(m.zoom,S,oS);M.zoom=this._map.transform.zoom+D.amount,Ch(M,D)}if(m.bearing){const D=vc(m.bearing,S,sS);M.bearing=this._map.transform.bearing+s.ae(D.amount,-179,179),Ch(M,D)}if(m.pitch){const D=vc(m.pitch,S,lS);M.pitch=this._map.transform.pitch+D.amount,Ch(M,D)}if(m.roll){const D=vc(m.roll,S,uS);M.roll=this._map.transform.roll+s.ae(D.amount,-179,179),Ch(M,D)}if(M.zoom||M.bearing){const D=m.pinchAround===void 0?m.around:m.pinchAround;M.around=D?this._map.unproject(D):this._map.getCenter()}return this.clear(),s.e(M,{noMoveStart:!0})}}function Ch(P,u){(!P.duration||P.duration<u.duration)&&(P.duration=u.duration,P.easing=u.easing)}function vc(P,u,m){const{maxSpeed:S,linearity:M,deceleration:D}=m,F=s.ae(P*M/(u/1e3),-S,S),G=Math.abs(F)/(D*M);return{easing:m.easing,duration:1e3*G,amount:F*(G/2)}}class Oo extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,S,M={}){S=S instanceof MouseEvent?S:new MouseEvent(u,S);const D=v.mousePos(m.getCanvas(),S),F=m.unproject(D);super(u,s.e({point:D,lngLat:F,originalEvent:S},M)),this._defaultPrevented=!1,this.target=m}}class bo extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,S){const M=u==="touchend"?S.changedTouches:S.touches,D=v.touchPos(m.getCanvasContainer(),M),F=D.map(Z=>m.unproject(Z)),G=D.reduce((Z,ne,he,ye)=>Z.add(ne.div(ye.length)),new s.P(0,0));super(u,{points:D,point:G,lngLats:F,lngLat:m.unproject(G),originalEvent:S}),this._defaultPrevented=!1}}class nl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,S){super(u,{originalEvent:S}),this._defaultPrevented=!1}}class dS{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new nl(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Oo(u.type,this._map,u))}mouseup(u){this._map.fire(new Oo(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Oo(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Oo(u.type,this._map,u))}mouseover(u){this._map.fire(new Oo(u.type,this._map,u))}mouseout(u){this._map.fire(new Oo(u.type,this._map,u))}touchstart(u){return this._firePreventable(new bo(u.type,this._map,u))}touchmove(u){this._map.fire(new bo(u.type,this._map,u))}touchend(u){this._map.fire(new bo(u.type,this._map,u))}touchcancel(u){this._map.fire(new bo(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xl{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Oo(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Oo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Oo(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sl{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.screenPointToLocation(s.P.convert(u),this._map.terrain)}}class hS{constructor(u,m){this._map=u,this._tr=new Sl(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(v.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const S=m;if(this._lastPos.equals(S)||!this._box&&S.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=S,this._box||(this._box=v.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const D=Math.min(M.x,S.x),F=Math.max(M.x,S.x),G=Math.min(M.y,S.y),Z=Math.max(M.y,S.y);v.setTransform(this._box,`translate(${D}px,${G}px)`),this._box.style.width=F-D+"px",this._box.style.height=Z-G+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const S=this._startPos,M=m;if(this.reset(),v.suppressClick(),S.x!==M.x||S.y!==M.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:u})),{cameraAnimation:D=>D.fitScreenCoordinates(S,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.l(u,{originalEvent:m}))}}function L_(P,u){if(P.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${P.length}, points ${u.length}`);const m={};for(let S=0;S<P.length;S++)m[P[S].identifier]=u[S];return m}class VE{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,S){(this.centroid||S.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),S.length===this.numTouches&&(this.centroid=function(M){const D=new s.P(0,0);for(const F of M)D._add(F);return D.div(M.length)}(m),this.touches=L_(S,m)))}touchmove(u,m,S){if(this.aborted||!this.centroid)return;const M=L_(S,m);for(const D in this.touches){const F=M[D];(!F||F.dist(this.touches[D])>30)&&(this.aborted=!0)}}touchend(u,m,S){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),S.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class D_{constructor(u){this.singleTap=new VE(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,S){this.singleTap.touchstart(u,m,S)}touchmove(u,m,S){this.singleTap.touchmove(u,m,S)}touchend(u,m,S){const M=this.singleTap.touchend(u,m,S);if(M){const D=u.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(M)<30;if(D&&F||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class fS{constructor(u){this._tr=new Sl(u),this._zoomIn=new D_({numTouches:1,numTaps:2}),this._zoomOut=new D_({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,S){this._zoomIn.touchstart(u,m,S),this._zoomOut.touchstart(u,m,S)}touchmove(u,m,S){this._zoomIn.touchmove(u,m,S),this._zoomOut.touchmove(u,m,S)}touchend(u,m,S){const M=this._zoomIn.touchend(u,m,S),D=this._zoomOut.touchend(u,m,S),F=this._tr;return M?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(M)},{originalEvent:u})}):D?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(D)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fu{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.rollDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=Array.isArray(m)?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const S=this._lastPoint;if(!S)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const M=Array.isArray(m)?m[0]:m;return!this._moved&&M.dist(S)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(S,M))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&v.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const pu={0:1,2:2};class $n{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=v.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(m,S){const M=pu[S];return m.buttons===void 0||(m.buttons&M)!==M}(u,this._eventButton)}isValidEndEvent(u){return v.mouseButton(u)===this._eventButton}}class pS{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}class R_{constructor(u=new $n({checkCorrectEvent:()=>!0}),m=new pS){this.mouseMoveStateManager=u,this.oneFingerTouchMoveStateManager=m}_executeRelevantHandler(u,m,S){return u instanceof MouseEvent?m(u):typeof TouchEvent<"u"&&u instanceof TouchEvent?S(u):void 0}startMove(u){this._executeRelevantHandler(u,m=>this.mouseMoveStateManager.startMove(m),m=>this.oneFingerTouchMoveStateManager.startMove(m))}endMove(u){this._executeRelevantHandler(u,m=>this.mouseMoveStateManager.endMove(m),m=>this.oneFingerTouchMoveStateManager.endMove(m))}isValidStartEvent(u){return this._executeRelevantHandler(u,m=>this.mouseMoveStateManager.isValidStartEvent(m),m=>this.oneFingerTouchMoveStateManager.isValidStartEvent(m))}isValidMoveEvent(u){return this._executeRelevantHandler(u,m=>this.mouseMoveStateManager.isValidMoveEvent(m),m=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(m))}isValidEndEvent(u){return this._executeRelevantHandler(u,m=>this.mouseMoveStateManager.isValidEndEvent(m),m=>this.oneFingerTouchMoveStateManager.isValidEndEvent(m))}}const gp=P=>{P.mousedown=P.dragStart,P.mousemoveWindow=P.dragMove,P.mouseup=P.dragEnd,P.contextmenu=u=>{u.preventDefault()}};class yp{constructor(u,m){this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(u){return u<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(u,m,S){return this._calculateTransform(u,m,S)}touchmove(u,m,S){if(this._active){if(!this._shouldBePrevented(S.length))return u.preventDefault(),this._calculateTransform(u,m,S);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",u)}}touchend(u,m,S){this._calculateTransform(u,m,S),this._active&&this._shouldBePrevented(S.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,S){S.length>0&&(this._active=!0);const M=L_(S,m),D=new s.P(0,0),F=new s.P(0,0);let G=0;for(const ne in M){const he=M[ne],ye=this._touches[ne];ye&&(D._add(he),F._add(he.sub(ye)),G++,M[ne]=he)}if(this._touches=M,this._shouldBePrevented(G)||!F.mag())return;const Z=F.div(G);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:D.div(G),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,S){this._firstTwoTouches||S.length<2||(this._firstTwoTouches=[S[0].identifier,S[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,S){if(!this._firstTwoTouches)return;u.preventDefault();const[M,D]=this._firstTwoTouches,F=_p(S,m,M),G=_p(S,m,D);if(!F||!G)return;const Z=this._aroundCenter?null:F.add(G).div(2);return this._move([F,G],Z,u)}touchend(u,m,S){if(!this._firstTwoTouches)return;const[M,D]=this._firstTwoTouches,F=_p(S,m,M),G=_p(S,m,D);F&&G||(this._active&&v.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function _p(P,u,m){for(let S=0;S<P.length;S++)if(P[S].identifier===m)return u[S]}function $r(P,u){return Math.log(P/u)/Math.LN2}class Qm extends xd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const S=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs($r(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$r(this._distance,S),pinchAround:m}}}function vS(P,u){return 180*P.angleWith(u)/Math.PI}class eg extends xd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m,S){const M=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vS(this._vector,M),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,S=vS(u,this._startVector);return Math.abs(S)<m}}function O_(P){return Math.abs(P.y)>Math.abs(P.x)}class mS extends xd{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,S){super.touchstart(u,m,S),this._currentTouchCount=S.length}_start(u){this._lastPoints=u,O_(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,S){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=u[0].sub(this._lastPoints[0]),D=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,D,S.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(M.y+D.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,S){if(this._valid!==void 0)return this._valid;const M=u.mag()>=2,D=m.mag()>=2;if(!M&&!D)return;if(!M||!D)return this._firstMove===void 0&&(this._firstMove=S),S-this._firstMove<100&&void 0;const F=u.y>0==m.y>0;return O_(u)&&O_(m)&&F}}const gS={panStep:100,bearingStep:15,pitchStep:10};class tg{constructor(u){this._tr=new Sl(u);const m=gS;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,S=0,M=0,D=0,F=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?S=-1:(u.preventDefault(),D=-1);break;case 39:u.shiftKey?S=1:(u.preventDefault(),D=1);break;case 38:u.shiftKey?M=1:(u.preventDefault(),F=-1);break;case 40:u.shiftKey?M=-1:(u.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(S=0,M=0),{cameraAnimation:G=>{const Z=this._tr;G.easeTo({duration:300,easeId:"keyboardHandler",easing:yS,zoom:m?Math.round(Z.zoom)+m*(u.shiftKey?2:1):Z.zoom,bearing:Z.bearing+S*this._bearingStep,pitch:Z.pitch+M*this._pitchStep,offset:[-D*this._panStep,-F*this._panStep],center:Z.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function yS(P){return P*(2-P)}const _S=4.000244140625;class z_{constructor(u,m){this._onTimeout=S=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(S)},this._map=u,this._tr=new Sl(u),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(u){return!!this._map.cooperativeGestures.isEnabled()&&!(u.ctrlKey||this._map.cooperativeGestures.isBypassed(u))}wheel(u){if(!this.isEnabled())return;if(this._shouldBePrevented(u))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",u);let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const S=p.now(),M=S-(this._lastWheelEventTime||0);this._lastWheelEventTime=S,m!==0&&m%_S==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(M*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=v.mousePos(this._map.getCanvas(),u),S=this._tr;this._aroundPoint=this._aroundCenter?S.transform.locationToScreenPoint(s.Q.convert(S.center)):m,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const G=u.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=G),typeof this._targetZoom=="number"&&(this._targetZoom+=G)}if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>_S?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&Z!==0&&(Z=1/Z);const ne=typeof this._targetZoom!="number"?u.scale:s.ac(this._targetZoom);this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,s.ah(ne*Z))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom!="number"?u.zoom:this._targetZoom,S=this._startZoom,M=this._easing;let D,F=!1;if(this._type==="wheel"&&S&&M){const G=p.now()-this._lastWheelEventTime,Z=Math.min((G+5)/200,1),ne=M(Z);D=s.B.number(S,m,ne),Z<1?this._frameId||(this._frameId=!0):F=!0}else D=m,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=D,{noInertia:!0,needsRenderFrame:!F,zoomDelta:D-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.cd;if(this._prevEase){const S=this._prevEase,M=(p.now()-S.start)/S.duration,D=S.easing(M+.01)-S.easing(M),F=.27/Math.sqrt(D*D+1e-4)*.01,G=Math.sqrt(.0729-F*F);m=s.cb(F,G,.25,1)}return this._prevEase={start:p.now(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bS{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class HE{constructor(u){this._tr=new Sl(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:S=>{S.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mc{constructor(){this._tap=new D_({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,S){if(!this._swipePoint)if(this._tapTime){const M=m[0],D=u.timeStamp-this._tapTime<500,F=this._tapPoint.dist(M)<30;D&&F?S.length>0&&(this._swipePoint=M,this._swipeTouch=S[0].identifier):this.reset()}else this._tap.touchstart(u,m,S)}touchmove(u,m,S){if(this._tapTime){if(this._swipePoint){if(S[0].identifier!==this._swipeTouch)return;const M=m[0],D=M.y-this._swipePoint.y;return this._swipePoint=M,u.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(u,m,S)}touchend(u,m,S){if(this._tapTime)this._swipePoint&&S.length===0&&this.reset();else{const M=this._tap.touchend(u,m,S);M&&(this._tapTime=u.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(u,m,S){this._el=u,this._mousePan=m,this._touchPan=S}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class bp{constructor(u,m,S,M){this._pitchWithRotate=u.pitchWithRotate,this._rollEnabled=u.rollEnabled,this._mouseRotate=m,this._mousePitch=S,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ng{constructor(u,m,S,M){this._el=u,this._touchZoom=m,this._touchRotate=S,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class B_{constructor(u,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=v.create("div","maplibregl-cooperative-gesture-screen",u);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const S=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=m,this._container.appendChild(M);const D=document.createElement("div");D.className="maplibregl-mobile-message",D.textContent=S,this._container.appendChild(D),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(v.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(u){return u[this._bypassKey]}notifyGestureBlocked(u,m){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:u,originalEvent:m})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const wp=P=>P.zoom||P.drag||P.roll||P.pitch||P.rotate;class wS extends s.l{}function F_(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta||P.rollDelta}class Cl{constructor(u,m){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,D)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=M.type==="renderFrame"?void 0:M,G={needsRenderFrame:!1},Z={},ne={};for(const{handlerName:_e,handler:Ie,allowed:De}of this._handlers){if(!Ie.isEnabled())continue;let Ye;if(this._blockedByActive(ne,De,_e))Ie.reset();else if(Ie[D||M.type]){if(s.ce(M,D||M.type)){const Ke=v.mousePos(this._map.getCanvas(),M);Ye=Ie[D||M.type](M,Ke)}else if(s.cf(M,D||M.type)){const Ke=this._getMapTouches(M.touches),tt=v.touchPos(this._map.getCanvas(),Ke);Ye=Ie[D||M.type](M,tt,Ke)}else s.cg(D||M.type)||(Ye=Ie[D||M.type](M));this.mergeHandlerResult(G,Z,Ye,_e,F),Ye&&Ye.needsRenderFrame&&this._triggerRenderFrame()}(Ye||Ie.isActive())&&(ne[_e]=Ie)}const he={};for(const _e in this._previousActiveHandlers)ne[_e]||(he[_e]=F);this._previousActiveHandlers=ne,(Object.keys(he).length||F_(G))&&(this._changes.push([G,Z,he]),this._triggerRenderFrame()),(Object.keys(ne).length||F_(G))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=G;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cS(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const S=this._el;this._listeners=[[S,"touchstart",{passive:!0}],[S,"touchmove",{passive:!1}],[S,"touchend",void 0],[S,"touchcancel",void 0],[S,"mousedown",void 0],[S,"mousemove",void 0],[S,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[S,"mouseover",void 0],[S,"mouseout",void 0],[S,"dblclick",void 0],[S,"click",void 0],[S,"keydown",{capture:!1}],[S,"keyup",void 0],[S,"wheel",{passive:!1}],[S,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,D,F]of this._listeners)v.addEventListener(M,D,M===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[u,m,S]of this._listeners)v.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,S)}_addDefaultHandlers(u){const m=this._map,S=m.getCanvasContainer();this._add("mapEvent",new dS(m,u));const M=m.boxZoom=new hS(m,u);this._add("boxZoom",M),u.interactive&&u.boxZoom&&M.enable();const D=m.cooperativeGestures=new B_(m,u.cooperativeGestures);this._add("cooperativeGestures",D),u.cooperativeGestures&&D.enable();const F=new fS(m),G=new HE(m);m.doubleClickZoom=new bS(G,F),this._add("tapZoom",F),this._add("clickZoom",G),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const Z=new mc;this._add("tapDragZoom",Z);const ne=m.touchPitch=new mS(m);this._add("touchPitch",ne),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const he=()=>m.project(m.getCenter()),ye=function({enable:vt,clickTolerance:gt,aroundCenter:Tt=!0,minPixelCenterThreshold:bt=100,rotateDegreesPerPixelMoved:Nt=.8},Ut){const nn=new $n({checkCorrectEvent:an=>v.mouseButton(an)===0&&an.ctrlKey||v.mouseButton(an)===2&&!an.ctrlKey});return new fu({clickTolerance:gt,move:(an,tn)=>{const An=Ut();if(Tt&&Math.abs(An.y-an.y)>bt)return{bearingDelta:s.cc(new s.P(an.x,tn.y),tn,An)};let Sn=(tn.x-an.x)*Nt;return Tt&&tn.y<An.y&&(Sn=-Sn),{bearingDelta:Sn}},moveStateManager:nn,enable:vt,assignEvents:gp})}(u,he),_e=function({enable:vt,clickTolerance:gt,pitchDegreesPerPixelMoved:Tt=-.5}){const bt=new $n({checkCorrectEvent:Nt=>v.mouseButton(Nt)===0&&Nt.ctrlKey||v.mouseButton(Nt)===2});return new fu({clickTolerance:gt,move:(Nt,Ut)=>({pitchDelta:(Ut.y-Nt.y)*Tt}),moveStateManager:bt,enable:vt,assignEvents:gp})}(u),Ie=function({enable:vt,clickTolerance:gt,rollDegreesPerPixelMoved:Tt=.3},bt){const Nt=new $n({checkCorrectEvent:Ut=>v.mouseButton(Ut)===2&&Ut.ctrlKey});return new fu({clickTolerance:gt,move:(Ut,nn)=>{const an=bt();let tn=(nn.x-Ut.x)*Tt;return nn.y<an.y&&(tn=-tn),{rollDelta:tn}},moveStateManager:Nt,enable:vt,assignEvents:gp})}(u,he);m.dragRotate=new bp(u,ye,_e,Ie),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",_e,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ie,["mousePitch"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const De=function({enable:vt,clickTolerance:gt}){const Tt=new $n({checkCorrectEvent:bt=>v.mouseButton(bt)===0&&!bt.ctrlKey});return new fu({clickTolerance:gt,move:(bt,Nt)=>({around:Nt,panDelta:Nt.sub(bt)}),activateOnStart:!0,moveStateManager:Tt,enable:vt,assignEvents:gp})}(u),Ye=new yp(u,m);m.dragPan=new Fi(S,De,Ye),this._add("mousePan",De),this._add("touchPan",Ye,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const Ke=new eg,tt=new Qm;m.touchZoomRotate=new ng(S,tt,Ke,Z),this._add("touchRotate",Ke,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate);const at=m.scrollZoom=new z_(m,()=>this._triggerRenderFrame());this._add("scrollZoom",at,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const ht=m.keyboard=new tg(m);this._add("keyboard",ht),u.interactive&&u.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new xl(m))}_add(u,m,S){this._handlers.push({handlerName:u,handler:m,allowed:S}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wp(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,S){for(const M in u)if(M!==S&&(!m||m.indexOf(M)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const S of u)this._el.contains(S.target)&&m.push(S);return m}mergeHandlerResult(u,m,S,M,D){if(!S)return;s.e(u,S);const F={handlerName:M,originalEvent:S.originalEvent||D};S.zoomDelta!==void 0&&(m.zoom=F),S.panDelta!==void 0&&(m.drag=F),S.rollDelta!==void 0&&(m.roll=F),S.pitchDelta!==void 0&&(m.pitch=F),S.bearingDelta!==void 0&&(m.rotate=F)}_applyChanges(){const u={},m={},S={};for(const[M,D,F]of this._changes)M.panDelta&&(u.panDelta=(u.panDelta||new s.P(0,0))._add(M.panDelta)),M.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(u.rollDelta=(u.rollDelta||0)+M.rollDelta),M.around!==void 0&&(u.around=M.around),M.pinchAround!==void 0&&(u.pinchAround=M.pinchAround),M.noInertia&&(u.noInertia=M.noInertia),s.e(m,D),s.e(S,F);this._updateMapTransform(u,m,S),this._changes=[]}_updateMapTransform(u,m,S){const M=this._map,D=M._getTransformForUpdate(),F=M.terrain;if(!(F_(u)||F&&this._terrainMovement))return this._fireEvents(m,S,!0);M._stop(!0);let{panDelta:G,zoomDelta:Z,bearingDelta:ne,pitchDelta:he,rollDelta:ye,around:_e,pinchAround:Ie}=u;Ie!==void 0&&(_e=Ie),_e=_e||M.transform.centerPoint,F&&!D.isPointOnMapSurface(_e)&&(_e=D.centerPoint);const De={panDelta:G,zoomDelta:Z,rollDelta:ye,pitchDelta:he,bearingDelta:ne,around:_e};this._map.cameraHelper.useGlobeControls&&!D.isPointOnMapSurface(_e)&&(_e=D.centerPoint);const Ye=_e.distSqr(D.centerPoint)<.01?D.center:D.screenPointToLocation(G?_e.sub(G):_e);F?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(De,D),this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?D.setCenter(D.screenPointToLocation(D.centerPoint.sub(G))):this._map.cameraHelper.handleMapControlsPan(De,D,Ye):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(De,D,Ye))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(De,D),this._map.cameraHelper.handleMapControlsPan(De,D,Ye)),M._applyUpdatedTransform(D),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,S,!0)}_fireEvents(u,m,S){const M=wp(this._eventsInProgress),D=wp(u),F={};for(const ye in u){const{originalEvent:_e}=u[ye];this._eventsInProgress[ye]||(F[`${ye}start`]=_e),this._eventsInProgress[ye]=u[ye]}!M&&D&&this._fireEvent("movestart",D.originalEvent);for(const ye in F)this._fireEvent(ye,F[ye]);D&&this._fireEvent("move",D.originalEvent);for(const ye in u){const{originalEvent:_e}=u[ye];this._fireEvent(ye,_e)}const G={};let Z;for(const ye in this._eventsInProgress){const{handlerName:_e,originalEvent:Ie}=this._eventsInProgress[ye];this._handlersById[_e].isActive()||(delete this._eventsInProgress[ye],Z=m[_e]||Ie,G[`${ye}end`]=Z)}for(const ye in G)this._fireEvent(ye,G[ye]);const ne=wp(this._eventsInProgress),he=(M||D)&&!ne;if(he&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ye=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ye.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ye)}if(S&&he){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_e=Ie=>Ie!==0&&-this._bearingSnap<Ie&&Ie<this._bearingSnap;!ye||!ye.essential&&p.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:Z})),_e(this._map.getBearing())&&this._map.resetNorth()):(_e(ye.bearing||this._map.getBearing())&&(ye.bearing=0),ye.freezeElevation=!0,this._map.easeTo(ye,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.l(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new wS("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class rg extends s.E{constructor(u,m,S){super(),this._renderFrameCallback=()=>{const M=Math.min((p.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=S.bearingSnap,this.cameraHelper=m,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(u,m){u.apply(this.transform),this.transform=u,this.cameraHelper=m}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}getCenterElevation(){return this.transform.elevation}setCenterElevation(u,m){return this.jumpTo({elevation:u},m),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(u){this._centerClampedToGround=u}panBy(u,m,S){return u=s.P.convert(u).mult(-1),this.panTo(this.transform.center,s.e({offset:u},m),S)}panTo(u,m,S){return this.easeTo(s.e({center:u},m),S)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,S){return this.easeTo(s.e({zoom:u},m),S)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(u,m){return u!=this.transform.fov&&(this.transform.setFov(u),this.fire(new s.l("movestart",m)).fire(new s.l("move",m)).fire(new s.l("moveend",m))),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,S){return this.easeTo(s.e({bearing:u},m),S)}resetNorth(u,m){return this.rotateTo(0,s.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}getRoll(){return this.transform.roll}setRoll(u,m){return this.jumpTo({roll:u},m),this}cameraForBounds(u,m){u=ze.convert(u).adjustAntiMeridian();const S=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),S,m)}_cameraForBoxAndBearing(u,m,S,M){const D={top:0,bottom:0,right:0,left:0};if(typeof(M=s.e({padding:D,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const ne=M.padding;M.padding={top:ne,bottom:ne,right:ne,left:ne}}const F=s.e(D,M.padding);M.padding=F;const G=this.transform,Z=new ze(u,m);return this.cameraHelper.cameraForBoxAndBearing(M,F,Z,S,G)}fitBounds(u,m,S){return this._fitInternal(this.cameraForBounds(u,m),m,S)}fitScreenCoordinates(u,m,S,M,D){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(u)),this.transform.screenPointToLocation(s.P.convert(m)),S,M),M,D)}_fitInternal(u,m,S){return u?(delete(m=s.e(u,m)).padding,m.linear?this.easeTo(m,S):this.flyTo(m,S)):this}jumpTo(u,m){this.stop();const S=this._getTransformForUpdate();let M=!1,D=!1,F=!1;const G=S.zoom;this.cameraHelper.handleJumpToCenterZoom(S,u);const Z=S.zoom!==G;return"elevation"in u&&S.elevation!==+u.elevation&&S.setElevation(+u.elevation),"bearing"in u&&S.bearing!==+u.bearing&&(M=!0,S.setBearing(+u.bearing)),"pitch"in u&&S.pitch!==+u.pitch&&(D=!0,S.setPitch(+u.pitch)),"roll"in u&&S.roll!==+u.roll&&(F=!0,S.setRoll(+u.roll)),u.padding==null||S.isPaddingEqual(u.padding)||S.setPadding(u.padding),this._applyUpdatedTransform(S),this.fire(new s.l("movestart",m)).fire(new s.l("move",m)),Z&&this.fire(new s.l("zoomstart",m)).fire(new s.l("zoom",m)).fire(new s.l("zoomend",m)),M&&this.fire(new s.l("rotatestart",m)).fire(new s.l("rotate",m)).fire(new s.l("rotateend",m)),D&&this.fire(new s.l("pitchstart",m)).fire(new s.l("pitch",m)).fire(new s.l("pitchend",m)),F&&this.fire(new s.l("rollstart",m)).fire(new s.l("roll",m)).fire(new s.l("rollend",m)),this.fire(new s.l("moveend",m))}calculateCameraOptionsFromTo(u,m,S,M=0){const D=s.$.fromLngLat(u,m),F=s.$.fromLngLat(S,M),G=F.x-D.x,Z=F.y-D.y,ne=F.z-D.z,he=Math.hypot(G,Z,ne);if(he===0)throw new Error("Can't calculate camera options with same From and To");const ye=Math.hypot(G,Z),_e=s.ah(this.transform.cameraToCenterDistance/he/this.transform.tileSize),Ie=180*Math.atan2(G,-Z)/Math.PI;let De=180*Math.acos(ye/he)/Math.PI;return De=ne<0?90-De:90+De,{center:F.toLngLat(),elevation:M,zoom:_e,pitch:De,bearing:Ie}}calculateCameraOptionsFromCameraLngLatAltRotation(u,m,S,M,D){const F=this.transform.calculateCenterFromCameraLngLatAlt(u,m,S,M);return{center:F.center,elevation:F.elevation,zoom:F.zoom,bearing:S,pitch:M,roll:D}}easeTo(u,m){this._stop(!1,u.easeId),((u=s.e({offset:[0,0],duration:500,easing:s.cd},u)).animate===!1||!u.essential&&p.prefersReducedMotion)&&(u.duration=0);const S=this._getTransformForUpdate(),M=this.getBearing(),D=S.pitch,F=S.roll,G="bearing"in u?this._normalizeBearing(u.bearing,M):M,Z="pitch"in u?+u.pitch:D,ne="roll"in u?this._normalizeBearing(u.roll,F):F,he="padding"in u?u.padding:S.padding,ye=s.P.convert(u.offset);let _e,Ie;u.around&&(_e=s.Q.convert(u.around),Ie=S.locationToScreenPoint(_e));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ye=this.cameraHelper.handleEaseTo(S,{bearing:G,pitch:Z,roll:ne,padding:he,around:_e,aroundPoint:Ie,offsetAsPoint:ye,offset:u.offset,zoom:u.zoom,center:u.center});return this._rotating=this._rotating||M!==G,this._pitching=this._pitching||Z!==D,this._rolling=this._rolling||ne!==F,this._padding=!S.isPaddingEqual(he),this._zooming=this._zooming||Ye.isZooming,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,De),this.terrain&&this._prepareElevation(Ye.elevationCenter),this._ease(Ke=>{Ye.easeFunc(Ke),this.terrain&&!u.freezeElevation&&this._updateElevation(Ke),this._applyUpdatedTransform(S),this._fireMoveEvents(m)},Ke=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m,Ke)},u),this}_prepareEase(u,m,S={}){this._moving=!0,m||S.moving||this.fire(new s.l("movestart",u)),this._zooming&&!S.zooming&&this.fire(new s.l("zoomstart",u)),this._rotating&&!S.rotating&&this.fire(new s.l("rotatestart",u)),this._pitching&&!S.pitching&&this.fire(new s.l("pitchstart",u)),this._rolling&&!S.rolling&&this.fire(new s.l("rollstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const S=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(S-(m-(S*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,u))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(u){if(!this.terrain&&u.elevation>=0&&u.pitch<=90)return{};const m=u.getCameraLngLat(),S=u.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(m,u.zoom):0;if(S<M){const D=this.calculateCameraOptionsFromTo(m,M,u.center,u.elevation);return{pitch:D.pitch,zoom:D.zoom}}return{}}_applyUpdatedTransform(u){const m=[];if(m.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&m.push(M=>this.transformCameraUpdate(M)),!m.length)return;const S=u.clone();for(const M of m){const D=S.clone(),{center:F,zoom:G,roll:Z,pitch:ne,bearing:he,elevation:ye}=M(D);F&&D.setCenter(F),ye!==void 0&&D.setElevation(ye),G!==void 0&&D.setZoom(G),Z!==void 0&&D.setRoll(Z),ne!==void 0&&D.setPitch(ne),he!==void 0&&D.setBearing(he),S.apply(D)}this.transform.apply(S)}_fireMoveEvents(u){this.fire(new s.l("move",u)),this._zooming&&this.fire(new s.l("zoom",u)),this._rotating&&this.fire(new s.l("rotate",u)),this._pitching&&this.fire(new s.l("pitch",u)),this._rolling&&this.fire(new s.l("roll",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const S=this._zooming,M=this._rotating,D=this._pitching,F=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,S&&this.fire(new s.l("zoomend",u)),M&&this.fire(new s.l("rotateend",u)),D&&this.fire(new s.l("pitchend",u)),F&&this.fire(new s.l("rollend",u)),this.fire(new s.l("moveend",u))}flyTo(u,m){if(!u.essential&&p.prefersReducedMotion){const tn=s.O(u,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(tn,m)}this.stop(),u=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cd},u);const S=this._getTransformForUpdate(),M=S.bearing,D=S.pitch,F=S.roll,G=S.padding,Z="bearing"in u?this._normalizeBearing(u.bearing,M):M,ne="pitch"in u?+u.pitch:D,he="roll"in u?this._normalizeBearing(u.roll,F):F,ye="padding"in u?u.padding:S.padding,_e=s.P.convert(u.offset);let Ie=S.centerPoint.add(_e);const De=S.screenPointToLocation(Ie),Ye=this.cameraHelper.handleFlyTo(S,{bearing:Z,pitch:ne,roll:he,padding:ye,locationAtOffset:De,offsetAsPoint:_e,center:u.center,minZoom:u.minZoom,zoom:u.zoom});let Ke=u.curve;const tt=Math.max(S.width,S.height),at=tt/Ye.scaleOfZoom,ht=Ye.pixelPathLength;typeof Ye.scaleOfMinZoom=="number"&&(Ke=Math.sqrt(tt/Ye.scaleOfMinZoom/ht*2));const vt=Ke*Ke;function gt(tn){const An=(at*at-tt*tt+(tn?-1:1)*vt*vt*ht*ht)/(2*(tn?at:tt)*vt*ht);return Math.log(Math.sqrt(An*An+1)-An)}function Tt(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function bt(tn){return(Math.exp(tn)+Math.exp(-tn))/2}const Nt=gt(!1);let Ut=function(tn){return bt(Nt)/bt(Nt+Ke*tn)},nn=function(tn){return tt*((bt(Nt)*(Tt(An=Nt+Ke*tn)/bt(An))-Tt(Nt))/vt)/ht;var An},an=(gt(!0)-Nt)/Ke;if(Math.abs(ht)<2e-6||!isFinite(an)){if(Math.abs(tt-at)<1e-6)return this.easeTo(u,m);const tn=at<tt?-1:1;an=Math.abs(Math.log(at/tt))/Ke,nn=()=>0,Ut=An=>Math.exp(tn*Ke*An)}return u.duration="duration"in u?+u.duration:1e3*an/("screenSpeed"in u?+u.screenSpeed/Ke:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=M!==Z,this._pitching=ne!==D,this._rolling=he!==F,this._padding=!S.isPaddingEqual(ye),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Ye.targetCenter),this._ease(tn=>{const An=tn*an,Sn=1/Ut(An),pn=nn(An);this._rotating&&S.setBearing(s.B.number(M,Z,tn)),this._pitching&&S.setPitch(s.B.number(D,ne,tn)),this._rolling&&S.setRoll(s.B.number(F,he,tn)),this._padding&&(S.interpolatePadding(G,ye,tn),Ie=S.centerPoint.add(_e)),Ye.easeFunc(tn,Sn,pn,Ie),this.terrain&&!u.freezeElevation&&this._updateElevation(tn),this._applyUpdatedTransform(S),this._fireMoveEvents(m)},()=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){var S;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,m)}return u||(S=this.handlers)===null||S===void 0||S.stop(!1),this}_ease(u,m,S){S.animate===!1||S.duration===0?(u(1),m()):(this._easeStart=p.now(),this._easeOptions=S,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=s.aL(u,-180,180);const S=Math.abs(u-m);return Math.abs(u-360-m)<S&&(u-=360),Math.abs(u+360-m)<S&&(u+=360),u}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(u),this.transform.tileZoom):null}}const Jn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class hr{constructor(u=Jn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=v.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=v.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const S=this._map._getUIString(`AttributionControl.${m}`);u.title=S,u.setAttribute("aria-label",S)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const m=this._map.style.sourceCaches;for(const M in m){const D=m[M];if(D.used||D.usedForTerrain){const F=D.getSource();F.attribution&&u.indexOf(F.attribution)<0&&u.push(F.attribution)}}u=u.filter(M=>String(M).trim()),u.sort((M,D)=>M.length-D.length),u=u.filter((M,D)=>{for(let F=D+1;F<u.length;F++)if(u[F].indexOf(M)>=0)return!1;return!0});const S=u.join(" | ");S!==this._attribHTML&&(this._attribHTML=S,u.length?(this._innerContainer.innerHTML=v.sanitize(S),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xp{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const S=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&S.classList.add("maplibregl-compact"):S.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=v.create("div","maplibregl-ctrl");const m=v.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){v.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class N_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,S=m?this._queue.concat(m):this._queue;for(const M of S)if(M.id===u)return void(M.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const S of m)if(!S.cancelled&&(S.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var $_=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class zo extends s.E{constructor(u){super(),this._lastTilesetChange=p.now(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=u._source.tileSize*2**this.deltaZoom,u.usedForTerrain=!0,u.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,m){this.sourceCache.update(u,m),this._renderableTilesKeys=[];const S={};for(const M of it(u,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))S[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(M.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[M.key]=new mt(M,this.tileSize),this._lastTilesetChange=p.now());for(const M in this._tiles)S[M]||delete this._tiles[M]}freeRtt(u){for(const m in this._tiles){const S=this._tiles[m];(!u||S.tileID.equals(u)||S.tileID.isChildOf(u)||u.isChildOf(S.tileID))&&(S.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u,m){return m?this._getTerrainCoordsForTileRanges(u,m):this._getTerrainCoordsForRegularTile(u)}_getTerrainCoordsForRegularTile(u){const m={};for(const S of this._renderableTilesKeys){const M=this._tiles[S].tileID,D=u.clone(),F=s.b2();if(M.canonical.equals(u.canonical))s.bQ(F,0,s.Z,s.Z,0,0,1);else if(M.canonical.isChildOf(u.canonical)){const G=M.canonical.z-u.canonical.z,Z=M.canonical.x-(M.canonical.x>>G<<G),ne=M.canonical.y-(M.canonical.y>>G<<G),he=s.Z>>G;s.bQ(F,0,he,he,0,0,1),s.L(F,F,[-Z*he,-ne*he,0])}else{if(!u.canonical.isChildOf(M.canonical))continue;{const G=u.canonical.z-M.canonical.z,Z=u.canonical.x-(u.canonical.x>>G<<G),ne=u.canonical.y-(u.canonical.y>>G<<G),he=s.Z>>G;s.bQ(F,0,s.Z,s.Z,0,0,1),s.L(F,F,[Z*he,ne*he,0]),s.M(F,F,[1/2**G,1/2**G,0])}}D.terrainRttPosMatrix32f=new Float32Array(F),m[S]=D}return m}_getTerrainCoordsForTileRanges(u,m){const S={};for(const M of this._renderableTilesKeys){const D=this._tiles[M].tileID;if(!this._isWithinTileRanges(D,m))continue;const F=u.clone(),G=s.b2();if(D.canonical.z===u.canonical.z){const Z=u.canonical.x-D.canonical.x,ne=u.canonical.y-D.canonical.y;s.bQ(G,0,s.Z,s.Z,0,0,1),s.L(G,G,[Z*s.Z,ne*s.Z,0])}else if(D.canonical.z>u.canonical.z){const Z=D.canonical.z-u.canonical.z,ne=D.canonical.x-(D.canonical.x>>Z<<Z),he=D.canonical.y-(D.canonical.y>>Z<<Z),ye=u.canonical.x-(D.canonical.x>>Z),_e=u.canonical.y-(D.canonical.y>>Z),Ie=s.Z>>Z;s.bQ(G,0,Ie,Ie,0,0,1),s.L(G,G,[-ne*Ie+ye*s.Z,-he*Ie+_e*s.Z,0])}else{const Z=u.canonical.z-D.canonical.z,ne=u.canonical.x-(u.canonical.x>>Z<<Z),he=u.canonical.y-(u.canonical.y>>Z<<Z),ye=(u.canonical.x>>Z)-D.canonical.x,_e=(u.canonical.y>>Z)-D.canonical.y,Ie=s.Z<<Z;s.bQ(G,0,Ie,Ie,0,0,1),s.L(G,G,[ne*s.Z+ye*Ie,he*s.Z+_e*Ie,0])}F.terrainRttPosMatrix32f=new Float32Array(G),S[M]=F}return S}getSourceTile(u,m){const S=this.sourceCache._source;let M=u.overscaledZ-this.deltaZoom;if(M>S.maxzoom&&(M=S.maxzoom),M<S.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(M).key);let D=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!D||!D.dem)&&m)for(;M>=S.minzoom&&(!D||!D.dem);)D=this.sourceCache.getTileByID(u.scaledTo(M--).key);return D}anyTilesAfterTime(u=Date.now()){return this._lastTilesetChange>=u}_isWithinTileRanges(u,m){return m[u.canonical.z]&&u.canonical.x>=m[u.canonical.z].minTileX&&u.canonical.x<=m[u.canonical.z].maxTileX&&u.canonical.y>=m[u.canonical.z].minTileY&&u.canonical.y<=m[u.canonical.z].maxTileY}}class xS{constructor(u,m,S){this._meshCache={},this.painter=u,this.sourceCache=new zo(m),this.options=S,this.exaggeration=typeof S.exaggeration=="number"?S.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,S,M=s.Z){var D;if(!(m>=0&&m<M&&S>=0&&S<M))return 0;const F=this.getTerrainData(u),G=(D=F.tile)===null||D===void 0?void 0:D.dem;if(!G)return 0;const Z=s.ch([],[m/M*s.Z,S/M*s.Z],F.u_terrain_matrix),ne=[Z[0]*G.dim,Z[1]*G.dim],he=Math.floor(ne[0]),ye=Math.floor(ne[1]),_e=ne[0]-he,Ie=ne[1]-ye;return G.get(he,ye)*(1-_e)*(1-Ie)+G.get(he+1,ye)*_e*(1-Ie)+G.get(he,ye+1)*(1-_e)*Ie+G.get(he+1,ye+1)*_e*Ie}getElevationForLngLatZoom(u,m){if(!s.ci(m,u.wrap()))return 0;const{tileID:S,mercatorX:M,mercatorY:D}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(S,M%s.Z,D%s.Z,s.Z)}getElevation(u,m,S,M=s.Z){return this.getDEMElevation(u,m,S,M)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const M=this.painter.context,D=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(M,D,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(M,new s.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const m=this.sourceCache.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const M=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new H(M,m.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),m.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const S=m&&m+m.tileID.key+u.key;if(S&&!this._demMatrixCache[S]){const M=this.sourceCache.sourceCache._source.maxzoom;let D=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=M?D=u.canonical.z-M:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=u.canonical.x-(u.canonical.x>>D<<D),G=u.canonical.y-(u.canonical.y>>D<<D),Z=s.cj(new Float64Array(16),[1/(s.Z<<D),1/(s.Z<<D),0]);s.L(Z,Z,[F*s.Z,G*s.Z,0]),this._demMatrixCache[u.key]={matrix:Z,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:S?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,S=m.width/devicePixelRatio,M=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===S&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(m.context,{width:S,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(m.context,{width:S,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(S,M,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,S,M))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let D=0,F=0;D<this._coordsTextureSize;D++)for(let G=0;G<this._coordsTextureSize;G++,F+=4)m[F+0]=255&G,m[F+1]=255&D,m[F+2]=G>>8<<4|D>>8,m[F+3]=0;const S=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),M=new H(u,S,u.gl.RGBA,{premultiply:!1});return M.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const m=new Uint8Array(4),S=this.painter.context,M=S.gl,D=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),F=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),G=Math.round(this.painter.height/devicePixelRatio);S.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(D,G-F-1,1,1,M.RGBA,M.UNSIGNED_BYTE,m),S.bindFramebuffer.set(null);const Z=m[0]+(m[2]>>4<<8),ne=m[1]+((15&m[2])<<8),he=this.coordsIndex[255-m[3]],ye=he&&this.sourceCache.getTileByID(he);if(!ye)return null;const _e=this._coordsTextureSize,Ie=(1<<ye.tileID.canonical.z)*_e;return new s.$((ye.tileID.canonical.x*_e+Z)/Ie+ye.tileID.wrap,(ye.tileID.canonical.y*_e+ne)/Ie,this.getElevation(ye.tileID,Z,ne,_e))}depthAtPoint(u){const m=new Uint8Array(4),S=this.painter.context,M=S.gl;return S.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,m),S.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(u){var m;const S=((m=this.painter.style.projection)===null||m===void 0?void 0:m.transitionState)>0,M=S&&u.canonical.y===0,D=S&&u.canonical.y===(1<<u.canonical.z)-1,F=`m_${M?"n":""}_${D?"s":""}`;if(this._meshCache[F])return this._meshCache[F];const G=this.painter.context,Z=new s.ck,ne=new s.aK,he=this.meshSize,ye=s.Z/he,_e=he*he;for(let bt=0;bt<=he;bt++)for(let Nt=0;Nt<=he;Nt++)Z.emplaceBack(Nt*ye,bt*ye,0);for(let bt=0;bt<_e;bt+=he+1)for(let Nt=0;Nt<he;Nt++)ne.emplaceBack(Nt+bt,he+Nt+bt+1,he+Nt+bt+2),ne.emplaceBack(Nt+bt,he+Nt+bt+2,Nt+bt+1);const Ie=Z.length,De=Ie+(he+1),Ye=(he+1)*he,Ke=M?s.b9:0,tt=M?0:1,at=D?s.ba:s.Z,ht=D?0:1;for(let bt=0;bt<=he;bt++)Z.emplaceBack(bt*ye,Ke,tt);for(let bt=0;bt<=he;bt++)Z.emplaceBack(bt*ye,at,ht);for(let bt=0;bt<he;bt++)ne.emplaceBack(Ye+bt,De+bt,De+bt+1),ne.emplaceBack(Ye+bt,De+bt+1,Ye+bt+1),ne.emplaceBack(0+bt,Ie+bt+1,Ie+bt),ne.emplaceBack(0+bt,0+bt+1,Ie+bt+1);const vt=Z.length,gt=vt+2*(he+1);for(const bt of[0,1])for(let Nt=0;Nt<=he;Nt++)for(const Ut of[0,1])Z.emplaceBack(bt*s.Z,Nt*ye,Ut);for(let bt=0;bt<2*he;bt+=2)ne.emplaceBack(vt+bt,vt+bt+1,vt+bt+3),ne.emplaceBack(vt+bt,vt+bt+3,vt+bt+2),ne.emplaceBack(gt+bt,gt+bt+3,gt+bt+1),ne.emplaceBack(gt+bt,gt+bt+2,gt+bt+3);const Tt=new hh(G.createVertexBuffer(Z,$_.members),G.createIndexBuffer(ne),s.aJ.simpleSegment(0,0,Z.length,ne.length));return this._meshCache[F]=Tt,Tt}getMeshFrameDelta(u){return 2*Math.PI*s.bu/Math.pow(2,Math.max(u,0))/5}getMinTileElevationForLngLatZoom(u,m){var S;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(S=this.getMinMaxElevation(M).minElevation)!==null&&S!==void 0?S:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,S={minElevation:null,maxElevation:null};return m&&m.dem&&(S.minElevation=m.dem.min*this.exaggeration,S.maxElevation=m.dem.max*this.exaggeration),S}_getOverscaledTileIDFromLngLatZoom(u,m){const S=s.$.fromLngLat(u.wrap()),M=(1<<m)*s.Z,D=S.x*M,F=S.y*M,G=Math.floor(D/s.Z),Z=Math.floor(F/s.Z);return{tileID:new s.Y(m,0,m,G,Z),mercatorX:D,mercatorY:F}}}class Tl{constructor(u,m,S){this._context=u,this._size=m,this._tileSize=S,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),S=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return S.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(S.texture),{id:u,fbo:m,texture:S,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(m=>u.id!==m),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const Th={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Sp{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new Tl(u.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(S=>!u._layers[S].isHidden(m)),this._coordsAscending={};for(const S in u.sourceCaches){this._coordsAscending[S]={};const M=u.sourceCaches[S].getVisibleCoordinates(),D=u.sourceCaches[S].getSource(),F=D instanceof It?D.terrainTileRanges:null;for(const G of M){const Z=this.terrain.sourceCache.getTerrainCoords(G,F);for(const ne in Z)this._coordsAscending[S][ne]||(this._coordsAscending[S][ne]=[]),this._coordsAscending[S][ne].push(Z[ne])}}this._coordsAscendingStr={};for(const S of u._order){const M=u._layers[S],D=M.source;if(Th[M.type]&&!this._coordsAscendingStr[D]){this._coordsAscendingStr[D]={};for(const F in this._coordsAscending[D])this._coordsAscendingStr[D][F]=this._coordsAscending[D][F].map(G=>G.key).sort().join()}}for(const S of this._renderableTiles)for(const M in this._coordsAscendingStr){const D=this._coordsAscendingStr[M][S.tileID.key];D&&D!==S.rttCoords[M]&&(S.rtt=[])}}renderLayer(u,m){if(u.isHidden(this.painter.transform.zoom))return!1;const S=Object.assign(Object.assign({},m),{isRenderingToTexture:!0}),M=u.type,D=this.painter,F=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Th[M]&&(this._prevType&&Th[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(u.id),!F))return!0;if(Th[this._prevType]||Th[M]&&F){this._prevType=M;const G=this._stacks.length-1,Z=this._stacks[G]||[];for(const ne of this._renderableTiles){if(this.pool.isFull()&&(E_(this.painter,this.terrain,this._rttTiles,S),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ne),ne.rtt[G]){const ye=this.pool.getObjectForId(ne.rtt[G].id);if(ye.stamp===ne.rtt[G].stamp){this.pool.useObject(ye);continue}}const he=this.pool.getOrCreateFreeObject();this.pool.useObject(he),this.pool.stampObject(he),ne.rtt[G]={id:he.id,stamp:he.stamp},D.context.bindFramebuffer.set(he.fbo.framebuffer),D.context.clear({color:s.b7.transparent,stencil:0}),D.currentStencilSource=void 0;for(let ye=0;ye<Z.length;ye++){const _e=D.style._layers[Z[ye]],Ie=_e.source?this._coordsAscending[_e.source][ne.tileID.key]:[ne.tileID];D.context.viewport.set([0,0,he.fbo.width,he.fbo.height]),D._renderTileClippingMasks(_e,Ie,!0),D.renderLayer(D,D.style.sourceCaches[_e.source],_e,Ie,S),_e.source&&(ne.rttCoords[_e.source]=this._coordsAscendingStr[_e.source][ne.tileID.key])}}return E_(this.painter,this.terrain,this._rttTiles,S),this._rttTiles=[],this.pool.freeAllObjects(),Th[M]}return!1}}const ua={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ba=l,V_={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Jn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Cp={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ig{constructor(u,m,S=!1){this.mousedown=D=>{this.startMove(D,v.mousePos(this.element,D)),v.addEventListener(window,"mousemove",this.mousemove),v.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=D=>{this.move(D,v.mousePos(this.element,D))},this.mouseup=D=>{this._rotatePitchHanlder.dragEnd(D),this.offTemp()},this.touchstart=D=>{D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,D.targetTouches)[0],this.startMove(D,this._startPos),v.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.addEventListener(window,"touchend",this.touchend))},this.touchmove=D=>{D.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,D.targetTouches)[0],this.move(D,this._lastPos))},this.touchend=D=>{D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=m;const M=new R_;this._rotatePitchHanlder=new fu({clickTolerance:3,move:(D,F)=>{const G=m.getBoundingClientRect(),Z=new s.P((G.bottom-G.top)/2,(G.right-G.left)/2);return{bearingDelta:s.cc(new s.P(D.x,F.y),F,Z),pitchDelta:S?-.5*(F.y-D.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=u,v.addEventListener(m,"mousedown",this.mousedown),v.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(m,"touchcancel",this.reset)}startMove(u,m){this._rotatePitchHanlder.dragStart(u,m),v.disableDrag()}move(u,m){const S=this.map,{bearingDelta:M,pitchDelta:D}=this._rotatePitchHanlder.dragMove(u,m)||{};M&&S.setBearing(S.getBearing()+M),D&&S.setPitch(S.getPitch()+D)}off(){const u=this.element;v.removeEventListener(u,"mousedown",this.mousedown),v.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend),v.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){v.enableDrag(),v.removeEventListener(window,"mousemove",this.mousemove),v.removeEventListener(window,"mouseup",this.mouseup),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend)}}let vu;function ag(P,u,m,S=!1){if(S||!m.getCoveringTilesDetailsProvider().allowWorldCopies())return P==null?void 0:P.wrap();const M=new s.Q(P.lng,P.lat);if(P=new s.Q(P.lng,P.lat),u){const D=new s.Q(P.lng-360,P.lat),F=new s.Q(P.lng+360,P.lat),G=m.locationToScreenPoint(P).distSqr(u);m.locationToScreenPoint(D).distSqr(u)<G?P=D:m.locationToScreenPoint(F).distSqr(u)<G&&(P=F)}for(;Math.abs(P.lng-m.center.lng)>180;){const D=m.locationToScreenPoint(P);if(D.x>=0&&D.y>=0&&D.x<=m.width&&D.y<=m.height)break;P.lng>m.center.lng?P.lng-=360:P.lng+=360}return P.lng!==M.lng&&m.isPointOnMapSurface(m.locationToScreenPoint(P))?P:M}const Tp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mh(P,u,m){const S=P.classList;for(const M in Tp)S.remove(`maplibregl-${m}-anchor-${M}`);S.add(`maplibregl-${m}-anchor-${u}`)}class Mp extends s.E{constructor(u){if(super(),this._onKeyPress=m=>{const S=m.code,M=m.charCode||m.keyCode;S!=="Space"&&S!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=m=>{const S=m.originalEvent.target,M=this._element;this._popup&&(S===M||M.contains(S))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const S=this._map.loaded()&&!this._map.isMoving();((m==null?void 0:m.type)==="terrain"||(m==null?void 0:m.type)==="render"&&!S)&&this._map.once("render",this._update),this._lngLat=ag(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||m&&m.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,`${Tp[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${M}`),p.frameAsync(new AbortController).then(()=>{this._updateOpacity(m&&m.type==="moveend")}).catch(()=>{})},this._onMove=m=>{if(!this._isDragging){const S=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=S}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._subpixelPositioning=u&&u.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=s.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div");const m=v.createNS("http://www.w3.org/2000/svg","svg"),S=41,M=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${S}px`),m.setAttributeNS(null,"width",`${M}px`),m.setAttributeNS(null,"viewBox",`0 0 ${M} ${S}`);const D=v.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const F=v.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const G=v.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(3.0, 29.0)"),G.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of Z){const at=v.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",tt.rx),at.setAttributeNS(null,"ry",tt.ry),G.appendChild(at)}const ne=v.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill",this._color);const he=v.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ne.appendChild(he);const ye=v.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");const _e=v.createNS("http://www.w3.org/2000/svg","path");_e.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(_e);const Ie=v.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const De=v.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ye=v.createNS("http://www.w3.org/2000/svg","circle");Ye.setAttributeNS(null,"fill","#000000"),Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"cx","5.5"),Ye.setAttributeNS(null,"cy","5.5"),Ye.setAttributeNS(null,"r","5.4999962");const Ke=v.createNS("http://www.w3.org/2000/svg","circle");Ke.setAttributeNS(null,"fill","#FFFFFF"),Ke.setAttributeNS(null,"cx","5.5"),Ke.setAttributeNS(null,"cy","5.5"),Ke.setAttributeNS(null,"r","5.4999962"),De.appendChild(Ye),De.appendChild(Ke),F.appendChild(G),F.appendChild(ne),F.appendChild(ye),F.appendChild(Ie),F.appendChild(De),m.appendChild(F),m.setAttributeNS(null,"height",S*this._scale+"px"),m.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(m),this._offset=s.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),Mh(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",u._getUIString("Marker.Title")),u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),u.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.Q.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const M=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(u){return this._subpixelPositioning=u,this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var m,S;if(!(!((m=this._map)===null||m===void 0)&&m.terrain)){const ye=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ye&&(this._element.style.opacity=ye))}if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,D=M.terrain.depthAtPoint(this._pos),F=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,F)-D<.006)return void(this._element.style.opacity=this._opacity);const G=-this._offset.y/M.transform.pixelsPerMeter,Z=Math.sin(M.getPitch()*Math.PI/180)*G,ne=M.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),he=M.transform.lngLatToCameraDepth(this._lngLat,F+Z)-ne>.006;!((S=this._popup)===null||S===void 0)&&S.isOpen()&&he&&this._popup.remove(),this._element.style.opacity=he?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=s.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,m){return(this._opacity===void 0||u===void 0&&m===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const H_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let kh=0,Sd=!1;const j_={maxWidth:100,unit:"metric"};function og(P,u,m){const S=m&&m.maxWidth||100,M=P._container.clientHeight/2,D=P._container.clientWidth/2,F=P.unproject([D-S/2,M]),G=P.unproject([D+S/2,M]),Z=Math.round(P.project(G).x-P.project(F).x),ne=Math.min(S,Z,P._container.clientWidth),he=F.distanceTo(G);if(m&&m.unit==="imperial"){const ye=3.2808*he;ye>5280?Cd(u,ne,ye/5280,P._getUIString("ScaleControl.Miles")):Cd(u,ne,ye,P._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Cd(u,ne,he/1852,P._getUIString("ScaleControl.NauticalMiles")):he>=1e3?Cd(u,ne,he/1e3,P._getUIString("ScaleControl.Kilometers")):Cd(u,ne,he,P._getUIString("ScaleControl.Meters"))}function Cd(P,u,m,S){const M=function(D){const F=Math.pow(10,`${Math.floor(D)}`.length-1);let G=D/F;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:function(Z){const ne=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*ne)/ne}(G),F*G}(m);P.style.width=u*(M/m)+"px",P.innerHTML=`${M}&nbsp;${S}`}const U_={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},sg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function lg(P){if(P){if(typeof P=="number"){const u=Math.round(Math.abs(P)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,P),"top-left":new s.P(u,u),"top-right":new s.P(-u,u),bottom:new s.P(0,-P),"bottom-left":new s.P(u,-u),"bottom-right":new s.P(-u,-u),left:new s.P(P,0),right:new s.P(-P,0)}}if(P instanceof s.P||Array.isArray(P)){const u=s.P.convert(P);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:s.P.convert(P.center||[0,0]),top:s.P.convert(P.top||[0,0]),"top-left":s.P.convert(P["top-left"]||[0,0]),"top-right":s.P.convert(P["top-right"]||[0,0]),bottom:s.P.convert(P.bottom||[0,0]),"bottom-left":s.P.convert(P["bottom-left"]||[0,0]),"bottom-right":s.P.convert(P["bottom-right"]||[0,0]),left:s.P.convert(P.left||[0,0]),right:s.P.convert(P.right||[0,0])}}return lg(new s.P(0,0))}const W_=l;o.AJAXError=s.co,o.Event=s.l,o.Evented=s.E,o.LngLat=s.Q,o.MercatorCoordinate=s.$,o.Point=s.P,o.addProtocol=s.cp,o.config=s.a,o.removeProtocol=s.cq,o.AttributionControl=hr,o.BoxZoomHandler=hS,o.CanvasSource=Ft,o.CooperativeGesturesHandler=B_,o.DoubleClickZoomHandler=bS,o.DragPanHandler=Fi,o.DragRotateHandler=bp,o.EdgeInsets=Qf,o.FullscreenControl=class extends s.E{constructor(P={}){super(),this._onFullscreenChange=()=>{var u;let m=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=m==null?void 0:m.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,P&&P.container&&(P.container instanceof HTMLElement?this._container=P.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){v.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const P=this._fullscreenButton=v.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);v.create("span","maplibregl-ctrl-icon",P).setAttribute("aria-hidden","true"),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=_t,o.GeolocateControl=class extends s.E{constructor(P){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new s.Q(u.coords.longitude,u.coords.latitude),S=u.coords.accuracy,M=this._map.getBearing(),D=s.e({bearing:M},this.options.fitBoundsOptions),F=ze.fromLngLat(m,S);this._map.fitBounds(F,D,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new s.Q(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Sd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=v.create("button","maplibregl-ctrl-geolocate",this._container),v.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=u=>{if(this._map){if(u===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Mp({element:this._dotElement}),this._circleElement=v.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},H_,P)}onAdd(P){return this._map=P,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(u=!1){if(vu!==void 0&&!u)return vu;if(window.navigator.permissions===void 0)return vu=!!window.navigator.geolocation,vu;try{vu=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{vu=!!window.navigator.geolocation}return vu})}().then(u=>this._finishSetupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kh=0,Sd=!1}_isOutOfMapMaxBounds(P){const u=this._map.getMaxBounds(),m=P.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const P=this._map.getBounds(),u=P.getSouthEast(),m=P.getNorthEast(),S=u.distanceTo(m),M=Math.ceil(this._accuracy/(S/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kh--,Sd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let P;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),kh++,kh>1?(P={maximumAge:6e5,timeout:0},Sd=!0):(P=this.options.positionOptions,Sd=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var P;const u=(P=this._map.getProjection())===null||P===void 0?void 0:P.type;this._map.setProjection(u!=="mercator"&&u?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var P;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((P=this._map.getProjection())===null||P===void 0?void 0:P.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(P){return this._map=P,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=v.create("button","maplibregl-ctrl-globe",this._container),v.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=I_,o.ImageSource=It,o.KeyboardHandler=tg,o.LngLatBounds=ze,o.LogoControl=xp,o.Map=class extends rg{constructor(P){var u,m;s.cl.mark(s.cm.create);const S=Object.assign(Object.assign(Object.assign({},V_),P),{canvasContextAttributes:Object.assign(Object.assign({},V_.canvasContextAttributes),P.canvasContextAttributes)});if(S.minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new bl,D=new np;if(S.minZoom!==void 0&&M.setMinZoom(S.minZoom),S.maxZoom!==void 0&&M.setMaxZoom(S.maxZoom),S.minPitch!==void 0&&M.setMinPitch(S.minPitch),S.maxPitch!==void 0&&M.setMaxPitch(S.maxPitch),S.renderWorldCopies!==void 0&&M.setRenderWorldCopies(S.renderWorldCopies),super(M,D,{bearingSnap:S.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new N_,this._controls=[],this._mapId=s.a4(),this._contextLost=G=>{G.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:G}))},this._contextRestored=G=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:G}))},this._onMapScroll=G=>{if(G.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=S.interactive,this._maxTileCacheSize=S.maxTileCacheSize,this._maxTileCacheZoomLevels=S.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},S.canvasContextAttributes),this._trackResize=S.trackResize===!0,this._bearingSnap=S.bearingSnap,this._centerClampedToGround=S.centerClampedToGround,this._refreshExpiredTiles=S.refreshExpiredTiles===!0,this._fadeDuration=S.fadeDuration,this._crossSourceCollisions=S.crossSourceCollisions===!0,this._collectResourceTiming=S.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ua),S.locale),this._clickTolerance=S.clickTolerance,this._overridePixelRatio=S.pixelRatio,this._maxCanvasSize=S.maxCanvasSize,this.transformCameraUpdate=S.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=S.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=I.addThrottleControl(()=>this.isMoving()),this._requestManager=new O(S.transformRequest),typeof S.container=="string"){if(this._container=document.getElementById(S.container),!this._container)throw new Error(`Container '${S.container}' not found.`)}else{if(!(S.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(S.maxBounds&&this.setMaxBounds(S.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let G=!1;const Z=P_(ne=>{this._trackResize&&!this._removed&&(this.resize(ne),this.redraw())},50);this._resizeObserver=new ResizeObserver(ne=>{G?Z(ne):G=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Cl(this,S),this._hash=S.hash&&new I_(typeof S.hash=="string"&&S.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,roll:S.roll}),S.bounds&&(this.resize(),this.fitBounds(S.bounds,s.e({},S.fitBoundsOptions,{duration:0}))));const F=typeof S.style=="string"||((m=(u=S.style)===null||u===void 0?void 0:u.projection)===null||m===void 0?void 0:m.type)!=="globe";this.resize(null,F),this._localIdeographFontFamily=S.localIdeographFontFamily,this._validateStyle=S.validateStyle,S.style&&this.setStyle(S.style,{localIdeographFontFamily:S.localIdeographFontFamily}),S.attributionControl&&this.addControl(new hr(typeof S.attributionControl=="boolean"?void 0:S.attributionControl)),S.maplibreLogo&&this.addControl(new xp,S.logoPosition),this.on("style.load",()=>{if(F||this._resizeTransform(),this.transform.unmodified){const G=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(G)}}),this.on("data",G=>{this._update(G.dataType==="style"),this.fire(new s.l(`${G.dataType}data`,G))}),this.on("dataloading",G=>{this.fire(new s.l(`${G.dataType}dataloading`,G))}),this.on("dataabort",G=>{this.fire(new s.l("sourcedataabort",G))})}_getMapId(){return this._mapId}addControl(P,u){if(u===void 0&&(u=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=P.onAdd(this);this._controls.push(P);const S=this._controlPositions[u];return u.indexOf("bottom")!==-1?S.insertBefore(m,S.firstChild):S.appendChild(m),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(P);return u>-1&&this._controls.splice(u,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}calculateCameraOptionsFromTo(P,u,m,S){return S==null&&this.terrain&&(S=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(P,u,m,S)}resize(P,u=!0){const[m,S]=this._containerDimensions(),M=this._getClampedPixelRatio(m,S);if(this._resizeCanvas(m,S,M),this.painter.resize(m,S,M),this.painter.overLimit()){const F=this.painter.context.gl;this._maxCanvasSize=[F.drawingBufferWidth,F.drawingBufferHeight];const G=this._getClampedPixelRatio(m,S);this._resizeCanvas(m,S,G),this.painter.resize(m,S,G)}this._resizeTransform(u);const D=!this._moving;return D&&(this.stop(),this.fire(new s.l("movestart",P)).fire(new s.l("move",P))),this.fire(new s.l("resize",P)),D&&this.fire(new s.l("moveend",P)),this}_resizeTransform(P=!0){var u;const[m,S]=this._containerDimensions();this.transform.resize(m,S,P),(u=this._requestedCameraState)===null||u===void 0||u.resize(m,S,P)}_getClampedPixelRatio(P,u){const{0:m,1:S}=this._maxCanvasSize,M=this.getPixelRatio(),D=P*M,F=u*M;return Math.min(D>m?m/D:1,F>S?S/F:1)*M}getPixelRatio(){var P;return(P=this._overridePixelRatio)!==null&&P!==void 0?P:devicePixelRatio}setPixelRatio(P){this._overridePixelRatio=P,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(ze.convert(P)),this._update()}setMinZoom(P){if((P=P??-2)>=-2&&P<=this.transform.maxZoom)return this.transform.setMinZoom(P),this._update(),this.getZoom()<P&&this.setZoom(P),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=P??22)>=this.transform.minZoom)return this.transform.setMaxZoom(P),this._update(),this.getZoom()>P&&this.setZoom(P),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=P??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.setMinPitch(P),this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=P??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(P>=this.transform.minPitch)return this.transform.setMaxPitch(P),this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.setRenderWorldCopies(P),this._update()}project(P){return this.transform.locationToScreenPoint(s.Q.convert(P),this.style&&this.terrain)}unproject(P){return this.transform.screenPointToLocation(s.P.convert(P),this.terrain)}isMoving(){var P;return this._moving||((P=this.handlers)===null||P===void 0?void 0:P.isMoving())}isZooming(){var P;return this._zooming||((P=this.handlers)===null||P===void 0?void 0:P.isZooming())}isRotating(){var P;return this._rotating||((P=this.handlers)===null||P===void 0?void 0:P.isRotating())}_createDelegatedListener(P,u,m){if(P==="mouseenter"||P==="mouseover"){let S=!1;return{layers:u,listener:m,delegates:{mousemove:D=>{const F=u.filter(Z=>this.getLayer(Z)),G=F.length!==0?this.queryRenderedFeatures(D.point,{layers:F}):[];G.length?S||(S=!0,m.call(this,new Oo(P,this,D.originalEvent,{features:G}))):S=!1},mouseout:()=>{S=!1}}}}if(P==="mouseleave"||P==="mouseout"){let S=!1;return{layers:u,listener:m,delegates:{mousemove:F=>{const G=u.filter(Z=>this.getLayer(Z));(G.length!==0?this.queryRenderedFeatures(F.point,{layers:G}):[]).length?S=!0:S&&(S=!1,m.call(this,new Oo(P,this,F.originalEvent)))},mouseout:F=>{S&&(S=!1,m.call(this,new Oo(P,this,F.originalEvent)))}}}}{const S=M=>{const D=u.filter(G=>this.getLayer(G)),F=D.length!==0?this.queryRenderedFeatures(M.point,{layers:D}):[];F.length&&(M.features=F,m.call(this,M),delete M.features)};return{layers:u,listener:m,delegates:{[P]:S}}}}_saveDelegatedListener(P,u){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(u)}_removeDelegatedListener(P,u,m){if(!this._delegatedListeners||!this._delegatedListeners[P])return;const S=this._delegatedListeners[P];for(let M=0;M<S.length;M++){const D=S[M];if(D.listener===m&&D.layers.length===u.length&&D.layers.every(F=>u.includes(F))){for(const F in D.delegates)this.off(F,D.delegates[F]);return void S.splice(M,1)}}}on(P,u,m){if(m===void 0)return super.on(P,u);const S=typeof u=="string"?[u]:u,M=this._createDelegatedListener(P,S,m);this._saveDelegatedListener(P,M);for(const D in M.delegates)this.on(D,M.delegates[D]);return{unsubscribe:()=>{this._removeDelegatedListener(P,S,m)}}}once(P,u,m){if(m===void 0)return super.once(P,u);const S=typeof u=="string"?[u]:u,M=this._createDelegatedListener(P,S,m);for(const D in M.delegates){const F=M.delegates[D];M.delegates[D]=(...G)=>{this._removeDelegatedListener(P,S,m),F(...G)}}this._saveDelegatedListener(P,M);for(const D in M.delegates)this.once(D,M.delegates[D]);return this}off(P,u,m){return m===void 0?super.off(P,u):(this._removeDelegatedListener(P,typeof u=="string"?[u]:u,m),this)}queryRenderedFeatures(P,u){if(!this.style)return[];let m;const S=P instanceof s.P||Array.isArray(P),M=S?P:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(S?{}:P)||{},M instanceof s.P||typeof M[0]=="number")m=[s.P.convert(M)];else{const D=s.P.convert(M[0]),F=s.P.convert(M[1]);m=[D,new s.P(F.x,D.y),F,new s.P(D.x,F.y),D]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(P,u){return this.style.querySourceFeatures(P,u)}setStyle(P,u){return(u=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&P?(this._diffStyle(P,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(P,u))}setTransformRequest(P){return this._requestManager.setTransformRequest(P),this}_getUIString(P){const u=this._locale[P];if(u==null)throw new Error(`Missing UI string '${P}'`);return u}_updateStyle(P,u){var m,S;if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(P,u));const M=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!P)),P?(this.style=new lp(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof P=="string"?this.style.loadURL(P,u,M):this.style.loadJSON(P,u,M),this):((S=(m=this.style)===null||m===void 0?void 0:m.projection)===null||S===void 0||S.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new lp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,u){if(typeof P=="string"){const m=this._requestManager.transformRequest(P,"Style");s.j(m,new AbortController).then(S=>{this._updateDiff(S.data,u)}).catch(S=>{S&&this.fire(new s.k(S))})}else typeof P=="object"&&this._updateDiff(P,u)}_updateDiff(P,u){try{this.style.setState(P,u)&&this._update(!0)}catch(m){s.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(P,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(P,u){return this._lazyInitEmptyStyle(),this.style.addSource(P,u),this._update(!0)}isSourceLoaded(P){const u=this.style&&this.style.sourceCaches[P];if(u!==void 0)return u.loaded();this.fire(new s.k(new Error(`There is no source with ID '${P}'`)))}setTerrain(P){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),P){const u=this.style.sourceCaches[P.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${P.source}`);this.terrain===null&&u.reload();for(const m in this.style._layers){const S=this.style._layers[m];S.type==="hillshade"&&S.source===P.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xS(this.painter,u,P),this.painter.renderToTexture=new Sp(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=m=>{var S;m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==P.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((S=m.source)===null||S===void 0?void 0:S.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:P})),this}getTerrain(){var P,u;return(u=(P=this.terrain)===null||P===void 0?void 0:P.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const P=this.style&&this.style.sourceCaches;for(const u in P){const m=P[u]._tiles;for(const S in m){const M=m[S];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(P){return this.style.removeSource(P),this._update(!0)}getSource(P){return this.style.getSource(P)}setSourceTileLodParams(P,u,m){if(m){const S=this.getSource(m);if(!S)throw new Error(`There is no source with ID "${m}", cannot set LOD parameters`);S.calculateTileZoom=Ae(Math.max(1,P),Math.max(1,u))}else for(const S in this.style.sourceCaches)this.style.sourceCaches[S].getSource().calculateTileZoom=Ae(Math.max(1,P),Math.max(1,u));return this._update(!0),this}addImage(P,u,m={}){const{pixelRatio:S=1,sdf:M=!1,stretchX:D,stretchY:F,content:G,textFitWidth:Z,textFitHeight:ne}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||s.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:he,height:ye,data:_e}=u,Ie=u;return this.style.addImage(P,{data:new s.R({width:he,height:ye},new Uint8Array(_e)),pixelRatio:S,stretchX:D,stretchY:F,content:G,textFitWidth:Z,textFitHeight:ne,sdf:M,version:0,userImage:Ie}),Ie.onAdd&&Ie.onAdd(this,P),this}}{const{width:he,height:ye,data:_e}=p.getImageData(u);this.style.addImage(P,{data:new s.R({width:he,height:ye},_e),pixelRatio:S,stretchX:D,stretchY:F,content:G,textFitWidth:Z,textFitHeight:ne,sdf:M,version:0})}}updateImage(P,u){const m=this.style.getImage(P);if(!m)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=u instanceof HTMLImageElement||s.b(u)?p.getImageData(u):u,{width:M,height:D,data:F}=S;if(M===void 0||D===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==m.data.width||D!==m.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const G=!(u instanceof HTMLImageElement||s.b(u));return m.data.replace(F,G),this.style.updateImage(P,m),this}getImage(P){return this.style.getImage(P)}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P){return I.getImage(this._requestManager.transformRequest(P,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(P,u){return this._lazyInitEmptyStyle(),this.style.addLayer(P,u),this._update(!0)}moveLayer(P,u){return this.style.moveLayer(P,u),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(P,u,m){return this.style.setLayerZoomRange(P,u,m),this._update(!0)}setFilter(P,u,m={}){return this.style.setFilter(P,u,m),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,u,m,S={}){return this.style.setPaintProperty(P,u,m,S),this._update(!0)}getPaintProperty(P,u){return this.style.getPaintProperty(P,u)}setLayoutProperty(P,u,m,S={}){return this.style.setLayoutProperty(P,u,m,S),this._update(!0)}getLayoutProperty(P,u){return this.style.getLayoutProperty(P,u)}setGlyphs(P,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(P,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(P,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(P,u,m,S=>{S||this._update(!0)}),this}removeSprite(P){return this._lazyInitEmptyStyle(),this.style.removeSprite(P),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(P,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(P,u,m=>{m||this._update(!0)}),this}setLight(P,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,u),this._update(!0)}getLight(){return this.style.getLight()}setSky(P,u={}){return this._lazyInitEmptyStyle(),this.style.setSky(P,u),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(P,u){return this.style.setFeatureState(P,u),this._update()}removeFeatureState(P,u){return this.style.removeFeatureState(P,u),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let P=0,u=0;return this._container&&(P=this._container.clientWidth||400,u=this._container.clientHeight||300),[P,u]}_setupContainer(){const P=this._container;P.classList.add("maplibregl-map");const u=this._canvasContainer=v.create("div","maplibregl-canvas-container",P);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=v.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),S=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],S);const M=this._controlContainer=v.create("div","maplibregl-control-container",P),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{D[F]=v.create("div",`maplibregl-ctrl-${F} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,u,m){this._canvas.width=Math.floor(m*P),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${P}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const P=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let u=null;this._canvas.addEventListener("webglcontextcreationerror",S=>{u={requestedAttributes:P},S&&(u.statusMessage=S.statusMessage,u.type=S.type)},{once:!0});let m=null;if(m=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,P):this._canvas.getContext("webgl2",P)||this._canvas.getContext("webgl",P),!m){const S="Failed to initialize WebGL";throw u?(u.message=S,new Error(JSON.stringify(u))):new Error(S)}this.painter=new iS(m,this.transform),_.testSupport(m)}migrateProjection(P,u){super.migrateProjection(P,u),this.painter.transform=P,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_render(P){var u,m,S,M,D;const F=this._idleTriggered?this._fadeDuration:0,G=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._removed)return;let Z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ye=this.transform.zoom,_e=p.now();this.style.zoomHistory.update(ye,_e);const Ie=new s.C(ye,{now:_e,fadeDuration:F,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),De=Ie.crossFadingFactor();De===1&&De===this._crossFadingFactor||(Z=!0,this._crossFadingFactor=De),this.style.update(Ie)}const ne=((m=this.style.projection)===null||m===void 0?void 0:m.transitionState)>0!==G;(S=this.style.projection)===null||S===void 0||S.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(D=this.style.projection)===null||D===void 0?void 0:D.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ne)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,F,this._crossSourceCollisions,ne),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:F,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cl.mark(s.cm.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||Z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const he=this._sourcesDirty||this._styleDirty||this._placementDirty;return he||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||he||(this._fullyLoaded=!0,s.cl.mark(s.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var P;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),I.removeThrottleControl(this._imageQueueHandle),(P=this._resizeObserver)===null||P===void 0||P.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u!=null&&u.loseContext&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),v.remove(this._canvasContainer),v.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cl.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,p.frame(this._frameRequest,P=>{s.cl.frame(P),this._frameRequest=null;try{this._render(P)}catch(u){if(!s.cn(u)&&!function(m){return m.message===g_}(u))throw u}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}get version(){return ba}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(P){return this._lazyInitEmptyStyle(),this.style.setProjection(P),this._update(!0)}},o.MapMouseEvent=Oo,o.MapTouchEvent=bo,o.MapWheelEvent=nl,o.Marker=Mp,o.NavigationControl=class{constructor(P){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),S=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=S,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",S.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(u,m)=>{const S=this._map._getUIString(`NavigationControl.${m}`);u.title=S,u.setAttribute("aria-label",S)},this.options=s.e({},Cp,P),this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),v.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),v.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=v.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ig(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,u){const m=v.create("button",P,this._container);return m.type="button",m.addEventListener("click",u),m}},o.Popup=class extends s.E{constructor(P){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=v.create("div","maplibregl-popup",this._map.getContainer()),this._tip=v.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ag(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!u)return;const m=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationToScreenPoint(this._lngLat));let S=this.options.anchor;const M=lg(this.options.offset);if(!S){const F=this._container.offsetWidth,G=this._container.offsetHeight;let Z;Z=m.y+M.bottom.y<G?["top"]:m.y>this._map.transform.height-G?["bottom"]:[],m.x<F/2?Z.push("left"):m.x>this._map.transform.width-F/2&&Z.push("right"),S=Z.length===0?"bottom":Z.join("-")}let D=m.add(M[S]);this.options.subpixelPositioning||(D=D.round()),v.setTransform(this._container,`${Tp[S]} translate(${D.x}px,${D.y}px)`),Mh(this._container,S,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(U_),P)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=s.Q.convert(P),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(document.createTextNode(P))}setHTML(P){const u=document.createDocumentFragment(),m=document.createElement("body");let S;for(m.innerHTML=P;S=m.firstChild,S;)u.appendChild(S);return this.setDOMContent(u)}getMaxWidth(){var P;return(P=this._container)===null||P===void 0?void 0:P.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){return this._container&&this._container.classList.add(P),this}removeClassName(P){return this._container&&this._container.classList.remove(P),this}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}setSubpixelPositioning(P){this.options.subpixelPositioning=P}_createCloseButton(){this.options.closeButton&&(this._closeButton=v.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(sg);P&&P.focus()}},o.RasterDEMTileSource=Ct,o.RasterTileSource=lt,o.ScaleControl=class{constructor(P){this._onMove=()=>{og(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,og(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},j_),P)}getDefaultPosition(){return"bottom-left"}onAdd(P){return this._map=P,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=z_,o.Style=lp,o.TerrainControl=class{constructor(P){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=P}onAdd(P){return this._map=P,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=v.create("button","maplibregl-ctrl-terrain",this._container),v.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){v.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=mS,o.TwoFingersTouchRotateHandler=eg,o.TwoFingersTouchZoomHandler=Qm,o.TwoFingersTouchZoomRotateHandler=ng,o.VectorTileSource=Lt,o.VideoSource=Bt,o.addSourceType=(P,u)=>s._(void 0,void 0,void 0,function*(){if(Ot(P))throw new Error(`A source type called "${P}" already exists.`);((m,S)=>{cn[m]=S})(P,u)}),o.clearPrewarmedResources=function(){const P=Ce;P&&(P.isPreloaded()&&P.numActive()===1?(P.release(be),Ce=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=Mm,o.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return On().getRTLTextPluginStatus()},o.getVersion=function(){return W_},o.getWorkerCount=function(){return we.workerCount},o.getWorkerUrl=function(){return s.a.WORKER_URL},o.importScriptInWorkers=function(P){return Je().broadcast("IS",P)},o.prewarm=function(){et().acquire(be)},o.setMaxParallelImageRequests=function(P){s.a.MAX_PARALLEL_IMAGE_REQUESTS=P},o.setRTLTextPlugin=function(P,u){return On().setRTLTextPlugin(P,u)},o.setWorkerCount=function(P){we.workerCount=P},o.setWorkerUrl=function(P){s.a.WORKER_URL=P}});var a=n;return a})})(rne);var SO=rne.exports;const vr=oc(SO);function Qqe(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class eZe{constructor(){this._apiKey="",this._fetch=Qqe(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Ry=new eZe,tZe={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},nZe={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},Ax={...tZe,...nZe};function rZe(e,t=Ax){return e in t?e[e]:null}function CO(e,t=Ax){for(const n of Object.values(t))if(n.code===e)return n;return null}function TO(e,t=Ax){for(const n of Object.values(t))if(n.flag===e)return n;return null}function iZe(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function L9(e,t=Ax){return iZe(e)?TO(e.flag,t):typeof e!="string"?null:rZe(e,t)||CO(e,t)||TO(e,t)||null}async function aZe(e,t={}){if(Ry.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Ry.fetch(e,t)}const ane={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(ane);class oZe extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const D9={403:"Key is missing, invalid or restricted"};async function sZe(e={}){const t=new URL("geolocation/ip.json",ane.maptilerApiURL);t.searchParams.set("key",e.apiKey??Ry.apiKey);const n=t.toString(),r=await aZe(n);if(!r.ok)throw new oZe(r,r.status in D9?D9[r.status]:"");return await r.json()}const R9={info:sZe};function one(e){const t=/^maptiler:\/\/(.*)/;let n;const r=e.trim();let i;return r.startsWith("http://")||r.startsWith("https://")?i=r:(n=t.exec(r))!==null?i=`https://api.maptiler.com/maps/${n[1]}/style.json`:i=`https://api.maptiler.com/maps/${r}/style.json`,i}class sne{constructor(t,n,r,i,a,o,s=!1){this.name=t,this.variantType=n,this.id=r,this.referenceStyle=i,this.description=a,this.imageURL=o,this.deprecated=s}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){const n=this.referenceStyle.getVariant(t);return this.warnIfDeprecated(n),n}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this).map(t=>(this.warnIfDeprecated(t),t))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return one(this.getId())}warnIfDeprecated(t=this){if(!t.deprecated)return t;const n=t.getFullName();return console.warn(`Style "${n}" is deprecated and will be removed in a future version.`),t}}class lne{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const H1=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",deprecated:!0,name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]}];function lZe(e){return new Proxy(e,{get(t,n,r){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,r)}})}function uZe(){const e={};for(let t=0;t<H1.length;t+=1){const n=H1[t],r=lZe(new lne(n.name,n.referenceStyleID));for(let i=0;i<n.variants.length;i+=1){const a=n.variants[i],o=new sne(a.name,a.variantType,a.id,r,a.description,a.imageURL,a.deprecated);r.addVariant(o)}e[n.referenceStyleID]=r}return e}const j1=uZe();var R4={exports:{}},Oy=typeof Reflect=="object"?Reflect:null,O9=Oy&&typeof Oy.apply=="function"?Oy.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},JC;Oy&&typeof Oy.ownKeys=="function"?JC=Oy.ownKeys:Object.getOwnPropertySymbols?JC=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:JC=function(t){return Object.getOwnPropertyNames(t)};function cZe(e){console&&console.warn&&console.warn(e)}var une=Number.isNaN||function(t){return t!==t};function Gi(){Gi.init.call(this)}R4.exports=Gi;R4.exports.once=pZe;Gi.EventEmitter=Gi;Gi.prototype._events=void 0;Gi.prototype._eventsCount=0;Gi.prototype._maxListeners=void 0;var z9=10;function tE(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Gi,"defaultMaxListeners",{enumerable:!0,get:function(){return z9},set:function(e){if(typeof e!="number"||e<0||une(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");z9=e}});Gi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Gi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||une(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cne(e){return e._maxListeners===void 0?Gi.defaultMaxListeners:e._maxListeners}Gi.prototype.getMaxListeners=function(){return cne(this)};Gi.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")O9(l,this,n);else for(var c=l.length,h=vne(l,c),r=0;r<c;++r)O9(h[r],this,n);return!0};function dne(e,t,n,r){var i,a,o;if(tE(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),o===void 0)o=a[t]=n,++e._eventsCount;else if(typeof o=="function"?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=cne(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,cZe(s)}return e}Gi.prototype.addListener=function(t,n){return dne(this,t,n,!1)};Gi.prototype.on=Gi.prototype.addListener;Gi.prototype.prependListener=function(t,n){return dne(this,t,n,!0)};function dZe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hne(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=dZe.bind(r);return i.listener=n,r.wrapFn=i,i}Gi.prototype.once=function(t,n){return tE(n),this.on(t,hne(this,t,n)),this};Gi.prototype.prependOnceListener=function(t,n){return tE(n),this.prependListener(t,hne(this,t,n)),this};Gi.prototype.removeListener=function(t,n){var r,i,a,o,s;if(tE(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){s=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():hZe(r,a),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||n)}return this};Gi.prototype.off=Gi.prototype.removeListener;Gi.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var a=Object.keys(r),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function fne(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?fZe(i):vne(i,i.length)}Gi.prototype.listeners=function(t){return fne(this,t,!0)};Gi.prototype.rawListeners=function(t){return fne(this,t,!1)};Gi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):pne.call(e,t)};Gi.prototype.listenerCount=pne;function pne(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Gi.prototype.eventNames=function(){return this._eventsCount>0?JC(this._events):[]};function vne(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function hZe(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fZe(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function pZe(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,a),r(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}mne(e,t,a,{once:!0}),t!=="error"&&vZe(e,i,{once:!0})})}function vZe(e,t,n){typeof e.on=="function"&&mne(e,"error",t,n)}function mne(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var mZe=R4.exports;const gZe=oc(mZe),gne="3.7.7",yZe=gne,U0=typeof Buffer=="function",B9=typeof TextDecoder=="function"?new TextDecoder:void 0,F9=typeof TextEncoder=="function"?new TextEncoder:void 0,_Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s1=Array.prototype.slice.call(_Ze),lC=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(s1),bZe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,To=String.fromCharCode.bind(String),N9=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),yne=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),_ne=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),bne=e=>{let t,n,r,i,a="";const o=e.length%3;for(let s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|i,a+=s1[t>>18&63]+s1[t>>12&63]+s1[t>>6&63]+s1[t&63]}return o?a.slice(0,o-3)+"===".substring(o):a},O4=typeof btoa=="function"?e=>btoa(e):U0?e=>Buffer.from(e,"binary").toString("base64"):bne,MO=U0?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,i=e.length;r<i;r+=4096)n.push(To.apply(null,e.subarray(r,r+4096)));return O4(n.join(""))},QC=(e,t=!1)=>t?yne(MO(e)):MO(e),wZe=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?To(192|t>>>6)+To(128|t&63):To(224|t>>>12&15)+To(128|t>>>6&63)+To(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return To(240|t>>>18&7)+To(128|t>>>12&63)+To(128|t>>>6&63)+To(128|t&63)}},xZe=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,wne=e=>e.replace(xZe,wZe),$9=U0?e=>Buffer.from(e,"utf8").toString("base64"):F9?e=>MO(F9.encode(e)):e=>O4(wne(e)),zy=(e,t=!1)=>t?yne($9(e)):$9(e),V9=e=>zy(e,!0),SZe=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,CZe=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return To((n>>>10)+55296)+To((n&1023)+56320);case 3:return To((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return To((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},xne=e=>e.replace(SZe,CZe),Sne=e=>{if(e=e.replace(/\s+/g,""),!bZe.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,i;for(let a=0;a<e.length;)t=lC[e.charAt(a++)]<<18|lC[e.charAt(a++)]<<12|(r=lC[e.charAt(a++)])<<6|(i=lC[e.charAt(a++)]),n+=r===64?To(t>>16&255):i===64?To(t>>16&255,t>>8&255):To(t>>16&255,t>>8&255,t&255);return n},z4=typeof atob=="function"?e=>atob(_ne(e)):U0?e=>Buffer.from(e,"base64").toString("binary"):Sne,Cne=U0?e=>N9(Buffer.from(e,"base64")):e=>N9(z4(e).split("").map(t=>t.charCodeAt(0))),Tne=e=>Cne(Mne(e)),TZe=U0?e=>Buffer.from(e,"base64").toString("utf8"):B9?e=>B9.decode(Cne(e)):e=>xne(z4(e)),Mne=e=>_ne(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),kO=e=>TZe(Mne(e)),MZe=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},kne=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Ene=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,kne(n));e("fromBase64",function(){return kO(this)}),e("toBase64",function(t){return zy(this,t)}),e("toBase64URI",function(){return zy(this,!0)}),e("toBase64URL",function(){return zy(this,!0)}),e("toUint8Array",function(){return Tne(this)})},Ane=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,kne(n));e("toBase64",function(t){return QC(this,t)}),e("toBase64URI",function(){return QC(this,!0)}),e("toBase64URL",function(){return QC(this,!0)})},kZe=()=>{Ene(),Ane()},EZe={version:gne,VERSION:yZe,atob:z4,atobPolyfill:Sne,btoa:O4,btoaPolyfill:bne,fromBase64:kO,toBase64:zy,encode:zy,encodeURI:V9,encodeURL:V9,utob:wne,btou:xne,decode:kO,isValid:MZe,fromUint8Array:QC,toUint8Array:Tne,extendString:Ene,extendUint8Array:Ane,extendBuiltins:kZe};var AZe=Object.defineProperty,Pne=e=>{throw TypeError(e)},PZe=(e,t,n)=>t in e?AZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nr=(e,t,n)=>PZe(e,typeof t!="symbol"?t+"":t,n),B4=(e,t,n)=>t.has(e)||Pne("Cannot "+n),fi=(e,t,n)=>(B4(e,t,"read from private field"),n?n.call(e):t.get(e)),sv=(e,t,n)=>t.has(e)?Pne("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),iy=(e,t,n,r)=>(B4(e,t,"write to private field"),t.set(e,n),n),ul=(e,t,n)=>(B4(e,t,"access private method"),n);const gi={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...Ax};function H9(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return CO(e)||gi.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>CO(e)).filter(e=>e)[0]??gi.LOCAL}const ps={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:gi.STYLE,secondaryLanguage:gi.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(ps);const F4=dy();class IZe extends gZe{constructor(){super(...arguments),Nr(this,"primaryLanguage",ps.primaryLanguage),Nr(this,"secondaryLanguage"),Nr(this,"session",!0),Nr(this,"caching",!0),Nr(this,"telemetry",!0),Nr(this,"_unit","metric"),Nr(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Ry.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Ry.fetch=t}get fetch(){return Ry.fetch}}const Oa=new IZe,EO="localcache_source",AO="localcache",LZe="maptiler_sdk",DZe=1e3,RZe=100,PO=typeof caches<"u";function OZe(e,t){if(PO&&Oa.caching&&Oa.session&&e.host===ps.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${EO}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${AO}://`)}return e.href}let hL;async function Ine(){return hL||(hL=await caches.open(LZe)),hL}let j9=0;async function zZe(){const e=await Ine(),t=await e.keys(),n=t.slice(0,Math.max(t.length-DZe,0));for(const r of n)e.delete(r)}function BZe(){SO.addProtocol(EO,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${EO}://`,"https://");const n=e;n.signal=t.signal;const r=await fetch(e.url,n),i=await r.json();return i.tiles&&i.tiles.length>0&&(i.tiles[0]+=`&last-modified=${r.headers.get("Last-Modified")}`),{data:i,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}),SO.addProtocol(AO,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${AO}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const i=r.toString(),a=new URL(n);a.searchParams.delete("last-modified");const o=a.toString(),s=async p=>({data:await p.arrayBuffer(),cacheControl:p.headers.get("Cache-Control"),expires:p.headers.get("Expires")}),l=await Ine(),c=await l.match(i);if(c)return s(c);const h=e;h.signal=t.signal;const f=await fetch(o,h);return f.status>=200&&f.status<300&&(l.put(i,f.clone()).catch(()=>{}),++j9>RZe&&(zZe(),j9=0)),s(f)})}function FZe(){if(typeof window>"u")return;const e=vr.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{vr.setRTLTextPlugin(ps.rtlPluginURL,!0)}catch{}}function NZe(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function U9(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===ps.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",Oa.apiKey),Oa.session&&n.searchParams.append("mtsid",F4)),{url:OZe(n,t)}}function W9(e){return(t,n)=>{if(e!=null){const r=e(t,n),i=U9((r==null?void 0:r.url)??"",n);return{...r,...i}}return U9(t,n)}}function $Ze(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function VZe(e){const t=$Ze();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const r=document.createElement("div");throw r.innerHTML=t,r.classList.add("webgl-warning-div"),n.appendChild(r),new Error(t)}function G9(e,t){return!(!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"||t&&!e[1].startsWith("name:")||!t&&e[1]!=="name")}function HZe(e,t,n){const r=structuredClone(e),i=a=>{if(typeof a!="string")for(let o=0;o<a.length;o+=1)G9(a[o],n)?a[o]=structuredClone(t):i(a[o])};return G9(r,n)?t:(i(r),r)}function jZe(e,t){const n=t?/\{name:\S+\}/:/\{name\}/;return{contains:n.test(e),exactMatch:new RegExp(`^${n.source}$`).test(e)}}function UZe(e,t,n){const r=n?/\{name:\S+\}/:/\{name\}/,i=e.split(r);return["concat",...i.flatMap((a,o)=>o===i.length-1?[a]:[a,t])]}function WZe(e){var t;const n=/\{name(?:\:(?<language>\S+))?\}/g,r=[];for(;;){const i=n.exec(e);if(!i)break;const a=((t=i.groups)==null?void 0:t.language)??null;r.push(a)}return r}function GZe(e){return!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"?null:e[1].trim()==="name"?{isLanguage:!0,localization:null}:e[1].trim().startsWith("name:")?{isLanguage:!0,localization:e[1].trim().split(":").pop()}:null}function KZe(e){const t=[],n=structuredClone(e),r=i=>{if(typeof i!="string")for(let a=0;a<i.length;a+=1){const o=GZe(i[a]);o?t.push(o.localization):r(i[a])}};return r([n]),t}function qZe(e,t){const n=[];for(const a of e){if(a.type!=="symbol")continue;const o=a,{id:s,layout:l}=o;if(!l||!("text-field"in l))continue;const c=t.getLayoutProperty(s,"text-field");if(c)if(typeof c=="string"){const h=WZe(c);n.push(h)}else{const h=KZe(c);n.push(h)}}const r=n.flat(),i={unlocalized:0,localized:{}};for(const a of r)a===null?i.unlocalized+=1:(a in i.localized||(i.localized[a]=0),i.localized[a]+=1);return i}(class extends vr.Marker{addTo(e){return super.addTo(e)}});class Wnt extends vr.Popup{addTo(t){return super.addTo(t)}}class Gnt extends vr.Style{constructor(t,n={}){super(t,n)}}class Knt extends vr.CanvasSource{onAdd(t){super.onAdd(t)}}class qnt extends vr.GeoJSONSource{onAdd(t){super.onAdd(t)}}class Znt extends vr.ImageSource{onAdd(t){super.onAdd(t)}}class Ynt extends vr.RasterTileSource{onAdd(t){super.onAdd(t)}}class Xnt extends vr.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class Jnt extends vr.VectorTileSource{onAdd(t){super.onAdd(t)}}class Qnt extends vr.VideoSource{onAdd(t){super.onAdd(t)}}class ZZe extends vr.NavigationControl{onAdd(t){return super.onAdd(t)}}class YZe extends vr.GeolocateControl{onAdd(t){return super.onAdd(t)}}class ert extends vr.AttributionControl{onAdd(t){return super.onAdd(t)}}class XZe extends vr.LogoControl{onAdd(t){return super.onAdd(t)}}class JZe extends vr.ScaleControl{onAdd(t){return super.onAdd(t)}}class QZe extends vr.FullscreenControl{onAdd(t){return super.onAdd(t)}}class trt extends vr.TerrainControl{onAdd(t){return super.onAdd(t)}}class nrt extends vr.BoxZoomHandler{constructor(t,n){super(t,n)}}class rrt extends vr.ScrollZoomHandler{constructor(t,n){super(t,n)}}class irt extends vr.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class art extends vr.KeyboardHandler{constructor(t){super(t)}}class ort extends vr.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class srt extends vr.MapWheelEvent{constructor(t,n,r){super(t,n,r)}}class lrt extends vr.MapTouchEvent{constructor(t,n,r){super(t,n,r)}}class urt extends vr.MapMouseEvent{constructor(t,n,r,i={}){super(t,n,r,i)}}class K9 extends XZe{constructor(t={}){super(t),Nr(this,"logoURL",""),Nr(this,"linkURL",""),this.logoURL=t.logoURL??ps.maptilerLogoURL,this.linkURL=t.linkURL??ps.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var eYe=8,tYe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nYe={"*":{type:"source"}},rYe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],iYe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},aYe={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},oYe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},sYe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},lYe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},uYe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},cYe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},dYe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],hYe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fYe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pYe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vYe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mYe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gYe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yYe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_Ye={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bYe={type:"array",value:"*"},wYe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},xYe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},SYe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},CYe={type:"array",value:"*",minimum:1},TYe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},MYe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kYe={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},EYe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},AYe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],PYe={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},IYe={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},LYe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},DYe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},RYe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},OYe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zYe={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},BYe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},FYe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},NYe={"*":{type:"string"}},$Ye={$version:eYe,$root:tYe,sources:nYe,source:rYe,source_vector:iYe,source_raster:aYe,source_raster_dem:oYe,source_geojson:sYe,source_video:lYe,source_image:uYe,layer:cYe,layout:dYe,layout_background:hYe,layout_fill:fYe,layout_circle:pYe,layout_heatmap:vYe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:mYe,layout_symbol:gYe,layout_raster:yYe,layout_hillshade:_Ye,filter:bYe,filter_operator:wYe,geometry_type:xYe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:SYe,expression:CYe,light:TYe,sky:MYe,terrain:kYe,projection:EYe,paint:AYe,paint_fill:PYe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:IYe,paint_circle:LYe,paint_heatmap:DYe,paint_symbol:RYe,paint_raster:OYe,paint_hillshade:zYe,paint_background:BYe,transition:FYe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:NYe};class Bn{constructor(t,n,r,i){this.message=(t?`${t}: `:"")+r,i&&(this.identifier=i),n!=null&&n.__line__&&(this.line=n.__line__)}}function _M(e,...t){for(const n of t)for(const r in n)e[r]=n[r];return e}class $c extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class N4{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[r,i]of n)this.bindings[r]=i}concat(t){return new N4(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const nE={kind:"null"},Nn={kind:"number"},Yr={kind:"string"},Vr={kind:"boolean"},Gc={kind:"color"},rE={kind:"projectionDefinition"},By={kind:"object"},Hr={kind:"value"},VYe={kind:"error"},iE={kind:"collator"},aE={kind:"formatted"},oE={kind:"padding"},Px={kind:"resolvedImage"},sE={kind:"variableAnchorOffsetCollection"};function hl(e,t){return{kind:"array",itemType:e,N:t}}function ya(e){if(e.kind==="array"){const t=ya(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const HYe=[nE,Nn,Yr,Vr,Gc,rE,aE,By,hl(Hr),oE,Px,sE];function Nw(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Nw(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of HYe)if(!Nw(n,t))return null}}return`Expected ${ya(e)} but found ${ya(t)} instead.`}function $4(e,t){return t.some(n=>n.kind===e.kind)}function Hv(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function qg(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const Lne=.96422,Dne=1,Rne=.82521,One=4/29,Fy=6/29,zne=3*Fy*Fy,jYe=Fy*Fy*Fy,UYe=Math.PI/180,WYe=180/Math.PI;function Bne(e){return e=e%360,e<0&&(e+=360),e}function Fne([e,t,n,r]){e=fL(e),t=fL(t),n=fL(n);let i,a;const o=pL((.2225045*e+.7168786*t+.0606169*n)/Dne);e===t&&t===n?i=a=o:(i=pL((.4360747*e+.3850649*t+.1430804*n)/Lne),a=pL((.0139322*e+.0971045*t+.7141733*n)/Rne));const s=116*o-16;return[s<0?0:s,500*(i-o),200*(o-a),r]}function fL(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pL(e){return e>jYe?Math.pow(e,1/3):e/zne+One}function Nne([e,t,n,r]){let i=(e+16)/116,a=isNaN(t)?i:i+t/500,o=isNaN(n)?i:i-n/200;return i=Dne*mL(i),a=Lne*mL(a),o=Rne*mL(o),[vL(3.1338561*a-1.6168667*i-.4906146*o),vL(-.9787684*a+1.9161415*i+.033454*o),vL(.0719453*a-.2289914*i+1.4052427*o),r]}function vL(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function mL(e){return e>Fy?e*e*e:zne*(e-One)}function GYe(e){const[t,n,r,i]=Fne(e),a=Math.sqrt(n*n+r*r);return[Math.round(a*1e4)?Bne(Math.atan2(r,n)*WYe):NaN,a,t,i]}function KYe([e,t,n,r]){return e=isNaN(e)?0:e*UYe,Nne([n,Math.cos(e)*t,Math.sin(e)*t,r])}function qYe([e,t,n,r]){e=Bne(e),t/=100,n/=100;function i(a){const o=(a+e/30)%12,s=t*Math.min(n,1-n);return n-s*Math.max(-1,Math.min(o-3,9-o,1))}return[i(0),i(8),i(4),r]}function ZYe(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=YYe[e];if(t){const[i,a,o]=t;return[i/255,a/255,o/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const i=e.length<6?1:2;let a=1;return[uC(e.slice(a,a+=i)),uC(e.slice(a,a+=i)),uC(e.slice(a,a+=i)),uC(e.slice(a,a+i)||"ff")]}if(e.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,a=e.match(i);if(a){const[o,s,l,c,h,f,p,v,_,b,C,T]=a,E=[c||" ",p||" ",b].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const A=[l,f,_].join(""),I=A==="%%%"?100:A===""?255:0;if(I){const O=[ay(+s/I,0,1),ay(+h/I,0,1),ay(+v/I,0,1),C?q9(+C,T):1];if(Z9(O))return O}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=e.match(n);if(r){const[i,a,o,s,l,c,h,f,p]=r,v=[o||" ",l||" ",h].join("");if(v==="  "||v==="  /"||v===",,"||v===",,,"){const _=[+a,ay(+s,0,100),ay(+c,0,100),f?q9(+f,p):1];if(Z9(_))return qYe(_)}}}function uC(e){return parseInt(e.padEnd(2,e),16)/255}function q9(e,t){return ay(t?e/100:e,0,1)}function ay(e,t,n){return Math.min(Math.max(t,e),n)}function Z9(e){return!e.some(Number.isNaN)}const YYe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function jv(e,t,n){return e+n*(t-e)}function bM(e,t,n){return e.map((r,i)=>jv(r,t[i],n))}class Ui{constructor(t,n,r,i=1,a=!0){this.r=t,this.g=n,this.b=r,this.a=i,a||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[t,n,r,i]))}static parse(t){if(t instanceof Ui)return t;if(typeof t!="string")return;const n=ZYe(t);if(n)return new Ui(...n,!1)}get rgb(){const{r:t,g:n,b:r,a:i}=this,a=i||1/0;return this.overwriteGetter("rgb",[t/a,n/a,r/a,i])}get hcl(){return this.overwriteGetter("hcl",GYe(this.rgb))}get lab(){return this.overwriteGetter("lab",Fne(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,r,i]=this.rgb;return`rgba(${[t,n,r].map(a=>Math.round(a*255)).join(",")},${i})`}static interpolate(t,n,r,i="rgb"){switch(i){case"rgb":{const[a,o,s,l]=bM(t.rgb,n.rgb,r);return new Ui(a,o,s,l,!1)}case"hcl":{const[a,o,s,l]=t.hcl,[c,h,f,p]=n.hcl;let v,_;if(!isNaN(a)&&!isNaN(c)){let A=c-a;c>a&&A>180?A-=360:c<a&&a-c>180&&(A+=360),v=a+r*A}else isNaN(a)?isNaN(c)?v=NaN:(v=c,(s===1||s===0)&&(_=h)):(v=a,(f===1||f===0)&&(_=o));const[b,C,T,E]=KYe([v,_??jv(o,h,r),jv(s,f,r),jv(l,p,r)]);return new Ui(b,C,T,E,!1)}case"lab":{const[a,o,s,l]=Nne(bM(t.lab,n.lab,r));return new Ui(a,o,s,l,!1)}}}}Ui.black=new Ui(0,0,0,1);Ui.white=new Ui(1,1,1,1);Ui.transparent=new Ui(0,0,0,0);Ui.red=new Ui(1,0,0,1);class V4{constructor(t,n,r){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const XYe=["bottom","center","top"];class IO{constructor(t,n,r,i,a,o){this.text=t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a,this.verticalAlign=o}}class Kd{constructor(t){this.sections=t}static fromString(t){return new Kd([new IO(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Kd?t:Kd.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Zl{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Zl)return t;if(typeof t=="number")return new Zl([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new Zl(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r){return new Zl(bM(t.values,n.values,r))}}class Ba{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const JYe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gu{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Gu)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const r=t[n],i=t[n+1];if(typeof r!="string"||!JYe.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Gu(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r){const i=t.values,a=n.values;if(i.length!==a.length)throw new Ba(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const o=[];for(let s=0;s<i.length;s+=2){if(i[s]!==a[s])throw new Ba(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${a[s]}`);o.push(i[s]);const[l,c]=i[s+1],[h,f]=a[s+1];o.push([jv(l,h,r),jv(c,f,r)])}return new Gu(o)}}class Xf{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Xf({name:t,available:!1}):null}}class Ou{constructor(t,n,r){this.from=t,this.to=n,this.transition=r}static interpolate(t,n,r){return new Ou(t,n,r)}static parse(t){if(t instanceof Ou)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new Ou(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new Ou(t.from,t.to,t.transition);if(typeof t=="string")return new Ou(t,t,1)}}function $ne(e,t,n,r){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $w(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Ou||e instanceof Ui||e instanceof V4||e instanceof Kd||e instanceof Zl||e instanceof Gu||e instanceof Xf)return!0;if(Array.isArray(e)){for(const t of e)if(!$w(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!$w(e[t]))return!1;return!0}else return!1}function no(e){if(e===null)return nE;if(typeof e=="string")return Yr;if(typeof e=="boolean")return Vr;if(typeof e=="number")return Nn;if(e instanceof Ui)return Gc;if(e instanceof Ou)return rE;if(e instanceof V4)return iE;if(e instanceof Kd)return aE;if(e instanceof Zl)return oE;if(e instanceof Gu)return sE;if(e instanceof Xf)return Px;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const i=no(r);if(!n)n=i;else{if(n===i)continue;n=Hr;break}}return hl(n||Hr,t)}else return By}function U1(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Ui||e instanceof Ou||e instanceof Kd||e instanceof Zl||e instanceof Gu||e instanceof Xf?e.toString():JSON.stringify(e)}class m0{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!$w(t[1]))return n.error("invalid value");const r=t[1];let i=no(r);const a=n.expectedType;return i.kind==="array"&&i.N===0&&a&&a.kind==="array"&&(typeof a.N!="number"||a.N===0)&&(i=a),new m0(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const cC={string:Yr,number:Nn,boolean:Vr,object:By};class zu{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let r=1,i;const a=t[0];if(a==="array"){let s;if(t.length>2){const c=t[1];if(typeof c!="string"||!(c in cC)||c==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);s=cC[c],r++}else s=Hr;let l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);l=t[2],r++}i=hl(s,l)}else{if(!cC[a])throw new Error(`Types doesn't contain name = ${a}`);i=cC[a]}const o=[];for(;r<t.length;r++){const s=n.parse(t[r],r,Hr);if(!s)return null;o.push(s)}return new zu(i,o)}evaluate(t){for(let n=0;n<this.args.length;n++){const r=this.args[n].evaluate(t);if(Nw(this.type,no(r))){if(n===this.args.length-1)throw new Ba(`Expected value to be of type ${ya(this.type)}, but found ${ya(no(r))} instead.`)}else return r}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Y9={"to-boolean":Vr,"to-color":Gc,"to-number":Nn,"to-string":Yr};class yf{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[0];if(!Y9[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&t.length!==2)return n.error("Expected one argument.");const i=Y9[r],a=[];for(let o=1;o<t.length;o++){const s=n.parse(t[o],o,Hr);if(!s)return null;a.push(s)}return new yf(i,a)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,r;for(const i of this.args){if(n=i.evaluate(t),r=null,n instanceof Ui)return n;if(typeof n=="string"){const a=t.parseColor(n);if(a)return a}else if(Array.isArray(n)&&(n.length<3||n.length>4?r=`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:r=$ne(n[0],n[1],n[2],n[3]),!r))return new Ui(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Ba(r||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const r of this.args){n=r.evaluate(t);const i=Zl.parse(n);if(i)return i}throw new Ba(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const r of this.args){n=r.evaluate(t);const i=Gu.parse(n);if(i)return i}throw new Ba(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const r of this.args){if(n=r.evaluate(t),n===null)return 0;const i=Number(n);if(!isNaN(i))return i}throw new Ba(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Kd.fromString(U1(this.args[0].evaluate(t)));case"resolvedImage":return Xf.fromString(U1(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return U1(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const QYe=["Unknown","Point","LineString","Polygon"];class Vne{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?QYe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=Ui.parse(t)),n}}class lE{constructor(t,n,r=[],i,a=new N4,o=[]){this.registry=t,this.path=r,this.key=r.map(s=>`[${s}]`).join(""),this.scope=a,this.errors=o,this.expectedType=i,this._isConstant=n}parse(t,n,r,i,a={}){return n?this.concat(n,r,i)._parse(t,a):this._parse(t,a)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function r(i,a,o){return o==="assert"?new zu(a,[i]):o==="coerce"?new yf(a,[i]):i}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[i];if(a){let o=a.parse(t,this);if(!o)return null;if(this.expectedType){const s=this.expectedType,l=o.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")o=r(o,s,n.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&(l.kind==="string"||l.kind==="array"))o=r(o,s,n.typeAnnotation||"coerce");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))o=r(o,s,n.typeAnnotation||"coerce");else if(s.kind==="padding"&&(l.kind==="value"||l.kind==="number"||l.kind==="array"))o=r(o,s,n.typeAnnotation||"coerce");else if(s.kind==="variableAnchorOffsetCollection"&&(l.kind==="value"||l.kind==="array"))o=r(o,s,n.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(o instanceof m0)&&o.type.kind!=="resolvedImage"&&this._isConstant(o)){const s=new Vne;try{o=new m0(o.type,o.evaluate(s))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,r){const i=typeof t=="number"?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new lE(this.registry,this._isConstant,i,n||null,a,this.errors)}error(t,...n){const r=`${this.key}${n.map(i=>`[${i}]`).join("")}`;this.errors.push(new $c(r,t))}checkSubtype(t,n){const r=Nw(t,n);return r&&this.error(r),r}}class uE{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let a=1;a<t.length-1;a+=2){const o=t[a];if(typeof o!="string")return n.error(`Expected string, but found ${typeof o} instead.`,a);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",a);const s=n.parse(t[a+1],a+1);if(!s)return null;r.push([o,s])}const i=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return i?new uE(r,i):null}outputDefined(){return this.result.outputDefined()}}class cE{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const r=t[1];return n.scope.has(r)?new cE(r,n.scope.get(r)):n.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class H4{constructor(t,n,r){this.type=t,this.index=n,this.input=r}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Nn),i=n.parse(t[2],2,hl(n.expectedType||Hr));if(!r||!i)return null;const a=i.type;return new H4(a.itemType,r,i)}evaluate(t){const n=this.index.evaluate(t),r=this.input.evaluate(t);if(n<0)throw new Ba(`Array index out of bounds: ${n} < 0.`);if(n>=r.length)throw new Ba(`Array index out of bounds: ${n} > ${r.length-1}.`);if(n!==Math.floor(n))throw new Ba(`Array index must be an integer, but found ${n} instead.`);return r[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class j4{constructor(t,n){this.type=Vr,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Hr),i=n.parse(t[2],2,Hr);return!r||!i?null:$4(r.type,[Vr,Yr,Nn,nE,Hr])?new j4(r,i):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ya(r.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!Hv(n,["boolean","string","number","null"]))throw new Ba(`Expected first argument to be of type boolean, string, number or null, but found ${ya(no(n))} instead.`);if(!Hv(r,["string","array"]))throw new Ba(`Expected second argument to be of type array or string, but found ${ya(no(r))} instead.`);return r.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class wM{constructor(t,n,r){this.type=Nn,this.needle=t,this.haystack=n,this.fromIndex=r}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Hr),i=n.parse(t[2],2,Hr);if(!r||!i)return null;if(!$4(r.type,[Vr,Yr,Nn,nE,Hr]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ya(r.type)} instead`);if(t.length===4){const a=n.parse(t[3],3,Nn);return a?new wM(r,i,a):null}else return new wM(r,i)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Hv(n,["boolean","string","number","null"]))throw new Ba(`Expected first argument to be of type boolean, string, number or null, but found ${ya(no(n))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(t)),Hv(r,["string"])){const a=r.indexOf(n,i);return a===-1?-1:[...r.slice(0,a)].length}else{if(Hv(r,["array"]))return r.indexOf(n,i);throw new Ba(`Expected second argument to be of type array or string, but found ${ya(no(r))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class U4{constructor(t,n,r,i,a,o){this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let r,i;n.expectedType&&n.expectedType.kind!=="value"&&(i=n.expectedType);const a={},o=[];for(let c=2;c<t.length-1;c+=2){let h=t[c];const f=t[c+1];Array.isArray(h)||(h=[h]);const p=n.concat(c);if(h.length===0)return p.error("Expected at least one branch label.");for(const _ of h){if(typeof _!="number"&&typeof _!="string")return p.error("Branch labels must be numbers or strings.");if(typeof _=="number"&&Math.abs(_)>Number.MAX_SAFE_INTEGER)return p.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _=="number"&&Math.floor(_)!==_)return p.error("Numeric branch labels must be integer values.");if(!r)r=no(_);else if(p.checkSubtype(r,no(_)))return null;if(typeof a[String(_)]<"u")return p.error("Branch labels must be unique.");a[String(_)]=o.length}const v=n.parse(f,c,i);if(!v)return null;i=i||v.type,o.push(v)}const s=n.parse(t[1],1,Hr);if(!s)return null;const l=n.parse(t[t.length-1],t.length-1,i);return!l||s.type.kind!=="value"&&n.concat(1).checkSubtype(r,s.type)?null:new U4(r,i,s,a,o,l)}evaluate(t){const n=this.input.evaluate(t);return(no(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class W4{constructor(t,n,r){this.type=t,this.branches=n,this.otherwise=r}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let r;n.expectedType&&n.expectedType.kind!=="value"&&(r=n.expectedType);const i=[];for(let o=1;o<t.length-1;o+=2){const s=n.parse(t[o],o,Vr);if(!s)return null;const l=n.parse(t[o+1],o+1,r);if(!l)return null;i.push([s,l]),r=r||l.type}const a=n.parse(t[t.length-1],t.length-1,r);if(!a)return null;if(!r)throw new Error("Can't infer output type");return new W4(r,i,a)}evaluate(t){for(const[n,r]of this.branches)if(n.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,r]of this.branches)t(n),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class xM{constructor(t,n,r,i){this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Hr),i=n.parse(t[2],2,Nn);if(!r||!i)return null;if(!$4(r.type,[hl(Hr),Yr,Hr]))return n.error(`Expected first argument to be of type array or string, but found ${ya(r.type)} instead`);if(t.length===4){const a=n.parse(t[3],3,Nn);return a?new xM(r.type,r,i,a):null}else return new xM(r.type,r,i)}evaluate(t){const n=this.input.evaluate(t),r=this.beginIndex.evaluate(t);let i;if(this.endIndex&&(i=this.endIndex.evaluate(t)),Hv(n,["string"]))return[...n].slice(r,i).join("");if(Hv(n,["array"]))return n.slice(r,i);throw new Ba(`Expected first argument to be of type array or string, but found ${ya(no(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Hne(e,t){const n=e.length-1;let r=0,i=n,a=0,o,s;for(;r<=i;)if(a=Math.floor((r+i)/2),o=e[a],s=e[a+1],o<=t){if(a===n||t<s)return a;r=a+1}else if(o>t)i=a-1;else throw new Ba("Input is not a number.");return 0}class dE{constructor(t,n,r){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[i,a]of r)this.labels.push(i),this.outputs.push(a)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const r=n.parse(t[1],1,Nn);if(!r)return null;const i=[];let a=null;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);for(let o=1;o<t.length;o+=2){const s=o===1?-1/0:t[o],l=t[o+1],c=o,h=o+1;if(typeof s!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);const f=n.parse(l,h,a);if(!f)return null;a=a||f.type,i.push([s,f])}return new dE(a,r,i)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);const a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);const o=Hne(n,i);return r[o].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function eXe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gL,X9;function tXe(){if(X9)return gL;X9=1,gL=e;function e(t,n,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(i-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=i}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,i=0;i<8;i++){var a=this.sampleCurveX(r)-t;if(Math.abs(a)<n)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-a/o}var s=0,l=1;for(r=t,i=0;i<20&&(a=this.sampleCurveX(r),!(Math.abs(a-t)<n));i++)t>a?s=r:l=r,r=(l-s)*.5+s;return r},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},gL}var nXe=tXe(),rXe=eXe(nXe);class Kc{constructor(t,n,r,i,a){this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[o,s]of a)this.labels.push(o),this.outputs.push(s)}static interpolationFactor(t,n,r,i){let a=0;if(t.name==="exponential")a=yL(n,t.base,r,i);else if(t.name==="linear")a=yL(n,1,r,i);else if(t.name==="cubic-bezier"){const o=t.controlPoints;a=new rXe(o[0],o[1],o[2],o[3]).solve(yL(n,1,r,i))}return a}static parse(t,n){let[r,i,a,...o]=t;if(!Array.isArray(i)||i.length===0)return n.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const c=i[1];if(typeof c!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:c}}else if(i[0]==="cubic-bezier"){const c=i.slice(1);if(c.length!==4||c.some(h=>typeof h!="number"||h<0||h>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:c}}else return n.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(a=n.parse(a,2,Nn),!a)return null;const s=[];let l=null;r==="interpolate-hcl"||r==="interpolate-lab"?l=Gc:n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);for(let c=0;c<o.length;c+=2){const h=o[c],f=o[c+1],p=c+3,v=c+4;if(typeof h!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(s.length&&s[s.length-1][0]>=h)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);const _=n.parse(f,v,l);if(!_)return null;l=l||_.type,s.push([h,_])}return!qg(l,Nn)&&!qg(l,rE)&&!qg(l,Gc)&&!qg(l,oE)&&!qg(l,sE)&&!qg(l,hl(Nn))?n.error(`Type ${ya(l)} is not interpolatable.`):new Kc(l,r,i,a,s)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);const a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);const o=Hne(n,i),s=n[o],l=n[o+1],c=Kc.interpolationFactor(this.interpolation,i,s,l),h=r[o].evaluate(t),f=r[o+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return jv(h,f,c);case"color":return Ui.interpolate(h,f,c);case"padding":return Zl.interpolate(h,f,c);case"variableAnchorOffsetCollection":return Gu.interpolate(h,f,c);case"array":return bM(h,f,c);case"projectionDefinition":return Ou.interpolate(h,f,c)}case"interpolate-hcl":return Ui.interpolate(h,f,c,"hcl");case"interpolate-lab":return Ui.interpolate(h,f,c,"lab")}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function yL(e,t,n,r){const i=r-n,a=e-n;return i===0?0:t===1?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}Ui.interpolate,Zl.interpolate,Gu.interpolate;class Vw{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let r=null;const i=n.expectedType;i&&i.kind!=="value"&&(r=i);const a=[];for(const o of t.slice(1)){const s=n.parse(o,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!s)return null;r=r||s.type,a.push(s)}if(!r)throw new Error("No output type");return i&&a.some(o=>Nw(i,o.type))?new Vw(Hr,a):new Vw(r,a)}evaluate(t){let n=null,r=0,i;for(const a of this.args)if(r++,n=a.evaluate(t),n&&n instanceof Xf&&!n.available&&(i||(i=n.name),n=null,r===this.args.length&&(n=i)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function J9(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function iXe(e,t,n){return t===n}function aXe(e,t,n){return t!==n}function oXe(e,t,n){return t<n}function sXe(e,t,n){return t>n}function lXe(e,t,n){return t<=n}function uXe(e,t,n){return t>=n}function jne(e,t,n,r){return r.compare(t,n)===0}function cXe(e,t,n,r){return!jne(e,t,n,r)}function dXe(e,t,n,r){return r.compare(t,n)<0}function hXe(e,t,n,r){return r.compare(t,n)>0}function fXe(e,t,n,r){return r.compare(t,n)<=0}function pXe(e,t,n,r){return r.compare(t,n)>=0}function W0(e,t,n){const r=e!=="=="&&e!=="!=";return class Une{constructor(a,o,s){this.type=Vr,this.lhs=a,this.rhs=o,this.collator=s,this.hasUntypedArgument=a.type.kind==="value"||o.type.kind==="value"}static parse(a,o){if(a.length!==3&&a.length!==4)return o.error("Expected two or three arguments.");const s=a[0];let l=o.parse(a[1],1,Hr);if(!l)return null;if(!J9(s,l.type))return o.concat(1).error(`"${s}" comparisons are not supported for type '${ya(l.type)}'.`);let c=o.parse(a[2],2,Hr);if(!c)return null;if(!J9(s,c.type))return o.concat(2).error(`"${s}" comparisons are not supported for type '${ya(c.type)}'.`);if(l.type.kind!==c.type.kind&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error(`Cannot compare types '${ya(l.type)}' and '${ya(c.type)}'.`);r&&(l.type.kind==="value"&&c.type.kind!=="value"?l=new zu(c.type,[l]):l.type.kind!=="value"&&c.type.kind==="value"&&(c=new zu(l.type,[c])));let h=null;if(a.length===4){if(l.type.kind!=="string"&&c.type.kind!=="string"&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(h=o.parse(a[3],3,iE),!h)return null}return new Une(l,c,h)}evaluate(a){const o=this.lhs.evaluate(a),s=this.rhs.evaluate(a);if(r&&this.hasUntypedArgument){const l=no(o),c=no(s);if(l.kind!==c.kind||!(l.kind==="string"||l.kind==="number"))throw new Ba(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${l.kind}, ${c.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const l=no(o),c=no(s);if(l.kind!=="string"||c.kind!=="string")return t(a,o,s)}return this.collator?n(a,o,s,this.collator.evaluate(a)):t(a,o,s)}eachChild(a){a(this.lhs),a(this.rhs),this.collator&&a(this.collator)}outputDefined(){return!0}}}const vXe=W0("==",iXe,jne),mXe=W0("!=",aXe,cXe),gXe=W0("<",oXe,dXe),yXe=W0(">",sXe,hXe),_Xe=W0("<=",lXe,fXe),bXe=W0(">=",uXe,pXe);class hE{constructor(t,n,r){this.type=iE,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const r=t[1];if(typeof r!="object"||Array.isArray(r))return n.error("Collator options argument must be an object.");const i=n.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Vr);if(!i)return null;const a=n.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Vr);if(!a)return null;let o=null;return r.locale&&(o=n.parse(r.locale,1,Yr),!o)?null:new hE(i,a,o)}evaluate(t){return new V4(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class G4{constructor(t,n,r,i,a){this.type=Yr,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=a}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const r=n.parse(t[1],1,Nn);if(!r)return null;const i=t[2];if(typeof i!="object"||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");let a=null;if(i.locale&&(a=n.parse(i.locale,1,Yr),!a))return null;let o=null;if(i.currency&&(o=n.parse(i.currency,1,Yr),!o))return null;let s=null;if(i["min-fraction-digits"]&&(s=n.parse(i["min-fraction-digits"],1,Nn),!s))return null;let l=null;return i["max-fraction-digits"]&&(l=n.parse(i["max-fraction-digits"],1,Nn),!l)?null:new G4(r,a,o,s,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class K4{constructor(t){this.type=aE,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&typeof r=="object")return n.error("First argument must be an image or text section.");const i=[];let a=!1;for(let o=1;o<=t.length-1;++o){const s=t[o];if(a&&typeof s=="object"&&!Array.isArray(s)){a=!1;let l=null;if(s["font-scale"]&&(l=n.parse(s["font-scale"],1,Nn),!l))return null;let c=null;if(s["text-font"]&&(c=n.parse(s["text-font"],1,hl(Yr)),!c))return null;let h=null;if(s["text-color"]&&(h=n.parse(s["text-color"],1,Gc),!h))return null;let f=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!XYe.includes(s["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(f=n.parse(s["vertical-align"],1,Yr),!f)return null}const p=i[i.length-1];p.scale=l,p.font=c,p.textColor=h,p.verticalAlign=f}else{const l=n.parse(t[o],1,Hr);if(!l)return null;const c=l.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new K4(i)}evaluate(t){const n=r=>{const i=r.content.evaluate(t);return no(i)===Px?new IO("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(t):null):new IO(U1(i),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null,r.verticalAlign?r.verticalAlign.evaluate(t):null)};return new Kd(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class q4{constructor(t){this.type=Px,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const r=n.parse(t[1],1,Yr);return r?new q4(r):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),r=Xf.fromString(n);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(n)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}}class Z4{constructor(t){this.type=Nn,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=n.parse(t[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${ya(r.type)} instead.`):new Z4(r):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Ba(`Expected value to be of type string or array, but found ${ya(no(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const qc=8192;function wXe(e,t){const n=xXe(e[0]),r=CXe(e[1]),i=Math.pow(2,t.z);return[Math.round(n*i*qc),Math.round(r*i*qc)]}function Y4(e,t){const n=Math.pow(2,t.z),r=(e[0]/qc+t.x)/n,i=(e[1]/qc+t.y)/n;return[SXe(r),TXe(i)]}function xXe(e){return(180+e)/360}function SXe(e){return e*360-180}function CXe(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function TXe(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Ix(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Hw(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function MXe(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function kXe(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i===0&&r*a<=0&&i*o<=0}function fE(e,t,n,r){const i=[t[0]-e[0],t[1]-e[1]],a=[r[0]-n[0],r[1]-n[1]];return IXe(a,i)===0?!1:!!(Q9(e,t,n,r)&&Q9(n,r,e,t))}function EXe(e,t,n){for(const r of n)for(let i=0;i<r.length-1;++i)if(fE(e,t,r[i],r[i+1]))return!0;return!1}function G0(e,t,n=!1){let r=!1;for(const i of t)for(let a=0;a<i.length-1;a++){if(kXe(e,i[a],i[a+1]))return n;MXe(e,i[a],i[a+1])&&(r=!r)}return r}function AXe(e,t){for(const n of t)if(G0(e,n))return!0;return!1}function Wne(e,t){for(const n of e)if(!G0(n,t))return!1;for(let n=0;n<e.length-1;++n)if(EXe(e[n],e[n+1],t))return!1;return!0}function PXe(e,t){for(const n of t)if(Wne(e,n))return!0;return!1}function IXe(e,t){return e[0]*t[1]-e[1]*t[0]}function Q9(e,t,n,r){const i=e[0]-n[0],a=e[1]-n[1],o=t[0]-n[0],s=t[1]-n[1],l=r[0]-n[0],c=r[1]-n[1],h=i*c-l*a,f=o*c-l*s;return h>0&&f<0||h<0&&f>0}function X4(e,t,n){const r=[];for(let i=0;i<e.length;i++){const a=[];for(let o=0;o<e[i].length;o++){const s=wXe(e[i][o],n);Ix(t,s),a.push(s)}r.push(a)}return r}function Gne(e,t,n){const r=[];for(let i=0;i<e.length;i++){const a=X4(e[i],t,n);r.push(a)}return r}function Kne(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const i=r*.5;let a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;a===0&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}Ix(t,e)}function LXe(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function e7(e,t,n,r){const i=Math.pow(2,r.z)*qc,a=[r.x*qc,r.y*qc],o=[];for(const s of e)for(const l of s){const c=[l.x+a[0],l.y+a[1]];Kne(c,t,n,i),o.push(c)}return o}function t7(e,t,n,r){const i=Math.pow(2,r.z)*qc,a=[r.x*qc,r.y*qc],o=[];for(const s of e){const l=[];for(const c of s){const h=[c.x+a[0],c.y+a[1]];Ix(t,h),l.push(h)}o.push(l)}if(t[2]-t[0]<=i/2){LXe(t);for(const s of o)for(const l of s)Kne(l,t,n,i)}return o}function DXe(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(t.type==="Polygon"){const a=X4(t.coordinates,r,i),o=e7(e.geometry(),n,r,i);if(!Hw(n,r))return!1;for(const s of o)if(!G0(s,a))return!1}if(t.type==="MultiPolygon"){const a=Gne(t.coordinates,r,i),o=e7(e.geometry(),n,r,i);if(!Hw(n,r))return!1;for(const s of o)if(!AXe(s,a))return!1}return!0}function RXe(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(t.type==="Polygon"){const a=X4(t.coordinates,r,i),o=t7(e.geometry(),n,r,i);if(!Hw(n,r))return!1;for(const s of o)if(!Wne(s,a))return!1}if(t.type==="MultiPolygon"){const a=Gne(t.coordinates,r,i),o=t7(e.geometry(),n,r,i);if(!Hw(n,r))return!1;for(const s of o)if(!PXe(s,a))return!1}return!0}class Uv{constructor(t,n){this.type=Vr,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if($w(t[1])){const r=t[1];if(r.type==="FeatureCollection"){const i=[];for(const a of r.features){const{type:o,coordinates:s}=a.geometry;o==="Polygon"&&i.push(s),o==="MultiPolygon"&&i.push(...s)}if(i.length){const a={type:"MultiPolygon",coordinates:i};return new Uv(r,a)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Uv(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Uv(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return DXe(t,this.geometries);if(t.geometryType()==="LineString")return RXe(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class qne{constructor(t=[],n=(r,i)=>r<i?-1:r>i?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const a=t-1>>1,o=n[a];if(r(i,o)>=0)break;n[t]=o,t=a}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,a=n[t];for(;t<i;){let o=(t<<1)+1;const s=o+1;if(s<this.length&&r(n[s],n[o])<0&&(o=s),r(n[o],a)>=0)break;n[t]=n[o],t=o}n[t]=a}}function OXe(e,t){if(e.length<=1)return[e];const n=[];let r,i;for(const a of e){const o=zXe(a);o!==0&&(a.area=Math.abs(o),i===void 0&&(i=o<0),i===o<0?(r&&n.push(r),r=[a]):r.push(a))}return r&&n.push(r),n}function zXe(e){let t=0;for(let n=0,r=e.length,i=r-1,a,o;n<r;i=n++)a=e[n],o=e[i],t+=(o.x-a.x)*(a.y+o.y);return t}const BXe=6378.137,n7=1/298.257223563,r7=n7*(2-n7),i7=Math.PI/180;class J4{constructor(t){const n=i7*BXe*1e3,r=Math.cos(t*i7),i=1/(1-r7*(1-r*r)),a=Math.sqrt(i);this.kx=n*a*r,this.ky=n*a*i*(1-r7)}distance(t,n){const r=this.wrap(t[0]-n[0])*this.kx,i=(t[1]-n[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(t,n){let r=1/0,i,a,o,s;for(let l=0;l<t.length-1;l++){let c=t[l][0],h=t[l][1],f=this.wrap(t[l+1][0]-c)*this.kx,p=(t[l+1][1]-h)*this.ky,v=0;(f!==0||p!==0)&&(v=(this.wrap(n[0]-c)*this.kx*f+(n[1]-h)*this.ky*p)/(f*f+p*p),v>1?(c=t[l+1][0],h=t[l+1][1]):v>0&&(c+=f/this.kx*v,h+=p/this.ky*v)),f=this.wrap(n[0]-c)*this.kx,p=(n[1]-h)*this.ky;const _=f*f+p*p;_<r&&(r=_,i=c,a=h,o=l,s=v)}return{point:[i,a],index:o,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const LO=100,DO=50;function Zne(e,t){return t[0]-e[0]}function SM(e){return e[1]-e[0]+1}function Qd(e,t){return e[1]>=e[0]&&e[1]<t}function RO(e,t){if(e[0]>e[1])return[null,null];const n=SM(e);if(t){if(n===2)return[e,null];const i=Math.floor(n/2);return[[e[0],e[0]+i],[e[0]+i,e[1]]]}if(n===1)return[e,null];const r=Math.floor(n/2)-1;return[[e[0],e[0]+r],[e[0]+r+1,e[1]]]}function OO(e,t){if(!Qd(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)Ix(n,e[r]);return n}function zO(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const r of n)Ix(t,r);return t}function a7(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function Q4(e,t,n){if(!a7(e)||!a7(t))return NaN;let r=0,i=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),n.distance([0,0],[r,i])}function Ev(e,t,n){const r=n.pointOnLine(t,e);return n.distance(e,r.point)}function eB(e,t,n,r,i){const a=Math.min(Ev(e,[n,r],i),Ev(t,[n,r],i)),o=Math.min(Ev(n,[e,t],i),Ev(r,[e,t],i));return Math.min(a,o)}function FXe(e,t,n,r,i){if(!(Qd(t,e.length)&&Qd(r,n.length)))return 1/0;let a=1/0;for(let o=t[0];o<t[1];++o){const s=e[o],l=e[o+1];for(let c=r[0];c<r[1];++c){const h=n[c],f=n[c+1];if(fE(s,l,h,f))return 0;a=Math.min(a,eB(s,l,h,f,i))}}return a}function NXe(e,t,n,r,i){if(!(Qd(t,e.length)&&Qd(r,n.length)))return NaN;let a=1/0;for(let o=t[0];o<=t[1];++o)for(let s=r[0];s<=r[1];++s)if(a=Math.min(a,i.distance(e[o],n[s])),a===0)return a;return a}function $Xe(e,t,n){if(G0(e,t,!0))return 0;let r=1/0;for(const i of t){const a=i[0],o=i[i.length-1];if(a!==o&&(r=Math.min(r,Ev(e,[o,a],n)),r===0))return r;const s=n.pointOnLine(i,e);if(r=Math.min(r,n.distance(e,s.point)),r===0)return r}return r}function VXe(e,t,n,r){if(!Qd(t,e.length))return NaN;for(let a=t[0];a<=t[1];++a)if(G0(e[a],n,!0))return 0;let i=1/0;for(let a=t[0];a<t[1];++a){const o=e[a],s=e[a+1];for(const l of n)for(let c=0,h=l.length,f=h-1;c<h;f=c++){const p=l[f],v=l[c];if(fE(o,s,p,v))return 0;i=Math.min(i,eB(o,s,p,v,r))}}return i}function o7(e,t){for(const n of e)for(const r of n)if(G0(r,t,!0))return!0;return!1}function HXe(e,t,n,r=1/0){const i=zO(e),a=zO(t);if(r!==1/0&&Q4(i,a,n)>=r)return r;if(Hw(i,a)){if(o7(e,t))return 0}else if(o7(t,e))return 0;let o=1/0;for(const s of e)for(let l=0,c=s.length,h=c-1;l<c;h=l++){const f=s[h],p=s[l];for(const v of t)for(let _=0,b=v.length,C=b-1;_<b;C=_++){const T=v[C],E=v[_];if(fE(f,p,T,E))return 0;o=Math.min(o,eB(f,p,T,E,n))}}return o}function s7(e,t,n,r,i,a){if(!a)return;const o=Q4(OO(r,a),i,n);o<t&&e.push([o,a,[0,0]])}function dC(e,t,n,r,i,a,o){if(!a||!o)return;const s=Q4(OO(r,a),OO(i,o),n);s<t&&e.push([s,a,o])}function CM(e,t,n,r,i=1/0){let a=Math.min(r.distance(e[0],n[0][0]),i);if(a===0)return a;const o=new qne([[0,[0,e.length-1],[0,0]]],Zne),s=zO(n);for(;o.length>0;){const l=o.pop();if(l[0]>=a)continue;const c=l[1],h=t?DO:LO;if(SM(c)<=h){if(!Qd(c,e.length))return NaN;if(t){const f=VXe(e,c,n,r);if(isNaN(f)||f===0)return f;a=Math.min(a,f)}else for(let f=c[0];f<=c[1];++f){const p=$Xe(e[f],n,r);if(a=Math.min(a,p),a===0)return 0}}else{const f=RO(c,t);s7(o,a,r,e,s,f[0]),s7(o,a,r,e,s,f[1])}}return a}function TM(e,t,n,r,i,a=1/0){let o=Math.min(a,i.distance(e[0],n[0]));if(o===0)return o;const s=new qne([[0,[0,e.length-1],[0,n.length-1]]],Zne);for(;s.length>0;){const l=s.pop();if(l[0]>=o)continue;const c=l[1],h=l[2],f=t?DO:LO,p=r?DO:LO;if(SM(c)<=f&&SM(h)<=p){if(!Qd(c,e.length)&&Qd(h,n.length))return NaN;let v;if(t&&r)v=FXe(e,c,n,h,i),o=Math.min(o,v);else if(t&&!r){const _=e.slice(c[0],c[1]+1);for(let b=h[0];b<=h[1];++b)if(v=Ev(n[b],_,i),o=Math.min(o,v),o===0)return o}else if(!t&&r){const _=n.slice(h[0],h[1]+1);for(let b=c[0];b<=c[1];++b)if(v=Ev(e[b],_,i),o=Math.min(o,v),o===0)return o}else v=NXe(e,c,n,h,i),o=Math.min(o,v)}else{const v=RO(c,t),_=RO(h,r);dC(s,o,i,e,n,v[0],_[0]),dC(s,o,i,e,n,v[0],_[1]),dC(s,o,i,e,n,v[1],_[0]),dC(s,o,i,e,n,v[1],_[1])}}return o}function jXe(e,t){const n=e.geometry(),r=n.flat().map(o=>Y4([o.x,o.y],e.canonical));if(n.length===0)return NaN;const i=new J4(r[0][1]);let a=1/0;for(const o of t){switch(o.type){case"Point":a=Math.min(a,TM(r,!1,[o.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,TM(r,!1,o.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,CM(r,!1,o.coordinates,i,a));break}if(a===0)return a}return a}function UXe(e,t){const n=e.geometry(),r=n.flat().map(o=>Y4([o.x,o.y],e.canonical));if(n.length===0)return NaN;const i=new J4(r[0][1]);let a=1/0;for(const o of t){switch(o.type){case"Point":a=Math.min(a,TM(r,!0,[o.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,TM(r,!0,o.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,CM(r,!0,o.coordinates,i,a));break}if(a===0)return a}return a}function WXe(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const r=OXe(n).map(o=>o.map(s=>s.map(l=>Y4([l.x,l.y],e.canonical)))),i=new J4(r[0][0][0][1]);let a=1/0;for(const o of t)for(const s of r){switch(o.type){case"Point":a=Math.min(a,CM([o.coordinates],!1,s,i,a));break;case"LineString":a=Math.min(a,CM(o.coordinates,!0,s,i,a));break;case"Polygon":a=Math.min(a,HXe(s,o.coordinates,i,a));break}if(a===0)return a}return a}function _L(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}class Wv{constructor(t,n){this.type=Nn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if($w(t[1])){const r=t[1];if(r.type==="FeatureCollection")return new Wv(r,r.features.map(i=>_L(i.geometry)).flat());if(r.type==="Feature")return new Wv(r,_L(r.geometry));if("type"in r&&"coordinates"in r)return new Wv(r,_L(r))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return jXe(t,this.geometries);if(t.geometryType()==="LineString")return UXe(t,this.geometries);if(t.geometryType()==="Polygon")return WXe(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const tB={"==":vXe,"!=":mXe,">":yXe,"<":gXe,">=":bXe,"<=":_Xe,array:zu,at:H4,boolean:zu,case:W4,coalesce:Vw,collator:hE,format:K4,image:q4,in:j4,"index-of":wM,interpolate:Kc,"interpolate-hcl":Kc,"interpolate-lab":Kc,length:Z4,let:uE,literal:m0,match:U4,number:zu,"number-format":G4,object:zu,slice:xM,step:dE,string:zu,"to-boolean":yf,"to-color":yf,"to-number":yf,"to-string":yf,var:cE,within:Uv,distance:Wv};class Vu{constructor(t,n,r,i){this.name=t,this.type=n,this._evaluate=r,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const r=t[0],i=Vu.definitions[r];if(!i)return n.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter(([c])=>!Array.isArray(c)||c.length===t.length-1);let l=null;for(const[c,h]of s){l=new lE(n.registry,MM,n.path,null,n.scope);const f=[];let p=!1;for(let v=1;v<t.length;v++){const _=t[v],b=Array.isArray(c)?c[v-1]:c.type,C=l.parse(_,1+f.length,b);if(!C){p=!0;break}f.push(C)}if(!p){if(Array.isArray(c)&&c.length!==f.length){l.error(`Expected ${c.length} arguments, but found ${f.length} instead.`);continue}for(let v=0;v<f.length;v++){const _=Array.isArray(c)?c[v]:c.type,b=f[v];l.concat(v+1).checkSubtype(_,b.type)}if(l.errors.length===0)return new Vu(r,a,h,f)}}if(s.length===1)n.errors.push(...l.errors);else{const c=(s.length?s:o).map(([f])=>KXe(f)).join(" | "),h=[];for(let f=1;f<t.length;f++){const p=n.parse(t[f],1+h.length);if(!p)return null;h.push(ya(p.type))}n.error(`Expected arguments of type ${c}, but found (${h.join(", ")}) instead.`)}return null}static register(t,n){Vu.definitions=n;for(const r in n)t[r]=Vu}}function l7(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const a=i?i.evaluate(e):1,o=$ne(t,n,r,a);if(o)throw new Ba(o);return new Ui(t/255,n/255,r/255,a,!1)}function u7(e,t){return e in t}function bL(e,t){const n=t[e];return typeof n>"u"?null:n}function GXe(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}function lv(e){return{type:e}}Vu.register(tB,{error:[VYe,[Yr],(e,[t])=>{throw new Ba(t.evaluate(e))}],typeof:[Yr,[Hr],(e,[t])=>ya(no(t.evaluate(e)))],"to-rgba":[hl(Nn,4),[Gc],(e,[t])=>{const[n,r,i,a]=t.evaluate(e).rgb;return[n*255,r*255,i*255,a]}],rgb:[Gc,[Nn,Nn,Nn],l7],rgba:[Gc,[Nn,Nn,Nn,Nn],l7],has:{type:Vr,overloads:[[[Yr],(e,[t])=>u7(t.evaluate(e),e.properties())],[[Yr,By],(e,[t,n])=>u7(t.evaluate(e),n.evaluate(e))]]},get:{type:Hr,overloads:[[[Yr],(e,[t])=>bL(t.evaluate(e),e.properties())],[[Yr,By],(e,[t,n])=>bL(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Hr,[Yr],(e,[t])=>bL(t.evaluate(e),e.featureState||{})],properties:[By,[],e=>e.properties()],"geometry-type":[Yr,[],e=>e.geometryType()],id:[Hr,[],e=>e.id()],zoom:[Nn,[],e=>e.globals.zoom],"heatmap-density":[Nn,[],e=>e.globals.heatmapDensity||0],"line-progress":[Nn,[],e=>e.globals.lineProgress||0],accumulated:[Hr,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[Nn,lv(Nn),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[Nn,lv(Nn),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:Nn,overloads:[[[Nn,Nn],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[Nn],(e,[t])=>-t.evaluate(e)]]},"/":[Nn,[Nn,Nn],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[Nn,[Nn,Nn],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[Nn,[],()=>Math.LN2],pi:[Nn,[],()=>Math.PI],e:[Nn,[],()=>Math.E],"^":[Nn,[Nn,Nn],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[Nn,[Nn],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Nn,[Nn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Nn,[Nn],(e,[t])=>Math.log(t.evaluate(e))],log2:[Nn,[Nn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Nn,[Nn],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Nn,[Nn],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Nn,[Nn],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Nn,[Nn],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Nn,[Nn],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Nn,[Nn],(e,[t])=>Math.atan(t.evaluate(e))],min:[Nn,lv(Nn),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[Nn,lv(Nn),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[Nn,[Nn],(e,[t])=>Math.abs(t.evaluate(e))],round:[Nn,[Nn],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Nn,[Nn],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Nn,[Nn],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Vr,[Yr,Hr],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Vr,[Hr],(e,[t])=>e.id()===t.value],"filter-type-==":[Vr,[Yr],(e,[t])=>e.geometryType()===t.value],"filter-<":[Vr,[Yr,Hr],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Vr,[Hr],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Vr,[Yr,Hr],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Vr,[Hr],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Vr,[Yr,Hr],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Vr,[Hr],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Vr,[Yr,Hr],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Vr,[Hr],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Vr,[Hr],(e,[t])=>t.value in e.properties()],"filter-has-id":[Vr,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Vr,[hl(Yr)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Vr,[hl(Hr)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Vr,[Yr,hl(Hr)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Vr,[Yr,hl(Hr)],(e,[t,n])=>GXe(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Vr,overloads:[[[Vr,Vr],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[lv(Vr),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Vr,overloads:[[[Vr,Vr],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[lv(Vr),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Vr,[Vr],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Vr,[Yr],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[Yr,[Yr],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Yr,[Yr],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Yr,lv(Hr),(e,t)=>t.map(n=>U1(n.evaluate(e))).join("")],"resolved-locale":[Yr,[iE],(e,[t])=>t.evaluate(e).resolvedLocale()]});function KXe(e){return Array.isArray(e)?`(${e.map(ya).join(", ")})`:`(${ya(e.type)}...)`}function MM(e){if(e instanceof cE)return MM(e.boundExpression);if(e instanceof Vu&&e.name==="error"||e instanceof hE||e instanceof Uv||e instanceof Wv)return!1;const t=e instanceof yf||e instanceof zu;let n=!0;return e.eachChild(r=>{t?n=n&&MM(r):n=n&&r instanceof m0}),n?pE(e)&&vE(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function pE(e){if(e instanceof Vu&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Uv||e instanceof Wv)return!1;let t=!0;return e.eachChild(n=>{t&&!pE(n)&&(t=!1)}),t}function jw(e){if(e instanceof Vu&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!jw(n)&&(t=!1)}),t}function vE(e,t){if(e instanceof Vu&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(r=>{n&&!vE(r,t)&&(n=!1)}),n}function BO(e){return{result:"success",value:e}}function oy(e){return{result:"error",value:e}}function kM(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Yne(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Xne(e){return!!e.expression&&e.expression.interpolated}function Ci(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function nB(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class qXe{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new Vne,this._defaultValue=n?XXe(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,r,i,a,o){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,n,r,i,a,o){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new Ba(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function Jne(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in tB}function Qne(e,t){const n=new lE(tB,MM,[],t?YXe(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?BO(new qXe(r,t)):oy(n.errors)}class c7{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!jw(n.expression)}evaluateWithoutErrorHandling(t,n,r,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,i,a,o)}evaluate(t,n,r,i,a,o){return this._styleExpression.evaluate(t,n,r,i,a,o)}}class d7{constructor(t,n,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!jw(n.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,n,r,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,i,a,o)}evaluate(t,n,r,i,a,o){return this._styleExpression.evaluate(t,n,r,i,a,o)}interpolationFactor(t,n,r){return this.interpolationType?Kc.interpolationFactor(this.interpolationType,t,n,r):0}}function ZXe(e,t){const n=Qne(e,t);if(n.result==="error")return n;const r=n.value.expression,i=pE(r);if(!i&&!kM(t))return oy([new $c("","data expressions not supported")]);const a=vE(r,["zoom"]);if(!a&&!Yne(t))return oy([new $c("","zoom expressions not supported")]);const o=eT(r);if(!o&&!a)return oy([new $c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof $c)return oy([o]);if(o instanceof Kc&&!Xne(t))return oy([new $c("",'"interpolate" expressions cannot be used with this property')]);if(!o)return BO(i?new c7("constant",n.value):new c7("source",n.value));const s=o instanceof Kc?o.interpolation:void 0;return BO(i?new d7("camera",n.value,o.labels,s):new d7("composite",n.value,o.labels,s))}function eT(e){let t=null;if(e instanceof uE)t=eT(e.result);else if(e instanceof Vw){for(const n of e.args)if(t=eT(n),t)break}else(e instanceof dE||e instanceof Kc)&&e.input instanceof Vu&&e.input.name==="zoom"&&(t=e);return t instanceof $c||e.eachChild(n=>{const r=eT(n);r instanceof $c?t=r:!t&&r?t=new $c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new $c("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function YXe(e){const t={color:Gc,string:Yr,number:Nn,enum:Yr,boolean:Vr,formatted:aE,padding:oE,projectionDefinition:rE,resolvedImage:Px,variableAnchorOffsetCollection:sE};return e.type==="array"?hl(t[e.value]||Hr,e.length):t[e.type]}function XXe(e){return e.type==="color"&&nB(e.default)?new Ui(0,0,0,0):e.type==="color"?Ui.parse(e.default)||null:e.type==="padding"?Zl.parse(e.default)||null:e.type==="variableAnchorOffsetCollection"?Gu.parse(e.default)||null:e.type==="projectionDefinition"?Ou.parse(e.default)||null:e.default===void 0?null:e.default}function ere(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ere(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function tre(e){const t=e.key,n=e.value;return n?[new Bn(t,n,"constants have been deprecated as of v8")]:[]}function ka(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function pm(e){if(Array.isArray(e))return e.map(pm);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=pm(e[n]);return t}return ka(e)}function Yl(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=e.validateSpec;let l=[];const c=Ci(n);if(c!=="object")return[new Bn(t,n,`object expected, ${c} found`)];for(const h in n){const f=h.split(".")[0],p=r[f]||r["*"];let v;if(i[f])v=i[f];else if(r[f])v=s;else if(i["*"])v=i["*"];else if(r["*"])v=s;else{l.push(new Bn(t,n[h],`unknown property "${h}"`));continue}l=l.concat(v({key:(t&&`${t}.`)+h,value:n[h],valueSpec:p,style:a,styleSpec:o,object:n,objectKey:h,validateSpec:s},n))}for(const h in r)i[h]||r[h].required&&r[h].default===void 0&&n[h]===void 0&&l.push(new Bn(t,n,`missing required property "${h}"`));return l}function rB(e){const t=e.value,n=e.valueSpec,r=e.validateSpec,i=e.style,a=e.styleSpec,o=e.key,s=e.arrayElementValidator||r;if(Ci(t)!=="array")return[new Bn(o,t,`array expected, ${Ci(t)} found`)];if(n.length&&t.length!==n.length)return[new Bn(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Bn(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let l={type:n.value,values:n.values};a.$version<7&&(l.function=n.function),Ci(n.value)==="object"&&(l=n.value);let c=[];for(let h=0;h<t.length;h++)c=c.concat(s({array:t,arrayIndex:h,value:t[h],valueSpec:l,validateSpec:e.validateSpec,style:i,styleSpec:a,key:`${o}[${h}]`}));return c}function iB(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Ci(n);return i==="number"&&n!==n&&(i="NaN"),i!=="number"?[new Bn(t,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new Bn(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new Bn(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function nre(e){const t=e.valueSpec,n=ka(e.value.type);let r,i={},a,o;const s=n!=="categorical"&&e.value.property===void 0,l=!s,c=Ci(e.value.stops)==="array"&&Ci(e.value.stops[0])==="array"&&Ci(e.value.stops[0][0])==="object",h=Yl({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:f,default:_}});return n==="identity"&&s&&h.push(new Bn(e.key,e.value,'missing required property "property"')),n!=="identity"&&!e.value.stops&&h.push(new Bn(e.key,e.value,'missing required property "stops"')),n==="exponential"&&e.valueSpec.expression&&!Xne(e.valueSpec)&&h.push(new Bn(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!kM(e.valueSpec)?h.push(new Bn(e.key,e.value,"property functions not supported")):s&&!Yne(e.valueSpec)&&h.push(new Bn(e.key,e.value,"zoom functions not supported"))),(n==="categorical"||c)&&e.value.property===void 0&&h.push(new Bn(e.key,e.value,'"property" property is required')),h;function f(b){if(n==="identity")return[new Bn(b.key,b.value,'identity function may not have a "stops" property')];let C=[];const T=b.value;return C=C.concat(rB({key:b.key,value:T,valueSpec:b.valueSpec,validateSpec:b.validateSpec,style:b.style,styleSpec:b.styleSpec,arrayElementValidator:p})),Ci(T)==="array"&&T.length===0&&C.push(new Bn(b.key,T,"array must have at least one stop")),C}function p(b){let C=[];const T=b.value,E=b.key;if(Ci(T)!=="array")return[new Bn(E,T,`array expected, ${Ci(T)} found`)];if(T.length!==2)return[new Bn(E,T,`array length 2 expected, length ${T.length} found`)];if(c){if(Ci(T[0])!=="object")return[new Bn(E,T,`object expected, ${Ci(T[0])} found`)];if(T[0].zoom===void 0)return[new Bn(E,T,"object stop key must have zoom")];if(T[0].value===void 0)return[new Bn(E,T,"object stop key must have value")];if(o&&o>ka(T[0].zoom))return[new Bn(E,T[0].zoom,"stop zoom values must appear in ascending order")];ka(T[0].zoom)!==o&&(o=ka(T[0].zoom),a=void 0,i={}),C=C.concat(Yl({key:`${E}[0]`,value:T[0],valueSpec:{zoom:{}},validateSpec:b.validateSpec,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{zoom:iB,value:v}}))}else C=C.concat(v({key:`${E}[0]`,value:T[0],valueSpec:{},validateSpec:b.validateSpec,style:b.style,styleSpec:b.styleSpec},T));return Jne(pm(T[1]))?C.concat([new Bn(`${E}[1]`,T[1],"expressions are not allowed in function stops.")]):C.concat(b.validateSpec({key:`${E}[1]`,value:T[1],valueSpec:t,validateSpec:b.validateSpec,style:b.style,styleSpec:b.styleSpec}))}function v(b,C){const T=Ci(b.value),E=ka(b.value),A=b.value!==null?b.value:C;if(!r)r=T;else if(T!==r)return[new Bn(b.key,A,`${T} stop domain type must match previous stop domain type ${r}`)];if(T!=="number"&&T!=="string"&&T!=="boolean")return[new Bn(b.key,A,"stop domain value must be a number, string, or boolean")];if(T!=="number"&&n!=="categorical"){let I=`number expected, ${T} found`;return kM(t)&&n===void 0&&(I+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bn(b.key,A,I)]}return n==="categorical"&&T==="number"&&(!isFinite(E)||Math.floor(E)!==E)?[new Bn(b.key,A,`integer expected, found ${E}`)]:n!=="categorical"&&T==="number"&&a!==void 0&&E<a?[new Bn(b.key,A,"stop domain values must appear in ascending order")]:(a=E,n==="categorical"&&E in i?[new Bn(b.key,A,"stop domain values must be unique")]:(i[E]=!0,[]))}function _(b){return b.validateSpec({key:b.key,value:b.value,valueSpec:t,validateSpec:b.validateSpec,style:b.style,styleSpec:b.styleSpec})}}function g0(e){const t=(e.expressionContext==="property"?ZXe:Qne)(pm(e.value),e.valueSpec);if(t.result==="error")return t.value.map(r=>new Bn(`${e.key}${r.key}`,e.value,r.message));const n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new Bn(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!jw(n))return[new Bn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!jw(n))return[new Bn(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!vE(n,["zoom","feature-state"]))return[new Bn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!pE(n))return[new Bn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function JXe(e){const t=e.value,n=e.key,r=Ci(t);return r!=="boolean"?[new Bn(n,t,`boolean expected, ${r} found`)]:[]}function QXe(e){const t=e.key,n=e.value,r=Ci(n);return r!=="string"?[new Bn(t,n,`color expected, ${r} found`)]:Ui.parse(String(n))?[]:[new Bn(t,n,`color expected, "${n}" found`)]}function Uw(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(ka(n))===-1&&i.push(new Bn(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(r.values).indexOf(ka(n))===-1&&i.push(new Bn(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function aB(e){return ere(pm(e.value))?g0(_M({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rre(e)}function rre(e){const t=e.value,n=e.key;if(Ci(t)!=="array")return[new Bn(n,t,`array expected, ${Ci(t)} found`)];const r=e.styleSpec;let i,a=[];if(t.length<1)return[new Bn(n,t,"filter array must have at least 1 element")];switch(a=a.concat(Uw({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),ka(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ka(t[1])==="$type"&&a.push(new Bn(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&a.push(new Bn(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Ci(t[1]),i!=="string"&&a.push(new Bn(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let o=2;o<t.length;o++)i=Ci(t[o]),ka(t[1])==="$type"?a=a.concat(Uw({key:`${n}[${o}]`,value:t[o],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&a.push(new Bn(`${n}[${o}]`,t[o],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let o=1;o<t.length;o++)a=a.concat(rre({key:`${n}[${o}]`,value:t[o],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Ci(t[1]),t.length!==2?a.push(new Bn(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):i!=="string"&&a.push(new Bn(`${n}[1]`,t[1],`string expected, ${i} found`));break}return a}function ire(e,t){const n=e.key,r=e.validateSpec,i=e.style,a=e.styleSpec,o=e.value,s=e.objectKey,l=a[`${t}_${e.layerType}`];if(!l)return[];const c=s.match(/^(.*)-transition$/);if(t==="paint"&&c&&l[c[1]]&&l[c[1]].transition)return r({key:n,value:o,valueSpec:a.transition,style:i,styleSpec:a});const h=e.valueSpec||l[s];if(!h)return[new Bn(n,o,`unknown property "${s}"`)];let f;if(Ci(o)==="string"&&kM(h)&&!h.tokens&&(f=/^{([^}]+)}$/.exec(o)))return[new Bn(n,o,`"${s}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(f[1])} }\`.`)];const p=[];return e.layerType==="symbol"&&(s==="text-field"&&i&&!i.glyphs&&p.push(new Bn(n,o,'use of "text-field" requires a style "glyphs" property')),s==="text-font"&&nB(pm(o))&&ka(o.type)==="identity"&&p.push(new Bn(n,o,'"text-font" does not support identity functions'))),p.concat(r({key:e.key,value:o,valueSpec:h,style:i,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:s}))}function are(e){return ire(e,"paint")}function ore(e){return ire(e,"layout")}function sre(e){let t=[];const n=e.value,r=e.key,i=e.style,a=e.styleSpec;!n.type&&!n.ref&&t.push(new Bn(r,n,'either "type" or "ref" is required'));let o=ka(n.type);const s=ka(n.ref);if(n.id){const l=ka(n.id);for(let c=0;c<e.arrayIndex;c++){const h=i.layers[c];ka(h.id)===l&&t.push(new Bn(r,n.id,`duplicate layer id "${n.id}", previously used at line ${h.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(c=>{c in n&&t.push(new Bn(r,n[c],`"${c}" is prohibited for ref layers`))});let l;i.layers.forEach(c=>{ka(c.id)===s&&(l=c)}),l?l.ref?t.push(new Bn(r,n.ref,"ref cannot reference another ref layer")):o=ka(l.type):t.push(new Bn(r,n.ref,`ref layer "${s}" not found`))}else if(o!=="background")if(!n.source)t.push(new Bn(r,n,'missing required property "source"'));else{const l=i.sources&&i.sources[n.source],c=l&&ka(l.type);l?c==="vector"&&o==="raster"?t.push(new Bn(r,n.source,`layer "${n.id}" requires a raster source`)):c!=="raster-dem"&&o==="hillshade"?t.push(new Bn(r,n.source,`layer "${n.id}" requires a raster-dem source`)):c==="raster"&&o!=="raster"?t.push(new Bn(r,n.source,`layer "${n.id}" requires a vector source`)):c==="vector"&&!n["source-layer"]?t.push(new Bn(r,n,`layer "${n.id}" must specify a "source-layer"`)):c==="raster-dem"&&o!=="hillshade"?t.push(new Bn(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):o==="line"&&n.paint&&n.paint["line-gradient"]&&(c!=="geojson"||!l.lineMetrics)&&t.push(new Bn(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Bn(r,n.source,`source "${n.source}" not found`))}return t=t.concat(Yl({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"})},filter:aB,layout(l){return Yl({layer:n,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(c){return ore(_M({layerType:o},c))}}})},paint(l){return Yl({layer:n,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(c){return are(_M({layerType:o},c))}}})}}})),t}function vm(e){const t=e.value,n=e.key,r=Ci(t);return r!=="string"?[new Bn(n,t,`string expected, ${r} found`)]:[]}function eJe(e){var t;const n=(t=e.sourceName)!==null&&t!==void 0?t:"",r=e.value,i=e.styleSpec,a=i.source_raster_dem,o=e.style;let s=[];const l=Ci(r);if(r===void 0)return s;if(l!=="object")return s.push(new Bn("source_raster_dem",r,`object expected, ${l} found`)),s;const c=ka(r.encoding)==="custom",h=["redFactor","greenFactor","blueFactor","baseShift"],f=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const p in r)!c&&h.includes(p)?s.push(new Bn(p,r[p],`In "${n}": "${p}" is only valid when "encoding" is set to "custom". ${f} encoding found`)):a[p]?s=s.concat(e.validateSpec({key:p,value:r[p],valueSpec:a[p],validateSpec:e.validateSpec,style:o,styleSpec:i})):s.push(new Bn(p,r[p],`unknown property "${p}"`));return s}const h7={promoteId:tJe};function lre(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style,a=e.validateSpec;if(!t.type)return[new Bn(n,t,'"type" is required')];const o=ka(t.type);let s;switch(o){case"vector":case"raster":return s=Yl({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:h7,validateSpec:a}),s;case"raster-dem":return s=eJe({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:a}),s;case"geojson":if(s=Yl({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:a,objectElementValidators:h7}),t.cluster)for(const l in t.clusterProperties){const[c,h]=t.clusterProperties[l],f=typeof c=="string"?[c,["accumulated"],["get",l]]:c;s.push(...g0({key:`${n}.${l}.map`,value:h,validateSpec:a,expressionContext:"cluster-map"})),s.push(...g0({key:`${n}.${l}.reduce`,value:f,validateSpec:a,expressionContext:"cluster-reduce"}))}return s;case"video":return Yl({key:n,value:t,valueSpec:r.source_video,style:i,validateSpec:a,styleSpec:r});case"image":return Yl({key:n,value:t,valueSpec:r.source_image,style:i,validateSpec:a,styleSpec:r});case"canvas":return[new Bn(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Uw({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:a,styleSpec:r})}}function tJe({key:e,value:t}){if(Ci(t)==="string")return vm({key:e,value:t});{const n=[];for(const r in t)n.push(...vm({key:`${e}.${r}`,value:t[r]}));return n}}function ure(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let a=[];const o=Ci(t);if(t===void 0)return a;if(o!=="object")return a=a.concat([new Bn("light",t,`object expected, ${o} found`)]),a;for(const s in t){const l=s.match(/^(.*)-transition$/);l&&r[l[1]]&&r[l[1]].transition?a=a.concat(e.validateSpec({key:s,value:t[s],valueSpec:n.transition,validateSpec:e.validateSpec,style:i,styleSpec:n})):r[s]?a=a.concat(e.validateSpec({key:s,value:t[s],valueSpec:r[s],validateSpec:e.validateSpec,style:i,styleSpec:n})):a=a.concat([new Bn(s,t[s],`unknown property "${s}"`)])}return a}function cre(e){const t=e.value,n=e.styleSpec,r=n.sky,i=e.style,a=Ci(t);if(t===void 0)return[];if(a!=="object")return[new Bn("sky",t,`object expected, ${a} found`)];let o=[];for(const s in t)r[s]?o=o.concat(e.validateSpec({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):o=o.concat([new Bn(s,t[s],`unknown property "${s}"`)]);return o}function dre(e){const t=e.value,n=e.styleSpec,r=n.terrain,i=e.style;let a=[];const o=Ci(t);if(t===void 0)return a;if(o!=="object")return a=a.concat([new Bn("terrain",t,`object expected, ${o} found`)]),a;for(const s in t)r[s]?a=a.concat(e.validateSpec({key:s,value:t[s],valueSpec:r[s],validateSpec:e.validateSpec,style:i,styleSpec:n})):a=a.concat([new Bn(s,t[s],`unknown property "${s}"`)]);return a}function nJe(e){return vm(e).length===0?[]:g0(e)}function rJe(e){return vm(e).length===0?[]:g0(e)}function iJe(e){const t=e.key,n=e.value;if(Ci(n)==="array"){if(n.length<1||n.length>4)return[new Bn(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let i=[];for(let a=0;a<n.length;a++)i=i.concat(e.validateSpec({key:`${t}[${a}]`,value:n[a],validateSpec:e.validateSpec,valueSpec:r}));return i}else return iB({key:t,value:n,valueSpec:{}})}function aJe(e){const t=e.key,n=e.value,r=Ci(n),i=e.styleSpec;if(r!=="array"||n.length<1||n.length%2!==0)return[new Bn(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let a=[];for(let o=0;o<n.length;o+=2)a=a.concat(Uw({key:`${t}[${o}]`,value:n[o],valueSpec:i.layout_symbol["text-anchor"]})),a=a.concat(rB({key:`${t}[${o+1}]`,value:n[o+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return a}function hre(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const i=[],a=[];for(const o in n){n[o].id&&i.includes(n[o].id)&&t.push(new Bn(r,n,`all the sprites' ids must be unique, but ${n[o].id} is duplicated`)),i.push(n[o].id),n[o].url&&a.includes(n[o].url)&&t.push(new Bn(r,n,`all the sprites' URLs must be unique, but ${n[o].url} is duplicated`)),a.push(n[o].url);const s={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(Yl({key:`${r}[${o}]`,value:n[o],valueSpec:s,validateSpec:e.validateSpec}))}return t}else return vm({key:r,value:n})}function oJe(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style,a=Ci(t);if(t===void 0)return[];if(a!=="object")return[new Bn("projection",t,`object expected, ${a} found`)];let o=[];for(const s in t)r[s]?o=o.concat(e.validateSpec({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):o=o.concat([new Bn(s,t[s],`unknown property "${s}"`)]);return o}function sJe(e){const t=e.key;let n=e.value;n=n instanceof String?n.valueOf():n;const r=Ci(n);return r==="array"&&!uJe(n)&&!lJe(n)?[new Bn(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]:["array","string"].includes(r)?[]:[new Bn(t,n,`projection expected, invalid type "${r}" found`)]}function lJe(e){return!!["interpolate","step","literal"].includes(e[0])}function uJe(e){return Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"}const f7={"*"(){return[]},array:rB,boolean:JXe,number:iB,color:QXe,constants:tre,enum:Uw,filter:aB,function:nre,layer:sre,object:Yl,source:lre,light:ure,sky:cre,terrain:dre,projection:oJe,projectionDefinition:sJe,string:vm,formatted:nJe,resolvedImage:rJe,padding:iJe,variableAnchorOffsetCollection:aJe,sprite:hre};function W1(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=W1,n.expression&&nB(ka(t))?nre(e):n.expression&&Jne(pm(t))?g0(e):n.type&&f7[n.type]?f7[n.type](e):Yl(_M({},e,{valueSpec:n.type?r[n.type]:n}))}function fre(e){const t=e.value,n=e.key,r=vm(e);return r.length||(t.indexOf("{fontstack}")===-1&&r.push(new Bn(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&r.push(new Bn(n,t,'"glyphs" url must include a "{range}" token'))),r}function lu(e,t=$Ye){let n=[];return n=n.concat(W1({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:W1,objectElementValidators:{glyphs:fre,"*"(){return[]}}})),e.constants&&(n=n.concat(tre({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:W1}))),pre(n)}lu.source=fd(hd(lre));lu.sprite=fd(hd(hre));lu.glyphs=fd(hd(fre));lu.light=fd(hd(ure));lu.sky=fd(hd(cre));lu.terrain=fd(hd(dre));lu.layer=fd(hd(sre));lu.filter=fd(hd(aB));lu.paintProperty=fd(hd(are));lu.layoutProperty=fd(hd(ore));function hd(e){return function(t){return e({...t,validateSpec:W1})}}function pre(e){return[].concat(e).sort((t,n)=>t.line-n.line)}function fd(e){return function(...t){return pre(e.apply(this,t))}}function p7(e){if(!e)return{style:j1[H1[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=dJe(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:j1[H1[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:cJe(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:one(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof sne?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof lne?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:lu(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:j1[H1[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function cJe(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function dJe(e){try{const t=JSON.parse(e),n=lu(t);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}function qd(e,t,n){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),n&&n.appendChild(r),r}function oB(e){e.parentNode&&e.parentNode.removeChild(e)}class hJe{constructor(){Nr(this,"_map"),Nr(this,"_container"),Nr(this,"_terrainButton"),NZe(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=qd("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=qd("button","maplibregl-ctrl-terrain",this._container),qd("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){oB(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class fJe extends ZZe{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),Nr(this,"_rotateCompassArrow",()=>{const n=this._map.getBearing(),r=this._map.getPitch(),i=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(r*(Math.PI/180))**.5)}) rotateX(${Math.min(70,r)}deg) rotateZ(${-n}deg)`:`rotate(${-n}deg)`;this._compassIcon.style.transform=i}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const r=super._createButton(t,n);return r.clickFunction=n,r}}const v7=vr.Marker,m7=vr.LngLat,pJe=vr.LngLatBounds;class vJe extends YZe{constructor(){super(...arguments),Nr(this,"lastUpdatedCenter",new m7(0,0)),Nr(this,"_updateCamera",t=>{var n;const r=new m7(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,a={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},o=this._map.getZoom();o>(((n=this.options.fitBoundsOptions)==null?void 0:n.maxZoom)??30)&&(a.zoom=o),this._map.fitBounds(pJe.fromLngLat(r,i),a,{geolocateSource:!0});let s=!1;const l=()=>{s=!0};this._map.once("click",l),this._map.once("dblclick",l),this._map.once("dragstart",l),this._map.once("mousedown",l),this._map.once("touchstart",l),this._map.once("wheel",l),this._map.once("moveend",()=>{this._map.off("click",l),this._map.off("dblclick",l),this._map.off("dragstart",l),this._map.off("mousedown",l),this._map.off("touchstart",l),this._map.off("wheel",l),!s&&(this.lastUpdatedCenter=this._map.getCenter())})}),Nr(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=qd("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new v7({element:this._dotElement}),this._circleElement=qd("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new v7({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const r=n.originalEvent&&n.originalEvent.type==="resize",i=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!r&&i>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),Nr(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),r=this._map.unproject([n.x,n.y]),i=this._map.unproject([n.x+20,n.y]),a=r.distanceTo(i)/20,o=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var cl,Ic,dv,hv,Rl,tT,us,vre,Bl,mre;class wL{constructor(t,n){sv(this,us),sv(this,cl),Nr(this,"map"),sv(this,Ic),sv(this,dv),sv(this,hv),sv(this,Rl,!1),sv(this,tT),t.style!==void 0&&iy(this,Rl,!0),iy(this,cl,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(fi(this,cl).minZoom=t.lockZoom,fi(this,cl).maxZoom=t.lockZoom)}setStyle(t,n){fi(this,Rl)||this.map.setStyle(t,n),ul(this,us,Bl).call(this)}addLayer(t,n){return fi(this,Rl)||this.map.addLayer(t,n),ul(this,us,Bl).call(this),this.map}moveLayer(t,n){return fi(this,Rl)||this.map.moveLayer(t,n),ul(this,us,Bl).call(this),this.map}removeLayer(t){return fi(this,Rl)||this.map.removeLayer(t),ul(this,us,Bl).call(this),this}setLayerZoomRange(t,n,r){return fi(this,Rl)||this.map.setLayerZoomRange(t,n,r),ul(this,us,Bl).call(this),this}setFilter(t,n,r){return fi(this,Rl)||this.map.setFilter(t,n,r),ul(this,us,Bl).call(this),this}setPaintProperty(t,n,r,i){return fi(this,Rl)||this.map.setPaintProperty(t,n,r,i),ul(this,us,Bl).call(this),this}setLayoutProperty(t,n,r,i){return fi(this,Rl)||this.map.setLayoutProperty(t,n,r,i),ul(this,us,Bl).call(this),this}setGlyphs(t,n){return fi(this,Rl)||this.map.setGlyphs(t,n),ul(this,us,Bl).call(this),this}onAdd(t){iy(this,Ic,t),iy(this,dv,qd("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,r]of Object.entries(fi(this,cl).containerStyle))fi(this,dv).style.setProperty(n,r);return fi(this,cl).container=fi(this,dv),fi(this,cl).zoom=t.getZoom()+fi(this,cl).zoomAdjust,this.map=new Ww(fi(this,cl)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{ul(this,us,vre).call(this,fi(this,cl).parentRect),iy(this,tT,ul(this,us,mre).call(this))}),fi(this,dv)}onRemove(){var t;(t=fi(this,tT))==null||t.call(this),oB(fi(this,dv))}}cl=new WeakMap,Ic=new WeakMap,dv=new WeakMap,hv=new WeakMap,Rl=new WeakMap,tT=new WeakMap,us=new WeakSet,vre=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(iy(this,hv,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:fi(this,hv)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),ul(this,us,Bl).call(this))},Bl=function(){if(fi(this,hv)===void 0)return;const{devicePixelRatio:e}=window,t=fi(this,Ic).getCanvas(),n=t.width/e,r=t.height/e,i=fi(this,Ic).unproject.bind(fi(this,Ic)),a=i([0,0]),o=i([n,0]),s=i([0,r]),l=i([n,r]);fi(this,hv).geometry.coordinates=[[s.toArray(),l.toArray(),o.toArray(),a.toArray(),s.toArray()]];const c=this.map.getSource("parentRect");c!==void 0&&c.setData(fi(this,hv))},mre=function(){const{pitchAdjust:e}=fi(this,cl),t=()=>{a("parent")},n=()=>{a("minimap")},r=()=>{fi(this,Ic).on("move",t),this.map.on("move",n)},i=()=>{fi(this,Ic).off("move",t),this.map.off("move",n)},a=o=>{i();const s=o==="parent"?fi(this,Ic):this.map,l=o==="parent"?this.map:fi(this,Ic),c=s.getCenter(),h=s.getZoom()+fi(this,cl).zoomAdjust*(o==="parent"?1:-1),f=s.getBearing(),p=s.getPitch();l.jumpTo({center:c,zoom:h,bearing:f,pitch:e?p:0}),ul(this,us,Bl).call(this),r()};return r(),()=>{i()}};class mJe{constructor(){Nr(this,"map"),Nr(this,"container"),Nr(this,"projectionButton")}onAdd(t){return this.map=t,this.container=qd("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=qd("button","maplibregl-ctrl-projection",this.container),qd("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),t.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){oB(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){this.map.getProjection()===void 0&&this.map.setProjection({type:"mercator"}),this.map.isGlobeProjection()?this.map.enableMercatorProjection():this.map.enableGlobeProjection(),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}const gJe="@maptiler/sdk",yJe="3.2.0",_Je="The Javascript & TypeScript map SDK tailored for MapTiler Cloud",bJe="MapTiler",wJe="dist/maptiler-sdk.mjs",xJe="dist/maptiler-sdk.d.ts",SJe="dist/maptiler-sdk.css",CJe="module",TJe={".":{import:"./dist/maptiler-sdk.mjs",types:"./dist/maptiler-sdk.d.ts"},"./dist/maptiler-sdk.css":{import:"./dist/maptiler-sdk.css"},"./style.css":{import:"./dist/maptiler-sdk.css"}},MJe=["maptiler","map","sdk","webmap","cloud","webGL","maplibre"],kJe="https://docs.maptiler.com/sdk-js/",EJe="BSD-3-Clause",AJe={type:"git",url:"https://github.com/maptiler/maptiler-sdk-js.git"},PJe={prepare:"husky",doc:"rm -rf docs/* && typedoc --out docs && cp -r images docs/",ncu:"npx npm-check-updates",lint:"eslint src","lint:fix":"eslint src --fix","test:watch":"vitest watch -c vite.config-test.ts --dom",test:"vitest run -c vite.config-test.ts --dom","install:clean":"rm -rf build/ dist/ node_modules/ && npm ci",dev:'concurrently "vite -c vite.config-dev.ts" "npm run dev-umd"',"dev-umd":"npm run build-css && tsc && NODE_ENV=development vite build -w -c vite.config-umd.ts","build-css":"mkdir -p dist build && node scripts/replace-path-with-content.js src/style/style_template.css dist/tmp_maptiler-sdk.css && cat node_modules/maplibre-gl/dist/maplibre-gl.css dist/tmp_maptiler-sdk.css > dist/maptiler-sdk.css && rm dist/tmp_maptiler-sdk.css && cp dist/maptiler-sdk.css build/maptiler-sdk.css","build-umd":"tsc && NODE_ENV=production vite build -c vite.config-umd.ts","build-es":"tsc && NODE_ENV=production vite build -c vite.config-es.ts",build:"npm run build-es; npm run build-umd; npm run build-css",make:"npm run install:clean && npm run build"},IJe={"@canvas/image-data":"^1.0.0","@eslint/js":"^9.21.0","@types/uuid":"^10.0.0","@types/xmldom":"^0.1.31","@vitest/web-worker":"^3.0.9","@xmldom/xmldom":"^0.8.10",concurrently:"^9.1.2",eslint:"^9.21.0","eslint-config-prettier":"^10.0.2","eslint-plugin-prettier":"^5.2.3","happy-dom":"^17.4.4",husky:"^8.0.0","lint-staged":"^15.4.3",prettier:"3.5.2",typedoc:"^0.27.6",typescript:"^5.7.3","typescript-eslint":"^8.25.0",vite:"^6.0.7","vite-plugin-dts":"^4.5.0",vitest:"^3.0.9"},LJe={"@maplibre/maplibre-gl-style-spec":"^23.0.0","@maptiler/client":"^2.3.2",events:"^3.3.0","js-base64":"^3.7.7","maplibre-gl":"^5.3.1",uuid:"^11.0.5"},DJe={name:gJe,version:yJe,description:_Je,author:bJe,module:wJe,types:xJe,style:SJe,type:CJe,exports:TJe,keywords:MJe,homepage:kJe,license:EJe,repository:AJe,scripts:PJe,"lint-staged":{"*.ts":"npm run lint:fix"},devDependencies:IJe,dependencies:LJe};class RJe{constructor(t,n=2e3){Nr(this,"map"),Nr(this,"registeredModules",new Set),this.map=t,setTimeout(async()=>{if(!Oa.telemetry)return;const r=this.preparePayload();try{(await fetch(r,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(i){console.warn("The metrics could not be sent to MapTiler Cloud",i)}},Math.max(1e3,n))}registerModule(t,n){this.registeredModules.add(`${t}:${n}`)}preparePayload(){const t=new URL(ps.telemetryURL);return t.searchParams.append("sdk",DJe.version),t.searchParams.append("key",Oa.apiKey),t.searchParams.append("mtsid",F4),t.searchParams.append("session",Oa.session?"1":"0"),t.searchParams.append("caching",Oa.caching?"1":"0"),t.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),t.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),t.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),this.registeredModules.size>0&&t.searchParams.append("modules",Array.from(this.registeredModules).join("|")),t.href}}const OJe={POINT:"POINT",COUNTRY:"COUNTRY"};class Ww extends vr.Map{constructor(t){VZe(t.container),t.apiKey&&(Oa.apiKey=t.apiKey);const{style:n,requiresUrlMonitoring:r,isFallback:i}=p7(t.style);i&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),Oa.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const a=location.hash;let o={compact:!1};t.customAttribution?o.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(o={...o,...t.attributionControl});const s={...t,style:n,maplibreLogo:!1,transformRequest:W9(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:o};delete s.style,super(s),Nr(this,"options"),Nr(this,"telemetry"),Nr(this,"isTerrainEnabled",!1),Nr(this,"terrainExaggeration",1),Nr(this,"primaryLanguage"),Nr(this,"terrainGrowing",!1),Nr(this,"terrainFlattening",!1),Nr(this,"minimap"),Nr(this,"forceLanguageUpdate"),Nr(this,"languageAlwaysBeenStyle"),Nr(this,"isReady",!1),Nr(this,"terrainAnimationDuration",1e3),Nr(this,"monitoredStyleUrls"),Nr(this,"styleInProcess",!1),Nr(this,"curentProjection"),Nr(this,"originalLabelStyle",new window.Map),Nr(this,"isStyleLocalized",!1),Nr(this,"languageIsUpdated",!1),this.options=t,this.setStyle(n),r&&this.monitorStyleUrl(n);const l=()=>{let v="The distant style could not be loaded.";this.getStyle()?v+="Leaving the style as is.":(this.setStyle(j1.STREETS),v+=`Loading default MapTiler Cloud style "${j1.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(v)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",v=>{if(v.error instanceof vr.AJAXError){const _=v.error.url,b=new URL(_);b.search="";const C=b.href;this.monitoredStyleUrls&&this.monitoredStyleUrls.has(C)&&(this.monitoredStyleUrls.delete(C),l());return}if(this.styleInProcess){l();return}}),Oa.caching&&!PO&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Oa.caching&&PO&&BZe(),typeof t.language>"u")this.primaryLanguage=Oa.primaryLanguage;else{const v=L9(t.language,gi);this.primaryLanguage=v??Oa.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===gi.STYLE||this.primaryLanguage===gi.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===gi.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.curentProjection=t.projection,this.on("styledata",()=>{this.curentProjection==="mercator"?this.setProjection({type:"mercator"}):this.curentProjection==="globe"&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&a)return;try{if(t.geolocate===OJe.COUNTRY){await this.fitToIpBounds();return}}catch(_){console.warn(_.message)}let v;try{await this.centerOnIpPoint(t.zoom),v=this.getCameraHash()}catch(_){console.warn(_.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(_=>{v===this.getCameraHash()&&(this.terrain?this.easeTo({center:[_.coords.longitude,_.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[_.coords.longitude,_.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let v={logo:null};try{const _=Object.keys(this.style.sourceCaches).map(C=>this.getSource(C)).filter(C=>C&&"url"in C&&typeof C.url=="string"&&C.url.includes("tiles.json")),b=new URL(_[0].url);b.searchParams.has("key")||b.searchParams.append("key",Oa.apiKey),v=await(await fetch(b.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in v&&v.logo){const _=v.logo;this.addControl(new K9({logoURL:_}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new K9,t.logoPosition);if(t.scaleControl){const _=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,b=new JZe({unit:Oa.unit});this.addControl(b,_),Oa.on("unit",C=>{b.setUnit(C)})}if(t.navigationControl!==!1){const _=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new fJe,_)}if(t.geolocateControl!==!1){const _=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new vJe({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),_)}if(t.terrainControl){const _=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new hJe,_)}if(t.projectionControl){const _=t.projectionControl===!0||t.projectionControl===void 0?"top-right":t.projectionControl;this.addControl(new mJe,_)}if(t.fullscreenControl){const _=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new QZe({}),_)}this.isReady=!0,this.fire("ready",{target:this})});let c=!1,h=!1,f;this.once("ready",()=>{c=!0,h&&this.fire("loadWithTerrain",f)}),this.once("style.load",()=>{const{minimap:v}=t;if(typeof v=="object"){const{zoom:_,center:b,style:C,language:T,apiKey:E,maptilerLogo:A,canvasContextAttributes:I,refreshExpiredTiles:O,maxBounds:B,scrollZoom:N,minZoom:H,maxZoom:j,boxZoom:W,locale:U,fadeDuration:Y,crossSourceCollisions:ie,clickTolerance:ue,bounds:J,fitBoundsOptions:q,pixelRatio:ce,validateStyle:re}=t;this.minimap=new wL(v,{zoom:_,center:b,style:C,language:T,apiKey:E,container:"null",maptilerLogo:A,canvasContextAttributes:I,refreshExpiredTiles:O,maxBounds:B,scrollZoom:N,minZoom:H,maxZoom:j,boxZoom:W,locale:U,fadeDuration:Y,crossSourceCollisions:ie,clickTolerance:ue,bounds:J,fitBoundsOptions:q,pixelRatio:ce,validateStyle:re}),this.addControl(this.minimap,v.position??"bottom-left")}else v===!0?(this.minimap=new wL({},t),this.addControl(this.minimap,"bottom-left")):v!==void 0&&v!==!1&&(this.minimap=new wL({},t),this.addControl(this.minimap,v))});const p=v=>{v.terrain&&(h=!0,f={type:"loadWithTerrain",target:this,terrain:v.terrain},this.off("terrain",p),c&&this.fire("loadWithTerrain",f))};this.on("terrain",p),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",v=>{if(this._removed===!0){console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.");return}console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",v)})}),this.telemetry=new RJe(this)}recreate(){const t={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new Ww({...this.options})),this.once("load",()=>{this.jumpTo(t)})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded()){t(this);return}this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady){t(this);return}this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain){t(this);return}this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(t);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(t,n){var r;this.originalLabelStyle.clear(),(r=this.minimap)==null||r.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const i=p7(t);if(i.requiresUrlMonitoring&&this.monitorStyleUrl(i.style),i.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(i.style,n),this}addLayer(t,n){var r;return(r=this.minimap)==null||r.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var r;return(r=this.minimap)==null||r.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,r){var i;return(i=this.minimap)==null||i.setLayerZoomRange(t,n,r),super.setLayerZoomRange(t,n,r)}setFilter(t,n,r){var i;return(i=this.minimap)==null||i.setFilter(t,n,r),super.setFilter(t,n,r)}setPaintProperty(t,n,r,i){var a;return(a=this.minimap)==null||a.setPaintProperty(t,n,r,i),super.setPaintProperty(t,n,r,i)}setLayoutProperty(t,n,r,i){var a;return(a=this.minimap)==null||a.setLayoutProperty(t,n,r,i),super.setLayoutProperty(t,n,r,i)}setGlyphs(t,n){var r;return(r=this.minimap)==null||r.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style||!this.style.stylesheet||!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?TO(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n;(n=this.minimap)==null||n.map.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),r=L9(t,gi);if(!r){console.warn(`The language "${r}" is not supported.`);return}if(!(r.flag===gi.STYLE.flag&&n&&(n.flag===gi.AUTO.flag||n.flag===gi.VISITOR.flag))&&(r.flag!==gi.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===r&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===gi.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=r;let i=r;if(r.flag===gi.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}i=n}let a=gi.LOCAL.flag,o=["get",a];i.flag===gi.VISITOR.flag?(a=H9().flag,o=["case",["all",["has",a],["has",gi.LOCAL.flag]],["case",["==",["get",a],["get",gi.LOCAL.flag]],["get",gi.LOCAL.flag],["format",["get",a],{"font-scale":.8},`
`,["get",gi.LOCAL.flag],{"font-scale":1.1}]],["get",gi.LOCAL.flag]]):i.flag===gi.VISITOR_ENGLISH.flag?(a=gi.ENGLISH.flag,o=["case",["all",["has",a],["has",gi.LOCAL.flag]],["case",["==",["get",a],["get",gi.LOCAL.flag]],["get",gi.LOCAL.flag],["format",["get",a],{"font-scale":.8},`
`,["get",gi.LOCAL.flag],{"font-scale":1.1}]],["get",gi.LOCAL.flag]]):i.flag===gi.AUTO.flag?(a=H9().flag,o=["coalesce",["get",a],["get",gi.LOCAL.flag]]):i===gi.LOCAL?(a=gi.LOCAL.flag,o=["get",a]):(a=i.flag,o=["coalesce",["get",a],["get",gi.LOCAL.flag]]);const{layers:s}=this.getStyle(),l=this.originalLabelStyle.size===0;if(l){const c=qZe(s,this);this.isStyleLocalized=Object.keys(c.localized).length>0}for(const c of s){if(c.type!=="symbol")continue;const h=c,f=this.getSource(h.source);if(!f||!("url"in f&&typeof f.url=="string")||new URL(f.url).host!==ps.maptilerApiHost)continue;const{id:p,layout:v}=h;if(!v||!("text-field"in v))continue;let _;if(l?(_=this.getLayoutProperty(p,"text-field"),this.originalLabelStyle.set(p,_)):_=this.originalLabelStyle.get(p),typeof _=="string"){const{contains:b,exactMatch:C}=jZe(_,this.isStyleLocalized);if(!b)continue;if(C)this.setLayoutProperty(p,"text-field",o);else{const T=UZe(_,o,this.isStyleLocalized);this.setLayoutProperty(p,"text-field",T)}}else{const b=HZe(_,o,this.isStyleLocalized);this.setLayoutProperty(p,"text-field",b)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const n=performance.now(),r=this.terrain.exaggeration,i=t-r,a=()=>{if(!this.terrain||this.terrainFlattening)return;const o=(performance.now()-n)/this.terrainAnimationDuration;if(o<.99){const s=1-(1-o)**4,l=r+s*i;this.terrain.exaggeration=l,requestAnimationFrame(a)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(a)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=i=>{!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!=="maptiler-terrain"||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(ps.terrainSourceId,{type:"raster-dem",url:ps.terrainSourceURL}),this.setTerrain({source:ps.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(ps.terrainSourceId)||r()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),n=this.terrain.exaggeration,r=()=>{if(!this.terrain||this.terrainGrowing)return;const i=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,i<.99){const a=(1-i)**4,o=n*a;this.terrain.exaggeration=o,requestAnimationFrame(r)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(ps.terrainSourceId)&&this.removeSource(ps.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(r)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await R9.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await R9.info();this.jumpTo({center:[n.longitude??0,n.latitude??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),EZe.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Oa}getMaptilerSessionId(){return F4}setTransformRequest(t){return super.setTransformRequest(W9(t)),this}isGlobeProjection(){const t=this.getProjection();return t?t.type==="globe":!1}enableGlobeProjection(){this.isGlobeProjection()!==!0&&(this.setProjection({type:"globe"}),this.curentProjection="globe")}enableMercatorProjection(){this.isGlobeProjection()!==!1&&(this.setProjection({type:"mercator"}),this.curentProjection="mercator")}isLanguageUpdated(){return this.languageIsUpdated}}function hC(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function zJe(e){return`#${hC(e[0])}${hC(e[1])}${hC(e[2])}${e.length===4?hC(e[3]):""}`}class yr extends Array{constructor(t={}){super(),Nr(this,"min",0),Nr(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new yr({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const r=n.clone?this.clone():this;r.length=0;let i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let o=0;o<t.length;o+=1)i=Math.min(i,t[o].value),a=Math.max(a,t[o].value),r.push({value:t[o].value,color:t[o].color.slice()});return r.sort((o,s)=>o.value<s.value?-1:1),this.min=i,this.max=a,r}scale(t,n,r={clone:!0}){const i=r.clone,a=this[0].value,o=this.at(-1).value-a,s=n-t,l=[];for(let c=0;c<this.length;c+=1){const h=(this[c].value-a)/o*s+t;i?l.push({value:h,color:this[c].color.slice()}):this[c].value=h}return i?new yr({stops:l}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new yr({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let r=0;r<~~(n.length/2);r+=1){const i=n[r].color;n[r].color=n.at(-(r+1)).color,n.at(-(r+1)).color=i}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(t>this[r+1].value)continue;const i=this[r].color;if(!n.smooth)return i.slice();const a=this[r].value,o=this[r+1].value,s=this[r+1].color,l=(o-t)/(o-a);return i.map((c,h)=>Math.round(c*l+s[h]*(1-l)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return zJe(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const r=this.getBounds();return this.getColor(r.min+t*(r.max-r.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const r=n.getContext("2d");if(!r)throw new Error("Canvs context is missing");const i=r.getImageData(0,0,n.width,n.height),a=i.data,o=t.size,s=this[0].value,l=(this.at(-1).value-s)/o;for(let c=0;c<o;c+=1){const h=this.getColor(s+c*l,{smooth:t.smooth});a[c*4]=h[0],a[c*4+1]=h[1],a[c*4+2]=h[2],a[c*4+3]=h.length>3?h[3]:255}return r.putImageData(i,0,0),n}resample(t,n=15){const r=this.getBounds(),i=this.scale(0,1),a=1/(n-1);let o;if(t==="ease-in-square")o=Array.from({length:n},(s,l)=>{const c=l*a,h=c**2,f=i.getColor(h);return{value:c,color:f}});else if(t==="ease-out-square")o=Array.from({length:n},(s,l)=>{const c=l*a,h=1-(1-c)**2,f=i.getColor(h);return{value:c,color:f}});else if(t==="ease-out-sqrt")o=Array.from({length:n},(s,l)=>{const c=l*a,h=c**.5,f=i.getColor(h);return{value:c,color:f}});else if(t==="ease-in-sqrt")o=Array.from({length:n},(s,l)=>{const c=l*a,h=1-(1-c)**.5,f=i.getColor(h);return{value:c,color:f}});else if(t==="ease-out-exp")o=Array.from({length:n},(s,l)=>{const c=l*a,h=1-2**(-10*c),f=i.getColor(h);return{value:c,color:f}});else if(t==="ease-in-exp")o=Array.from({length:n},(s,l)=>{const c=l*a,h=2**(10*c-10),f=i.getColor(h);return{value:c,color:f}});else throw new Error("Invalid ressampling method.");return new yr({stops:o}).scale(r.min,r.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new yr({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new yr({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new yr({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new yr({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new yr({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new yr({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new yr({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new yr({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new yr({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new yr({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new yr({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new yr({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new yr({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new yr({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new yr({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new yr({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new yr({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new yr({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new yr({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new yr({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new yr({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new yr({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new yr({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new yr({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new yr({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new yr({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new yr({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new yr({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new yr({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new yr({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new yr({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new yr({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new yr({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new yr({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new yr({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new yr({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new yr({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new yr({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new yr({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new yr({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new yr({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new yr({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new yr({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});FZe();vr.Map;vr.Marker;vr.Popup;vr.Style;vr.CanvasSource;vr.GeoJSONSource;vr.ImageSource;vr.RasterTileSource;vr.RasterDEMTileSource;vr.VectorTileSource;vr.VideoSource;vr.NavigationControl;vr.GeolocateControl;vr.AttributionControl;vr.LogoControl;vr.ScaleControl;vr.FullscreenControl;vr.TerrainControl;vr.BoxZoomHandler;vr.ScrollZoomHandler;vr.CooperativeGesturesHandler;vr.KeyboardHandler;vr.TwoFingersTouchPitchHandler;vr.MapWheelEvent;vr.MapTouchEvent;vr.MapMouseEvent;vr.config;vr.getVersion;function gre(e,t){return function(){return e.apply(t,arguments)}}const{toString:BJe}=Object.prototype,{getPrototypeOf:sB}=Object,{iterator:mE,toStringTag:yre}=Symbol,gE=(e=>t=>{const n=BJe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),cc=e=>(e=e.toLowerCase(),t=>gE(t)===e),yE=e=>t=>typeof t===e,{isArray:K0}=Array,Gw=yE("undefined");function FJe(e){return e!==null&&!Gw(e)&&e.constructor!==null&&!Gw(e.constructor)&&Us(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _re=cc("ArrayBuffer");function NJe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_re(e.buffer),t}const $Je=yE("string"),Us=yE("function"),bre=yE("number"),_E=e=>e!==null&&typeof e=="object",VJe=e=>e===!0||e===!1,nT=e=>{if(gE(e)!=="object")return!1;const t=sB(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yre in e)&&!(mE in e)},HJe=cc("Date"),jJe=cc("File"),UJe=cc("Blob"),WJe=cc("FileList"),GJe=e=>_E(e)&&Us(e.pipe),KJe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Us(e.append)&&((t=gE(e))==="formdata"||t==="object"&&Us(e.toString)&&e.toString()==="[object FormData]"))},qJe=cc("URLSearchParams"),[ZJe,YJe,XJe,JJe]=["ReadableStream","Request","Response","Headers"].map(cc),QJe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),K0(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function wre(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Av=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xre=e=>!Gw(e)&&e!==Av;function FO(){const{caseless:e}=xre(this)&&this||{},t={},n=(r,i)=>{const a=e&&wre(t,i)||i;nT(t[a])&&nT(r)?t[a]=FO(t[a],r):nT(r)?t[a]=FO({},r):K0(r)?t[a]=r.slice():t[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Lx(arguments[r],n);return t}const eQe=(e,t,n,{allOwnKeys:r}={})=>(Lx(t,(i,a)=>{n&&Us(i)?e[a]=gre(i,n):e[a]=i},{allOwnKeys:r}),e),tQe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nQe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},rQe=(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=n!==!1&&sB(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},iQe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},aQe=e=>{if(!e)return null;if(K0(e))return e;let t=e.length;if(!bre(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},oQe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&sB(Uint8Array)),sQe=(e,t)=>{const r=(e&&e[mE]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},lQe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},uQe=cc("HTMLFormElement"),cQe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),g7=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),dQe=cc("RegExp"),Sre=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Lx(n,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(r[a]=o||i)}),Object.defineProperties(e,r)},hQe=e=>{Sre(e,(t,n)=>{if(Us(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Us(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},fQe=(e,t)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return K0(e)?r(e):r(String(e).split(t)),n},pQe=()=>{},vQe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function mQe(e){return!!(e&&Us(e.append)&&e[yre]==="FormData"&&e[mE])}const gQe=e=>{const t=new Array(10),n=(r,i)=>{if(_E(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const a=K0(r)?[]:{};return Lx(r,(o,s)=>{const l=n(o,i+1);!Gw(l)&&(a[s]=l)}),t[i]=void 0,a}}return r};return n(e,0)},yQe=cc("AsyncFunction"),_Qe=e=>e&&(_E(e)||Us(e))&&Us(e.then)&&Us(e.catch),Cre=((e,t)=>e?setImmediate:t?((n,r)=>(Av.addEventListener("message",({source:i,data:a})=>{i===Av&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Av.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Us(Av.postMessage)),bQe=typeof queueMicrotask<"u"?queueMicrotask.bind(Av):typeof process<"u"&&process.nextTick||Cre,wQe=e=>e!=null&&Us(e[mE]),on={isArray:K0,isArrayBuffer:_re,isBuffer:FJe,isFormData:KJe,isArrayBufferView:NJe,isString:$Je,isNumber:bre,isBoolean:VJe,isObject:_E,isPlainObject:nT,isReadableStream:ZJe,isRequest:YJe,isResponse:XJe,isHeaders:JJe,isUndefined:Gw,isDate:HJe,isFile:jJe,isBlob:UJe,isRegExp:dQe,isFunction:Us,isStream:GJe,isURLSearchParams:qJe,isTypedArray:oQe,isFileList:WJe,forEach:Lx,merge:FO,extend:eQe,trim:QJe,stripBOM:tQe,inherits:nQe,toFlatObject:rQe,kindOf:gE,kindOfTest:cc,endsWith:iQe,toArray:aQe,forEachEntry:sQe,matchAll:lQe,isHTMLForm:uQe,hasOwnProperty:g7,hasOwnProp:g7,reduceDescriptors:Sre,freezeMethods:hQe,toObjectSet:fQe,toCamelCase:cQe,noop:pQe,toFiniteNumber:vQe,findKey:wre,global:Av,isContextDefined:xre,isSpecCompliantForm:mQe,toJSONObject:gQe,isAsyncFn:yQe,isThenable:_Qe,setImmediate:Cre,asap:bQe,isIterable:wQe};function jr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}on.inherits(jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:on.toJSONObject(this.config),code:this.code,status:this.status}}});const Tre=jr.prototype,Mre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Mre[e]={value:e}});Object.defineProperties(jr,Mre);Object.defineProperty(Tre,"isAxiosError",{value:!0});jr.from=(e,t,n,r,i,a)=>{const o=Object.create(Tre);return on.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),jr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const xQe=null;function NO(e){return on.isPlainObject(e)||on.isArray(e)}function kre(e){return on.endsWith(e,"[]")?e.slice(0,-2):e}function y7(e,t,n){return e?e.concat(t).map(function(i,a){return i=kre(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function SQe(e){return on.isArray(e)&&!e.some(NO)}const CQe=on.toFlatObject(on,{},null,function(t){return/^is[A-Z]/.test(t)});function bE(e,t,n){if(!on.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=on.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,C){return!on.isUndefined(C[b])});const r=n.metaTokens,i=n.visitor||h,a=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&on.isSpecCompliantForm(t);if(!on.isFunction(i))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(on.isDate(_))return _.toISOString();if(!l&&on.isBlob(_))throw new jr("Blob is not supported. Use a Buffer instead.");return on.isArrayBuffer(_)||on.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,b,C){let T=_;if(_&&!C&&typeof _=="object"){if(on.endsWith(b,"{}"))b=r?b:b.slice(0,-2),_=JSON.stringify(_);else if(on.isArray(_)&&SQe(_)||(on.isFileList(_)||on.endsWith(b,"[]"))&&(T=on.toArray(_)))return b=kre(b),T.forEach(function(A,I){!(on.isUndefined(A)||A===null)&&t.append(o===!0?y7([b],I,a):o===null?b:b+"[]",c(A))}),!1}return NO(_)?!0:(t.append(y7(C,b,a),c(_)),!1)}const f=[],p=Object.assign(CQe,{defaultVisitor:h,convertValue:c,isVisitable:NO});function v(_,b){if(!on.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(_),on.forEach(_,function(T,E){(!(on.isUndefined(T)||T===null)&&i.call(t,T,on.isString(E)?E.trim():E,b,p))===!0&&v(T,b?b.concat(E):[E])}),f.pop()}}if(!on.isObject(e))throw new TypeError("data must be an object");return v(e),t}function _7(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lB(e,t){this._pairs=[],e&&bE(e,this,t)}const Ere=lB.prototype;Ere.append=function(t,n){this._pairs.push([t,n])};Ere.toString=function(t){const n=t?function(r){return t.call(this,r,_7)}:_7;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function TQe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Are(e,t,n){if(!t)return e;const r=n&&n.encode||TQe;on.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(t,n):a=on.isURLSearchParams(t)?t.toString():new lB(t,n).toString(r),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class b7{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){on.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Pre={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MQe=typeof URLSearchParams<"u"?URLSearchParams:lB,kQe=typeof FormData<"u"?FormData:null,EQe=typeof Blob<"u"?Blob:null,AQe={isBrowser:!0,classes:{URLSearchParams:MQe,FormData:kQe,Blob:EQe},protocols:["http","https","file","blob","url","data"]},uB=typeof window<"u"&&typeof document<"u",$O=typeof navigator=="object"&&navigator||void 0,PQe=uB&&(!$O||["ReactNative","NativeScript","NS"].indexOf($O.product)<0),IQe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LQe=uB&&window.location.href||"http://localhost",DQe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:uB,hasStandardBrowserEnv:PQe,hasStandardBrowserWebWorkerEnv:IQe,navigator:$O,origin:LQe},Symbol.toStringTag,{value:"Module"})),Ko={...DQe,...AQe};function RQe(e,t){return bE(e,new Ko.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return Ko.isNode&&on.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function OQe(e){return on.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function zQe(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function Ire(e){function t(n,r,i,a){let o=n[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=n.length;return o=!o&&on.isArray(i)?i.length:o,l?(on.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):((!i[o]||!on.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],a)&&on.isArray(i[o])&&(i[o]=zQe(i[o])),!s)}if(on.isFormData(e)&&on.isFunction(e.entries)){const n={};return on.forEachEntry(e,(r,i)=>{t(OQe(r),i,n,0)}),n}return null}function BQe(e,t,n){if(on.isString(e))try{return(t||JSON.parse)(e),on.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Dx={transitional:Pre,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=on.isObject(t);if(a&&on.isHTMLForm(t)&&(t=new FormData(t)),on.isFormData(t))return i?JSON.stringify(Ire(t)):t;if(on.isArrayBuffer(t)||on.isBuffer(t)||on.isStream(t)||on.isFile(t)||on.isBlob(t)||on.isReadableStream(t))return t;if(on.isArrayBufferView(t))return t.buffer;if(on.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return RQe(t,this.formSerializer).toString();if((s=on.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return bE(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),BQe(t)):t}],transformResponse:[function(t){const n=this.transitional||Dx.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(on.isResponse(t)||on.isReadableStream(t))return t;if(t&&on.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?jr.from(s,jr.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ko.classes.FormData,Blob:Ko.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};on.forEach(["delete","get","head","post","put","patch"],e=>{Dx.headers[e]={}});const FQe=on.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NQe=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&FQe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},w7=Symbol("internals");function qb(e){return e&&String(e).trim().toLowerCase()}function rT(e){return e===!1||e==null?e:on.isArray(e)?e.map(rT):String(e)}function $Qe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const VQe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xL(e,t,n,r,i){if(on.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!on.isString(t)){if(on.isString(r))return t.indexOf(r)!==-1;if(on.isRegExp(r))return r.test(t)}}function HQe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function jQe(e,t){const n=on.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,a,o){return this[r].call(this,t,i,a,o)},configurable:!0})})}class Ws{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function a(s,l,c){const h=qb(l);if(!h)throw new Error("header name must be a non-empty string");const f=on.findKey(i,h);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=rT(s))}const o=(s,l)=>on.forEach(s,(c,h)=>a(c,h,l));if(on.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(on.isString(t)&&(t=t.trim())&&!VQe(t))o(NQe(t),n);else if(on.isObject(t)&&on.isIterable(t)){let s={},l,c;for(const h of t){if(!on.isArray(h))throw TypeError("Object iterator must return a key-value pair");s[c=h[0]]=(l=s[c])?on.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(s,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=qb(t),t){const r=on.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return $Qe(i);if(on.isFunction(n))return n.call(this,i,r);if(on.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=qb(t),t){const r=on.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||xL(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function a(o){if(o=qb(o),o){const s=on.findKey(r,o);s&&(!n||xL(r,r[s],s,n))&&(delete r[s],i=!0)}}return on.isArray(t)?t.forEach(a):a(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!t||xL(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const n=this,r={};return on.forEach(this,(i,a)=>{const o=on.findKey(r,a);if(o){n[o]=rT(i),delete n[a];return}const s=t?HQe(a):String(a).trim();s!==a&&delete n[a],n[s]=rT(i),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return on.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&on.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[w7]=this[w7]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=qb(o);r[s]||(jQe(i,o),r[s]=!0)}return on.isArray(t)?t.forEach(a):a(t),this}}Ws.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);on.reduceDescriptors(Ws.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});on.freezeMethods(Ws);function SL(e,t){const n=this||Dx,r=t||n,i=Ws.from(r.headers);let a=r.data;return on.forEach(e,function(s){a=s.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Lre(e){return!!(e&&e.__CANCEL__)}function q0(e,t,n){jr.call(this,e??"canceled",jr.ERR_CANCELED,t,n),this.name="CanceledError"}on.inherits(q0,jr,{__CANCEL__:!0});function Dre(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new jr("Request failed with status code "+n.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function UQe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function WQe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=r[a];o||(o=c),n[i]=l,r[i]=c;let f=a,p=0;for(;f!==i;)p+=n[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const v=h&&c-h;return v?Math.round(p*1e3/v):void 0}}function GQe(e,t){let n=0,r=1e3/t,i,a;const o=(c,h=Date.now())=>{n=h,i=null,a&&(clearTimeout(a),a=null),e.apply(null,c)};return[(...c)=>{const h=Date.now(),f=h-n;f>=r?o(c,h):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},r-f)))},()=>i&&o(i)]}const EM=(e,t,n=3)=>{let r=0;const i=WQe(50,250);return GQe(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-r,c=i(l),h=o<=s;r=o;const f={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&h?(s-o)/c:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(f)},n)},x7=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},S7=e=>(...t)=>on.asap(()=>e(...t)),KQe=Ko.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ko.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ko.origin),Ko.navigator&&/(msie|trident)/i.test(Ko.navigator.userAgent)):()=>!0,qQe=Ko.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const o=[e+"="+encodeURIComponent(t)];on.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),on.isString(r)&&o.push("path="+r),on.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ZQe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function YQe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Rre(e,t,n){let r=!ZQe(t);return e&&(r||n==!1)?YQe(e,t):t}const C7=e=>e instanceof Ws?{...e}:e;function mm(e,t){t=t||{};const n={};function r(c,h,f,p){return on.isPlainObject(c)&&on.isPlainObject(h)?on.merge.call({caseless:p},c,h):on.isPlainObject(h)?on.merge({},h):on.isArray(h)?h.slice():h}function i(c,h,f,p){if(on.isUndefined(h)){if(!on.isUndefined(c))return r(void 0,c,f,p)}else return r(c,h,f,p)}function a(c,h){if(!on.isUndefined(h))return r(void 0,h)}function o(c,h){if(on.isUndefined(h)){if(!on.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function s(c,h,f){if(f in t)return r(c,h);if(f in e)return r(void 0,c)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,h,f)=>i(C7(c),C7(h),f,!0)};return on.forEach(Object.keys(Object.assign({},e,t)),function(h){const f=l[h]||i,p=f(e[h],t[h],h);on.isUndefined(p)&&f!==s||(n[h]=p)}),n}const Ore=e=>{const t=mm({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;t.headers=o=Ws.from(o),t.url=Are(Rre(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(on.isFormData(n)){if(Ko.hasStandardBrowserEnv||Ko.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Ko.hasStandardBrowserEnv&&(r&&on.isFunction(r)&&(r=r(t)),r||r!==!1&&KQe(t.url))){const c=i&&a&&qQe.read(a);c&&o.set(i,c)}return t},XQe=typeof XMLHttpRequest<"u",JQe=XQe&&function(e){return new Promise(function(n,r){const i=Ore(e);let a=i.data;const o=Ws.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,h,f,p,v,_;function b(){v&&v(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function T(){if(!C)return;const A=Ws.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),O={data:!s||s==="text"||s==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:A,config:e,request:C};Dre(function(N){n(N),b()},function(N){r(N),b()},O),C=null}"onloadend"in C?C.onloadend=T:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(T)},C.onabort=function(){C&&(r(new jr("Request aborted",jr.ECONNABORTED,e,C)),C=null)},C.onerror=function(){r(new jr("Network Error",jr.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||Pre;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),r(new jr(I,O.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,e,C)),C=null},a===void 0&&o.setContentType(null),"setRequestHeader"in C&&on.forEach(o.toJSON(),function(I,O){C.setRequestHeader(O,I)}),on.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),s&&s!=="json"&&(C.responseType=i.responseType),c&&([p,_]=EM(c,!0),C.addEventListener("progress",p)),l&&C.upload&&([f,v]=EM(l),C.upload.addEventListener("progress",f),C.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(h=A=>{C&&(r(!A||A.type?new q0(null,e,C):A),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const E=UQe(i.url);if(E&&Ko.protocols.indexOf(E)===-1){r(new jr("Unsupported protocol "+E+":",jr.ERR_BAD_REQUEST,e));return}C.send(a||null)})},QQe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const a=function(c){if(!i){i=!0,s();const h=c instanceof Error?c:this.reason;r.abort(h instanceof jr?h:new q0(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,a(new jr(`timeout ${t} of ms exceeded`,jr.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>on.asap(s),l}},eet=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},tet=async function*(e,t){for await(const n of net(e))yield*eet(n,t)},net=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},T7=(e,t,n,r)=>{const i=tet(e,t);let a=0,o,s=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){s(),l.close();return}let f=h.byteLength;if(n){let p=a+=f;n(p)}l.enqueue(new Uint8Array(h))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},wE=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zre=wE&&typeof ReadableStream=="function",ret=wE&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Bre=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iet=zre&&Bre(()=>{let e=!1;const t=new Request(Ko.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),M7=64*1024,VO=zre&&Bre(()=>on.isReadableStream(new Response("").body)),AM={stream:VO&&(e=>e.body)};wE&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!AM[t]&&(AM[t]=on.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new jr(`Response type '${t}' is not supported`,jr.ERR_NOT_SUPPORT,r)})})})(new Response);const aet=async e=>{if(e==null)return 0;if(on.isBlob(e))return e.size;if(on.isSpecCompliantForm(e))return(await new Request(Ko.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(on.isArrayBufferView(e)||on.isArrayBuffer(e))return e.byteLength;if(on.isURLSearchParams(e)&&(e=e+""),on.isString(e))return(await ret(e)).byteLength},oet=async(e,t)=>{const n=on.toFiniteNumber(e.getContentLength());return n??aet(t)},set=wE&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:p}=Ore(e);c=c?(c+"").toLowerCase():"text";let v=QQe([i,a&&a.toAbortSignal()],o),_;const b=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let C;try{if(l&&iet&&n!=="get"&&n!=="head"&&(C=await oet(h,r))!==0){let O=new Request(t,{method:"POST",body:r,duplex:"half"}),B;if(on.isFormData(r)&&(B=O.headers.get("content-type"))&&h.setContentType(B),O.body){const[N,H]=x7(C,EM(S7(l)));r=T7(O.body,M7,N,H)}}on.isString(f)||(f=f?"include":"omit");const T="credentials"in Request.prototype;_=new Request(t,{...p,signal:v,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:T?f:void 0});let E=await fetch(_);const A=VO&&(c==="stream"||c==="response");if(VO&&(s||A&&b)){const O={};["status","statusText","headers"].forEach(j=>{O[j]=E[j]});const B=on.toFiniteNumber(E.headers.get("content-length")),[N,H]=s&&x7(B,EM(S7(s),!0))||[];E=new Response(T7(E.body,M7,N,()=>{H&&H(),b&&b()}),O)}c=c||"text";let I=await AM[on.findKey(AM,c)||"text"](E,e);return!A&&b&&b(),await new Promise((O,B)=>{Dre(O,B,{data:I,headers:Ws.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:_})})}catch(T){throw b&&b(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new jr("Network Error",jr.ERR_NETWORK,e,_),{cause:T.cause||T}):jr.from(T,T&&T.code,e,_)}}),HO={http:xQe,xhr:JQe,fetch:set};on.forEach(HO,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const k7=e=>`- ${e}`,uet=e=>on.isFunction(e)||e===null||e===!1,Fre={getAdapter:e=>{e=on.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){n=e[a];let o;if(r=n,!uet(n)&&(r=HO[(o=String(n)).toLowerCase()],r===void 0))throw new jr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+a]=r}if(!r){const a=Object.entries(i).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(k7).join(`
`):" "+k7(a[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:HO};function CL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new q0(null,e)}function E7(e){return CL(e),e.headers=Ws.from(e.headers),e.data=SL.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fre.getAdapter(e.adapter||Dx.adapter)(e).then(function(r){return CL(e),r.data=SL.call(e,e.transformResponse,r),r.headers=Ws.from(r.headers),r},function(r){return Lre(r)||(CL(e),r&&r.response&&(r.response.data=SL.call(e,e.transformResponse,r.response),r.response.headers=Ws.from(r.response.headers))),Promise.reject(r)})}const Nre="1.9.0",xE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xE[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const A7={};xE.transitional=function(t,n,r){function i(a,o){return"[Axios v"+Nre+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,s)=>{if(t===!1)throw new jr(i(o," has been removed"+(n?" in "+n:"")),jr.ERR_DEPRECATED);return n&&!A7[o]&&(A7[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,s):!0}};xE.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function cet(e,t,n){if(typeof e!="object")throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new jr("option "+a+" must be "+l,jr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jr("Unknown option "+a,jr.ERR_BAD_OPTION)}}const iT={assertOptions:cet,validators:xE},kc=iT.validators;class Gv{constructor(t){this.defaults=t||{},this.interceptors={request:new b7,response:new b7}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mm(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&iT.assertOptions(r,{silentJSONParsing:kc.transitional(kc.boolean),forcedJSONParsing:kc.transitional(kc.boolean),clarifyTimeoutError:kc.transitional(kc.boolean)},!1),i!=null&&(on.isFunction(i)?n.paramsSerializer={serialize:i}:iT.assertOptions(i,{encode:kc.function,serialize:kc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),iT.assertOptions(n,{baseUrl:kc.spelling("baseURL"),withXsrfToken:kc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&on.merge(a.common,a[n.method]);a&&on.forEach(["delete","get","head","post","put","patch","common"],_=>{delete a[_]}),n.headers=Ws.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(l=l&&b.synchronous,s.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let h,f=0,p;if(!l){const _=[E7.bind(this),void 0];for(_.unshift.apply(_,s),_.push.apply(_,c),p=_.length,h=Promise.resolve(n);f<p;)h=h.then(_[f++],_[f++]);return h}p=s.length;let v=n;for(f=0;f<p;){const _=s[f++],b=s[f++];try{v=_(v)}catch(C){b.call(this,C);break}}try{h=E7.call(this,v)}catch(_){return Promise.reject(_)}for(f=0,p=c.length;f<p;)h=h.then(c[f++],c[f++]);return h}getUri(t){t=mm(this.defaults,t);const n=Rre(t.baseURL,t.url,t.allowAbsoluteUrls);return Are(n,t.params,t.paramsSerializer)}}on.forEach(["delete","get","head","options"],function(t){Gv.prototype[t]=function(n,r){return this.request(mm(r||{},{method:t,url:n,data:(r||{}).data}))}});on.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,s){return this.request(mm(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Gv.prototype[t]=n(),Gv.prototype[t+"Form"]=n(!0)});class cB{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{r.subscribe(s),a=s}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},t(function(a,o,s){r.reason||(r.reason=new q0(a,o,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new cB(function(i){t=i}),cancel:t}}}function det(e){return function(n){return e.apply(null,n)}}function het(e){return on.isObject(e)&&e.isAxiosError===!0}const jO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jO).forEach(([e,t])=>{jO[t]=e});function $re(e){const t=new Gv(e),n=gre(Gv.prototype.request,t);return on.extend(n,Gv.prototype,t,{allOwnKeys:!0}),on.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return $re(mm(e,i))},n}const _a=$re(Dx);_a.Axios=Gv;_a.CanceledError=q0;_a.CancelToken=cB;_a.isCancel=Lre;_a.VERSION=Nre;_a.toFormData=bE;_a.AxiosError=jr;_a.Cancel=_a.CanceledError;_a.all=function(t){return Promise.all(t)};_a.spread=det;_a.isAxiosError=het;_a.mergeConfig=mm;_a.AxiosHeaders=Ws;_a.formToJSON=e=>Ire(on.isHTMLForm(e)?new FormData(e):e);_a.getAdapter=Fre.getAdapter;_a.HttpStatusCode=jO;_a.default=_a;const Ei={MAPTILER:{API_KEY:fet(),BASE_URL:"https://api.maptiler.com",TILES_URL:"https://api.maptiler.com/tiles",WEATHER_URL:"https://api.maptiler.com/weather",ALLOWED_DOMAINS:["localhost","127.0.0.1","yourdomain.com"]},MARINETRAFFIC:{API_KEY:"PhFHDKIG3klNinkl6RrR",BASE_URL:"https://services.marinetraffic.com",AIS_URL:"https://services.marinetraffic.com/api/exportvessel",VESSEL_DETAILS_URL:"https://services.marinetraffic.com/api/vesseldetails",PORT_CALLS_URL:"https://services.marinetraffic.com/api/portcalls"},NOAA:{BASE_URL:"https://charts.noaa.gov/ENCs",ENC_DOWNLOAD_URL:"https://charts.noaa.gov/ENCs/ENCs.shtml",EAST_CHINA_SEA:{minLon:120,maxLon:130,minLat:25,maxLat:35}},MAP:{DEFAULT_CENTER:[120,30],DEFAULT_ZOOM:8,MIN_ZOOM:1,MAX_ZOOM:20},SHIP_MODEL:{PATH:"/models/PrimaryIonDrive.glb",SCALE:.1,POSITION:[0,0,0],ROTATION:[0,0,0]}};function fet(){const e=localStorage.getItem("userMapTilerApiKey");if(e)return e;const t=["Y5BOehAEhqtSaqY6LlSk","GqHdMGQEb9SiNYLTUYCN","SWYi4yf3QO1MaLr9nZQ9","xrF8bEyP3xvdLcr9F3vU"];return t.length>0?t[0]:"Y5BOehAEhqtSaqY6LlSk"}class pet{constructor(){this.baseUrl=Ei.NOAA.BASE_URL,this.downloadUrl=Ei.NOAA.ENC_DOWNLOAD_URL,this.eastChinaSea=Ei.NOAA.EAST_CHINA_SEA}async getENCList(){try{return(await _a.get(`${this.baseUrl}/list.json`)).data}catch(t){throw console.error("获取ENC列表失败:",t),t}}async downloadENCData(t="east_china_sea"){try{return(await _a.get(this.downloadUrl,{params:{area:t,format:"s57",bbox:[this.eastChinaSea.minLon,this.eastChinaSea.minLat,this.eastChinaSea.maxLon,this.eastChinaSea.maxLat].join(",")},responseType:"arraybuffer"})).data}catch(n){throw console.error("下载ENC数据失败:",n),n}}parseENCData(t){return{header:{title:"东海区域ENC数据",scale:5e4,date:new Date().toISOString()},features:[{type:"航道",name:"东海航道",depth:20,coordinates:[[120,30],[121,30],[122,30]]},{type:"港口",name:"上海港",coordinates:[121.5,31.2]}]}}convertToGeoJSON(t){const n=t.features.map(r=>{if(r.type==="航道")return{type:"Feature",properties:{name:r.name,depth:r.depth,type:"航道"},geometry:{type:"LineString",coordinates:r.coordinates}};if(r.type==="港口")return{type:"Feature",properties:{name:r.name,type:"港口"},geometry:{type:"Point",coordinates:r.coordinates}}}).filter(Boolean);return{type:"FeatureCollection",properties:{title:t.header.title,scale:t.header.scale,date:t.header.date},features:n}}async processENCData(t="east_china_sea"){try{const n=await this.getENCList();console.log("可用的ENC数据:",n);const r=await this.downloadENCData(t),i=this.parseENCData(r);return this.convertToGeoJSON(i)}catch(n){throw console.error("处理ENC数据失败:",n),n}}}class vet{constructor(t,n){this.container=t,this.apiKey=n.apiKey||Ei.MAPTILER.API_KEY,this.center=n.center||Ei.MAP.DEFAULT_CENTER,this.zoom=n.zoom||Ei.MAP.DEFAULT_ZOOM,this.style=n.style,this.map=null,this.weatherLayer=null,this.aisLayer=null,this.encProcessor=new pet,this.retryCount=0,this.maxRetries=3}async init(){try{if(this.useOfflineMode()){await this.initOfflineMode();return}Oa.apiKey=this.apiKey,Oa.retryCount=this.maxRetries,Oa.retryDelay=1e3;const t=new Promise((r,i)=>{setTimeout(()=>i(new Error("初始化超时")),1e4)});let n=this.style;typeof n=="object"&&n.sources?(n=JSON.parse(JSON.stringify(n)),Object.keys(n.sources).forEach(r=>{const i=n.sources[r];i.url&&i.url.includes("api.maptiler.com")&&(i.url.includes("key=")||(i.url=this.addKeyToUrl(i.url,this.apiKey)))}),n.sprite&&n.sprite.includes("api.maptiler.com")&&!n.sprite.includes("key=")&&(n.sprite=this.addKeyToUrl(n.sprite,this.apiKey)),n.glyphs&&n.glyphs.includes("api.maptiler.com")&&!n.glyphs.includes("key=")&&(n.glyphs=this.addKeyToUrl(n.glyphs,this.apiKey))):typeof n=="string"&&n.includes("api.maptiler.com")&&!n.includes("key=")&&(n=this.addKeyToUrl(n,this.apiKey));try{console.log("初始化地图，使用API密钥:",this.apiKey),this.map=new Ww({container:this.container,style:n,center:this.center,zoom:this.zoom,minZoom:Ei.MAP.MIN_ZOOM,maxZoom:Ei.MAP.MAX_ZOOM,geolocate:"point"}),this.map.on("styleimagemissing",r=>{console.warn("样式图像缺失:",r.id)}),await Promise.race([new Promise((r,i)=>{this.map.on("load",r),this.map.on("error",a=>{a&&a.error&&((a.error.message||"").includes("Invalid key")||(a.error.message||"").includes("403")||(a.error.message||"").includes("Forbidden"))?(console.error("API密钥错误:",a.error),this.switchToOfflineMode("API密钥无效，已切换到离线模式"),i(new Error("API密钥无效: "+(a.error.message||"未知错误")))):i(a)})}),t]),await Promise.race([Promise.all([this.loadENCData(),this.loadWeatherData(),this.addAISLayer(Ei.MARINETRAFFIC.AIS_URL)]),t])}catch(r){if(console.error("地图初始化失败:",r),(r.message||"").includes("Invalid key")||(r.message||"").includes("403")||(r.message||"").includes("Forbidden"))return this.switchToOfflineMode("API密钥无效或网络连接失败，已切换到离线模式");throw r}}catch(t){if(console.error("MapTiler 初始化失败:",t),this.retryCount<this.maxRetries)return this.retryCount++,console.log(`重试初始化 (${this.retryCount}/${this.maxRetries})...`),await new Promise(n=>setTimeout(n,1e3)),this.init();this.switchToOfflineMode("多次尝试连接MapTiler API失败，已切换到离线模式")}}async loadENCData(){try{const t=await this.encProcessor.processENCData();this.map.addSource("enc",{type:"geojson",data:t}),this.map.addLayer({id:"enc-layer",type:"line",source:"enc",paint:{"line-color":"#00f","line-width":2}})}catch(t){console.error("加载 ENC 数据失败:",t)}}async loadWeatherData(){try{const t=this.addKeyToUrl(`${Ei.MAPTILER.WEATHER_URL}/wind.json`,this.apiKey),r=(await _a.get(t)).data;this.map.addSource("weather",{type:"geojson",data:r}),this.weatherLayer=this.map.addLayer({id:"weather-layer",type:"fill",source:"weather",paint:{"fill-color":"#0f0","fill-opacity":.5}})}catch(t){console.error("加载天气数据失败:",t)}}async addAISLayer(t){try{const r=(await _a.get(t,{headers:{Authorization:Ei.MARINETRAFFIC.API_KEY},params:{v:3,protocol:"jsono",msgtype:"simple"}})).data;this.map.addSource("ais",{type:"geojson",data:r}),this.aisLayer=this.map.addLayer({id:"ais-layer",type:"symbol",source:"ais",layout:{"icon-image":"ship-icon","icon-size":.5}}),setInterval(async()=>{const i=await _a.get(t,{headers:{Authorization:Ei.MARINETRAFFIC.API_KEY},params:{v:3,protocol:"jsono",msgtype:"simple"}});this.map.getSource("ais").setData(i.data)},1e3)}catch(n){console.error("加载 AIS 数据失败:",n)}}setStyle(t){typeof t=="string"&&t.includes("api.maptiler.com")&&!t.includes("key=")&&(t=this.addKeyToUrl(t,this.apiKey)),this.map.setStyle(t)}setWeatherVisibility(t){this.weatherLayer&&this.map.setLayoutProperty("weather-layer","visibility",t?"visible":"none")}setAISVisibility(t){this.aisLayer&&this.map.setLayoutProperty("ais-layer","visibility",t?"visible":"none")}setZoom(t){this.map.setZoom(t)}getZoom(){return this.map.getZoom()}getCenter(){return this.map.getCenter()}on(t,n){this.map.on(t,n)}resize(){this.map.resize()}remove(){this.map&&this.map.remove()}addKeyToUrl(t,n){if(!t||!n)return t;let r=t;if(t.includes("key=")){const a=/([?&])key=[^&]*(&|$)/;r=t.replace(a,(o,s,l)=>l==="&"?s:"")}const i=r.includes("?")?"&":"?";return`${r}${i}key=${n}`}async switchToOfflineMode(t){return console.warn(t),localStorage.setItem("useOfflineMode","true"),this.initOfflineMode()}useOfflineMode(){return localStorage.getItem("useOfflineMode")==="true"}async initOfflineMode(){try{const t={version:8,sources:{"offline-background":{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[-180,-90],[180,-90],[180,90],[-180,90],[-180,-90]]]}}}},layers:[{id:"background",type:"fill",source:"offline-background",paint:{"fill-color":"#e0f7fa"}}]};return this.map=new Ww({container:this.container,style:t,center:this.center,zoom:this.zoom,minZoom:Ei.MAP.MIN_ZOOM,maxZoom:Ei.MAP.MAX_ZOOM}),await new Promise(n=>{this.map.on("load",n)}),this.map.addSource("offline-text",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{message:"当前处于离线模式 - MapTiler API不可用"}}}),this.map.addLayer({id:"offline-text-layer",type:"symbol",source:"offline-text",layout:{"text-field":["get","message"],"text-size":20,"text-anchor":"center"},paint:{"text-color":"#455a64"}}),this.container&&this.container.dispatchEvent(new CustomEvent("offline-mode",{detail:{message:"当前处于离线模式"}})),!0}catch(t){throw console.error("离线模式初始化失败:",t),t}}exitOfflineMode(){return localStorage.removeItem("useOfflineMode"),this.retryCount=0,this.init()}}class met{constructor(){this.loader=new Ny,this.models=new Map}async loadModel(t,n=Ei.SHIP_MODEL.PATH){try{if(this.models.has(t))return this.models.get(t);if(!n||typeof n!="string")throw new Error("无效的模型URL");return console.log(`正在加载模型: ${n}`),new Promise((r,i)=>{this.loader.load(n,a=>{try{if(!a||!a.scene){i(new Error("模型加载失败：无效的模型数据"));return}const o=a.scene;if(o.scale.set(Ei.SHIP_MODEL.SCALE,Ei.SHIP_MODEL.SCALE,Ei.SHIP_MODEL.SCALE),o.position.set(Ei.SHIP_MODEL.POSITION[0],Ei.SHIP_MODEL.POSITION[1],Ei.SHIP_MODEL.POSITION[2]),o.rotation.set(Ei.SHIP_MODEL.ROTATION[0],Ei.SHIP_MODEL.ROTATION[1],Ei.SHIP_MODEL.ROTATION[2]),o.traverse(s=>{s.isMesh&&(s.userData.modelId=t,s.updateMatrix(),s.updateMatrixWorld(!0))}),a.animations&&a.animations.length>0){const s=new F7(o);s.clipAction(a.animations[0]).play(),o.userData.mixer=s}this.models.set(t,o),console.log(`模型加载完成: ${t}`),r(o)}catch(o){console.error("处理模型数据时出错:",o),i(o)}},a=>{console.log(`${(a.loaded/a.total*100).toFixed(2)}% 已加载`)},a=>{console.error("加载模型出错:",a),i(a)})})}catch(r){throw console.error("加载船舶模型失败:",r),r}}updateAnimation(t,n){try{const r=this.getModel(t);r&&r.userData&&r.userData.mixer&&r.userData.mixer.update(n)}catch(r){console.error("更新动画失败:",r)}}getModel(t){try{return this.models.get(t)||null}catch(n){return console.error("获取模型失败:",n),null}}disposeModel(t){const n=this.models.get(t);n&&(n.traverse(r=>{r.isMesh&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(i=>i.dispose()):r.material.dispose())}),n.userData.mixer&&(n.userData.mixer.stopAllAction(),n.userData.mixer=null),this.models.delete(t))}disposeAll(){for(const t of this.models.keys())this.disposeModel(t)}}class P7{constructor(t){this._scene=new Kw,this._camera=new y0(75,window.innerWidth/window.innerHeight,.1,1e3),this._renderer=null,this._controls=null,this._clock=new ZO,this._modelLoader=new met,this._currentModelId=null,this._container=t,this._isDisposed=!1,this._renderLoopActive=!1,this._frameId=null,this._renderLoopBound=this._renderLoop.bind(this),this.init()}get scene(){return this._scene}get camera(){return this._camera}get renderer(){return this._renderer}get container(){return this._container}get clock(){return this._clock}init(){try{this._renderer=new qw({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this._renderer.setSize(window.innerWidth,window.innerHeight),this._renderer.setClearColor(0,0),this._container.appendChild(this._renderer.domElement),this._camera.position.z=5,this._camera.matrixAutoUpdate=!0,this._controls=new mx(this._camera,this._container),this._controls.enableDamping=!0,this._controls.dampingFactor=.05;const t=new _0(16777215,.5);this._scene.add(t);const n=new Uc(16777215,.5);n.position.set(1,1,1),this._scene.add(n),this._onResizeBound=this._onResize.bind(this),window.addEventListener("resize",this._onResizeBound),console.log("模型查看器初始化完成")}catch(t){console.error("初始化模型查看器失败:",t)}}async loadModel(t){if(this._isDisposed)return null;try{this._currentModelId&&(this._modelLoader.disposeModel(this._currentModelId),this._currentModelId=null);const n="ship-"+Date.now();console.log(`开始加载模型 (${n}): ${t}`);const r=await this._modelLoader.loadModel(n,t);if(!r)throw new Error("模型加载返回空");return this._scene.add(r),this._currentModelId=n,this._renderLoopActive||this._startRenderLoop(),console.log(`模型 ${n}
加载完成并添加到场景`),r}catch(n){throw console.error("加载模型失败:",n),n}}_startRenderLoop(){this._isDisposed||this._renderLoopActive||(this._renderLoopActive=!0,this._renderLoop(),console.log("渲染循环已启动"))}_stopRenderLoop(){this._frameId&&(cancelAnimationFrame(this._frameId),this._frameId=null),this._renderLoopActive=!1,console.log("渲染循环已停止")}_renderLoop(){if(!(!this._renderLoopActive||this._isDisposed)){try{if(this._controls&&this._controls.update(),this._currentModelId)try{this._modelLoader.updateAnimation(this._currentModelId,this._clock.getDelta())}catch(t){console.warn("模型动画更新失败",t)}if(this._renderer&&this._scene&&this._camera){const t=this._renderer,n=this._scene,r=this._camera;t.render(n,r)}}catch(t){if(console.error("渲染循环错误:",t),this._errorCount=(this._errorCount||0)+1,this._errorCount>20){console.warn("渲染错误次数过多，停止渲染循环"),this._stopRenderLoop();return}}this._frameId=requestAnimationFrame(this._renderLoopBound)}}_onResize(){if(!this._isDisposed)try{const t=window.innerWidth,n=window.innerHeight;this._camera&&(this._camera.aspect=t/n,this._camera.updateProjectionMatrix()),this._renderer&&this._renderer.setSize(t,n)}catch(t){console.error("窗口大小变化处理失败:",t)}}resize(){this._onResize()}update(){}dispose(){try{if(this._isDisposed=!0,this._stopRenderLoop(),this._currentModelId&&(this._modelLoader.disposeModel(this._currentModelId),this._currentModelId=null),this._scene)for(;this._scene.children.length>0;){const t=this._scene.children[0];this._scene.remove(t)}this._controls&&(this._controls.dispose(),this._controls=null),this._renderer&&(this._renderer.domElement&&this._renderer.domElement.parentNode&&this._renderer.domElement.parentNode.removeChild(this._renderer.domElement),this._renderer.dispose(),this._renderer.forceContextLoss(),this._renderer=null),this._onResizeBound&&(window.removeEventListener("resize",this._onResizeBound),this._onResizeBound=null),this._container=null,this._scene=null,this._camera=null,this._clock=null,this._renderLoopBound=null,console.log("模型查看器资源已完全释放")}catch(t){console.error("模型查看器资源释放失败:",t)}}}const get=8,yet={openmaptiles:{type:"vector",url:"https://api.maptiler.com/tiles/v3/tiles.json"}},_et=[{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",paint:{"fill-color":"#1e90ff"}},{id:"port",type:"symbol",source:"openmaptiles","source-layer":"poi",filter:["==","class","port"],layout:{"icon-image":"port-icon","icon-size":1}}],TL={version:get,sources:yet,layers:_et},bet=8,wet={satellite:{type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json"}},xet=[{id:"satellite",type:"raster",source:"satellite",paint:{"raster-opacity":.8}}],Cet={version:bet,sources:wet,layers:xet},Tet={name:"MaritimeMap",data(){return{map:null,modelViewer:null,zoomLevel:8,center:[120,30],weatherVisible:!0,aisVisible:!0,currentStyle:TL,animationFrameId:null,needReinitialize:!1,isReinitializing:!1,errorMessage:"",isOfflineMode:!1,userApiKey:"",showSettings:!1}},mounted(){this.userApiKey=localStorage.getItem("userMapTilerApiKey")||"",console.log("使用的API密钥:",this.userApiKey||Ei.MAPTILER.API_KEY),this.initMap()},beforeDestroy(){console.log("正在销毁航海地图组件..."),this.modelViewer&&(this.modelViewer.dispose(),this.modelViewer=null),this.map&&(this.map.remove(),this.map=null),console.log("航海地图组件已销毁")},methods:{async initMap(){try{this.errorMessage="",this.checkCookieSupport()||console.warn("第三方Cookie可能被禁用，地图功能可能受限"),this.isOfflineMode=localStorage.getItem("useOfflineMode")==="true",this.map=new vet(this.$refs.mapContainer,{apiKey:this.userApiKey||Ei.MAPTILER.API_KEY,center:this.center,zoom:this.zoomLevel,style:this.currentStyle}),this.$refs.mapContainer&&this.$refs.mapContainer.addEventListener("offline-mode",e=>{this.isOfflineMode=!0,console.info("已切换到离线模式",e.detail)}),await this.map.init(),this.modelViewer=new P7(this.$refs.modelContainer);try{console.log("开始加载模型",Ei.SHIP_MODEL.PATH),await this.modelViewer.loadModel(Ei.SHIP_MODEL.PATH),console.log("模型加载成功")}catch(e){console.error("模型加载失败，但地图功能可继续使用:",e)}this.map.on("moveend",this.updateCenter),this.map.on("zoomend",this.updateZoomLevel)}catch(e){console.error("初始化失败:",e),this.handleInitError(e)}},toggleMapType(){this.currentStyle=this.currentStyle===TL?Cet:TL,this.map.setStyle(this.currentStyle)},toggleWeather(){this.weatherVisible=!this.weatherVisible,this.map.setWeatherVisibility(this.weatherVisible)},toggleAIS(){this.aisVisible=!this.aisVisible,this.map.setAISVisibility(this.aisVisible)},updateZoom(){this.map.setZoom(this.zoomLevel)},updateZoomLevel(){this.zoomLevel=this.map.getZoom()},updateCenter(){const e=this.map.getCenter();this.center=[e.lng,e.lat]},handleResize(){this.map&&this.map.resize(),this.modelViewer&&this.modelViewer.resize()},animate(){},async reinitialize(){if(!this.isReinitializing){this.isReinitializing=!0,console.log("开始重新初始化模型查看器...");try{this.modelViewer&&(this.modelViewer.dispose(),this.modelViewer=null),await new Promise(e=>setTimeout(e,500)),this.modelViewer=new P7(this.$refs.modelContainer);try{console.log("重新加载模型",Ei.SHIP_MODEL.PATH),await this.modelViewer.loadModel(Ei.SHIP_MODEL.PATH),console.log("模型重新加载成功"),this.needReinitialize=!1}catch(e){console.error("模型重新加载失败:",e)}}catch(e){console.error("重新初始化失败:",e)}finally{this.isReinitializing=!1}}},checkCookieSupport(){try{document.cookie="test=1; SameSite=None; Secure";const e=document.cookie.includes("test");return document.cookie="test=1; expires=Thu, 01 Jan 1970 00:00:00 GMT",e}catch{return!1}},handleInitError(e){let t="";e.message.includes("403")?(t="API密钥无效或已过期（403 Forbidden），请检查配置。您可以在 https://cloud.maptiler.com/account/keys/ 获取有效密钥。",console.error("MapTiler API密钥错误:",e)):e.message.includes("Invalid key")?(t="API密钥格式错误或被拒绝，请替换有效密钥。当前密钥: "+(this.userApiKey||Ei.MAPTILER.API_KEY),console.error("API密钥格式错误:",e)):e.message.includes("Network")||e.message.includes("connect")?(t="网络连接失败，请检查网络设置和防火墙配置",console.error("网络连接错误:",e)):e.message.includes("timeout")?(t="连接超时，请检查网络速度或服务器响应",console.error("连接超时错误:",e)):(t="初始化失败: "+e.message,console.error("未知错误:",e)),this.errorMessage=t},reloadMap(){this.initMap()},exitOfflineMode(){try{localStorage.removeItem("useOfflineMode"),this.isOfflineMode=!1,this.map&&this.map.exitOfflineMode?this.map.exitOfflineMode():this.initMap()}catch(e){console.error("退出离线模式失败:",e),this.errorMessage="退出离线模式失败: "+e.message}},toggleOfflineMode(){this.isOfflineMode=!this.isOfflineMode,this.isOfflineMode?localStorage.setItem("useOfflineMode","true"):localStorage.removeItem("useOfflineMode"),this.initMap()},setApiKey(){if(!this.userApiKey||this.userApiKey.trim()===""){alert("请输入有效的MapTiler API密钥");return}this.userApiKey=this.userApiKey.trim(),localStorage.setItem("userMapTilerApiKey",this.userApiKey),console.log("新的API密钥已保存:",this.userApiKey),this.showSettings=!1,this.reloadMap()},clearApiKey(){this.userApiKey="",localStorage.removeItem("userMapTilerApiKey"),console.log("API密钥已清除，将使用默认密钥"),this.reloadMap()}}},Met={class:"maritime-map"},ket={ref:"mapContainer",class:"map-container"},Eet={ref:"modelContainer",class:"model-container"},Aet={key:0,class:"error-message"},Pet={class:"error-content"},Iet={class:"key-setting"},Let={key:1,class:"offline-notice"},Det={class:"offline-content"},Ret={class:"key-setting"},Oet={class:"control-panel"},zet={class:"zoom-control"},Bet={class:"coordinates"},Fet={key:2,class:"settings-panel"},Net={class:"settings-content"},$et={class:"setting-item"},Vet={class:"setting-item"};function Het(e,t,n,r,i,a){return te(),me("div",Met,[V("div",ket,null,512),V("div",Eet,null,512),i.errorMessage?(te(),me("div",Aet,[V("div",Pet,[t[19]||(t[19]=V("h3",null,"错误",-1)),V("p",null,Xe(i.errorMessage),1),V("button",{onClick:t[0]||(t[0]=(...o)=>a.reloadMap&&a.reloadMap(...o))},"重新加载"),V("div",Iet,[t[17]||(t[17]=V("p",null,"您可以设置自己的MapTiler API密钥:",-1)),In(V("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>i.userApiKey=o),placeholder:"输入MapTiler API密钥"},null,512),[[qo,i.userApiKey]]),V("button",{onClick:t[2]||(t[2]=(...o)=>a.setApiKey&&a.setApiKey(...o))},"保存并使用"),t[18]||(t[18]=V("a",{href:"https://cloud.maptiler.com/account/keys/",target:"_blank"},"获取免费API密钥",-1))])])])):Ge("",!0),i.isOfflineMode?(te(),me("div",Let,[V("div",Det,[t[22]||(t[22]=V("div",{class:"offline-icon"},"📡",-1)),t[23]||(t[23]=V("div",{class:"offline-text"},"离线模式",-1)),t[24]||(t[24]=V("p",null,"MapTiler API不可用，当前使用离线地图显示",-1)),V("button",{onClick:t[3]||(t[3]=(...o)=>a.exitOfflineMode&&a.exitOfflineMode(...o)),class:"offline-button"},"尝试重新连接"),V("div",Ret,[t[20]||(t[20]=V("p",null,"您可以设置自己的MapTiler API密钥:",-1)),In(V("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>i.userApiKey=o),placeholder:"输入MapTiler API密钥"},null,512),[[qo,i.userApiKey]]),V("button",{onClick:t[5]||(t[5]=(...o)=>a.setApiKey&&a.setApiKey(...o))},"保存并使用"),t[21]||(t[21]=V("a",{href:"https://cloud.maptiler.com/account/keys/",target:"_blank"},"获取免费API密钥",-1))])])])):Ge("",!0),V("div",Oet,[V("button",{onClick:t[6]||(t[6]=(...o)=>a.toggleMapType&&a.toggleMapType(...o))},"切换地图类型"),V("button",{onClick:t[7]||(t[7]=(...o)=>a.toggleWeather&&a.toggleWeather(...o))},"天气显示: "+Xe(i.weatherVisible?"开":"关"),1),V("button",{onClick:t[8]||(t[8]=(...o)=>a.toggleAIS&&a.toggleAIS(...o))},"AIS显示: "+Xe(i.aisVisible?"开":"关"),1),V("div",zet,[V("label",null,"缩放级别: "+Xe(i.zoomLevel),1),In(V("input",{type:"range",min:"1",max:"20","onUpdate:modelValue":t[9]||(t[9]=o=>i.zoomLevel=o),onInput:t[10]||(t[10]=(...o)=>a.updateZoom&&a.updateZoom(...o))},null,544),[[qo,i.zoomLevel]])]),V("div",Bet,[V("label",null,"经度: "+Xe(i.center[0].toFixed(4)),1),V("label",null,"纬度: "+Xe(i.center[1].toFixed(4)),1)]),V("button",{onClick:t[11]||(t[11]=o=>i.showSettings=!i.showSettings),class:"settings-button"},"⚙️ 设置")]),i.showSettings?(te(),me("div",Fet,[V("div",Net,[t[27]||(t[27]=V("h3",null,"地图设置",-1)),V("div",$et,[t[25]||(t[25]=V("label",null,"MapTiler API密钥:",-1)),In(V("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=o=>i.userApiKey=o),placeholder:"输入MapTiler API密钥"},null,512),[[qo,i.userApiKey]]),V("button",{onClick:t[13]||(t[13]=(...o)=>a.setApiKey&&a.setApiKey(...o))},"保存"),V("button",{onClick:t[14]||(t[14]=(...o)=>a.clearApiKey&&a.clearApiKey(...o))},"清除")]),V("div",Vet,[t[26]||(t[26]=V("label",null,"离线模式:",-1)),V("button",{onClick:t[15]||(t[15]=(...o)=>a.toggleOfflineMode&&a.toggleOfflineMode(...o))},Xe(i.isOfflineMode?"退出离线模式":"进入离线模式"),1)]),t[28]||(t[28]=V("div",{class:"setting-item"},[V("a",{href:"https://cloud.maptiler.com/account/keys/",target:"_blank"},"获取免费API密钥")],-1)),V("button",{onClick:t[16]||(t[16]=o=>i.showSettings=!1),class:"close-button"},"关闭")])])):Ge("",!0)])}const jet=Ms(Tet,[["render",Het],["__scopeId","data-v-592bf2ee"]]),Uet={name:"MapboxMaritimeMap",data(){return{map:null,mapLoaded:!1,mapError:null,showEnvironmentInfo:!1,mapboxToken:"",center:[121.52,30.54],zoomLevel:9,currentMapType:"standard",weatherVisible:!0,shipsVisible:!0,simulationActive:!1,simulationInterval:null,simulationSpeed:1,ships:[{id:"ship1",name:"海洋明珠号",position:[120.15,30.26],speed:15,heading:45,routeIndex:0,marker:null,type:"集装箱船",length:300,width:40,draft:14.5,capacity:"8000 TEU",status:"正常航行",destination:"上海港",eta:"2023-12-28 08:00",trackHistory:[[120.15,30.26]],fuelRemaining:85,cargoLoad:76,mmsi:10086,imo:"1020980",callsign:"1020980",nameEn:"Ocean Pearl",flag:"CN",cog:45,sog:"NaNkn",fore_draft:13.2,aft_draft:14.8},{id:"ship2",name:"远洋探索号",position:[121,31],speed:12,heading:135,routeIndex:0,marker:null,type:"散货船",length:250,width:32,draft:12.8,capacity:"85000 DWT",status:"正常航行",destination:"宁波舟山港",eta:"2023-12-25 14:30",trackHistory:[[121,31]],fuelRemaining:72,cargoLoad:90,mmsi:10087,imo:"1020981",callsign:"1020981",nameEn:"Ocean Explorer",flag:"CN",cog:135,sog:"12kn",fore_draft:11.8,aft_draft:12.5},{id:"ship3",name:"东方之星",position:[122.05,32.05],speed:14,heading:225,routeIndex:0,marker:null,type:"油轮",length:280,width:38,draft:13.5,capacity:"120000 DWT",status:"正常航行",destination:"洋山港",eta:"2023-12-30 18:45",trackHistory:[[122.05,32.05]],fuelRemaining:65,cargoLoad:82,mmsi:10088,imo:"1020982",callsign:"1020982",nameEn:"Eastern Star",flag:"CN",cog:225,sog:"14kn",fore_draft:13.2,aft_draft:13.8},{id:"ship4",name:"金海捷运",position:[121.5,31.5],speed:16,heading:180,routeIndex:0,marker:null,type:"滚装船",length:210,width:30,draft:10.5,capacity:"2500 LUM",status:"正常航行",destination:"上海港",eta:"2023-12-27 10:15",trackHistory:[[121.5,31.5]],fuelRemaining:78,cargoLoad:68,mmsi:10089,imo:"1020983",callsign:"1020983",nameEn:"Golden Express",flag:"CN",cog:180,sog:"16kn",fore_draft:10.2,aft_draft:10.8},{id:"ship5",name:"蓝鲸号",position:[121.8,30.8],speed:9,heading:90,routeIndex:0,marker:null,type:"渔船",length:65,width:12,draft:5.2,capacity:"150 吨",status:"正常航行",destination:"舟山港",eta:"2023-12-26 16:30",trackHistory:[[121.8,30.8]],fuelRemaining:45,cargoLoad:60,mmsi:10090,imo:"1020984",callsign:"1020984",nameEn:"Blue Whale",flag:"CN",cog:90,sog:"9kn",fore_draft:5,aft_draft:5.4},{id:"ship6",name:"沪甬之星",position:[121.47,31.23],speed:18,heading:150,routeIndex:0,marker:null,type:"集装箱船",length:320,width:43,draft:15.2,capacity:"9500 TEU",status:"准备启航",destination:"宁波舟山港",eta:"2023-12-29 16:30",trackHistory:[[121.47,31.23]],fuelRemaining:98,cargoLoad:88,mmsi:10095,imo:"1020990",callsign:"COSCO6688",nameEn:"Shanghai-Ningbo Star",flag:"CN",cog:150,sog:"18kn",fore_draft:14.8,aft_draft:15.6},{id:"ship7",name:"东海快航",position:[121.56,29.86],speed:20,heading:330,routeIndex:0,marker:null,type:"滚装船",length:200,width:28,draft:9.8,capacity:"2300 LUM",status:"正常航行",destination:"上海港",eta:"2023-12-29 11:30",trackHistory:[[121.56,29.86]],fuelRemaining:85,cargoLoad:75,mmsi:10096,imo:"1020991",callsign:"CNEXP5566",nameEn:"East Sea Express",flag:"CN",cog:330,sog:"20kn",fore_draft:9.5,aft_draft:10.1},{id:"ship8",name:"沪甬明珠",position:[121.47,31.23],speed:0,heading:150,routeIndex:0,marker:null,type:"集装箱船",length:350,width:45,draft:15.6,capacity:"10200 TEU",status:"准备启航",destination:"宁波舟山港",eta:"2023-12-30 18:30",trackHistory:[[121.47,31.23]],fuelRemaining:100,cargoLoad:92,mmsi:10097,imo:"1020995",callsign:"COSCO9977",nameEn:"Shanghai-Ningbo Pearl",flag:"CN",cog:150,sog:"0kn",fore_draft:15.2,aft_draft:16}],selectedShip:null,routes:{ship1:[[120.15,30.26],[120.35,30.36],[120.55,30.6],[120.8,30.8],[121,31],[121.2,31.1],[121.35,31.16],[121.47,31.23]],ship2:[[121,31],[120.9,30.9],[120.8,30.75],[120.7,30.6],[120.5,30.4],[120.3,30.3],[120.15,30.26]],ship3:[[122.05,32.05],[121.95,31.9],[121.85,31.7],[121.75,31.5],[121.65,31.35],[121.56,31.2],[121.47,31.23]],ship4:[[121.5,31.5],[121.4,31.4],[121.3,31.3],[121.2,31.2],[121.1,31.1],[121,31],[120.8,30.8],[120.6,30.6],[120.4,30.4],[120.2,30.3],[120.15,30.26]],ship5:[[121.8,30.8],[121.7,30.7],[121.6,30.6],[121.5,30.5],[121.4,30.3],[121.3,30.1],[121.2,29.9],[121.1,29.8],[121,29.7],[120.9,29.8],[120.8,29.9]],ship6:[[121.47,31.23],[121.48,31.2],[121.5,31.15],[121.53,31.1],[121.56,31.05],[121.6,30.95],[121.68,30.85],[121.76,30.78],[121.85,30.7],[121.92,30.6],[121.88,30.45],[121.82,30.35],[121.75,30.22],[121.67,30.1],[121.61,29.95],[121.56,29.86]],ship7:[[121.56,29.86],[121.61,29.95],[121.67,30.1],[121.75,30.22],[121.82,30.35],[121.88,30.45],[121.92,30.6],[121.85,30.7],[121.76,30.78],[121.68,30.85],[121.6,30.95],[121.56,31.05],[121.53,31.1],[121.5,31.15],[121.48,31.2],[121.47,31.23]],ship8:[[121.47,31.23],[121.49,31.19],[121.52,31.14],[121.55,31.08],[121.59,31.02],[121.65,30.95],[121.73,30.87],[121.82,30.78],[121.9,30.68],[121.94,30.58],[121.9,30.46],[121.84,30.34],[121.77,30.24],[121.69,30.12],[121.62,30],[121.58,29.92],[121.56,29.86]]},routeColors:{ship1:"#00FF00",ship2:"#0088FF",ship3:"#FF8800",ship4:"#27ae60",ship5:"#8e44ad",ship6:"#FF3300",ship7:"#27ae60",ship8:"#FF3300"},weatherArea:null,routePolylines:{},shipTracks:{},ports:[{name:"青岛港",position:[120.316,36.0839],country:"中国",info:"中国重要港口"},{name:"大连港",position:[121.6147,38.9673],country:"中国",info:"东北地区重要港口"},{name:"上海港",position:[121.47,31.23],country:"中国",info:"全球最大集装箱港口之一，中国第一大港"},{name:"宁波-舟山港",position:[121.56,29.86],country:"中国",info:"全球最大的货物吞吐量港口，宁波港和舟山港合并而成"}],weatherMarker:null,showTrackHistory:!0,showPlannedRoute:!0,speedOptions:[{label:"0.5x",value:.5},{label:"1x",value:1},{label:"2x",value:2},{label:"5x",value:5}],portData:[{name:"上海港",position:[31.23,121.47],type:"集装箱港口",capacity:"4350万TEU/年",berths:46},{name:"宁波舟山港",position:[29.86,121.56],type:"综合港口",capacity:"3100万TEU/年",berths:39},{name:"洋山港",position:[30.62,122.09],type:"深水港",capacity:"2500万TEU/年",berths:32}],historyPlaybackMode:!1,historyTimeRange:{start:"",end:""},historyPlaybackCurrentTime:null,historyPlaybackTotalSteps:100,historyPlaybackCurrentStep:0,historyPlaybackActive:!1,isHistoryPlaying:!1,historyPlaybackInterval:null,filteredHistory:{}}},computed:{hasQuotesInToken(){return this.mapboxToken&&(this.mapboxToken.includes('"')||this.mapboxToken.includes("'"))}},mounted(){this.loadLeafletMap(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.cleanupResources()},methods:{loadLeafletMap(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e);const t=document.createElement("script");t.type="text/javascript",t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=()=>{this.initMap()},t.onerror=n=>{console.error("Leaflet地图加载失败:",n),this.mapError="Leaflet地图API加载失败，请检查网络连接"},document.head.appendChild(t)},initMap(){try{if(!window.L)throw new Error("Leaflet地图API未正确加载，可能是网络问题");this.map=L.map(this.$refs.mapContainer).setView(this.center,this.zoomLevel),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.mapLoaded=!0,this.addPorts(),this.addWeatherLayer(),this.addRoutesLayer(),this.addShips(),this.map.on("moveend",this.updateCenter),this.map.on("zoomend",this.updateZoomLevel)}catch(e){console.error("地图初始化失�?",e),this.mapError="地图初始化失�? "+e.message}},addPorts(){!this.mapLoaded||!window.L||this.portData.forEach(e=>{const t=L.divIcon({html:'<div class="port-icon">⚓</div>',className:"port-marker",iconSize:[24,24],iconAnchor:[12,12]}),n=L.marker(e.position,{icon:t,title:e.name}).addTo(this.map),r=`
          <div class="port-popup">
            <h4>${e.name}</h4>
            <p><strong>类型:</strong> ${e.type}</p>
            <p><strong>年吞吐量:</strong> ${e.capacity}</p>
            <p><strong>泊位数:</strong> ${e.berths}</p>
          </div>
        `;n.bindPopup(r),this.ports.push(n)})},addWeatherLayer(){if(!this.mapLoaded||!window.L)return;const e=[[29.5,119.5],[29.5,120.5],[30.5,120.5],[30.5,119.5]];this.weatherArea=L.polygon(e,{color:"#FF0000",fillColor:"#FF0000",fillOpacity:.3}).addTo(this.map),this.weatherMarker=L.marker([30,120]).addTo(this.map),this.weatherMarker.bindPopup("台风预警<br>风力 25级<br>浪高: 3.5米").openPopup()},addRoutesLayer(){if(!(!this.mapLoaded||!window.L)&&(Object.keys(this.routes).forEach(e=>{const t=this.routes[e].map(o=>[o[1],o[0]]),n=this.routeColors[e]||"#00FF00",r=e==="ship6"||e==="ship8",i=L.polyline(t,{color:n,weight:r?6:2,dashArray:r?"15, 10":"5, 5",opacity:r?.9:.7}).addTo(this.map);this.routePolylines[e]=i;const a=L.polyline([],{color:n,weight:r?5:3,opacity:r?1:.9}).addTo(this.map);this.shipTracks[e]=a}),this.routePolylines.ship6)){const e=this.routes.ship6,t=Math.floor(e.length/2);if(e[t],this.map){const n=this.routePolylines.ship6.getBounds();this.map.fitBounds(n,{padding:[50,50],maxZoom:10})}}},addShips(){!this.mapLoaded||!window.L||this.ships.forEach(e=>{let t="▲",n=this.routeColors[e.id]||"#2980b9",r=1.2;e.type==="集装箱船"?(t="▲",n="#3498db",r=1.3):e.type==="油轮"?(t="◆",n="#e74c3c",r=1.4):e.type==="散货船"?(t="■",n="#f39c12",r=1.3):e.type==="滚装船"?(t="●",n="#27ae60",r=1.3):e.type==="渔船"&&(t="▼",n="#8e44ad",r=1);const i=`
          <div class="ship-icon-wrapper ship-wrapper-${e.type}" style="transform: rotate(${e.heading}deg); transform-origin: center center;">
            <div class="ship-icon ship-${e.type}" style="color: ${n}; transform: scale(${r});">${t}</div>
            <div class="ship-shadow"></div>
            <div class="ship-label">${e.name}</div>
          </div>
        `,a=L.divIcon({html:i,className:"ship-marker",iconSize:[50,50],iconAnchor:[25,25]}),o=[e.position[1],e.position[0]],s=L.marker(o,{icon:a,title:e.name}).addTo(this.map);s.on("click",()=>{this.showShipInfo(e.id)}),e.marker=s})},toggleMapType(){!this.map||!window.L||(this.currentMapType==="standard"?(this.map.eachLayer(e=>{e instanceof L.TileLayer&&this.map.removeLayer(e)}),L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}).addTo(this.map),this.currentMapType="satellite"):(this.map.eachLayer(e=>{e instanceof L.TileLayer&&this.map.removeLayer(e)}),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.currentMapType="standard"))},toggleWeather(){this.weatherVisible=!this.weatherVisible,this.weatherArea&&(this.weatherVisible?(this.weatherArea.addTo(this.map),this.weatherMarker.addTo(this.map)):(this.map.removeLayer(this.weatherArea),this.map.removeLayer(this.weatherMarker)))},toggleShips(){this.shipsVisible=!this.shipsVisible,this.ships.forEach(e=>{e.marker&&(this.shipsVisible?e.marker.addTo(this.map):this.map.removeLayer(e.marker))}),Object.values(this.routePolylines).forEach(e=>{this.shipsVisible?e.addTo(this.map):this.map.removeLayer(e)})},updateZoom(){this.map&&this.map.setZoom(parseFloat(this.zoomLevel))},updateZoomLevel(){this.map&&(this.zoomLevel=this.map.getZoom())},updateCenter(){if(this.map){const e=this.map.getCenter();this.center=[e.lng,e.lat]}},handleResize(){this.map&&this.map.setZoom(parseFloat(this.zoomLevel))},showShipInfo(e){const t=this.ships.find(n=>n.id===e);t&&(this.selectedShip=t)},closeInfoPanel(){this.selectedShip=null},startSimulation(){this.simulationActive||(this.simulationActive=!0,this.simulationInterval=setInterval(()=>{this.ships.forEach(e=>{const t=this.routes[e.id];if(t&&t.length>0){if(e.routeIndex<t.length-1){e.routeIndex+=.1*this.simulationSpeed,e.routeIndex>=t.length-1&&(e.routeIndex=t.length-1);const n=Math.floor(e.routeIndex),r=Math.min(n+1,t.length-1),i=e.routeIndex-n,a=t[n],o=t[r],s=a[0]+(o[0]-a[0])*i,l=a[1]+(o[1]-a[1])*i;e.position=[s,l],e.heading=this.calculateHeading(a,o),e.speed=Math.max(10,Math.min(18,e.speed+(Math.random()-.5))),e.routeIndex>t.length*.9?e.status="即将抵达":e.routeIndex>t.length*.5?e.status="正常航行":e.status="起航";const c=new Date,h=(t.length-e.routeIndex)/(e.speed*.1);if(c.setHours(c.getHours()+h),e.eta=c.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),e.fuelRemaining=Math.max(0,e.fuelRemaining-.05*this.simulationSpeed),e.trackHistory.push([...e.position]),this.showTrackHistory&&this.shipTracks[e.id]){const f=e.trackHistory.map(p=>[p[1],p[0]]);this.shipTracks[e.id].setLatLngs(f)}}else{if(e.routeIndex=0,e.position=t[0],e.trackHistory=[t[0]],this.shipTracks[e.id]&&this.shipTracks[e.id].setLatLngs([]),t.length>1){const n=t[1];e.heading=this.calculateHeading(t[0],n)}e.fuelRemaining=100,e.cargoLoad=Math.floor(Math.random()*30)+70,e.status="重新起航"}if(e.marker){const n=[e.position[1],e.position[0]];e.marker.setLatLng(n);let r="▲",i=this.routeColors[e.id]||"#2980b9",a=1.2;e.type==="集装箱船"?(r="▲",i="#3498db",a=1.3):e.type==="油轮"?(r="◆",i="#e74c3c",a=1.4):e.type==="散货船"?(r="■",i="#f39c12",a=1.3):e.type==="滚装船"?(r="●",i="#27ae60",a=1.3):e.type==="渔船"&&(r="▼",i="#8e44ad",a=1);const o=`
                <div class="ship-icon-wrapper ship-wrapper-${e.type}" style="transform: rotate(${e.heading}deg); transform-origin: center center;">
                  <div class="ship-icon ship-${e.type}" style="color: ${i}; transform: scale(${a});">${r}</div>
                  <div class="ship-shadow"></div>
                  <div class="ship-label">${e.name}</div>
                </div>
              `,s=L.divIcon({html:o,className:"ship-marker",iconSize:[50,50],iconAnchor:[25,25]});e.marker.setIcon(s),this.selectedShip&&this.selectedShip.id===e.id&&(this.selectedShip={...e})}}})},100))},stopSimulation(){this.simulationInterval&&(clearInterval(this.simulationInterval),this.simulationInterval=null),this.simulationActive=!1},calculateHeading(e,t){const n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sin(i-n)*Math.cos(a),s=Math.cos(r)*Math.sin(a)-Math.sin(r)*Math.cos(a)*Math.cos(i-n);let l=Math.atan2(o,s)*180/Math.PI;return l<0&&(l+=360),l},retryMapLoad(){if(this.mapError=null,this.map){try{this.map.remove()}catch(e){console.error("清除地图失败:",e)}this.map=null}this.loadLeafletMap()},cleanupResources(){this.simulationInterval&&(clearInterval(this.simulationInterval),this.simulationInterval=null),this.map&&(this.map.remove(),this.map=null),window.removeEventListener("resize",this.handleResize)},maskToken(e){if(!e)return"未设置";const t=e.toString();return t.length<10?t:`${t.substring(0,8)}...${t.substring(t.length-8)}`},getBrowserInfo(){const e=navigator.userAgent;let t="未知浏览器";return e.indexOf("Chrome")>-1&&e.indexOf("Edge")===-1?t="Chrome":e.indexOf("Firefox")>-1?t="Firefox":e.indexOf("Edge")>-1?t="Edge":e.indexOf("Safari")>-1&&(t="Safari"),`${t} (${navigator.userAgent})`},areCookiesEnabled(){try{document.cookie="testcookie=1";const e=document.cookie.indexOf("testcookie=")!==-1;return document.cookie="testcookie=1; expires=Thu, 01 Jan 1970 00:00:00 GMT",e}catch{return!1}},checkEnvironment(){const e=window.L!==void 0;this.showEnvironmentInfo=!0,this.$nextTick(()=>{const t=document.querySelector(".env-content");if(t){const n=document.createElement("p");n.innerHTML=`<strong>Leaflet地图API状态：</strong> ${e?"已加载":'<span style="color: red">未加载</span>'}`;const r=document.createElement("p");r.innerHTML='<strong>地图信息</strong> <span style="color: green">使用开源Leaflet + OpenStreetMap，无需API密钥</span>';const i=document.createElement("p");i.innerHTML='<strong>提示</strong> <span style="color: green">OpenStreetMap不依赖第三方Cookie，避免了Chrome浏览器限制问</span>',t.appendChild(n),t.appendChild(r),t.appendChild(i)}})},closeEnvironmentPanel(){this.showEnvironmentInfo=!1},toggleTrackHistory(){this.showTrackHistory=!this.showTrackHistory},togglePlannedRoute(){this.showPlannedRoute=!this.showPlannedRoute},changeSimulationSpeed(e){this.simulationSpeed=e},getRouteProgress(e){const t=this.routes[e.id];return!t||t.length<=1?0:e.routeIndex/(t.length-1)*100},centerOnShip(e){if(this.map&&e&&e.position){const t=[e.position[1],e.position[0]];this.map.setView(t,10)}},getFuelClass(e){return e<30?"fuel-low":e<60?"fuel-medium":"fuel-high"},getFuelGradient(e){return e<30?"linear-gradient(90deg, #e74c3c, #c0392b)":e<60?"linear-gradient(90deg, #f39c12, #d35400)":"linear-gradient(90deg, #2ecc71, #27ae60)"},centerOnShanghaiNingboRoute(){if(!this.map||!this.routePolylines.ship6)return;const e=this.routePolylines.ship6.getBounds();this.map.fitBounds(e,{padding:[50,50],maxZoom:10});const t=this.routes.ship6,n=Math.floor(t.length/2),r=t[n];L.popup().setLatLng([r[1],r[0]]).setContent(`
        <div class="route-info-popup">
          <h3>上海-宁波舟山航线</h3>
          <p><strong>航距:</strong> �?65海里</p>
          <p><strong>航行时间:</strong> �?-10小时(18�?</p>
          <p><strong>航线特点:</strong></p>
          <ul>
            <li>沿黄浦江、长江口主航道航</li>
            <li>避开长江口南槽浅滩和九段</li>
            <li>遵循东海航运规则，避开渔场</li>
            <li>绕行舟山群岛北部水域</li>
            <li>沿舟山航道进入宁波舟山港</li>
          </ul>
          <p><strong>注意:</strong> 受涨�?落潮、季风等影响，实际航线可能略有调</p>
        </div>
      `).openOn(this.map)},startHistoryPlayback(){this.isHistoryPlaying=!0,this.historyPlaybackActive=!0;const e=new Date(this.historyTimeRange.start).getTime(),n=new Date(this.historyTimeRange.end).getTime()-e;this.historyPlaybackInterval&&clearInterval(this.historyPlaybackInterval),this.historyPlaybackInterval=setInterval(()=>{if(this.historyPlaybackCurrentStep>=this.historyPlaybackTotalSteps){this.pauseHistoryPlayback();return}this.historyPlaybackCurrentStep++;const r=this.historyPlaybackCurrentStep/this.historyPlaybackTotalSteps,i=e+n*r;this.historyPlaybackCurrentTime=i,this.updateShipsAtTime(i)},100)},pauseHistoryPlayback(){this.historyPlaybackInterval&&(clearInterval(this.historyPlaybackInterval),this.historyPlaybackInterval=null),this.isHistoryPlaying=!1},stopHistoryPlayback(){this.pauseHistoryPlayback(),this.historyPlaybackCurrentStep=0,this.historyPlaybackActive=!1,this.resetShipsToInitialPosition()},updateShipsAtTime(e){if(this.ships.forEach(t=>{if(!t.historyData||t.historyData.length===0)return;let n=null,r=1/0;for(const i of t.historyData){const a=Math.abs(i.timestamp-e);a<r&&(r=a,n=i)}if(n&&(t.position=[...n.position],t.heading=n.heading,t.speed=n.speed,t.status=n.status,t.fuelRemaining=n.fuelRemaining,t.cargoLoad=n.cargoLoad,t.marker)){const i=[t.position[1],t.position[0]];t.marker.setLatLng(i);const a=this.createShipIcon(t);t.marker.setIcon(a)}}),this.selectedShip){const t=this.ships.find(n=>n.id===this.selectedShip.id);t&&(this.selectedShip={...t})}},resetShipsToInitialPosition(){this.ships.forEach(e=>{const t=this.routes[e.id];if(t&&t.length>0&&(e.position=[...t[0]],e.routeIndex=0,t.length>1&&(e.heading=this.calculateHeading(t[0],t[1])),e.status="准备启航",e.fuelRemaining=100,e.cargoLoad=70+Math.floor(Math.random()*30),e.marker)){const n=[e.position[1],e.position[0]];e.marker.setLatLng(n);const r=this.createShipIcon(e);e.marker.setIcon(r)}})},createShipIcon(e){let t="▲",n=this.routeColors[e.id]||"#2980b9",r=1.2;e.type==="集装箱船"?(t="▲",n="#3498db",r=1.3):e.type==="油轮"?(t="◆",n="#e74c3c",r=1.4):e.type==="散货船"?(t="■",n="#f39c12",r=1.3):e.type==="滚装船"?(t="●",n="#27ae60",r=1.3):e.type==="渔船"&&(t="▼",n="#8e44ad",r=1);const i=`
        <div class="ship-icon-wrapper ship-wrapper-${e.type}" style="transform: rotate(${e.heading}deg); transform-origin: center center;">
          <div class="ship-icon ship-${e.type}" style="color: ${n}; transform: scale(${r});">${t}</div>
          <div class="ship-shadow"></div>
          <div class="ship-label">${e.name}</div>
        </div>
      `;return L.divIcon({html:i,className:"ship-marker",iconSize:[50,50],iconAnchor:[25,25]})},applyTimeFilter(){console.log("Applying time filter:",this.historyTimeRange)},exitHistoryPlayback(){this.historyPlaybackMode=!1},formatPlaybackTime(e){return`Time: ${e}%`},seekHistoryPlayback(e){this.historyPlaybackCurrentTime=e.target.value},enterHistoryPlaybackMode(){this.historyPlaybackMode=!0,this.generateHistoryData()},generateHistoryData(){this.ships.forEach(n=>{const r=this.routes[n.id];if(r&&r.length>0){const i=[],a=new Date;for(let o=0;o<168;o++){const s=new Date(a);s.setHours(a.getHours()-(168-o));const l=24,c=o%l/l;let h;c<=.5?h=Math.floor(c*2*(r.length-1)):h=Math.floor((2-c*2)*(r.length-1)),h=Math.max(0,Math.min(r.length-1,h));let f=0;if(h<r.length-1){const b=r[h],C=r[Math.min(h+1,r.length-1)];f=this.calculateHeading(b,C),c>.5&&(f=(f+180)%360)}const p=n.speed*(.9+Math.random()*.2),v=o%24;let _=100-v/24*20;v===23&&(_=100),i.push({timestamp:s.getTime(),position:[...r[h]],heading:f,speed:p,fuelRemaining:_,cargoLoad:70+Math.floor(Math.random()*30),status:c<=.05?"启航":c>=.45&&c<=.55?"靠港":"正常航行"})}n.historyData=i}});const e=new Date,t=new Date(e);t.setDate(e.getDate()-7),this.historyTimeRange.start=this.formatDateForInput(t),this.historyTimeRange.end=this.formatDateForInput(e)},formatDateForInput(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${t}-${n}-${r}T${i}:${a}`}}},Wet={class:"mapbox-maritime-map"},Get={ref:"mapContainer",class:"map-container"},Ket={class:"control-panel"},qet={class:"control-section"},Zet={class:"zoom-control"},Yet={class:"control-section"},Xet={class:"control-section"},Jet=["disabled"],Qet=["disabled"],ett={class:"speed-control"},ttt={class:"speed-buttons"},ntt=["onClick"],rtt={class:"coordinates"},itt={key:0,class:"error-panel"},att={class:"error-content"},ott={class:"error-message"},stt={key:1,class:"info-panel"},ltt={class:"info-content"},utt={class:"info-header"},ctt={class:"ship-name"},dtt={class:"info-grid"},htt={class:"info-card basic-info"},ftt={class:"card-content"},ptt={class:"info-row"},vtt={class:"info-value"},mtt={class:"info-row"},gtt={class:"info-value"},ytt={class:"info-row"},_tt={class:"info-value"},btt={class:"info-row"},wtt={class:"info-row"},xtt={class:"info-value"},Stt={class:"info-card navigation-info"},Ctt={class:"card-content"},Ttt={class:"coord-display"},Mtt={class:"coord-item"},ktt={class:"coord-value"},Ett={class:"coord-item"},Att={class:"coord-value"},Ptt={class:"speed-heading-display"},Itt={class:"nav-item"},Ltt={class:"nav-value"},Dtt={class:"nav-item"},Rtt={class:"nav-value"},Ott={class:"compass-wrap"},ztt={class:"heading-value"},Btt={class:"info-row"},Ftt={class:"info-value"},Ntt={class:"info-row"},$tt={class:"info-value destination"},Vtt={class:"info-row"},Htt={class:"info-value"},jtt={class:"info-card vessel-info"},Utt={class:"card-content"},Wtt={class:"ship-dimensions"},Gtt={class:"dimension-item"},Ktt={class:"dimension-value"},qtt={class:"dimension-item"},Ztt={class:"dimension-value"},Ytt={class:"dimension-item"},Xtt={class:"dimension-value"},Jtt={class:"info-row"},Qtt={class:"info-value"},ent={class:"draft-display"},tnt={class:"draft-item"},nnt={class:"draft-value"},rnt={class:"draft-item"},int={class:"draft-value"},ant={class:"info-card status-info"},ont={class:"card-content"},snt={class:"gauge-container"},lnt={class:"gauge fuel-gauge"},unt={class:"gauge-header"},cnt={class:"gauge-bar"},dnt={class:"gauge cargo-gauge"},hnt={class:"gauge-header"},fnt={class:"gauge-value"},pnt={class:"gauge-bar"},vnt={class:"gauge route-gauge"},mnt={class:"gauge-header"},gnt={class:"gauge-value"},ynt={class:"gauge-bar"},_nt={class:"info-actions"},bnt={key:2,class:"env-panel"},wnt={class:"env-content"},xnt={key:0,class:"warning-text"},Snt={key:3,class:"history-playback-panel"},Cnt={class:"history-panel-content"},Tnt={class:"date-range-selector"},Mnt={class:"date-input"},knt={class:"date-input"},Ent={class:"playback-controls"},Ant=["disabled"],Pnt=["disabled"],Int=["disabled"],Lnt={class:"playback-progress"},Dnt={class:"time-display"},Rnt=["max"];function Ont(e,t,n,r,i,a){return te(),me("div",Wet,[V("div",Get,null,512),V("div",Ket,[t[30]||(t[30]=V("h3",null,"海事地图控制台",-1)),V("div",qet,[t[25]||(t[25]=V("h4",null,"地图控制",-1)),V("button",{onClick:t[0]||(t[0]=(...o)=>a.toggleMapType&&a.toggleMapType(...o))}," 地图类型: "+Xe(i.currentMapType==="standard"?"标准":"卫星"),1),V("button",{onClick:t[1]||(t[1]=(...o)=>a.toggleWeather&&a.toggleWeather(...o))}," 天气显示: "+Xe(i.weatherVisible?"开":"关"),1),V("button",{onClick:t[2]||(t[2]=(...o)=>a.centerOnShanghaiNingboRoute&&a.centerOnShanghaiNingboRoute(...o)),class:"focus-route-btn"}," 聚焦上海-宁波航线 "),V("div",Zet,[V("label",null,"缩放级别: "+Xe(i.zoomLevel.toFixed(1)),1),In(V("input",{type:"range",min:"3",max:"18",step:"0.5","onUpdate:modelValue":t[3]||(t[3]=o=>i.zoomLevel=o),onInput:t[4]||(t[4]=(...o)=>a.updateZoom&&a.updateZoom(...o))},null,544),[[qo,i.zoomLevel]])])]),V("div",Yet,[t[26]||(t[26]=V("h4",null,"船舶控制",-1)),V("button",{onClick:t[5]||(t[5]=(...o)=>a.toggleShips&&a.toggleShips(...o))}," 船舶显示: "+Xe(i.shipsVisible?"开":"关"),1),V("button",{onClick:t[6]||(t[6]=(...o)=>a.toggleTrackHistory&&a.toggleTrackHistory(...o))}," 航迹显示: "+Xe(i.showTrackHistory?"开":"关"),1),V("button",{onClick:t[7]||(t[7]=(...o)=>a.togglePlannedRoute&&a.togglePlannedRoute(...o))}," 计划航线: "+Xe(i.showPlannedRoute?"开":"关"),1),t[27]||(t[27]=Pse('<div class="ship-legend" data-v-493f5283><h5 data-v-493f5283>船舶类型图例</h5><div class="legend-item" data-v-493f5283><div class="legend-icon" style="color:#3498db;" data-v-493f5283>▲</div><div class="legend-text" data-v-493f5283>集装箱船</div></div><div class="legend-item" data-v-493f5283><div class="legend-icon" style="color:#e74c3c;" data-v-493f5283>◆</div><div class="legend-text" data-v-493f5283>油轮</div></div><div class="legend-item" data-v-493f5283><div class="legend-icon" style="color:#f39c12;" data-v-493f5283>■</div><div class="legend-text" data-v-493f5283>散货船</div></div><div class="legend-item" data-v-493f5283><div class="legend-icon" style="color:#27ae60;" data-v-493f5283>●</div><div class="legend-text" data-v-493f5283>滚装船</div></div><div class="legend-item" data-v-493f5283><div class="legend-icon" style="color:#8e44ad;" data-v-493f5283>▼</div><div class="legend-text" data-v-493f5283>渔船</div></div></div>',1))]),V("div",Xet,[t[29]||(t[29]=V("h4",null,"模拟控制",-1)),V("button",{onClick:t[8]||(t[8]=(...o)=>a.startSimulation&&a.startSimulation(...o)),disabled:i.simulationActive}," 开始模拟航行 ",8,Jet),V("button",{onClick:t[9]||(t[9]=(...o)=>a.stopSimulation&&a.stopSimulation(...o)),disabled:!i.simulationActive}," 停止模拟 ",8,Qet),V("div",ett,[t[28]||(t[28]=V("label",null,"模拟速度:",-1)),V("div",ttt,[(te(!0),me(hn,null,Kn(i.speedOptions,o=>(te(),me("button",{key:o.value,onClick:s=>a.changeSimulationSpeed(o.value),class:se({active:i.simulationSpeed===o.value})},Xe(o.label),11,ntt))),128))])]),V("button",{onClick:t[10]||(t[10]=(...o)=>a.enterHistoryPlaybackMode&&a.enterHistoryPlaybackMode(...o)),class:"history-mode-btn"}," Enter History Playback Mode ")]),V("div",rtt,[V("label",null,"经度: "+Xe(i.center[0].toFixed(4)),1),V("label",null,"纬度: "+Xe(i.center[1].toFixed(4)),1)])]),i.mapError?(te(),me("div",itt,[V("div",att,[t[31]||(t[31]=V("h3",null,"地图加载错误",-1)),V("p",ott,Xe(i.mapError),1),t[32]||(t[32]=V("div",null,[V("p",{class:"error-tip"},"解决方案"),V("ol",null,[V("li",null,"检查网络连接，确保能够访问 unpkg.com 获取Leaflet"),V("li",null,"如果网络问题导致无法加载Leaflet，您可以下载Leaflet并本地引"),V("li",null,"如果您在中国大陆，可以考虑使用国内CDN https://cdn.bootcdn.net/ajax/libs/leaflet/1.9.4/leaflet.js")]),V("p",{class:"error-tip"},[$t(" 优势提示: "),V("ul",null,[V("li",null,"�?Leaflet + OpenStreetMap 无需API密钥"),V("li",null,"�?不依赖第三方Cookie，避免Chrome浏览器限"),V("li",null,"�?开源、轻量，加载速度")])])],-1)),V("button",{onClick:t[11]||(t[11]=(...o)=>a.retryMapLoad&&a.retryMapLoad(...o)),class:"retry-button"},"重试加载"),V("button",{onClick:t[12]||(t[12]=(...o)=>a.checkEnvironment&&a.checkEnvironment(...o)),class:"check-button"},"环境检")])])):Ge("",!0),i.selectedShip?(te(),me("div",stt,[V("div",ltt,[V("div",utt,[t[33]||(t[33]=V("h3",null,"船舶详细信息",-1)),V("div",ctt,[$t(Xe(i.selectedShip.name)+" ",1),V("span",null,"("+Xe(i.selectedShip.nameEn)+")",1)]),V("div",{class:se(["ship-type-badge","ship-type-"+i.selectedShip.type])},Xe(i.selectedShip.type),3)]),V("div",dtt,[V("div",htt,[t[39]||(t[39]=V("div",{class:"card-header"},[V("h4",null,"基本信息"),V("div",{class:"card-icon"},"📋")],-1)),V("div",ftt,[V("div",ptt,[t[34]||(t[34]=V("span",{class:"info-label"},"IMO:",-1)),V("span",vtt,Xe(i.selectedShip.imo),1)]),V("div",mtt,[t[35]||(t[35]=V("span",{class:"info-label"},"MMSI:",-1)),V("span",gtt,Xe(i.selectedShip.mmsi),1)]),V("div",ytt,[t[36]||(t[36]=V("span",{class:"info-label"},"CallSign:",-1)),V("span",_tt,Xe(i.selectedShip.callsign),1)]),V("div",btt,[t[37]||(t[37]=V("span",{class:"info-label"},"状态:",-1)),V("span",{class:se(["info-value status-badge","status-"+i.selectedShip.status])},Xe(i.selectedShip.status),3)]),V("div",wtt,[t[38]||(t[38]=V("span",{class:"info-label"},"船旗:",-1)),V("span",xtt,Xe(i.selectedShip.flag),1)])])]),V("div",Stt,[t[48]||(t[48]=V("div",{class:"card-header"},[V("h4",null,"航行信息"),V("div",{class:"card-icon"},"🧭")],-1)),V("div",Ctt,[V("div",Ttt,[V("div",Mtt,[t[40]||(t[40]=V("span",{class:"coord-label"},"经度:",-1)),V("span",ktt,Xe(i.selectedShip.position[0].toFixed(4)),1)]),V("div",Ett,[t[41]||(t[41]=V("span",{class:"coord-label"},"纬度:",-1)),V("span",Att,Xe(i.selectedShip.position[1].toFixed(4)),1)])]),V("div",Ptt,[V("div",Itt,[t[42]||(t[42]=V("span",{class:"nav-label"},"SOG:",-1)),V("span",Ltt,Xe(i.selectedShip.sog),1)]),V("div",Dtt,[t[43]||(t[43]=V("span",{class:"nav-label"},"COG:",-1)),V("span",Rtt,Xe(i.selectedShip.cog),1)]),V("div",Ott,[V("div",{class:"compass",style:_n({transform:`rotate(${i.selectedShip.heading}deg)`})},t[44]||(t[44]=[V("div",{class:"compass-arrow"},null,-1)]),4),V("div",ztt,Xe(i.selectedShip.heading.toFixed(1))+"°",1)])]),V("div",Btt,[t[45]||(t[45]=V("span",{class:"info-label"},"速度:",-1)),V("span",Ftt,Xe(i.selectedShip.speed.toFixed(1)),1)]),V("div",Ntt,[t[46]||(t[46]=V("span",{class:"info-label"},"目的地:",-1)),V("span",$tt,Xe(i.selectedShip.destination),1)]),V("div",Vtt,[t[47]||(t[47]=V("span",{class:"info-label"},"预计到达:",-1)),V("span",Htt,Xe(i.selectedShip.eta),1)])])]),V("div",jtt,[t[56]||(t[56]=V("div",{class:"card-header"},[V("h4",null,"船舶规格"),V("div",{class:"card-icon"})],-1)),V("div",Utt,[V("div",Wtt,[V("div",Gtt,[t[49]||(t[49]=V("span",{class:"dimension-label"},"长度:",-1)),V("span",Ktt,Xe(i.selectedShip.length),1)]),V("div",qtt,[t[50]||(t[50]=V("span",{class:"dimension-label"},"宽度:",-1)),V("span",Ztt,Xe(i.selectedShip.width),1)]),V("div",Ytt,[t[51]||(t[51]=V("span",{class:"dimension-label"},"吃水:",-1)),V("span",Xtt,Xe(i.selectedShip.draft),1)])]),V("div",Jtt,[t[52]||(t[52]=V("span",{class:"info-label"},"载重量:",-1)),V("span",Qtt,Xe(i.selectedShip.capacity),1)]),V("div",ent,[V("div",tnt,[t[53]||(t[53]=V("span",{class:"draft-label"},"船首吃水:",-1)),V("span",nnt,Xe(i.selectedShip.fore_draft),1)]),V("div",rnt,[t[54]||(t[54]=V("span",{class:"draft-label"},"船尾吃水:",-1)),V("span",int,Xe(i.selectedShip.aft_draft),1)]),t[55]||(t[55]=V("div",{class:"ship-profile"},[V("div",{class:"ship-hull"}),V("div",{class:"water-level"})],-1))])])]),V("div",ant,[t[60]||(t[60]=V("div",{class:"card-header"},[V("h4",null,"运行状态"),V("div",{class:"card-icon"},"📊")],-1)),V("div",ont,[V("div",snt,[V("div",lnt,[V("div",unt,[t[57]||(t[57]=V("div",{class:"gauge-label"},"燃油剩余",-1)),V("div",{class:se(["gauge-value",a.getFuelClass(i.selectedShip.fuelRemaining)])},Xe(i.selectedShip.fuelRemaining.toFixed(1))+"% ",3)]),V("div",cnt,[V("div",{class:"gauge-fill",style:_n({width:i.selectedShip.fuelRemaining+"%",background:a.getFuelGradient(i.selectedShip.fuelRemaining)})},null,4)])]),V("div",dnt,[V("div",hnt,[t[58]||(t[58]=V("div",{class:"gauge-label"},"载货",-1)),V("div",fnt,Xe(i.selectedShip.cargoLoad)+"%",1)]),V("div",pnt,[V("div",{class:"gauge-fill",style:_n({width:i.selectedShip.cargoLoad+"%",background:"linear-gradient(90deg, #2ecc71, #27ae60)"})},null,4)])]),V("div",vnt,[V("div",mnt,[t[59]||(t[59]=V("div",{class:"gauge-label"},"航程进度",-1)),V("div",gnt,Xe(a.getRouteProgress(i.selectedShip).toFixed(1))+"%",1)]),V("div",ynt,[V("div",{class:"gauge-fill",style:_n({width:a.getRouteProgress(i.selectedShip)+"%",background:"linear-gradient(90deg, #3498db, #2980b9)"})},null,4)])])])])])]),V("div",_nt,[V("button",{class:"action-btn center-btn",onClick:t[13]||(t[13]=o=>a.centerOnShip(i.selectedShip))},t[61]||(t[61]=[V("span",{class:"btn-icon"},"🔍",-1),$t(" 居中显示 ")])),V("button",{class:"action-btn close-btn",onClick:t[14]||(t[14]=(...o)=>a.closeInfoPanel&&a.closeInfoPanel(...o))},t[62]||(t[62]=[V("span",{class:"btn-icon"},null,-1),$t(" 关闭 ")]))])])])):Ge("",!0),i.showEnvironmentInfo?(te(),me("div",bnt,[V("div",wnt,[t[68]||(t[68]=V("h3",null,"环境信息",-1)),V("p",null,[t[63]||(t[63]=V("strong",null,"Mapbox令牌状态：",-1)),$t(" "+Xe(i.mapboxToken?"已设":"未设"),1)]),V("p",null,[t[64]||(t[64]=V("strong",null,"令牌值：",-1)),t[65]||(t[65]=$t()),V("code",null,Xe(a.maskToken(i.mapboxToken)),1)]),a.hasQuotesInToken?(te(),me("p",xnt," ⚠️ 检测到令牌包含引号，这可能导致认证失败 ")):Ge("",!0),V("p",null,[t[66]||(t[66]=V("strong",null,"浏览器：",-1)),$t(" "+Xe(a.getBrowserInfo()),1)]),V("p",null,[t[67]||(t[67]=V("strong",null,"Cookie设置",-1)),$t(" "+Xe(a.areCookiesEnabled()?"已启":"已禁用或部分禁用"),1)]),V("button",{onClick:t[15]||(t[15]=(...o)=>a.closeEnvironmentPanel&&a.closeEnvironmentPanel(...o))},"关闭")])])):Ge("",!0),i.historyPlaybackMode?(te(),me("div",Snt,[V("div",Cnt,[t[74]||(t[74]=V("h3",null,"History Playback",-1)),V("div",Tnt,[V("div",Mnt,[t[69]||(t[69]=V("label",null,"Start Time:",-1)),In(V("input",{type:"datetime-local","onUpdate:modelValue":t[16]||(t[16]=o=>i.historyTimeRange.start=o)},null,512),[[qo,i.historyTimeRange.start]])]),V("div",knt,[t[70]||(t[70]=V("label",null,"End Time:",-1)),In(V("input",{type:"datetime-local","onUpdate:modelValue":t[17]||(t[17]=o=>i.historyTimeRange.end=o)},null,512),[[qo,i.historyTimeRange.end]])]),V("button",{onClick:t[18]||(t[18]=(...o)=>a.applyTimeFilter&&a.applyTimeFilter(...o)),class:"primary-button"},"Apply Filter")]),V("div",Ent,[V("button",{onClick:t[19]||(t[19]=(...o)=>a.startHistoryPlayback&&a.startHistoryPlayback(...o)),disabled:i.isHistoryPlaying,class:"play-button"},t[71]||(t[71]=[V("span",{class:"control-icon"},"►",-1),$t(" Play ")]),8,Ant),V("button",{onClick:t[20]||(t[20]=(...o)=>a.pauseHistoryPlayback&&a.pauseHistoryPlayback(...o)),disabled:!i.isHistoryPlaying,class:"pause-button"},t[72]||(t[72]=[V("span",{class:"control-icon"},"❚❚",-1),$t(" Pause ")]),8,Pnt),V("button",{onClick:t[21]||(t[21]=(...o)=>a.stopHistoryPlayback&&a.stopHistoryPlayback(...o)),disabled:!i.historyPlaybackActive,class:"stop-button"},t[73]||(t[73]=[V("span",{class:"control-icon"},"◼",-1),$t(" Stop ")]),8,Int)]),V("div",Lnt,[V("div",Dnt,Xe(a.formatPlaybackTime(i.historyPlaybackCurrentTime)),1),In(V("input",{type:"range",min:"0",max:i.historyPlaybackTotalSteps,"onUpdate:modelValue":t[22]||(t[22]=o=>i.historyPlaybackCurrentStep=o),onInput:t[23]||(t[23]=(...o)=>a.seekHistoryPlayback&&a.seekHistoryPlayback(...o)),class:"time-slider"},null,40,Rnt),[[qo,i.historyPlaybackCurrentStep]])]),V("button",{onClick:t[24]||(t[24]=(...o)=>a.exitHistoryPlayback&&a.exitHistoryPlayback(...o)),class:"exit-button"}," Back to Real-time Mode ")])])):Ge("",!0)])}const znt=Ms(Uet,[["render",Ont],["__scopeId","data-v-493f5283"]]),Bnt=[{path:"/",redirect:"/Demo2"},{path:"/digital-twin",name:"DigitalTwin",component:Jqe,meta:{title:"数字孪生监控平台"}},{path:"/maritime-map",name:"MaritimeMap",component:jet,meta:{title:"海事地图系统"}},{path:"/mapbox-maritime",name:"MapboxMaritime",component:znt,meta:{title:"Mapbox海事导航系统"}},{path:"/Demo2",name:"Demo2",component:Rze,meta:{title:"模型查看器"}},{path:"/Demo",name:"Demo",component:Gze,meta:{title:"模型查看器"}},{path:"/model-viewer",name:"ModelViewer",component:vze,meta:{title:"3D模型查看器"}},{path:"/:pathMatch(.*)*",redirect:"/"}],Vre=I3e({history:o3e(),routes:Bnt});Vre.beforeEach((e,t,n)=>{document.title=e.meta.title?`${e.meta.title} - 船舶/工业设备监控平台`:"船舶/工业设备数字孪生监控平台",n()});const Fnt=ble(),SE=uG(EOe);SE.use(Fnt);SE.use(_Oe);SE.use(Vre);SE.mount("#app");
